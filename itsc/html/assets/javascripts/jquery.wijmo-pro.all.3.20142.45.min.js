var wijmo;!function(a){a.expando=".wijmo";var b=function(){function a(a){this.message=a,this.stack="Wijmo"+(new Error).stack,this.name="WijmoError"}return a}();a.WijmoError=b;var c=b;c.prototype=new Error,c.prototype.constructor=c}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){var c=function(){function b(a){this.object=a}return b.getFrom=function(c,d){"undefined"==typeof d&&(d=!0);var e,f=a.expando;if(Object(c)!==c)return null;if(e=c[f],e&&e.object!==c&&(e=null),d&&!(e instanceof b&&Object.prototype.hasOwnProperty.call(c,f))){e=new b(c);try{Object.defineProperty(c,f,{"value":e,"configurable":!1,"enumerable":!1,"writable":!1})}catch(g){c[f]=e}}return e},b}();b.Expando=c}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){!function(a){function b(a){return function(){var b=function(){return a.prototype._call.apply(b,arguments)};return $.extend(b,a.prototype),a.apply(b,arguments),b}}a.funcClass=b}(a.util||(a.util={}));a.util}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(a){function b(a){return g.isFunction(a.subscribe)}function c(a){return"undefined"==typeof a&&(a=null),new n(a)}function d(a){return"undefined"==typeof a&&(a=0),new p(a)}function e(a){return"undefined"==typeof a&&(a=null),new n(a,!0)}function f(a){return g.isFunction(a)&&b(a)}var g=jQuery,h=function(){function a(a,b){this.handler=a,this.context=b}return a.prototype.trigger=function(a){return this.handler.apply(this.context,a)},a}();a.SubscriberEntry=h;var i=function(){function b(a){this.defaultContext=a,this._entries=[]}return b.prototype.subscribe=function(b,c){var d=this;"undefined"==typeof c&&(c=this.defaultContext);var e=new h(b,c);return this._entries.push(e),{"dispose":function(){return a.util.remove(d._entries,e)}}},b.prototype.trigger=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.util.each(this._entries,function(a,c){return c.trigger(b)})},b.makeSubscribable=function(a){var c=new b(a);return a.subscribe=g.proxy(c.subscribe,c),c},b}();a.Subscribable=i,a.isSubscriptable=b;var j=function(){function a(){}return a.prototype.subscribe=function(a,b){return this._subscribable=this._subscribable||new i(this),this._subscribable.subscribe(a,b)},a.prototype._trigger=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this._subscribable&&this._subscribable.trigger.apply(this._subscribable,arguments)},a}();a.BaseObservable=j;var k=function(a){function b(b){a.call(this),this.mutable=b}return __extends(b,a),b.prototype._call=function(){return this.mutable.value},b}(j);a._ReadOnlyObservable=k;var l=a.util.funcClass(k),m=function(a){function b(b,c){"undefined"==typeof c&&(c=!1),a.call(this),this.value=b,this.checkNewValue=c}return __extends(b,a),b.prototype._call=function(a){return arguments.length>0&&(!this.checkNewValue||a!==this.value)&&(this.value=a,this._trigger(a),this._readOnly&&this._readOnly._trigger(a)),this.value},b.prototype.read=function(){return this._readOnly=this._readOnly||new l(this),this._readOnly},b}(j);a._MutableObservable=m;var n=a.util.funcClass(m),o=function(a){function b(b){a.call(this,b,!1),this.value=b}return __extends(b,a),b.prototype.change=function(a){return this._call(this._call()+a)},b.prototype.inc=function(){return this.change(1)},b.prototype.dec=function(){return this.change(-1)},b}(m);a._NumericMutableObservable=o;var p=a.util.funcClass(o);a.observable=c,a.numericObservable=d,a.observableWithNewValueCheck=e,a.isObservable=f}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){!function(c){function d(a,b){return"undefined"==typeof b&&(b=!1),x.isArray(a)?a=a.slice(0):x.isPlainObject(a)&&(a=x.extend(!!b,{},a)),a}function e(a){return"string"==typeof a||a instanceof String}function f(a){return"number"==typeof a}function g(b){return b===a.expando||b===x.expando}function h(a,b){var c=this;x.each(a,function(a,d){return g(a)?void 0:b.call(c,a,d)})}function i(b,c){var d=x.map(b,c);return delete d[a.expando],d}function j(a){var b;return b=a&&x.isFunction(a.toString)&&a.toString!==Object.prototype.toString?a.toString():JSON.stringify(a),null!=b&&b.length>2&&'"'===b[0]&&'"'===b[b.length-1]&&(b=b.substr(1,b.length-2)),b}function k(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];return a.replace(/{(\d+)}/g,function(a,c){return j(b[parseInt(c,10)])})}function l(a,b){var c=!0;return h(a,function(a,d){return c=d,b&&(c=b.call(c,c,a)),c?void 0:!1}),c}function m(a,b){var c=!1;return h(a,function(a,d){return c=d,b&&(c=b.call(c,c,a)),c?!1:void 0}),c}function n(a,b){var c,d,f;if(null==a)return null==b?0:-1;if(null==b)return 1;if(x.isArray(a)&&x.isArray(b)){for(d=Math.min(a.length,b.length),c=0;d>c;c++)if(f=n(a[c],b[c]),0!==f)return f;return a.length-b.length}return e(a)&&e(b)?(a=a.toLowerCase(),b=b.toLowerCase(),b>a?-1:a>b?1:0):(f=a-b,isNaN(f)?0:f)}function o(a,b){return x.inArray(b,a)>=0}function p(a,b){var c,d=0;for(c=0;c<a.length;)a[c]!==b?c++:(a.splice(c,1),d++);return d}function q(a,b){return-1==a?-1:0==a?0:b?Math.ceil(a/b):1}function r(a,b){function c(){return a.apply(b,d)}for(var d=[],e=0;e<arguments.length-2;e++)d[e]=arguments[e+2];return"undefined"==typeof setTimeout?c():void setTimeout(c,10)}function s(a){"undefined"!=typeof console&&(console.error?console.error(a):console.log&&console.log(a))}function t(a,c){for(var d,e=0,f=a;;){var g=c.indexOf(".",e);if(g>=0?(d=c.substring(e,g),e=g+1):d=e>0?c.substring(e):c,f=f[d],b.isObservable(f)&&(f=f()),0>g)break}return f}function u(a,c,d){for(var e,f=0;;){var g=c.indexOf(".",f);g>=0?(e=c.substring(f,g),f=g+1):e=f>0?c.substring(f):c;var h=a[e];if(!(g>=0)){b.isObservable(h)?h(d):a[e]=d;break}b.isObservable(h)&&(h=h()),a=h}}function v(a){return"object"==typeof a&&!x.isArray(a)&&!x.isPlainObject(a)&&a.constructor!==Object.prototype.constructor}function w(a){c.each(a,function(a,b){b&&"object"==typeof b&&c.each(b,function(a,d){var e;c.isString(d)&&(e=/\/Date\((-?\d+)\)\//.exec(d),e&&(b[a]=new Date(parseInt(e[1],10))))})})}var x=jQuery;c.clone=d,c.isString=e,c.isNumeric=f,c.isInternalProperty=g,c.each=h,c.map=i,c.toStr=j,c.format=k,c.every=l,c.some=m,c.compare=n,c.contains=o,c.remove=p,c.pageCount=q,c.executeDelayed=r,c.logError=s,c.getProperty=t,c.setProperty=u,c.isClassInstance=v,c.convertDateProperties=w;var y=function(){function a(a){this.key=a}return a}();c.HashMapEntry=y;var z=function(){function a(){this.hash={}}return a.prototype.getEntry=function(a,b){if("undefined"==typeof b&&(b=!1),null===a)return!this.nullEntry&&b&&(this.nullEntry=new y(a)),this.nullEntry;var c,d=String(a),e=this.hash[d];if(null==e){if(!b)return null;e=[],this.hash[d]=e}for(var f=0;f<e.length;f++)if(e[f].key===a)return e[f];return b&&(c=new y(a),e.push(c)),null},a.prototype.containsKey=function(a){return!!this.getEntry(a)},a.prototype.get=function(a,b){"undefined"==typeof b&&(b=null);var c=this.getEntry(a);return c?c.value:b},a.prototype.put=function(a,b){this.getEntry(a,!0).value=b},a}();c.HashMap=z}(b.util||(b.util={}));b.util}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){b.errors={},b.errors._register=function(c){b.util.each(c,function(c,d){function e(){for(var c=[],e=0;e<arguments.length-0;e++)c[e]=arguments[e+0];var f;return $.isFunction(d)?d=d.apply(this,arguments):arguments.length>0&&(c.unshift(d),d=b.util.format.apply(this,c)),d=$.trim(d),f=d[d.length-1],"."!==f&&"!"!==f&&"?"!==f&&(d+="."),new a.WijmoError(d)}b.errors[c]=function(){throw e.apply(this,arguments)},b.errors[c].create=e})},b.errors._register({"indexOutOfBounds":"Index is outside the bounds of the array.","notImplemented":"The operation is not implemented","unsupportedOperation":"Unsupported operation","unsupportedFilterOperator":"Unsupported filter operator: {0}","unsupportedDataSource":"Unsupported data source","argument":function(a){var b="Unexpected argument value.";return a&&(b+="\nParameter name: "+a),b},"argumentNull":"Argument '{0}' is null/undefined","noParser":"There is no parser for type '{0}'","noUrl":"Url is not specified","cantConvert":"Value can't be converted to type '{0}': '{1}'","noGlobalize":"Globalize is not defined. Make sure you include globalize.js","itemNotInView":"Item {0} is not in the data view","unsupportedFilterFormat":"The filter format is not supported","multiPropertyKeysNotSupported":"Entities with multiple properties in the primary key are not supported. Entity type: {0}","keyPropertyNotFound":"Key property not found in {0} entity type"})}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){!function(b){function c(c,d){"undefined"==typeof d&&(d=!1),c=c.toLowerCase();var e=b.ops[c];if(!e){var f=b.opMap[c];f&&(e=b.ops[f])}return!e&&d&&a.errors.unsupportedFilterOperator(c),e}function d(d){if(!f.isPlainObject(d))return{"operator":"==","op":b.ops.equals,"value":d};var e=d.operator||b.ops.equals;if(a.util.isString(d.operator)){if("nofilter"===d.operator.toLowerCase())return null;e=c(d.operator,!0)}else f.isFunction(e.apply)||a.errors.unsupportedFilterOperator(e);return{"operator":d.operator,"op":e,"value":d.value}}function e(b){var c={"isEmpty":!1,"original":b,"func":null,"normalized":null};if(f.isFunction(b))c.func=b;else if(f.isArray(b))a.errors.unsupportedFilterFormat(b);else if(b){c.normalized={};var e=!1;a.util.each(b,function(b,g){f.isArray(g)&&a.errors.unsupportedFilterFormat(),g=d(g),g&&(c.normalized[b]=g,e=!0)}),e?c.func=function(b){return a.util.every(c.normalized,function(c,d){var e=a.util.getProperty(b,d);return c.op.apply(e,c.value)})}:c.normalized=null}return c.normalized||c.func||(c.isEmpty=!0,c.func=function(a){return!0}),c}var f=jQuery;b.opMap={"==":"equals","doesnotcontain":"notcontain","!=":"notequal",">":"greater","<":"less",">=":"greaterorequal","<=":"lessorequal","isnotempty":"notisempty","isnotnull":"notisnull"},b.normalizeCondition=d,b.compile=e,b.ops=function(){function b(a,b,c,d,e){return h[a.toLowerCase()]={"name":a,"displayName":b,"arity":c,"applicableTo":d,"apply":e}}function c(b){return b instanceof Date&&(b=b.getTime()),a.util.isString(b)&&(b=b.toLowerCase()),b}function d(a,d,e,f){b(a,d,2,e,function(a,b){return f(c(a),c(b))})}function e(a,c,d,e){b(a,c,1,d,e)}function f(a,b,c){d(a,b,i.prim,c)}function g(a,b,c){d(a,b,i.str,c)}var h={},i={"str":["string"],"prim":["string","number","datetime","currency","boolean"]};return f("Equals","Equals",function(a,b){return a==b}),f("NotEqual","Not equal",function(a,b){return a!=b}),f("Greater","Greater than",function(a,b){return a>b}),f("Less","Less than",function(a,b){return b>a}),f("GreaterOrEqual","Greater or equal",function(a,b){return a>=b}),f("LessOrEqual","Less or equal",function(a,b){return b>=a}),g("Contains","Contains",function(a,b){return a==b||a&&a.indexOf&&a.indexOf(b)>=0}),g("NotContain","Does not contain",function(a,b){return a!=b&&(!a||!a.indexOf||a.indexOf(b)<0)}),g("BeginsWith","Begins with",function(a,b){return a==b||a&&a.indexOf&&0==a.indexOf(b)}),g("EndsWith","Ends with",function(b,c){var d;return a.util.isString(b)&&a.util.isString(c)?(d=b.lastIndexOf(c),d>=0&&b.length-d===c.length):!1}),e("IsEmpty","Is empty",i.str,function(a){return!a&&0!==a&&a!==!1}),e("NotIsEmpty","Is not empty",i.str,function(a){return!!a||0===a||a===!1}),e("IsNull","Is null",i.prim,function(a){return null==a}),e("NotIsNull","Is not null",i.prim,function(a){return null!=a}),h}()}(a.filtering||(a.filtering={}));a.filtering}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){!function(b){function c(b){var c=[];return b=a.util.isString(b)?b.split(/,\s*/):$.isArray(b)?b.slice(0):[b],b=$.isArray(b)?b.slice(0):[b],a.util.each(b,function(b,d){var e=!0;if(null!=d){if(!a.util.isString(d))return void(null!=d.property&&c.push(d));if("-"===d[0])e=!1,d=d.substr(1);else{var f=/\s(asc|desc)\s*$/.exec(d);f&&(d=d.substr(0,f.index),e=!("desc"===f[1]))}c.push({"property":d,"asc":e})}}),c.length>0?c:null}function d(b,d){"undefined"==typeof d&&(d=a.util.compare);var e=c(b),f={"isEmpty":!0,"original":b,"propertyCompareTo":d,"compare":null,"normalized":e};return null!=e&&(f.isEmpty=!1,f.compare=function(b,c){var f,g,h=0;for(h=0;h<e.length;h++)if(g=e[h],f=d(a.util.getProperty(b,g.property),a.util.getProperty(c,g.property)),0!==f)return g.asc||(f=-f),f;return 0}),f}b.compile=d}(a.sorting||(a.sorting={}));a.sorting}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){function b(b){return e.isFunction(b)||a.errors.argument("factory"),f.push(b),{"dispose":function(){a.util.remove(f,b)}}}function c(b){if(d(b))return b;var c=a.util.some(f,function(a){return a(b)});return c||a.errors.unsupportedDataSource()}function d(a){return a&&e.isFunction(a.count)&&e.isFunction(a.item)&&e.isFunction(a.getProperty)}var e=jQuery,f=[];a.registerDataViewFactory=b,b(function(a){return d(a)&&a}),b(function(b){return e.isArray(b)&&new a.ArrayDataView(b)}),a.asDataView=c,a.isDataView=d}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){var b=jQuery,c=function(){function c(c){function d(a){return function(){if(!e){e=!0;try{a.apply(this,arguments)}finally{e=!1}}}}this.array=c,this.currentItem=a.observableWithNewValueCheck(null),this.currentPosition=a.observableWithNewValueCheck(-1);var e=!1;this.currentItem.subscribe(d(function(a){this.currentPosition(null==a?-1:b.inArray(a,this.array))}),this),this.currentPosition.subscribe(d(function(b){a.util.isNumeric(b)||a.errors.argument("value"),(-1>b||b>=this.array.length)&&a.errors.indexOutOfBounds(),this.currentItem(0>b?null:this.array[b])}),this)}return c.prototype.update=function(){var a=this.currentItem(),c=this.currentPosition(),d=b.inArray(a,this.array);0>d&&null==a&&null!=this._recentlyRemovedItem&&(d=b.inArray(this._recentlyRemovedItem,this.array)),d>=0?(a&&(this._recentlyRemovedItem=a),this.currentPosition(d)):c>=0&&c<this.array.length?this.currentItem(this.array[c]):c>=this.array.length&&this.array.length>0?(c=this.array.length-1,this.currentPosition(c),this.currentItem(this.array[c])):(this.currentPosition(-1),this.currentItem(null))},c.prototype.updateDelayed=function(){a.util.executeDelayed(this.update,this)},c}();a.CurrencyManager=c}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){var b=jQuery,c=function(){function b(b){function c(){this.pageSize()>0&&this.pageIndex()>=0?(this._skip=this.pageSize()*this.pageIndex(),this._take=this.pageSize()):(this._skip=0,this._take=-1),b(!0)}this.onChanged=b,this.filter=a.observable(),this._compiledFilter=a.filtering.compile(null),this.sort=a.observable(),this._compiledSort=a.sorting.compile(null),this.pageIndex=a.observable(0),this.pageSize=a.observable(0),this._skip=0,this._take=-1,this.filter.subscribe(function(a){this.onFilterChanged(a),b()},this),this.sort.subscribe(function(){this._compiledSort=a.sorting.compile(this.sort()),b()},this),this.pageIndex.subscribe(c,this),this.pageSize.subscribe(c,this)}return b.prototype.onFilterChanged=function(b){this._compiledFilter=a.filtering.compile(b)},b.prototype.setFilter=function(a){this.filter(a)},b.prototype.update=function(a){"filter"in a&&this.setFilter(a.filter),"sort"in a&&this.sort(a.sort),"pageSize"in a&&this.pageSize(a.pageSize),"pageIndex"in a&&this.pageIndex(a.pageIndex)},b.prototype.apply=function(a,b,c){"undefined"==typeof b&&(b=!0),"undefined"==typeof c&&(c=null);var d;if(this._compiledFilter.isEmpty)if(c)for(c.length=a.length,d=0;d<a.length;d++)c[d]=a[d];else c=a.slice(0);else for(c?c.length=0:c=[],d=0;d<a.length;d++){var e=a[d];this._compiledFilter.func(e)&&c.push(e)}this._compiledSort.isEmpty||this._stableSort(c,this._compiledSort.compare);var f=c.length;return b&&this._take>0&&(this._skip>0&&c.splice(0,Math.min(this._skip,c.length)),this._take<c.length&&(c.length=this._take)),{"results":c,"totalCount":f}},b.prototype._stableSort=function(a,b){var c=/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())&&/Google Inc/.test(navigator.vendor);b&&c?(a.forEach(function(b,c){a[c]={"index":c,"value":b}}),a.sort(function(a,c){var d=b(a.value,c.value);return 0===d?a.index-c.index:d}),a.forEach(function(b,c){a[c]=b.value})):a.sort(b)},b.prototype.toObj=function(){return{"filter":this._compiledFilter.normalized,"sort":this._compiledSort.normalized,"pageSize":this.pageSize(),"pageIndex":this.pageIndex()}},b}();a.Shape=c;var d=function(){function d(b){this.isRemote=!1,this.localPaging=!0,this.local=[],this._updatingShape=!1,this._pageCount=a.observable(1),this._totalItemCount=a.numericObservable(0),this._isLoaded=a.observable(!1),this._isLoading=a.observable(!1),this._currentEditItem=a.observable(),this._isCurrentEditItemNew=!1,this._currentEditItemSnapshot=null,this.isLoading=this._isLoading.read(),this.isLoaded=this._isLoaded.read(),this._changed=new a.Subscribable(this),this.currentEditItem=this._currentEditItem.read(),this._initCurrency(),this._initShape(b)}return d.prototype.dispose=function(){},d.prototype.count=function(){return this.local.length},d.prototype.item=function(b){return(0>b||b>=this.local.length)&&a.errors.indexOutOfBounds(),this.local[b]},d.prototype.indexOf=function(a){return b.inArray(a,this.local)},d.prototype.getSource=function(){return this.sourceArray},d.prototype.toObservableArray=function(){return this._koArray||(this._koArray=ko.observableArray(this.local)),this._koArray},d._getProps=function(c){var d=[];return a.util.each(c,function(a,c){a=String(a),a.match(/^_/)||(!b.isFunction(c)||c.subscribe)&&d.push({"name":a})}),d},d.prototype.getProperties=function(){return this.count()?d._getProps(this.item(0)):[]},d.prototype._readProperty=function(b,c){return a.util.getProperty(b,c)},d.prototype.getProperty=function(a,b){var c=this._getItem(a);return this._readProperty(c,b)},d.prototype._writeProperty=function(b,c,d){a.util.setProperty(b,c,d)},d.prototype.setProperty=function(a,b,c){var d=this._getItem(a);return d!==this.currentEditItem()||!this._currentEditItemSnapshot||b in this._currentEditItemSnapshot||(this._currentEditItemSnapshot[b]=this.getProperty(a,b)),this._writeProperty(d,b,c),this},d.prototype.subscribe=function(a,b){return this._changed.subscribe(a,b)},d.prototype.trigger=function(){this._currencyManager.update(),this._changed.trigger(this.local),this._koArray&&this._koArray.notifySubscribers(this.local)},d.prototype.canFilter=function(){return!0},d.prototype.canSort=function(){return!0},d.prototype._updateShape=function(a){this._updatingShape=!0;try{this._shape.update(a)}finally{this._updatingShape=!1}},d.prototype.prevPage=function(){return this.pageIndex()<1?!1:(this.pageIndex(this.pageIndex()-1),!0)},d.prototype.nextPage=function(){return this.pageCount()>0&&this.pageIndex()+1>=this.pageCount()?!1:(this.pageIndex(this.pageIndex()+1),!0)},d.prototype._createShape=function(a){return new c(a)},d.prototype._initShape=function(a){var b=this,c=function(a){"undefined"==typeof a&&(a=!1),b._updatingShape||b.refresh(null,a&&b.localPaging)};this._shape=this._createShape(c),a&&this._updateShape(a),this.filter=this._shape.filter,this.sort=this._shape.sort,this.pageIndex=this._shape.pageIndex,this.pageSize=this._shape.pageSize,this.pageCount=this._pageCount.read(),this.totalItemCount=this._totalItemCount.read()},d.prototype._localRefresh=function(c){"undefined"==typeof c&&(c=this.localPaging);var d=this._shape.apply(this.sourceArray,c,this.local);return c&&this._totalItemCount(d.totalCount),this._pageCount(a.util.pageCount(this.totalItemCount(),this.pageSize())),this.trigger(),b.Deferred().resolve().promise()},d.prototype._remoteRefresh=function(){return this._localRefresh()},d.prototype.refresh=function(a,b){var c=this;"undefined"==typeof b&&(b=!1),this.cancelRefresh(),a&&this._updateShape(a),this._isLoading(!0);var d=b?this._localRefresh():this._remoteRefresh();return d.then(function(){c._isLoaded(!0),c._isLoading(!1)})},d.prototype.cancelRefresh=function(){},d.prototype._initCurrency=function(){this._currencyManager=new a.CurrencyManager(this.local),this.currentItem=this._currencyManager.currentItem,this.currentPosition=this._currencyManager.currentPosition},d.prototype.isCurrentEditItemNew=function(){return this._isCurrentEditItemNew},d.prototype._beginEdit=function(a,b){this.commitEdit(),this._currentEditItemSnapshot={},this._isCurrentEditItemNew=b,this._currentEditItem(a)},d.prototype.canAdd=function(){return!0},d.prototype.add=function(b){b||a.errors.argument("item"),this.commitEdit(),this.local.push(b),this._beginEdit(b,!0),this.trigger()},d.prototype.canAddNew=function(){return!1},d.prototype.addNew=function(){return a.errors.unsupportedOperation()},d.prototype.editItem=function(a){"undefined"==typeof a&&(a=this.currentItem()),this.commitEdit(),a=this._getItem(a),a&&this._beginEdit(a,!1)},d.prototype.canRemove=function(){return!0},d.prototype._remove=function(b){this.local.splice(b.index,1),a.util.remove(this.sourceArray,b.item),this._totalItemCount.dec(),this.trigger()},d.prototype.remove=function(a){"undefined"==typeof a&&(a=this.currentItem()),this.commitEdit();var b=this._resolve(a);return b?(this._remove(b),!0):!1},d.prototype.canCancelEdit=function(){return!0},d.prototype.cancelEdit=function(){var c=this;if(this.currentEditItem()){var d=this.currentEditItem();this._currentEditItem(null),this._isCurrentEditItemNew?a.util.remove(this.local,d):this._currentEditItemSnapshot&&b.each(this._currentEditItemSnapshot,function(a,b){return c._writeProperty(d,a,b)}),this.trigger()}},d.prototype.canCommitEdit=function(){return!0},d.prototype.commitEdit=function(){if(this.currentEditItem()){var b=this.currentEditItem();this._currentEditItem(null),this._isCurrentEditItemNew&&(this.sourceArray.push(b),this._totalItemCount.inc());var c=this._shape._compiledFilter;c.isEmpty||c.func(b)||a.util.remove(this.local,b),this.trigger()}},d.prototype._getItem=function(b){return a.util.isNumeric(b)?this.item(b):b},d.prototype._resolve=function(b,c){"undefined"==typeof c&&(c=!1);var d;return a.util.isNumeric(b)?{"index":b,"item":this.item(b)}:(d=this.indexOf(b),0>d?(c&&a.errors.itemNotInView(b),null):{"index":d,"item":b})},d}();a.ArrayDataViewBase=d;var e=function(a){function b(b,c){a.call(this,c),this.sourceArray=b,this.refresh()}return __extends(b,a),b}(d);a.ArrayDataView=e}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){var b=jQuery,c=function(a){function c(b){a.call(this),this.isRemote=!0,this.sourceArray=[],b&&this._construct(b)}return __extends(c,a),c.prototype._construct=function(a){this.options=a=b.extend({"localPaging":!1},a),this.localPaging=a.localPaging,this._updateShape(a)},c}(a.ArrayDataViewBase);a.RemoteDataView=c}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(a){var b=jQuery,c=function(){function a(a){this._originalReader=a}return a.prototype.read=function(a){if(a.items=null,this._originalReader&&b.isFunction(this._originalReader.read)&&this._originalReader.read(a),b.isArray(a.items)||(b.isArray(a.data)?a.items=a.data:a.data&&b.isArray(a.data.rows)?a.items=a.data.rows:a.items=[]),a.dynamic&&(!a.data||isNaN(a.data.totalRows)))throw"totalRows value is missing"},a}(),d=function(d){function e(a){var e=this;d.call(this),this.dataSource=a,this.isRemote=!0,this.localPaging=!0,this._origLoaded=a.loaded,this._origReader=a.reader,a.loaded=function(a,c){e._loaded(),b.isFunction(e._origLoaded)&&e._origLoaded.apply(e,arguments)},a.reader=new c(a.reader);var f=a.items&&a.items.length>0;b.isArray(a.data)&&!f&&a.read(),a.items&&this._loaded()}return __extends(e,d),e.prototype.dispose=function(){this.dataSource.loaded=this._origLoaded,this.dataSource.reader=this._origReader,d.prototype.dispose.call(this)},e.prototype.getProperties=function(){return this.sourceArray&&this.sourceArray.length?a.ArrayDataViewBase._getProps(this.sourceArray[0]):[]},e.prototype._loaded=function(){this.sourceArray=this.dataSource.items,this.dataSource.data&&a.util.isNumeric(this.dataSource.data.totalRows)&&this._totalItemCount(this.dataSource.data.totalRows);var b=d.prototype._localRefresh.call(this,!this.dataSource.dynamic);this._currentDeferred&&b.then(this._currentDeferred.resolve)},e.prototype._remoteRefresh=function(){this._currentDeferred&&"pending"===this._currentDeferred.state()&&this._currentDeferred.fail(),this._currentDeferred=b.Deferred();var a={},c=!1;return this.dataSource.dynamic&&(c=!0,a.data=this._prepareRequest(),this.dataSource.proxy&&(this._origDataOption||(this._origDataOption=b.extend({},this.dataSource.proxy.options.data)),this.dataSource.proxy.options.data=b.extend({},this._origDataOption,a.data))),this.dataSource.load(a,c),this._currentDeferred},e.prototype._prepareRequest=function(){return{"filtering":this._prepareFilterRequest(),"paging":this._preparePageRequest(),"sorting":this._prepareSortRequest()}},e.prototype._prepareFilterRequest=function(){var a=[];return!this._shape._compiledFilter.isEmpty&&this._shape._compiledFilter.normalized&&b.each(this._shape._compiledFilter.normalized,function(b,c){a.push({"dataKey":b,"filterOperator":c.op.Name,"filterValue":c.value})}),a},e.prototype._preparePageRequest=function(){return{"pageIndex":this._shape.pageIndex(),"pageSize":this._shape.pageSize()}},e.prototype._prepareSortRequest=function(){return this._shape._compiledSort.isEmpty||!this._shape._compiledSort.normalized||0==this._shape._compiledSort.normalized.length?[]:b.map(this._shape._compiledSort.normalized,function(a){return{"dataKey":a.property,"sortDirection":a.asc?"ascending":"descending"}})},e}(a.ArrayDataViewBase);a.registerDataViewFactory(function(a){return"function"==typeof wijdatasource&&a instanceof wijdatasource?new d(a):void 0})}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._create=function(){window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c)),this.element.addClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.options.disabled&&this.disable(),this._refresh()},b.prototype._destroy=function(){this.element.removeClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.$ul.remove()},b.prototype._setOption=function(a,b){this._super(a,b),this._refresh()},b.prototype._refresh=function(){switch(this._validate(),this.$ul&&this.$ul.remove(),this.element.append(this.$ul=c('<ul class="ui-list '+this.options.wijCSS.cornerAll+" "+this.options.wijCSS.content+" "+this.options.wijCSS.helperClearFix+'" role="tablist"></ul>')),(this.options.mode||"").toLowerCase()){case"nextprevious":this._createNextPrev(!1);break;case"nextpreviousfirstlast":this._createNextPrev(!0);break;case"numeric":this._createNumeric(!1);break;case"numericfirstlast":this._createNumeric(!0)}},b.prototype._validate=function(){var a=this.options;(isNaN(a.pageCount)||a.pageCount<1)&&(a.pageCount=1),isNaN(a.pageIndex)||a.pageIndex<0?a.pageIndex=0:a.pageIndex>=a.pageCount&&(a.pageIndex=a.pageCount-1),(isNaN(a.pageButtonCount)||a.pageButtonCount<1)&&(a.pageButtonCount=1)},b.prototype._createNextPrev=function(a){var b=this.options,c=b.firstPageClass?b.firstPageClass+" "+b.wijCSS.iconSeekFirst:"",d=b.previousPageClass?b.previousPageClass+" "+b.wijCSS.iconSeekPrev:"",e=b.nextPageClass?b.nextPageClass+" "+b.wijCSS.iconSeekNext:"",f=b.lastPageClass?b.lastPageClass+" "+b.wijCSS.iconSeekEnd:"";a&&b.pageIndex&&this.$ul.append(this._createPagerItem(!1,b.firstPageText,1,c)),b.pageIndex&&this.$ul.append(this._createPagerItem(!1,b.previousPageText,b.pageIndex,d)),b.pageIndex+1<b.pageCount&&this.$ul.append(this._createPagerItem(!1,b.nextPageText,b.pageIndex+2,e)),a&&b.pageIndex+1<b.pageCount&&this.$ul.append(this._createPagerItem(!1,b.lastPageText,b.pageCount,f))},b.prototype._createNumeric=function(a){var b,c=this.options,d=c.pageIndex+1,e=1,f=Math.min(c.pageCount,c.pageButtonCount),g=c.firstPageClass?c.firstPageClass+" "+c.wijCSS.iconSeekFirst:"",h=c.lastPageClass?c.lastPageClass+" "+c.wijCSS.iconSeekEnd:"";for(d>f&&(e=Math.floor(c.pageIndex/c.pageButtonCount)*c.pageButtonCount+1,f=e+c.pageButtonCount-1,f=Math.min(f,c.pageCount),f-e+1<c.pageButtonCount&&(e=Math.max(1,f-c.pageButtonCount+1))),1!==e&&(a&&this.$ul.append(this._createPagerItem(!1,c.firstPageText,1,g)),this.$ul.append(this._createPagerItem(!1,"...",e-1,""))),b=e;f>=b;b++)this.$ul.append(this._createPagerItem(b===d,b.toString(),b,""));c.pageCount>f&&(this.$ul.append(this._createPagerItem(!1,"...",f+1,"")),a&&this.$ul.append(this._createPagerItem(!1,c.lastPageText,c.pageCount,h)))},b.prototype._createPagerItem=function(a,b,d,e){var f,g=this.options.wijCSS,h=this,i=c("<li />").addClass(g.pagerButton+" "+g.cornerAll).attr({"role":"tab","aria-label":b,"title":b});return a?i.addClass(g.stateActive).attr("aria-selected","true"):i.addClass(g.stateDefault).hover(function(){h.options.disabled||c(this).addClass(g.stateHover)},function(){h.options.disabled||c(this).removeClass(g.stateHover)}).bind("click."+this.widgetName,{"newPageIndex":d-1},c.proxy(this._onClick,this)),f=a?c("<span />"):e?c("<span />").addClass(g.icon+" "+e):c("<a/>").attr("href","#"),f.text(b),i.append(f),i},b.prototype._onClick=function(a){if(this.options.disabled)return!1;var b={"newPageIndex":a.data.newPageIndex,"handled":!1};if(this._trigger("pageIndexChanging",null,b)!==!1&&this.options.pageIndex!==b.newPageIndex){this.options.pageIndex=b.newPageIndex,b.handled||this._refresh();var c={"newPageIndex":b.newPageIndex};this._trigger("pageIndexChanged",null,c)}return!1},b}(a.wijmoWidget);b.wijpager=d,d.prototype.widgetEventPrefix="wijpager";var e=function(){function a(){this.wijCSS={"pagerButton":"wijmo-wijpager-button"},this.wijMobileCSS={"header":"ui-header ui-bar-a","content":"ui-body-b","stateDefault":"ui-btn ui-btn-b","stateHover":"ui-btn-down-b","stateActive":"ui-btn-down-c"},this.firstPageClass=c.wijmo.widget.prototype.options.wijCSS.iconSeekFirst,this.firstPageText="First",this.lastPageClass=c.wijmo.widget.prototype.options.wijCSS.iconSeekEnd,this.lastPageText="Last",this.mode="numeric",this.nextPageClass=c.wijmo.widget.prototype.options.wijCSS.iconSeekNext,this.nextPageText="Next",this.pageButtonCount=10,this.previousPageClass=c.wijmo.widget.prototype.options.wijCSS.iconSeekPrev,this.previousPageText="Previous",this.pageCount=1,this.pageIndex=0,this.pageIndexChanging=null,this.pageIndexChanged=null}return a}();d.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new e),c.wijmo.registerWidget("wijpager",d.prototype)}(a.pager||(a.pager={}));a.pager}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){"use strict";var b,c,d,e=jQuery;b=function(a){var b=this;b.data={},b.reader=null,b.proxy=null,b.items=[],b.loading=null,b.loaded=null,b._constructor(a)},window.wijdatasource=b,e.extend(b.prototype,{"_constructor":function(a){e.extend(this,a)},"load":function(a,b){var c=this,d=c.proxy;e.isFunction(c.loading)&&c.loading(c,a)===!1||(d?d.request(c,c.loaded,a):((0===c.items.length||b)&&this.read(),e.isFunction(c.loaded)&&c.loaded(c,a)))},"read":function(){var a=this,b=a.data;b&&a.reader?a.reader.read(a):a.items=a.data}}),c=function(a){e.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(a),e.isArray(a)&&(this.fields=a)},window.wijarrayreader=c,e.extend(c.prototype,{"read":function(a){e.isArray(a.data)?a.items=this._map(a.data):a.items=[]},"_map":function(a){var b=this,c=[];return void 0===b.fields||0===b.fields.length?(e.extend(!0,c,a),c):(e.each(a,function(a,d){var f={};
e.each(b.fields,function(a,b){if(b.mapping&&window[b.mapping]&&(b.mapping=window[b.mapping]),e.isFunction(b.mapping))return f[b.name]=b.mapping(d),!0;var c=void 0!==b.mapping?b.mapping:b.name,g=d[c];void 0===g&&(g=void 0!==b.defaultValue?b.defaultValue:d),f[b.name]=g}),c.push(f)}),c)}}),d=function(a){this.options=a,e.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(a)},window.wijhttpproxy=d,e.extend(d.prototype,{"request":function(a,b,c){var d,f,g=this;d=e.extend({},this.options),f=d.success,d.success=function(h){e.isFunction(f)&&f(h),g._complete(h,a,b,d,c)},e.ajax(d)},"_complete":function(a,b,c,d,f){b.data=void 0!==d.key?a[d.key]:a,b.read(),e.isFunction(c)&&c(b,f)}})}(a.checkbox||(a.checkbox={}));a.checkbox}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(b){function d(){b.apply(this,arguments)}return __extends(d,b),d.prototype._create=function(){var a,b=this;b.selectedItem=null,b.selectedItems=[],window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c));try{a=document.activeElement}catch(d){}b.element.is(":hidden")&&b.element.wijAddVisibilityObserver&&b.element.wijAddVisibilityObserver(function(){b.repaint(),b.element.wijRemoveVisibilityObserver&&b.element.wijRemoveVisibilityObserver()},"wijcombobox"),b._initInnerData(),b._createDOMElements(),b._bindInputEvents(),b._initDropDownList(),b.repaint(),b._checkSelectIndex(),b.options.text=b._input.val(),b._usingRemoteData()&&b.options.data&&(b.originalDataSourceLoaded=b.options.data.loaded),a===b._input[0]&&b.options.isEditable&&c(function(){b._input.focus()})},d.prototype._initInnerData=function(){var a,b=this,c=b.options;null!==c.dataSource?(a=b._isBind(),a?b.innerData=b._getMappingItems():b.innerData=c.data):b.innerData=c.data,b.listHasCreated=!1},d.prototype._checkSelectIndex=function(){var a,b=this,d=b.options,e=b.innerData;-1===d.selectedIndex&&null!=d.selectedValue&&c.each(e,function(a,b){return e[a].value===d.selectedValue?(d.selectedIndex=a,"multiple"===d.selectionMode&&(d.selectedIndex=[d.selectedIndex]),!1):void 0}),a=d.selectedIndex,!b._usingRemoteData()&&(a>=0||c.isArray(a))&&b.search(null,"checkindex"),-1===d.selectedIndex&&d.text&&(!d.forceSelectionText||d.forceSelectionText&&-1!==b._checkTextInItems(d.text))&&(b._input.val(d.text),d.selectedIndex=b._checkTextInItems(d.text),"multiple"===d.selectionMode&&(d.selectedIndex=[d.selectedIndex]),d.selectedIndex>-1&&b._checkSelectIndex())},d.prototype.repaint=function(){var a=this.options,b=this;if(b.element.is(":visible")||b._comboDiv||void 0!==b._select&&b._input.is(":visible")){if(b._showTrigger(),a.disabledState){var c=a.disabled;b.disable(),a.disabled=c}return a.disabled&&b.disable(),!0}return!1},d.prototype._bindInputEvents=function(){var b,d,e,f,g=this,h=this.options.wijCSS;b=g._input,d=g.options,b.bind("keydown.wijcombobox",function(h){if(d.disabledState!==!0&&!d.disabled)switch(e=h.keyCode,f=a.getKeyCodeEnum(),e){case f.UP:g._move("previous",h),h.preventDefault();break;case f.DOWN:g._move("next",h),h.preventDefault();break;case f.ENTER:g.menu.active&&(h.preventDefault(),"multiple"===d.selectionMode&&g.menu&&g.menu.items&&1===g.menu.items.length&&c.each(g.selectedItems,function(a,b){b!==g.menu.items[0]&&(b.selected=!1)}),g.menu.select(h)),h.preventDefault();break;case f.TAB:if(b.trigger("wijcomboblur"),!g.menu.active||"multiple"===d.selectionMode&&f.TAB===e)return;g.menu.select(h);var i=b.val().length;g._selectText(i,i,b);break;case f.ESCAPE:g.close(h,void 0);break;case f.LEFT:case f.RIGHT:case f.SHIFT:case 16:case 17:case f.CONTROL:case f.HOME:case f.END:case f.DELETE:case f.PAGE_UP:case f.PAGE_DOWN:break;case 18:b.trigger("wijcomboblur");break;default:if(229===e||c.browser.mozilla&&"Unidentified"===h.key&&0===e)return;g._processingSearch(b,e,h)}}).bind("wijcomboblur.wijcombobox",function(a){window.clearTimeout(g.searching),g._addInputFocus(!1,h.stateFocus),g.closing=window.setTimeout(function(){g.close(a,!0)},150)}).bind("focus.wijcombobox",function(){g._addInputFocus(!0,h.stateFocus)}).bind("blur.wijcombobox",function(){g.menu.element.is(":visible")||b.trigger("wijcomboblur"),g._inputBlurCausedByListItemClick||g._change()}).bind("compositionend.wijcombobox",function(a){g._processingSearch(b,e,a)}),c.browser.msie&&parseInt(c.browser.version)>9&&b.bind("mouseup.wijcombobox",function(a){""!==b.val()&&setTimeout(function(){""===b.val()&&g.menu.deactivate()},5)})},d.prototype._processingSearch=function(a,b,c){var d=this,e=d.options;window.clearTimeout(d.searching),e.isEditable===!1&&(void 0===d._cacheKey&&(d._cacheKey=""),d._cacheKey+=String.fromCharCode(b)),d.searching=window.setTimeout(function(){var b;e.isEditable===!1?(b=d._cacheKey,d._cacheKey=void 0):b=a.val(),d.search(b,c)},e.delay)},d.prototype._addInputFocus=function(a,b){var c,d,e,f=this;c=f._input.parent(),d=a?"addClass":"removeClass",e=f._triggerArrow,c[d](b),void 0!==e&&e[d](b)},d.prototype._renderColumnsHeader=function(a){var b=this,d=c("<ul class='wijmo-wijcombobox-rowheader'></ul>");c.each(this.options.columns,function(a,e){var f=c("<li class='wijmo-wijcombobox-cell "+b.options.wijCSS.header+"'></li>");f.html(e.name),void 0!==e.width&&f.width(e.width),f.appendTo(d)}),a.append(d)},d.prototype._hasSameValueText=function(a,b){return a.label===b.label&&a.value===b.value},d.prototype._initDropDownList=function(){var a,b,d,e,f,g,h=this,i=this.options.wijCSS,j=parseInt(h._input.css("zIndex"),10);a=h.element[0].ownerDocument,isNaN(j)&&(j=0),b=h._comboDiv?h._oriList:c("<div class='"+i.comboboxListCss+"'></div>"),d=h.options,d.columns.length>0&&(b.addClass("wijmo-wijcombobox-multicolumn"),e=c("<div class='wijmo-wijsuperpanel-header "+i.stateDefault+"'></div>"),h._renderColumnsHeader(e),b.append(e)),f={"keepHightlightOnMouseLeave":!0,"selectionMode":d.selectionMode,"addHoverItemClass":0===d.columns.length,"focus":function(a,b){var c=b;d.selectOnItemFocus&&h.menu.select(null,{"notCloseAfterSelected":!0}),d.columns.length>0&&c.element&&(c.element.prev().addClass("wijmo-wijcombobox-active-prev"),c.element.find(".wijmo-wijcombobox-row>.wijmo-wijcombobox-cell").addClass(i.stateHover))},"selected":function(a,b){window.clearTimeout(h.closing);var e,f,g,i,j=d.selectionMode,k=!1;if(e=b.item,f=c.inArray(e,h.items),!(0>f)){if(h._trigger("select",a,e))if("single"===j)if(h._usingRemoteData()){if(null===h.selectedItem||!h._hasSameValueText(e,h.selectedItem)){if(i=h.selectedItem,g=d.selectedIndex,k=h._triggerSelectedIndexChanging(i,e,g,b.selectedIndex))return;h._setInputText(e.label),h.selectedItem=e,f!==d.selectedIndex&&(d.selectedIndex=f,d.selectedValue=h.selectedItem.value),d.inputTextInDropDownList=!0,h._trigger("changed",null,{"selectedItem":e}),h._triggerSelectedIndexChanged(i,e,g,d.selectedIndex)}}else if(f!==d.selectedIndex){if(g=d.selectedIndex,i=h.selectedItem,k=h._triggerSelectedIndexChanging(i,e,g,f))return;h._setInputText(e.label),i&&(i.selected=!1),h.selectedItem=e,d.selectedIndex=f,d.selectedValue=h.selectedItem.value,d.inputTextInDropDownList=!0,i&&i.element&&i.element.removeClass("wijmo-wijcombobox-selecteditem"),h._trigger("changed",null,{"oldItem":i,"selectedItem":h.selectedItem,"newIndex":d.selectedIndex,"oldIndex":g}),h._triggerSelectedIndexChanged(i,h.selectedItem,g,d.selectedIndex)}else!h.selectedItem||h._input.val()===h.selectedItem.label||void 0!==b.data&&b.data.notCloseAfterSelected||h._input.val(e.label);else if(!h._usingRemoteData()){if(k=h._triggerSelectedIndexChanging(null,e,g,b.selectedIndex))return;h.selectedItems=b.selectedItems,h._selectedItemsToInputVal(h.selectedItems),d.inputTextInDropDownList=!0,d.selectedIndex=b.selectedIndex,h._trigger("changed",null,{"selectedItem":e,"selectedItems":h.selectedItems}),h._triggerSelectedIndexChanged(null,e,null,d.selectedIndex)}void 0!==b.data&&b.data.notCloseAfterSelected||"single"!==j||(h.close(a),h._input.focus()),h._inputBlurCausedByListItemClick=!1}},"blur":function(a,b){var c=b.element;d.columns.length>0&&c&&(c.find(".wijmo-wijcombobox-row>.wijmo-wijcombobox-cell").removeClass(i.stateHover),c.prev().removeClass("wijmo-wijcombobox-active-prev"))},"mouseDown":function(a){h._inputBlurCausedByListItemClick=!0},"itemRendering":function(a,b){var c=b,d="";c.isSeparator&&(d+=" wijmo-wijcombobox-separator"),c.selected&&(d+=" wijmo-wijcombobox-selecteditem"),d.length>0&&c.element.addClass(d)},"itemRendered":function(a,b){var e,f,g=b;void 0!==g.cells&&(e=g.element,e.empty(),f=c("<ul class='wijmo-wijcombobox-row'></ul>"),c.each(g.cells,function(a,b){var e=c("<li class='wijmo-wijcombobox-cell "+i.stateDefault+"'></li>");d.columns&&d.columns.length>a&&"undefined"!=typeof d.columns[a].width&&e.width(d.columns[a].width),e.append(b),e.attr("title",b),f.append(e)}),e.append(f))},"listRendered":function(a,b){var e,f,g=h.menu.selectedItem,i=h.menu.selectedItems;if("single"===d.selectionMode&&g){if(e=c.inArray(g,h.items),0>e)return;h.selectedItem=h.items[e],h._setInputText(h.selectedItem.label,!0),e>=-1&&(d.selectedIndex=e)}else i&&i.length>0&&(e=[],f=[],c.each(i,function(a,b){var d=c.inArray(b,h.items);return 0>d?!0:(e.push(d),void f.push(h.items[d]))}),h._selectedItemsToInputVal(f),e.length>=0&&(d.selectedIndex=e))},"superPanelOptions":{"resized":function(a){var b=h.menu,c=b.element;d.dropdownWidth=c.outerWidth(),d.dropdownHeight=c.outerHeight(),h._positionList(),h.menu.refreshSuperPanel()}}},f=c.extend(!0,f,d.listOptions),g=d.ensureDropDownOnBody?c("body"):h._comboElement,h.menu=b.appendTo(g,a).wijlist(f).css({"zIndex":j+1,"top":0,"left":0}).hide().data("wijmo-wijlist"),h._createDropDownList(),h._menuUL=h.menu.ul},d.prototype._setInputText=function(a,b){var c=this,d=c.options.text;c._input.val(a),c.options.text=a,d===a||b||c._trigger("textChanged",null,{"oldText":d,"newText":a})},d.prototype._triggerSelectedIndexChanged=function(a,b,d,e){var f,g=this.options;void 0!==this._select&&(c.isArray(g.selectedIndex)&&g.selectedIndex.length>0?this._select[0].selectedIndex=g.selectedIndex[0]:this._select[0].selectedIndex=g.selectedIndex,this._select.trigger("change")),"single"===g.selectionMode?this._trigger("selectedIndexChanged",null,{"oldItem":a,"selectedItem":b,"newIndex":e,"oldIndex":d}):(f=c.inArray(b,this.items),this._trigger("selectedIndexChanged",null,{"selectedItem":b,"selectedIndex":f,"selectedItems":this.selectedItems}))},d.prototype._triggerSelectedIndexChanging=function(a,b,d,e){var f,g,h=this.options,i=!0;return"single"===h.selectionMode?(g={"oldItem":a,"selectedItem":b,"newIndex":e,"oldIndex":d},i=this._trigger("selectedIndexChanging",null,g)):(f=c.inArray(b,this.items),g={"selectedItem":b,"selectedIndex":f,"selectedItems":this.selectedItems},i=this._trigger("selectedIndexChanging",null,g)),i||(b.selected=!1,b.element&&b.element.removeClass("wijmo-wijcombobox-selecteditem")),!i},d.prototype._createDropDownList=function(a){var b,d=this,e=d.options,f=a;f||(f=d.innerData),b=null===f?null:c.isArray(f)?f:f.items,d._comboDiv?!d.listHasCreated&&b&&b.length>0&&(d.menu.setTemplateItems(e.data),c.isArray(d.innerData)?d.innerData=d.menu.items:d.innerData.items=d.menu.items,d.items=d.menu.items,d.menu.renderList(),d.listHasCreated=!0):!d.listHasCreated&&b&&b.length>0&&(d.menu.setItems(b),c.isArray(d.innerData)?d.innerData=d.menu.items:d.innerData.items=d.menu.items,d.items=d.menu.items,d.menu.renderList(),d.listHasCreated=!0)},d.prototype._getSelectedItemsText=function(a){var b,d,e="";return b=this,d=b.options.multipleSelectionSeparator,b.selectedItems=a,c.each(a,function(a,b){b&&(e+=b.label+d)}),e.length>0&&(e=e.substr(0,e.lastIndexOf(d))),e},d.prototype._selectedItemsToInputVal=function(a){var b=this;b._setInputText(b._getSelectedItemsText(a))},d.prototype._createDOMElements=function(){var a,b,d,e,f=this,g=this.options.wijCSS;e=c("<div class='"+g.comboboxWrapperCss+" "+g.stateDefault+" "+g.cornerAll+"'></div>"),b=f.element,b.is("select")?(a=c("<div role='combobox' class='"+g.comboboxCss+" "+g.widget+" "+g.helperClearFix+"'></div>"),a.append(e),f._comboElement=a,f._select=b,b.addClass(g.widget),d=f._input=c("<input role='textbox' aria-autocomplete='list' aria-haspopup='true' />").insertAfter(b),f.options.data||(f.options.data=f._convertSelectOptions(),f._initInnerData())):b.is("div")&&c(b.children()[0]).is("input[type='text']")&&c(b.children()[1]).is("div")?(f._comboElement=f._comboDiv=a=b,f._oriList=c(b.children()[1]),d=f._input=c(b.children()[0]),e.prependTo(a).append(d),b.addClass(g.comboboxCss+" "+g.widget+" "+g.helperClearFix),b.attr("role","combobox")):(a=c("<div role='combobox' class='"+g.comboboxCss+" "+g.widget+" "+g.helperClearFix+"'></div>"),a.append(e),f._comboElement=a,d=f._input=b),f._comboDiv||(a.insertBefore(d),f.element.is(":visible")&&d.width(d.width()),a.children("."+g.comboboxWrapperCss).append(d)),b.attr("title")&&f._comboElement.attr("title",b.attr("title")),d.attr({"autocomplete":"off","role":"textbox","aria-wijcombobox":"list","aria-haspopup":"true"}).addClass(g.comoboboxInputCss),f._oldWidth=b.css("width"),f.options.isEditable===!1&&(d.attr("readonly","readonly"),e.bind("click",function(){f.options.disabledState===!0||f.options.disabled||f._triggerClick()})),(f.options.disabledState===!0||f.options.disabled===!0)&&(f._comboElement.addClass("wijmo-wijcombobox-disabled "+g.stateDisabled),d.attr("disabled","disabled")),a.bind("mouseenter.wijcombobox",function(){f.options.disabledState===!0||f.options.disabled||f._addInputFocus(!0,g.stateHover)}).bind("mouseleave.wijcombobox",function(){f._addInputFocus(!1,g.stateHover)})},d.prototype._convertSelectOptions=function(){var a,b,d=[];return a=this,b=a._select.get(0).options,c.each(b,function(a,b){d.push({"label":b.text,"value":b.value})}),-1===a.options.selectedIndex&&null===a.options.selectedValue&&null===a.options.text&&(a.options.selectedIndex=a._select[0].selectedIndex),d},d.prototype.getComboElement=function(){return this._comboElement},d.prototype._updateLabelTextElement=function(){var a=this,b=a.options,d=b.wijCSS,e="<label class='wijmo-wijcombobox-label "+d.content+"'></label>",f=a._input.parent().children(".wijmo-wijcombobox-label");null!==b.labelText?(0===f.length&&(f=c(e),a._input.parent().append(f)),a._label=f,f.html(b.labelText)):f&&(f.remove(),a._label=void 0)},d.prototype._showTrigger=function(){var a,b,d,e,f,g,h,i,j,k,l,m,n=this,o=this.options.wijCSS,p=0,q="<div class='"+o.comboboxTriggerCss+" "+o.stateDefault+" "+o.cornerRight+"'><span class='"+o.icon+" "+o.iconArrowDown+"'></span></div>";a=n.options,b=n._input,d=b.parent(),e=n._comboElement,g=n._triggerArrow,h=n._label,void 0!==n._select&&(n._select.is(":visible")?(c.browser.msie?(f=n._select.clone(),n._select.after(f),p=f.width(),f.remove()):p=n._select.width(),n._nativeWidth=p):p=n._nativeWidth,e.css("width",""),b.width(p+(a.dropdownHeight<n.menu.element.height()?a.selectElementWidthFix:0)),n._select.hide()),b.css("margin-left",""),b.css("margin-right",""),e.width(d[0].offsetWidth),n._updateLabelTextElement(),h=n._label,a.showTrigger?(b.removeClass(o.cornerAll),void 0===g&&(g=n._triggerArrow=c(q),e.append(g),g.bind("mouseover.triggerevent",n,function(b){if(a.disabledState!==!0&&!a.disabled){var d=c(b.currentTarget);d.addClass(o.stateHover)}}).bind("mousedown.triggerevent",n,function(b){if(a.disabledState!==!0&&!a.disabled){var d=c(b.currentTarget);d.addClass(o.stateActive)}}).bind("mouseup.triggerevent",n,function(a){var b=c(a.currentTarget);b.removeClass(o.stateActive)}).bind("click.triggerevent",n,function(){a.disabledState===!0||a.disabled||n._triggerClick()})),"right"===a.triggerPosition?(g.css({"left":"","right":"0px"}),g.removeClass(o.cornerLeft),g.addClass(o.cornerRight)):(g.css({"right":"","left":"0px"}),g.removeClass(o.cornerRight),g.addClass(o.cornerLeft)),g.setOutHeight(e.innerHeight()),i=g.find("span"),i.css("margin-left",(g.innerWidth()-i[0].offsetWidth)/2),i.css("margin-top",(g.innerHeight()-i[0].offsetHeight)/2)):(void 0!==g&&(g.unbind(".triggerevent"),g.remove(),n._triggerArrow=void 0),b.removeClass(o.cornerLeft),b.removeClass(o.cornerRight),b.addClass(o.cornerAll)),j=k=l=0,void 0!==h&&(k+=h.outerWidth(!0)),m="left"===a.triggerPosition?d.leftBorderWidth():d.rightBorderWidth(),void 0!==g&&(l=g.outerWidth(!0)-m),j=k+l,b.setOutWidth(d.width()-j),j=0===j?"":j,"right"===a.triggerPosition?(b.css("margin-left",""),b.css("margin-right",j),void 0!==h&&(h.css("left",""),h.css("right",l))):(b.css("margin-right",""),b.css("margin-left",j),void 0!==h&&(h.css("right",""),h.css("left",l)))},d.prototype._triggerClick=function(a){var b=this,c="";window.clearTimeout(b.closing),b.menu.element.is(":visible")?b.close():(b._usingRemoteData()&&(c=b._input.val()),b.search(c,a))},d.prototype.destroy=function(){var a=this,b=this.options.wijCSS,d=a.element;a.options.isEditable===!1&&d.removeAttr("readonly"),a._input&&a._input.unbind(".wijcombobox"),a._comboElement&&a._comboElement.unbind(".wijcombobox"),a._triggerArrow&&a._triggerArrow.unbind(".triggerevent"),void 0!==a._select?(a._select.removeClass(b.widget),a._select.show(),a._input.remove()):a._comboDiv?(a._comboDiv.removeClass(b.comboboxCss+" "+b.widget+" "+b.helperClearFix),a._comboDiv.removeAttr("role"),a._input.insertBefore(a._comboDiv),a._comboDiv.children("."+b.comboboxWrapperCss).remove()):(d.css("width",a._oldWidth),d.removeClass(b.comoboboxInputCss),d.removeAttr("autocomplete").removeAttr("role").removeAttr("aria-wijcombobox").removeAttr("aria-haspopup"),d.insertBefore(a._comboElement),d.css("padding","")),a.options.ensureDropDownOnBody&&c(window).unbind("resize.wijcombobox"),a._comboElement.remove(),a.menu.destroy(),a.menu.element.remove(),c.wijmo.widget.prototype.destroy.call(a)},d.prototype._setOption=function(a,b){var d,e,f,g,h,i,j,k,l,m=this,n=this.options.wijCSS,o=m._label,p=null,q=0,r=m.options;if(d=m._comboElement,e=m.element,g=e.parent(),j=r.selectedIndex,l=r.disabled,m._triggerArrow&&(q=m._triggerArrow.outerWidth()),c.wijmo.widget.prototype._setOption.apply(m,arguments),"disabled"===a){if(l===b)return;b?(d.addClass("wijmo-wijcombobox-disabled "+n.stateDisabled),m._input.attr("disabled","disabled"),m._comboDiv&&m._input.addClass("wijmo-wijcombobox-disabled "+n.stateDisabled).attr("disabled","disabled"),m.close()):(d.removeClass("wijmo-wijcombobox-disabled "+n.stateDisabled),m._input.removeAttr("disabled"),m._comboDiv&&m._input.removeClass("wijmo-wijcombobox-disabled "+n.stateDisabled).removeAttr("disabled"))}else if("labelText"===a)m._updateLabelTextElement(),o=m._label,o&&o.length>0&&(void 0!==m._triggerArrow&&(i=m._triggerArrow[0].offsetWidth),"right"===r.triggerPosition?void 0!==o&&(o.css("left",""),o.css("right",i)):void 0!==o&&(o.css("right",""),o.css("left",i)),m.repaint());else if("showTrigger"===a)m._showTrigger(),!r.showTrigger&&m.element.is("select")&&e.width(e.width()+q);else if("triggerPosition"===a)e.width(e.width()+q),m._showTrigger();else if("selectionMode"===a)m.menu._setOption("selectionMode",b);else if("isEditable"===a)b?(m._input.removeAttr("readonly"),c("."+n.comboboxWrapperCss,m._comboElement[0]).bind("click",function(){m._triggerClick()})):(m._input.attr("readonly","readonly"),c("."+n.comboboxWrapperCss,m._comboElement[0]).unbind("click"));else if("data"===a||"dataSource"===a){if(m._initInnerData(),m._setSelectedIndex(r.selectedIndex),c.isArray(m.innerData))m.listHasCreated=!1,m._createDropDownList();else try{m.innerData.loaded=function(a,b){null===a?m.items=null:m.items=c.isArray(a)?a:a.items,m.listHasCreated=!1,m._createDropDownList()},m.innerData.load(null)}catch(s){}-1!==r.selectedIndex&&(p=f?f[j]:null,f=m.innerData,m._trigger("changed",null,{"oldItem":p,"selectedItem":m.selectedItem,"newIndex":r.selectedIndex,"oldIndex":j}),m._triggerSelectedIndexChanged(p,m.selectedItem,j,r.selectedIndex)),m._keypress=!1}else if("selectedIndex"===a){if(b===j)return;if((null===b||void 0===b)&&(b=-1),f=null===m.innerData?null:c.isArray(m.innerData)?m.innerData:m.innerData.items,"single"===r.selectionMode){if(p=f?f[j]:null,b>-1){if(f&&null!==f[b]&&(k=f[b]),h=m._triggerSelectedIndexChanging(p,k,j,b))return void(r.selectedIndex=j);null!==j&&-1!==j&&void 0!==j&&p&&(p.selected=!1,this.menu.unselectItems(j),p.element&&p.element.removeClass("wijmo-wijcombobox-selecteditem")),f&&null!==f[b]&&(m.selectedItem=f[b],m.selectedItem&&(m.selectedItem.selected=!0,m._setInputText(m.selectedItem.label),r.selectedValue=m.selectedItem.value,r.inputTextInDropDownList=!0))}else if(-1>=b||!b){if(h=m._triggerSelectedIndexChanging(p,null,j,b))return void(r.selectedIndex=j);r.inputTextInDropDownList=!1,m._clearSelection()}m._trigger("changed",null,{"oldItem":p,"selectedItem":m.selectedItem,"newIndex":r.selectedIndex,"oldIndex":j}),m._triggerSelectedIndexChanged(p,m.selectedItem,j,r.selectedIndex)}else c.isArray(j)||(j=[j]),c.each(j,function(a,b){m.menu.items&&m.menu.items[b]&&(m.menu.items[b].selected=!1)}),this.menu.unselectItems(j),m.selectedItems=[],m.selectedItem=null,c.isArray(b)||(b=[b],r[a]=b),m._setSelectedIndex(b),c.each(b,function(a,b){m.menu.items&&m.menu.items[b]&&(m.menu.items[b].selected=!0)}),m._trigger("changed",null,{"oldItem":null,"selectedItem":m.selectedItems,"newIndex":r.selectedIndex,"oldIndex":null})}else if("selectedValue"===a)f=m.items,f||(f=m.innerData),"single"===r.selectionMode?p=f?f[j]:null:j=null,null!=b?(m.selectedItem&&void 0!==m.selectedItem.selected&&(m.selectedItem.selected=!1),f&&(this.options.selectedIndex>-1&&f.length>this.options.selectedIndex&&f[this.options.selectedIndex]&&(f[this.options.selectedIndex].selected=!1,this.menu.deactivate(),this.menu.unselectItems(this.options.selectedIndex),m.menu.items[this.options.selectedIndex].selected=!1),c.each(f,function(a,c){return f[a].value===b?(m.selectedItem=f[a],m.selectedItem.selected=!0,m.menu.items[a].selected=!0,m._setInputText(m.selectedItem.label),"single"===r.selectionMode?r.selectedIndex=a:r.selectedIndex=[a],r.inputTextInDropDownList=!0,!1):void 0}))):"single"===r.selectionMode&&(r.inputTextInDropDownList=!1,m._clearSelection()),m._trigger("changed",null,{"oldItem":p,"selectedItem":"single"===r.selectionMode?m.selectedItem:m.selectedItems,"newIndex":r.selectedIndex,"oldIndex":j});else if("text"===a){if(r.forceSelectionText&&-1===m._checkTextInItems(b))return;m._setInputText(b)}else"selectElementWidthFix"===a&&m._showTrigger()},d.prototype._setSelectedIndex=function(a){var b=this,d=b.options,e=[],f=b.innerData;null!==a&&void 0!==a&&(-1===a?(b.selectedItem=null,d.selectedIndex=-1,d.selectedValue=null,d.text?b._input.val(d.text):b._input.val("")):c.isArray(a)?(b.selectedItems=[],c.each(a,function(a,b){f&&null!==f[b]&&void 0!==f[b]&&(f[b].selected=!0,e.push(f[b]))}),b.selectedItems=e,b._selectedItemsToInputVal(e)):f&&null!==f[a]&&void 0!==f[a]?(f[a].selected=!0,b._input.val(f[a].label),b.selectedItem=f[a]):f&&c.isArray(f)&&a>f.length-1&&(d.selectedIndex=-1,b._input.val("")),d.text=b._input.val())},d.prototype.search=function(a,b){var d,e,f,g,h=this;if(d=h.options,e=h.innerData,window.clearTimeout(h.closing),f={"value":a,"e":b,"self":h},null!==e||h._comboDiv){if(g=h._isBind(),"checkindex"!==b&&h._trigger("search",b,{"datasrc":e,"term":f})===!1)return;if(c.isArray(e)||g||h._comboDiv||!h._usingRemoteData()&&e.items&&c.isArray(e.items)&&e.items.length>0)h._hideShowArrow(!1),h._onListLoaded(e,f);else{if(!g&&c.isArray(d.dataSource))return;if(h._usingRemoteData()&&void 0!==b&&a.length<d.minLength)return;h._hideShowArrow(!1),e.loaded=function(a,b){h.listHasCreated=!1,h._createDropDownList(a),h._onListLoaded(a,b),h.originalDataSourceLoaded&&h.originalDataSourceLoaded(a,b)},e.load(f)}}},d.prototype.getSelectedItems=function(){var a=this.options;return"single"===a.selectionMode?this.selectedItem:this.selectedItems},d.prototype._isBind=function(){var a=this.options,b=a.data;return null!==b&&b.label&&b.label.bind?!0:!1},d.prototype._getMappingItems=function(){var a,b,d,e=this.options,f=e.dataSource,g=e.data;return f&&g&&g.label&&g.label.bind&&g.value&&g.value.bind?(b=g.label.bind,d=g.value.bind,f&&0!==f.length?(a=[],c.each(f,function(c,e){a.push({"label":e[b],"value":e[d]})}),a):null):null},d.prototype._clearSelection=function(a){var b=this,d=b.options;"single"===d.selectionMode?b.selectedItem&&(b.selectedItem.selected=!1,b.selectedItem=null):b.selectedItems&&(c.each(b.selectedItems,function(a,b){b&&b.selected&&(b.selected=!1)}),b.selectedItem=null,b.selectedItems=[]),d.selectedValue=null,b._setInputText("",a)},d.prototype._usingRemoteData=function(){var a=this.options.data,b=!1;return!c.isArray(a)&&null!==a&&a.proxy&&(b=!0),b},d.prototype._hideShowArrow=function(a){var b,c,d=this;b=d.element,c=d._triggerArrow,void 0!==c&&c[a?"show":"hide"](),b[a?"removeClass":"addClass"]("wijmo-wijcombobox-loading")},d.prototype._onListLoaded=function(a,b){var d,e,f,g,h,i,j=b.self,k=this.options.wijCSS;return d=j._input,e=j.options,f=b.value,g=a?c.isArray(a)?a:a.items:null,j.items=g,"checkindex"===b.e?(h=e.selectedIndex,"multiple"===e.selectionMode&&c.isArray(h)?(j.selectedItems=[],c.each(h,function(a,b){var c=g[b];c.selected=!0,j.selectedItems.push(c)}),j._selectedItemsToInputVal(j.selectedItems)):(g[h].selected=!0,j.selectedItem=g[h],d.val(j.selectedItem.label)),void j._hideShowArrow(!0)):(""===d.val()&&(this.selectedItem&&""===this.selectedItem.label||(j._clearSelection(!0),j._setSelectedIndex(-1),j.menu.deactivate())),!j._usingRemoteData()&&g?i=g:(j._topHit=null,i=g),i&&i.length>0||j._comboDiv?j._openlist(i,b,f)&&j._addInputFocus(!0,k.stateFocus):j.close(null,!0),void j._hideShowArrow(!0))},d.prototype.close=function(a,b){var d,e,f,g=this,h=this.options.wijCSS;d=g.menu,g._dropDownHeight=d.element.outerHeight(),g._dropDownWidth=d.element.outerWidth(),window.clearTimeout(g.closing),!d.element.is(":visible")||d.element.is(":animated")||d.element.parent().is(":animated")||(g._trigger("close",a),d.deactivate(),e=g.options.hidingAnimation,!e||"size"!==e.effect&&"size"!==e.animated||(e.options=c.extend({"to":{"width":0,"height":0}},e.options)),f=d.element.attr("style"),b!==!0&&e?d.element.hide(e.effect||e.animated,e.options,e.speed||e.duration,function(){d.element.removeAttr("style").attr("style",f).hide(),e.callback&&e.callback.apply(this,arguments)}):d.element.hide(),g._addInputFocus(!1,h.stateFocus),c(document).unbind("mouseup",g.closeOnClick),g._inputBlurCausedByListItemClick=!1)},d.prototype._change=function(){var a,b=this,d=b.options,e=d.forceSelectionText,f=d.selectionMode,g=b._input,h=g.val(),i=b.selectedItem,j=b.selectedItems,k=b.innerData,l=-1;if(a=d.selectedIndex||d.selectedIndex>-1?d.selectedIndex:-1,e)"single"===f&&(null!==i&&void 0!==i?i.label!==h&&b._setInputText(i.label):b._setInputText(""));else if("single"===f){var m=!1;null!==i&&void 0!==i&&(m=i.label?i.label.toString()!==h:""!==h),!i&&""!==h||m?(null!==b.selectedItem&&void 0!==b.selectedItem&&(b.selectedItem.selected=!1,b.menu.unselectItems(d.selectedIndex)),l=b._checkTextInItems(h),-1===l?(b.selectedItem=null,d.selectedIndex=-1,d.selectedValue=null,d.inputTextInDropDownList=!1):k&&(k=c.isArray(k)?k:k.items,b.selectedItem=k[l],d.selectedIndex=l,d.selectedValue=b.selectedItem.value,d.inputTextInDropDownList=!0),b._setInputText(b._input.val()),b._trigger("changed",null,{"oldItem":i,"selectedItem":b.selectedItem,"newIndex":d.selectedIndex,"oldIndex":a}),a!==l&&b._triggerSelectedIndexChanged(i,b.selectedItem,a,d.selectedIndex)):b._setInputText(h)}"multiple"===f&&(b.selectedItems&&0!==b.selectedItems.length||(j=[i]),b._selectedItemsToInputVal(j))},d.prototype._checkTextInItems=function(a){var b=this.items,d=-1;return a&&b&&b.length&&c.each(b,function(b,c){return c&&c.label&&c.label.toString()===a?(d=b,!1):void 0}),d},d.prototype._openlist=function(b,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=d.self,u=d.e,v=2,w=0,x=c.trim(t._input.val()).length,y=a.getKeyCodeEnum(),z=!1;return f=t._keypress=!!u,i=t.options,h=t.menu.element,c.ui?h.zIndex(t.element.zIndex()+100):(q=parseInt(t.element.css("zIndex"),10),isNaN(q)&&(q=0),h.css("zIndex",q+100)),t.listHasCreated||t._createDropDownList(),t.innerData&&(r=c.isArray(t.innerData)?t.innerData:t.innerData.items),r&&0!==r.length?!t._usingRemoteData()&&null!==e&&void 0!==e&&(z=t._keypress&&i.isEditable&&0===i.columns.length&&i.highlightMatching&&x>0,u&&u.keyCode===y.DOWN&&0===e.length&&x>0?t._topHit=t.menu.filterItems(t._input.val(),!1,z):t._topHit=t.menu.filterItems(e,i.autoFilter,z),null===t._topHit&&t.innerData&&c("li[wijhidden]",t.menu.element).length===t.innerData.length)?(t.close(null,!0),!1):(t.menu.element.show(),g="auto"===i.dropdownWidth?t._comboElement.outerWidth():i.dropdownWidth,j=h.css("padding"),h.css("padding","0px"),h.setOutWidth(g),h.css("padding",j),k=i.dropdownHeight,h.children(".wijmo-wijsuperpanel-header")&&(w=h.children(".wijmo-wijsuperpanel-header").outerHeight()||0),m=t._menuUL.outerHeight()+v+w,k>m?(t._menuUL.setOutWidth(g),m=t._menuUL.outerHeight()+v+w):m=k,h.setOutHeight(m),t.menu.refreshSuperPanel(),t._positionList(),f||void 0===t.selectedItem||t.menu.activate(null,t.selectedItem,!0),f&&u.keyCode!==y.BACKSPACE?i.isEditable?t._runAutoComplete():t.menu.activate(null,t._topHit,!0):(n=t.options.showingAnimation,null===i.showingAnimation||void 0!==u&&u.keyCode===y.BACKSPACE||(t.menu.element.hide(),p={"from":{"width":0,"height":0},"to":{"width":t._dropDownWidth||h.outerWidth(),"height":t._dropDownHeight||h.outerHeight()}},!n||"size"!==n.effect&&"size"!==n.animated||(n.options=c.extend(p,n.options)),o=h.attr("style"),h.show(n.effect||n.animated,n.options,n.speed||n.duration,function(){h.removeAttr("style").attr("style",o).show(),n.callback&&n.callback.apply(this,arguments),c.browser.msie&&h.css("filter","")}))),t.hasOwnProperty("closeOnClick")||(l=t.closeOnClick,t.closeOnClick=function(a){return l(a)}),t._trigger("open"),c(document).bind("mouseup",t,t.closeOnClick),i.ensureDropDownOnBody&&c(window).bind("resize.wijcombobox",function(){s&&clearTimeout(s),s=setTimeout(function(){t._positionList()},100)}),!0):!1},d.prototype.closeOnClick=function(a){var b,d=a.data,e=d.options.wijCSS,f=a.target;c.contains(d._comboElement[0],f)||c.contains(d.menu.element[0],f)||(c.support.isTouchEnabled&&c.support.isTouchEnabled()?(b=d.menu.element.offset(),(a.pageX<b.left||a.pageX>b.left+d.menu.element.width()||a.pageY<b.top||a.pageY>b.top+d.menu.element.height())&&d.close()):d.close(),c("."+e.comboboxWrapperCss,d._comboElement[0]).removeClass(e.stateHover).removeClass(e.stateFocus),c("."+e.comboboxTriggerCss,d._comboElement[0]).removeClass(e.stateHover).removeClass(e.stateFocus)),d.options.ensureDropDownOnBody&&c(window).unbind("resize.wijcombobox")},d.prototype._positionList=function(){var a,b,d=this;a=d.options.dropDownListPosition,b={"my":"left top","at":"left bottom","of":d._comboElement,"collision":"none"},b=c.extend(b,a),d.menu.element.position(b)},d.prototype._runAutoComplete=function(){var a,b,c,d,e,f,g=this;a=g._input,b=g._topHit,g.options.autoComplete&&null!==b&&void 0!==b&&(g.menu.activate(null,b,!0),c=a.val(),d=b.label,a.val(d),e=c.length,f=d.length,g._selectText(e,f,a))},d.prototype._selectText=function(a,b,c){var d,e=c.val(),f=c.get(0);e.length>0&&(void 0!==f.setSelectionRange?f.setSelectionRange(a,b):void 0!==f.createTextRange&&(d=f.createTextRange(),d.moveStart("character",a),d.moveEnd("character",b-e.length),d.select()))},d.prototype._move=function(a,b){return this.menu.element.is(":visible")?void(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)||this.menu[a](b)):void this.search("",b)},d.prototype._escapeRegex=function(a){return void 0===a?a:a.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},d.prototype._filter=function(a,b){var d,e=this._escapeRegex(b),f=null;return a?(d=new RegExp(e,"i"),c.each(a,function(a,b){if(void 0===e||0===e.length)return void(b.match=!0);var c=d.exec(b.label);null===c?b.match=!1:(null===f&&0===c.index&&(f=b),b.match=c.index>=0)}),this._topHit=f,a):null},d}(a.wijmoWidget);b.wijcombobox=d;var e=function(){function a(){this.initSelector=":jqmData(role='wijcombobox')",
this.wijCSS={"comboboxCss":"wijmo-wijcombobox","comboboxWrapperCss":"wijmo-wijcombobox-wrapper","comoboboxInputCss":"wijmo-wijcombobox-input","comboboxListCss":"wijmo-wijcombobox-list","comboboxTriggerCss":"wijmo-wijcombobox-trigger"},this.dataSource=null,this.data=null,this.labelText=null,this.minLength=4,this.delay=300,this.showingAnimation=null,this.hidingAnimation=null,this.showTrigger=!0,this.triggerPosition="right",this.dropdownHeight=300,this.dropdownWidth="auto",this.selectOnItemFocus=!1,this.autoFilter=!0,this.autoComplete=!0,this.highlightMatching=!0,this.dropDownListPosition={},this.columns=[],this.selectionMode="single",this.multipleSelectionSeparator=",",this.forceSelectionText=!1,this.select=null,this.isEditable=!0,this.selectedIndex=-1,this.selectedValue=null,this.inputTextInDropDownList=!1,this.text=null,this.ensureDropDownOnBody=!0,this.open=null,this.close=null,this.selectElementWidthFix=6,this.search=null,this.changed=null,this.textChanged=null,this.selectedIndexChanged=null,this.selectedIndexChanging=null,this.listOptions=null}return a}();d.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new e),c.wijmo.registerWidget("wijcombobox",d.prototype)}(a.combobox||(a.combobox={}));a.combobox}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){var b=function(){function a(){this.OtherChar=0,this.Control=1,this.Numeric=2,this.MathSymbol=3,this.Symbol=4,this.Punctuation=5,this.Space=6,this.UpperCase=7,this.LowerCase=8,this.Katakana=9,this.Hiragana=10,this.FarEastPunctation=11,this.Hangul=12,this.FullWidth=32768}return a}();a.CharType=b;var c=function(){function a(){this.MinValue="\x00",this.MaxValue="\uffff",this.ANSISTART=0,this.ANSIEND=255,this.BOTHWIDTHSTART=65280,this.BOTHWIDTHEND=65519,this.FULLALPHASTART=65281,this.FULLUPPERSTART=65313,this.FULLUPPEREND=65338,this.FULLALPHAEND=65374,this.CJKHALFSYMBOLSTART=65377,this.CJKHALFSYMBOLEND=65380,this.KANAHALFSTART=65381,this.KANAHALFEND=65439,this.HANGULHALFSTART=65440,this.HANGULHALFEND=65500,this.FULLSYMBOLSTART=65504,this.FULLSYMBOLEND=65510,this.HALFPUNCTSTART=65512,this.HALFPUNCTEND=65518,this.KATAKANA_VOICED="\uff9e",this.KATAKANA_SEMIVOICED="\uff9f",this.Tab="	",this.Space=" ",this._charstarts=["\x00","\x80","\u0100","\u0180","\u0250","\u02b0","\u0300","\u0370","\u0400","\u0530","\u0590","\u0600","\u0700","\u0780","\u0900","\u0980","\u0a00","\u0a80","\u0b00","\u0b80","\u0c00","\u0c80","\u0d00","\u0d80","\u0e00","\u0e80","\u0f00","\u1000","\u10a0","\u1100","\u1200","\u13a0","\u1400","\u1680","\u16a0","\u1780","\u1800","\u1e00","\u1f00","\u2000","\u2070","\u20a0","\u20d0","\u2100","\u2150","\u2190","\u2200","\u2300","\u2400","\u2440","\u2460","\u2500","\u2580","\u25a0","\u2600","\u2700","\u2800","\u2e80","\u2f00","\u2ff0","\u3000","\u3040","\u30a0","\u3100","\u3130","\u3190","\u31a0","\u3200","\u3300","\u3400","\u4e00","\ua000","\ua490","\uac00","\uf900","\ufb00","\ufb50","\ufe20","\ufe30","\ufe50","\ufe70","\uff00","\ufff0"],this.Blocks=["BASIC_LATIN","LATIN_1_SUPPLEMENT","LATIN_EXTENDED_A","LATIN_EXTENDED_B","IPA_EXTENSIONS","SPACING_MODIFIER_LETTERS","COMBINING_DIACRITICAL_MARKS","GREEK","CYRILLIC","ARMENIAN","HEBREW","ARABIC","SYRIAC","THAANA","DEVANAGARI","BENGALI","GURMUKHI","GUJARATI","ORIYA","TAMIL","TELUGU","KANNADA","MALAYALAM","SINHALA","THAI","LAO","TIBETAN","MYANMAR","GEORGIAN","HANGUL_JAMO","ETHIOPIC","CHEROKEE","UNIFIED_CANADIAN_ABORIGINAL_SYLLABIC","OGHAM","RUNIC","KUMER","MONGOLIAN","LATIN_EXTENDED_ADDITIONAL","GREEK_EXTENDED","GENERAL_PUNCTUATION","SUPERSCRIPTS_AND_SUBSCRIPTS","CURRENCY_SYMBOLS","COMBINING_MARKS_FOR_SYMBOLS","LETTERLIKE_SYMBOLS","NUMBER_FORMS","ARROWS","MATHEMATICAL_OPERATORS","MISCELLANEOUS_TECHNICAL","CONTROL_PICTURES","OPTICAL_CHARACTER_RECOGNITION","ENCLOSED_ALPHANUMERICS","BOX_DRAWING","BLOCK_ELEMENTS","GEOMETRIC_SHAPES","MISCELLANEOUS_SYMBOLS","DINGBATS","BRAILLE_PATTERNS","CJK_RADICALS_SUPPLEMENT","KANGXI_RADICALS","IDEOGRAPHIC_DESCRIPTION_CHARACTERS","CJK_SYMBOLS_AND_PUNCTUATION","HIRAGANA","KATAKANA","BOPOMOFO","HANGUL_COMPATIBILITY_JAMO","KANBUN","BOPOMOFO_EXTENDED","ENCLOSED_CJK_LETTERS_AND_MONTHS","CJK_COMPATIBILITY","CJK_UNIFIED_IDEOGRAPHS_EXTENSION","CJK_UNIFIED_IDEOGRAPHS","YI_SYLLABLES","YI_RADICALS","HANGUL_SYLLABLES","CJK_COMPATIBILITY_IDEOGRAPHS","ALPHABETIC_PRESENTATION_FORMS","ARABIC_PRESENTATION_FORMS_A","COMBINING_HALF_MARKS","CJK_COMPATIBILITY_FORMS","SMALL_FORM_VARIANTS","ARABIC_PRESENTATION_FORMS_B","HALFWIDTH_AND_FULLWIDTH_FORMS","SPECIALS"],this._fullhalfblocks=["\uff01","\uff10","\uff1a","\uff21","\uff3b","\uff41","\uff5b","\uff61","\uff65","\uffa0","\uffe0","\uffe8"],this._halfkana=["\u30fb","\u30f2","\u30a1","\u30a3","\u30a5","\u30a7","\u30a9","\u30e3","\u30e5","\u30e7","\u30c3","\u30fc","\u30a2","\u30a4","\u30a6","\u30a8","\u30aa","\u30ab","\u30ad","\u30af","\u30b1","\u30b3","\u30b5","\u30b7","\u30b9","\u30bb","\u30bd","\u30bf","\u30c1","\u30c4","\u30c6","\u30c8","\u30ca","\u30cb","\u30cc","\u30cd","\u30ce","\u30cf","\u30d2","\u30d5","\u30d8","\u30db","\u30de","\u30df","\u30e0","\u30e1","\u30e2","\u30e4","\u30e6","\u30e8","\u30e9","\u30ea","\u30eb","\u30ec","\u30ed","\u30ef","\u30f3","\u3099","\u309a"],this._fullkana=["\uff67","\uff71","\uff68","\uff72","\uff69","\uff73","\uff6a","\uff74","\uff6b","\uff75","\uff76","\uff76","\uff77","\uff77","\uff78","\uff78","\uff79","\uff79","\uff7a","\uff7a","\uff7b","\uff7b","\uff7c","\uff7c","\uff7d","\uff7d","\uff7e","\uff7e","\uff7f","\uff7f","\uff80","\uff80","\uff81","\uff81","\uff6f","\uff82","\uff82","\uff83","\uff83","\uff84","\uff84","\uff85","\uff86","\uff87","\uff88","\uff89","\uff8a","\uff8a","\uff8a","\uff8b","\uff8b","\uff8b","\uff8c","\uff8c","\uff8c","\uff8d","\uff8d","\uff8d","\uff8e","\uff8e","\uff8e","\uff8f","\uff90","\uff91","\uff92","\uff93","\uff6c","\uff94","\uff6d","\uff95","\uff6e","\uff96","\uff97","\uff98","\uff99","\uff9a","\uff9b","\uff9c","\uff9c","\uff68","\uff6a","\uff66","\uff9d","\uff73","\uff76","\uff79","\uff9c","\uff68","\uff6a","\uff66","\uff65","\uff70"],this._fullkanaSmall=["\uff67","\uff68","\uff69","\uff6a","\uff6b","\uff6c","\uff6d","\uff6e","\uff6f"],this._accentkana=[0,0,0,0,0,0,0,0,0,0,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,0,-1,1,-1,1,-1,1,0,0,0,0,0,-3,1,2,-3,1,2,-3,1,2,-3,1,2,-3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,0,0],this._feQuotes=["\u2018","\u2019","\u201c","\u201d"],this._jpnMixed=["\u30fc"],this._jpnSpecialFull=["\u3000","\u3001","\u3002","\u300c","\u300d","\u201c","\u201d","\u2018","\u2019","\u309b","\u309c","\uffe5"],this._jpnSpecialHalf=[" ","\uff64","\uff61","\uff62","\uff63",'"','"',"'","'","\uff9e","\uff9f","\xa5"];var a=new b;this._mwtable=[a.Symbol|a.FullWidth,a.Numeric|a.FullWidth,a.Symbol|a.FullWidth,a.UpperCase|a.FullWidth,a.Symbol|a.FullWidth,a.LowerCase|a.FullWidth,a.Symbol|a.FullWidth,a.FarEastPunctation,a.Katakana,a.Hangul,a.Symbol|a.FullWidth,a.Symbol]}return a}();a.CharCategory=c;var d=function(){function a(){this.CharCategory=new c,this.Ctype=new b}return a.prototype.ToHalfKatakana=function(a){var b="";if(this.IsFullWidth(a)){if(this.IsKatakana(a)){var c=a,d=c.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1);if(0>d||d>91)return c;c=this.CharCategory._fullkana[d];var e=this.CharCategory._accentkana[d];e>0&&(c+=String.fromCharCode(1==e?this.CharCategory.KATAKANA_VOICED.charCodeAt(0):this.CharCategory.KATAKANA_SEMIVOICED.charCodeAt(0))),b=c}else if(this.IsHiragana(a)){var c=String.fromCharCode(a.charCodeAt(0)-this.CharCategory._charstarts[61].charCodeAt(0)+this.CharCategory._charstarts[62].charCodeAt(0)),d=c.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1);if(0>d||d>91)return c;c=this.CharCategory._fullkana[d];var e=this.CharCategory._accentkana[d];e>0&&(c+=String.fromCharCode(1==e?this.CharCategory.KATAKANA_VOICED.charCodeAt(0):this.CharCategory.KATAKANA_SEMIVOICED.charCodeAt(0))),b=c}}else this.IsKatakana(a)&&(b=a);return b},a.prototype.GetCharType=function(a){var b=this.Ctype.OtherChar,c=this.BelongTo(a);if(""==a||a>="\x00"&&"">=a||a>="\x80"&&"\x9f">=a)return this.Ctype.Control;if(a>="A"&&"Z">=a)return this.Ctype.UpperCase;if(a>="a"&&"z">=a)return this.Ctype.LowerCase;if(a>="0"&&"9">=a)return this.Ctype.Numeric;switch((this.IsFullWidthSymbol(a)||this.IsHalfWidthSymbol(a))&&(b=this.Ctype.Symbol),(8216==a.charCodeAt(0)||8217==a.charCodeAt(0)||8220==a.charCodeAt(0)||8221==a.charCodeAt(0))&&(b=this.Ctype.Punctuation),12288==a.charCodeAt(0)&&(b=this.Ctype.Space),this.CharCategory.Blocks[c]){case"HALFWIDTH_AND_FULLWIDTH_FORMS":return this.MultiWidthDetails(a);case"KATAKANA":return this.Ctype.Katakana|this.Ctype.FullWidth;case"HIRAGANA":return this.Ctype.Hiragana|this.Ctype.FullWidth}return this.IsFarEastBlock(c,a)&&(b|=this.Ctype.FullWidth),b},a.prototype.IsCharOfType=function(a,b){return this.GetCharType(a)==b},a.prototype.IsMultiWidth=function(a){var b=this.BelongTo(a),c=this.CharCategory.Blocks[b];return"KATAKANA"==c||"CJK_SYMBOLS_AND_PUNCTUATION"==c||"HALFWIDTH_AND_FULLWIDTH_FORMS"==c||"BASIC_LATIN"==c&&a>=" "},a.prototype.IsFullWidthSymbol=function(b){for(var c=0;c<a.FullWidthSymbolArray.length;c++)if(b===a.FullWidthSymbolArray[c])return!0;return!1},a.prototype.IsHalfWidthSymbol=function(b){for(var c=0;c<a.HalfWidthSymbolArray.length;c++)if(b===a.HalfWidthSymbolArray[c])return!0;return!1},a.prototype.IsFullWidth=function(a){if(this.IsFullWidthSymbol(a))return!0;if(this.IsHalfWidthSymbol(a))return!1;var b=this.BelongTo(a),c=this.IsFarEastBlock(b,a);return"HALFWIDTH_AND_FULLWIDTH_FORMS"==this.CharCategory.Blocks[b]&&(c=(this.MultiWidthDetails(a)&this.Ctype.FullWidth)==this.Ctype.FullWidth),c},a.prototype.IsSurrogatePair=function(a){return a.charCodeAt(0)>="\ud800".charCodeAt(0)&&a.charCodeAt(0)<="\udbff".charCodeAt(0)&&a.charCodeAt(1)>="\udc00".charCodeAt(0)&&a.charCodeAt(1)<="\udfff".charCodeAt(0)?!0:!1},a.prototype.IsSurrogate=function(a){return null!=a&&a.charCodeAt(0)>="\ud800".charCodeAt(0)&&a.charCodeAt(0)<="\udfff".charCodeAt(0)},a.prototype.IsOther=function(a){return(this.GetCharType(a)&~this.Ctype.FullWidth)==this.Ctype.OtherChar},a.prototype.IsControl=function(a){return(this.GetCharType(a)&~this.Ctype.FullWidth)==this.Ctype.Control},a.prototype.IsKatakana=function(a){return(this.GetCharType(a)&~this.Ctype.FullWidth)==this.Ctype.Katakana},a.prototype.IsSmallHalfKatakana=function(a){var b=new Array("\u30a1","\u30a3","\u30a5","\u30a7","\u30a9","\u30e3","\u30e5","\u30e7","\u30c3","\u30ee"),c=a;a.charCodeAt(0)>this.CharCategory.KANAHALFSTART&&(c=this.CharCategory._halfkana[a.charCodeAt(0)-this.CharCategory.KANAHALFSTART]);for(var d=0;d<b.length;d++)if(c==b[d])return!0;return!1},a.prototype.IsHiragana=function(a){return(this.GetCharType(a)&~this.Ctype.FullWidth)==this.Ctype.Hiragana||this.CharCategory._jpnMixed[0]==a},a.prototype.IsShiftJIS=function(a){return!1},a.prototype.IsJISX0208=function(a){return!1},a.prototype.IsDigit=function(a){return(this.GetCharType(a)&~this.Ctype.FullWidth)==this.Ctype.Numeric},a.prototype.IsPunctuation=function(a){return(this.GetCharType(a)&~this.Ctype.FullWidth)==this.Ctype.Punctuation},a.prototype.IsMathSymbol=function(a){return(this.GetCharType(a)&~this.Ctype.FullWidth)==this.Ctype.MathSymbol},a.prototype.IsSymbol=function(a){return(this.GetCharType(a)&~this.Ctype.FullWidth)==this.Ctype.Symbol},a.prototype.IsLower=function(a){return(this.GetCharType(a)&~this.Ctype.FullWidth)==this.Ctype.LowerCase},a.prototype.IsUpper=function(a){return(this.GetCharType(a)&~this.Ctype.FullWidth)==this.Ctype.UpperCase},a.prototype.IsDigitOrSymbol=function(a){return this.IsDigit(a)||this.IsMathSymbol(a)},a.prototype.IsAlphabet=function(a){return this.IsUpper(a)||this.IsLower(a)},a.prototype.IsAlphaOrDigit=function(a){return this.IsUpper(a)||this.IsLower(a)||this.IsDigit(a)},a.prototype.IsUpperKana=function(a){return!this.IsLowerKana(a)},a.prototype.IsLowerKana=function(b){return-1!=a.LowerKana.search(b)},a.prototype.HasLowerKana=function(b){return-1!=a.UpperKana.search(b)||this.IsLowerKana(b)},a.prototype.ToUpperKana=function(b){var c=a.LowerKana.search(b);return-1==c?b:a.UpperKana.substr(c,1)},a.prototype.ToLowerKana=function(b){var c=a.UpperKana.search(b);return c>=a.UpperKana.length-4&&c<a.UpperKana.length?b:-1==c?b:a.LowerKana.substr(c,1)},a.prototype.ToLower=function(a){return this.IsUpper(a)?String.fromCharCode(a.charCodeAt(0)+32):a},a.prototype.ToUpper=function(a){return this.IsLower(a)?String.fromCharCode(a.charCodeAt(0)-32):a},a.prototype.IsSpace=function(a){return" "==a||"\u3000"===a},a.prototype.ToFullWidth=function(a){var b={"text":"","processedAll":!1};if(b.text=a,b.processedAll=!1,0==a.length)return b;var c=a.substring(0,1);if(this.IsMultiWidth(c)){if(c<this.CharCategory._charstarts[1]){if(" "==c)return b.text="\u3000",b;var d="!";return b.text=String.fromCharCode(c.charCodeAt(0)-d.charCodeAt(0)+(this.CharCategory._charstarts[81].charCodeAt(0)+1)),b}if((this.MultiWidthDetails(c)&this.Ctype.Katakana)==this.Ctype.Katakana){if(c.charCodeAt(0)<this.CharCategory.KANAHALFSTART){var e=this.GetFullHalfWidthSpecialChar(c,!0);return b.text=""!==e?e:c,b}if(c=this.CharCategory._halfkana[c.charCodeAt(0)-this.CharCategory.KANAHALFSTART],a.length<2)return b.text=c,b;var f=a.charCodeAt(1)-(this.CharCategory.KATAKANA_VOICED.charCodeAt(0)-1);if(1==f||2==f){b.processedAll=!0;var g=this.CharCategory._accentkana[c.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1)];0!=g&&((2&Math.abs(g))==f&&(c=String.fromCharCode(c.charCodeAt(0)+1)),c=String.fromCharCode(c.charCodeAt(0)+1))}1==f&&"\u30a6"==c&&(c="\u30f4")}}return b.text=c,b},a.prototype.ToHalfWidth=function(a){return this.ToHalfWidthEx(a)},a.prototype.ToHalfWidthEx=function(a){var b=this.GetCharType(a),c=this.IsMultiWidth(a);if((b&this.Ctype.FullWidth)==this.Ctype.FullWidth)switch(b&~this.Ctype.FullWidth){case this.Ctype.Punctuation:case this.Ctype.UpperCase:case this.Ctype.LowerCase:case this.Ctype.Symbol:case this.Ctype.Numeric:case this.Ctype.MathSymbol:var d=this.GetFullHalfWidthSpecialChar(a,!1);if(""!==d)a=d;else if(c){var e="!";a=String.fromCharCode(a.charCodeAt(0)-(this.CharCategory._charstarts[81].charCodeAt(0)+1)+e.charCodeAt(0))}break;case this.Ctype.Katakana:var f=a.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1);if(0>f||f>91)return a;a=this.CharCategory._fullkana[f];var g=this.CharCategory._accentkana[f];if(g>0)return a+=String.fromCharCode(1==g?this.CharCategory.KATAKANA_VOICED.charCodeAt(0):this.CharCategory.KATAKANA_SEMIVOICED.charCodeAt(0));break;case this.Ctype.Space:a=" ";break;case this.Ctype.Hangul:}return a},a.prototype.ToKatakana=function(a){if(!this.IsCharOfType(a,this.Ctype.Hiragana|this.Ctype.FullWidth))return a;var b=this.GetFullHalfWidthSpecialChar(a,!1);return""!==b?b:String.fromCharCode(a.charCodeAt(0)-this.CharCategory._charstarts[61].charCodeAt(0)+this.CharCategory._charstarts[62].charCodeAt(0))},a.prototype.ToHiragana=function(a){return this.IsKatakana(a)?(this.IsFullWidth(a)||(a=this.ToFullWidth(a).text),this.IsCharOfType(a,this.Ctype.Katakana|this.Ctype.FullWidth)?a>="\u30f7"&&"\u30ff">=a?a:"\u30f5"==a?"\u304b":"\u30f6"==a?"\u3051":String.fromCharCode(a.charCodeAt(0)+this.CharCategory._charstarts[61].charCodeAt(0)-this.CharCategory._charstarts[62].charCodeAt(0)):a):a},a.prototype.ToBigHalfKatakana=function(a){if(!this.IsSmallHalfKatakana(a))return a;var b=this.CharCategory._halfkana[a.charCodeAt(0)-this.CharCategory.KANAHALFSTART];return b=String.fromCharCode(b.charCodeAt(0)+1)},a.prototype.BelongTo=function(a){for(var b=0,c=83,d=c>>1;c-b>1;)a>=this.CharCategory._charstarts[d]?b=d:c=d,d=c+b>>1;return d},a.prototype.MultiWidthDetails=function(a){for(var b=0,c=this.CharCategory._fullhalfblocks.length,d=c>>1;c-b>1;)a>=this.CharCategory._fullhalfblocks[d]?b=d:c=d,d=c+b>>1;return this.CharCategory._mwtable[d]},a.prototype.IsFarEastBlock=function(a,b){switch(this.CharCategory.Blocks[a]){case"CJK_COMPATIBILITY":case"CJK_COMPATIBILITY_FORMS":case"CJK_COMPATIBILITY_IDEOGRAPHS":case"CJK_RADICALS_SUPPLEMENT":case"CJK_SYMBOLS_AND_PUNCTUATION":case"CJK_UNIFIED_IDEOGRAPHS":case"CJK_UNIFIED_IDEOGRAPHS_EXTENSION":case"HALFWIDTH_AND_FULLWIDTH_FORMS":case"BOPOMOFO":case"BOPOMOFO_EXTENDED":case"HIRAGANA":case"KATAKANA":case"KANBUN":case"HANGUL_COMPATIBILITY_JAMO":case"HANGUL_JAMO":case"HANGUL_SYLLABLES":return!0;default:for(var c=0;c<this.CharCategory._feQuotes.length;c++)if(b==this.CharCategory._feQuotes[c])return!0;if(b.charCodeAt(0)>255)return!0;if(8216==b.charCodeAt(0)||8217==b.charCodeAt(0)||8220==b.charCodeAt(0)||8221==b.charCodeAt(0))return!0}return!1},a.prototype.GetFullHalfWidthSpecialChar=function(a,b){if(1==b)var c=this.CharCategory._jpnSpecialHalf,d=this.CharCategory._jpnSpecialFull;else var c=this.CharCategory._jpnSpecialFull,d=this.CharCategory._jpnSpecialHalf;for(var e=-1,f=0;f<c.length;){if(c[f]==a){e=f;break}f++}return-1!=e&&f<d.length?d[f]:""},a.LowerKana="\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\u30f5\u30f6\u3095\u3096",a.UpperKana="\u3042\u3044\u3046\u3048\u304a\u3064\u3084\u3086\u3088\u308f\u30a2\u30a4\u30a6\u30a8\u30aa\u30c4\u30e4\u30e6\u30e8\u30ef\uff71\uff72\uff73\uff74\uff75\uff94\uff95\uff96\uff82\u30ab\u30b1\u304b\u3051",a.FullWidthSymbolArray=["\u3001","\u3002","\uff0c","\uff0e","\u30fb","\uff1a","\uff1b","\uff1f","\uff01","\u309b","\u309c","\xb4","\uff40","\xa8","\uff3e","\uffe3","\uff3f","\u30fd","\u30fe","\u309d","\u309e","\u3003","\u4edd","\u3005","\u3006","\u3007","\u30fc","\u2014","\u2010","\uff0f","\u301c","\u2016","\uff5c","\u2026","\u2025","\u2018","\u2019","\u201c","\u201d","\uff08","\uff09","\u3014","\u3015","\uff3b","\uff3d","\uff5b","\uff5d","\u3008","\u3009","\u300a","\u300b","\u300c","\u300d","\u300e","\u300f","\u3010","\u3011","\uff0b","\u2212","\xb1","\xd7","\xf7","\uff1d","\u2260","\uff1c","\uff1e","\u2266","\u2267","\u221e","\u2234","\u2642","\u2640","\xb0","\u2032","\u2033","\u2103","\uffe5","\uff04","\xa2","\xa3","\uff05","\uff03","\uff06","\uff0a","\uff20","\xa7","\u2606","\u2605","\u25cb","\u25cf","\u25ce","\u25c7","\u25c6","\u25a1","\u25a0","\u25b3","\u25b2","\u25bd","\u25bc","\u203b","\u3012","\u2192","\u2190","\u2191","\u2193","\u3013","\uff07","\uff02","\uff0d","\u3033","\u3034","\u3035","\u303b","\u303c","\u30ff","\u309f","\u2208","\u220b","\u2286","\u2287","\u2282","\u2283","\u222a","\u2229","\u2284","\u2285","\u228a","\u228b","\u2209","\u2205","\u2305","\u2306","\u2227","\u2228","\xac","\u21d2","\u21d4","\u2200","\u2203","\u2295","\u2296","\u2297","\u2225","\u2226","\u2985","\u2986","\u3018","\u3019","\u3016","\u3017","\u2220","\u22a5","\u2312","\u2202","\u2207","\u2261","\u2252","\u226a","\u226b","\u221a","\u223d","\u221d","\u2235","\u222b","\u222c","\u2262","\u2243","\u2245","\u2248","\u2276","\u2277","\u2194","\u212b","\u2030","\u266f","\u266d","\u266a","\u2020","\u2021","\xb6","\u266e","\u266b","\u266c","\u2669","\u25ef","\uff3c","\uff5e","\uffe0","\uffe1","\uffe2","\u2015"],a.HalfWidthSymbolArray=["\\","~","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","]","^","_","`","{","|","}","\uff61","\uff62","\uff63","\uff64","\uff65","\xa1","\xa4","\xa5"],a.CharEx=new a,a}();a.CharProcess=d}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){var b=function(){function a(){}return a.Getbyte64=function(b,c){var d=a.ALPHA.indexOf(b.charAt(c));if(-1==d)throw"Cannot decode base64";return d},a.Decode=function(b){if(void 0!==window.atob)return window.atob(b);b=""+b;var c,d,e,f=a.Getbyte64,g=b.length;if(0==g)return b;if(g%4!=0)throw"Cannot decode base64";c=0,b.charAt(g-1)==a.PADCHAR&&(c=1,b.charAt(g-2)==a.PADCHAR&&(c=2),g-=4);var h=[];for(d=0;g>d;d+=4)e=f(b,d)<<18|f(b,d+1)<<12|f(b,d+2)<<6|f(b,d+3),h.push(String.fromCharCode(e>>16,e>>8&255,255&e));switch(c){case 1:e=f(b,d)<<18|f(b,d+1)<<12|f(b,d+2)<<6,h.push(String.fromCharCode(e>>16,e>>8&255));break;case 2:e=f(b,d)<<18|f(b,d+1)<<12,h.push(String.fromCharCode(e>>16))}return h.join("")},a.prototype.getbyte=function(a,b){var c=a.charCodeAt(b);if(c>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c},a.DecodeCharInfo=function(){var b=a.Decode(a._base64CharInfo),c=[],d=0;for(d=0;d<b.length;d+=2){var e=256*b.charCodeAt(d+1)+b.charCodeAt(d);c.push(e)}var f=[];for(d=0;d<c.length;d++)if(65534!=c[d])f.push(c[d]);else{for(var g=c[d+1],h=1;g>h;h++)f.push(c[d-1]);d++}for(d=0;d<f.length;d+=2){var i=65536*f[d+1]+f[d];a._charInfo.push(i)}},a.GetByte=function(b){0===a._charInfo.length&&a.DecodeCharInfo();var c=Math.floor(b/4),d=b%4,e=a._charInfo[c];switch(d){case 0:return 255&e;case 1:return e>>8&255;case 2:return e>>16&255;case 3:return e>>24&255}},a.GetShortValue=function(b){var c=a.GetByte(b),d=a.GetByte(b+1);return 256*d+c},a.GetIntValue=function(b){var c=a.GetByte(b),d=a.GetByte(b+1),e=a.GetByte(b+2),f=a.GetByte(b+3);return 65535*f*256+65535*e+256*d+c},a.PADCHAR="=",a.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a._charInfo=[],a._base64CharInfo="YwBoAGEAcgBpAG4AZgBvAC4AbgBsAHAAAAD+/wgAPAAAAGBLAAD0SwAAgHcAAIB4AAAAERARIBEwEUARUBFgEXARgBGQEaARsBHAEdAR4BHwEQASEBIgEjASQBJQEmAScBKAEpASoBKwEsAS0BLgEvASABMQEyATMBNAE1ATYBNwE4ATkBOgE7ATwBPQE+AT8BMAFBAUIBQwFFAS/v8ZAEAUUBL+/1EAUBRgFFAS/v8DAHAUUBKAFJAUoBSwFMAUgBFQEv7/KwDQFOAU/v8IAPAU/v8ZAFASABUQFSAVMBVAFVAVYBVwFYAVkBWgFYAR/v8DALAVwBXQFYAR/v8VAFAS/v8DAOAV8BWAEf7/qwAAFhAWIBYwFkAWUBZgFnAWgBH+/xgAgBaAEf7/DwBQEv7/pgCQFoAR/v9RAFAS/v8CAKAWgBH+/wULsBbAFoAR/v/+APAU/v//ANAW8BT+//8A0BbgFugW8Bb4FgAXCBcQFxgXIBcoFzAXOBdAF0gXUBdYF2AX/v8DAGgXcBdgF/7/AgB4F4AXiBeQF5gXoBeoF2AXsBdgF/7/AwC4F8AXUBf+/wQAyBdQF9AX2BfgF+gX8Bf4F/7/BwAAGAgYEBgYGFAXIBgoGGAXMBhAF/7/AwBQF/7/AwBgF/7/AgA4GGAX/v8DAEAYYBf+/wUASBhQGEAXWBhgGFAXaBhwGPgXeBiAGIgYkBiYGKAYqBiwGLgYwBjIGNAY2Bi4GP7/BQDgGOgY8Bj4GAAZuBj4FwgZuBj+/wUAEBkYGSAZiBgoGTAZOBn+/xAAQBlIGf7/AgBQGVgZYBloGXAZeBmAGYgZkBmYGaAZqBmwGbgZgBmIGcAZyBnQGdgZ4BnoGfAZiBn4GQAaCBqoGRAaeBmAGYgZGBogGigaqBkwGjgaQBpIGlAaWBpgGtgZaBpwGngaiBmAGogakBqoGZgaoBp4GogZqBqwGrgaqBnAGqAaeBqIGcga0BrYGqgZ4BroGvAaSBn4GgAbCBs4GRAbGBtIGf7/AgAgGygbMBs4Gf7/AgA4G0AbSBtQG1gbYBs4Gf7/AgBoG3AbeBuAG4gbSBmQG5gboBuoG/gXsBu4G8AbOBn+/wIASBn+/wIAyBvQG9gb4BvoG/Ab+BsAHEAX/v8CAAgcSBn+/wIAEBxIGf7/BQAYHEgZ/v8EACAcSBn+/wQAKBxIGf7/BAAwHDgcSBn+/wIAMBxIGf7/AgBAHEgcUBxIGf7/AwBIHEgZ/v8DAFgcYBxoHEgZcBxIGf7/BQB4HBgbSBn+/yUAgByIHJAcmBxIGf7/BACgHKgcsBy4HEgZwBxIGcgcsBzQHEgZ/v8DANgc4BzoHPAc+BwAHfAcSBn+/wIACB1IGf7/AgAQHUgZ/v8CABgdOBn+/wUASBmQGyAdKB0wHUgZOB14HEgZ/v8CACgcQB1IHVAdWB3+/wIASBlgHTgZ/v8OAGgdSBn+/wIAcB14HdgbgB2IHZAdSBmYHfAcOBn+/wQASBn+/wIAoB2oHbAduB1IGcAdOBn+/wgAUBf+/wIAyB3QHf7/AwDYHeAdUBfoHdAd/v8CAPgX/v8CAPAd+B1gF/7/CQAAHmAX/v8GAAgeEB4IHv7/AgAQHhgeCB4gHige/v8DADAeOB5AHkgeUB5YHmAeaB5wHngegB6IHpAemB6gHqgesB44GbgewB7IHtAe2B7gHuge8B74HgAf/v8CAAgfEB8YH1gdIB8oH1gdMB84H0AfOB/+/w4ASB9YHVAfWB9gH/7/AwBoH1gdcB84H3gfWB2AH4gfOBlYHf7/AgCQHzgZmB84GaAf/v8CAKgfsB9gH/7/BAC4H6AfWB3+/wsAwB/IH1gd/v8CANAfWB3+/wYA2B9YHf7/AgDgH+gf8B/4HzgZ/v8DAAAgWB0IIFgdECAYICAgKCCgHzAgWB04IEAgOB9IIDgfYB/+/xAAOB/+/wgAUCBYIDgf/v8DAGAgOB9oIDgf/v8QAFgd/v8DADgfcCB4IDgZ/v8KAEAX/v8CAIAgUBf+/wIAiCCQIJggYBf+/wYAoCCoIFAX/v8CALAgSBn+/wMAuCA4GUgZiBzAIP7/BAD4F/7/AgDIINAg2CDgIDgZ/v8EAFgd6CBYHf7/BQD4H1gd/v8NAPAgOBn4IAAhCCEQIRghGBtIGf7/BAAgISghSBn+/wQAMCE4IUgZOB0YG0gZ/v8EAEAhSCFIGRAdWB3+/wIA+B9IGWAfUCFYIWAfYCFoIWAfcCFYIWAf/v8CAHghgCFgH/7/AgCIIWAf/v8HAJAhYB/+/wUAmCFgH6AhSBn+/wsAqCFYHf7/BABIGf7/DACwITgZ/v8DAEgZuCFIGf7/FgCQG1gd/v8DAJAfOBn+/wMAwCFIGcghOBlgF/7/AgDQIdghYBfgITgZ/v8GAPAX6CHwIfghYBf+/wMAACIIIjgZ/v8GABAiGCJIGSAiOBlIGf7/AwAoIjAiSBn+/wIAOCJAIvAcOBn+/wIAuB1IGUgiSBlQIlgiOBn+/woASBn+/wIAYCJoInAieCI4Gf7/CgBIGf7/CgCwITgZ/v8FAIAi/v8QAIgi/v8QAEgZ/v8CADgdSBn+/wMAkCJIGf7/BgAoHDgZ/v8CAJgioCKoIrAiuCK4GP7/BgDAIjgZyCK4GP7/FQDQIjgZuBj+/wQA2CK4GP7/AgDgIjgZ/v8CAOgi+BfwIvAd+CIAIwgjECMYI7gY/v8HACAjKCP4FgAXCBcQFzAjOCNAI0gZSCNIGUAhUCNYI2AjaCNwI0gZUBx4Izgd/v8CADgZ/v8CAEgZ/v8HAJAigCOII/7/AgCQI5gj/v8DAKAjqCP4IDgZ/v8DAGAf/v8CALAjOBn+/wgASBmQG0gZ/v8DAAgaOBn+/wIASBlAIbgjSBnAIzgZ/v8DAEgZyCNIGf7/AgDQI9gjOBn+/wIAQBf+/wIA4CNQF/7/AgBIGf7/BAA4HfAcOBn+/wUA6COIGP7/AgDwIzgZ/v8MAIgY+COIGAAkOBn+/wwACCQQJIgYGCQgJCgkOBn+/woASBn+/wYAQCE4Gf7/CQAAH/7/BgAwJDgkOBn+/wgAYB/+/w8AQCRgH/7/AgBIJGAf/v8DAFAkWCRgJGAfaCRgH/7/AgBwJDgZ/v8CAFgd/v8EAHgkOBn+/wsAWB3+/wUAkB+II4AkOBn+/wgAQBeIJFAXkCSYJKAkCB5AF6gksCS4JMAkyCRAF4gkUBfQJNgkUBfgJOgk8CT4JEAXACVQF0AXiCRQF5AkmCRQFwgeQBeoJPgkQBcAJVAXQBeIJFAXCCVAFxAlGCUgJSglUBcwJUAXOCVAJUglUCVQF1glQBdgJVAXaCVwJf7/AwBYHf7/AgD4IFgd/v8GAPgfOBn+/wYASBn+/w0AiBw4Gf7/AgBIGTgdOBn+/w4AeCU4GYAl/v8GADgZ/v8IAPgX/v8PADgZiCL+/w8AiCUBAf7/BAABAgMCBAMBAf7/BwADAwMCBQYGBwgHBgYJCgYLDA0MDA4O/v8FAAwGDw8PBgYQEBD+/wwAEAkGChESERMTE/7/DAATCQ8KDwEBAf7/AgABAwEB/v8NABQGCAj+/wIAFRURFRMWDxcVERgZGhoRExUGERoTGxwcHAYQEP7/CwAQDxAQ/v8DABATExP+/wsAEw8TE/7/BAAQE/7/DAATEP7/CAATExAT/v8HABAQExD+/wIAExMTEBAT/v8CABAQExAQEBMTEBD+/wIAExAQExAQEBMTExAQExAQE/7/AwAQEBMQExMQExAQExAQEBMQ/v8CABATEx0QExMTHR3+/wIAEB4TEB4TEB4TEP7/CAATExATExAeExATEBAQE/7/BgATE/7/AwAQEBMQEBMTEP7/AgAQEBAT/v8FABMT/v8CAB0TExP+/wUAHx/+/wQAHyAgHx8f/v8DABER/v8CACAg/v8FAB8fERH+/wcAHx/+/wIAHxEREf7/AwAgER8RERH+/wgAISH+/wgAEBP+/wIAIBEQEwAAHxMTEwYAAAD+/wIAEREQBhAQEAD+/wIAEBATEBAQ/v8IAAAQEBD+/wQAExP+/wkAExATExAQEBMTExAT/v8EABMT/v8CABATDxATEBATExAQEBATIiEhIf7/AgAjIxAT/v8DABAQExD+/wYAExMQE/7/AgAAAP7/BgAAEBAQ/v8KABAAAB8kJP7/AwAAExMT/v8LAAAkJQAAAP7/AgAAISEh/v8OACYhJyEhJyEhJyEAAP7/BAAoKP7/DQAoAAAA/v8CACgoKCcnAAAA/v8FACkp/v8CAAAADw8qBwcrDCwVFSEh/v8FACEsAAAsLAAtLS3+/w8ALi0tLf7/BAAtISEh/v8JACEALy/+/wUABzAwLC0tIS0tLf7/CQAsLSEh/v8DACEpIyEhIf7/AgAhLi4hIRUhIf7/AgAtLQ4O/v8FAC0tLTExLSws/v8HAAAXLSEtLf7/BwAhIf7/BQAhAAAtLS3+/wQAISH+/wUAIS0AAP7/BwAyMv7/BQAoKP7/CAAoISEh/v8EADMzFQYGBjMAAAD+/woAACEhNB0d/v8TAAAAIR00NDQhISH+/wMAITQ0NDQhAAAdISEhIQAAAB0d/v8FACEhJCQ1Nf7/BQAkHx0AAAD+/wMAAB0dHf7/AgAAITQ0AB0dHf7/AwAdAAAdHQAAHR0d/v8KAB0AHR3+/wMAHQD+/wIAAAAdHf7/AgAAACEdNDQ0ISEhIQAANDQAADQ0IR0AAAD+/wMAADQAAP7/AgAdHQAdHR0hIQAANTX+/wUAHR0ICDY2/v8DACIAAAD+/wIAACEhNAAdHR3+/wIAHQAAAAAdHQAdHQAdHQAdHQAAIQA0NDQhIQAAAAAhIQAAISEhAAAAIQAA/v8DAAAdHR0dAP7/AgAAAP7/AwA1Nf7/BQAhIR0dHSEAAP7/BQAAISE0AB0dHf7/BAAAHR0dAB0dHf7/BgAdAB0dAB0dHf7/AgAAACEdNDQ0ISEh/v8CAAAhITQANDQhAAAdAAAA/v8HAAAIAAD+/wcAHQAdHQAdHR3+/wIAAAAhHTQh/v8CACEhIQAANDQAADQ0IQAA/v8EACE0AAD+/wIAHR0AHSIdAAD+/wgAIR0AHR0d/v8CAB0AAAAdHR0AHR3+/wIAAAAAHR0A/v8CAB0dAAAAHR0AAAAdHR0AAAAdHf7/BgAAAP7/AgA0NCE0NAAAADQ0NAA0NDQhAAAdAAAA/v8CAAA0AAD+/wQANjY2FRUV/v8CABUIFQAAAP7/AgAANDQ0AB0dHf7/AwAdAB0dHQAdHf7/CQAAHR0d/v8CAAAAAB0hISE0NDQ0ACEhIQAhIf7/AgAAAP7/AwAAISEAHR0AAP7/BwAcHP7/AwAcIgAANDQAHR0d/v8DAB0AHR3+/wMAAB0dHf7/AgAAACEdNDc0NP7/AgA0ADc0NAA0NCEhAAD+/wMAADQ0AAAA/v8DAB0AABUVAAAA/v8GAB0d/v8FAAAAAB00NDQhISEhADQ0NAA0NDQhAAD+/wQAADQAAP7/BAA2Nv7/AwAAAAAiHR3+/wMAAAA0NAAdHR3+/wgAHQAAAB0d/v8EAAAdHR3+/wQAAB0AAB0d/v8DAB0AAAAhAAAAADQ0NCEhIQD+/wIANDT+/wQAAAA0NCQAAAD+/wUAAB0dHf7/BwAdIR0dISH+/wMAIQAAAAAIHR3+/wMAHyEhIf7/AwAhJDU1/v8FACQkAAD+/wIAAB0dAP7/AgAAHR0A/v8CAAAdAAD+/wMAHR3+/wIAAB0dHf7/AwAAHR0dAB3+/wIAAAAdHQAdHR0dIR0dISH+/wMAACEhHQAAHR3+/wIAHQAfACEh/v8DAAAANTX+/wUAAAAdHQAAHSIiIiQk/v8HACQiIiL+/wIAISEiIv7/AwA1Nf7/BQA2Nv7/BQAiIf7/AwAJCv7/AgA0NB0d/v8EAAAdHR3+/wkAHQAAAAAhISH+/wYAITQhIf7/AgAhJCEhHR3+/wIAAAD+/wIAISH+/wQAACEhIf7/CQAhACIi/v8EACEiIiL+/wIAIgAiIiQk/v8CACQAAAD+/wUAHR3+/wUAHTQ0ISEhITQhIf7/AwA0ISE0NCEhHTU1/v8FACQk/v8DAB0d/v8DADQ0ISEdHf7/AgAhISEdNDQ0HR00NDT+/wMAHR0dISEhIR0dHf7/BgAhNDQhITQ0NP7/AgA0IR00NTX+/wUAAAD+/wIAIiIQEP7/AwAAAP7/BQAdHf7/BQAdJB8AAAAdHf7/BQAAAP7/AgAAHR0dHQAAAP7/AgAdHf7/CQAAAP7/AwAdHf7/BAAdAB0d/v8CAAAAHR3+/wMAHQD+/wIAHR3+/wIAAAAdAB0d/v8CAAAAHR3+/wMAHQD+/wIAHR3+/wIAAAAdHf7/BwAdAB0d/v8JAB0AAAAAISIkJCT+/wMAJDY2Nv7/CQA2AAAAFRX+/wUAAAD+/wMAHR3+/wIAHQAAAP7/BQAdHf7/BgAdJCQdHR3+/wMAHQAAAP7/BAAFHR0d/v8MAB0JCgAAAB0d/v8FAB0kJCQ4ODgAAAD+/wcAHR3+/wYAHQAdHf7/AgAhISEAAAD+/wUAHR0hISEkJAAAAP7/BAAdHSEhAAD+/wYAHQAhIQAA/v8GAB0d/v8CADk5NCEhIf7/AwA0NP7/BAAhNDQhISH+/wUAJCQkHyQkJAgdIQAANTX+/wUAAAD+/wMAHBz+/wUAAAD+/wMABgb+/wMAJQYGBgYhISEFAB0dHR8dHf7/CgAAAP7/BAAdHf7/BAAdIR0AAAD+/wIAISEhNDQ0NCEhNDQ0AAD+/wIANDQhNDQ0/v8CADQhISEAAP7/AgAVAAAABgY1Nf7/BQAdHf7/BwAAADQ0/v8IADQdHR3+/wMANDQAAP7/AwA1Nf7/BQAAAP7/AgAGBhUV/v8IAB0d/v8DAB0hITQ0NAAAJCQhIf7/AgA0HR0d/v8HACE0ISH+/wIAITT+/wIANDT+/wIAITQ0HR0d/v8DAAAA/v8CACQiIiL+/wQAIiEhIf7/BAAiIv7/BAAiAAAAISE0HR0d/v8GAB00ISH+/wIANDQhITQAAAAdHf7/AwA0NP7/BAAhIf7/BAA0NCEhAAAAJCQk/v8CADU1/v8FAAAAAB0dHTU1/v8FAB0d/v8HAB8f/v8DACQkExP+/wYAHx/+/wsAExP+/wsAHxMTE/7/CAATHx8f/v8CACEh/v8DACEAAAD+/wsAISEQE/7/AwATE/7/BAAQExMT/v8EABAQ/v8EABMT/v8DAAAAEBD+/wMAAAATE/7/BAAAEP7/BAATE/7/BwAAABMT/v8EAB4e/v8EABMT/v8CABMAExMQEP7/AgAeERMRERETExMAExMQEP7/AgAeERERExP+/wIAAAATExAQ/v8CAAARERETE/7/BAAQEP7/AgAQERERAAATExMAExMQEP7/AgAeEREABQX+/wUABRcXFzk6JSX+/wMABgYWGwkWFhsJFgYG/v8EADs8PT4/QEEUBwf+/wIABwYGBgYWGwYGBgYSEgYGBkIJCgYGBv7/BQAPBhIGBgb+/wQABgUXF/7/AgAXAAAA/v8CABcX/v8DABoTAAAaGv7/AwALCw8JChMaGv7/BQALCw8JCgAfH/7/AgAfAAAA/v8FAAgI/v8LAAAA/v8FACEh/v8GACEjIyMjISMjIyEhIf7/BQAhAAAA/v8HABUVEBUVFRUQFRUTEBAQExMQEBATFRAVFRUQEBD+/wIAFRX+/wMAEBX+/wMAEBD+/wIAGBMQEP7/AgATHR0dHRMVFRMTEBAPD/7/AgAPEBMT/v8CABUPFRUTIgAAABwcHP7/BgA4OP7/CQA4EBM4ODg4AAAA/v8DAA8P/v8CAA8VFRX+/wIADw8VFf7/AgAPFRUPFRUPFRUV/v8DAA8VFRX+/wcADw8VFQ8V/v8CABUV/v8HAA8P/v8PAAsZDw/+/wYAFRX+/wQADw/+/wIAFRX+/wIADw8VFf7/AwAVCQoVFRX+/wUAIiL+/xIAIhUPFRUV/v8DABUiFRX+/wIAFQ8PD/7/BAAVFf7/DAAPD/7/AwAVFf7/AwAAAP7/BAAVFf7/AwAVAAAA/v8EABUV/v8FABUAAAD+/wIAHBz+/wwAGhr+/woAIiL+/wcAHBz+/wMAFRX+/wMAFQ8VFf7/BAAVDxUV/v8LAA8P/v8EABUV/v8HABUPFRX+/wcAAAAVFf7/BgAiFRUV/v8HABUAAAAVFf7/AgAAAP7/BgAAFRUVFQAVFf7/AgAAABUV/v8GAAAVFRX+/wkAABX+/wIAFRUVAAAAFQAVFf7/AwAVAAAVFRX+/wMACQr+/wcAHBz+/wcAFQAAABUV/v8EAAAVFRX+/wYAFQAPD/7/AgAPCQoPDw8PAP7/AgAAAA8P/v8DAAkK/v8FAA8PDwkKCf7/CgAKDw8P/v8HAAkK/v8CAA8P/v8IAAkKDw/+/wMADxUVDw8P/v8CAA8AAAAVFf7/AgAVAAAA/v8FABAQ/v8HABAAExP+/wcAEwAQExAQEBMTEP7/BAAQEAATEBMTEBMT/v8DABMfAAAQE/7/AgATFRUV/v8CABUAAAD+/wYAAAYGBgYcBgYTE/7/AwAAAP7/BQAdHf7/AwAAAP7/BAAAHx0d/v8DAB0AHR3+/wMAHQAGBhYb/v8CAAYGBhYbBhYbBgb+/wQABiUGBiUGFhsGBhYbCQr+/wQABgb+/wIABiAGAAAA/v8HABUV/v8FAAAVFRX+/wUAAAD+/wUAFRX+/wYAAAD+/wIABQYGBhUfHTgJCv7/BQAVFQkK/v8EACUJCgoVODg4/v8EACEh/v8DACUfHx/+/wIAFRU4ODgfHQYVFR0d/v8DAB0AACEhEREfHx0lHR0d/v8MAB0GHx8fHQAA/v8CAAAdHR3+/wwAHQAiIjY2/v8CACIi/v8LACIVFQA2Nv7/BQAiIv7/BQAAAP7/BgAVHBwc/v8HACIi/v8GABUVFSIiHBwc/v8HACIi/v8GABUV/v8CACIi/v8HACIAIiL+/wMAIhUVFRUiIiL+/wkAFRUiIv7/BwAiFR0d/v8DAAAA/v8FAB0d/v8CAAAA/v8GAB0d/v8CAB0fHR3+/wsAHwYGBjU1/v8FAB0dAAD+/wMAEBP+/wYAHSEjIyMGAAD+/wQAISEGIBAT/v8EAAAA/v8EABER/v8DABEgICD+/wQAEREQE/7/BwATExAT/v8HAB8TExP+/wMAExD+/wMAEBP+/wUAIENDEBMAAAD+/wYAAB0dHf7/AwAhHR0dIR0dHR0hHR3+/wMAHTQ0ISE0FRX+/wIAAAD+/wIAHR3+/wIABgb+/wIAAAD+/wQANDQdHf7/CQA0NP7/CAAhAAAA/v8EACQkHR3+/wMAISH+/wQAJCQdHf7/AwAdISEh/v8FADQ0AAD+/wUAACQdHf7/BAAdISEh/v8CACE0NCEhNDQhIQAAAP7/BAAdHR0hHR3+/wQAITQAADU1/v8FAAAAJCT+/wIARET+/wgARUX+/wgAHR3+/wUAHQAAAP7/AgATE/7/AwATAAAA/v8FAAATExP+/wIAAAD+/wIAACghKCgo/v8EACgLKCj+/wYAKAAoKP7/AgAoAP7/AgAoKAAoKAAoKP7/BQAtLQAA/v8IAAAtLS3+/w0ACQoAAC0t/v8LAAAA/v8EAC0t/v8GACsVAAAGBv7/AwAGCQoGAAD+/wMABiUlEhIJCgn+/wcACgYGCQoGBgYGEhISDAYMAAYMBgYlCQoJ/v8CAAoHBgYLDQ8PDwAGCAcGAAD+/wIALS3+/wIALQAtLf7/CwAtAAAXAAYGBwgHBgYJCgYLDA0MDBMT/v8FABMJDwoPCQoGCQoGBh0d/v8FAB8dHR3+/w4AHx8AAB0d/v8DAAAAHR3+/wMAAAAdHf7/AwAAAB0dHQAAAAgIDxEVCAgAFQ8PDw8VFQAAAP7/BAAARkZGFRUAAB0d/v8GAAAdHR3+/wYAHQAdHQAdJAYiAAAAADY2Nv7/DgAAAAAiIiL+/wQAR0f+/woARxwcHBwVFRX+/wgAHAAAAP7/AgAiIv7/BgAiIQAANjb+/wIAAAD+/wYAHTgdHf7/BAA4AAAA/v8CAB0d/v8HAAAkHR3+/wIAAAD+/wIAHR3+/wQAJDg4OP7/AgAAAP7/BQAQEP7/BAATE/7/BAAoKP7/AwAAACgAKCj+/wYAACgoAAAAKAAAKCgo/v8DAEhI/v8CAAAA/v8CAAAGKCj+/wUAAAD+/wIAACcoISEhACEhAAAA/v8CACEh/v8CACgo/v8CAAAoKCgAKCgo/v8FAAAA/v8CACEhIQAAAAAhSEj+/wQAAAD+/wQAJyf+/wQAJwAAAP7/AwA4ODgAAAD+/wYAJCT+/wIAAAD+/wYAIiL+/wMAAAD+/wUAIiL+/wMAIgAAIiIi/v8FACI0NCEhISIiIjQ0NP7/AgA0FxcX/v8DABchISH+/wMAISIiISEh/v8DACIi/v8HACEh/v8CACIi/v8IAAAAFRUhISEVAAD+/wUANjYAAP7/BwAQEP7/BQATE/7/BQAQEP7/DQATE/7/AwATABMT/v8FABAQExP+/w0AEAAQEAAAEAAAEBAAABAQEBAAEBD+/wQAExP+/wIAABP+/wIAExP+/wMAABMTE/7/BwAQEAAQEBAQAAAQEBD+/wMAEAAQEP7/AwAQABMT/v8FABAQABAQEBAAEBD+/wIAEAD+/wIAAAAQEP7/AwAQABMT/v8NABAQ/v8FABMT/v8IAAAAEBD+/wQAEEkTE/7/DAATSRMT/v8DABAQ/v8MABBJExP+/wQAE0kTE/7/AwAQEP7/BAAQSRMT/v8MABNJExP+/wMAEBD+/wwAEEkTE/7/BAATSRMT/v8DABAQ/v8EABBJExP+/wQAE0kTE/7/AwAQEwAADg7+/wkAABcAAP7/BwAXF/7/CABFRf7/BwAAAO7u/v8CAB0ADg4OEA4PDhELERgSGAoaChQSFRIZCRgMEwkICBkSAAAbEhISAQALDBwSFhIPDhwKGQoKCBcSChIEAAIAAwADEgUNHAAHDRgAExITAxgDBAMPCxkEGgQYBAQEAwQICxgLHAQIAwMDBgAIAAoABQAJAA8ADwMMEQ0PDwEPBQ8HDwIPBhkMGwAQABEADxIJEgoDGQAAERAR/v8FACARMBEQEUARUBFgEXARgBGQEaARsBEQEf7/AgDAERAR/v8CANAR4BHwEQASEBEQEiASEBH+/wMAMBJAEhAR/v8CAFASEBH+/wIAYBIQEf7/BABwEhAR/v8DAIASkBKgEhAR/v9zALASEBHAEtAS4BIQEf7/TgDwEhAR/v8FAPAREBEAExAREBMgExAR/v8EADATQBMQEf7/GQBQExAR/v+uAGATEBH+/wMAcBMQEf7/IAGAExAR/v8HDpAT/v8DAJgTkBP+/wcAoBOQE/7/GgCYE5AT/v8IAJgTkBP+/wwAmBOQE/7/CQCoE5AT/v8HAKgTsBOQE/7/BgCoE5AT/v8HAKgTkBP+/wcAqBOQE/7/BwCoE7gTkBP+/wYAqBPAE5AT/v8GAKgTkBP+/wcAqBPIE5AT/v8NAJgTkBP+/wcAmBOQE/7/BADQE9gTkBP+/xAAmBOQE/7/BACYE5AT/v8MAOAT6BOQE/7/FgDwE/gTkBP+/w4AmBMAFJATmBOQE/7/EgCoE5AT/v8IAJgTkBP+/wcAmBOQE/7/BQCYE5AT/v8IAJgT/v8CAJAT/v8RAAgUEBSQE/7/DAAYFCAU/v8CACgUkBP+/w0AMBQ4FEAUSBSQE/7/BABQFFgUkBP+/wcAYBRoFHAUkBP+/xUAeBSAFJATiBSQFJAT/v8VAJgUkBP+/wgAoBSQE/7/AgCoFJAT/v8CAKAUkBP+/wIAsBSQE/7/BgCYE5AT/v8aAJgTkBP+/wIAmBOQE/7/FACYE5AT/v8QALgUwBSQE/7/AwDIFJAT0BSQE9gU4BToFPAU+BQAFQgVEBUYFSAVkBP+/wkAKBWQEzAVkBP+/wgAOBWQE/7/DACYE5AT/v8GAEAVkBP+/xIASBWQE/7/CwBQFVgVYBVoFXAVeBWAFZAT/v8PAIgVkBWQE/7/FACYFaAVqBWwFZAT/v8JALgVkBP+/wYAAAD+/wgAAQIDBAUGBwgJCgAA/v8EAAsMAAD+/wIAAA0AAA4PEAAAAP7/AwABAgMEBQYHCAkKAAD+/wIAERITFAAVAAD+/wMAFhcYAAAA/v8KABkREhMREhMAFhcYDg8QAAD+/wUAAQIDBAUGBwgJCg8aGxwdHh8gISIAAP7/CgAADQsMIyQlJicoFikqKywtLi8wFzEAAAD+/wgAMjM0AAAA/v8HABkREhMUNTY3ODkAAP7/AwA6AAAAIyQlJicoAAD+/wMAOg0LDCMkJSYnKAAA/v8EAAA7PD0+P0BBQkNERUYRERITFDU2Nzg5FkdILBdJGBhKMQAANixLTAAAAP7/AwANCwwjJCUmJygWR0hNTk8VMjM0KQ0LDCMkJSYnKBZHSE1OTxUyMzQpDQsMIyQlJicoFkdITU5PFTIzNCkAAP7/BwA6R0hNTk8VMjM0KQ0LDCMkJSYnKBY6AAD+/wMADQsMIyQlJicoFg0LDCMkJSYnKBYNCwwjJCUmJygWAAD+/wwAAA8AAP7/BAAAGQAA/v8EAAAREhMUNTY3ODkAAP7/BwAWKSoAAAD+/wMAERITFAAA/v8FABESExQ1Njc4ORYAAP7/AwAAUFFSU1RVVldYKllaW1xdAF5fYGErYmNkZWZnaGlqLAAA/v8FAAATAAD+/wMAABYAAP7/AgASAAAA/v8EABkAAAD+/wYAADb+/wIAAAD+/wwAABYAAP7/BAAAERITFDU2Nzg5FikqKywtLi8wF2tsbUlub3BxGHJzdEp1dnd4MXl6e0t8fX5/AAD+/wYADg8RNSxJSks1FiwXSRhKNRYsF0kYMUsWEREREhISEjUWFv7/AgAWKiws/v8CABdsSUn+/wIASRhKNSwPDzwQAAAA/v8IABkAAAD+/wIAETUWLAAA/v8GAAAwAAD+/wQAcQAAAP7/AgAAERIWKRcAAP7/CAARFikXAAD+/wMADQsMIxYpFxgAAP7/BAASExQ1Njc4ORMUNTY3ODkUNTY3ODkREhMUNTY3ODkREhMUNRITExQ1Njc4ORESExMUNQAAERITExQ1ExMUFP7/AgA2Nzc3ODg5Of7/AgASExQ1NhESExQUNTUAABESOzxCOzxDDkEOAAAA/v8GABESExQ1Njc4ORYpKissLS4vMAAA/v8OAAECAwQFBgcICQoBAgMEBQYHCAkKAQIDBAUGBwgJCgECAwQFBgcICQoBAgMEBQYHCAkKOQAAAP7/BwDu7v7/BgD//wAAAQECAgMDBAQFBQYGBwcICAkJ/wL/A/8B///+/xUA/wT/Bf8G/wf/CP8J///+/xEA/wD///7/RQAAAP7/AwDwvwAA/v8HAPA/AAD+/wMAAEAAAP7/AwAIQAAA/v8DABBAAAD+/wMAFEAAAP7/AwAYQAAA/v8DABxAAAD+/wMAIEAAAP7/AwAiQAAA/v8DAABAAAD+/wMACEAAAP7/AwDwPwAA/v8DANA/AAD+/wMA4D8AAP7/AwDoPwAA/v8DAPA/AAD+/wMAAEAAAP7/AwAIQAAA/v8DABBAAAD+/wMAMEAAAP7/AwAkQAAA/v8DAFlAAAD+/wIAAECPQAAA/v8HAPg/AAD+/wMABEAAAP7/AwAMQAAA/v8DABJAAAD+/wMAFkAAAP7/AwAaQAAA/v8DAB5AAAD+/wMAIUAAAP7/AwDgvwAA/v8DABBAAAD+/wMAFEAAAP7/AwAYQAAA/v8DABxAAAD+/wMAIEAAAP7/AwAiQAAA/v8DADRAAAD+/wMAPkAAAP7/AwBEQAAA/v8DAElAAAD+/wMATkAAAP7/AgAAgFFAAAD+/wMAVEAAAP7/AgAAgFZAAAD+/wIAAIjDQAAA/v8DADFAAAD+/wMAMkAAAP7/AwAzQAAA/v8DABRAAAD+/wMAGEAAAP7/AwAcQAAA/v8DACBAAAD+/wMAIkAAAP7/BABVVf7/AwDVP1VV/v8DAOU/mpmZmf7/AgDJP5qZmZn+/wIA2T8zM/7/AwDjP5qZmZn+/wIA6T9VVf7/AwDFP6uqqqr+/wIA6j8AAP7/AwDAPwAA/v8DANg/AAD+/wMA5D8AAP7/AwDsPwAA/v8DACZAAAD+/wMAKEAAAP7/AgAAQH9AAAD+/wIAAIizQAAA/v8CAABq6EAAAP7/AgAAavhAAAD+/wMAKkAAAP7/AwAsQAAA/v8DAC5AAAD+/wMANUAAAP7/AwA2QAAA/v8DADdAAAD+/wMAOEAAAP7/AwA5QAAA/v8DADpAAAD+/wMAO0AAAP7/AwA8QAAA/v8DAD1AAAD+/wMAP0AAAP7/AwBAQAAA/v8CAACAQEAAAP7/AwBBQAAA/v8CAACAQUAAAP7/AwBCQAAA/v8CAACAQkAAAP7/AwBDQAAA/v8CAACAQ0AAAP7/AgAAgERAAAD+/wMARUAAAP7/AgAAgEVAAAD+/wMARkAAAP7/AgAAgEZAAAD+/wMAR0AAAP7/AgAAgEdAAAD+/wMASEAAAP7/AgAAgEhAAAD+/wMAaUAAAP7/AgAAwHJAAAD+/wMAeUAAAP7/AgAAwIJAAAD+/wIAAOCFQAAA/v8DAIlAAAD+/wIAACCMQAAA/v8CAABAn0AAAP7/AgAAcKdAAAD+/wIAAECvQAAA/v8CAABwt0AAAP7/AgAAWLtAAAD+/wIAAEC/QAAA/v8CAACUwUAAAP7/AgAAiNNAAAD+/wIAAEzdQAAA/v8CAACI40AAAP7/AgAATO1AAAD+/wIAABfxQAAA/v8CAACI80AAAP7/AgAA+fVA",
a}();a.CharInfo=b;var c=function(){function a(){}return a.InitTable=function(){a.globalizationResourceBytePtr=0,a.headerPtr=a.globalizationResourceBytePtr,a.s_pCategoryLevel1Index=b.GetIntValue(a.globalizationResourceBytePtr+40),a.s_pCategoriesValue=b.GetIntValue(a.globalizationResourceBytePtr+44),a.s_pNumericLevel1Index=b.GetIntValue(a.globalizationResourceBytePtr+48),a.s_pNumericValues=b.GetIntValue(a.globalizationResourceBytePtr+56),a.s_pDigitValues=b.GetIntValue(a.globalizationResourceBytePtr+52)},a.InternalConvertToUtf32=function(a,b,c){if(c.length=1,b<a.length-1){var d=a.charCodeAt(b)-55296;if(d>=0&&1023>=d){var e=a.charCodeAt(b+1)-56320;if(e>=0&&1023>=e)return c.length++,1024*d+e+65536}}return a.charCodeAt(b)},a.InternalGeteCategoryValue=function(c,d){(void 0===d||null===d)&&(d=0);var e=b.GetShortValue(a.s_pCategoryLevel1Index+2*(c>>8));e=b.GetShortValue(a.s_pCategoryLevel1Index+2*(e+(c>>4&15)));var f=a.s_pCategoryLevel1Index+2*e,g=b.GetByte(f+(15&c));return b.GetByte(a.s_pCategoriesValue+2*g+d)},a.InternalGetUnicodeCategory=function(b,c,d){var e=a.InternalConvertToUtf32(b,c,d);return a.InternalGeteCategoryValue(e,0)},a.IsCombiningCategory=function(a){return 5!==a&&6!==a?7===a:!0},a}();a.CharUnicodeInfo=c,c.InitTable(),function(a){a[a.ClosePunctuation=21]="ClosePunctuation",a[a.ConnectorPunctuation=18]="ConnectorPunctuation",a[a.Control=14]="Control",a[a.CurrencySymbol=26]="CurrencySymbol",a[a.DashPunctuation=19]="DashPunctuation",a[a.DecimalDigitNumber=8]="DecimalDigitNumber",a[a.EnclosingMark=7]="EnclosingMark",a[a.FinalQuotePunctuation=23]="FinalQuotePunctuation",a[a.Format=15]="Format",a[a.InitialQuotePunctuation=22]="InitialQuotePunctuation",a[a.LetterNumber=9]="LetterNumber",a[a.LineSeparator=12]="LineSeparator",a[a.LowercaseLetter=1]="LowercaseLetter",a[a.MathSymbol=25]="MathSymbol",a[a.ModifierLetter=3]="ModifierLetter",a[a.ModifierSymbol=27]="ModifierSymbol",a[a.NonSpacingMark=5]="NonSpacingMark",a[a.OpenPunctuation=20]="OpenPunctuation",a[a.OtherLetter=4]="OtherLetter",a[a.OtherNotAssigned=29]="OtherNotAssigned",a[a.OtherNumber=10]="OtherNumber",a[a.OtherPunctuation=24]="OtherPunctuation",a[a.OtherSymbol=28]="OtherSymbol",a[a.ParagraphSeparator=13]="ParagraphSeparator",a[a.PrivateUse=17]="PrivateUse",a[a.SpaceSeparator=11]="SpaceSeparator",a[a.SpacingCombiningMark=6]="SpacingCombiningMark",a[a.Surrogate=16]="Surrogate",a[a.TitlecaseLetter=2]="TitlecaseLetter",a[a.UppercaseLetter=0]="UppercaseLetter"}(a.UnicodeCategory||(a.UnicodeCategory={}));var d=(a.UnicodeCategory,function(){function a(){}return a.GetNextTextElement=function(b,d,e){var f;if(null==b)throw"ArgumentNullException";var g=b.length;if(0>d||d>=g){if(d!=g)throw"ArgumentOutOfRangeException";return""}var h={},i=c.InternalGetUnicodeCategory(b,d,h);f=h.length;var j=a.GetCurrentTextElementLen(b,d,g,i,f,e);return e.length=j,b.substr(d,j)},a.GetCurrentTextElementLen=function(a,b,d,e,f,g){var h;if(b+f===d)return f;var i={},j=c.InternalGetUnicodeCategory(a,b+f,i);if(h=i.length,!c.IsCombiningCategory(j)||c.IsCombiningCategory(e)||15===e||14===e||29===e||16===e){var k=f;return g.ucCurrent=j,g.currentCharCount=h,k}var l=b;for(b+=f+h;d>b;){var i={};if(j=c.InternalGetUnicodeCategory(a,b,i),h=i.length,!c.IsCombiningCategory(j)){g.ucCurrent=j,g.currentCharCount=h;break}b+=h}return b-l},a.GetTextElement=function(b){for(var c=[],d=0;d<b.length;){var e={},f=a.GetNextTextElement(b,d,e);c.push(f),d+=e.length}return c},a}());a.StringInfo=d;var e=function(){function a(){}return a.AddElementCache=function(b,c){a.TextElementCacheCount>500&&(a.TextElementCache={},a.TextElementCacheCount=0),a.TextElementCache[b]=c,a.TextElementCacheCount++},a.TextElementCache={},a.TextElementCacheCount=0,a}();a.StringCache=e,String.prototype.GetStandardPosition=function(a,b){this.CreateSurrogateArray();var c=a;if(null!==e.TextElementArray&&a>0){for(var d=Math.min(a,e.TextElementArray.length),f=0,g=0;d>g;g++)f+=e.TextElementArray[g].length;c=f}return c},String.prototype.CreateSurrogateArray=function(){if(void 0===e.TextElementArray||e._InnerValue.toString()!=this.toString()){e._InnerValue=this;var a=e.TextElementCache[this];if(void 0===a&&(a=d.GetTextElement(this),e.AddElementCache(this,a)),a.length===this.length)e.TextElementArray=null;else{e.TextElementArray=a,e.MultiCharExit=!1;for(var b=0;b<a.length;b++)if(a[b].length>2){e.MultiCharExit=!0;break}}}},String.prototype.GetLength=function(){this.CreateSurrogateArray();var a=this.length;return null!==e.TextElementArray&&(a=e.TextElementArray.length),a},String.prototype.Substring=function(a,b){if(this.CreateSurrogateArray(),a>=b)return"";var c=this.substring(a,b);if(null!==e.TextElementArray){a=Math.max(0,a),b=Math.min(e.TextElementArray.length,b);for(var d=[],f=a;b>f;f++)d.push(e.TextElementArray[f]);c=d.join("")}return c},String.prototype.IndexOf=function(a,b){this.CreateSurrogateArray();var c=this.indexOf(a,b);if(null!==e.TextElementArray&&c>0)for(var d=0,f=0;f<e.TextElementArray.length;f++)if(d+=e.TextElementArray[f].length,d==c){c=f+1;break}return null!==e.TextElementArray&&c>=0&&this.Substring(c,c+a.GetLength()).length!=a.length&&(c=-1),c},String.prototype.LastIndexOf=function(a){this.CreateSurrogateArray();var b=this.lastIndexOf(a);if(null!==e.TextElementArray&&b>0)for(var c=0,d=0;d<e.TextElementArray.length;d++)if(c+=e.TextElementArray[d],c==b){b=d+1;break}return null!==e.TextElementArray&&b>=0&&this.Substring(b,b+a.GetLength()).length!=a.length&&(b=-1),b},String.prototype.CharAt=function(a){this.CreateSurrogateArray();var b=this.charAt(a);return null!==e.TextElementArray&&(b=a>=0&&a<e.TextElementArray.length?e.TextElementArray[a]:""),b},String.prototype.startWith=function(a){return null==a||""==a||0==this.length||a.length>this.length?!1:this.substr(0,a.length)==a?!0:!1},String.prototype.IsNulOrEmpty=function(a){return null==a||""==a}}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=a.getKeyCodeEnum(),e=function(a){function e(){a.apply(this,arguments),this._wasPopupShowing=!1,this._imeCompostiing=!1,this._boundMouseWheel=!1,this._blockNextTriggerClickedEvent=!1}return __extends(e,a),e.prototype._elemWithClasses=function(a,b){return"undefined"==typeof b&&(b=[]),c(a).addClass(b.join(" "))},e.prototype._divWithClasses=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return this._elemWithClasses("<div/>",a)},e.prototype._spanWithClasses=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return this._elemWithClasses("<span/>",a)},e.prototype._horizontalBorderWidth=function(a){return a.leftBorderWidth()+a.rightBorderWidth()},e.prototype._verticalBorderWidth=function(a){return a.topBorderWidth()+a.bottomBorderWidth()},e.prototype._create=function(){var a=this;try{var b=document.activeElement==this.element[0]}catch(d){}var e=this._horizontalBorderWidth(this.element),f=this._verticalBorderWidth(this.element);if("input"!==this.element[0].tagName.toLowerCase()&&"textarea"!==this.element[0].tagName.toLowerCase())throw"Target element is not a INPUT";this._creationDate=new Date,window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c)),this.element.is(":hidden")&&this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){a._destroy(),a._create(),a.element.wijRemoveVisibilityObserver&&a.element.wijRemoveVisibilityObserver()},"wijinput"),this.element.data("widgetName",this.widgetName),c.effects&&c.effects.save?c.effects.save(this.element,["width","height"]):c.save&&c.save(this.element,["width","height"]);var g=this.options.wijCSS;if(this.element.wrap("<div><span/></div"),this.wrapper=this.element.parent(),this.outerDiv=this.wrapper.parent(),this.outerDiv.addClass([g.wijinput,g.widget,g.helperClearFix,g.stateDefault,g.cornerAll].join(" ")),this.wrapper.addClass(g.wijinputWrapper),this.element.addClass(g.wijinputInput).addClass(g.cornerAll).attr("role","textbox"),!(i.IsIE()&&parseFloat(c.browser.version)<=7))try{this.element.attr("aria-multiline",!1)}catch(d){this.element[0].setAttribute("aria-multiline","false")}void 0!=this.options.showTrigger&&(this.options.showDropDownButton=this.options.showTrigger),this._createDropDownAndSpin(),this._initialize(),b&&c(function(){return a.element.focus().wijtextselection(0,a.element.val().length)});var h=this.element[0].style;h.width&&(this._isInPercents(h.width)?this.outerDiv.width(h.width):this.outerDiv.width(this.element.width()+e-this._horizontalBorderWidth(this.outerDiv)),this.element.width("")),h.height&&(this._isInPercents(h.height)?this.outerDiv.height(h.height):this.outerDiv.height(this.element.height()+f-this._verticalBorderWidth(this.outerDiv)),this.element.height(this.outerDiv.height()-(parseInt(this.wrapper.css("padding-top"))+parseInt(this.wrapper.css("padding-bottom")))),this.wrapper.height(h.height))},e.prototype._createDropDownAndSpin=function(){this._createDropDownAndSpinElement(),this._createDropDownAndSpinStyle(),this._createDropDownAndSpinLayout()},e.prototype._createDropDownAndSpinElement=function(){var a=this.options.wijCSS,b=this.options.spinnerAlign,c="verticalLeft"===b,d="left"===this.options.dropDownButtonAlign,e=this.options.showSpinner,f=this._isDropDownButtonShown();if(null!=this.options.buttonAlign&&(c="left"==this.options.buttonAlign,d="left"==this.options.buttonAlign,b="left"==this.options.buttonAlign?"verticalLeft":"verticalRight"),this.triggerBtn=null,this.spinUpElement=null,this.spinDownElement=null,this.outerDiv.css("overflow","hidden"),f){var g=d?a.cornerLeft:a.cornerRight;this.triggerBtn=this._divWithClasses(a.wijinputTrigger,a.stateDefault,g).append(this._spanWithClasses(a.icon,a.iconArrowDown)).attr("role","button"),this.element.attr({"role":"combobox","aria-expanded":!1})}e&&(this.spinnerLeft=this._divWithClasses(a.wijinputSpinnerLeft,a.wijinputButton),this.spinnerRight=this._divWithClasses(a.wijinputSpinnerRight,a.wijinputButton),"verticalLeft"===b||"verticalRight"===b?(this.spinUpElement=this._divWithClasses(a.stateDefault,a.wijinputSpinUp).append(this._spanWithClasses(a.icon,a.iconArrowUp)).css({"padding":"0px"}).attr("role","upbutton"),this.spinDownElement=this._divWithClasses(a.stateDefault,a.wijinputSpinDown).append(this._spanWithClasses(a.icon,a.iconArrowDown)).css({"padding":"0px"}).attr("role","downbutton")):(this.spinUpElement=this._divWithClasses(a.stateDefault,a.wijinputSpin).append(this._spanWithClasses(a.icon,a.iconPlus,a.glyphIcon,a.glyphIconPlus)).css({"padding":"0px"}).attr("role","upbutton"),this.spinDownElement=this._divWithClasses(a.stateDefault,a.wijinputSpin).append(this._spanWithClasses(a.icon,a.iconMinus,a.glyphIcon,a.glyphIconMinus)).css({"padding":"0px"}).attr("role","downbutton")),this.element.attr("role","spinner"))},e.prototype._createDropDownAndSpinStyle=function(){var a=this.options.wijCSS,b=this.options.spinnerAlign,c="verticalLeft"===this.options.spinnerAlign,d="left"===this.options.dropDownButtonAlign,e=this.options.showSpinner,f=this._isDropDownButtonShown();if(null!=this.options.buttonAlign&&(c="left"==this.options.buttonAlign,d="left"==this.options.buttonAlign,b="left"==this.options.buttonAlign?"verticalLeft":"verticalRight"),f&&e)if(d)switch(b){case"verticalLeft":this.outerDiv.addClass(a.inputSpinnerTriggerLeft);break;case"verticalRight":this.outerDiv.addClass(a.inputTriggerLeft),this.outerDiv.addClass(a.inputSpinnerRight);break;case"horizontalDownLeft":case"horizontalUpLeft":this.outerDiv.addClass(a.inputSpinnerTriggerLeft),this.outerDiv.addClass(a.inputSpinnerRight)}else switch(b){case"verticalLeft":this.outerDiv.addClass(a.inputTriggerRight),this.outerDiv.addClass(a.inputSpinnerLeft);break;case"verticalRight":this.outerDiv.addClass(a.inputSpinnerTriggerRight);break;case"horizontalDownLeft":case"horizontalUpLeft":this.outerDiv.addClass(a.inputSpinnerTriggerRight),this.outerDiv.addClass(a.inputSpinnerLeft)}else if(f)d?this.outerDiv.addClass(a.inputTriggerLeft):this.outerDiv.addClass(a.inputTriggerRight);else if(e)switch(b){case"verticalLeft":this.outerDiv.addClass(a.inputSpinnerLeft);break;case"verticalRight":this.outerDiv.addClass(a.inputSpinnerRight);break;case"horizontalDownLeft":case"horizontalUpLeft":this.outerDiv.addClass(a.inputSpinnerLeft),this.outerDiv.addClass(a.inputSpinnerRight)}if(f&&e)if(d)switch(b){case"verticalRight":this.spinUpElement.addClass(a.cornerTR),this.spinDownElement.addClass(a.cornerBR);break;case"horizontalDownLeft":this.spinUpElement.addClass(a.cornerRight);break;case"horizontalUpLeft":this.spinDownElement.addClass(a.cornerRight)}else switch(b){case"verticalLeft":this.spinUpElement.addClass(a.cornerTL),this.spinDownElement.addClass(a.cornerBL);break;case"horizontalDownLeft":this.spinDownElement.addClass(a.cornerLeft);break;case"horizontalUpLeft":this.spinUpElement.addClass(a.cornerLeft)}else if(e)switch(b){case"verticalLeft":this.spinUpElement.addClass(a.cornerTL),this.spinDownElement.addClass(a.cornerBL);break;case"verticalRight":this.spinUpElement.addClass(a.cornerTR),this.spinDownElement.addClass(a.cornerBR);break;case"horizontalDownLeft":this.spinDownElement.addClass(a.cornerLeft),this.spinUpElement.addClass(a.cornerRight);break;case"horizontalUpLeft":this.spinUpElement.addClass(a.cornerLeft),this.spinDownElement.addClass(a.cornerRight)}},e.prototype._createDropDownAndSpinLayout=function(){var a=this.options.spinnerAlign,b=this.options.showSpinner,c=this._isDropDownButtonShown();if(null!=this.options.buttonAlign&&(a="left"==this.options.buttonAlign?"verticalLeft":"verticalRight"),c&&this.triggerBtn.appendTo(this.outerDiv),b)switch(a){case"verticalLeft":this.spinnerLeft.append(this.spinUpElement).append(this.spinDownElement).appendTo(this.outerDiv);break;case"verticalRight":this.spinnerRight.append(this.spinUpElement).append(this.spinDownElement).appendTo(this.outerDiv);break;case"horizontalDownLeft":this.spinnerLeft.append(this.spinDownElement).appendTo(this.outerDiv),this.spinnerRight.append(this.spinUpElement).appendTo(this.outerDiv);break;case"horizontalUpLeft":this.spinnerLeft.append(this.spinUpElement).appendTo(this.outerDiv),this.spinnerRight.append(this.spinDownElement).appendTo(this.outerDiv)}},e.prototype._isDropDownButtonShown=function(){var a=this.options.showTrigger;return void 0===a&&(a=!1),a||this.options.showDropDownButton},e.prototype._isInPercents=function(a){return a.match(/%$/)},e.prototype._createTextProvider=function(){return void 0},e.prototype._beginUpdate=function(){},e.prototype._endUpdate=function(){var a=this;this.element.mousewheel&&!this._boundMouseWheel&&(this.element.mousewheel(function(b,c){a.isFocused()&&a._doSpin(c>0,!1)&&b.preventDefault()}),this._boundMouseWheel=!0)},e.prototype._isPopupShowing=function(){return!!this._comboDiv&&this._comboDiv.wijpopup("isVisible")},e.prototype._onTriggerMouseDown=function(a){this._wasPopupShowing&&(this._blockNextTriggerClickedEvent=!0)},e.prototype._onTriggerMouseUp=function(a){},e.prototype._onTriggerClicked=function(){return this._blockNextTriggerClickedEvent?void(this._blockNextTriggerClickedEvent=!1):void(this._popupVisible()?this._hidePopup():this._showPopup())},e.prototype._showPopup=function(){return this._popupComboList()},e.prototype._hidePopup=function(){this._comboDiv.wijpopup("hide")},e.prototype._initialize=function(){var a=this;this.element.data("initializing",!0),this._trigger("initializing"),this.element.data("preText",this.element.val()),this.element.data("elementValue",this.element.val()),this.element.data("errorstate",!1),this.element.data("breakSpinner",!0),this.element.data("prevSelection",null),this.element.data("simulating",!1),this._createTextProvider(),this._beginUpdate();var b=this.options,d=function(a){return 1===(a.which?a.which:a.button)},e=function(b){a.options.disabled||d(b)&&(a.options.disableUserInput||(a._trySetFocus(),i.IsFireFox4OrLater()&&a._stopEvent(b),a.element.data("breakSpinner",!1),a._addState("active",c(a)),a._doSpin("upbutton"==c(b.currentTarget).attr("role"),!0)))},f=function(b){a.options.disabled||d(b)&&(a.options.disableUserInput||(a._stopSpin(),a._removeState("active",c(a))))};if(this.triggerBtn&&!b.disabledState&&this.triggerBtn.bind({"mouseover":function(){a.options.disabled||a._addState("hover",c(a))},"mouseout":function(){a.options.disabled||a._removeState("hover",c(a))},"mousedown":function(b){a.options.disabled||d(b)&&(a._stopEvent(b),a._addState("active",c(a)),a._trigger("triggerMouseDown"),a._trigger("dropDownButtonMouseDown"),a._onTriggerMouseDown(b))},"mouseup":function(b){a._onTriggerMouseUp(b)},"click":function(b){a.options.disabled||(a._stopEvent(b),a._stopSpin(),a._removeState("active",c(a)),a._trigger("triggerMouseUp"),a._trigger("dropDownButtonMouseUp"),a._onTriggerClicked(),i.IPad||a._trySetFocus())}}),this.spinUpElement&&!b.disabledState&&this.spinUpElement.bind({"mouseover":function(){a.options.disabled||a._addState("hover",c(a))},"mouseout":function(){a.options.disabled||(a._removeState("hover",c(a)),a._removeState("active",c(a)),a._stopSpin())},"mousedown":e,"mouseup":f}),this.spinDownElement&&!b.disabledState&&this.spinDownElement.bind({"mouseover":function(){a.options.disabled||a._addState("hover",c(a))},"mouseout":function(){a.options.disabled||(a._removeState("hover",c(a)),a._removeState("active",c(a)),a._stopSpin())},"mousedown":e,"mouseup":f}),this._attachInputEvent(),this.element.data("initializing",!1),this._resetData(),this._endUpdate(),this._updateText(),this.options.disabledState){var g=b.disabled;this.disable(),b.disabled=g}this.options.disabled&&this.disable(),this.options.imeMode&&this.element.css("ime-mode",this.options.imeMode),this.element.data("initialized",!0),this._trigger("initialized")},e.prototype._attachInputEvent=function(){this.element.bind({"focus.wijinput":c.proxy(this._onFocus,this),"beforedeactivate.wijinput":c.proxy(this._onBeforeDeactivate,this),"blur.wijinput":c.proxy(this._onBlur,this),"mousedown.wijinput":c.proxy(this._onMouseDown,this),"mouseup.wijinput":c.proxy(this._onMouseUp,this),"keypress.wijinput":c.proxy(this._onKeyPress,this),"keydown.wijinput":c.proxy(this._onKeyDown,this),"keyup.wijinput":c.proxy(this._onKeyUp,this),"compositionstart.wijinput":c.proxy(this._onCompositionStart,this),"compositionend.wijinput":c.proxy(this._onCompositionEnd,this),"change.wijinput":c.proxy(this._onChange,this),"paste.wijinput":c.proxy(this._onPaste,this),"drop.wijinput":c.proxy(this._onDrop,this)}),this.element.bind("propertychange.wijinput input.wijinput",c.proxy(this._onInput,this))},e.prototype._detachInputEvent=function(){this.element.unbind(".wijinput")},e.prototype._init=function(){this.element.attr("readOnly")&&(this.options.readonly=!0),this.options.readonly===!0&&(this.options.disableUserInput=!0),(this.options.readonly===!0||this.options.disableUserInput===!0)&&this.element.attr("readOnly",!0),null!=this.options.placeholder&&(this.options.nullText=this.options.placeholder)},e.prototype._showNullText=function(){return!!this.options.nullText||""===this.options.nullText},e.prototype._setOption=function(a,b){switch(a){case"readonly":this._super(a,b),a="disableUserInput";break;case"placeholder":this._super(a,b),a="nullText";break;case"showTrigger":this.options.showTrigger=b,this.options.showDropDownButton=b}switch(this._super(a,b),a){case"spinnerAlign":case"dropDownButtonAlign":case"showDropDownButton":case"buttonAlign":case"showTrigger":case"showSpinner":this._destroy(),this._create();break;case"showNullText":case"nullText":this._updateText();break;case"imeMode":this.element.css("ime-mode",this.options.imeMode);break;case"disabled":this.element.attr("disabled",b);var c=b?"addClass":"removeClass",d=this.options.wijCSS.stateDisabled;this.element[c](d),this.triggerBtn&&this.triggerBtn[c](d),this.spinUpElement&&this.spinUpElement[c](d),this.spinDownElement&&this.spinDownElement[c](d);break;case"disableUserInput":this.element.attr("readOnly",b);break;case"pickers":this._deleteComboDiv()}},e.prototype.destroy=function(){this._super(),this._comboDiv&&this._comboDiv.remove(),this.outerDiv&&this.outerDiv.remove(),this.spinnerLeft&&this.spinnerLeft.remove(),this.spinnerRight&&this.spinnerRight.remove(),this.spinDownElement&&this.spinDownElement.remove(),this.spinUpElement&&this.spinUpElement.remove(),this._destroy()},e.prototype.drop=function(){this._onTriggerClicked()},e.prototype.isDestroyed=function(){return!this.outerDiv},e.prototype._destroy=function(){this.isDestroyed()||(this.wrapper=void 0,this.outerDiv=void 0,this._detachInputEvent(),this.element.removeData("errorstate").removeData("breakSpinner").removeData("prevSelection").removeData("simulating").removeData("isPassword").removeClass(this.options.wijCSS.wijinputInput).removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeAttr("aria-expanded"),this.element.parent().replaceWith(this.element),this.element.parent().replaceWith(this.element),c.effects&&c.effects.restore?c.effects.restore(this.element,["width","height"]):c.restore&&c.restore(this.element,["width","height"]),this.triggerBtn=void 0,this.spinnerLeft=void 0,this.spinnerRight=void 0,this.spinDownElement=void 0,this.spinUpElement=void 0)},e.prototype.widget=function(){return this.outerDiv||this._super()},e.prototype._getCulture=function(a){if(!Globalize)return null;var b=c.extend(!0,{},Globalize.findClosestCulture(a||this.options.culture)||Globalize.findClosestCulture("default"));return""!==this.options.cultureCalendar&&"standard"!==this.options.cultureCalendar&&c.extend(b.calendar,b.calendars[this.options.cultureCalendar||"standard"]),b},e.prototype._addState=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass(this.options.wijCSS.getState(a))},e.prototype._removeState=function(a,b){b.removeClass(this.options.wijCSS.getState(a))},e.prototype._isInitialized=function(){return!this.element.data("initializing")},e.prototype._setData=function(a){this.setText(a)},e.prototype._resetData=function(){},e.prototype._validateData=function(){},e.prototype.getText=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!1):this.element.val()},e.prototype.setText=function(a){this._isInitialized()?(this._textProvider.setText(a),""!==a&&this.element.val()!==this.options.nullText&&this.element.data("isShowNullText",!1),this._updateText()):this.element.val(a)},e.prototype.getPostValue=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!0):this.element.val()},e.prototype.selectText=function(a,b){var c=this;"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=this.getText().length),isNaN(a)&&(a=0),isNaN(b)&&(b=0),i.IsFireFox4OrLater()&&this.focus(),this.element.is(":disabled")||(this.isSelectingFromAPI=!0,this.element.wijtextselection(a,b),setTimeout(function(){return c.isSelectingFromAPI=!1},100))},e.prototype.focus=function(){this.element.is(":disabled")||this.element.get(0).focus()},e.prototype.isFocused=function(){return this.outerDiv?this.outerDiv.hasClass(this.options.wijCSS.stateFocus):!1},e.prototype.getSelectedText=function(){if(this.isFocused())return this.element.wijtextselection().text;if(this.element.data("prevSelection")){var a=this.element.data("prevSelection").start,b=this.element.data("prevSelection").end;return this.element.val().substring(a,b)}return""},e.prototype._raiseTextChanged=function(){var a=this.element.val(),b=this.element.data("preText");this.element.data("initialized")&&b!==a&&(this._trigger("textChanged",null,{"text":a}),this.element.data("changed",!0)),this.element.data("preText",a)},e.prototype._raiseDataChanged=function(){},e.prototype._allowEdit=function(){return!this.element.is(":disabled")},e.prototype._updateText=function(a){if("undefined"==typeof a&&(a=!1),this._isInitialized()){a=!!a;var b;if(void 0!==this.element.data("selectionbeforeblur"))b=this.element.data("selectionbeforeblur"),this.element.removeData("selectionbeforeblur");else try{b=this.element.wijtextselection()}catch(c){}var d=this.options;this.isDeleteAll&&this._showNullText()?(this.isDeleteAll=!1,d.date=null,this.element.val(d.nullText)):(this.element.val(this._textProvider.toString()),this.options.text=this._textProvider.toString(!0,!1,!1)),this.element.is(":disabled")||(a&&this.selectText(b.start,b.end),this.element.data("prevSelection",b)),this._raiseTextChanged(),this._raiseDataChanged()}},e.prototype._trySetFocus=function(){if(document.activeElement!==this.element[0])try{this.options.disableUserInput||this.element.focus()}catch(a){}},e.prototype._deleteSelText=function(a){if("undefined"==typeof a&&(a=!1),this._allowEdit()){var c=this.element.wijtextselection();if(a){if(c.end<1)return;c.end===c.start&&c.start--}c.end--,c.end<c.start&&(c.end=c.start);var d=new b.wijInputResult;this._textProvider.removeAt(c.start,c.end,d),this._updateText(),this.selectText(d.testPosition,d.testPosition)}},e.prototype._fireIvalidInputEvent=function(a){var b=this,d=this._trigger("invalidInput",null,{"widget":this,"char":a});if(!(c.isFunction(this.options.invalidInput)&&d===!0||this.element.data("errorstate"))){var e=this.options.invalidClass||this.options.wijCSS.stateError;this.element.data("errorstate",!0),window.setTimeout(function(){b.outerDiv&&b.outerDiv.removeClass(e),b.element.data("errorstate",!1)},200),this.outerDiv.addClass(e)}},e.prototype._onInput=function(a){var b=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);return b?void(this.element.data("hasInput")!==!0||this._imeCompostiing||(this.element.data("hasInput",!1),this._simulate())):this._isSimulating()&&this.element.data("ime")&&!this.element.data("isComposingIME")?void this._simulate():void(this.element.data("isComposingIME")&&this.element.data("simulationPending",!0))},e.prototype._keyDownPreview=function(a){var b=a.keyCode||a.which;return a.ctrlKey===!0&&88===b?!0:a.ctrlKey===!0&&90===b?!0:!1},e.prototype._onDoubleByteCharacter=function(){var a=this.element.data("lastDbsState"),b=this.element.wijtextselection(),c=this.element.val();this.element.data("isComposingIME")&&a&&a.selection.start===b.start&&a.Text===c?(this.element.removeData("lastDbsState"),this._simulateOnCompositionEnd()):(this.element.data("lastDbsState",{"selection":b,"text":c}),this._onCompositionStart())},e.prototype._onCompositionStart=function(){var a=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);return a?(this._imeCompostiing=!0,void this._beforeSimulate(!0)):void(this.element.data("isComposingIME")||(this.element.data("isComposingIME",!0),this._beforeSimulate(!0)))},e.prototype._onCompositionEnd=function(){var a=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);return a?(this._imeCompostiing=!1,void this.element.data("hasInput",!0)):void this._simulateOnCompositionEnd()},e.prototype._simulateOnCompositionEnd=function(){this.element.data("isComposingIME")&&(this.element.data("isComposingIME",!1),!this._isInitialized()||this._textProvider&&this._textProvider.noMask||this._simulateIfPending())},e.prototype._simulateIfPending=function(){this.element.data("simulationPending")&&this.element.data("lastSelection")&&this._simulate()},e.prototype._beforeSimulate=function(a){"undefined"==typeof a&&(a=!1),this.element.data("lastSelection")||(this.element.data("lastSelection",this.element.wijtextselection()),this.element.data("lastValue",this.element.val())),this.element.data("ime",a),this.element.data("simulating",!0)},e.prototype._isSimulating=function(){return this.element.data("simulating")},e.prototype._simulate=function(a){var b=this,c=null;if(this.element.data("simulationPending",!1),"string"==typeof a)c=a;else{var d=this.element.wijtextselection(),e=this.element.data("lastSelection").start,f=d.end;f>=e&&(c=this.element.val().substring(e,f))}c&&window.setTimeout(function(){if(!b._isLastValueNull()){b.element.val(b.element.data("lastValue"));var a=b.element.data("lastSelection");b.element.wijtextselection(a),b._batchKeyPress=!0,b.element.data("simulating",!1);var d=jQuery.Event("keypress");d.ctrlKey=d.altKey=!1;for(var e=0;e<c.length;e++){d.which=d.charCode=d.keyCode=c.charCodeAt(e),b._nextChar=e===c.length-1?"":c.charAt(e+1),b._onKeyPress(d),b._nextChar="";var f=b._appendChar;f&&f.length>0&&(b._appendChar="",d.which=d.charCode=d.keyCode=f.charCodeAt(e),b._onKeyPress(d)),b._skipNextChar&&(e++,b._skipNextChar=!1)}b._batchKeyPress=!1,b._endSimulate()}},1)},e.prototype._isLastValueNull=function(){return!this.element.data("lastValue")},e.prototype._endSimulate=function(){this._simulateIfPending(),this.element.removeData("ime"),this.element.removeData("lastSelection"),this.element.removeData("lastValue")},e.prototype._processKeyForDropDownList=function(a){var b=this._getKeyCode(a);if(a.altKey&&(b===d.UP||b===d.DOWN))return this._onTriggerClicked(),this._stopEvent(a),!0;if(b===d.ESCAPE&&this._wasPopupShowing)return this._hidePopup(),this._stopEvent(a),!0;if(this._wasPopupShowing&&void 0!==this._comboDiv){if(b===d.DOWN){try{this._comboDiv.wijlist("next")}catch(c){}return this._stopEvent(a),!0}if(b===d.UP){try{this._comboDiv.wijlist("previous")}catch(c){}return this._stopEvent(a),!0}if(b===d.ENTER)return this._comboDiv.wijlist("select"),a.preventDefault(),!0;if(b===d.PAGE_DOWN){try{this._comboDiv.wijlist("nextPage")}catch(c){}return this._stopEvent(a),!0}if(b===d.PAGE_UP){try{this._comboDiv.wijlist("previousPage")}catch(c){}return this._stopEvent(a),!0}}},e.prototype._processKeyOnNoMask=function(a){var b=this._getKeyCode(a);return b===d.Enter&&this._onEnterDown(a),b!==d.LEFT&&b!==d.RIGHT||!this._processLeftRightKey(b===d.LEFT)?void this._processKeyForDropDownList(a):void this._stopEvent(a)},e.prototype._onKeyDown=function(a){var b=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if((!b||!this._imeCompostiing)&&(this.element.data("prevSelection",null),this._deleteKeyDown=!1,this._isInitialized())){if(this._textProvider&&this._textProvider.noMask)return void this._processKeyOnNoMask(a);var e=this._getKeyCode(a);if(229===e)return void this._onDoubleByteCharacter();if(this._simulateOnCompositionEnd(),this.options.disableUserInput)return void(e===d.TAB?this._processTabKey(a)&&this._stopEvent(a):this._stopEvent(a));if(this._keyDownPreview(a))return void this._stopEvent(a);if(!this._processKeyForDropDownList(a)){switch(e){case d.UP:return this._doSpin(!0,!1),void this._stopEvent(a);case d.DOWN:return this._doSpin(!1,!1),void this._stopEvent(a);case d.LEFT:case d.RIGHT:return void(this._processLeftRightKey(e===d.LEFT)&&(this._trigger("keyExit"),this._stopEvent(a)));case d.TAB:return void(this._processTabKey(a)&&this._stopEvent(a))}if(a.ctrlKey)switch(e){case d.INSERT:case 67:return}if(!a.ctrlKey&&!a.altKey)switch(e){case 112:case 113:case 114:case 115:case 116:case 117:case d.TAB:case d.CAPSLOCK:case d.END:case d.HOME:case d.CTRL:case d.SHIFT:return;case d.BACKSPACE:return this._deleteSelText(!0),void this._stopEvent(a);case d.DELETE:return this._deleteSelText(!1),this._stopEvent(a),void(this._deleteKeyDown=!0);case d.ENTER:this._onEnterDown(a);break;case d.ESCAPE:return this._stopEvent(a),void window.setTimeout(c.proxy(this._resetData,this),1);case d.PAGE_UP:case d.PAGE_DOWN:case d.ALT:return void this._stopEvent(a)}}}},e.prototype._onEnterDown=function(a){this.options.hideEnter&&this._stopEvent(a)},e.prototype._onKeyUp=function(a){var b=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if(!(b&&this._imeCompostiing||this._textProvider&&this._textProvider.noMask)){var c=this._getKeyCode(a);if(this._isSimulating())return void(c===d.ENTER&&this._simulateOnCompositionEnd());if(this._isInitialized()&&c!==d.ENTER&&c!==d.ESCAPE)return this.options.disableUserInput?(this._raiseTextChanged(),void this._raiseDataChanged()):void this._stopEvent(a)}},e.prototype._getKeyCode=function(a){var b=window.navigator.userAgent;return-1===b.indexOf("iPod")&&-1===b.indexOf("iPhone")||127!==a.which?a.keyCode||a.which:8},e.prototype._keyPressPreview=function(a){return!1},e.prototype._onKeyPress=function(a){
if(!(this._isSimulating()||this._textProvider&&this._textProvider.noMask)){var b=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if((!b||!this._imeCompostiing)&&(this.element.data("prevSelection",null),!this.options.disableUserInput&&this._allowEdit())){if(a.ctrlKey&&119===a.keyCode)return void this._onPaste(a);var c=a.keyCode||a.which;if(i.IsFireFox4OrLater())switch(a.keyCode){case d.UP:case d.DOWN:case d.LEFT:case d.RIGHT:case d.HOME:case d.END:return}switch(c){case 0:case d.TAB:return;case d.BACKSPACE:return void this._stopEvent(a);case d.DELETE:if(this._deleteKeyDown)return void this._stopEvent(a);break;case d.ENTER:return void(this.options.hideEnter&&this._stopEvent(a))}if((!a.ctrlKey&&!a.altKey||c===d.SPACE)&&!this._keyPressPreview(a)){var b=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if(b&&!this._batchKeyPress)return this.element.data("hasInput",!0),void this._beforeSimulate(!0);var e=String.fromCharCode(c),f=this._textProvider.replaceWith(this.element.wijtextselection(),e);f?(this._updateText(),this.selectText(f.testPosition+1,f.testPosition+1),this.element.data("prevSelection",{"start":f.testPosition+1,"end":f.testPosition+1})):this._fireIvalidInputEvent(e),this._batchKeyPress||this._stopEvent(a)}}}},e.prototype._isNullText=function(a){return a=a||this.element.val(),this._showNullText()&&a===this.options.nullText},e.prototype._doFocus=function(){var a=this.element.wijtextselection(),b=a.start;this._updateText();var d=this.element.val();d.length===b&&(b=0),c.browser.safari||this.selectText(b,b)},e.prototype._afterFocused=function(){this._isNullText()&&this._doFocus()},e.prototype._onFocus=function(a){this.options.disableUserInput||(this.outerDiv.addClass(this.options.wijCSS.getState("focus")),this.element.data("breakSpinner")&&this._isInitialized()&&this._allowEdit()&&(this.isSelectingFromAPI||(this.element.data("focusNotCalledFirstTime")||this.element.data("focusNotCalledFirstTime",(new Date).getTime()),this._afterFocused())))},e.prototype._onBeforeDeactivate=function(a){this.options.disableUserInput||this.element.data("breakSpinner")&&this._isInitialized()&&this._allowEdit()&&this.element.data("selectionbeforeblur",this.element.wijtextselection())},e.prototype._onBlur=function(a){if(!this.options.disableUserInput&&(this._simulateOnCompositionEnd(),!this._isComboListVisible())){var b=this.isFocused();if(this._removeState("focus",this.outerDiv),this.element.data("breakSpinner"))this._isInitialized()&&b&&(this.element.data("value",this.element.val()),this._updateTextOnLostFocus());else if(this.element.get(0).focus(),this.element.data("prevSelection")){var c=this.element.data("prevSelection").start;void 0!==c&&null!==c&&this.selectText(c,c)}}},e.prototype._updateTextOnLostFocus=function(){var a=this;window.setTimeout(function(){a._onChange(),a._updateText(),a._validateData(),a.element.data("changed")&&(a.element.data("changed",!1),a._popupVisible()||(a._trigger("change"),a.element.change()))},100)},e.prototype._popupVisible=function(){return this._wasPopupShowing},e.prototype._onMouseDown=function(a){if(this._isInitialized()&&!this.element.is(":disabled")&&i.IsMouseDownOnClearButton(a)){var b=!1;try{b=document.activeElement===a.target}catch(c){}return this.element.data("focusedWhenMouseDown",b),void this.element.data("mouseDownOnClearButton",!0)}},e.prototype._onMouseUp=function(a){if(this._isInitialized()&&!this.element.is(":disabled")){if(i.IsMouseDownOnClearButton(a)&&this.element.data("mouseDownOnClearButton")&&this.element.data("focusedWhenMouseDown")===!0){if(!this.options.disableUserInput){var b=this;setTimeout(function(){b._processClearButton()},0)}return void this.element.data("mouseDownOnClearButton",!1)}this.element.data("mouseDownOnClearButton",!1),this.element.data("focusedWhenMouseDown",!1);var c=this.element.wijtextselection();if(this.element.data("prevSelection",c),""!=this.element.val()){var b=this;setTimeout(function(){""==b.element.val()&&b.setText("")},5),this.element.data("isFocusSelecting")&&(this.element.data("isFocusSelecting",!1),a.preventDefault())}}},e.prototype._onChange=function(){if(this.element){var a=this.element.val(),b=this.getText();b!==a&&this.setText(a)}},e.prototype._onPaste=function(a){if(!this._textProvider||!this._textProvider.noMask){this._beforeSimulate();var b=this;window.setTimeout(function(){b._simulate()},1)}},e.prototype._onDrop=function(a){if(this._beforeSimulate(),a.originalEvent&&a.originalEvent.dataTransfer){var b=a.originalEvent.dataTransfer.getData("Text");b&&this._simulate(b)}},e.prototype._stopEvent=function(a){a.stopPropagation(),a.preventDefault()},e.prototype._calcSpinInterval=function(){return this._repeatingCount++,this._repeatingCount>10?50:this._repeatingCount>4?100:this._repeatingCount>2?200:400},e.prototype._doSpin=function(a,b){return!1},e.prototype._stopSpin=function(){this.element.data("breakSpinner",!0),this._repeatingCount=0;var a=this.element.data("spintimer");a&&(clearTimeout(a),this.element.data("spintimer",void 0))},e.prototype._hasComboItems=function(){return!!this._getcomboItems()&&this._getcomboItems().length},e.prototype._getcomboItems=function(){return this.options.comboItems&&this.options.comboItems.length>0?this.options.comboItems:this.options.pickers.list},e.prototype._getcomboWidth=function(){return this.options.comboWidth||this.options.pickers.width},e.prototype._getcomboHeight=function(){return this.options.comboHeight||this.options.pickers.height},e.prototype._isComboListVisible=function(){return this._comboDiv?this._comboDiv.wijpopup("isVisible"):!1},e.prototype._deleteComboDiv=function(){void 0!=this._comboDiv&&(this._comboDiv.wijlist("destroy"),this._comboDiv.remove(),delete this._comboDiv)},e.prototype._createComboDiv=function(){var a=this;if(void 0===this._comboDiv){this._comboDiv=c("<div></div>").appendTo(document.body).css("position","absolute");var b=this._normalize(this._getcomboItems());this._comboDiv.wijlist({"maxItemsCount":5,"selected":function(b,c){a.options.disableUserInput||a._setData(c.item.value),a._comboDiv.wijpopup("hide"),a._trySetFocus()}}),this._comboDiv.wijlist("setItems",b),this._comboDiv.wijlist("renderList")}},e.prototype._popupComboList=function(){var a=this;if(!this._hasComboItems())return!1;if(!this._allowEdit())return!1;var b=this.outerDiv.width(),c=this._getcomboWidth(),d=this._getcomboHeight();return void 0!=this._comboDiv&&c&&parseInt(c)!==this._comboDiv.width()&&this._deleteComboDiv(),this._createComboDiv(),this._comboDiv.width(b),this._comboDiv.wijlist("option","autoSize",!d),d&&this._comboDiv.height(d),c&&this._comboDiv.width(c),this._comboDiv.wijlist("refreshSuperPanel"),this._comboDiv.wijpopup({"autoHide":!0,"hidden":function(){a._trigger("dropDownClose"),a._wasPopupShowing=!1,a._comboDiv.wijlist("unselectItems"),a._comboDiv.wijlist("deactivate")},"shown":function(){a._trigger("dropDownOpen"),a._wasPopupShowing=!0}}),this.outerDiv.attr("aria-expanded",!0),this._comboDiv.wijpopup("show",{"of":this.outerDiv,"offset":"0 4","hidden":function(){a.outerDiv.attr("aria-expanded",!1)}}),!0},e.prototype._normalize=function(a){return a.length&&a[0].label&&a[0].value?a:c.map(a,function(a){return"string"==typeof a?{"label":a,"value":a}:c.extend({"label":a.label||a.value,"value":a.value||a.label},a)})},e.prototype._processLeftRightKey=function(a){return!1},e.prototype._processTabKey=function(a){return!1},e.prototype._moveControl=function(a,b,c){var d=i.GetElements();if(d.length<2)return null;var e=i.GetNextFocusableControl(a,d,b),f=this;setTimeout(function(){i.SetElementFocus(e),f._trigger("keyExit")},0)},e.prototype._processClearButton=function(){},e}(a.wijmoWidget);b.wijinputcore=e;var f="wijmo-wijinput",g=f+"-",h=function(){function a(){this.wijCSS={"wijinput":f,"wijinputInput":g+"input","wijinputWrapper":g+"wrapper","wijinputWrapperSpinnerLeft":g+"wrapper-spinner-left","wijinputWrapperSpinnerRight":g+"wrapper-spinner-right","wijinputTrigger":g+"trigger","wijinputSpinnerLeft":g+"spinner-left","wijinputSpinnerRight":g+"spinner-right","wijinputButton":g+"button","wijinputSpin":g+"spin","wijinputSpinUp":g+"spinup","wijinputSpinDown":g+"spindown","glyphIcon":"glyphicon","glyphIconPlus":"glyphicon-plus","glyphIconMinus":"glyphicon-minus","iconPlus":"ui-icon-plus","iconMinus":"ui-icon-minus"},this.imeMode="",this.culture="",this.cultureCalendar="",this.invalidClass=c.wijmo.wijCSS.stateError,this.nullText=void 0,this.placeholder=void 0,this.showNullText=!1,this.hideEnter=!1,this.disableUserInput=!1,this.readonly=!1,this.buttonAlign=null,this.dropDownButtonAlign="right",this.showDropDownButton=!1,this.showTrigger=void 0,this.showSpinner=!1,this.comboItems=void 0,this.comboWidth=void 0,this.comboHeight=void 0,this.blurOnLeftRightKey="none",this.spinnerAlign="verticalRight",this.allowSpinLoop=!1,this.pickers={"list":void 0,"width":void 0,"height":void 0},this.dropDownOpen=null,this.dropDownClose=null,this.initializing=null,this.initialized=null,this.triggerMouseDown=null,this.triggerMouseUp=null,this.dropDownButtonMouseDown=null,this.dropDownButtonMouseUp=null,this.textChanged=null,this.invalidInput=null,this.keyExit=null}return a}();e.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new h),function(a){a[a.Default=-1]="Default",a[a.Left=0]="Left",a[a.Middle=1]="Middle",a[a.Right=2]="Right"}(b.MouseButton||(b.MouseButton={}));var i=(b.MouseButton,function(){function a(){}return a.GetBrowserType=function(){var b=navigator.userAgent.toLowerCase();if(-1!=b.indexOf("msie"))a.ie=b.match(/msie ([\d.]+)/)[1];else if(-1!=b.indexOf("chrome"))a.chrome=b.match(/chrome\/([\d.]+)/)[1];else if(-1!=b.indexOf("safari")){var c=b.match(/version\/([\d.]+)/);c&&(a.safari=c[1])}else-1!=b.indexOf("firefox")?a.firefox=b.match(/firefox\/([\d.]+)/)[1]:-1!=b.indexOf("opera")&&(a.opera=b.match(/opera.([\d.]+)/)[1]);-1!=b.indexOf("ipad")&&(a.IPad=!0),a.engine=null,"Microsoft Internet Explorer"==window.navigator.appName&&(document.documentMode?a.engine=document.documentMode:(a.engine=5,document.compatMode&&"CSS1Compat"==document.compatMode&&(a.engine=7),a.ie&&0==a.ie.indexOf("6")&&(a.engine=6))),-1!==b.indexOf("rv:")&&-1===b.indexOf("firefox")&&(a.ie=a.engine=b.match(/rv:([\d.]+)/)[1])},a.IsMouseDownOnClearButton=function(b){if(!a.IsIE10OrLater())return!1;for(var c=0;c<document.styleSheets.length;c++)for(var d=document.styleSheets[c],e=0;e<d.cssRules.length;e++)if("::-ms-clear"==d.cssRules[e].selectorText&&"none"==d.cssRules[e].style.display)return!1;var f=b.offsetX,g=b.offsetY,h=b.srcElement||b.target,i=h.clientWidth,j=h.clientHeight,k=parseInt(h.currentStyle.paddingLeft),l=parseInt(h.currentStyle.paddingRight);if(h.readOnly||0!=b.button)return!1;if(i-j+k+l<a.GetClearButtonShowThreshold(h))return!1;var m=i-j;return f>m&&i>=f&&g>=0&&j>g?!0:!1},a.GetClearButtonShowThreshold=function(b){var c=a.MeasureText("ABCDQ",b).Height,d=4.3604432*c-.76207324;return d=Math.round(d)},a.GetClientOS=function(){var b;if(a.IsIE())b=navigator.appVersion;else{var c=navigator.userAgent,d=c.indexOf("("),e=c.indexOf(")");b=c.substring(d+1,e)}return-1!=b.indexOf("NT 6.0")?"vista":-1!=b.indexOf("NT 5.2")?"win2003":-1!=b.indexOf("NT 5.1")?"winxp":-1!=b.indexOf("NT 5.0")?"win2000":-1!=b.indexOf("NT 6.1")?"Win7":-1!=b.indexOf("NT 6.2")?"Win8":-1!=b.indexOf("NT 6.3")?"Win8":-1!=b.indexOf("Android")?"Android":"unknow"},a.MeasureText=function(b,c){if(void 0===a.MeasureElement){var d=document.createElement("div");d.style.position="absolute",d.style.border="solid 0px",d.style.left="-100000px",d.style.top="-100000px";var e=window.document.createTextNode("");d.appendChild(e),document.body.appendChild(d),a.MeasureElement=d,a.MeasureTextElement=e}var d=a.MeasureElement,e=a.MeasureTextElement;if(null!=document){var f=document.body.contains(c);f||document.body.appendChild(c);var g=c.currentStyle||window.getComputedStyle(c,null);d.style.fontFamily=g.fontFamily,d.style.fontSize=g.fontSize,d.style.fontStyle=g.fontStyle,d.style.fontWeight=g.fontWeight,f||document.body.removeChild(c)}var h=null;if("string"==typeof b)e.nodeValue=b,h={"Width":d.clientWidth,"Height":d.clientHeight};else{h=[];for(var i=0;i<b.length;i++)e.nodeValue=b[i],h.push({"Width":d.clientWidth,"Height":d.clientHeight})}return h},a.SetElementFocus=function(a){a.focus()},a.GetAllElements=function(){return document.body.querySelectorAll?document.body.querySelectorAll("button, input, object, select, textarea"):document.body.all?document.body.all:document.body.getElementsByTagName("*")},a.GetElements=function(){for(var b=[],c=a.GetAllElements(),d=0,e=/^(?:button|input|object|select|textarea)$/i,f=0;f<c.length;f++)if(document.body.querySelectorAll&&!a.IsIE()||e.test(c[f].tagName.toLowerCase())){var g=!c[f].disabled,h="hidden"!==c[f].style.visibility,i="hidden"!=c[f].type&&-1!=c[f].tabIndex,j="textarea"==c[f].tagName.toLowerCase()&&-1!=c[f].tabIndex,k=i||j;g&&h&&k&&(b[d++]=c[f])}for(var f=0;f<b.length-1;f++)for(var l=f+1;l<b.length;l++)if(b[l].tabIndex<b[f].tabIndex){var m=b[f];b[f]=b[l],b[l]=m}return b},a.GetNextFocusableControl=function(a,b,c){"string"==typeof a&&(a=document.getElementById(a));for(var d=0,e=0;e<b.length;e++)if(a===b[e]){d=c?(e+1)%b.length:(e-1+b.length)%b.length;break}return b[d]},a.MoveFocus=function(b,c){var d=a.GetElements(),e=a.GetNextFocusableControl(b,d,c);return a.SetElementFocus(e),e},a.IsPad=function(){var b=a.IPad||"android"==a.GetClientOS().toLowerCase();return b},a.IsIE=function(){return void 0!==a.ie},a.IsFireFox4OrLater=function(){return null!=a.firefox&&parseFloat(a.firefox)>=4},a.IsIE11OrLater=function(){return a.IsIE()&&a.engine>=11},a.IsIE10OrLater=function(){return a.IsIE()&&a.engine>=10},a.IsIE9OrLater=function(){return a.IsIE()&&a.engine>=9},a.IsIE8OrLater=function(){return a.IsIE()&&a.engine>=8},a.IsIE8OrBelow=function(){return a.IsIE()&&a.engine<=8},a.IsIE8=function(){return a.IsIE()&&8==a.engine},a.IsIE7=function(){return a.IsIE()&&7==a.engine},a.IsIE7OrLater=function(){return a.IsIE()&&a.engine>=7},a.IsIE9=function(){return a.IsIE()&&9==a.engine},a}());b.CoreUtility=i,i.GetBrowserType()}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var wijmo;!function(wijmo){!function(input){"use strict";var Utility=function(){function Utility(){}return Utility.FireEvent=function(a,b,c,d){if(!b)return!1;try{b.call(window,a,c)}catch(e){return!1}return!0},Utility.FindIMControl=function(a){},Utility.ArrayIndexOf=function(a,b){if(a.indeOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},Utility.AttachEvent=function(a,b,c,d){null!==a&&void 0!==a&&(a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c))},Utility.AttachFocusEventOfDocument=function(){input.CoreUtility.IsIE8OrBelow()?Utility.AttachEvent(document,"beforeactivate",function(a){Utility.FocusControlUpdate(a)},!0):Utility.AttachEvent(document,"focus",function(a){Utility.FocusControlUpdate(a)},!0)},Utility.FocusControlUpdate=function(a){Utility.PreviousFocusControl=Utility.FocusControl,Utility.FocusControl=a.target||a.srcElement},Utility.ToString=function(a,b,c,d){var e=a+"";if(null!=c){for(;e.length<b;)d?e+=c:e=c+e;return e}for(;e.length<b;)e+=a+"";return e},Utility.GetSelectionEndPosition=function(a){if(!input.CoreUtility.IsIE()||input.CoreUtility.IsIE11OrLater()){var b=0;if(b=a.selectionEnd,a.value){var c=a.value.substring(0,b);b=c.GetLength()}var d=0;if(d=a.selectionStart,a.value){var c=a.value.substring(0,d);d=c.GetLength()}return d>b&&(b=d),b}return Utility.GetSelectionStartPosition(a)+document.selection.createRange().text.GetLength()},Utility.GetSelectionStartPosition=function(a){if(null!=a.selectionStart){var b=0;if(b=a.selectionStart,a.value){var c=a.value.substring(0,b);b=c.GetLength()}var d=0;if(d=a.selectionEnd,a.value){var c=a.value.substring(0,d);d=c.GetLength()}return b>d&&(b=d),b}try{for(var e=a.createTextRange(),f=document.selection.createRange(),g=a.value.GetLength(),h=0,i=g,j=0;i>h;){j=Math.floor((h+i)/2),e=a.createTextRange();for(var k=j,c=a.value.Substring(0,j);;){var l=c.IndexOf("\r\n");if(-1==l)break;k--,c=c.Substring(l+2,c.GetLength())}var m=j-k;if(k=j-m,e.moveStart("character",k),e.offsetTop>f.offsetTop)i=j;else if(e.offsetTop<f.offsetTop){if(h==j)return i;h=j}else if(e.offsetLeft>f.offsetLeft)i=j;else{if(!(e.offsetLeft<f.offsetLeft))return"\r"==a.value.Substring(j-1,j)&&j++,j;if(h==j)return i;h=j}}return g}catch(n){return 0}},Utility.GetCursorPosition=function(a,b){if(null==a)return-1;if(!input.CoreUtility.IsIE()||input.CoreUtility.IsIE11OrLater()){var c=0;if(c=a.selectionStart,a.value){var d=a.value.substring(0,c);c=d.GetLength()}return c}var e=0;if(document.selection){a.focus();var f=document.selection.createRange();f.moveStart("character",-a.value.length),e=f.text.length}return e},Utility.GetPasteData=function(a){return Utility.GetDataFromClipboard(a)},Utility.GetDataFromClipboard=function(a){return 0==a?Utility.SavedText:window.clipboardData?window.clipboardData.getData("Text"):null!==Utility.CutCopyPasteEventObject&&void 0!==Utility.CutCopyPasteEventObject.clipboardData?Utility.CutCopyPasteEventObject.clipboardData.getData("text"):null},Utility.ClearSelection=function(a){input.CoreUtility.IsIE()&&!input.CoreUtility.IsIE11OrLater()?""!=document.selection.createRange().text&&document.selection.empty():""!=Utility.GetSelectionText(a)&&(a.selectionStart=a.value.length,a.selectionEnd=a.selectionStart)},Utility.GetSelectionText=function(a){if(null!=a.selectionStart)return a.value.substring(a.selectionStart,a.selectionEnd);if(null!=document.selection)return document.selection.createRange().text;if(null!==document.activeElement){var a=document.activeElement,b=a.selectionStart,c=a.selectionEnd;return a.value.substring(b,c)}return""},Utility.FireSystemEvent=function(a,b){if(input.CoreUtility.IsIE())a.fireEvent(b);else{var c=document.createEvent("HTMLEvents");c.initEvent(b.substring(2,b.length),!0,!0),a.dispatchEvent(c)}},Utility.GetTextBoxScrollWidth=function(a,b){return input.CoreUtility.MeasureText(a.value,a).Width},Utility.CheckInt=function(a,b,c){var d=parseInt(a);if(isNaN(d))throw"value is invalid";if(b>d||d>c)throw a+" is out of range, should between "+b+" and "+c;return d},Utility.CheckFloat=function(a,b,c){var d=parseFloat(a);if(isNaN(d))throw"value is invalid";if(b>a||a>c)throw a+" is out of range, should between "+b+" and "+c;return d},Utility.CheckDate=function(a,b,c){if(!(a instanceof Date))throw"Type is invalid";if(isNaN(a))throw"Date is a invalid date";if(void 0!=c&&(b>a||a>c))throw a+" is out of range, should between "+b+" and "+c},Utility.CheckBool=function(a){return"string"==typeof a&&"true"===a.toLowerCase()?!0:1==a},Utility.CheckFunction=function(fun){if(void 0===fun||null===fun)return null;if("string"==typeof fun){if(fun=Utility.Trim(fun),0==fun.length)return null;try{eval("fun ="+fun)}catch(e){}}if("function"==typeof fun)return fun;throw"The value is not a valid function"},Utility.GetCheckElement=function(){if(null==Utility.CheckElement){var a=document.createElement("div");Utility.CheckElement=a,a.style.display="none"}return Utility.CheckElement},Utility.CheckString=function(a){if(null==a&&(a=""),void 0===a||"string"!=typeof a&&!(a instanceof String))throw a+" type is not a string.";return a.toString()},Utility.GetCSSLength=function(a){var b=parseInt(a);return isNaN(b)?0:b},Utility.CheckCSSLength=function(a){return a=Utility.CheckInt(a,0,Math.pow(2,31)),parseInt(a)==a&&(a+="px"),Utility.GetCheckElement().style.width="",Utility.GetCheckElement().style.width=a,Utility.GetCheckElement().style.width},Utility.CheckFontSizeValue=function(a){return parseInt(a)==a&&(a+="px"),Utility.GetCheckElement().style.fontSize="",Utility.GetCheckElement().style.fontSize=a,Utility.GetCheckElement().style.fontSize},Utility.CheckColor=function(a){return Utility.GetCheckElement().style.backgroundColor="",Utility.GetCheckElement().style.backgroundColor=a,Utility.GetCheckElement().style.backgroundColor},Utility.CheckImageUrl=function(a){return Utility.CheckString(a)},Utility.GetCssImageUrl=function(a){return a.startWith('url("')?a=a.substring(5,a.length-2):a.startWith("url(")&&(a=a.substring(4,a.length-1)),a},Utility.CheckCssImageUrl=function(a){return a.length>0&&!a.startWith("url(")&&(a="url("+a+")"),Utility.GetCheckElement().style.backgroundImage="",Utility.GetCheckElement().style.backgroundImage=a,Utility.GetCheckElement().style.backgroundImage},Utility.CheckEnum=function(a,b){for(var c in a)if(a[c]==b||a[c]==b.toLowerCase())return a[c];throw"Enum value is invalid"},Utility.CheckChar=function(a){if(a=Utility.CheckString(a),1!==a.length)throw"Invalid value";return a},Utility.GetMultipleStringEnum=function(a){var b=a.split(" ");return b.sort(),b.join(",")},Utility.CheckMultipleStringEnum=function(a,b){for(var c=b.split(","),d=[],e=0;e<c.length;e++)d.push(Utility.CheckEnum(a,Utility.Trim(c[e])));return d.join(" ")},Utility.EncodingToHTML=function(a){if(-1!=a.IndexOf("&")){for(var b=a,c="";-1!=b.IndexOf("&");){var d=b.IndexOf("&");b=b.replace("&","&amp;"),c+=b.Substring(0,d+5),b=b.Substring(d+5,b.GetLength())}-1==b.IndexOf("&")&&""!=b&&(c+=b),a=c}for(;-1!=a.IndexOf(" ");)a=a.replace(" ","&nbsp;");for(;-1!=a.IndexOf("<");)a=a.replace("<","&lt;");for(;-1!=a.IndexOf(">");)a=a.replace(">","&gt;");return a},Utility.DecodingFromHTML=function(a){for(;-1!=a.IndexOf("&nbsp;");)a=a.replace("&nbsp;"," ");for(;-1!=a.IndexOf("&lt;");)a=a.replace("&lt;","<");for(;-1!=a.IndexOf("&gt;");)a=a.replace("&gt;",">");if(-1!=a.IndexOf("&amp;")){for(var b=a,c="";-1!=b.IndexOf("&amp;");){var d=b.IndexOf("&amp;");b=b.replace("&amp;","&"),c+=b.Substring(0,d+1),b=b.Substring(d+1,b.GetLength())}-1==b.IndexOf("&amp;")&&""!=b&&(c+=b),a=c}return a},Utility.IsStandCompliantModeOn=function(){return input.CoreUtility.IsIE()?"CSS1Compat"==document.compatMode:"CSS1Compat"==document.compatMode||"BackCompat"==document.compatMode},Utility.GetPageZoomRate=function(){if(input.CoreUtility.IsIE8())return screen.deviceXDPI/screen.logicalXDPI;var a=document.getElementById("gcsh_standard_control_for_get_normal_position");if("undefined"!=typeof a&&null!=a)return document.getElementById("gcsh_standard_control_for_get_normal_position").offsetLeft/100;var b=document.createElement("div");return document.body.appendChild(b),b.id="gcsh_standard_control_for_get_normal_position",b.style.visibility="hidden",b.style.left="100px",b.style.top="1px",b.style.width="1px",b.style.height="1px",b.style.position="absolute",document.getElementById("gcsh_standard_control_for_get_normal_position").offsetLeft/100},Utility.GetElementPosition=function(a){if(input.CoreUtility.IsIE()||input.CoreUtility.chrome||input.CoreUtility.safari){if(input.CoreUtility.IsIE8OrLater()){var b=Utility.GetElementPositionForIE8(a);if(0==b.Left&&0==b.Top){var c=Utility.GetElementPositionForFireFox(a);return c}return b}var d=Utility.GetElementPositionForIE(a);return{"Left":d.Left,"Top":d.Top}}return Utility.GetElementPositionForFireFox(a)},Utility.GetElementPositionForIE8=function(a){var b=a;"string"==typeof a&&(b=document.getElementById(a));var c=0,d=0;if(null==b||b.self||9===b.nodeType)return{"Left":d,"Top":c};var e=b.getBoundingClientRect();if(!e)return{"Left":d,"Top":c};var f=b.ownerDocument.documentElement;d=e.left+f.scrollLeft,c=e.top+f.scrollTop;try{var g=b.ownerDocument.parentWindow.frameElement||null;if(g){var h="0"===g.frameBorder||"no"===g.frameBorder?2:0;d+=h,c+=h}}catch(i){}return{"Left":d,"Top":c}},Utility.GetElementPositionForIE=function(a){var b=a;"string"==typeof a&&(b=document.getElementById(a));var c=0,d=0;if(null==b)return{"Left":d,"Top":c};if(b.offsetParent)for(;null!=b.offsetParent;){var e=b.offsetParent,f=e.tagName.toLowerCase();if("table"!=f&&"body"!=f&&"html"!=f&&e.clientTop&&e.clientLeft&&(d+=e.clientLeft,c+=e.clientTop),input.CoreUtility.IsIE7()&&"relative"==e.style.position.toLowerCase()){d+=b.offsetLeft-b.scrollLeft,c+=b.offsetTop;var g=Utility.GetPageZoomRate();if(1==g){for(var h=b.offsetTop,i=0;i<e.children.length;i++){var j=e.children[i];if(j==b)break;if(j.offsetTop){h=j.offsetTop;break}}c-=h}}else if(Utility.IsStandCompliantModeOn()&&input.CoreUtility.IsIE7()&&("absolute"==b.style.position.toLowerCase()||"relative"==b.style.position.toLowerCase())){var g=Utility.GetPageZoomRate();c+=(b.offsetTop-b.scrollTop)/g,d+=(b.offsetLeft-b.scrollLeft)/g}else"input"==b.tagName.toLowerCase()&&"text"==b.type.toLowerCase()||"textarea"==b.tagName.toLowerCase()?(c+=b.offsetTop,d+=b.offsetLeft):(c+=b.offsetTop-b.scrollTop,d+=b.offsetLeft-b.scrollLeft);b=e}else b.left&&b.top?(d+=b.left,c+=b.top):(b.x&&(d+=b.x),b.y&&(c+=b.y));if("relative"!=b.style.position.toLowerCase()&&"absolute"!=b.style.position.toLowerCase()&&"body"==b.tagName.toLowerCase()&&Utility.IsStandCompliantModeOn())if(input.CoreUtility.IsIE7()){var k=parseInt(b.currentStyle.marginTop),l=parseInt(b.currentStyle.marginLeft);isNaN(k)&&(k=0),isNaN(l)&&(l=0),c+=k,d+=l}else c+=b.offsetTop,d+=b.offsetLeft;return{"Left":d,"Top":c}},Utility.GetElementPositionForFireFox=function(a){var b=a;"string"==typeof a&&(b=document.getElementById(a));var c=0,d=0,e=0,f=0;if(null==b)return{"Left":d,"Top":c};if(b.offsetParent)for(;null!=b.offsetParent;){var g=b.offsetParent.tagName.toLowerCase();"table"!=g&&"body"!=g&&"html"!=g&&"div"!=g&&b.offsetParent.clientTop&&b.offsetParent.clientLeft&&(d+=b.offsetParent.clientLeft,c+=b.offsetParent.clientTop),c+=b.offsetTop,d+=b.offsetLeft,b=b.offsetParent}else b.left&&b.top?(d+=b.left,c+=b.top):(b.x&&(d+=b.x),b.y&&(c+=b.y));if(b=a,"string"==typeof a&&(b=document.getElementById(a)),b.parentElement)for(;null!=b.parentElement&&"html"!=b.tagName.toLowerCase();)f+=b.scrollTop,e+=b.scrollLeft,b=b.parentElement;return c-=f,d-=e,"relative"!=b.style.position.toLowerCase()&&"absolute"!=b.style.position.toLowerCase()&&"body"==b.tagName.toLowerCase()&&Utility.IsStandCompliantModeOn()&&(c+=b.offsetTop,d+=b.offsetLeft),{"Left":d,"Top":c}},Utility.GetOSDefaultFontFamily=function(){switch(input.CoreUtility.GetClientOS().toLowerCase()){case"winxp":return"MS UI Gothic";case"vista":return"\xef\xbf\xbd\xe1\xa5\xa4\xef\xbf\xbd\xea\xa5\xaa";case"win7":return"\xef\xbf\xbd\xe1\xa5\xa4\xef\xbf\xbd\xea\xa5\xaa";case"win8":return"Meiryo UI";case"win2003":return"MS UI Gothic";case"win2000":return"MS UI Gothic"}return"MS UI Gothic"},Utility.IsTouchSupport=function(){return-1!=window.navigator.userAgent.toLowerCase().indexOf("touch")},Utility.DisabledHoldVisual=function(a){null!==a&&void 0!==a&&Utility.IsTouchSupport()&&input.CoreUtility.IsIE10OrLater()&&(a.addEventListener("MSHoldVisual",function(a){a.preventDefault()},!1),a.addEventListener("MSGestureHold",function(a){a.preventDefault()},!1),a.addEventListener("contextmenu",function(a){a.preventDefault()},!1))},Utility.IsFocusFromIMControl=function(a,b){try{for(var c=b.fromElement;null!=c;){if(c.id==a||c.id==a+this.Hold+"_DropDownObj"||c.id==a+"_DropDown_Container"||c.id==a+"_ContextMenu"||c.id==a+"_HistoryList"||c.id==a+"_EditField"||c.id==a+"_BorderContainer"||c.id==a+"_DropDown_EditField")return!0;c=c.parentNode}return!1}catch(d){return!1}},Utility.IsFocusToIMControl=function(a,b){try{for(var c=b.toElement;null!=c;){if(c.id==a||c.id==a+this.Hold+"_DropDownObj"||c.id==a+"_DropDown_Container"||c.id==a+"_ContextMenu"||c.id==a+"_HistoryList"||c.id==a+this.Hold+"_DropDownObj_PopupMonth"||c.id==a+"_EditField"||c.id==a+"_BorderContainer"||c.id==a+"_DropDown_EditField")return!0;c=c.parentNode}return!1}catch(d){return!1}},Utility.Trim=function(a){if(""==a)return"";for(var b=0,c=0,d=0;d<a.length;d++)if(" "!=a.CharAt(d)&&"\xef\xbf\xbd\xef\xbf\xbd"!=a.CharAt(d)){b=d;break}for(var d=a.length-1;d>=0;d--)if(" "!=a.CharAt(d)&&"\xef\xbf\xbd\xef\xbf\xbd"!=a.CharAt(d)){c=d+1;break}try{var e=a.Substring(b,c);return e}catch(f){return a}},Utility.GetTouchPath=function(a,b){return-1===a||-1===b?"Error":a>b?a-b>20?"ToTop":"NotMove":b>a&&b-a>20?"ToBottom":"NotMove"},Utility.IsJapan=function(){return navigator.userLanguage?-1!=navigator.userLanguage.indexOf("ja"):navigator.language?-1!=navigator.language.indexOf("ja"):!1},Utility.CreateStyleElement=function(a){var b=document.createElement("style");return b.id=a,b.type="text/css",b},Utility.CreateClassStyle=function(a){return Utility.CreateSelectorStyle("."+a)},Utility.CreateSelectorStyle=function(a){var b=document.getElementById("tableStyle");null==b&&(b=this.CreateStyleElement("tableStyle"),document.body.appendChild(b));var c=b.sheet||b.styleSheet,d=c.cssRules||c.rules;return c.insertRule?c.insertRule(a+"{ }",d.length):c.addRule(a,"{ }",d.length),d.item(d.length-1)},Utility.SetSelection=function(a,b,c,d){$(a).wijtextselection(Math.min(b,c),Math.max(b,c))},Utility.PreventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Utility.CancelBubble=function(a){void 0!==a.cancelBubble?a.cancelBubble=!0:a.stopPropagation()},Utility.DragDrop=function(a){try{a.dragDrop(!0)}catch(b){}},Utility.GetMouseButton=function(a){var b=-1,c=input.CoreUtility.IsIE8OrBelow()?1:0;return a.button==c?b=0:1==a.button?b=1:2==a.button&&(b=2),b},Utility.GetMouseWheelValue=function(a,b){return input.CoreUtility.IsFireFox4OrLater()?-b.detail/3:(b.wheelDelta>=120?a++:b.wheelDelta<=-120&&a--,a)},Utility.SetCopy=function(a,b){var c;try{if((null==a||""==a)&&(document.selection&&(c=document.selection.createRange().text),""==c))return}catch(d){}null!=a&&(c=a),Utility.CopyDataToClipBoard(c,b)},Utility.CopyDataToClipBoard=function(a,b){return 0==b?void(Utility.SavedText=a):void(window.clipboardData?setTimeout(function(){try{window.clipboardData.setData("Text",a)}catch(b){}},0):null!==Utility.CutCopyPasteEventObject&&void 0!==Utility.CutCopyPasteEventObject.clipboardData&&Utility.CutCopyPasteEventObject.clipboardData.setData("text",a))},Utility.SetZoomStyle=function(a,b,c){if(void 0!==a&&null!==a){var d="top left";2===c&&(d="top right"),input.CoreUtility.firefox?(a.style.MozTransformOrigin=""===b?"":d,a.style.MozTransform=""===b?"":"scale("+b+")",a.setAttribute("ZoomValue",b)):input.CoreUtility.chrome||input.CoreUtility.safari?""!==b?(a.style.MozTransform="scale("+b+")",a.style.WebkitTransform="scale("+b+")",a.style.webkitTransformOrigin=d):(a.style.MozTransform="",a.style.WebkitTransform="",a.style.WebkitTransformOrigin=""):input.CoreUtility.IsIE9OrLater()?""!==b?(a.style.msTransform="scale("+b+")",a.style.msTransformOrigin=d):(a.style.msTransform="",a.style.msTransformOrigin=""):a.style.zoom=b}},Utility.FilterText=function(a,b){if(0==b.GetLength())return"";var c="",d=0,e=0;for(d=0;d<b.GetLength();d++){var f=!1;for(e=0;e<a.GetLength();e++)b.Substring(d,d+1)==a.Substring(e,e+1)&&(f=!0);1==f&&(c+=b.Substring(d,d+1))}return c},Utility.IndexOfAny=function(a,b,c){if(c>=a.length)return-1;for(var d=c;d<a.length;d++)for(var e=0;e<b.length;e++)if(a.charAt(d)==b[e])return d;return-1},Utility.IdCounter=0,Utility.EditFieldSuffix="_EidtField",Utility.MaskValChar="\ufeff",Utility.Hold="g-C2",Utility}();input.Utility=Utility,function(a){a[a.None=0]="None",a[a.Click=1]="Click",a[a.ContextMenu=2]="ContextMenu",a[a.ClientEvent=3]="ClientEvent",a[a.KeyExit=4]="KeyExit",a[a.Default=5]="Default",a[a.SpinButton=6]="SpinButton",a[a.DropDown=7]="DropDown",a[a.ImeInput=8]="ImeInput",a[a.Left=9]="Left",a[a.Right=10]="Right",a[a.DragDrop=11]="DragDrop"}(input.FocusType||(input.FocusType={}));var FocusType=input.FocusType;!function(a){a[a.Default=0]="Default",a[a.Era=1]="Era",a[a.Year=2]="Year",a[a.Month=3]="Month",a[a.Day=4]="Day",a[a.AMPM=5]="AMPM",a[a.Hour=6]="Hour",a[a.Minute=7]="Minute",a[a.Second=8]="Second"}(input.DateCursorPosition||(input.DateCursorPosition={}));var DateCursorPosition=input.DateCursorPosition;!function(a){a[a.NoControl=0]="NoControl",a[a.Filter=1]="Filter",a[a.Cut=2]="Cut"}(input.CrLfMode||(input.CrLfMode={}));var CrLfMode=input.CrLfMode;!function(a){a[a.IncludeLiterals=0]="IncludeLiterals",a[a.ExcludeLiterals=1]="ExcludeLiterals"}(input.ClipContent||(input.ClipContent={}));var ClipContent=input.ClipContent;!function(a){a[a.Insert=0]="Insert",a[a.Overwrite=1]="Overwrite",a[a.FixedInsert=2]="FixedInsert",a[a.FixedOverwrite=3]="FixedOverwrite"}(input.EditMode||(input.EditMode={}));
var EditMode=input.EditMode;!function(a){a[a.Always=1]="Always",a[a.PostDisplay=2]="PostDisplay",a[a.PreDisplay=3]="PreDisplay"}(input.ShowLiterals||(input.ShowLiterals={}));var ShowLiterals=input.ShowLiterals;!function(a){a[a.None=0]="None",a[a.Left=1]="Left",a[a.Right=2]="Right",a[a.Both=3]="Both"}(input.ExitOnLeftRightKey||(input.ExitOnLeftRightKey={}));var ExitOnLeftRightKey=input.ExitOnLeftRightKey;!function(a){a[a.None=0]="None",a[a.Field=1]="Field",a[a.All=2]="All"}(input.HighlightText||(input.HighlightText={}));var HighlightText=input.HighlightText;!function(a){a[a.Left=1]="Left",a[a.Right=2]="Right"}(input.DropDownAlign||(input.DropDownAlign={}));var DropDownAlign=input.DropDownAlign;!function(a){a[a.Automatic=0]="Automatic",a[a.Fixed=1]="Fixed"}(input.ScrollBarMode||(input.ScrollBarMode={}));var ScrollBarMode=input.ScrollBarMode;!function(a){a[a.None=0]="None",a[a.Horizontal=1]="Horizontal",a[a.Vertical=2]="Vertical",a[a.Both=3]="Both"}(input.ScrollBars||(input.ScrollBars={}));var ScrollBars=input.ScrollBars;!function(a){a[a.Normal=0]="Normal",a[a.Hover=1]="Hover",a[a.Pressed=2]="Pressed",a[a.Focused=4]="Focused",a[a.Disabled=8]="Disabled"}(input.ControlStatus||(input.ControlStatus={}));var ControlStatus=input.ControlStatus;!function(a){a[a.Tab=1]="Tab",a[a.ShiftTab=2]="ShiftTab",a[a.NextControl=3]="NextControl",a[a.PreviousControl=4]="PreviousControl",a[a.Right=5]="Right",a[a.Left=6]="Left",a[a.CtrlRight=7]="CtrlRight",a[a.CtrlLeft=8]="CtrlLeft",a[a.CharInput=9]="CharInput"}(input.ExitKeys||(input.ExitKeys={}));var ExitKeys=input.ExitKeys;!function(a){a[a.Control=0]="Control",a[a.Field=1]="Field"}(input.TabAction||(input.TabAction={}));var TabAction=input.TabAction;!function(a){a[a.BackSpace=8]="BackSpace",a[a.Tab=9]="Tab",a[a.Clear=12]="Clear",a[a.Enter=13]="Enter",a[a.Shift=16]="Shift",a[a.Control=17]="Control",a[a.Alt=18]="Alt",a[a.Pause=19]="Pause",a[a.Caps_Lock=20]="Caps_Lock",a[a.Escape=27]="Escape",a[a.Space=32]="Space",a[a.PageUp=33]="PageUp",a[a.PageDown=34]="PageDown",a[a.End=35]="End",a[a.Home=36]="Home",a[a.Left=37]="Left",a[a.Up=38]="Up",a[a.Right=39]="Right",a[a.Down=40]="Down",a[a.Select=41]="Select",a[a.Print=42]="Print",a[a.Execute=43]="Execute",a[a.Insert=45]="Insert",a[a.Delete=46]="Delete",a[a.Help=47]="Help",a[a.equalbraceright=48]="equalbraceright",a[a.exclamonesuperior=49]="exclamonesuperior",a[a.quotedbltwosuperior=50]="quotedbltwosuperior",a[a.sectionthreesuperior=51]="sectionthreesuperior",a[a.dollar=52]="dollar",a[a.percent=53]="percent",a[a.ampersand=54]="ampersand",a[a.slashbraceleft=55]="slashbraceleft",a[a.parenleftbracketleft=56]="parenleftbracketleft",a[a.parenrightbracketright=57]="parenrightbracketright",a[a.A=65]="A",a[a.B=66]="B",a[a.C=67]="C",a[a.D=68]="D",a[a.E=69]="E",a[a.F=70]="F",a[a.G=71]="G",a[a.H=72]="H",a[a.I=73]="I",a[a.J=74]="J",a[a.K=75]="K",a[a.L=76]="L",a[a.M=77]="M",a[a.N=78]="N",a[a.O=79]="O",a[a.P=80]="P",a[a.Q=81]="Q",a[a.R=82]="R",a[a.S=83]="S",a[a.T=84]="T",a[a.U=85]="U",a[a.V=86]="V",a[a.W=87]="W",a[a.X=88]="X",a[a.Y=89]="Y",a[a.Z=90]="Z",a[a.KP_0=96]="KP_0",a[a.KP_1=97]="KP_1",a[a.KP_2=98]="KP_2",a[a.KP_3=99]="KP_3",a[a.KP_4=100]="KP_4",a[a.KP_5=101]="KP_5",a[a.KP_6=102]="KP_6",a[a.KP_7=103]="KP_7",a[a.KP_8=104]="KP_8",a[a.KP_9=105]="KP_9",a[a.KP_Multiply=106]="KP_Multiply",a[a.KP_Add=107]="KP_Add",a[a.KP_Separator=108]="KP_Separator",a[a.KP_Subtract=109]="KP_Subtract",a[a.KP_Decimal=110]="KP_Decimal",a[a.KP_Divide=111]="KP_Divide",a[a.F1=112]="F1",a[a.F2=113]="F2",a[a.F3=114]="F3",a[a.F4=115]="F4",a[a.F5=116]="F5",a[a.F6=117]="F6",a[a.F7=118]="F7",a[a.F8=119]="F8",a[a.F9=120]="F9",a[a.F10=121]="F10",a[a.F11=122]="F11",a[a.F12=123]="F12",a[a.F13=124]="F13",a[a.F14=125]="F14",a[a.F15=126]="F15",a[a.F16=127]="F16",a[a.F17=128]="F17",a[a.F18=129]="F18",a[a.F19=130]="F19",a[a.F20=131]="F20",a[a.F21=132]="F21",a[a.F22=133]="F22",a[a.F23=134]="F23",a[a.F24=135]="F24",a[a.Num_Lock=136]="Num_Lock",a[a.Scroll_Lock=137]="Scroll_Lock"}(input.Key||(input.Key={}));var Key=input.Key,BaseUIProcess=function(){function a(){this.isMulSelected=!1,this.isDblClick=!1,this.isTriClick=!1,this.isOverWrite=!1,this.moveFocusExitOnLastChar=!1}return a.prototype.GetInputElement=function(){return this.Owner.GetInputElement()},a.prototype.GetElementId=function(){return this.Owner.GetInputElement().id},a.prototype.GetShowLiterals=function(){return void 0!==this.Owner.GetShowLiterals?this.Owner.GetShowLiterals():1},a.prototype.SetCursorPositionAndSelection=function(a,b,c,d){var e={};return(1==a||2==a)&&(e.SelectionStart=0,e.SelectionEnd=b.GetLength()),e},a.prototype.Clear=function(){return null},a.prototype.Focus=function(a){var b=a.Text,c=a.DisplayText,d=a.FocusType,e=a.Element,f=a.HighlightText,g=a.CursorPosition,h={};if(this.isMulSelected=!1,1==d&&(h.SelectionStart=Utility.GetCursorPosition(e),h.SelectionEnd=h.SelectionStart),h.Text=b,-1==h.SelectionStart?(h.SelectionStart=0,h.SelectionEnd=0):h.SelectionStart>h.Text.GetLength()?(h.SelectionStart=h.Text.GetLength(),h.SelectionEnd=h.Text.GetLength()):h.SelectionStart==c.GetLength()&&(h.SelectionStart=h.Text.GetLength(),h.SelectionEnd=h.Text.GetLength()),9==d&&0==g?(h.SelectionStart=0,h.SelectionEnd=0):10==d&&0==g&&(h.SelectionStart=h.Text.GetLength(),h.SelectionEnd=h.Text.GetLength()),0==f&&0==g)return h;if(2==d)return h;var i=null==h.SelectionStart?a.SelectionStart:h.SelectionStart,j=this.SetCursorPositionAndSelection(f,h.Text,g,i);return null!=j&&(h.SelectionStart=j.SelectionStart,h.SelectionEnd=j.SelectionEnd,h.IsSelectionDeterminedByHighlightText=!0),h},a.prototype.LoseFocus=function(a){},a.prototype.MouseDown=function(a){var b={};return this.isTriClick=!1,this.isDblClick&&!Utility.GrapeCityTimeout&&0==a&&(this.isTriClick=!0,b=this.SelectAll()),this.isDblClick=!1,b},a.prototype.MouseUp=function(a,b,c,d,e){var f={};return this.isTriClick?(Utility.SetSelection(a,b,c),null):e?(f=this.SelectAll(),Utility.SetSelection(a,f.SelectionStart,f.SelectionEnd),f):(f.SelectionStart=b,f.SelectionEnd=c,0==d&&(f.SelectionStart=Utility.GetSelectionStartPosition(a),f.SelectionEnd=Utility.GetSelectionEndPosition(a)),f.SelectionStart!=f.SelectionEnd?this.isMulSelected=!0:this.isMulSelected=!1,f)},a.prototype.ProcessShortcutKey=function(a,b,c,d){var e={};switch(a){case"Clear":return b?(e.System=!1,e):this.Clear();case"NextControl":var f=this.MoveControl(this.GetInputElement(),!0,!1,"NextControl");return null!=f&&(e.EventInfo=f.EventInfo,e.FocusType=f.FocusType,e.FocusExit=!0),e.System=!1,e;case"PreviousControl":var f=this.MoveControl(this.GetInputElement(),!1,!1,"PreviousControl");return null!=f&&(e.EventInfo=f.EventInfo,e.FocusType=f.FocusType,e.FocusExit=!0),e.System=!1,e;case"NextField":return e=this.MoveField(c,!0);case"PreviousField":return e=this.MoveField(c,!1);case"NextField/NextControl":var e=this.MoveFieldAndControl(c,!0);return e;case"PreviousField/PreviousControl":var e=this.MoveFieldAndControl(c,!1);return e}},a.prototype.ProcessCharKeyInput=function(a,b,c,d,e){return null},a.prototype.ProcessNavigatorKeyInput=function(a,b,c,d,e,f,g,h){var i={};switch(a){case 45:return 2==b?this.isOverWrite=!1:3==b?this.isOverWrite=!0:this.isOverWrite=!this.isOverWrite,i.Overwrite=this.isOverWrite,i.System=!1,0==this.Format.Fields.fieldCount&&(i.System=!0),i;case 8:i=this.ProcessBackSpace(e,f,d),i.System=!1;break;case 46:i=this.ProcessDelete(e,f,d),i.System=!1;break;case 196643:case 196644:case 196645:case 196647:case 65569:case 196641:case 65570:case 196642:65569==a||196641==a?a=196644:(65570==a||196642==a)&&(a=196643),i.SelectionEnd=this.GetCaretPosition(f,a),this.isMulSelected=!0,i.System=!1;break;case 65582:case 65544:if(this.isMulSelected){if(!this.Owner._isSupportClipBoard()){i.System=!0;break}i=this.Cut(c,e,f)}else i=this.ProcessBackSpace(e,f);i.System=!1;break;case 65581:case 131158:if(this.Owner._isSupportClipBoard()){var j=Utility.GetPasteData(this.Owner?this.Owner.GetUseClipboard():!0);i=this.Paste(e,f,j,h),i.System=!1}else i.System=!0;break;case 65571:case 65572:case 65573:case 65575:case 65574:case 65576:this.isMulSelected=!0,i.SelectionEnd=this.GetCaretPosition(f,a),i.System=!1;break;case 131139:case 131117:this.Owner._isSupportClipBoard()?(this.Copy(c,e,f),i.System=!1):i.System=!0;break;case 131118:this.isMulSelected||(f=this.GetCaretPosition(f,a)),i=this.ProcessDelete(e,f),i.System=!1;break;case 131080:case 196616:this.isMulSelected||(f=this.GetCaretPosition(f,a)),i=this.ProcessBackSpace(e,f),i.System=!1;break;case 131137:i=this.SelectAll(),i.System=!1;break;case 131160:this.Owner._isSupportClipBoard()?(i=this.Cut(c,e,f),i.System=!1):i.System=!0;break;case 131162:i=this.Undo(),i.System=!1;break;case 131109:case 37:if(0==e&&(3==g||1==g)){var k=37==a?"Left":"CtrlLeft",l=this.MoveControl(this.GetInputElement(),!1,!0,k);return null!=l&&(i.EventInfo=l.EventInfo,i.FocusType=l.FocusType,i.FocusExit=!0),i}case 131108:case 131110:case 36:case 33:case 131105:(33==a||131105==a)&&(a=131108),i=this.ProcessLeftDirection(e,f,a),i.System=!1;break;case 131111:case 39:if(e==d.GetLength()&&(3==g||2==g)){var k=39==a?"Right":"CtrlRight",l=this.MoveControl(this.GetInputElement(),!0,!0,k);return null!=l&&(i.EventInfo=l.EventInfo,i.FocusType=l.FocusType,i.FocusExit=!0),i}case 131107:case 131112:case 35:case 34:case 131106:(34==a||131106==a)&&(a=131107),i=this.ProcessRightDirection(e,f,a),i.System=!1;break;default:i=null}return i},a.prototype.ProcessLeftDirection=function(a,b,c){},a.prototype.ProcessRightDirection=function(a,b,c){},a.prototype.KeyDown=function(a){var b=a.KeyCode,c=a.SelectionStart,d=a.SelectionEnd,e=a.Text,f=a.EditMode,g=a.KeyAction,h=a.ReadOnly,i=a.ClipContent,j=a.ExitOnLastChar,k=a.ExitOnLeftRightKey,l=a.TabAction,m={};switch(f){case 0:this.isOverWrite=!1;break;case 1:this.isOverWrite=!0;break;case 2:this.isOverWrite=!1;break;case 3:this.isOverWrite=!0}switch(c!=d?this.isMulSelected=!0:this.isMulSelected=!1,b){case 9:return m=this.ProcessTabKey(d,!0,l);case 65545:return m=this.ProcessTabKey(d,!1,l)}if(null!=g)return this.ProcessShortcutKey(g,h,d,c);if(h){if(27==b||262182==b||262184==b||38==b||40==b)return null;if(131117!=b&&131139!=b&&9!=b&&65545!=b&&131081!=b&&196617!=b&&131137!=b&&37!=b&&39!=b&&38!=b&&40!=b)return m}if(0==this.Format.Fields.fieldCount){switch(b){case 45:return 2==f?this.isOverWrite=!1:3==f?this.isOverWrite=!0:this.isOverWrite=!this.isOverWrite,m.Overwrite=this.isOverWrite,0==this.Format.Fields.fieldCount&&(m.System=!0),m;case 37:case 131109:if(0==c&&(3==k||1==k)){var n=37==b?"Left":"CtrlLeft",o=this.MoveControl(this.GetInputElement(),!1,!0,n);return null!=o&&(m.EventInfo=o.EventInfo,m.FocusType=o.FocusType,m.FocusExit=!0),m}break;case 39:case 131111:if(c==e.GetLength()&&(3==k||2==k)){var n=39==b?"Right":"CtrlRight",o=this.MoveControl(this.GetInputElement(),!0,!0,n);return null!=o&&(m.EventInfo=o.EventInfo,m.FocusType=o.FocusType,m.FocusExit=!0),m}}return null}var p=this.ProcessCharKeyInput(b,c,d,j,e);return null!=p?p:m=this.ProcessNavigatorKeyInput(b,f,i,e,c,d,k,j)},a.prototype.KeyPress=function(a){},a.prototype.KeyUp=function(a){},a.prototype.ShowContextMenu=function(a,b){var c={};return""==b&&(c.SelectionStart=Utility.GetCursorPosition(a),c.SelectionEnd=c.SelectionStart),c},a.prototype.SelectStart=function(a,b,c){var d={};return""!=b||this.isTriClick||this.isDblClick||-1==c||(d.SelectionStart=Utility.GetCursorPosition(a),d.SetFalse=!0),d},a.prototype.DoubleClick=function(a){var b={},c=this.Format.Fields.GetFieldIndexByPos(a),d=this.Format.Fields.GetFieldRange(c.index);return b.SelectionStart=d.start,b.SelectionEnd=d.length+d.start,Utility.GrapeCityTimeout=!1,this.isDblClick=!0,this.isMulSelect=!0,setTimeout(function(){Utility.GrapeCityTimeout=!0},300),b},a.prototype.Undo=function(){},a.prototype.Cut=function(a,b,c){var d={};return b==c?d:(this.FireClientEvent("OnBeforeCut"),this.Copy(a,b,c),d=this.ProcessDelete(b,c),this.FireClientEvent("OnCut"),d)},a.prototype.Copy=function(b,c,d){var e=null,f=!0;if(1==b){var g=Math.abs(c-d),c=Math.min(c,d);if(0==g)return;e=this.Format.Fields.GetNonLiteralsText(c,g)}else e=!input.CoreUtility.IsIE()||input.CoreUtility.IsIE11OrLater()?Utility.GetSelectionText(this.Owner.GetInputElement()):document.selection.createRange().text;this.Owner&&(e=a.UpdateCrLfString(e,this.Owner.GetAcceptsCrlf()),f=this.Owner.GetUseClipboard()),input.CoreUtility.IsIE()?setTimeout(function(){Utility.SetCopy(e,f)}):Utility.SetCopy(e,f)},a.prototype.Paste=function(a,b,c,d){},a.prototype.SelectAll=function(){var a={"SelectionStart":0,"SelectionEnd":0};a.SelectionStart=0;var b;return this.ID&&(b=this.GetShowLiterals()),"PostDisplay"==b||"PreDisplay"==b?a.SelectionEnd=Utility.FindIMControl(this.ID).GetText().GetLength():a.SelectionEnd=this.Format.Fields.GetLength(),this.isMulSelected=!0,a},a.prototype.FireEvent=function(a,b,c,d){return Utility.FireEvent(a,b,c,d)?3:void 0},a.prototype.ProcessCharKey=function(a,b,c,d){var e={},f=Math.min(a,b),g=Math.abs(b-a),h={};if(e.start=f,e.success=!1,-1==this.Format.Fields.GetFieldIndex(f).index){var i={};return i.Name=this.Owner.InvalidInputEvent,i.Args=null,i.Type="invalidInput",e.EventInfo=i,e}var j=c.toString();if(0!=g||this.isOverWrite)if(0==g)if(f==this.Format.Fields.GetLength())h=this.Format.Fields.Insert(f,j,!1);else{var k=!1,l=this.Format.Fields.GetFieldIndexByPos(f),m=l.index,n=l.offset,o=this.Format.Fields.GetFieldRange(m);if("PromptField"==this.Format.Fields.GetFieldByIndex(m).fieldLabel?f-n+o.length==this.Format.Fields.GetLength()?k=!1:(k=!0,g=o.length-n+1):(k=!0,g=c.GetLength()),-1==this.Format.Fields.GetFieldIndexByPos(f+g).index){var i={};return i.Name=this.Owner.InvalidInputEvent,i.Args=null,i.Type="invalidInput",e.EventInfo=i,e}h=k?this.Format.Fields.Replace(f,g,j,!1):this.Format.Fields.Insert(f,j,!1)}else h=this.Format.Fields.Replace(f,g,j,!1);else h=this.Format.Fields.Insert(f,j,!1);if(f=h.cursorPos,""!=h.text){var i={};return i.Name=this.Owner.InvalidInputEvent,i.Args=null,i.Type="invalidInput",e.EventInfo=i,e.start=f,e.success=!1,e}if(1==d)if(f==this.Format.Fields.GetLength())this.moveFocusExitOnLastChar=!0;else{var l=this.Format.Fields.GetFieldIndexByPos(f),m=l.index,n=l.offset;m==this.Format.Fields.fieldCount-1&&0==n&&"PromptField"==this.Format.Fields.GetFieldByIndex(m).fieldLabel&&(this.moveFocusExitOnLastChar=!0)}return e.start=f,e.success=!0,e},a.prototype.ProcessDeleteKey=function(a,b){var c=Math.min(a,b),d=Math.abs(a-b),e={};if(c==this.Format.Fields.GetLength()&&0==d)return e;var f,g=this.Format.Fields.GetFieldIndexByPos(c);if(f=g.index,-1==f)return e;if(0==d){if("PromptField"==this.Format.Fields.GetFieldByIndex(f).fieldLabel)return e;c=this.Format.Fields.Delete(c,1).cursorPos,e.SelectionStart=c,e.SelectionEnd=e.SelectionStart}else{var h,i;if(g=this.Format.Fields.GetFieldIndexByPos(c+d),h=g.offset,i=g.index,-1==i)return e;if(0==h&&i--,f==i&&"PromptField"==this.Format.Fields.GetFieldByIndex(f).fieldLabel)return e;var j=this.Format.Fields.Delete(c,d);if(!j.isSucceed)return e;e.SelectionStart=j.cursorPos,0==e.SelectionStart&&"PromptField"==this.Format.Fields.GetFieldByIndex(0).fieldLabel&&(e.SelectionStart=this.Format.Fields.GetFieldByIndex(0).GetLength()),e.SelectionEnd=e.SelectionStart;var k,l,m=this.Format.Fields.GetFieldIndexByPos(e.SelectionStart);l=m.index,k=m.offset,0!=k&&"PromptField"==this.Format.Fields.GetFieldByIndex(l).fieldLabel&&(e.SelectionStart=e.SelectionStart-k+this.Format.Fields.GetFieldByIndex(l).GetLength(),e.SelectionEnd=e.SelectionStart)}return e},a.prototype.ProcessBackSpace=function(a,b,c){},a.prototype.ProcessDelete=function(a,b,c){},a.prototype.GetCaretPosition=function(a,b,c,d,e){var f,g=this.Format.Fields,h=g.GetFieldIndexByPos(a),i=h.index,j=h.offset,k=0;switch(b){case 36:case 65572:case 65574:return c>=a?0:c;case 35:case 65571:case 65576:return a>=d?g.GetLength():d;case 37:if(0==a)return 0;g.GetFieldByIndex(i).fieldLabel==e?j>0?a-=j:a--:0==j&&g.GetFieldByIndex(i-1).fieldLabel==e?a-=g.GetFieldRange(i-1).length:a--;break;case 39:if(a==g.GetLength())return a;if(g.GetFieldByIndex(i).fieldLabel==e){if(f=g.GetFieldRange(i),c=f.start,d=c+f.length,d>a)return d}else a++;break;case 131109:if(0==a||0==i)return 0;if(g.GetFieldByIndex(i).fieldLabel==e)f=g.GetFieldRange(i-1),a=f.start;else{if(0==j){for(k=i-1;k>=0;k--)if(g.GetFieldByIndex(k).fieldLabel!=e)return f=g.GetFieldRange(k),f.start;return 0}a-=j}break;case 196645:if(0==a||0==i)return 0;0==j?(f=g.GetFieldRange(i-1),a=f.start):a-=j;break;case 131111:if(a==g.GetLength()||i==g.fieldCount-1)return g.GetLength();if(g.GetFieldByIndex(i).fieldLabel!=e){for(k=i+1;k<g.fieldCount;k++)if(g.GetFieldByIndex(k).fieldLabel!=e)return f=g.GetFieldRange(k),f.start;return g.GetLength()}f=g.GetFieldRange(i+1),a=f.start;break;case 196647:if(a==g.GetLength()||i==g.fieldCount-1)return g.GetLength();f=g.GetFieldRange(i+1),a=f.start;break;case 131118:return a==g.GetLength()||g.GetFieldByIndex(i).fieldLabel==e?a:(f=g.GetFieldRange(i),f.start+f.length);case 131080:case 196616:if(0==a||g.GetFieldByIndex(i).fieldLabel==e&&0==i)return a;if(g.GetFieldByIndex(i).fieldLabel==e)return g.GetFieldRange(i-1).start;if(0==j){for(k=i-1;k>=0;k--)if(g.GetFieldByIndex(k).fieldLabel!=e)return f=g.GetFieldRange(k),f.start;return a}a-=j;break;case 196643:case 131107:case 131112:return g.GetLength();case 196644:case 131108:case 131110:return 0;case 65573:return 0==a?0:--a;case 65575:return a==g.GetLength()?a:++a}return a},a.prototype.CompareShortcut=function(a,b){if(-1==b.toString().IndexOf("|"))return b==a?!0:!1;for(var c=null;-1!=c;){c=b.toString().IndexOf("|");var d=b.toString().GetLength();if(b.Substring(0,-1==c?d:c)==a)return!0;b=b.Substring(c+1,d)}return!1},a.prototype.MoveControl=function(a,b,c,d){var e=input.CoreUtility.GetElements(),f=null,g={};if(e.length<2)return null;var h=input.CoreUtility.GetNextFocusableControl(a,e,b);if("CharInput"!=d&&input.CoreUtility.IsIE()?input.CoreUtility.SetElementFocus(h):(Utility.NextID=h,setTimeout(function(){input.CoreUtility.SetElementFocus(h)},0)),c){var i=document.getElementById(h);if(null!=i&&("textarea"==i.tagName.toLowerCase()||"text"==i.type)&&input.CoreUtility.IsIE()){var j=i.createTextRange();("Left"==d||"CtrlLeft"==d)&&(j.moveStart("character",i.value.length),j.select())}}var k={"Key":9};switch(d){case"NextControl":k.Key=3;break;case"PreviousControl":k.Key=4;break;case"Right":k.Key=5;break;case"Left":k.Key=6;break;case"CtrlRight":k.Key=7;break;case"CtrlLeft":k.Key=8;break;case"CharInput":k.Key=9}return f={},f.Name=this.Owner.KeyExitEvent,f.Args=k,f.Type="KeyExit",null!=f&&(g.EventInfo=f),g},a.prototype.MoveField=function(a,b){var c=this.Format.Fields.MoveField(a,b),d={};return-1==c?(d.NextPos=c,d):(d.SelectionStart=c,d.SelectionEnd=c,d)},a.prototype.ProcessTabKey=function(a,b,c){var d={"Key":1},e={};b?d.Key=1:d.Key=2;var f={};return f.Name=this.Owner.KeyExitEvent,f.Args=d,f.Type="KeyExit",e.EventInfo=f,e.FocusType=4,e.System=!0,e},a.prototype.MoveFieldAndControl=function(a,b){var c=this.MoveField(a,b);if(-1!=c.NextPos)return c;var d=b?"NextControl":"PreviousControl",e=this.MoveControl(this.GetInputElement(),b,!1,d);return null!=e&&(c.EventInfo=e.EventInfo,c.FocusType=e.FocusType,c.FocusExit=!0),c},a.prototype.DragStart=function(){},a.prototype.DragEnd=function(){},a.prototype.Drop=function(){},a.prototype.DragOver=function(){},a.prototype.GetKeyActionName=function(a,b){if(null==b)return null;var c=b,d=new Array,e=c.IndexOf(","),f=0;if(""!=b){for(;-1!=e;)d[f++]=c.Substring(0,e),c=c.Substring(e+1,c.GetLength()),e=c.IndexOf(",");d[f++]=c;for(var g=0;f>g;g+=2)if(this.IsKeyCodeContained(a,d[g+1]))return d[g]}return null},a.prototype.IsKeyCodeContained=function(a,b){for(var c=b,d=c.IndexOf("|");-1!=d;){if(c.Substring(0,d)==a)return!0;c=c.Substring(d+1,c.GetLength()),d=c.IndexOf("|")}return c==a?!0:!1},a.prototype.FireClientEvent=function(a){},a.prototype.PerformSpin=function(a,b,c){},a.UpdateCrLfString=function(a,b){var c=a;if(a)if(1==b)c=a.replace(new RegExp("[\r\n]","g"),"");else if(2==b){var d=a.split(new RegExp("[\r\n]","g"));c=d.length>0?d[0]:""}return c},a.FilterReturnChar=function(a){return null!=a&&(a=a.replace(new RegExp("[\r]","g"),"")),a},a}();input.BaseUIProcess=BaseUIProcess;var InputUIUpdate=function(){function a(a){this.Owner=a}return a.prototype.SetLastClientValues=function(a){},a.prototype.GetText=function(){return null!=this.Owner.GetInputElement()?this.Owner.GetInputElement().value:void 0},a.prototype.SetText=function(a){null!=this.GetText()&&this.GetText().replace(/\r\n/g,"\n")!=a.replace(/\r\n/g,"\n")&&null!=this.Owner.GetInputElement()&&(this.Owner.GetInputElement().value=a)},a.prototype.SetFocus=function(){try{null!=this.Owner.GetInputElement()&&this.Owner.GetInputElement().focus()}catch(a){}},a.prototype.GetTextHAlign=function(){return null!==this.Owner.GetInputElement()?this.Owner.GetInputElement().style.textAlign:""},a.prototype.SetTextHAlign=function(a){if(null!==this.Owner.GetInputElement()&&(this.Owner.GetInputElement().style.textAlign=a,input.CoreUtility.IsIE())){var b=this.Owner.GetInputElement().style.width,c=parseInt(b);isNaN(c)&&(c=120),this.Owner.GetInputElement().style.width=c+1+"px";var d=this;setTimeout(function(){d.InputElement.style.width=b},0)}},a.prototype.SetForeColor=function(a){null!=this.Owner.GetInputElement()&&(this.Owner.GetInputElement().style.color=a)},a.prototype.WriteCssStyle=function(a){try{var b=document.getElementById("gcsh_InputManWeb_Style_Container");if(input.CoreUtility.IsIE())b.styleSheet.cssText=a;else{for(var c=b.sheet,d=c.cssRules.length-1;d>=0;d--)c.deleteRule(d);for(var e=a.split("}"),f=0;f<e.length;f++){var g=e[f],h=g.indexOf("{");if(-1!=h){var a=g.substring(h+1);if(0!=a.length){var i=g.substring(0,h);c.insertRule(i+"{"+a+"}",c.cssRules.length)}}}}}catch(j){}},a.prototype.ClearCssStyle=function(){},a}();input.InputUIUpdate=InputUIUpdate;var GlobalEventHandler=function(){function a(){}return a.OnKeyDown=function(a,b,c){if(a.ImeMode!==!0||input.CoreUtility.IsIE8OrBelow()){var d=b.keyCode;c&&(d|=524288);var e={};e.Shift=!1,e.Ctrl=!1,e.Alt=!1,b.shiftKey&&(e.Shift=!0),b.ctrlKey&&(e.Ctrl=!0),b.altKey&&(e.Alt=!0);var f=null;Utility.FuncKeysPressed=e;try{f=a.KeyDown(b)}catch(g){}return null!=f&&null!=f.KeyCode?(input.CoreUtility.IsIE()&&(b.keyCode=f.KeyCode),void(input.CoreUtility.IsIE()||(Utility.ShouldInvokeKeyPress=!1))):void(f?input.CoreUtility.IsIE()?null!=b&&(b.returnValue=!0):Utility.ShouldInvokeKeyPress=!0:(Utility.PreventDefault(b),input.CoreUtility.IsIE()||(Utility.ShouldInvokeKeyPress=!1)))}},a.OnKeyPress=function(b,c){if((118!==c.charCode&&120!==c.charCode&&99!==c.charCode||!c.ctrlKey)&&!(input.CoreUtility.IPad&&c.charCode>256||46==c.keyCode&&c.shiftKey||b.ImeMode===!0)){var d=b;if(!(input.CoreUtility.IsIE()||0!=c.charCode&&Utility.ShouldInvokeKeyPress)){if(!Utility.ShouldInvokeKeyPress||(38==c.keyCode||40==c.keyCode)&&"Edit"!=d.Type)return Utility.ShouldInvokeKeyPress=!0,Utility.PreventDefault(c),void(null!=d&&"Edit"==d.Type&&null!=d.DropDownObj&&d.DropDownObj.IsKeyFromDropDown&&(d.DropDownObj.IsKeyFromDropDown=!1));if(13!=c.keyCode||"Edit"!=d.Type)return}var e=c.keyCode||c.charCode;if(13!=e||"Edit"==d.Type){var f=String.fromCharCode(e);try{if(input.CharProcess.CharEx.IsSurrogate(f.charAt(0)))return void(d.IsSurrogateKeyPressing=!0)}catch(g){}if(null!=f){var h=null;try{h=a.CallKeyPress(b,f,c)}catch(g){}}if(!h)return void Utility.PreventDefault(c)}}},a.CallKeyPress=function(a,b,c){if(input.CoreUtility.IsPad())return a.HasInput=!0,!0;var d=a.KeyPress(b,c);return d},a.OnKeyUp=function(a,b){if(a.ImeMode!==!0||input.CoreUtility.IsIE8OrBelow())try{var c=a;if(c.IsSurrogateKeyPressing)try{if(null!=c.InputElement){var d=c.InputElement.value,e=c.InputElement.selectionStart,f=d.substr(e-2,e);c.KeyPress(f,b)}}finally{c.IsSurrogateKeyPressing=!1}Utility.FuncKeysPressed={"Shift":b.shiftKey,"Ctrl":b.ctrlKey,"Alt":b.altKey},c.KeyUp(b)}catch(g){}},a.OnCompositionStart=function(a,b){try{if(input.CoreUtility.IsPad())return void(a.ImeMode=!0);a.CompositionStart(b)}catch(c){}},a.OnCompositionUpdate=function(a,b){try{if(input.CoreUtility.IsPad())return;a.CompositionUpdate(b)}catch(c){}},a.OnCompositionEnd=function(a,b){try{if(input.CoreUtility.IsPad())return a.HasInput=!0,void(a.ImeMode=!1);a.CompositionEnd(b)}catch(c){}},a.OnInput=function(a,b){try{if(a.ImeMode===!0||a.HasInput!==!0)return;a.ImeMode=!0,a.HasInput=!1,a.Input(b)}catch(c){}},a.OnMouseOver=function(a,b){try{a.MouseOver&&a.MouseOver()}catch(c){}},a.OnMouseOut=function(a,b){try{a.MouseOut()}catch(c){}},a.OnMouseMove=function(a,b){try{a.MouseMove&&a.MouseMove(b)}catch(c){}},a.OnMouseDown=function(a,b){if(!a.ImeMode||a.ImeMode!==!0||input.CoreUtility.IsIE8OrBelow())try{a.MouseDown(b),input.CoreUtility.IsIE()||(Utility.DragStartElementID=a)}catch(c){}},a.OnMouseUp=function(a,b){if(!a.ImeMode||a.ImeMode!==!0||input.CoreUtility.IsIE8OrBelow())try{if(null!=a.MouseUpPointerType&&4!==a.MouseUpPointerType&&"mouse"!==a.MouseUpPointerType){var c={};for(var d in b)c[d]=b[d];setTimeout(function(b){a.MouseUp(c)},300)}else a.MouseUp(b);input.CoreUtility.IsIE()||(Utility.DragStartElementID="")}catch(e){}},a.OnSelectStart=function(a,b){Utility.InnerSelect===!0&&0==Utility.ShouldFireOnSelectStart&&Utility.CancelBubble(b);var c=Utility.GetSelectionText(a.GetInputElement());("undefined"==typeof c||null==c)&&(c="");var d=null;try{d=a.SelectStart(c)}catch(e){}0==d&&Utility.PreventDefault(b)},a.OnDblClick=function(a,b){var c=null;try{c=a.DoubleClick()}catch(d){}c||Utility.PreventDefault(b)},a.OnHTML5BeforeCopy=function(a,b){try{Utility.CutCopyPasteEventObject=b?b.originalEvent:b,a.Copy(b)}catch(c){}finally{Utility.CutCopyPasteEventObject=null}},a.OnHTML5Cut=function(a,b){try{var c=a.GetInputElement(),d=c.value,e=c.selectionStart,f=c.selectionEnd;setTimeout(function(){c.value=d,c.selectionStart=e,c.selectionEnd=f,a.Cut(b)},0)}catch(g){}},a.OnHTML5Paste=function(a,b){try{if(input.CoreUtility.chrome&&"android"!==input.CoreUtility.GetClientOS().toLowerCase())Utility.CutCopyPasteEventObject=b?b.originalEvent:b,a.Paste(Utility.GetDataFromClipboard(!0)),Utility.PreventDefault(b);else{var c=a.SelectionStart,d=a.SelectionEnd;setTimeout(function(){"android"===input.CoreUtility.GetClientOS().toLowerCase()&&(a.SelectionStart=c,a.SelectionEnd=d),a.isPasting=!0,a.ImeInput("DirectInput")},0)}}catch(e){}finally{Utility.CutCopyPasteEventObject=null}},a.OnMouseWheel=function(a,b){try{a.MouseWheel(b),a.ShouldCancelMouseWheelDefaultBehavior()&&Utility.PreventDefault(b)}catch(c){}},a.OnDragStart=function(a,b){try{a.DragStart()}catch(c){}},a.OnDragEnd=function(a,b){try{a.DragEnd(b)}catch(c){}},a.OnDrop=function(a,b){try{var c=b.originalEvent.dataTransfer.getData("Text");a.DragDrop(c,b)}catch(d){}},a.OnTouchStart=function(a,b){Utility.TouchStartTime=new Date,Utility.TouchStartEvt=b},a.OnTouchEnd=function(a,b){if(void 0!==Utility.TouchStartTime){Utility.TouchEndTime=new Date;var c=Utility.TouchEndTime.valueOf()-Utility.TouchStartTime.valueOf();if(c>1e3){var d="";try{d=Utility.GetSelectionText(a.GetInputElement())}catch(e){}a.ShowContextMenu(d,Utility.TouchStartEvt),a.GetEnabled()&&Utility.PreventDefault(b)}Utility.TouchStartTime=void 0,Utility.TouchEndTime=void 0}},a.OnDragEnter=function(a,b){try{a.DragEnter()}catch(c){}},a.OnDragLeave=function(a,b){try{a.DragLeave()}catch(c){}},a.OnSelect=function(a,b){try{if(input.CoreUtility.IsPad()&&a.ImeMode)return;a&&a.Focused&&a.Select()}catch(c){}},a.OnPropertyChanged=function(a,b){try{a.PropertyChange(b)}catch(c){}},a.OnMSPointerUp=function(a,b){a.MSPointerUp(b)},a.OnMSPointerDown=function(a,b){try{a.MSPointerDown(b)}catch(c){}},a.OnMSGestureTap=function(a,b){try{a.MSGestureTap(b)}catch(c){}},a.OnEditFieldFocus=function(a,b){Utility.IsFocusFromIMControl(a._id,b)&&(input.CoreUtility.IsIE()||Utility.HasGetFocus)||(Utility.IsOnFocus=!0,input.CoreUtility.IsIE()||(Utility.HasGetFocus=!0),this.OnFocus(a,b))},a.OnEditFieldLoseFocus=function(b,c){try{var d=b;if(null!=d&&"Edit"==d.Type&&d.IsFocusToDropDownEdit)return void(d.IsFocusToDropDownEdit=!1);if(Utility.IsFocusToIMControl(b._id,c))return;if(input.CoreUtility.firefox){if(Utility.IsOnFocus&&input.CoreUtility.IsIE()&&Utility.IsOnActivate&&Utility.IsOnActivateControlID==b._id)return void(null!=Utility.FocusToBorder&&1==Utility.FocusToBorder&&(Utility.FocusToBorder=!1,d.SetInnerFocus()));Utility.FocusToBorder=!1,input.CoreUtility.IsIE()?Utility.IsOnFocus=!1:Utility.HasGetFocus=!1}a.OnLostFocus(b,c),Utility.FuncKeysPressed={"Shift":!1,"Ctrl":!1,"Alt":!1}}catch(e){}},a.OnFocusOut=function(a,b){if(Utility.FocusToBorder=!1,input.CoreUtility.IsIE()&&b.toElement){var c=b.toElement.id;c==a._id+"_Inside_Div_Container"&&(Utility.FocusToBorder=!0)}return Utility.IsFocusToIMControl(a._id,b)?void(input.CoreUtility.IsIE9OrLater()&&(Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=a._id,Utility.IsOnFocus=!0)):(input.CoreUtility.IsIE()&&Utility.IsOnActivate&&(Utility.IsOnActivate=!1,Utility.IsOnActivateControlID=""),void(Utility.IsOnFocus&&(Utility.IsOnFocus=!1)))},a.OnActivate=function(a,b){Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=a._id,Utility.IsFocusFromIMControl(a._id,b)||(Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=a._id)},a.OnDeActivate=function(a,b){Utility.IsFocusToIMControl(a._id,b)||(Utility.IsOnActivate=!1,Utility.IsOnActivateControlID="",Utility.IsOnFocus=!1)},a.OnFocus=function(b,c){try{var d=function(){b.Focus(),b.Focused=!0,input.CoreUtility.IsPad()&&(b.IPadSelectionRefreshTimer=setInterval(function(c){a.OnSelect(b,c)},400))};input.CoreUtility.IsIE()?d.call(this):setTimeout(d,0)}catch(e){}},a.OnLostFocus=function(a,b){try{a.LoseFocus(b),a.Focused=!1,input.CoreUtility.IsPad()&&clearInterval(a.IPadSelectionRefreshTimer)}catch(c){}},a}();input.GlobalEventHandler=GlobalEventHandler}(wijmo.input||(wijmo.input={}));var input=wijmo.input}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(a){"use strict";function b(a,b){"undefined"==typeof b&&(b=2);var c=""+a;if(c.length>b)c=c.substr(c.length-b);else for(;c.length<b;)c="0"+c;return c}function c(a,b,c){if(!(a instanceof Date))return"";b||(b="d"),c||(c="string"==typeof b?{}:b),"string"==typeof b&&(c.format=b),c.date=a;var d=new $(c),e=new Z(d,c.format,!0);return e.toString()}function d(a,b,c){Globalize.findClosestCulture(b)&&(c=b,b=void 0);var d=Globalize.findClosestCulture(c).calendars.standard,h=d.patterns.d;h=b?b.length<=1?g(b,d.patterns):b:d.patterns.d;var i=new $({}),j=new Z(i,h,!0);return e(j.descriptors)?f(a,j,d):Globalize.parseDate(a,h,c)}function e(a){for(var b=0;b<a.length;b++)if(70===a[b].type||71===a[b].type||72===a[b].type||73===a[b].type||74===a[b].type||75===a[b].type)return!0;return!1}function f(a,b,c){for(var d="",e="",f=0,g=0,h=1,i=1,j=1,k=0,l=0,m=0,n=function(){return f<a.length&&o+1<b.descriptors.length&&-1===b.descriptors[o+1].type&&a.charAt(f)!==b.descriptors[o+1].liternal||o===b.descriptors.length-1&&f+1<=a.length},o=0;o<b.descriptors.length;o++)for(var p=!1;f<a.length;){d=a.charAt(f++),e+=d;for(var q=0;q<Y.GetEraCount();q++){var r=e.toLocaleLowerCase()===Y.GetEraShortNames()[q].toLowerCase()&&72===b.descriptors[o].type,s=e.toLocaleLowerCase()===Y.GetEraAbbreviations()[q].toLowerCase()&&73===b.descriptors[o].type,t=e.toLocaleLowerCase()===Y.GetEraNames()[q].toLowerCase()&&74===b.descriptors[o].type;if(r||s||t){g=q,e="",p=!0;break}}if(p)break;if(-1===b.descriptors[o].type&&b.descriptors[o].liternal===e){e="";break}switch(b.descriptors[o].type){case 70:case 71:if(n())break;h=parseInt(e,10),isNaN(h)&&(h=1),e="",p=!0;break;case 75:if(n())break;"\u5143"===e?h=1:(h=parseInt(e,10),isNaN(h)&&(h=1)),e="",p=!0;break;case 20:case 25:if(n())break;i=parseInt(e,10),isNaN(i)&&(i=1),e="",p=!0;break;case 26:if(n())break;for(var u=0;u<c.months.namesAbbr.length;u++)if(e.toLocaleLowerCase()===c.months.namesAbbr[u]){i=u+1,e="";break}p=!0;break;case 27:if(n())break;for(var v=0;v<c.months.names.length;v++)if(e.toLocaleLowerCase()===c.months.names[v]){i=v+1,e="";break;
}p=!0;break;case 30:case 31:if(n())break;j=parseInt(e,10),isNaN(j)&&(j=1),e="",p=!0;break;case 45:case 46:case 47:case 48:if(n())break;k=parseInt(e,10),isNaN(k)&&(k=1),e="",p=!0;break;case 51:case 50:if(n())break;l=parseInt(e,10),isNaN(l)&&(l=1),e="",p=!0;break;case 61:case 60:if(n())break;m=parseInt(e,10),isNaN(m)&&(m=1),e="",p=!0;break;case 250:case 251:if(n())break;for(var w=0;w<c.PM.length;w++)if(e.toLocaleLowerCase()===c.PM[w]){k+=12;break}e="",p=!0;break;case 1:case 2:case 10:case 100:case 101:case 80:if(n())break;e="",p=!0}if(p)break}return Y.ConvertToGregorianDate(g,h,i,j,k,l,m,!1)}function g(a,b){var c=a;if(a&&a.length<=1)switch(a){case"":case"d":c=b.patterns.d;break;case"D":c=b.patterns.D;break;case"f":c=b.patterns.D+" "+b.patterns.t;break;case"F":c=b.patterns.D+" "+b.patterns.T;break;case"g":c=b.patterns.d+" "+b.patterns.t;break;case"G":c=b.patterns.d+" "+b.patterns.T;break;case"m":c=b.patterns.M;break;case"M":c=b.patterns.M;break;case"s":c=b.patterns.S;break;case"t":c=b.patterns.t;break;case"T":c=b.patterns.T;break;case"u":c=b.patterns.S;break;case"U":c=b.patterns.D+" "+b.patterns.T;break;case"y":c=b.patterns.Y;break;case"Y":c=b.patterns.Y;break;case"r":case"R":c="ddd, dd MMM yyyy HH:mm:ss G\\M\\T"}return c}function h(a,b,c,e,f){var g=d(a,e,f);return g>=b&&c>=g}a.paddingZero=b,function(a){a[a.liternal=-1]="liternal",a[a.OneDigitYear=1]="OneDigitYear",a[a.TwoDigitYear=2]="TwoDigitYear",a[a.FourDigitYear=10]="FourDigitYear",a[a.TwoDigitMonth=20]="TwoDigitMonth",a[a.Month=25]="Month",a[a.AbbreviatedMonthNames=26]="AbbreviatedMonthNames",a[a.MonthNames=27]="MonthNames",a[a.EraYear=70]="EraYear",a[a.TwoEraYear=71]="TwoEraYear",a[a.EraName=72]="EraName",a[a.TwoEraName=73]="TwoEraName",a[a.ThreeEraName=74]="ThreeEraName",a[a.EraYearBig=75]="EraYearBig",a[a.AD=80]="AD",a[a.TwoDigityDayOfMonth=30]="TwoDigityDayOfMonth",a[a.DayOfMonth=31]="DayOfMonth",a[a.AbbreviatedDayNames=100]="AbbreviatedDayNames",a[a.DayNames=101]="DayNames",a[a.h=45]="h",a[a.hh=46]="hh",a[a.H=47]="H",a[a.HH=48]="HH",a[a.ShortAmPm=250]="ShortAmPm",a[a.AmPm=251]="AmPm",a[a.mm=50]="mm",a[a.m=51]="m",a[a.ss=60]="ss",a[a.s=61]="s"}(a.DescriptorType||(a.DescriptorType={}));var i=(a.DescriptorType,function(){function a(a,b){this.id=b,this.startIndex=0,this.name=null,this.type=-1,this.maxLen=2,this.formatString="",this._txtProvider=a,this.startIndex=0}return a.prototype.getText=function(){return null},a.prototype.getRealText=function(a){return null==this._txtProvider.inputWidget.options.date?this.formatString:a},a.prototype.setText=function(a,b,c,d){return!1},a.prototype.inc=function(){},a.prototype.dec=function(){},a.prototype.needAdjustInsertPos=function(){return!0},a.prototype.reachMaxLen=function(){var a=this.getText();do{if("0"!==a.charAt(0))break;a=a.slice(1)}while(a.length>0);return a.length>=this.maxLen},a}());a._iDateDescriptor=i;var j=function(a){function b(b,c){a.call(this,b,c),this.liternal="",this.maxLen=100}return __extends(b,a),b.prototype.getText=function(){return this.liternal},b}(i),k=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.inc=function(){var a=this._txtProvider.getDate(),b=this._txtProvider.inputWidget._getRealEraMinDate(),c=this._txtProvider.inputWidget._getRealEraMaxDate();if(Y.Equal(a,c))this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(b.valueOf()));else{var d=this._txtProvider.inputWidget._getInnerIncrement();this._txtProvider.setYear(this._txtProvider.getYear()+d,null,!0),this._txtProvider.getDate()>c&&this._txtProvider.setDate(new Date(c.valueOf()))}},b.prototype.dec=function(){var a=this._txtProvider.getDate(),b=this._txtProvider.inputWidget._getRealEraMinDate(),c=this._txtProvider.inputWidget._getRealEraMaxDate();if(Y.Equal(a,b))this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(c.valueOf()));else{var d=this._txtProvider.inputWidget._getInnerIncrement();this._txtProvider.setYear(this._txtProvider.getYear()-d,null,!0),this._txtProvider.getDate()<b&&this._txtProvider.setDate(new Date(b.valueOf()))}},b}(i),l=function(a){function b(b,c){a.call(this,b,c),this.name="Era Year",this.formatString="e",this.type=70}return __extends(b,a),b.prototype.getText=function(){var a=Y.GetEraDate(this._txtProvider.getDate());return-1===a.eraYear?"":(a.eraYear=a.eraYear>99?99:a.eraYear,this.getRealText(String(a.eraYear)))},b.prototype.setText=function(a,b,c){if(isNaN(parseInt(a)))return!1;var d=this._txtProvider.getDate(),e=Y.GetEraDate(d);if(-1!==e.eraYear){var f=parseInt(a);f>=Y.GetEraYears()[e.era]&&(f=Y.GetEraYears()[e.era]);var g=null==this._txtProvider.inputWidget.options.date;g&&(f=parseInt(a));var h=Y.ConvertToGregorianDate(e.era,f,d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),!1);if(e.era<Y.GetEraCount()-1){var i=Y.GetEraDates()[e.era+1];h>i&&(f=Y.GetEraYears()[e.era]-1,h=Y.ConvertToGregorianDate(e.era,f,d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),!1))}return this._txtProvider.setDate(h),!0}return!1},b}(k),m=function(a){function c(b,c){a.call(this,b,c),this.name="Two Era Year",this.formatString="ee",this.type=71}return __extends(c,a),c.prototype.getText=function(){var a=Y.GetEraDate(this._txtProvider.getDate());return-1===a.eraYear?"":(a.eraYear=a.eraYear>99?99:a.eraYear,this.getRealText(b(a.eraYear,2)))},c.prototype.setText=function(a,b,c){if(isNaN(parseInt(a)))return!1;var d=this._txtProvider.getDate(),e=Y.GetEraDate(d);if(-1!==e.eraYear){var f=String(e.eraYear)+a,g=parseInt(f.substring(f.length-2,f.length));g>Y.GetEraYears()[e.era]&&(g=Y.GetEraYears()[e.era]);var h=null==this._txtProvider.inputWidget.options.date;h&&(g=parseInt(a));var i=Y.ConvertToGregorianDate(e.era,g,d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),!1);if(e.era<Y.GetEraCount()-1){var j=Y.GetEraDates()[e.era+1];i>j&&(g=Y.GetEraYears()[e.era]-1,i=Y.ConvertToGregorianDate(e.era,g,d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),!1))}return this._txtProvider.setDate(i),!0}return!1},c}(k),n=function(a){function b(b,c){a.call(this,b,c),this.name="Era Year Big",this.formatString="E",this.type=75}return __extends(b,a),b.prototype.getText=function(){var b=a.prototype.getText.call(this);return 1==b?"\u5143":b},b}(l),o=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.inc=function(){var a=this._txtProvider.getDate(),b=Y.GetEraDate(a);if(-1!==b.era){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();if(Y.Equal(a,d))this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(c.valueOf()));else if(b.era>=Y.GetEraCount()-1)this._txtProvider.setDate(new Date(d.valueOf()));else{var e=b.era+this._txtProvider.inputWidget._getInnerIncrement();e=e>Y.GetEraCount()-1?Y.GetEraCount()-1:e;var f=b.eraYear>Y.GetEraYears()[e]?Y.GetEraYears()[e]:b.eraYear,g=Y.ConvertToGregorianDate(e,f,a.getMonth()+1,a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),!0);g=null==g?Y.GetEraDates()[e]:g,g>d?this._txtProvider.setDate(new Date(d.valueOf())):this._txtProvider.setDate(g)}}},b.prototype.dec=function(){var a=this._txtProvider.getDate(),b=Y.GetEraDate(a);if(-1!==b.era){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();if(Y.Equal(a,c))this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(d.valueOf()));else if(0==b.era)this._txtProvider.setDate(new Date(c.valueOf()));else{var e=b.era-this._txtProvider.inputWidget._getInnerIncrement();e=0>e?0:e;var f=b.eraYear>Y.GetEraYears()[e]?Y.GetEraYears()[e]:b.eraYear,g=Y.ConvertToGregorianDate(e,f,a.getMonth()+1,a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),!0);null==g&&(g=new Date(Y.GetEraDates()[e+1]),g.setDate(g.getDate()-1)),g>d?this._txtProvider.setDate(new Date(c.valueOf())):this._txtProvider.setDate(g)}}},b}(i),p=function(a){function b(b,c){a.call(this,b,c),this.name="Era Name",this.formatString="g",this.type=72}return __extends(b,a),b.prototype.getText=function(){var a=Y.GetEraDate(this._txtProvider.getDate());return-1===a.era?"":this.getRealText(Y.GetEraSymbols()[a.era])},b.prototype.setText=function(a,b,c){var d=a.substr(a.length-1,1),e=0;for(e=0;e<Y.GetEraCount()&&(d.toLowerCase()!==Y.GetEraShortcuts()[e].toLowerCase()&&a.toLowerCase()!==Y.GetEraShortNames()[e].toLowerCase());e++);if(e==Y.GetEraCount())return!0;var f=this._txtProvider.getDate(),g=Y.GetEraDate(f);if(-1===g.era)return!0;var h=g.eraYear>Y.GetEraYears()[e]?Y.GetEraYears()[e]:g.eraYear,i=Y.ConvertToGregorianDate(e,h,f.getMonth()+1,f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),!0);if(i=null==i?Y.GetEraDates()[e]:i,e<Y.GetEraCount()-1){var j=Y.GetEraDates()[e+1];i=i>j?j:i}return this._txtProvider.setDate(i),!0},b}(o),q=function(a){function b(b,c){a.call(this,b,c),this.name="Two Era Name",this.formatString="gg",this.type=73}return __extends(b,a),b.prototype.getText=function(){var a=Y.GetEraDate(this._txtProvider.getDate());return-1===a.era?"":this.getRealText(Y.GetEraAbbreviations()[a.era])},b.prototype.setText=function(a,b,c){var d=a.substr(a.length-1,1),e=0;for(e=0;e<Y.GetEraCount()&&(d.toLowerCase()!==Y.GetEraShortcuts()[e].toLowerCase()&&a.toLowerCase()!==Y.GetEraShortNames()[e].toLowerCase()&&a.toLowerCase()!==Y.GetEraAbbreviations()[e].toLowerCase());e++);if(e==Y.GetEraCount())return!0;var f=this._txtProvider.getDate(),g=Y.GetEraDate(f);if(-1===g.era)return!0;var h=g.eraYear>Y.GetEraYears()[e]?Y.GetEraYears()[e]:g.eraYear,i=Y.ConvertToGregorianDate(e,h,f.getMonth()+1,f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),!0);if(i=null==i?Y.GetEraDates()[e]:i,e<Y.GetEraCount()-1){var j=Y.GetEraDates()[e+1];i=i>j?j:i}return this._txtProvider.setDate(i),!0},b}(o),r=function(a){function b(b,c){a.call(this,b,c),this.name="Three Era Name",this.formatString="ggg",this.type=74}return __extends(b,a),b.prototype.getText=function(){var a=Y.GetEraDate(this._txtProvider.getDate());return-1===a.era?"":this.getRealText(Y.GetEraNames()[a.era])},b.prototype.setText=function(a,b,c){var d=a.substr(a.length-1,1),e=0;for(e=0;e<Y.GetEraCount()&&(d.toLowerCase()!==Y.GetEraShortcuts()[e].toLowerCase()&&a.toLowerCase()!==Y.GetEraShortNames()[e].toLowerCase()&&a.toLowerCase()!==Y.GetEraAbbreviations()[e].toLowerCase()&&a.toLowerCase()!==Y.GetEraNames()[e].toLowerCase());e++);if(e==Y.GetEraCount())return!1;var f=this._txtProvider.getDate(),g=Y.GetEraDate(f);if(-1===g.era)return!0;var h=g.eraYear>Y.GetEraYears()[e]?Y.GetEraYears()[e]:g.eraYear,i=Y.ConvertToGregorianDate(e,h,f.getMonth()+1,f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),!0);if(i=null==i?Y.GetEraDates()[e]:i,e<Y.GetEraCount()-1){var j=Y.GetEraDates()[e+1];i=i>j?j:i}return this._txtProvider.setDate(i),!0},b}(o),s=function(a){function b(b,c){a.call(this,b,c),this.name="AD",this.formatString="A",this.type=80}return __extends(b,a),b.prototype.getText=function(){return"A.D."},b}(i),t=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.inc=function(){a.prototype.inc.call(this);var b=this._txtProvider.getDate(),c=b.getFullYear(),d=b.getMonth(),e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=d+this._txtProvider.inputWidget._getInnerIncrement(),j=Y.DaysInMonth(c,i+1);e>j&&(e=j);var k=new Date(c,i,e,f,g,h);if(this._txtProvider._isEraFormatExist()){var l=this._txtProvider.inputWidget._getRealEraMinDate(),m=this._txtProvider.inputWidget._getRealEraMaxDate();k>=m?Y.Equal(this._txtProvider.getDate(),m)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(l):this._txtProvider.setDate(m):this._txtProvider.setDate(k)}else{var l=this._txtProvider.inputWidget._getRealMinDate(),m=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(k,!0)?this._txtProvider.setDate(k):Y.Equal(this._txtProvider.getDate(),m)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(l):this._txtProvider.setDate(m)}},b.prototype.dec=function(){a.prototype.inc.call(this);var b=this._txtProvider.getDate(),c=b.getFullYear(),d=b.getMonth(),e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=d-this._txtProvider.inputWidget._getInnerIncrement(),j=Y.DaysInMonth(c,i+1);e>j&&(e=j);var k=new Date(c,i,e,f,g,h);if(1==c&&(k.setFullYear(1),0>i&&k.setMonth(i)),this._txtProvider._isEraFormatExist()){var l=this._txtProvider.inputWidget._getRealEraMinDate(),m=this._txtProvider.inputWidget._getRealEraMaxDate();l>k?Y.Equal(this._txtProvider.getDate(),l)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(m):this._txtProvider.setDate(l):this._txtProvider.setDate(k)}else{var l=this._txtProvider.inputWidget._getRealMinDate(),m=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(k,!0)?this._txtProvider.setDate(k):Y.Equal(this._txtProvider.getDate(),l)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(m):this._txtProvider.setDate(l)}},b.prototype.setText=function(a,b,c){parseInt(a)>12&&(a=a.substr(a.length-1,1));var d=this._txtProvider.setMonth(a,b,c);if(d&&this._txtProvider._isEraFormatExist()){var e=this._txtProvider.inputWidget._getRealEraMinDate(),f=this._txtProvider.inputWidget._getRealEraMaxDate(),g=this._txtProvider.getDate();g>f?this._txtProvider.setDate(f):e>g&&this._txtProvider.setDate(e)}return d},b}(i),u=function(a){function b(b,c){a.call(this,b,c),this.name="Two-digit month",this.formatString="MM",this.type=20}return __extends(b,a),b.prototype.getText=function(){var a=""+this._txtProvider.getMonth();return this.getRealText(1===a.length?"0"+a:a)},b.prototype.setText=function(b,c,d){return"0"===b?!0:a.prototype.setText.call(this,b,c,d)},b}(t),v=function(a){function b(b,c){a.call(this,b,c),this.name="month",this.formatString="M",this.type=25}return __extends(b,a),b.prototype.getText=function(){var a=""+this._txtProvider.getMonth();return this.getRealText(a)},b}(t),w=function(a){function b(b,c){a.call(this,b,c),this.name="AbbreviatedMonthNames",this.formatString="MMM",this.type=26,this.maxLen=26}return __extends(b,a),b.prototype.getText=function(){var a=this._txtProvider.getMonth(),b=this._txtProvider._getCulture();return this.getRealText(b.calendars.standard.months.namesAbbr[a-1])},b.prototype.setText=function(a,b,c){var d=-1,e=this._txtProvider.inputWidget._getCulture().calendars.standard;return d=this._txtProvider.findAlikeArrayItemIndex(e.months.namesAbbr,a),-1===d?!1:this._txtProvider.setMonth(d+1,b,c)},b}(t),x=function(a){function b(b,c){a.call(this,b,c),this.name="MonthNames",this.formatString="MMMM",this.type=27,this.maxLen=100}return __extends(b,a),b.prototype.getText=function(){var a=this._txtProvider.getMonth(),b=this._txtProvider._getCulture();return this.getRealText(b.calendars.standard.months.names[a-1])},b.prototype.setText=function(a,b,c){var d,e=-1;if(c&&c.isfullreset)e=1;else if(d=this._txtProvider._getCulture(),e=this._txtProvider.findAlikeArrayItemIndex(d.calendars.standard.months.names,a),-1===e)return!1;return this._txtProvider.setMonth(e+1,b,c)},b}(t),y=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.inc=function(){var a=this._txtProvider.getDayOfMonth()+this._txtProvider.inputWidget._getInnerIncrement(),b=new Date(this._txtProvider.getDate().valueOf());if(b.setDate(a),this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();b>d?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c):this._txtProvider.setDate(b)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),d=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(b,!0)?this._txtProvider.setDate(b):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c)}},b.prototype.dec=function(){var a=this._txtProvider.getDayOfMonth()-this._txtProvider.inputWidget._getInnerIncrement(),b=new Date(this._txtProvider.getDate().valueOf());if(b.setDate(a),this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();c>b?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(d):this._txtProvider.setDate(b)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),d=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(b,!0)?this._txtProvider.setDate(b):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(d)}},b.prototype.setText=function(a,b,c){var d=this._txtProvider.getDate(),e=Y.DaysInMonth(d.getFullYear(),d.getMonth()+1);parseInt(a)>e&&(a=e+"");var f=this._txtProvider.setDayOfMonth(a,b,c);if(f&&this._txtProvider._isEraFormatExist()){var g=this._txtProvider.inputWidget._getRealEraMinDate(),h=this._txtProvider.inputWidget._getRealEraMaxDate(),d=this._txtProvider.getDate();d>h?this._txtProvider.setDate(h):g>d&&this._txtProvider.setDate(g)}return f},b}(i),z=function(a){function c(b,c){a.call(this,b,c),this.name="Two-digit day of month",this.formatString="dd",this.type=30}return __extends(c,a),c.prototype.getText=function(){return this.getRealText(b(this._txtProvider.getDayOfMonth()))},c.prototype.setText=function(b,c,d){return"0"===b?!0:a.prototype.setText.call(this,b,c,d)},c}(y),A=function(a){function b(b,c){a.call(this,b,c),this.name="Day of month",this.formatString="d",this.type=31}return __extends(b,a),b.prototype.getText=function(){var a=this._txtProvider.getDayOfMonth();return this.getRealText(""+a)},b}(y),B=function(a){function b(b,c){a.call(this,b,c),this.name="AbbreviatedDayNames",this.formatString="ddd",this.type=100,this.maxLen=100}return __extends(b,a),b.prototype.getText=function(){var a=this._txtProvider.getDayOfWeek(),b=this._txtProvider._getCulture();return this.getRealText(b.calendars.standard.days.namesAbbr[a-1])},b.prototype.setText=function(a,b,c){var d=-1,e=this._txtProvider._getCulture();return d=this._txtProvider.findAlikeArrayItemIndex(e.calendars.standard.days.namesShort,a),-1===d?!1:this._txtProvider.setDayOfWeek(d+1)},b.prototype.needAdjustInsertPos=function(){return!1},b}(y),C=function(a){function b(b,c){a.call(this,b,c),this.name="DayNames",this.formatString="dddd",this.type=101,this.maxLen=100}return __extends(b,a),b.prototype.getText=function(){var a=this._txtProvider.getDayOfWeek(),b=this._txtProvider._getCulture();return this.getRealText(b.calendars.standard.days.names[a-1])},b.prototype.setText=function(a,b,c){var d=-1,e=this._txtProvider._getCulture();return d=this._txtProvider.findAlikeArrayItemIndex(e.calendars.standard.days.names,a),-1===d?!1:this._txtProvider.setDayOfWeek(d+1)},b.prototype.needAdjustInsertPos=function(){return!1},b}(y),D=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.inc=function(){var a=this._txtProvider.getYear()+this._txtProvider.inputWidget._getInnerIncrement(),b=new Date(this._txtProvider.getDate().valueOf());if(b.setFullYear(a),this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();b>d?Y.Equal(this._txtProvider.getDate(),d)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c):this._txtProvider.setDate(d):this._txtProvider.setDate(b)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),d=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(b,!0)?this._txtProvider.setDate(b):Y.Equal(this._txtProvider.getDate(),d)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c):this._txtProvider.setDate(d)}},b.prototype.dec=function(){var a=this._txtProvider.getYear()-+this._txtProvider.inputWidget._getInnerIncrement(),b=new Date(this._txtProvider.getDate().valueOf());if(b.setFullYear(a),this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();c>b?Y.Equal(this._txtProvider.getDate(),c)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(d):this._txtProvider.setDate(c):this._txtProvider.setDate(b)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),d=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(b,!0)?this._txtProvider.setDate(b):Y.Equal(this._txtProvider.getDate(),c)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(d):this._txtProvider.setDate(c)}},b}(i),E=function(a){function c(b,c){a.call(this,b,c)}return __extends(c,a),c.prototype.setText=function(a,c,d){a=b(a);var e,f,g,h,i,j=b(this._txtProvider.getYear(),4);return"00"===a&&(e=this._txtProvider.getMonth(),f=this._txtProvider.getDayOfMonth(),g=this._txtProvider.getHours(),h=this._txtProvider.getMinutes(),i=this._txtProvider.getSeconds(),1!==e||1!==f||g||h||i||(j="0001",a="01")),j.length>=2&&(j=j.substr(0,2)+a.substr(0,2)),this._txtProvider.setYear(parseInt(j),d,!1)},c}(D),F=function(a){function c(b,c){a.call(this,b,c),this.name="Four-digit year",this.formatString="yyyy",this.type=10,this.maxLen=4}return __extends(c,a),c.prototype.getText=function(){return this.getRealText(b(this._txtProvider.getYear(),4))},c.prototype.setText=function(a,b,c,d){if(d&&c){a=1*a,a%=100;var e=2e3;this._txtProvider.inputWidget.options.startYear&&(e=this._txtProvider.inputWidget.options.startYear);var f=e%100,g=e-f;a=a>=f?g+a:g+a+100}return this._txtProvider.setYear(a,c,!1)},c}(D),G=function(a){function c(b,c){a.call(this,b,c),this.name="One-digit year",this.formatString="y",this.type=1}return __extends(c,a),c.prototype.getText=function(){var a=b(this._txtProvider.getYear());return"0"===a[0]&&(a=a[1]),this.getRealText(a)},c}(E),H=function(a){function c(b,c){a.call(this,b,c),this.name="Two-digit year",this.formatString="yy",this.type=2}return __extends(c,a),c.prototype.getText=function(){return this._txtProvider.inputWidget.isFocused()&&null==this._txtProvider.inputWidget.options.date?"yy":this.getRealText(b(this._txtProvider.getYear(),2))},c}(E),I=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.inc=function(){var a=this._txtProvider.getHours()+this._txtProvider.inputWidget._getInnerIncrement(),b=new Date(this._txtProvider.getDate().valueOf());if(b.setHours(a),this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();b>d?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c):this._txtProvider.setDate(b)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),d=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(b,!0)?this._txtProvider.setDate(b):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c)}},b.prototype.dec=function(){var a=this._txtProvider.getHours()-this._txtProvider.inputWidget._getInnerIncrement(),b=new Date(this._txtProvider.getDate().valueOf());if(b.setHours(a),this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();c>b?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(d):this._txtProvider.setDate(b)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),d=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(b,!0)?this._txtProvider.setDate(b):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(d)}},b}(i),J=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.setText=function(a,b,c){var d=this._txtProvider.getHours();return d>12&&(a=1*a+12),this._txtProvider.setHours(a,b)},b}(I),K=function(a){function b(b,c){a.call(this,b,c),this.name="h",this.formatString="h",this.type=45}return __extends(b,a),b.prototype.getText=function(){if(this._txtProvider.inputWidget.isFocused()&&null==this._txtProvider.inputWidget.options.date)return"h";var a=this._txtProvider.getHours();return a>12?a-=12:0===a&&(a=12),12==a&&this._txtProvider.inputWidget.options.hour12As0&&(a=0),this.getRealText(""+a)},b}(J),L=function(a){function c(b,c){a.call(this,b,c),this.name="hh",this.formatString="hh",this.type=46}return __extends(c,a),c.prototype.getText=function(){var a=this._txtProvider.getHours();return a>12?a-=12:0===a&&(a=12),12==a&&this._txtProvider.inputWidget.options.hour12As0&&(a=0),this.getRealText(b(a,2))},c}(J),M=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.setText=function(a,b,c){return this._txtProvider.setHours(a,b)},b}(I),N=function(a){function b(b,c){a.call(this,b,c),this.name="H",this.formatString="H",this.type=47}return __extends(b,a),b.prototype.getText=function(){var a=this._txtProvider.getHours();return 0!=a||this._txtProvider.inputWidget.options.midnightAs0||(a=24),this.getRealText(""+a)},b}(M),O=function(a){function c(b,c){a.call(this,b,c),this.name="HH",this.formatString="HH",this.type=48}return __extends(c,a),c.prototype.getText=function(){var a=this._txtProvider.getHours();return 0!=a||this._txtProvider.inputWidget.options.midnightAs0||(a=24),this.getRealText(b(a,2))},c}(M),P=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.inc=function(){var a=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(a,!0)},b.prototype.dec=function(){var a=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(a,!0)},b.prototype.setText=function(a,b,c){var d;return a.toLowerCase().indexOf("a")>=0?(d=this._txtProvider.getHours()%12,this._txtProvider.setHours(d,!0)):a.toLowerCase().indexOf("p")>=0&&(d=this._txtProvider.getHours()%12+12,this._txtProvider.setHours(d,!0)),!0},b}(i),Q=function(a){function b(b,c){a.call(this,b,c),this.name="t",this.formatString="t",this.type=250}return __extends(b,a),b.prototype.getText=function(){var a=this._txtProvider.getHours(),b=(this._txtProvider._getCulture(),this._txtProvider.inputWidget._getInnerAmDesignator()),c=this._txtProvider.inputWidget._getInnerPmDesignator(),d=12>a?b:c;return this.getRealText(d.charAt(0)||" ")},b}(P),R=function(a){function b(b,c){a.call(this,b,c),this.name="tt",this.formatString="tt",this.type=251}return __extends(b,a),b.prototype.getText=function(){var a=this._txtProvider.getHours(),b=(this._txtProvider._getCulture(),this._txtProvider.inputWidget._getInnerAmDesignator()),c=this._txtProvider.inputWidget._getInnerPmDesignator(),d=12>a?b:c;return d.length<=0&&(d=" "),this.getRealText(d)},b}(P),S=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.inc=function(){var a=this._txtProvider.getMinutes()+this._txtProvider.inputWidget._getInnerIncrement(),b=new Date(this._txtProvider.getDate().valueOf());if(b.setMinutes(a),this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();b>d?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c):this._txtProvider.setDate(b)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),d=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(b,!0)?this._txtProvider.setDate(b):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c)}},b.prototype.dec=function(){var a=this._txtProvider.getMinutes()-this._txtProvider.inputWidget._getInnerIncrement(),b=new Date(this._txtProvider.getDate().valueOf());if(b.setMinutes(a),this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();c>b?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(d):this._txtProvider.setDate(b)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),d=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(b,!0)?this._txtProvider.setDate(b):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(d)}},b.prototype.setText=function(a,b,c){return c&&c.isfullreset&&(a="0"),this._txtProvider.setMinutes(a,b)},b}(i),T=function(a){function c(b,c){a.call(this,b,c),this.name="mm",this.formatString="mm",this.type=50}return __extends(c,a),c.prototype.getText=function(){return this.getRealText(b(this._txtProvider.getMinutes()))},c}(S),U=function(a){function b(b,c){a.call(this,b,c),this.name="m",this.formatString="m",this.type=51,this.delta=12}return __extends(b,a),b.prototype.getText=function(){return this.getRealText(this._txtProvider.getMinutes().toString())},b}(S),V=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.inc=function(){var a=this._txtProvider.getSeconds()+this._txtProvider.inputWidget._getInnerIncrement(),b=new Date(this._txtProvider.getDate().valueOf());if(b.setSeconds(a),this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();b>d?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c):this._txtProvider.setDate(b)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),d=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(b,!0)?this._txtProvider.setDate(b):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c)}},b.prototype.dec=function(){var a=this._txtProvider.getSeconds()-this._txtProvider.inputWidget._getInnerIncrement(),b=new Date(this._txtProvider.getDate().valueOf());if(b.setSeconds(a),this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),d=this._txtProvider.inputWidget._getRealEraMaxDate();c>b?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(d):this._txtProvider.setDate(b)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),d=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(b,!0)?this._txtProvider.setDate(b):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(d)}},b.prototype.setText=function(a,b,c){return c&&c.isfullreset&&(a="0"),this._txtProvider.setSeconds(a,b)},b}(i),W=function(a){function c(b,c){a.call(this,b,c),this.name="ss",this.formatString="ss",this.type=60}return __extends(c,a),c.prototype.getText=function(){return this.getRealText(b(this._txtProvider.getSeconds()))},c}(V),X=function(a){function b(b,c){a.call(this,b,c),this.name="s",this.formatString="s",this.type=61}return __extends(b,a),b.prototype.getText=function(){return this.getRealText(this._txtProvider.getSeconds().toString())},b}(V),Y=function(){function a(){}return a.IsValidEraDate=function(a){return a<this.GetEraMin()||a>this.GetEraMax()?!1:!0},a.ConvertToGregorianYear=function(a,b,c){return 0>a||a>=this.GetEraCount()||1>b||c&&b>this.GetEraYears()[a]?-1:this.GetEraDates()[a].getFullYear()+b-1},a.GetEraDates=function(){if(void 0!=window.eras){for(var a=new Array,b=0;b<window.eras.length;b++){var c=new Date(window.eras[b].startDate.replace(/-/g,"/"));a[b]=c}return a}return this.EraDates},a.GetEraNames=function(){var a=new Array;if(void 0!=window.eras){for(var b=0;b<window.eras.length;b++)a[b]=window.eras[b].name;return a}for(var b=0;b<this.EraCount;b++)a[b]=this.EraNames[b+2*this.EraCount];return a},a.GetEraSymbols=function(){var a=new Array;if(void 0!=window.eras){for(var b=0;b<window.eras.length;b++)a[b]=window.eras[b].symbol;return a}for(var b=0;b<this.EraCount;b++)a[b]=this.EraNames[b];return a},a.GetEraAbbreviations=function(){var a=new Array;if(void 0!=window.eras){for(var b=0;b<window.eras.length;b++)a[b]=window.eras[b].abbreviation;return a}for(var b=0;b<this.EraCount;b++)a[b]=this.EraNames[b+this.EraCount];return a},a.GetEraShortNames=function(){var a=new Array;if(void 0!=window.eras){for(var b=0;b<window.eras.length;b++)a[b]=window.eras[b].shortcuts.split(",")[1];
return a}for(var b=0;b<this.EraCount;b++)a[b]=this.EraNames[b];return a},a.GetEraShortcuts=function(){var a=new Array;if(void 0!=window.eras){for(var b=0;b<window.eras.length;b++)a[b]=window.eras[b].shortcuts.split(",")[0];return a}for(var b=0;b<this.EraCount;b++)a[b]=this.EraKeys[b];return a},a.GetEraMax=function(){if(void 0!=window.eras&&window.eras.length>0){var a=new Date(window.eras[window.eras.length-1].startDate.replace(/-/g,"/"));return a.setFullYear(a.getFullYear()+99),a}return this.EraMax},a.GetEraMin=function(){if(void 0!=window.eras&&window.eras.length>0){var a=new Date(window.eras[0].startDate.replace(/-/g,"/"));return a}return this.EraMin},a.GetEraCount=function(){return void 0!=window.eras?window.eras.length:this.EraCount},a.GetEraYears=function(){if(void 0!=window.eras){for(var a=new Array,b=1;b<window.eras.length;b++){var c=new Date(window.eras[b-1].startDate.replace(/-/g,"/")),d=new Date(window.eras[b].startDate.replace(/-/g,"/"));a[b-1]=d.getFullYear()-c.getFullYear()+1}return a[b-1]=99,a}return this.EraYears},a.ConvertToGregorianDate=function(a,b,c,d,e,f,g,h){var i=this.ConvertToGregorianYear(a,b,h);if(1>i||i>9999)return null;if(1>c||c>12)return null;var j=this.DaysInMonth(i,c);if(1>d||d>j)return null;if(0>e||e>23)return null;if(0>f||f>59)return null;if(0>g||g>59)return null;var k=new Date(i,c-1,d,e,f,g);if(h){var l=this.GetEraDates()[a],m=a+1!=this.GetEraCount()?this.AddMilliseconds(this.GetEraDates()[a+1],-1):this.GetEraMax();if(l>k||k>m)return null}return k},a.String2Date=function(a){if(null==a||0==a.Length)return null;var b=new Date(Date.parse(a));return b},a.ToString=function(a,b,c,d){var e=a+"";if(null!=c){for(;e.length<b;)d?e+=c:e=c+e;return e}for(;e.length<b;)e+=a+"";return e},a.Date2String=function(b,c,d,e){var f="";try{f=1==c?1==d?b.getFullYear()+"/"+(b.getMonth()+1)+"/"+b.getDate():1==e?b.getHours()+":"+a.ToString(b.getMinutes(),2,"0")+":"+a.ToString(b.getSeconds(),2,"0"):b.getFullYear()+"/"+(b.getMonth()+1)+"/"+b.getDate()+" "+b.getHours()+":"+a.ToString(b.getMinutes(),2,"0")+":"+a.ToString(b.getSeconds(),2,"0"):1==d?b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear():1==e?b.getHours()+":"+a.ToString(b.getMinutes(),2,"0")+":"+a.ToString(b.getSeconds(),2,"0"):b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear()+" "+b.getHours()+":"+a.ToString(b.getMinutes(),2,"0")+":"+a.ToString(b.getSeconds(),2,"0")}catch(g){f=""}return f},a.Date2Long=function(a){try{return 100*(100*a.getFullYear()+a.getMonth()+1)+a.getDate()}catch(b){return 0}},a.Date2Number=function(a){return null==a?0:100*(100*(100*(100*(100*a.getFullYear()+a.getMonth()+1)+a.getDate())+a.getHours())+a.getMinutes())+a.getSeconds()},a.Long2Date=function(a){return new Date(Math.floor(a/1e4),Math.floor(a%1e4/100)-1,a%100)},a.GetEraDate=function(a){var b=new Object;if(b.era=-1,b.eraYear=-1,!this.IsValidEraDate(a))return b;for(var c=0;c<this.GetEraCount();c++){var d=c+1!=this.GetEraCount()?this.GetEraDates()[c+1]:this.AddMilliseconds(this.GetEraMax(),1);if(d>a){b.era=c,b.eraYear=a.getFullYear()-this.GetEraDates()[c].getFullYear()+1;break}}return b},a.MakeDate=function(a,b,c,d){var e=new Date;return e=this.ConvertToGregorianDate(a,b,c,d,0,0,0,!0),null==e?-1:e},a.GetValidMonthRange=function(a,b){var c={};return c.min=1,c.max=12,-1==a||-1==b?c:(1==b?c.min=this.GetEraDates()[a].getMonth()+1:b==this.EraYears[a]&&a<this.EraCount-1&&(c.max=this.AddMilliseconds(this.GetEraDates()[a+1],-1).getMonth()+1),c)},a.GetValidDayRange=function(a,b,c){var d=new Object;d.min=1,d.max=this.DaysInMonth(this.ConvertToGregorianYear(a,b,!0),c);var e=this.GetEraDates()[a],f=a<this.GetEraCount()-1?this.AddMilliseconds(this.GetEraDates()[a+1],-1):this.GetEraMax();return-1==a||-1==b?d:(1==b&&c==e.getMonth()+1?d.min=e.getDate():b==this.EraYears[a]&&c==f.getMonth()+1&&(d.max=f.getDate()),d)},a.IsLeapYear=function(a){return a%400==0||a%4==0&&a%100!=0?!0:!1},a.DayOfYear=function(a,b,c){for(var d=0,e=1;b>e;e++)d+=this.DaysInMonth(a,e);return d+=c},a.DaysInMonth=function(a,b){if(b>12)a+=Math.floor(b/12),b%=12;else if(0>b){var c=-1*b;a-=Math.ceil(c/12),b=12-c%12}switch(b){case 2:return this.IsLeapYear(a)?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},a.Equal=function(a,b,c){if(null==a&&null==b)return!0;if(null==a)return!1;if(null==b)return!1;try{return c?a.getFullYear()==b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()&&a.getHours()==b.getHours()&&a.getMinutes()==b.getMinutes()&&a.getSeconds()==b.getSeconds()?!0:!1:a.getFullYear()==b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()?!0:!1}catch(d){return!1}},a.YearMonthEqual=function(a,b){if(null==a&&null==b)return!0;if(null==a)return!1;if(null==b)return!1;try{return a.getFullYear()==b.getFullYear()&&a.getMonth()==b.getMonth()?!0:!1}catch(c){return!1}},a.SetDate=function(a,b,c){var d=new Date,e=12e4;if(12*a+b>e)d=new Date(9999,11,31);else if(100>12*a+b)d=new Date(100,0,1);else{var f=this.DaysInMonth(a,b);c>f&&(c=f),d=new Date(a,b-1,c)}return d},a.SetFullDate=function(a,b,c){var d=new Date;d.setDate(1);var e=this.DaysInMonth(a,b);return b>0&&12>b&&c>e&&(c=e),d.setFullYear(a),d.setMonth(b-1),d.setDate(c),d},a.SetFullDateByDate=function(a){var b=new Date;return b.setDate(1),b.setFullYear(a.getFullYear()),b.setMonth(a.getMonth()),b.setDate(a.getDate()),b.setHours(0,0,0,0),b},a.LYearDays=function(a){var b,c=348;for(b=32768;b>8;b>>=1)c+=this.LunarInfo[a-1960]&b?1:0;return c+this.leapDays(a)},a.leapDays=function(a){return this.LeapMonth(a)?65536&this.LunarInfo[a-1960]?30:29:0},a.LeapDays=function(a){return this.LeapMonth(a)?65536&this.LunarInfo[a-1960]?30:29:0},a.LeapMonth=function(a){return 15&this.LunarInfo[a-1960]},a.MonthDays=function(a,b){return this.LunarInfo[a-1960]&65536>>b?30:29},a.GetRokuyou=function(a){if(!(a-this.RokuyouMin<0||a-this.RokuyouMax>0)){var b,c=0,d=0,e=new Date(1960,0,28),f=Math.round((a-e)/864e5);for(b=1960;2050>b&&f>0;b++)d=this.LYearDays(b),f-=d;for(0>f&&(f+=d,b--),this.year=b,c=this.LeapMonth(b),this.isLeap=!1,b=1;13>b&&f>0;b++)c>0&&b==c+1&&0==this.isLeap?(--b,this.isLeap=!0,d=this.LeapDays(this.year)):d=this.MonthDays(this.year,b),1==this.isLeap&&b==c+1&&(this.isLeap=!1),f-=d;0==f&&c>0&&b==c+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--b)),0>f&&(f+=d,--b),this.month=b,this.day=f+1;var g=(this.month+this.day-2)%6,h=new Date(1996,6,15),i=new Date(1996,7,13);this.IsDateInRange(a,h,i)&&(g=(6+g-1)%6);var j=new Date(1996,8,12),k=new Date(1996,9,11);this.IsDateInRange(a,j,k)&&(g=(6+g-1)%6);var l=new Date(2033,7,25),m=new Date(2033,11,21);this.IsDateInRange(a,l,m)&&(g=(g+1)%6),this.Equal(a,h)&&(g=(6+g-1)%6),this.Equal(a,j)&&(g=(6+g-1)%6);var n;return n}},a.IsDateInRange=function(a,b,c){var d=a.getYear(),e=b.getYear(),f=c.getYear(),g=a.getMonth(),h=b.getMonth(),i=c.getMonth(),j=a.getDate(),k=b.getDate(),l=c.getDate(),m=1e4*d+100*g+j,n=1e4*e+100*h+k,o=1e4*f+100*i+l;return m>=n&&o>=m},a.GetRokuyouText=function(a){var b=new Array;switch(b=this.RokuyouTextArray.slice(0),a){default:return""}},a.DaysInSpecialWeek=function(a,b,c){for(var d,e=new Array,f=this.DaysInMonth(a,b+1),g=new Date(a,b,1),h=1;f>=h;h++)if(g.setDate(h),g.getDay()==c){var i=new Date(a,b,h);e.push(i),d=h;break}for(d+=7;f>=d;){g.setDate(d);var j=new Date(a,b,d);e.push(j),d+=7}return e},a.GetDaysByFirstWeekday=function(a){var b=new Array;b.push(a);for(var c=new Date(a);c.getDate()+7<=this.DaysInMonth(a.getFullYear(),a.getMonth()+1);)c=new Date(c.getFullYear(),c.getMonth(),c.getDate()+7),b.push(c);return b},a.AddMilliseconds=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds());return c.setMilliseconds(c.getMilliseconds()+b),new Date(c.valueOf())},a.GetWeekIndexByDate=function(a){return Math.floor(a.getDate()/7)},a.EraDates=new Array(new Date(1868,8,8),new Date(1912,6,30),new Date(1926,11,25),new Date(1989,0,8)),a.EraCount=4,a.EraYears=new Array(45,15,64,99),a.EraMax=new Date(2087,11,31,23,59,59),a.EraMin=new Date(1868,8,8),a.EraKeys=new Array("1","2","3","4","m","t","s","h"),a.EraIndices=new Array(0,1,2,3,0,1,2,3),a.DateLongFormat="yyyyMMddHHmmss",a.EraNames=new Array("M","T","S","H","\u660e","\u5927","\u662d","\u5e73","\u660e\u6cbb","\u5927\u6b63","\u662d\u548c","\u5e73\u6210"),a.WeekDays=new Array("\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"),a.MonthNames=new Array("1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"),a.ShortWeekDays=new Array("\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"),a.ShortMonthNames=new Array("1","2","3","4","5","6","7","8","9","10","11","12"),a.RokuyouTextArray=new Array("\u5148\u52dd","\u53cb\u5f15","\u5148\u8ca0","\u4ecf\u6ec5","\u5927\u5b89","\u8d64\u53e3"),a.RokuyouTextArrayEn=new Array("Senshou","Tomobiki","Senbu","Butsumetsu","Taian","Shakkou"),a.DefaultTwoDigitYear=2029,a.Digits=2,a.EraYearMax=99,a.RokuyouMin=new Date(1960,0,28),a.RokuyouMax=new Date(2050,0,22),a.LunarInfo=new Array(44710,43856,19808,43748,42352,21104,29283,55632,27479,22176,39632,19925,19168,42208,54484,53840,54680,46400,54944,103846,38320,18864,43444,42160,45690,27216,27968,46934,11104,38320,19317,18800,25776,29859,59984,28056,21968,11104,38629,37600,51552,59732,54432,55888,30034,22208,43959,9680,37584,51893,43344,46240,111779,46416,21977,19360,42416,21877,21168,43344,47444,27296,44368,27474,19296,42726,42352,21104,27237,55600,23200,46755,38608,19415,19168,42192,118998,53840,54560,56645,46752,38608,21938,18864,42359,42160,45648,111189,27968,44448),a}();a.DateTimeInfo=Y;var Z=function(){function a(a,b,c){this.inputWidget=a,this.maskPartsCount=0,this.isDisplayFormat=!0,this.pattern="M/d/yyyy",this.descriptors=new Array(0),this.desPostions=new Array(0),this.fields=new Array(0),this.isDisplayFormat=c,this._setFormat(b)}return a.prototype._parseFormat=function(a){var b,c,d=[],e="",f="",g=!1,h=!1;for(b=0;b<a.length;b++)c=a.charAt(b),h?(d.push(this.createDescriptor(-1,c)),e="",h=!1):"\\"!==c?"'"!==c?g?(d.push(this.createDescriptor(-1,c)),e=""):(b||(f=c),f!==c&&e.length>0&&(this.handlePattern(e,d)||d.push(this.createDescriptor(-1,f)),e=""),e+=c,f=c):g?(g=!1,e=""):(g=!0,e.length>0&&(this.handlePattern(e,d)||d.push(this.createDescriptor(-1,f)),e="")):(h=!0,e.length>0&&(this.handlePattern(e,d)||d.push(this.createDescriptor(-1,f)),e=""));return e.length>0&&(this.handlePattern(e,d)||d.push(this.createDescriptor(-1,f))),d},a.prototype._parseFormatToPattern=function(a){var b=this.inputWidget._getCulture().calendar,c=b.patterns.d;if(a.length<=1)switch(a){case"":case"d":c=b.patterns.d;break;case"D":c=b.patterns.D;break;case"f":c=b.patterns.D+" "+b.patterns.t;break;case"F":c=b.patterns.D+" "+b.patterns.T;break;case"g":c=b.patterns.d+" "+b.patterns.t;break;case"G":c=b.patterns.d+" "+b.patterns.T;break;case"m":c=b.patterns.M;break;case"M":c=b.patterns.M;break;case"s":c=b.patterns.S;break;case"t":c=b.patterns.t;break;case"T":c=b.patterns.T;break;case"u":c=b.patterns.S;break;case"U":c=b.patterns.D+" "+b.patterns.T;break;case"y":c=b.patterns.Y;break;case"Y":c=b.patterns.Y;break;case"r":case"R":c="ddd, dd MMM yyyy HH:mm:ss G\\M\\T"}else c=a;return c},a.prototype.createDescriptor=function(a,b){var c=null,d=this.maskPartsCount++;switch(a){case-1:c=new j(this,d),c.liternal=b;break;case 20:c=new u(this,d);break;case 25:c=new v(this,d);break;case 26:c=new w(this,d);break;case 27:c=new x(this,d);break;case 30:c=new z(this,d);break;case 31:c=new A(this,d);break;case 100:c=new B(this,d);break;case 101:c=new C(this,d);break;case 10:c=new F(this,d);break;case 1:c=new G(this,d);break;case 2:c=new H(this,d);break;case 45:c=new K(this,d);break;case 46:c=new L(this,d);break;case 47:c=new N(this,d);break;case 48:c=new O(this,d);break;case 250:c=new Q(this,d);break;case 251:c=new R(this,d);break;case 50:c=new T(this,d);break;case 51:c=new U(this,d);break;case 60:c=new W(this,d);break;case 61:c=new X(this,d);break;case 70:c=new l(this,d);break;case 71:c=new m(this,d);break;case 72:c=new p(this,d);break;case 73:c=new q(this,d);break;case 74:c=new r(this,d);break;case 75:c=new n(this,d);break;case 80:c=new s(this,d)}return c},a.prototype.handlePattern=function(a,b){var c=new RegExp("y{3,10}"),d=c.test(a);if(d)return this.inputWidget&&"Japanese"===this.inputWidget.options.cultureCalendar?(b.push(this.createDescriptor(71)),!0):(b.push(this.createDescriptor(10)),!0);if(c=new RegExp("y{2,2}"),d=c.test(a))return this.inputWidget&&"Japanese"===this.inputWidget.options.cultureCalendar?(b.push(this.createDescriptor(71)),!0):(b.push(this.createDescriptor(2)),!0);if(c=new RegExp("y{1,1}"),d=c.test(a))return this.inputWidget&&"Japanese"===this.inputWidget.options.cultureCalendar?(b.push(this.createDescriptor(70)),!0):(b.push(this.createDescriptor(1)),!0);if(c=new RegExp("d{4,4}"),d=c.test(a))return b.push(this.createDescriptor(101)),!0;if(c=new RegExp("d{3,3}"),d=c.test(a))return b.push(this.createDescriptor(100)),!0;if(c=new RegExp("d{2,2}"),d=c.test(a))return b.push(this.createDescriptor(30)),!0;if(c=new RegExp("d{1,1}"),d=c.test(a))return b.push(this.createDescriptor(31)),!0;if(c=new RegExp("M{4,4}"),d=c.test(a))return b.push(this.createDescriptor(27)),!0;if(c=new RegExp("M{3,3}"),d=c.test(a))return b.push(this.createDescriptor(26)),!0;if(c=new RegExp("M{2,2}"),d=c.test(a))return b.push(this.createDescriptor(20)),!0;if(c=new RegExp("M{1,1}"),d=c.test(a))return b.push(this.createDescriptor(25)),!0;if(c=new RegExp("h{2,2}"),d=c.test(a))return b.push(this.createDescriptor(46)),!0;if(c=new RegExp("h{1,1}"),d=c.test(a))return b.push(this.createDescriptor(45)),!0;if(c=new RegExp("H{2,2}"),d=c.test(a))return b.push(this.createDescriptor(48)),!0;if(c=new RegExp("H{1,1}"),d=c.test(a))return b.push(this.createDescriptor(47)),!0;if(c=new RegExp("m{2,2}"),d=c.test(a))return b.push(this.createDescriptor(50)),!0;if(c=new RegExp("m{1,1}"),d=c.test(a))return b.push(this.createDescriptor(51)),!0;if(c=new RegExp("s{2,2}"),d=c.test(a))return b.push(this.createDescriptor(60)),!0;if(c=new RegExp("s{1,1}"),d=c.test(a))return b.push(this.createDescriptor(61)),!0;if(c=new RegExp("t{2,2}"),d=c.test(a))return b.push(this.createDescriptor(251)),!0;if(c=new RegExp("t{1,1}"),d=c.test(a))return b.push(this.createDescriptor(250)),!0;if(c=new RegExp("e{2,10}"),d=c.test(a))return b.push(this.createDescriptor(71)),!0;if(c=new RegExp("e{1,1}"),d=c.test(a))return b.push(this.createDescriptor(70)),!0;if(c=new RegExp("g{3,10}"),d=c.test(a))return b.push(this.createDescriptor(74)),!0;if(c=new RegExp("g{2,2}"),d=c.test(a))return this.inputWidget&&"Japanese"===this.inputWidget.options.cultureCalendar?(b.push(this.createDescriptor(74)),!0):(b.push(this.createDescriptor(73)),!0);if(c=new RegExp("g{1,1}"),d=c.test(a))return this.inputWidget&&"Japanese"===this.inputWidget.options.cultureCalendar?(b.push(this.createDescriptor(74)),!0):(b.push(this.createDescriptor(72)),!0);if(this.isDisplayFormat){if(c=new RegExp("E{1,10}"),d=c.test(a))return b.push(this.createDescriptor(75)),!0;if(c=new RegExp("A{1,1}"),d=c.test(a))return b.push(this.createDescriptor(80)),!0}return!1},a.prototype.daysInMonth=function(a,b){a-=1;var c=new Date(b,++a,1,-1).getDate();return c},a.prototype._isDigitString=function(a){if(a=_.trim(a),0===a.length)return!0;var b,c,d=a.charAt(0);if(("+"===d||"-"===d)&&(a=a.substr(1),a=_.trim(a)),0===a.length)return!0;try{return b=parseFloat(a),c=b.toString(),c===a}catch(e){return!1}},a.prototype._internalSetDate=function(a){this.inputWidget&&this.inputWidget._internalSetDate(a)},a.prototype._isValidDate=function(a){return this.inputWidget._isValidDate(a)},a.prototype._setFormat=function(a){var b=this.inputWidget._getCulture();null!=b&&(this.pattern=this._parseFormatToPattern(a),this.descriptors=this._parseFormat(this.pattern),this.fields=_.grep(this.descriptors,function(a){return-1!==a.type}))},a.prototype._isEraFormatExist=function(){for(var a=0;a<this.descriptors.length;a++)if(this.descriptors[a].type>=70&&this.descriptors[a].type<=75)return!0;return!1},a.prototype.getDate=function(){return this.inputWidget?new Date(this.inputWidget._safeGetDate(!0).getTime()):void 0},a.prototype.setDate=function(a){this.inputWidget&&this.inputWidget._setData(a)},a.prototype.getYear=function(){return this.getDate().getFullYear()},a.prototype.setYear=function(a,b,c){try{if(b&&b.isfullreset&&(b.offset=1,a="1970"),"string"==typeof a&&!this._isDigitString(a))return!1;a=1*a;var d,e,f,g=this.inputWidget.options,h=1,i=9999;return c&&(g.minDate&&(h=Math.max(h,g.minDate.getFullYear())),g.maxDate&&(i=Math.min(i,g.maxDate.getFullYear()))),b&&b.isreset&&(a=h),h>a&&(a=h),a>i&&(a=i),d=this.getDate(),e=new Date(d.getTime()),e.setFullYear(a),this._isValidDate(e)?(f=this.daysInMonth(this.getMonth(),this.getYear()),f===d.getDate()?(e=new Date(d.getTime()),e.setDate(1),e.setFullYear(a),e.setDate(f),this._isValidDate(e)?(this._internalSetDate(e),!0):!1):(d.setFullYear(a),this._internalSetDate(d),!0)):b&&b.isreset?(d.setFullYear(1),this._internalSetDate(d),!0):!1}catch(j){return!1}},a.prototype.getMonth=function(){return this.getDate().getMonth()+1},a.prototype.setMonth=function(a,b,c){try{c&&c.isfullreset&&(a="1"),a=1*a;var d,e,f=this.getDate();if("undefined"!=typeof b&&!b&&(a>12||1>a)){if(!c||!c.isreset)return!1;a=1}return d=this.daysInMonth(this.getMonth(),this.getYear()),d===this.getDate().getDate()?(e=new Date(f.getTime()),e.setDate(1),e.setMonth(a-1),d=this.daysInMonth(e.getMonth()+1,e.getFullYear()),e.setDate(d),this._isValidDate(e)?(this._internalSetDate(e),!0):!1):(e=new Date(f.getTime()),e.setMonth(a-1),this._isValidDate(e)?(this._internalSetDate(e),!0):!1)}catch(g){return!1}},a.prototype.getHours=function(){return this.getDate().getHours()},a.prototype.setHours=function(a,b){try{if(a=1*a,"undefined"!=typeof b&&!b&&a>24)return!1;var c=new Date(this.getDate().getTime());return c.setHours(a),this._isValidDate(c)?(this._internalSetDate(c),!0):!1}catch(d){return!1}},a.prototype.getMinutes=function(){return this.getDate().getMinutes()},a.prototype.setMinutes=function(a,b){try{if(a=1*a,"undefined"!=typeof b&&!b&&a>60)return!1;var c=new Date(this.getDate().getTime());return c.setMinutes(a),this._isValidDate(c)?(this._internalSetDate(c),!0):!1}catch(d){return!1}},a.prototype.getSeconds=function(){return this.getDate().getSeconds()},a.prototype.setSeconds=function(a,b){try{if(a=1*a,"undefined"!=typeof b&&!b&&a>60)return!1;var c=new Date(this.getDate().getTime());return c.setSeconds(a),this._isValidDate(c)?(this._internalSetDate(c),!0):!1}catch(d){return!1}},a.prototype.getDayOfMonth=function(){return this.getDate().getDate()},a.prototype.setDayOfMonth=function(a,b,c){try{if(c&&c.isfullreset)return this.setDayOfMonth(1,b);var d,e,f=this.getDate();return a=1*a,"undefined"!=typeof b&&!b&&(d=this.daysInMonth(this.getMonth(),this.getYear()),a>d||1>a)?c&&c.isreset?this.setDayOfMonth(1,b,c):!1:(e=new Date(f.getTime()),e.setDate(a),this._isValidDate(e)?(this._internalSetDate(e),!0):!1)}catch(g){return!1}},a.prototype.getDayOfWeek=function(){return this.getDate().getDay()+1},a.prototype.setDayOfWeek=function(a){try{a=1*a;var b=a-this.getDayOfWeek();return this.setDayOfMonth(this.getDayOfMonth()+b,!0)}catch(c){return!1}},a.prototype._getCulture=function(){return this.inputWidget._getCulture()},a.prototype.findAlikeArrayItemIndex=function(a,b){var c,d,e=-1,f=99999;for(c=0;c<a.length;c++)d=a[c].toLowerCase().indexOf(b.toLowerCase()),-1!==d&&f>d&&(f=d,e=c);return e},a.prototype.toString=function(){if(this._isEraFormatExist()&&null!=this.inputWidget.options.date){var a=this.inputWidget._getRealEraMinDate(),b=this.inputWidget._getRealEraMaxDate();if(this.inputWidget.options.date<a||this.inputWidget.options.date>b)return""}var c,d,e,f="",g=0;for(this.desPostions=new Array(0),c=0;c<this.descriptors.length;c++)for(this.descriptors[c].startIndex=f.length,d=this.descriptors[c].getText(),f+=d,e=0;e<d.length;e++)if(this.desPostions.push({"desc":this.descriptors[c],"pos":e,"text":d,"length":d.length}),g++,this.desPostions.length!==g)throw"Fatal Error !!!!!!!!!!!!!!!";return f},a}();a.wijDateTextFormatter=Z;var $=function(){function a(a){this.options=a,a.format=a.format||"M/d/yyyy",a.amDesignator=a.amDesignator||"",a.pmDesignator=a.pmDesignator||"",void 0===a.hour12As0&&(a.hour12As0=!1),void 0===a.midnightAs0&&(a.midnightAs0=!0)}return a.prototype._getInnerIncrement=function(){return 1},a.prototype._getCulture=function(){return Globalize.findClosestCulture(this.options.culture)},a.prototype._getRealEraMaxDate=function(){return this.options.maxDate?Y.GetEraMax()<this.options.maxDate?Y.GetEraMax():this.options.maxDate:Y.GetEraMax()},a.prototype._getRealEraMinDate=function(){return this.options.minDate?Y.GetEraMin()>this.options.minDate?Y.GetEraMin():this.options.minDate:Y.GetEraMin()},a.prototype._safeGetDate=function(a){var b=this.options.date;return null==b&&(b=new Date),a||(b=this._checkRange(b)),b},a.prototype._safeSetDate=function(a,b){var c=a;return b||(a=this._checkRange(a)),isNaN(a)&&(a=c),this.options.date=a,!0},a.prototype._getAllowSpinLoop=function(){return!1},a.prototype._getRealMinDate=function(){if(this.options.minDate)return this.options.minDate;var a=new Date(1,0,1,0,0,0);return a.setFullYear(1),a},a.prototype._getRealMaxDate=function(){return this.options.maxDate?this.options.maxDate:new Date(9999,11,31,23,59,59)},a.prototype._setData=function(a){this.options.date=a},a.prototype._isValidDate=function(a,b){if(void 0===a)return!1;if(isNaN(a))return!1;if(a.getFullYear()<1||a.getFullYear()>9999)return!1;if(b){if(this.options.minDate&&a<this.options.minDate)return!1;if(this.options.maxDate&&a>this.options.maxDate)return!1}return!0},a.prototype._getInnerAmDesignator=function(){return""==this.options.amDesignator?this._getStandardAMPM("AM"):this.options.amDesignator},a.prototype._getInnerPmDesignator=function(){return""==this.options.pmDesignator?this._getStandardAMPM("PM"):this.options.pmDesignator},a.prototype.isFocused=function(){return!1},a.prototype._internalSetDate=function(a){},a.prototype._checkRange=function(a){return a&&(this.options.minDate&&a<this.options.minDate&&(a=new Date(Math.max(this.options.minDate.valueOf(),a.valueOf()))),this.options.maxDate&&a>this.options.maxDate&&(a=new Date(Math.min(this.options.maxDate.valueOf(),a.valueOf())))),a},a.prototype._getStandardAMPM=function(a){var b=this._getCulture();if(b&&b.calendar){var c=b.calendars.standard[a];if(c)return c[0]}return a},a}();a.wijInputDateImpl=$;var _=jQuery;_.wijinputcore=_.wijinputcore||{},_.wijinputcore.formatdate=_.wijinputcore.formatdate||c,_.wijinputcore.parseDate=_.wijinputcore.parseDate||d,_.wijinputcore.validateDate=_.wijinputcore.validateDate||h}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){"use strict";var b=function(){function b(a){this._owner=a}return b.prototype._initDatePicker=function(){var b=this._owner.element.data("datePicker");if(void 0==b){var c=this._owner.element.data("pickerMinYear"),d=this._owner.element.data("pickerMaxYear"),e=5*this._owner.element.data("itemHeight"),f=this._owner.element.data("pickerWidth"),g=this._owner.element.data("itemHeight")+"px",h=this._owner.element.data("indicatorHeight")+"px",i=this._owner.element.data("indicatorTranslateTop"),j=this._owner.element.data("indicatorTranslateDown"),k=this._owner.element.data("indicatorTranslateSelector"),l=this._owner.element.data("indicatorTranslateContent"),m=this._createDivElement(document.body,f+"px"),n=(this._createDivIndicatiorElement(m,g,"",k),this._createTableElement(m,e+"px","-",l)),o=$("<tr/>").appendTo(n),p="33%",q="33%",r="33%";"MMMM"==this._owner.element.data("pickerDateMonthFormat")&&(p="30%",q="45%",r="25%");for(var s=$("<td/>").css({"width":p}),t=this._createPickerDivElement(s,e),u=this._createMaskElement(t,e),v=new Array,w=c;d>=w;w++){var x=this._getRollText(w,this._owner.element.data("pickerDateYearFormat")),y=this._createItemElement(w,u,g,x);v[w-c]=y}var w,z=$("<td/>").css({"width":q}),A=this._createPickerDivElement(z,e),B=this._createMaskElement(A,e),C={};for(w=1;12>=w;w++){var x=this._getRollText(w,this._owner.element.data("pickerDateMonthFormat")),y=this._createItemElement(w-1,B,g,x);C[w-1]=y}var D=$("<td/>").css({"width":r}),E=this._createPickerDivElement(D,e),F=this._createMaskElement(E,e),G={};for(w=1;31>=w;w++){var x=this._getRollText(w,this._owner.element.data("pickerDateDayFormat")),y=this._createItemElement(w,F,g,x);G[w-1]=y}var H=this._owner.element.data("pickerDateFormat"),I=!1,J=!1,K=!1;for(w=0;w<H.length;w++)"yyyy"!=H[w]||I||(s.appendTo(o),I=!0),"M"!=H[w]&&"MM"!=H[w]&&"MMM"!=H[w]&&"MMMM"!=H[w]||J||(z.appendTo(o),J=!0),"d"!=H[w]&&"dd"!=H[w]||K||(D.appendTo(o),K=!0);if(this._owner.element.data("datePicker",m),this._owner.element.data("divYear",t),this._owner.element.data("divMonth",A),this._owner.element.data("divDay",E),this._owner.element.data("divYearMask",u),this._owner.element.data("divMonthMask",B),this._owner.element.data("divDayMask",F),this._owner.element.data("pickerYearArray",v),this._owner.element.data("pickerMonthArray",C),this._owner.element.data("pickerDayArray",G),!a.CoreUtility.IsIE8OrBelow()){var L=this._createIndicatiorElement(t,h,"-",i),M=this._createIndicatiorElement(t,h,"-",j),N=this._createIndicatiorElement(A,h,"-",i),O=this._createIndicatiorElement(A,h,"-",j),P=this._createIndicatiorElement(E,h,"-",i),Q=this._createIndicatiorElement(E,h,"-",j);this._owner.element.data("divYearIndicatorTop",L),this._owner.element.data("divMonthIndicatorTop",N),this._owner.element.data("divDayIndicatorTop",P),this._owner.element.data("divYearIndicatorDown",M),this._owner.element.data("divMonthIndicatorDown",O),this._owner.element.data("divDayIndicatorDown",Q)}this._initDatePickerEvent(),this._initTouchPickerEvent("Year"),this._initTouchPickerEvent("Month"),this._initTouchPickerEvent("Day")}},b.prototype._initDatePickerEvent=function(){var a=this,b=this._owner.element.data("divYear"),c=this._owner.element.data("divMonth"),d=this._owner.element.data("divDay");b.mousewheel(function(b,c){a._yearMouseWheel(b,c)}),c.mousewheel(function(b,c){a._monthMouseWheel(b,c)}),d.mousewheel(function(b,c){a._dayMouseWheel(b,c)})},b.prototype._initTimePicker=function(){var b=this._owner.element.data("timePicker");if(void 0==b){for(var c=5*this._owner.element.data("itemHeight"),d=this._owner.element.data("pickerWidth"),e=this._owner.element.data("itemHeight")+"px",f=this._owner.element.data("indicatorHeight")+"px",g=this._owner.element.data("indicatorTranslateTop"),h=this._owner.element.data("indicatorTranslateDown"),i=this._owner.element.data("indicatorTranslateSelector"),j=this._owner.element.data("indicatorTranslateContent"),k=this._createDivElement(document.body,d+"px"),l=(this._createDivIndicatiorElement(k,e,"",i),this._createTableElement(k,c+"px","-",j)),m=$("<tr/>").appendTo(l),n=$("<td/>").css({"width":"33%"}),o=this._createPickerDivElement(n,c),p=this._createMaskElement(o,c),q={},r=1;12>=r;r++){var s=this._getRollText(r,this._owner.element.data("pickerTimeHourFormat")),t=this._createItemElement(r,p,e,s);q[r-1]=t}for(var u=$("<td/>").css({"width":"33%"}),v=this._createPickerDivElement(u,c),w=this._createMaskElement(v,c),x={},r=0;60>r;r++){var s=this._getRollText(r,this._owner.element.data("pickerTimeMinuteFormat")),t=this._createItemElement(r,w,e,s);x[r]=t}for(var y=$("<td/>").css({"width":"34%"}),z=this._createPickerDivElement(y,c),A=this._createMaskElement(z,c),B={},r=0;2>r;r++){var s=this._getRollText(r,this._owner.element.data("pickerTimeAMFormat")),t=this._createItemElement(r,A,e,s);B[r]=t}for(var C=this._owner.element.data("pickerTimeFormat"),D=!1,E=!1,F=!1,r=0;r<C.length;r++)"h"!=C[r]&&"hh"!=C[r]||D||(n.appendTo(m),D=!0),"m"!=C[r]&&"mm"!=C[r]||E||(u.appendTo(m),E=!0),"t"!=C[r]&&"tt"!=C[r]||F||(y.appendTo(m),F=!0);if(this._owner.element.data("timePicker",k),this._owner.element.data("divHour",o),this._owner.element.data("divMinute",v),this._owner.element.data("divAM",z),this._owner.element.data("divHourMask",p),this._owner.element.data("divMinuteMask",w),this._owner.element.data("divAMMask",A),this._owner.element.data("pickerHourArray",q),this._owner.element.data("pickerMinuteArray",x),this._owner.element.data("pickerAMArray",B),!a.CoreUtility.IsIE8OrBelow()){var G=this._createIndicatiorElement(o,f,"-",g),H=this._createIndicatiorElement(o,f,"-",h),I=this._createIndicatiorElement(v,f,"-",g),J=this._createIndicatiorElement(v,f,"-",h),K=this._createIndicatiorElement(z,f,"-",g),L=this._createIndicatiorElement(z,f,"-",h);this._owner.element.data("divHourIndicatorTop",G),this._owner.element.data("divMinuteIndicatorTop",I),this._owner.element.data("divAMIndicatorTop",K),this._owner.element.data("divHourIndicatorDown",H),this._owner.element.data("divMinuteIndicatorDown",J),this._owner.element.data("divAMIndicatorDown",L)}this._initTimePickerEvent(),this._initTouchPickerEvent("Hour"),this._initTouchPickerEvent("Minute"),this._initTouchPickerEvent("AM")}},b.prototype._initTimePickerEvent=function(){var a=this,b=this._owner.element.data("divHour"),c=this._owner.element.data("divMinute"),d=this._owner.element.data("divAM");b.mousewheel(function(b,c){a._hourMouseWheel(b,c)}),c.mousewheel(function(b,c){a._minuteMouseWheel(b,c)}),d.mousewheel(function(b,c){a._amMouseWheel(b,c)})},b.prototype._isValidatePickerFormat=function(a){switch(a){case"yyyy":case"M":case"MM":case"MMM":case"MMMM":case"d":case"dd":case"h":case"hh":case"m":case"mm":case"t":case"tt":return!0}return!1},b.prototype._getDatePickerMinYear=function(){var a=this._owner._isEraFormatExist()?this._owner._getRealEraMinDate():this._owner._getRealMinDate(),b=a.getFullYear(),c=this._owner._getPickerValue(),d=this._owner._max(c.getFullYear()-50,b);return d},b.prototype._getDatePickerMaxYear=function(){var a=this._owner._isEraFormatExist()?this._owner._getRealEraMaxDate():this._owner._getRealMaxDate(),b=a.getFullYear(),c=this._owner._getPickerValue(),d=this._owner._min(c.getFullYear()+50,b);return d},b.prototype._getCorrentPickerFormat=function(a){for(var b=0;b<a.length-1;b++)for(var c=b+1;c<a.length;c++)if(a[c].index<a[b].index){var d=a[b];a[b]=a[c],a[c]=d}for(var e="",b=0;b<a.length;b++)e+=a[b].value,b<a.length-1&&(e+=",");return e},b.prototype._getDefaultDatePickerFormat=function(){var a=this._owner._getCulture();if(null==a)return"yyyy,M,d";var b=a.calendars.standard,c=b.patterns.d,d={"index":c.indexOf("y"),"value":"yyyy"},e={"index":c.indexOf("M"),"value":"MM"},f={"index":c.indexOf("d"),"value":"dd"};if(-1==d.index||-1==e.index||-1==f.index)return"yyyy,M,d";var g=new Array;return g[0]=d,g[1]=e,g[2]=f,this._getCorrentPickerFormat(g)},b.prototype._getDefaultTimePickerFormat=function(){if(this._owner.options.culture.length>=2){var a=this._owner.options.culture.substr(0,2);if("ja"==a||"zh"==a)return"tt,hh,mm"}return"hh,mm,tt"},b.prototype._updateTimePicker=function(){var a=this._owner.element.data("pickerHour")-1,b=this._owner.element.data("pickerMinute"),c=this._owner.element.data("pickerAM");this._owner.element.data("divHourMask"),this._owner.element.data("divMinuteMask"),this._owner.element.data("divAMMask");this._updateItemTransform("Hour",a),this._updateItemTransform("Minute",b),this._updateItemTransform("AM",c),this._scrollTheView("Hour",a,a,!0),this._scrollTheView("Minute",b,b,!0),this._scrollTheView("AM",c,c,!0),this._owner.element.data("pickerHourScrollDelay",5),this._owner.element.data("pickerMinuteScrollDelay",5),this._owner.element.data("pickerAMScrollDelay",5),this._owner.element.data("pickerHourScrollRate",1),this._owner.element.data("pickerMinuteScrollRate",1),this._owner.element.data("pickerAMScrollRate",1)},b.prototype._updateDatePicker=function(){var b=this._owner.element.data("pickerMinYear"),c=this._owner.element.data("pickerYear"),d=this._owner.element.data("pickerMonth"),e=this._owner.element.data("pickerDay");a.DateTimeInfo.DaysInMonth(c,d);this._updateItemTransform("Year",c-b),this._updateItemTransform("Month",d-1),this._updateItemTransform("Day",e-1),this._scrollTheView("Year",c-b,c-b,!0),
this._scrollTheView("Month",d-1,d-1,!0),this._scrollTheView("Day",e-1,e-1,!0),this._owner.element.data("pickerYearScrollDelay",5),this._owner.element.data("pickerMonthScrollDelay",5),this._owner.element.data("pickerDayScrollDelay",5),this._owner.element.data("pickerYearScrollRate",1),this._owner.element.data("pickerMonthScrollRate",1),this._owner.element.data("pickerDayScrollRate",1),this._updateDayPickerMaxCount()},b.prototype._getRollText=function(a,b){var c=this._owner._getCulture(),d="";switch(b){case"M":case"h":d=a.toString();break;case"MM":case"hh":d=10>a?"0"+a.toString():a.toString();break;case"m":case"d":case"yyyy":d=a.toString();break;case"mm":case"dd":d=10>a?"0"+a.toString():a.toString();break;case"t":d=0==a?this._owner._getStandardAMPM("AM"):this._owner._getStandardAMPM("PM"),d=d.substr(0,1);break;case"tt":d=0==a?this._owner._getStandardAMPM("AM"):this._owner._getStandardAMPM("PM");break;case"MMM":d=c.calendars.standard.months.namesAbbr[a-1];break;case"MMMM":d=c.calendars.standard.months.names[a-1]}return d},b.prototype._initTouchPickerEvent=function(b){var c=(this._owner.element.data("div"+b),this._owner.element.data("div"+b+"Mask"));if(this._addPickerTouchEvent(c,b),!a.CoreUtility.IsIE8OrBelow()){var d=this._owner.element.data("div"+b+"IndicatorTop"),e=this._owner.element.data("div"+b+"IndicatorDown");this._addPickerTouchEvent(d,b),this._addPickerTouchEvent(e,b)}},b.prototype._addPickerTouchEvent=function(a,b){var c=this;a.bind("touchstart",function(a){c._touchStart(a,b),a.preventDefault()}).bind("touchmove",function(a){c._touchMove(a,b),a.preventDefault()}).bind("touchend",function(a){c._touchEnd(a,b),a.preventDefault()})},b.prototype._getRollFormat=function(a,b){for(var c=0;c<a.length;c++)if(-1!=a[c].indexOf(b))return a[c];return""},b.prototype._adjustTouchPosition=function(a,b){var c=this._getTouchPositionArray(a),d=this._getItemIndexByPosition(a,b),e=this._itemIndexToValue(a,d);this._owner.element.data("picker"+a,e),this._scrollTheViewByTouch(a,c[d])},b.prototype._itemIndexToValue=function(a,b){switch(a){case"Minute":case"AM":return b;case"Hour":case"Month":case"Day":return b+1;case"Year":var c=this._owner.element.data("pickerMinYear");return c+b}return-1},b.prototype._getItemLength=function(a){switch(a){case"Hour":case"Month":return 12;case"Year":var b=this._owner.element.data("pickerMinYear"),c=this._owner.element.data("pickerMaxYear");return c-b+1;case"Day":return 31;case"Minute":return 60;case"AM":return 2}return-1},b.prototype._updateItemTransform=function(b,c){if(!(a.CoreUtility.IsIE8OrBelow()||0>c))for(var d=this._owner.element.data("picker"+b+"Array"),e=this._getItemLength(b),f="skew(0deg) scale(1.2, 1.2) translate(0px, 0px)",g="skew(-5deg) scale(0.9, 0.9) translate(0px, 0px)",h="skew(-10deg) scale(0.7, 0.7) translate(0px, 0px)",i="skew(-15deg) scale(0.5, 0.5) translate(0px, 0px)",j=0;e>j;j++)j==c-3?this._setCssTransform(d[j],"",i,!0):j==c-2?this._setCssTransform(d[j],"",h,!0):j==c-1?this._setCssTransform(d[j],"",g,!0):j==c?this._setCssTransform(d[j],"",f,!0):j==c+1?this._setCssTransform(d[j],"",g,!0):j==c+2?this._setCssTransform(d[j],"",h,!0):j==c+3?this._setCssTransform(d[j],"",i,!0):this._setCssTransform(d[j],"","",!0)},b.prototype._updateDayPickerMaxCount=function(){var b=this._owner.element.data("pickerYear"),c=this._owner.element.data("pickerMonth"),d=this._owner.element.data("pickerDay"),e=a.DateTimeInfo.DaysInMonth(b,c);this._owner.element.data("pickerDayMaxCount",e);for(var f=this._owner.element.data("pickerDayArray"),g=29;31>=g;g++){var h=g>e?"none":"";f[g-1].css("display",h)}if(d>e){this._owner.element.data("divDayMask");d=e,this._updateItemTransform("Day",d-1),this._scrollTheView("Day",d-1,null,!1),this._owner.element.data("pickerDay",d)}},b.prototype._getTouchPositionArray=function(a){for(var b={},c=this._owner.element.data("itemHeight"),d=this._getItemLength(a),e=0;d>e;e++)b[e]=(2-e)*c;return b},b.prototype._getItemIndexByPosition=function(a,b){var c=this._getTouchPositionArray(a),d=this._getItemLength(a);"Day"==a&&d>this._owner.element.data("pickerDayMaxCount")&&(d=this._owner.element.data("pickerDayMaxCount"));for(var e=-1,f=0;d>f;f++){if(0==f){if(b>c[f]){e=0;break}}else if(b<=c[f-1]&&b>=c[f]){var g=c[f-1]-b,h=b-c[f];e=g>h?f:f-1;break}if(f==d-1&&b<c[f]){e=f;break}}return e},b.prototype._hideItemInIE7=function(b,c){if(a.CoreUtility.IsIE7()){var d=this._owner.element.data("picker"+b+"LastItemIndex"),e=this._getItemIndexByPosition(b,c);if(e!=d){for(var f=e-2,g=e+2,h=this._owner.element.data("picker"+b+"Array"),i=this._getItemLength(b),j=0;i>j;j++)j>=f&&g>=j?h[j].css("visibility",""):h[j].css("visibility","hidden");this._owner.element.data("picker"+b+"LastItemIndex",e)}}},b.prototype._scrollTheView=function(a,b,c,d){var e=this._owner.element.data("itemHeight"),f=(2-b)*e;if(this._owner.element.data("picker"+a+"ScrollTo",f),1==d){var g=this._owner.element.data("div"+a+"Mask"),h=f;this._setCssTransform(g,"",h,!1),this._hideItemInIE7(a,h),this._owner.element.data("picker"+a+"ScrollCurrent",h)}else this._scrollPicker(a)},b.prototype._scrollPicker=function(a){var b=this._owner.element.data("div"+a+"Mask"),c=this._owner.element.data("picker"+a+"ScrollTo"),d=this._owner.element.data("picker"+a+"ScrollCurrent"),e=this._owner.element.data("picker"+a+"ScrollDelay");if(void 0==d&&(d=c,this._setCssTransform(b,"",d,!1),this._owner.element.data("picker"+a+"ScrollCurrent",d)),c==d||void 0==d)return!1;d+=c>d?1:-1;this._setCssTransform(b,"",d,!1),this._hideItemInIE7(a,d),this._owner.element.data("picker"+a+"ScrollCurrent",d);var f=this;return setTimeout(function(){f._scrollPicker(a)},e),!0},b.prototype._scrollTheViewByTouch=function(a,b){this._owner.element.data("itemHeight"),this._owner.element.data("picker"+a+"ScrollCurrent"),this._owner.element.data("picker"+a+"ScrollTo");this._owner.element.data("picker"+a+"ScrollTo",b),this._scrollPickerByTouch(a)},b.prototype._scrollPickerByTouch=function(a){var b=this._owner.element.data("div"+a+"Mask"),c=this._owner.element.data("picker"+a+"ScrollTo"),d=this._owner.element.data("picker"+a+"ScrollCurrent");if(void 0==d&&(d=c,this._setCssTransform(b,"",d,!1),this._owner.element.data("picker"+a+"ScrollCurrent",d)),c==d){if(this._owner.element.data("picker"+a+"ScrollRate",1),this._owner.element.data("picker"+a+"ScrollDelay",5),this._owner.element.data("touchQuickScroll",!1),"Month"==a||"Year"==a)this._updateDayPickerMaxCount();else if("Hour"==a){var e=this._getItemIndexByPosition(a,d),f=this._owner.element.data("pickerAM");11==e?0==f&&(f=1,this._updateItemTransform("AM",f),this._scrollTheView("AM",f,0,!1),this._owner.element.data("pickerAM",f)):1==f&&(f=0,this._updateItemTransform("AM",f),this._scrollTheView("AM",f,1,!1),this._owner.element.data("pickerAM",f))}return!1}var g=this._owner.element.data("itemHeight"),h=this._owner.element.data("picker"+a+"ScrollDelay"),i=this._owner.element.data("picker"+a+"ScrollRate"),j=Math.abs(c-d),k=j>i?i:j;1==this._owner.element.data("touchQuickScroll")&&(g>j?h=80:2*g>j?h=50:5*g>j?h=30:8*g>j?h=20:10*g>j&&(h=10),this._owner.element.data("picker"+a+"ScrollDelay",h)),d+=c>d?k:-1*k,this._setCssTransform(b,"",d,!1),this._owner.element.data("picker"+a+"ScrollCurrent",d);var e=this._getItemIndexByPosition(a,d),l=this._owner.element.data("picker"+a+"LastItemIndex");e!=l&&this._updateItemTransform(a,e),this._owner.element.data("picker"+a+"LastItemIndex",l);var m=this;return setTimeout(function(){m._scrollPickerByTouch(a)},h),!0},b.prototype._touchStart=function(a,b){var c=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],d=c.clientY;this._owner.element.data("touch"+b+"StartY",d),this._owner.element.data("touch"+b+"BaseY",this._owner.element.data("picker"+b+"ScrollCurrent")),this._owner.element.data("touch"+b+"Started",!0),this._owner.element.data("touchStartTime",new Date);var e=this._owner.element.data("picker"+b+"ScrollCurrent");this._owner.element.data("picker"+b+"ScrollTo",e)},b.prototype._touchMove=function(a,b){if(this._owner._allowEdit()&&1==this._owner.element.data("touch"+b+"Started")){var c=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],d=c.clientY,e=this._owner.element.data("touch"+b+"StartY"),f=this._owner.element.data("touch"+b+"BaseY"),g=f+d-e;this._scrollTheViewByTouch(b,g)}},b.prototype._touchEnd=function(a,b){var c=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],d=this._owner.element.data("touch"+b+"StartY"),e=this._owner.element.data("touch"+b+"BaseY"),f=c.clientY-d,g=e+f;if(Math.abs(f)<10){var h=this._owner.element.data("picker"+b+"ScrollCurrent");return this._owner.element.data("picker"+b+"ScrollTo",h),void this._adjustTouchPosition(b,h)}this._owner.element.data("touch"+b+"StartY",-1),this._owner.element.data("touch"+b+"BaseY",-1),this._owner.element.data("touch"+b+"Started",!1);var i=new Date,j=i-this._owner.element.data("touchStartTime");if(200>j){var k=5*this._owner.element.data("itemHeight"),l=0>f?-1:1;f=4*f,f=Math.abs(f)<k?l*k:f,g+=f,this._owner.element.data("touchQuickScroll",!0),this._owner.element.data("picker"+b+"ScrollRate",3)}this._adjustTouchPosition(b,g)},b.prototype._yearMouseWheel=function(a,b){if(this._owner._allowEdit()&&!isNaN(b)){var c=this._owner.element.data("pickerMinYear"),d=this._owner.element.data("pickerMaxYear"),e=this._owner.element.data("pickerYear"),f=this._owner.element.data("pickerYear");e-=b,e=c>e?c:e,e=e>d?d:e,this._updateItemTransform("Year",e-c),this._scrollTheView("Year",e-c,f-c,!1),this._owner.element.data("pickerYear",e),this._updateDayPickerMaxCount(),a.preventDefault&&a.preventDefault()}},b.prototype._monthMouseWheel=function(a,b){if(this._owner._allowEdit()&&!isNaN(b)){var c=this._owner.element.data("pickerMonth"),d=this._owner.element.data("pickerMonth");c-=b,c=1>c?1:c,c=c>12?12:c,this._updateItemTransform("Month",c-1),this._scrollTheView("Month",c-1,d,!1),this._owner.element.data("pickerMonth",c),this._updateDayPickerMaxCount(),a.preventDefault&&a.preventDefault()}},b.prototype._dayMouseWheel=function(a,b){if(this._owner._allowEdit()&&!isNaN(b)){var c=this._owner.element.data("pickerDayMaxCount"),d=this._owner.element.data("pickerDay"),e=this._owner.element.data("pickerDay");e-=b,e=1>e?1:e,e=e>c?c:e,this._updateItemTransform("Day",e-1),this._scrollTheView("Day",e-1,d-1,!1),this._owner.element.data("pickerDay",e),a.preventDefault&&a.preventDefault()}},b.prototype._hourMouseWheel=function(a,b){if(this._owner._allowEdit()&&!isNaN(b)){var c=this._owner.element.data("pickerHour"),d=this._owner.element.data("pickerHour"),e=d;d-=b,d=1>d?1:d,d=d>12?12:d;var f=this._owner.element.data("pickerAM");12==d?0==f&&(f=1,this._updateItemTransform("AM",f),this._scrollTheView("AM",f,0,!1),this._owner.element.data("pickerAM",f)):12==e&&1==f&&(f=0,this._updateItemTransform("AM",f),this._scrollTheView("AM",f,1,!1),this._owner.element.data("pickerAM",f)),this._updateItemTransform("Hour",d-1),this._scrollTheView("Hour",d-1,c-1,!1),this._owner.element.data("pickerHour",d),a.preventDefault&&a.preventDefault()}},b.prototype._minuteMouseWheel=function(a,b){if(this._owner._allowEdit()&&!isNaN(b)){var c=this._owner.element.data("pickerMinute"),d=this._owner.element.data("pickerMinute");d-=b,d=0>d?0:d,d=d>59?59:d,this._updateItemTransform("Minute",d),this._scrollTheView("Minute",d,c,!1),this._owner.element.data("pickerMinute",d),a.preventDefault&&a.preventDefault()}},b.prototype._amMouseWheel=function(a,b){if(this._owner._allowEdit()&&!isNaN(b)){var c=$(a.currentTarget).data("pickerAM"),d=this._owner.element.data("pickerAM");d-=b,d=0>d?0:d,d=d>1?1:d,this._updateItemTransform("AM",d),this._scrollTheView("AM",d,c,!1),this._owner.element.data("pickerAM",d),a.preventDefault&&a.preventDefault()}},b.prototype._createDivElement=function(a,b){var c=$("<div/>").appendTo(a).css({"width":b+"px","display":"block","left":"","top":"","position":""}).bind("touchstart",function(a){a.preventDefault()}).bind("touchmove",function(a){a.preventDefault()});return c},b.prototype._createDivIndicatiorElement=function(a,b,c,d){var e=$("<div/>").appendTo(a).css({"height":b,"opacity":"0.5","lineHeight":b,"margin":"0px","cursor":"default"}).attr("class","ui-state-active");return this._setCssTransform(e,c,d,!1),e},b.prototype._createIndicatiorElement=function(a,b,c,d){var e=$("<div/>").appendTo(a).css({"height":b,"opacity":"0.5","lineHeight":b,"border-width":"0px","cursor":"default"}).attr("class","ui-widget-content");return this._setCssTransform(e,c,d,!1),e},b.prototype._setCssTransform=function(b,c,d,e){var f=d;e||(f="translate(0, "+c+d+"px)"),b.css("position",""),b.css("top",""),a.CoreUtility.IsIE8OrBelow()?(b.css("position","relative"),b.css("top",c+d+"px")):a.CoreUtility.IsIE9()?b.css("-ms-transform",f):b.css("transform",f)},b.prototype._createTableElement=function(a,b,c,d){var e=$("<table/>").appendTo(a).css({"width":"100%","height":b+"px"}).attr({"cellspacing":"0px","cellpadding":"0px"});return this._setCssTransform(e,c,d,!1),e},b.prototype._createItemElement=function(a,b,c,d){var e=$("<div/>").appendTo(b).css({"height":c,"lineHeight":c,"cursor":"default"}).html(d).data("rollValue",a);return e},b.prototype._createPickerDivElement=function(a,b){var c=$("<div/>").appendTo(a).css({"height":b,"border":"0px","text-align":"center","overflow":"hidden","background":"transparent"});return c},b.prototype._createMaskElement=function(a,b){var c=$("<div/>").appendTo(a).css({"height":b});return c},b}();a.wijinputdateroller=b}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=a.getKeyCodeEnum(),e=function(a){function e(){a.apply(this,arguments)}return __extends(e,a),e.prototype._create=function(){b.CoreUtility.chrome&&this.element.attr("type","text"),this._wijinputdateroller=null,"undefined"!=typeof b.wijinputdateroller&&(this._wijinputdateroller=new b.wijinputdateroller(this)),a.prototype._create.call(this)},e.prototype._createTextProvider=function(){this._textProvider=new g(this,this.options.dateFormat,this.options.displayFormat)},e.prototype._strToDate=function(a){return this._textProvider.parseDate(a)},e.prototype._beginUpdate=function(){var c,d=null;if(a.prototype._beginUpdate.call(this),this.options.minDate&&"string"==typeof this.options.minDate){var e=new Date(this.options.minDate);isNaN(e.getTime())&&(e=this._strToDate(this.options.minDate)),this.options.minDate=e}if(this.options.maxDate&&"string"==typeof this.options.maxDate){var f=new Date(this.options.maxDate);isNaN(f.getTime())&&(f=this._strToDate(this.options.maxDate)),this.options.maxDate=f}void 0===this.options.date?this.element.data("elementValue")&&!b.CoreUtility.IsFireFox4OrLater()&&(c=this.element.data("elementValue")):"string"==typeof this.options.date?c=this.options.date:d=this.options.date,void 0===this.options.date&&(this.options.date=new Date),c&&(d=new Date(c),isNaN(d.getTime())&&(d=this._strToDate(c))),null==d&&(d=this.options.date),this._safeSetDate(d);var g=this._getCulture();null!=g&&(""==this.options.amDesignator&&(this.options.amDesignator=this._getStandardAMPM("AM")),""==this.options.pmDesignator&&(this.options.pmDesignator=this._getStandardAMPM("PM"))),this.element.data({"defaultDate":null===d?d:new Date(d.getTime()),"preDate":null===d?d:new Date(d.getTime())}),this._resetTimeStamp(),this._initPicker(),this.element.addClass(this.options.wijCSS.wijinputdate).attr({"aria-valuemin":new Date(1900,1,1),"aria-valuemax":new Date(2099,1,1),"aria-valuenow":this.options.date})},e.prototype._endUpdate=function(){var c=this;a.prototype._endUpdate.call(this),this.element.bind("click.wijinput",function(){if(c._allowEdit()){var a=c.options.activeField,d=c.element.wijtextselection();c._updateText();try{c.element.wijtextselection(d)}catch(e){}1!=c.element.data("ignoreHighLight")&&c._highLightCursor(),b.CoreUtility.chrome&&1==c.element.data("needResoteActiveField")&&c._setOption("activeField",a),c.element.data("ignoreHighLight",!1)}})},e.prototype._getInnerNullText=function(){return null!=this.options.placeholder?this.options.placeholder:this.options.showNullText?this.options.nullText:null},e.prototype._getInnerAmDesignator=function(){return""==this.options.amDesignator?this._getStandardAMPM("AM"):this.options.amDesignator},e.prototype._getInnerPmDesignator=function(){return""==this.options.pmDesignator?this._getStandardAMPM("PM"):this.options.pmDesignator},e.prototype._getInnerIncrement=function(){var a=Number(this.options.increment);return isNaN(a)&&(a=1),a},e.prototype._getAllowSpinLoop=function(){return!!this.options.allowSpinLoop},e.prototype._getRealMaxDate=function(){return this.options.maxDate?this.options.maxDate:new Date(9999,11,31,23,59,59)},e.prototype._getRealMinDate=function(){if(this.options.minDate)return this.options.minDate;var a=new Date(1,0,1,0,0,0);return a.setFullYear(1),a},e.prototype._getRealEraMaxDate=function(){return this.options.maxDate?b.DateTimeInfo.GetEraMax()<this.options.maxDate?b.DateTimeInfo.GetEraMax():this.options.maxDate:b.DateTimeInfo.GetEraMax()},e.prototype._getRealEraMinDate=function(){return this.options.minDate?b.DateTimeInfo.GetEraMin()>this.options.minDate?b.DateTimeInfo.GetEraMin():this.options.minDate:b.DateTimeInfo.GetEraMin()},e.prototype._isEraFormatExist=function(){return this._textProvider._isEraFormatExist()},e.prototype._checkDate=function(){var a=this.options.date,c=this._checkRange(this.options.date);b.DateTimeInfo.Equal(a,c)||(this._setOption("date",c),this._trigger("valueBoundsExceeded",null))},e.prototype._checkRange=function(a){return a&&(this.options.minDate&&a<this.options.minDate&&(a=new Date(Math.max(this.options.minDate,a))),this.options.maxDate&&a>this.options.maxDate&&(a=new Date(Math.min(this.options.maxDate,a)))),a},e.prototype._safeSetDate=function(a,b){var c=a;return b||(a=this._checkRange(a)),isNaN(a)&&(a=c),this.options.date=a,!0},e.prototype._safeGetDate=function(a){var b=this.options.date;return null==b&&(b=new Date),a||(b=this._checkRange(b)),b},e.prototype._setOption=function(b,c){switch(a.prototype._setOption.call(this,b,c),b){case"pickers":this._reInitPicker();break;case"minDate":case"maxDate":if("string"==typeof this.options[b]){var d=this._strToDate(c);d=null===d?new Date(c):d,this.options[b]=d}var e=this.options.date;null===e&&(e=new Date);var f=this._getRealMinDate(),g=this._getRealMaxDate();(f>e||e>g)&&this._safeSetDate(e),this._updateText(),this._highLightField();break;case"date":if(c){if("string"==typeof c){var h=this._strToDate(c);c=null===h?new Date(c):h}else c="object"==typeof c?new Date(c.getTime()):new Date(c);isNaN(c)&&(c=new Date)}this._safeSetDate(c),this._updateText(),this._highLightField();break;case"midnightAs0":case"hour12As0":case"amDesignator":case"pmDesignator":this._updateText(),this._highLightField();break;case"culture":case"cultureCalendar":this._textProvider._setFormat(this.options.dateFormat);var i=""==this.options.displayFormat?this.options.dateFormat:this.options.displayFormat;this._textProvider._setDisplayFormat(i),this.options.amDesignator=this._getStandardAMPM("AM"),this.options.pmDesignator=this._getStandardAMPM("PM"),this._updateText();var j=this.element.data("calendar");j&&j.wijcalendar("option",b,c),this._reInitPicker();break;case"dateFormat":if(this._textProvider._setFormat(this.options.dateFormat),""==this.options.displayFormat&&this._textProvider._setDisplayFormat(this.options.dateFormat),this._isEraFormatExist()&&null!=this.options.date){var k=this._getRealEraMinDate(),l=this._getRealEraMaxDate();this.options.date<k?this._setOption("date",k):this.options.date>l&&this._setOption("date",l)}this._updateText();var j=this.element.data("calendar");j&&j.wijcalendar("option",b,c),this._reInitPicker();break;case"displayFormat":var i=""==this.options.displayFormat?this.options.dateFormat:this.options.displayFormat;this._textProvider._setDisplayFormat(i),this._updateText();break;case"activeField":c=Math.min(c,this._textProvider.getFieldCount()-1),c=Math.max(c,0),this.options.activeField=c,this._checkDate(),1!=this.element.data("ignoreHighLight")&&this._highLightField(),this._resetTimeStamp();break;case"nextTooltip":case"prevTooltip":case"titleFormat":case"toolTipFormat":var j=this.element.data("calendar",j);j&&j.wijcalendar("option",b,c);break;case"comboItems":this._reInitPicker()}},e.prototype._setData=function(a){this.option("date",a)},e.prototype._resetData=function(){var a=this.element.data("defaultDate");void 0===a||null===a?null!==this.options.date&&(a=this.element.data("elementValue"),void 0!==a&&null!==a&&""!==a?this.setText(a):this._setData(null)):this._setData(a)},e.prototype._resetTimeStamp=function(){this.element.data("cursorPos",0),this.element.data("timeStamp",new Date("1900/1/1")),this.element.data("lastInputChar","")},e.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(a.prototype._showNullText.call(this)&&this.isDateNull())return"";var b=this._textProvider.toString();return b===this.options.nullText?"":b},e.prototype._highLightAllField=function(){if(this.isFocused()){var a=this._textProvider.getAllRange();if(a)try{this.element.wijtextselection(a)}catch(b){}}},e.prototype._highLightField=function(a){if("undefined"==typeof a&&(a=this.options.activeField),this.isFocused()){var b=this._textProvider.getFieldRange(a);if(b)try{this.element.wijtextselection(b)}catch(c){}}},e.prototype._highLightCursor=function(a){if(!this._isNullText()){void 0===a&&(a=Math.max(0,this.element.wijtextselection().start));var b=this._textProvider.getCursorField(a);0>b||this._setOption("activeField",b)}},e.prototype._toNextField=function(){this._setOption("activeField",this.options.activeField+1)},e.prototype._toPrevField=function(){this._setOption("activeField",this.options.activeField-1)},e.prototype._toFirstField=function(){this._setOption("activeField",0)},e.prototype._toLastField=function(){this._setOption("activeField",this._textProvider.getFieldCount())},e.prototype._clearField=function(a){"undefined"==typeof a&&(a=this.options.activeField);var c,d=this._textProvider.getFieldRange(a),e=this;d&&(c=new b.wijInputResult,this._textProvider.removeAt(d.start,d.end,c),this._updateText(),window.setTimeout(function(){e._highLightField()},1))},e.prototype.spinUp=function(){this._doSpin(!0,!1)},e.prototype.spinDown=function(){this._doSpin(!1,!1)},e.prototype.drop=function(){a.prototype._onTriggerClicked.call(this)},e.prototype.focus=function(){a.prototype.focus.call(this),this._addState("focus",this.outerDiv),this._updateText(),"all"==this.options.highlightText?this._highLightAllField():this._highLightField()},e.prototype.isDateNull=function(){return null===this.options.date||void 0===this.options.date},e.prototype._min=function(a,b){return void 0==b?a:b>a?a:b},e.prototype._max=function(a,b){return void 0==b?a:a>b?a:b},e.prototype._allowEdit=function(){return!this.option("disableUserInput")},e.prototype._onFocus=function(c){var d=this;if(a.prototype._onFocus.call(this,c),this._allowEdit()&&(this._updateText(),1!=this.element.data("IsInSelectTextMethod"))){if(b.CoreUtility.chrome){var e=this;e.element.data("needResoteActiveField",!0),window.setTimeout(function(){e.element.data("needResoteActiveField",!1),"all"==e.options.highlightText?e._highLightAllField():e._highLightField()},200)}else"all"==this.options.highlightText?(this._highLightAllField(),this.element.data("ignoreHighLight",!0)):this._highLightField();b.CoreUtility.IPad&&(this._ipadRefreshTimer=setInterval(function(){1!=d.element.data("ignoreHighLight")&&d._highLightCursor()},400))}},e.prototype._simulate=function(c){var d=null;if("string"==typeof c)d=c;else{var e=this.element.wijtextselection(),f=this.element.data("lastSelection").start,g=e.end;g>=f&&(d=this.element.val().substring(f,g))}for(var h=0;h<b.DateTimeInfo.GetEraCount();h++)if(d.toLowerCase()===b.DateTimeInfo.GetEraShortNames()[h].toLowerCase()||d.toLowerCase()===b.DateTimeInfo.GetEraAbbreviations()[h].toLowerCase()||d.toLowerCase()===b.DateTimeInfo.GetEraSymbols()[h].toLowerCase()||d.toLowerCase()===b.DateTimeInfo.GetEraNames()[h].toLowerCase()){d=b.DateTimeInfo.GetEraShortNames()[h].toLowerCase();break}a.prototype._simulate.call(this,d)},e.prototype._doSpin=function(a,b){var c=this;if(!this._allowEdit())return!1;if(b&&this.element.data("breakSpinner"))return!1;if(a?this._trigger("spinUp",null):this._trigger("spinDown",null),null==this.options.date)return void this._setDefaultDate(a);var d=!1;if(d=a?this._textProvider.incEnumPart():this._textProvider.decEnumPart(),d&&(this._updateText(),this._highLightField()),b&&!this.element.data("breakSpinner")){var e=window.setTimeout(function(){return c._doSpin(a,!0)},this._calcSpinInterval());this.element.data("spintimer",e)}return!0},e.prototype._setDefaultDate=function(a){a?this.options.date=this._isEraFormatExist()?this._getRealEraMinDate():this._getRealMinDate():this.options.date=this._isEraFormatExist()?this._getRealEraMaxDate():this._getRealMaxDate(),this._updateText(),this._highLightField()},e.prototype._onChange=function(){},e.prototype._afterFocused=function(){this._isNullText()&&this._doFocus()},e.prototype._onBlur=function(c){a.prototype._onBlur.call(this,c),this._checkDate(),this._removeState("focus",this.outerDiv),this._updateText(),b.CoreUtility.IPad&&window.clearInterval(this._ipadRefreshTimer)},e.prototype._keyDownPreview=function(c){if(a.prototype._keyDownPreview.call(this,c))return!0;var e,f=c.keyCode||c.which;switch(f){case d.UP:case d.DOWN:if(c.altKey)return this._onTriggerClicked(),!0;if("List"!=this.element.data("pickerCurrentTab"))return this._doSpin(f==d.UP,!1),this._stopEvent(c),!0;break;case d.LEFT:return 0!=this.options.activeField||"left"!=this.options.blurOnLeftRightKey.toLowerCase()&&"both"!=this.options.blurOnLeftRightKey.toLowerCase()?this._toPrevField():(b.CoreUtility.MoveFocus(this.element.get(0),!1),this._trigger("keyExit")),!0;case d.RIGHT:return this.options.activeField!=this._textProvider.getFieldCount()-1||"right"!=this.options.blurOnLeftRightKey.toLowerCase()&&"both"!=this.options.blurOnLeftRightKey.toLowerCase()?this._toNextField():(b.CoreUtility.MoveFocus(this.element.get(0),!0),this._trigger("keyExit")),!0;case d.ENTER:if(this._wasPopupShowing)return"Calendar"==this.element.data("pickerCurrentTab")?null==this.options.date&&this._setOption("date",new Date):"List"==this.element.data("pickerCurrentTab")?this._processKeyForDropDownList(c):this._okButtonMouseDown(null,null),this._hidePopup(),!0;this.options.hideEnter&&a.prototype._stopEvent.call(this,c);break;case d.TAB:if("field"!==this.options.tabAction||"field"!==this.options.highlightText){this._trigger("keyExit");break}if(e=this.element.wijtextselection(),e&&e.end-e.start!==this.element.val().length){if(c.shiftKey){if(!(this.options.activeField>0)){this._trigger("keyExit");break}this._toPrevField()}else{if(!(this.options.activeField<this._textProvider.getFieldCount()-1)){this._trigger("keyExit");break}this._toNextField()}return!0}break;case d.SPACE:case 188:case 190:case 110:case 191:if(c.shiftKey){if(this.options.activeField>0)return this._toPrevField(),!0}else if(this.options.activeField<this._textProvider.getFieldCount()-1)return this._toNextField(),!0;break;case d.HOME:return c.ctrlKey?this._setOption("date",new Date):this._toFirstField(),!0;case d.END:return c.ctrlKey?this._processClearButton():this._toLastField(),!0;case d.BACKSPACE:case d.DELETE:if(this._allowEdit())return this._processDeleteKey(),!0}return!1},e.prototype._processDeleteKey=function(){if(null!=this.options.date){var a=this.element.wijtextselection();if(a.end-a.start===this.element.val().length){var b=this._isEraFormatExist()?this._getRealEraMinDate():this._getRealMinDate();if(this.options.date>b)return void this._setOption("date",b)}else{var c=this.options.activeField,d=this._textProvider.getFiledText(c);this._clearField();var e=this._textProvider.getFiledText(c);if(d!=e)return}this._processClearButton()}},e.prototype._autoMoveToNextField=function(a,b){this.options.autoNextField&&this._textProvider.needToMove(this.options.activeField,a,b)&&this._toNextField()},e.prototype._processClearButton=function(){this._allowEdit()?this._setOption("date",null):this._updateText()},e.prototype._autoMoveToNextControl=function(a,c,d){this.options.blurOnLastChar&&d===this._textProvider.getFieldCount()-1&&this._textProvider.needToMove(d,a,c)&&(b.CoreUtility.MoveFocus(this.element.get(0),!0),this._trigger("keyExit"))},e.prototype._keyPressPreview=function(a){var b,c,e,f,g,h,i,j,k,l,m=a.keyCode||a.which;if(m===d.ENTER)return this.isDateNull()&&this._setOption("date",new Date),!1;if(b=this._textProvider.getFieldRange(this.options.activeField)){if(m===d.TAB)return!0;if(m===d.SPACE)return this._stopEvent(a),!0;if(c=String.fromCharCode(m),e=this._textProvider.isFieldSep(c,this.options.activeField))return this._toNextField(),this._stopEvent(a),!0;f=this.element.data("cursorPos"),g=new Date,i=this.element.data("timeStamp"),l=this.element.data("lastInput"),h=g.getTime()-i.getTime()>this.options.keyDelay;var n=c;h?f=0:l&&(n=l+n),this.element.data({"timeStamp":g,"lastInput":n}),j=b.start+f,this.element.data("cursorPos",++f);var o=null==this.options.date;k=this._textProvider.addToField(n,this.options.activeField,j);var p=this.options.activeField;return k?(this._updateText(),this._autoMoveToNextField(f,c),this._highLightField(),this._autoMoveToNextControl(f,c,p)):(o&&this._setOption("date",null),this._resetTimeStamp(),this._fireIvalidInputEvent()),p!=this.options.activeField?this.element.data("lastInputChar",""):this.element.data("lastInputChar",c),this._stopEvent(a),!0}return!1},e.prototype._raiseDataChanged=function(){var a=this.options.date,b=this.element.data("preDate");this.element.data("preDate",a?new Date(a.getTime()):null),(!b&&a||b&&!a||b&&a&&b.getTime()!==a.getTime())&&(this._popupVisible()&&this._syncCalendar(),this.element.attr("aria-valuenow",a),this._trigger("dateChanged",null,{"date":a}))},e.prototype._isMinDate=function(a){return 1===a.getFullYear()&&0===a.getMonth()&&1===a.getDate()},e.prototype._reInitPicker=function(){this._destroyPicker(),this._initPicker()},e.prototype._destroy=function(){a.prototype._destroy.call(this),this._destroyPicker()},e.prototype._destroyPicker=function(){var a=this.element.data("pickers");void 0!=a&&(this.element.data("pickers",null),this.element.data("calendar",null),this.element.data("datePicker",null),this.element.data("timePicker",null),this._comboDiv=void 0)},e.prototype._initPicker=function(){var a=this,d=this.element.data("pickers");if(void 0==d){var e=this;this._initPickerData();var f=this._getPickerCount(),g=this.element.data("pickerWidth"),h=this.element.data("pickerHeight"),i=this.element.data("pickerAreaHeight");f>1&&(h+=8,i+=8);var j=f>1?h:i;d=c("<table/>").appendTo(document.body).attr({"class":"ui-widget-content ui-corner-all","borderWidth":"0px","cellspacing":"0px","cellpadding":"0px","cursor":"default"}).css({"font-size":"12px"}).mouseup(function(a){a.stopPropagation()});var k=c("<tr/>").appendTo(d),l=c("<tr/>").appendTo(d),m=c("<td/>").appendTo(k).css({"width":"100%","height":"100%"}),n=c("<td/>").appendTo(l).attr("align","center").css({"width":"100%","height":"30px","display":"none"}),o=c("<input type='button'/>").appendTo(n).attr({"class":"ui-state-active ui-widget","value":"OK"}).css({"width":"80px","height":"26px","margin":"1px","text-align":"center","cursor":"pointer","visibility":"hidden"}).mousedown(function(a){e._okButtonMouseDown(a)}),p=c("<div/>").appendTo(m).css({"width":"100%","height":"100%","padding":"0px","margin":"0px","borderWidth":"0px","overflow":"hidden"}),q=c("<ul/>").css({"line-height":"1px","font-size":"12px"});f>1&&q.appendTo(p);var r="";if(this._isCalendarPickerShown()){f>1?this._addPickerTab(q,"Calendar","#calendarDiv"):b.CoreUtility.IsIE9()&&(m.css({"width":""}),p.css({"width":""})),this._initCalendarPicker();var s=this.element.data("calendar");this._addPickerEditor(p,s,"calendarDiv"),
r="Calendar"}if(this._isListPickerShown()&&(f>1&&this._addPickerTab(q,"List","#listDiv"),this._initListPicker(),this._addPickerEditor(p,this._comboDiv,"listDiv"),r=""==r?"List":r),this._isDatePickerShown()){f>1&&this._addPickerTab(q,"Date","#dateDiv"),this._wijinputdateroller._initDatePicker();var t=this.element.data("datePicker");this._addPickerEditor(p,t,"dateDiv"),r=""==r?"Date":r}if(this._isTimePickerShown()){f>1&&this._addPickerTab(q,"Time","#timeDiv"),this._wijinputdateroller._initTimePicker();var u=this.element.data("timePicker");this._addPickerEditor(p,u,"timeDiv"),r=""==r?"Time":r}"Calendar"==r?d.css({"width":g+"px","height":"","font-size":""}):("Date"==r||"Time"==r)&&(n.css({"display":""}),d.css({"width":g+"px","height":h+"px","font-size":"12px"}),p.css({"height":j+"px"})),this.element.data("pickerCurrentTab",r);var e=this;p.wijtabs({"select":function(a,c){var f=c.tab.outerText||c.tab.text;if(n.css({"display":"none"}),e.element.data("pickerCurrentTab",f),"Calendar"==f)b.CoreUtility.IPad||e.focus(),d.css({"width":g+"px","height":"","font-size":""}),p.css({"height":"100%"});else if("List"==f){var i=e._getListPickerWidth();e._comboDiv.wijlist("option","width",i),d.css({"width":i,"height":"","font-size":""}),p.css({"height":"100%"}),e._comboDiv.wijlist("renderList"),b.CoreUtility.IPad||e._comboDiv.focus()}else b.CoreUtility.IPad||e.focus(),("Time"==f||"Date"==f)&&(n.css({"display":""}),d.css({"width":g+"px","height":h+"px","font-size":"12px"}),p.css({"height":j+"px"}))}}),d.wijpopup({"autoHide":!0,"hidden":function(){a._trigger("dropDownClose"),a._wasPopupShowing=!1},"shown":function(){a._trigger("dropDownOpen"),a._wasPopupShowing=!0}}),this.element.data("pickers",d),this.element.data("divPickers",p),this.element.data("divOK",o)}},e.prototype._initPickerData=function(){var a=70,b=32,c=26,d=30,e=150,f=100,g=235,h=242,i=220,j=this._getPickerCount(),k=j*a,l=f;if(k=e>k?e:k,this._isCalendarPickerShown()&&(k=g>k?g:k,l=h>l?h:l),this._isListPickerShown()){var m=this._getcomboItems();if(void 0!=m){var n=m.length*c;l=n>l?n:l}}if(this._isDatePickerShown()){k=i>k?i:k,l=i>l?i:l;var o=this._wijinputdateroller._getDatePickerMinYear(),p=this._wijinputdateroller._getDatePickerMaxYear(),q=this._wijinputdateroller._getDefaultDatePickerFormat(),r=void 0!=this.options.pickers.datePicker.format?this.options.pickers.datePicker.format:q,s=r.split(",");3!=s.length&&(s=q.split(","),this.options.pickers.datePicker.format=q);var t=this._wijinputdateroller._getRollFormat(s,"y"),u=this._wijinputdateroller._getRollFormat(s,"M"),v=this._wijinputdateroller._getRollFormat(s,"d");this._wijinputdateroller._isValidatePickerFormat(t)&&this._wijinputdateroller._isValidatePickerFormat(u)&&this._wijinputdateroller._isValidatePickerFormat(v)||(s=q.split(","),t=this._wijinputdateroller._getRollFormat(s,"y"),u=this._wijinputdateroller._getRollFormat(s,"M"),v=this._wijinputdateroller._getRollFormat(s,"d"),this.options.pickers.datePicker.format=q),this.element.data("pickerDateYearFormat",t),this.element.data("pickerDateMonthFormat",u),this.element.data("pickerDateDayFormat",v),this.element.data("pickerMinYear",o),this.element.data("pickerMaxYear",p),this.element.data("pickerDateFormat",s)}if(this._isTimePickerShown()){k=i>k?i:k,l=i>l?i:l;var w=this._wijinputdateroller._getDefaultTimePickerFormat(),x=void 0!=this.options.pickers.timePicker.format?this.options.pickers.timePicker.format:w,y=x.split(",");3!=y.length&&(y=w.split(","),this.options.pickers.timePicker.format=w);var z=this._wijinputdateroller._getRollFormat(y,"h"),A=this._wijinputdateroller._getRollFormat(y,"m"),B=this._wijinputdateroller._getRollFormat(y,"t");this._wijinputdateroller._isValidatePickerFormat(z)&&this._wijinputdateroller._isValidatePickerFormat(A)&&this._wijinputdateroller._isValidatePickerFormat(B)||(y=w.split(","),z=this._wijinputdateroller._getRollFormat(y,"h"),A=this._wijinputdateroller._getRollFormat(y,"m"),B=this._wijinputdateroller._getRollFormat(y,"t"),this.options.pickers.timePicker.format=w),this.element.data("pickerTimeHourFormat",z),this.element.data("pickerTimeMinuteFormat",A),this.element.data("pickerTimeAMFormat",B),this.element.data("pickerTimeFormat",y)}var C=void 0!=this.options.pickers.width?this.options.pickers.width:0,D=void 0!=this.options.pickers.height?this.options.pickers.height:0;C=k>C?k:C,D=l>D?l:D,D-=j>1?b:0;var E=D-d,F=Math.floor(E/5)+1,G=2*F,H=5*F+6,I=4*F-3,J=2*F+2,K=F;this.element.data("itemHeight",F),this.element.data("indicatorHeight",G),this.element.data("pickerWidth",C),this.element.data("pickerHeight",D),this.element.data("pickerAreaHeight",E),this.element.data("indicatorTranslateTop",H),this.element.data("indicatorTranslateDown",I),this.element.data("indicatorTranslateSelector",J),this.element.data("indicatorTranslateContent",K)},e.prototype._initListPicker=function(){var a=this;if(void 0===this._comboDiv){this._comboDiv=c("<div/>").css({"overflow":"hidden","display":"block","left":"","top":"","position":""});var d=this._normalize(this._getcomboItems());this._comboDiv.wijlist({"maxItemsCount":5,"autoSize":!0,"selected":function(b,c){a.options.disableUserInput||a._setData(c.item.value);var d=a.element.data("pickers");setTimeout(function(){try{void 0!=d&&d.wijpopup("hide")}catch(a){}},250),a._trySetFocus()}}),this._comboDiv.wijlist("setItems",d),this._comboDiv.wijlist("renderList"),b.CoreUtility.IsIE7()&&this._comboDiv.attr("align","left")}},e.prototype._initCalendarPicker=function(){var a=this,b=this.element.data("calendar");if(void 0==b){var d=c("<div/>");b=c(d),1===b.length&&(this.element.data("calendar",b),this.options.calendar=b,this.options.localization&&(this.options.nextTooltip=this.options.localization.nextTooltip,this.options.prevTooltip=this.options.localization.prevTooltip,this.options.titleFormat=this.options.localization.titleFormat,this.options.toolTipFormat=this.options.localization.toolTipFormat),b.wijcalendar({"popupMode":!0,"culture":this.options.culture,"cultureCalendar":this.options.cultureCalendar,"nextTooltip":this.options.nextTooltip||"Next","prevTooltip":this.options.prevTooltip||"Previous","titleFormat":this.options.titleFormat||"MMMM yyyy","toolTipFormat":this.options.toolTipFormat||"dddd, MMMM dd, yyyy","afterSlide":function(){null!=a.options.afterSlide&&a.options.afterSlide.call(a,null)},"selectedDatesChanged":function(){var c=b.wijcalendar("getSelectedDate"),d=a.option("date");a._wasPopupShowing=!1;var e=a.element.data("pickers");setTimeout(function(){try{void 0!=e&&e.wijpopup("hide")}catch(a){}},250),c&&(d&&(c.setHours(d.getHours()),c.setMinutes(d.getMinutes()),c.setSeconds(d.getSeconds()),c.setMilliseconds(d.getMilliseconds())),a._allowEdit()&&(a.option("date",c),a.selectText())),a._trySetFocus()}}),b.css({"display":"block","left":"","top":"","position":"","margin-bottom":"0px"}),this._syncCalendar(),this._updateCalendarPicker())}},e.prototype._updateCalendarPicker=function(){var a=this.element.data("calendar"),b=this.options.pickers;void 0!=a&&void 0!=b&&void 0!=b.calendar&&(void 0!=b.calendar.allowQuickPick&&a.wijcalendar("option","allowQuickPick",b.calendar.allowQuickPick),void 0!=b.calendar.navButtons&&a.wijcalendar("option","navButtons",b.calendar.navButtons),void 0!=b.calendar.nextTooltip&&a.wijcalendar("option","nextTooltip",b.calendar.nextTooltip),void 0!=b.calendar.prevTooltip&&a.wijcalendar("option","prevTooltip",b.calendar.prevTooltip),void 0!=b.calendar.showDayPadding&&a.wijcalendar("option","showDayPadding",b.calendar.showDayPadding),void 0!=b.calendar.showOtherMonthDays&&a.wijcalendar("option","showOtherMonthDays",b.calendar.showOtherMonthDays),void 0!=b.calendar.showTitle&&a.wijcalendar("option","showTitle",b.calendar.showTitle),void 0!=b.calendar.showWeekDays&&a.wijcalendar("option","showWeekDays",b.calendar.showWeekDays),void 0!=b.calendar.showWeekNumbers&&a.wijcalendar("option","showWeekNumbers",b.calendar.showWeekNumbers),void 0!=b.calendar.titleFormat&&a.wijcalendar("option","titleFormat",b.calendar.titleFormat),void 0!=b.calendar.toolTipFormat&&a.wijcalendar("option","toolTipFormat",b.calendar.toolTipFormat),void 0!=b.calendar.weekDayFormat&&a.wijcalendar("option","weekDayFormat",b.calendar.weekDayFormat))},e.prototype._okButtonMouseDown=function(a,b){var c=this.element.data("pickerYear"),d=this.element.data("pickerMonth")-1,e=this.element.data("pickerDay"),f=this.element.data("pickerHour"),g=this.element.data("pickerMinute"),h=this.element.data("pickerAM");12==f&&(f=0),1==h&&(f+=12);var i=this._getPickerValue();i.setFullYear(c),i.setMonth(d),i.setDate(e),i.setHours(f),i.setMinutes(g),this._wasPopupShowing=!1;var j=this.element.data("pickers");setTimeout(function(){if(void 0!=j)try{j.wijpopup("hide")}catch(a){}},250),this._allowEdit()&&(this.option("date",i),this.selectText()),this._trySetFocus()},e.prototype._getListPickerWidth=function(){var a=this._getcomboWidth(),b=this.element.data("pickerWidth"),c=void 0!=a?a:this.outerDiv.width();return b>c?b+"px":c+"px"},e.prototype._getPickerValue=function(){var a=this.options.date;return a=null==a?new Date:a},e.prototype._getStandardAMPM=function(a){var b=this._getCulture();if(b&&b.calendar){var c=b.calendars.standard[a];if(c)return c[0]}return a},e.prototype._syncCalendar=function(){var a=this.element.data("calendar");if(a){var b=this._safeGetDate();(null==b||this._isMinDate(b))&&(b=new Date),a.wijcalendar("option","displayDate",b),this.options.minDate&&a.wijcalendar("option","minDate",this.options.minDate),this.options.maxDate&&a.wijcalendar("option","maxDate",this.options.maxDate),a.wijcalendar("unSelectAll"),a.wijcalendar("selectDate",b),a.wijcalendar("refresh")}},e.prototype._showPopup=function(){this._isDatePickerNeedReInit()&&this._reInitPicker();var a=this.element.data("pickers");if(void 0==a)return!1;a.wijpopup("show",c.extend({},this.options.popupPosition,{"of":this.outerDiv}));var b=this._getPickerValue(),d=b.getHours();if(d>12?d-=12:0==d&&(d=12),this.element.data("pickerValue",b),this.element.data("pickerYear",b.getFullYear()),this.element.data("pickerMonth",b.getMonth()+1),this.element.data("pickerDay",b.getDate()),this.element.data("pickerHour",d),this.element.data("pickerMinute",b.getMinutes()),this.element.data("pickerAM",b.getHours()<12?0:1),this.element.data("divOK").css("visibility",""),this._isTimePickerShown()&&(this._wijinputdateroller._updateTimePicker(),a.attr({"class":"ui-widget-content ui-corner-all"})),this._isDatePickerShown()&&(this._wijinputdateroller._updateDatePicker(),a.css({"font-size":"12px"}).attr({"class":"ui-widget-content ui-corner-all"})),this._isListPickerShown()&&(1==this._getPickerCount()&&(a.attr({"class":""}),this._comboDiv.focus()),"List"==this.element.data("pickerCurrentTab"))){var e=this._getListPickerWidth();a.css({"width":e,"height":""}),a.css({"font-size":""});var f=this._comboDiv[0].parentElement;this._comboDiv.wijlist("destroy"),this._comboDiv.remove(),delete this._comboDiv,this._initListPicker(),this._comboDiv.appendTo(f),this._comboDiv.focus()}return this._isCalendarPickerShown()&&(this._syncCalendar(),"Calendar"==this.element.data("pickerCurrentTab")&&(this._getPickerCount()<=1&&a.css({"width":""}),a.css({"font-size":""}))),!0},e.prototype._hidePopup=function(){var a=this.element.data("pickers");void 0!=a&&a.wijpopup("hide"),this.element.data("divOK").css("visibility","hidden")},e.prototype._popupVisible=function(){var a=this.element.data("pickers");return void 0!=a?a.wijpopup("isVisible"):!1},e.prototype._isComboListVisible=function(){return this._popupVisible()},e.prototype._isValidDate=function(a,b){if(void 0===a)return!1;if(isNaN(a))return!1;if(a.getFullYear()<1||a.getFullYear()>9999)return!1;if(b){if(this.options.minDate&&a<this.options.minDate)return!1;if(this.options.maxDate&&a>this.options.maxDate)return!1}return!0},e.prototype._isDatePickerNeedReInit=function(){if(!this._isDatePickerShown())return!1;var a=this.element.data("pickerMinYear"),b=this.element.data("pickerMaxYear"),c=this._getPickerValue().getFullYear();if(a>c||c>b)return!0;var d=this._isEraFormatExist()?this._getRealEraMinDate().getFullYear():this._getRealMinDate().getFullYear(),e=this._isEraFormatExist()?this._getRealEraMaxDate().getFullYear():this._getRealMaxDate().getFullYear();return d>a||b>e?!0:!1},e.prototype._isDropDownButtonShown=function(){return this.options.showDropDownButton},e.prototype._isCalendarPickerShown=function(){return void 0!=this.options.pickers.calendar&&this.options.pickers.calendar.visible!==!1||0==this._getPickerCount()},e.prototype._isListPickerShown=function(){var a=this._getcomboItems();return void 0!=a&&void 0!=a.length?a.length>0:!1},e.prototype._isTimePickerShown=function(){return void 0!=this.options.pickers.timePicker&&this.options.pickers.timePicker.visible!==!1&&null!==this._wijinputdateroller},e.prototype._isDatePickerShown=function(){return void 0!=this.options.pickers.datePicker&&this.options.pickers.datePicker.visible!==!1&&null!==this._wijinputdateroller},e.prototype._getPickerCount=function(){var a=0,b=void 0!=this.options.pickers.calendar&&this.options.pickers.calendar.visible!==!1;return a+=b?1:0,a+=this._isListPickerShown()?1:0,a+=this._isTimePickerShown()?1:0,a+=this._isDatePickerShown()?1:0},e.prototype._addPickerEditor=function(a,b,d){c("<div/>").attr({"id":d,"align":"center"}).css({"padding":"0px"}).append(b).appendTo(a)},e.prototype._addPickerTab=function(a,b,d){var e=c("<li/>").appendTo(a).css("line-height","1px");c("<a/>").attr("href",d).html(b).appendTo(e)},e.prototype._internalSetDate=function(a){var b,c=this,d=this.options,e=this.element,f=!!e.data("typing");f?(d.date=a,b=function(){var a=new Date,f=e.data("timeStamp");f&&(a.getTime()-f.getTime()>d.keyDelay?(c._safeSetDate(d.date,!0),c._updateText(),c._highLightField()):window.setTimeout(b,d.keyDelay))},window.setTimeout(b,d.keyDelay)):this._safeSetDate(a)},e.prototype.selectText=function(b,c){if("undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=this.getText().length),this.isFocused())a.prototype.selectText.call(this,b,c);else{this.element.data("IsInSelectTextMethod",!0),this.focus();var d=this;setTimeout(function(){try{d.selectText(b,c)}catch(a){}},0),this.element.data("IsInSelectTextMethod",!1)}},e}(b.wijinputcore);b.wijinputdate=e;var f=function(){function a(){this.wijCSS={"wijinputdate":b.wijinputcore.prototype.options.wijCSS.wijinput+"-date"},this.date=void 0,this.minDate=null,this.maxDate=null,this.dateFormat="d",this.displayFormat="",this.amDesignator="",this.pmDesignator="",this.midnightAs0=!0,this.hour12As0=!1,this.blurOnLastChar=!1,this.blurOnLeftRightKey="none",this.tabAction="field",this.startYear=1950,this.smartInputMode=!1,this.activeField=0,this.keyDelay=800,this.autoNextField=!0,this.calendar=null,this.popupPosition={"offset":"0 4"},this.afterSlide=null,this.highlightText="field",this.increment=1,this.imeMode="auto",this.showDropDownButton=!0,this.showTrigger=void 0,this.pickers={"list":void 0,"width":void 0,"height":void 0,"calendar":void 0,"datePicker":void 0,"timePicker":void 0},this.dateChanged=null,this.spinUp=null,this.spinDown=null,this.valueBoundsExceeded=null}return a}();e.prototype.options=c.extend(!0,{},b.wijinputcore.prototype.options,new f),c.wijmo.registerWidget("wijinputdate",e.prototype);var g=function(){function a(a,c,d){this.inputWidget=a,this._disableSmartInputMode=!1,this.paddingZero=b.paddingZero,this.formatter=new b.wijDateTextFormatter(a,c,!1),d=""==d?c:d,this.displayFormatter=new b.wijDateTextFormatter(a,d,!0)}return a.prototype.initialize=function(){},a.prototype.getFiledText=function(a){var b=this.formatter.fields[a];return b.getText()},a.prototype.getFieldCount=function(){return this.formatter.fields.length},a.prototype.getFieldRange=function(a){a>=this.formatter.fields.length&&(a=this.formatter.fields.length-1);var b=this.formatter.fields[a];return{"start":b.startIndex,"end":b.startIndex+b.getText().length}},a.prototype.getAllRange=function(){return{"start":0,"end":this.formatter.toString().length}},a.prototype.getCursorField=function(a){if(0==this.formatter.desPostions.length)return 0;a=Math.min(a,this.formatter.desPostions.length-1),a=Math.max(a,0);var b,d=this.formatter.desPostions[a].desc;if(-1===d.type){if(b=c.inArray(d,this.formatter.descriptors),!(b>0&&-1!==this.formatter.descriptors[b-1].type))return-1;d=this.formatter.descriptors[b-1]}return c.inArray(d,this.formatter.fields)},a.prototype.needToMove=function(a,c,d){if(!this.inputWidget._isValidDate(this.inputWidget._safeGetDate(),!0))return!1;var e=this.formatter.fields[a];switch(e.type){case 72:case 73:case 74:for(var f=0;f<b.DateTimeInfo.GetEraCount();f++)if(d.toLowerCase()===b.DateTimeInfo.GetEraShortcuts()[f].toLowerCase()||d.toLowerCase()===b.DateTimeInfo.GetEraShortNames()[f].toLowerCase()||d.toLowerCase()===b.DateTimeInfo.GetEraAbbreviations()[f].toLowerCase()||d.toLowerCase()===b.DateTimeInfo.GetEraNames()[f].toLowerCase())return!0;return!1}var g=parseInt(d,10);if(c===e.maxLen)return!0;if(isNaN(g))return!1;var h=this.inputWidget.element.data("lastInputChar");switch(e.type){case 10:return this._isSmartInputMode()&&2===c;case 20:case 25:case 45:case 46:return"0"==h&&1==g?!0:g>1;case 47:case 48:return"0"==h&&2>=g?!0:g>2;case 30:case 31:return"0"==h&&3>=g?!0:g>3;case 50:case 51:case 60:case 61:return"0"==h&&6>=g?!0:g>6;case 70:case 71:return!1}return!1},a.prototype._isEraFormatExist=function(){return this.formatter._isEraFormatExist()},a.prototype._getCulture=function(){return this.inputWidget._getCulture()},a.prototype._isDigitString=function(a){if(a=c.trim(a),0===a.length)return!0;var b,d,e=a.charAt(0);if(("+"===e||"-"===e)&&(a=a.substr(1),a=c.trim(a)),0===a.length)return!0;try{return b=parseFloat(a),d=b.toString(),d===a}catch(f){return!1}},a.prototype._setFormat=function(a){return this.formatter._setFormat(a)},a.prototype._setDisplayFormat=function(a){return this.displayFormatter._setFormat(a)},a.prototype._internalSetDate=function(a){this.inputWidget&&this.inputWidget._internalSetDate(a)},a.prototype.toString=function(){if(this.inputWidget._isEraFormatExist()&&null!=this.inputWidget.options.date){var a=this.inputWidget._getRealEraMinDate(),b=this.inputWidget._getRealEraMaxDate();if(this.inputWidget.options.date<a||this.inputWidget.options.date>b)return""}return this.inputWidget.isFocused()?this.formatter.toString():this.inputWidget.isDateNull()&&null!=this.inputWidget._getInnerNullText()?this.inputWidget._getInnerNullText():this.displayFormatter.toString()},a.prototype.parseDate=function(a){var b;return b=c.wijinputcore.parseDate(a,this.formatter.pattern,this._getCulture())},a.prototype.setText=function(a){if(""===a)this._internalSetDate(null);else{var b=new Date(a);isNaN(b.getTime())&&(b=this.parseDate(a)),null==b?this._internalSetDate(new Date(a)):this._internalSetDate(b)}return!0},a.prototype.haveEnumParts=function(){return!1},a.prototype.removeLiterals=function(a){return a=""+a,a=a.replace(new RegExp("[+]","g"),""),a=a.replace(new RegExp("[.]","g"),""),a=a.replace(new RegExp("[:]","g"),""),a=a.replace(new RegExp("[-]","g"),""),a=a.replace(new RegExp("[()=]","g"),"")},a.prototype.getFirstDelimiterPos=function(a,b){for(var c,d,e=0,f=0;e<b.length&&f<a.length;){if(c=b.charAt(e),d=a.charAt(f),c!==d)return f-1;f++,e++}return a.length-1},a.prototype.isFieldSep=function(a,b){var c,d=b++;return d<this.formatter.descriptors.length?(c=this.formatter.descriptors[d],-1!==c.type?!1:a===c.text):!1},a.prototype.getPositionType=function(a){var b=this.formatter.desPostions[a];return b.desc.type},a.prototype.addToField=function(a,b,c){var d,e,f,g=this.formatter.fields[b];return d=a,e={"val":a,"pos":0,"offset":0,"isreset":!1},this.inputWidget.element.data("typing",!0),f=g.setText(d,1===a.length?!1:!0,e,this._isSmartInputMode()),this.inputWidget.element.data("typing",!1),f},a.prototype.insertAt=function(a,c,d){"undefined"==typeof d&&(d=new b.wijInputResult),d.testPosition=-1;var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(1===a.length&&(e=this.formatter.desPostions[c],e&&-1===e.desc.type&&e.text===a))return d.testPosition=c,d.hint=d.characterEscaped,!0;for(f=a,g=c,a=this.removeLiterals(a),h=a,i=!1,k=!1,g>0&&1===h.length&&(g--,c=g,e=this.formatter.desPostions[g],i=!0,!e||-1!==e.desc.type&&1===e.desc.getText().length||(c++,g++,i=!1)),j=!1;h.length>0&&g<this.formatter.desPostions.length;)if(e=this.formatter.desPostions[g],-1!==e.desc.type)if(e.desc.needAdjustInsertPos()){l=h.substr(0,e.length-e.pos),l=e.text.slice(0,e.pos)+l+e.text.slice(e.pos+l.length,e.length),i&&(l=e.text+l),k&&(l+=e.text),n=e.desc.getText().length,p="";try{1===a.length&&(e.pos?e.pos>0&&(p=l.substring(0,e.pos+1)):p=a)}catch(v){}if(1===n&&l.length>1&&1===a.length&&(31===e.desc.type||25===e.desc.type)&&(this._disableSmartInputMode=!0),m={"val":a,"pos":e.pos,"offset":0,"isreset":!1},j=e.desc.setText(l,1===a.length?!1:!0,m),this._disableSmartInputMode=!1,!j&&"undefined"!=typeof p&&p.length>0&&(26===e.desc.type||27===e.desc.type||100===e.desc.type||101===e.desc.type||250===e.desc.type||251===e.desc.type)&&(j=e.desc.setText(p,1===a.length?!1:!0,m)),j)d.hint=d.success,d.testPosition=g+m.offset,1===a.length&&(q=e.desc.getText().length,o=e.pos,e.pos>q-1&&(o=q),r=q-n,r>0&&e.pos===n-1&&(o=q-1),s=this.toString(),d.testPosition=e.desc.startIndex+o+m.offset),h=h.slice(e.length-e.pos,h.length);else if(d.hint=d.invalidInput,-1!==d.testPosition&&(d.testPosition=c),-1!==e.desc.type&&1===a.length)return!1;g+=e.length}else t=this.getFirstDelimiterPos(h,f),0>t&&(t=0),l=h.substring(0,t+1),m={"val":a,"pos":e.pos,"offset":0,"isreset":!1},j=e.desc.setText(l,1===a.length?!1:!0,m),j?(d.hint=d.success,d.testPosition=g+m.offset,h=h.slice(t+1,h.length)):(d.hint=d.invalidInput,-1!==d.testPosition&&(d.testPosition=c)),0>t&&(t=0),u=t+1,g+=u;else g+=e.length;return j},a.prototype.removeAt=function(a,b,c,d){try{var e,f,g,h,i=this.formatter.desPostions[a],j=this.inputWidget,k=j.element,l=k.val().length;return l===b+1&&0===a&&(j.isDeleteAll=!0),i.desc.needAdjustInsertPos()&&(e="0",f=a,i.text=i.desc.getText(),e=i.text.slice(0,i.pos)+e+i.text.slice(i.pos+e.length,i.length),"tt"===i.desc.name?e="AM":"t"===i.desc.name?e="A":"ee"===i.desc.formatString?e="01":"e"===i.desc.formatString&&(e="1"),g={"val":e,"pos":i.pos,"offset":0,"isreset":!0,"isfullreset":!1},b-a+1>=i.length&&(g.isfullreset=!0,a+=i.length,f=a),h=i.desc.setText(e,!1,g,this._isSmartInputMode()),h?(c.hint=c.success,c.testPosition=f):(c.hint=c.invalidInput,-1===c.testPosition&&(c.testPosition=a))),b>a&&this.removeAt(a+1,b,c),!0}catch(m){return!1}},a.prototype.incEnumPart=function(){var a=this.formatter.fields[this.inputWidget.options.activeField];return a&&a.inc(),!0},a.prototype.decEnumPart=function(){var a=this.formatter.fields[this.inputWidget.options.activeField];return a&&a.dec(),!0},a.prototype._isSmartInputMode=function(){return this._disableSmartInputMode?!1:this.inputWidget?this.inputWidget.options.smartInputMode:!0},a.prototype._getInt=function(a,b,d,e){var f,g;for(f=e;f>=d;f--){if(g=a.substring(b,b+f),g.length<d)return null;if(c.wij.charValidator.isDigit(g))return g}return null},a.prototype._tryParseDate=function(a,b){var c,d,e,f,g=this._getCulture().calendars;return b=b||g.standard.patterns.d,b&&(-1===b.indexOf("MMM")&&-1===b.indexOf("MMMM")&&(b=b.replace("MM","M")),b=b.replace("dd","d"),b=b.replace("tt","a")),c=b.replace("yyyy","yy"),d=g.standard["/"],e=[b,c,b.replace(new RegExp(d,"g"),"-"),c.replace(new RegExp(d,"g"),"-"),b.replace(new RegExp(d,"g"),"."),c.replace(new RegExp(d,"g"),".")],(f=Globalize.parseDate(a,e,this._getCulture()))?f:(f=new Date(a),"Invalid Date"!==f.toString()&&a&&""!==a?f:0)},a.prototype._formatDate=function(a,c,d){var e=this;if(!a.valueOf())return"&nbsp;";var f=this.inputWidget._getCulture().calendars.standard,g=c.replace(new RegExp("yyyy|MMMM|MMM|MM|M|mm|m|dddd|ddd|dd|d|hh|h|HH|H|ss|s|tt|t|a/p","gi"),function(c){var g;switch(c){case"yyyy":return b.paddingZero(a.getFullYear(),4);case"MMMM":return d.dateTimeFormat.monthNames[a.getMonth()];case"MMM":return d.dateTimeFormat.abbreviatedMonthNames[a.getMonth()];case"MM":return e.paddingZero(a.getMonth()+1,2);case"M":return e.paddingZero(a.getMonth()+1,1);case"mm":return e.paddingZero(a.getMinutes(),2);case"m":return e.paddingZero(a.getMinutes(),1);case"dddd":return d.dateTimeFormat.dayNames[a.getDay()];case"ddd":return d.dateTimeFormat.abbreviatedDayNames[a.getDay()];case"dd":return e.paddingZero(a.getDate(),2);case"d":return e.paddingZero(a.getDate(),1);case"hh":return g=a.getHours()%12,e.paddingZero(g?g:12,2);case"h":return g=a.getHours()%12,e.paddingZero(g?g:12,1);case"HH":return e.paddingZero(a.getHours(),2);case"H":return e.paddingZero(a.getHours(),1);case"ss":return e.paddingZero(a.getSeconds(),2);case"s":return e.paddingZero(a.getSeconds(),1);case"tt":return a.getHours()<12?f.AM[0]:f.PM[0];case"t":return a.getHours()<12?f.AM[0].length>0?f.AM[0].charAt(0):"":f.PM[0].length>0?f.PM[0].charAt(0):"";case"a/p":return a.getHours()<12?"a":"p"}return"N"});return g},a.prototype.replaceWith=function(a,c){var d=a.start,e=new b.wijInputResult;return a.start<a.end&&(this.removeAt(a.start,a.end-1,e,!0),d=e.testPosition),this.insertAt(c,d,e)?e:null},a}();b.wijDateTextProvider=g}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(a){"use strict";var b=jQuery,c=function(){function b(a,b,c){this.filterLabel=a,this._include=c,this._owner=b}return b.prototype.Check=function(a,b){var c={};c.success=!1,c.strValue="",c.index=b;var d=a.Substring(b,b+1),e=this.IsValid(d);return e?(a=a.Substring(b,b+1),b++,c.strValue=a,c.index=b,c):this._owner.GetAutoConvert()&&(1===d.length||3===d.length)&&(c=this.Convert(a,b),c.success)?c:c},b.prototype.IsValid=function(b){return(2!==b.length||65438!==b.charCodeAt(1)&&65439!==b.charCodeAt(1)||a.CharProcess.CharEx.IsFullWidth(b)||!a.CharProcess.CharEx.IsKatakana(b))&&b.length>1?this.IsValidMoreByte(b):this.IsValidTwoByte(b)},b.prototype.IsValidTwoByte=function(a){return!1},b.prototype.IsValidMoreByte=function(a){return!1},b.prototype.Convert=function(b,c){var d={};d.success=!0,d.strValue="",d.index=c;var e,f=b.Substring(c,c+1),g=a.CharProcess.CharEx;if(g.IsAlphabet(f)){var h=g.IsLower(f)?f.toUpperCase():f.toLowerCase();return e=this.IsValid(h),e&&this._include||!e&&!this._include?(c++,d.index=c,d.strValue=h,d):(f=g.IsFullWidth(f)?g.ToHalfWidth(f):g.ToFullWidth(f).text,e=this.IsValid(f),e&&this._include||!e&&!this._include?(c++,d.index=c,d.strValue=f,d):(h=g.IsFullWidth(h)?g.ToHalfWidth(h):g.ToFullWidth(h).text,e=this.IsValid(h),e&&this._include||!e&&!this._include?(c++,d.index=c,d.strValue=h,d):(d.success=!1,d)))}if(g.IsHiragana(f)){if(g.IsLowerKana(f)){var i=g.ToUpperKana(f);if(e=this.IsValid(i),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=i,d}else if(g.HasLowerKana(f)){var j=g.ToLowerKana(f);if(e=this.IsValid(j),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=j,d}if(f=g.ToKatakana(f),e=this.IsValid(f),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=f,d;if(g.IsLowerKana(f)){var i=g.ToUpperKana(f);if(e=this.IsValid(i),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=i,d}else if(g.HasLowerKana(f)){var j=g.ToLowerKana(f);if(e=this.IsValid(j),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=j,d}var k=g.ToHalfWidthEx(f);if(e=this.IsValid(k),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=k,d;if(g.IsLowerKana(k)){if(k=g.ToUpperKana(k),e=this.IsValid(k),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=k,d}else if(g.HasLowerKana(k)&&(k=g.ToLowerKana(k),e=this.IsValid(k),e&&this._include||!e&&!this._include))return c++,d.index=c,d.strValue=k,d;return d.success=!1,d}if(g.IsKatakana(f)){if(g.IsLowerKana(f)){var i=g.ToUpperKana(f);if(e=this.IsValid(i),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=i,d}else if(g.HasLowerKana(f)){var j=g.ToLowerKana(f);if(e=this.IsValid(j),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=j,d}var h=f,l=!1;if(g.IsFullWidth(f)){var m=g.ToHalfWidthEx(f);if(m.GetLength()>0&&(e=this.IsValid(m),e&&this._include||!e&&!this._include))return c++,d.index=c,d.strValue=m,d;if(g.IsLowerKana(m)){if(m=g.ToUpperKana(m),e=this.IsValid(m),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=m,d}else if(g.HasLowerKana(m)&&(m=g.ToLowerKana(m),e=this.IsValid(m),e&&this._include||!e&&!this._include))return c++,d.index=c,d.strValue=m,d}else{if(null==c){if(h=g.ToFullWidth(f).text,!g.IsKatakana(h))return d;if(e=this.IsValid(h),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=h,d}else{if(c+1<b.GetLength()){var n=g.ToFullWidth(b.Substring(c,c+2));h=n.text,l=n.processedAll}else h=g.ToFullWidth(f).text;if(!g.IsKatakana(h))return d;if(e=this.IsValid(h),e&&this._include||!e&&!this._include)return c++,l&&c++,d.index=c,d.strValue=h,d}if(g.IsLowerKana(h)){var i=g.ToUpperKana(h);if(e=this.IsValid(i),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=i,d}else if(g.HasLowerKana(h)){var j=g.ToLowerKana(h);if(e=this.IsValid(j),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=j,d}}if(h=g.ToHiragana(h),e=this.IsValid(h),e&&this._include||!e&&!this._include)return c++,l&&c++,d.index=c,d.strValue=h,"\u3094"===h&&(l?d.strValue="\u3046\u309b":(c--,d.index=c,d.strValue="",d.success=!1)),d;if(g.IsLowerKana(h)){var i=g.ToUpperKana(h);if(e=this.IsValid(i),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=i,d}else if(g.HasLowerKana(h)){var j=g.ToLowerKana(h);if(e=this.IsValid(j),e&&this._include||!e&&!this._include)return c++,d.index=c,d.strValue=j,d}}return f=g.IsFullWidth(f)?g.ToHalfWidth(f):g.ToFullWidth(f).text,e=this.IsValid(f),e&&this._include||!e&&!this._include?(c++,d.index=c,d.strValue=f,d):(d.success=!1,d)},b}();a.CharacterFilter=c;var d=function(b){function c(a,c){b.call(this,"HalfWidthFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return a.CharProcess.CharEx.IsFullWidth(b)?"\r"===b||"\n"===b?!0:!1:!0},c}(c),e=function(b){function c(a,c){b.call(this,"FullWidthFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return a.CharProcess.CharEx.IsFullWidth(b)?!0:"\r"===b||"\n"===b?!0:!1},c}(c),f=function(b){function c(a,c){b.call(this,"HiraganaFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return a.CharProcess.CharEx.IsHiragana(b)?!0:"\r"===b||"\n"===b?!0:!1},c}(c),g=function(b){function c(a,c){b.call(this,"ShiftJISFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return a.CharProcess.CharEx.IsShiftJIS(b)},c}(c),h=function(b){function c(a,c){b.call(this,"JISX0208Filter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return a.CharProcess.CharEx.IsJISX0208(b)},c}(c),i=function(b){function c(a,c){b.call(this,"DBCSHiraganaFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return a.CharProcess.CharEx.IsUpperKana(b)&&a.CharProcess.CharEx.IsHiragana(b)},c}(c),j=function(b){function c(a,c){b.call(this,"DBCSKatakanaFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return a.CharProcess.CharEx.IsFullWidth(b)&&a.CharProcess.CharEx.IsKatakana(b)&&!a.CharProcess.CharEx.IsLowerKana(b)},c}(c),k=function(b){function c(a,c){b.call(this,"SBCSKatakanaFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return!a.CharProcess.CharEx.IsFullWidth(b)&&a.CharProcess.CharEx.IsKatakana(b)&&!a.CharProcess.CharEx.IsLowerKana(b)},c}(c),l=function(b){function c(a,c){b.call(this,"SurrogateFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return a.CharProcess.CharEx.IsSurrogatePair(b)?!0:"\r"===b||"\n"===b?!0:!1},c.prototype.IsValidMoreByte=function(b){for(var c=0;c<b.length;c++)if(a.CharProcess.CharEx.IsSurrogate(b[c]))return!0;return!1},c}(c),m=function(b){function c(a,c){b.call(this,"HalfWidthKatakanaFilter",a,c);
}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return!a.CharProcess.CharEx.IsFullWidth(b)&&a.CharProcess.CharEx.IsKatakana(b)?!0:"\r"===b||"\n"===b?!0:!1},c}(c),n=function(b){function c(a,c){b.call(this,"FullWidthKatakanaFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return a.CharProcess.CharEx.IsFullWidth(b)&&a.CharProcess.CharEx.IsKatakana(b)?!0:"\r"===b||"\n"===b?!0:!1},c}(c),o=(function(b){function c(a,c){b.call(this,"HalfWidthSymbolsFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return!a.CharProcess.CharEx.IsFullWidth(b)&&a.CharProcess.CharEx.IsSymbol(b)?!0:"\r"===b||"\n"===b?!0:!1},c}(c),function(b){function c(a,c){b.call(this,"FullWidthSymbolsFilter",a,c)}return __extends(c,b),c.prototype.IsValidTwoByte=function(b){return a.CharProcess.CharEx.IsFullWidth(b)&&a.CharProcess.CharEx.IsSymbol(b)?!0:"\r"===b||"\n"===b?!0:!1},c}(c),function(a){function b(b,c,d,e){a.call(this,"LimitedFilter",d,e),this._includeChars=b,this._excludeChars=c}return __extends(b,a),b.prototype.IsValidTwoByte=function(a){return""!==this._includeChars&&this._includeChars.IndexOf(a)>-1||""!==this._excludeChars&&-1===this._excludeChars.IndexOf(a)?!0:"\r"===a||"\n"===a?!0:!1},b.prototype.IsValidMoreByte=function(a){return""!==this._includeChars&&this._includeChars.IndexOf(a)>-1||""!==this._excludeChars&&-1===this._excludeChars.IndexOf(a)?!0:"\r"===a||"\n"===a?!0:!1},b}(c)),p=function(a){function b(b,c,d,e){a.call(this,"RangeFilter",d,e),this._startChar=b,this._endChar=c}return __extends(b,a),b.prototype.IsValidTwoByte=function(a){return a>=this._startChar&&a<=this._endChar?!0:"\r"===a||"\n"===a?!0:!1},b}(c),q=function(a){function b(b,c){a.call(this,"UnionFilter",b,c),this.filterArray=[]}return __extends(b,a),b.prototype.Add=function(a){null!=a&&("HiraganaFilter"===a.filterLabel?this.hiranagaFilter=a:"FullWidthKatakanaFilter"===a.filterLabel&&(this.katakanaFilter=a),this.filterArray.push(a))},b.prototype.AddRange=function(a){for(var b=0;b<a.length;b++)this.Add(a[b])},b.prototype.IsValidTwoByte=function(a){if(0===this.filterArray.length)return"\r"===a||"\n"===a?!0:!1;for(var b=!1,c=!1,d=0;d<this.filterArray.length;d++)this.filterArray[d]._include&&(c=!0);var e="\u30fc"===a;if(e)if(this.hiranagaFilter&&this.katakanaFilter){if(c)return!0}else{if(this.hiranagaFilter)return!0;if(this.katakanaFilter)return!0}for(var d=0;d<this.filterArray.length;d++)if(this.filterArray[d].IsValid(a)){if(!this.filterArray[d]._include)return!1;b=!0}else c||(b=!0);return b?!0:"\r"===a||"\n"===a?!0:!1},b.prototype.IsValidMoreByte=function(a){return this.IsValidTwoByte(a)},b}(c),r=function(){function a(a){this.minLength=-1,this.maxLength=-1,this.text="",this.oldText="",this.fieldLabel=a}return a.prototype.Snap=function(){var a={};return a.text=this.text,a.oldText=this.oldText,a},a.prototype.Revert=function(a){this.text=a.text,this.oldText=a.oldText},a.prototype.GetFieldText=function(){return null==this.oldText?null:this.oldText},a.prototype.GetText=function(){return this.text},a.prototype.SetText=function(a){this.text=a},a.prototype.GetFillingString=function(a){if(!a)return null;for(var b="",c=0;c<this.minLength;c++)b+=a;return b},a.prototype.GetFieldStatus=function(){return 0},a.prototype.GetTextExcludeLiterals=function(a,b){var c=this.text.GetLength();b>c&&(b=c);var d=this.text.Substring(a,b);return d=d.replace(/[^\d]/g,"")},a.prototype.SaveOldState=function(){},a.prototype.RollBack=function(){},a.prototype.PerformSpin=function(a,b,c){return 0},a.prototype.Insert=function(a,b,c,d){},a.prototype.Replace=function(a,b,c){},a.prototype.Delete=function(a,b){},a.prototype.SaveUndoState=function(){},a.prototype.Clear=function(){this.text=null},a.prototype.Undo=function(){},a.prototype.SetTextInternal=function(a,b,c,d){},a.prototype.GetLength=function(){return this.text.GetLength()>this.minLength?this.text.GetLength():this.minLength},a}();a.Field=r;var s=function(a){function b(b){a.call(this,"PromptField"),this.text=b,this.minLength=this.text.GetLength(),this.maxLength=this.text.GetLength()}return __extends(b,a),b.prototype.GetFillingString=function(){return this.text},b.prototype.SetText=function(a){var b={};return a===this.promptText?(b.existInvalid=!1,a=a.Substring(this.text.GetLength())):b.existInvalid=!0,b.text=a,b},b.prototype.GetLength=function(){return this.text.GetLength()},b}(r),t=function(b){function d(a){b.call(this,"FilterField"),this._minLength=0,this._maxLength=0,this._filter=new c,this._bitStates=null,this._oldBitState=null,this.undoText="",this.undoTempText="",this._undoBitState=null,this._trueLength=0,this._bitState=null,this._owner=a}return __extends(d,b),d.prototype.GetPromptChar=function(){return this._owner.GetPromptChar()},d.prototype.GetAutoConvert=function(){return this._owner.GetAutoConvert()},d.prototype.FilterField=function(a,b,c,d){if(a>b)return!1;if(!c)return!1;if(this._minLength=a,this._maxLength=b,this._filter=c,this._bitState=d,this._oldBitState=d,this._undoBitState=d,this._trueLength=0,null!=this._bitState){for(var e=0;null!=this._bitState[e];)e++;for(var f=e;f>=0;f--)if(null!=this._bitState[f])this._bitState[f]===!1&&this._trueLength--;else{if(null!=this._bitState[f])break;this._trueLength--}}return this.Clear(),!0},d.prototype.InitialText=function(a){for(;-1!=a.IndexOf("@#GCD#@");)a=a.replace("@#GCD#@","'");for(;-1!=a.IndexOf("@#GCM#@");)a=a.replace("@#GCM#@",'"');this.text=a,this.oldText=a,this.undoText=a,this.undoTempText=a},d.prototype.GetFieldStatus=function(){return this._trueLength>=this._minLength&&this._trueLength>0?2:this._trueLength>0&&this._trueLength<this._minLength?1:0},d.prototype.GetFieldIsFull=function(){if(this._trueLength>=this._minLength&&this._trueLength>0){for(var a=0;a<this._trueLength;a++)if(this._bitState[a]===!1)return!1;return!0}return!1},d.prototype.SetTextInternal=function(b,c,d,e){var f={};f.offset=c,f.text=b,f.existInvalid=!1,f.exception=!1;var g=!1;if(c>this._maxLength||""===b||0===b.GetLength())return f;for(var h="",i=0,j=[],k=c,l=0;c>l;l++)j[l]=this._bitState[l];for(;i<b.GetLength();){var m=this._filter.Check(b,i),n=m.strValue;if(i=m.index,""===n&&b.Substring(i,i+1)!==this.GetPromptChar()){if(!d&&c+h.GetLength()>=this._minLength&&c+h.GetLength()===this._trueLength+h.GetLength())break;g=!0,i++;break}if(""!==n?(e&&""!==e&&e.Substring(k,k+1)===a.Utility.MaskValChar?(h+=this.GetPromptChar(),j[k]=!1):"\r"===n||"\n"===n?(h+=this.GetPromptChar(),j[k]=!1):(h+=n,j[k]=!0),k++,2===n.GetLength()&&(j[k]=!0,k++)):(h+=this.GetPromptChar(),i++,j[k]=!1,k++),c+h.GetLength()===this._maxLength)break;if(c+h.GetLength()>this._maxLength){h=h.Substring(0,h.GetLength()-1);break}}c+h.GetLength()<this._minLength&&(b=b.Substring(i,b.GetLength()-i),f.existInvalid=g,f.exception=!0);var o=this.text.Substring(0,c)+h+this.text.Substring(c,this.text.GetLength());if(o.GetLength()>this._maxLength&&(o=o.Substring(0,this._maxLength)),o.GetLength()>c+h.GetLength())for(var p=1;p<=o.GetLength()-c-h.GetLength();p++)null!=this._bitState[c+p]&&(j[k]=this._bitState[c+p],k++);this._bitState=new Array(k),this._bitState=j,this._trueLength=k;for(var p=k-1;p>=0&&this._bitState[p]===!1;p--)this._trueLength--;if(o.GetLength()<this._minLength)for(var p=0;p<this._minLength-o.GetLength();p--)o+=this.GetPromptChar();for(var p=o.GetLength();p>this._minLength&&(o.Substring(p-1,p)===this.GetPromptChar()&&p>this._trueLength);p--)o=o.Substring(0,p-1);return this.text=o,b=i===b.GetLength()?"":b.Substring(i,b.GetLength()),c+=h.GetLength(),f.offset=c,f.text=b,f},d.prototype.SaveOldState=function(){this.oldText=this.text,this._oldBitState=this._bitState},d.prototype.SaveUndoState=function(){this.undoText=this.text,this.undoTempText=this.text,this._undoBitState=this._bitState},d.prototype.GetValue=function(){},d.prototype.GetText=function(){return this._text},d.prototype.UpdateState=function(a){},d.prototype.RollBack=function(){if(this.oldText!==this.text){var a=this.oldText;this.text=a,this._bitState=this._oldBitState,this._trueLength=a.GetLength();for(var b=a.GetLength()-1;b>=0&&0==this._bitState[b];b--)this._trueLength--}},d.prototype.Undo=function(){if(this.undoTempText===this.text)return!1;var a=this.undoTempText;this.undoTempText=this.text;var b=this._bitState;if(this.text=a,this._bitState=this._undoBitState,this._trueLength=a.GetLength(),0===this._bitState.length)this._trueLength=0;else for(var c=a.GetLength()-1;c>=0&&this._bitState[c]===!1;c--)this._trueLength--;return this._undoBitState=b,!0},d.prototype.Clear=function(){this._trueLength=0;var a="",b=[];if(this._minLength>0){for(var c=0;c<this._minLength;c++)b[c]=!1;if(this._bitState=new Array(this._minLength),this._bitState=b,""!==this.GetPromptChar())for(var c=0;c<this._minLength;c++)a+=this.GetPromptChar();else for(var c=0;c<this._minLength;c++)a+=" ";this.text=a}else this.text="",this._bitStates=null},d.prototype.Insert=function(a,b,c,d){d||(d=!0);var e={};e.offset=a,e.text=b,e.existInvalid=!1,e.exception=!1;var f=!1;if(a>this._maxLength||""===b||0===b.GetLength())return e;for(var g=[],h=a,i=0;a>i;i++)g[i]=this._bitState[i];for(var j="",k=0;k<b.GetLength();){var l=this._filter.Check(b,k),m=l.strValue;if(k=l.index,""!==m||!d&&" "===b.CharAt(k)){if(""!==m||d||" "!==b.CharAt(k)?"\r"===m||"\n"===m?(j+=this.GetPromptChar(),g[h]=!1,h++):(j+=m,g[h]=!0,h++,2===m.GetLength()&&(g[h]=!0,h++)):(j+=this.GetPromptChar(),g[h]=!1,h++,k++),a+j.GetLength()===this._maxLength)break;if(a+j.GetLength()>this._maxLength){j=j.Substring(0,j.GetLength()-1);break}}else{if(!c&&a+j.GetLength()>=this._minLength&&a+j.GetLength()>=this._trueLength+j.GetLength())break;f=!0,k++}}if(0===j.GetLength())return b=b.Substring(k,b.GetLength()-k),e.existInvalid=f,e.exception=!0,e;var n=this.text.Substring(0,a)+j+this.text.Substring(a,this.text.GetLength());if(n.GetLength()>this._maxLength&&(n=n.Substring(0,this._maxLength)),n.GetLength()>a+j.GetLength())for(var o=0;o<n.GetLength()-a-j.GetLength();o++)null!=this._bitState[a+o]?g[h]=this._bitState[a+o]:g[h]=!1,h++;this._bitState=new Array(h),this._bitState=g,this._trueLength=h;for(var o=h-1;o>=0&&this._bitState[o]===!1;o--)this._trueLength--;if(n.GetLength()<this._minLength)for(var o=0;o<this._minLength-n.GetLength();o--)n+=this.GetPromptChar();for(var o=n.GetLength();o>this._minLength&&(n.Substring(o-1,o)===this.GetPromptChar()&&o>this._trueLength);o--)n=n.Substring(0,o-1);return this.text=n,b=k===b.GetLength()?"":b.Substring(k,b.GetLength()),a+=j.GetLength(),e.offset=a,e.text=b,e},d.prototype.Replace=function(b,c,d,e){var f={};if(f.offset=b,f.text=d,0===c)return f;var g=d.charCodeAt(0),h=[12364,12460,12366,12462,12376,12472];if(-1!==a.Utility.ArrayIndexOf(h,g)&&1===c){var i=this._filter.Check(d,0);i.strValue&&2===i.strValue.length&&(c=2)}return b=this.Delete(b,c),f=this.Insert(b,d,e)},d.prototype.Delete=function(a,b){if(0===b||a>=this.text.GetLength())return a;a+b>this.text.GetLength()&&(b=this.text.GetLength()-a);for(var c=[],d=a,e=0;a>e;e++)c[e]=this._bitState[e];var f=this.text.Substring(0,a)+this.text.Substring(a+b,this.text.GetLength());if(a+b<this.text.GetLength())for(var g=0;g<this.text.Substring(a+b,this.text.GetLength()).GetLength();g++)null!=this._bitState[a+b+g]?c[d]=this._bitState[a+b+g]:c[d]=!1,d++;if(d<this._minLength)for(var g=d;g<this._minLength;g++)c[g]=!1;this._bitState=new Array(d),this._bitState=c,this._trueLength=d;for(var g=d-1;g>=0&&this._bitState[g]===!1;g--)this._trueLength--;if(f.GetLength()<this._minLength)for(var h=this._minLength-f.GetLength(),g=0;h>g;g++)f+=this.GetPromptChar();return this.text=f,a},d}(r),u=function(b){function c(a){b.call(this,"EnumField"),this._activeItem=-1,this._trueLength=0,this._lastActiveItem=-1,this.undoText="",this.undoTempText="",this._undoItem=-1,this._minLength=0,this._maxLength=0,this._itemCount=0,this._owner=a}return __extends(c,b),c.prototype.GetPromptChar=function(){return this._owner.GetPromptChar()},c.prototype.GetText=function(){var b="";return this._activeItem<0?b=a.Utility.ToString(this.GetPromptChar(),this._minLength):b+=this._items[this._activeItem],b},c.prototype.GetFieldStatus=function(){return-1===this._activeItem?0:2},c.prototype.GetFieldIsFull=function(){return-1===this._activeItem?!1:!0},c.prototype.IsOver=function(){return-1!==this._activeItem},c.prototype.Init=function(a){for(var b=Number.MAX_VALUE,c=Number.MIN_VALUE,d=0;d<a.length;d++)b=Math.min(b,a[d].length),c=Math.max(c,a[d].length);this.EnumField(b,c,a,a.length,-1)},c.prototype.EnumField=function(a,b,c,d,e){return this._minLength=a,this._maxLength=b,c?(this._itemCount=d,this._activeItem=e,this._lastActiveItem=e,this._undoItem=e,this.InitialItems(c),-1!==e?this._trueLength=c[e].toString().GetLength():this._trueLength=0,void(this.text=this.GetText())):!1},c.prototype.InitialItems=function(a){this._items=new Array(a.length);for(var b=0;b<a.length;b++){for(var c=a[b];-1!==c.IndexOf("@#GCD#@");)c=c.replace("@#GCD#@","'");for(;-1!==c.IndexOf("@#GCM#@");)c=c.replace("@#GCM#@",'"');c&&(c=c.replace(/@#GCX0D#@/g,"\r").replace(/@#GCX0A#@/g,"\n")),this._items[b]=c}},c.prototype.InitialText=function(a){for(;-1!==a.IndexOf("@#GCD#@");)a=a.replace("@#GCD#@","'");for(;-1!==a.IndexOf("@#GCM#@");)a=a.replace("@#GCM#@",'"');a&&(a=a.replace(/@#GCX0D#@/g,"\r").replace(/@#GCX0A#@/g,"\n")),this.text=a,this.oldText=a,this.undoText=a,this.undoTempText=a},c.prototype.Insert=function(a,b,c){var d={};d.offset=a,d.text=b,d.existInvalid=!1,d.exception=!1;var e=a,f="";-1===this._activeItem&&(e=0),0!==e&&(f=this._items[this._activeItem].toString().Substring(0,e));for(var g=new Array(this._itemCount),h=new Array(this._itemCount),i=new Array(this._itemCount),j=new Array(this._itemCount),k=0;k<this._itemCount;k++)g[k]=e,h[k]=0,i[k]=99999,j[k]=new Array;for(var k=0;k<this._itemCount;k++){var l=this._items[k].toString();if(!(f.GetLength()>0&&l.Substring(0,f.GetLength())!==f))for(;h[k]<b.GetLength()&&!(g[k]>=l.length);){var m=this.JudgeIfValid(l,g[k],b,h[k]);g[k]=m.index1,h[k]=m.index2,m.isValid?99999===i[k]&&(i[k]=h[k]):h[k]++}}for(var n=0,o=0,p=!1,q=g[n],r=0;r<this._itemCount;r++){var l=this._items[r].toString();if(g[r]===b.GetLength()+e&&b.GetLength()===l.length){n=r,q=g[n],p=!0;break}if(99999!==i[r]&&i[n]>=i[r])if(i[n]===i[r]){var s=g[r];s>q?(n=r,q=s,o=1):q===s&&o++}else n=r,q=g[n],o=1}var t;if(p)return 0===h[n]?(t=!0,d.existInvalid=!0,d):(b=b.Substring(h[n]+1,b.GetLength()),a=this._items[n].toString().GetLength(),t=0===j[n].Count?!1:!0,this._activeItem=n,this.text=this._items[n].toString(),this._trueLength=this._items[n].toString().GetLength(),d.offset=a,d.text=b,d.existInvalid=t,d);if(q===e)return c===!1&&-1!==this._activeItem&&a===this._items[this._activeItem].toString().GetLength()?(b=b.Substring(h[n],b.GetLength()),t=!1,d.offset=a,d.text=b,d):(t=!0,d.exception=!0,d.existInvalid=!0,d);for(var u=-1,k=0;k<j[n].Count;k++)u=0;return a=1===o?this._items[n].toString().GetLength():q,-1===u?(b=b.Substring(h[n],b.GetLength()),t=!1):(b=b.Substring(h[n],b.GetLength()),t=!0),this._activeItem=n,this.text=this._items[n].toString(),this._trueLength=this._items[n].toString().GetLength(),d.offset=a,d.text=b,d},c.prototype.Replace=function(a,b,c,d){return this.Insert(a,c,d)},c.prototype.Delete=function(a,b){if(0===b||a>=this.text.GetLength())return a;if(a=0,this._activeItem=-1,this.text="",this._minLength>0)for(var c=0;c<this._minLength;c++)this.text+=this.GetPromptChar();return this._trueLength=0,a},c.prototype.SaveOldState=function(){this._lastActiveItem=this._activeItem,this.oldText=this.text},c.prototype.RollBack=function(){if(this.oldText!==this.text){var a=this._lastActiveItem;if(this._activeItem=a,a>=0&&a<this._itemCount)this.text=this._items[a].toString();else{this.text="";for(var b=0;b<this._minLength;b++)this.text+=this.GetPromptChar()}for(var c=0,b=this.text.GetLength();b>0&&this.text.Substring(b-1,b)===this.GetPromptChar();b--)c++;this._trueLength=this.text.GetLength()-c}},c.prototype.SaveUndoState=function(){this.undoText=this.text,this.undoTempText=this.text,this._undoItem=this._activeItem},c.prototype.Undo=function(){if(this.undoTempText!==this.text){this.undoTempText=this.text;var a=this._activeItem;if(this._activeItem=this._undoItem,this._undoItem=a,this._activeItem>=0&&this._activeItem<this._itemCount)this.text=this._items[this._activeItem].toString();else{this.text="";for(var b=0;b<this._minLength;b++)this.text+=this.GetPromptChar()}for(var c=0,b=this.text.GetLength();b>0&&this.text.Substring(b-1,b)===this.GetPromptChar();b--)c++;this._trueLength=this.text.GetLength()-c}},c.prototype.SetTextInternal=function(a,b,c,d){var e,f=new Array(this._itemCount),g=new Array(this._itemCount),h=new Array(this._itemCount);for(e=0;e<this._itemCount;e++)f[e]=0,g[e]=0,h[e]=!1;for(e=0;e<this._itemCount;e++)for(var i=this._items[e].toString();f[e]<a.GetLength();){var j=this.JudgeIfValid(i,g[e],a,f[e]);if(g[e]=j.index1,f[e]=j.index2,!j.isValid&&c===!0){h[e]=!0;break}if(!j.isValid&&i.GetLength()===f[e])break;if(!j.isValid&&i.GetLength()>f[e]){h[e]=!0;break}if(g[e].toString().GetLength()===i.GetLength()&&f[e].toString().GetLength()<a.GetLength()&&c===!0){h[e]=!0;break}if(f[e].toString().GetLength()===a.GetLength()&&g[e].toString().GetLength()<i.GetLength()){h[e]=!0;break}}var k=this._itemCount;for(e=0;e<this._itemCount;e++)if(h[e]===!1){k===this._itemCount&&(k=e);var i=this._items[e].toString();if(i.GetLength()===this._maxLength&&a.GetLength()>=this._maxLength){k=e;break}}var l=k,m={};if(m.existInvalid=!1,m.exception=!1,l>=this._itemCount){var n="";for(m.exception=!0,e=0;e<this._minLength;e++)n+=this.GetPromptChar();return a.Substring(0,this._minLength)===n?(a=a.Substring(this._minLength,a.GetLength()),m.offset=this._minLength,m.text=a,m.existInvalid=!1,m.exception=!0,this.Clear(),m):(m.text=a,this.text=n,this._activeItem=-1,m.existInvalid=!0,m.exception=!0,m)}return this._activeItem=l,this.text=this._items[l].toString(),this._trueLength=this._items[l].toString().GetLength(),m.offset=this._trueLength,m.text=a.Substring(this._trueLength,a.GetLength()),m},c.prototype.PerformSpin=function(a,b,c){var d=this._itemCount;if(b>d)if(d>1)for(;b>d;)b-=d;else b=1;else if(-b>d)if(d>1)for(;-b>d;)b+=d;else b=-1;if(0===b)return a;var e;-1===this._activeItem?e=b>0?0:d-1:(e=this._activeItem+b,(0>e||e>=d)&&(c?(e=b>0?e-d:e+d,b>0&&e<this._activeItem?e=this._activeItem<d-1?d-1:0:0>b&&e>this._activeItem&&(e=this._activeItem>0?0:d-1)):e=b>0?d-1:0));var f=this._items[e].toString().GetLength();return a=Math.min(a,f),this._activeItem=e,this.text=this._items[e].toString(),this._trueLength=-1===this._activeItem?0:this.text.GetLength(),a},c.prototype.Clear=function(){this._activeItem=-1},c.prototype.JudgeIfValid=function(b,c,d,e){var f=a.CharProcess.CharEx,g={};if(g.index1=c,g.index2=e,g.isValid=!1,c>=b.GetLength())return g;if(b.Substring(c,c+1)===d.Substring(e,e+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;if(this._owner.GetAutoConvert()===!1)return g;if(d.Substring(e,e+1).charCodeAt(0)>=65345&&d.Substring(e,e+1).charCodeAt(0)<=65370){var h=String.fromCharCode(d.Substring(e,e+1).charCodeAt(0)-32);if(h===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var i=f.ToHalfWidth(d.Substring(e,e+1));if(i===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var j=f.ToHalfWidth(h);return j===b.Substring(c,c+1)?(c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g):g}if(d.Substring(e,e+1).charCodeAt(0)>=65313&&d.Substring(e,e+1).charCodeAt(0)<=65338){var k=String.fromCharCode(d.Substring(e,e+1).charCodeAt(0)-32);if(k===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var j=f.ToHalfWidth(d.Substring(e,e+1));if(j===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var i=f.ToHalfWidth(k);return i===b.Substring(c,c+1)?(c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g):g}if(f.IsUpper(d.Substring(e,e+1))){var i=d.Substring(e,e+1).toLowerCase();if(i===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var h=f.ToFullWidth(d.Substring(e,e+1)).text;if(h===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var k=f.ToFullWidth(i).text;return k===b.Substring(c,c+1)?(c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g):g}if(f.IsLower(d.Substring(e,e+1))){var j=d.Substring(e,e+1).toUpperCase();if(j===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var k=f.ToFullWidth(d.Substring(e,e+1)).text;if(k===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var h=f.ToFullWidth(k).text;return h===b.Substring(c,c+1)?(c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g):g}if(f.IsHiragana(d.Substring(e,e+1))){var l=f.ToKatakana(d.Substring(e,e+1));if(l===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var m=f.ToKatakana(l),n=f.ToHalfWidthEx(m);return 1===n.length&&n===b.Substring(c,c+1)?(c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g):2===n.length&&n.Substring(0,1)===b.Substring(c,c+1)&&c+1<b.GetLength()&&n.Substring(1,2)===b.Substring(c+1,c+2)?(c+=2,e++,g.index1=c,g.index2=e,g.isValid=!0,g):g}if(f.IsKatakana(d.Substring(e,e+1))&&f.IsFullWidth(d.Substring(e,e+1))){var m=f.ToKatakana(d.Substring(e,e+1)),n=f.ToHalfWidthEx(m);if(1===n.length&&n===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;if(2===n.length&&n.Substring(0,1)===b.Substring(c,c+1)&&c+1<b.GetLength()&&n.Substring(1,2)===b.Substring(c+1,c+2))return c+=2,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var o=f.ToHiragana(d.Substring(e,e+1));return"\u3094"===o?g:o===b.Substring(c,c+1)?(c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g):g}if(f.IsKatakana(d.Substring(e,e+1))&&!f.IsFullWidth(d.Substring(e,e+1))){var p;if(p=e+1<d.GetLength()&&f.IsKatakana(d.Substring(e+1,e+2))&&!f.IsFullWidth(d.Substring(e+1,e+2))?d.Substring(e+1,e+2):" "," "===p){var l=f.ToFullWidth(d.Substring(e,e+1)).text;if(l===b.Substring(c,c+1))return c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g;var o=f.ToHiragana(l);return"\u3094"===o?g:o===b.Substring(c,c+1)?(c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g):g}var q=f.ToFullWidth(d.Substring(e,e+2)),l=q.text,r=q.processedAll;if(l===b.Substring(c,c+1))return c++,r?e+=2:e++,g.index1=c,g.index2=e,g.isValid=!0,g;var o=f.ToHiragana(l);return"\u3094"===o?r&&"\u3046\u309b"===b.Substring(c,c+2)?(c+=2,e+=2,g.index1=c,g.index2=e,g.isValid=!0,g):g:o===b.Substring(c,c+1)?(c++,r?e+=2:e++,g.index1=c,g.index2=e,g.isValid=!0,g):g}if(f.IsFullWidth(d.Substring(e,e+1))){var s=f.ToHalfWidth(d.Substring(e,e+1));return s===b.Substring(c,c+1)?(c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g):g}var t=f.ToFullWidth(d.Substring(e,e+1)).text;return t===b.Substring(c,c+1)?(c++,e++,g.index1=c,g.index2=e,g.isValid=!0,g):g},c}(r),v=function(){function a(a){this.fieldArray=[],this.fieldCount=0,this.fieldCount=a}return a.prototype.GetLength=function(){for(var a=0,b=0;b<this.fieldCount;b++){var c=this.GetFieldByIndex(b);a+=c.GetLength()}return a},a.prototype.Add=function(a){a&&this.fieldArray.push(a)},a.prototype.AddRange=function(a){if(a&&0!==a.length&&this.fieldCount===a.length){for(var b=new Array,c=0;c<a.length;c++)b[c]=a[c];this.fieldArray=b}},a.prototype.GetFieldByIndex=function(a){return this.fieldArray[a]},a.prototype.GetText=function(){for(var a="",b=0;b<this.fieldCount;b++)a+=this.GetFieldByIndex(b).GetText();return a},a.prototype.GetFillingString=function(a){for(var b="",c=0;c<this.fieldCount;c++){var d=this.fieldArray[c];if("PromptField"===d.fieldLabel)b+=d.GetText();else for(var e=0;e<d._minLength;e++)b+=a}return b},a.prototype.SetText=function(a,b){},a.prototype.Insert=function(a,b,c){},a.prototype.Replace=function(a,b,c,d){},a.prototype.Delete=function(a,b){},a.prototype.PerformSpin=function(a,b,c){},a.prototype.GetFieldIndex=function(a,b){for(var c={},d=0,e=0;e<this.fieldCount;e++){var f=this.fieldArray[e],g=f.GetLength();if(a===d&&0===g||a>=d&&d+g>a)return c.index=e,c.offset=a-d,c;d+=g}if(a>=d){var f=this.fieldArray[this.fieldCount-1];return c.index=this.fieldCount-1,c.offset=f.GetLength(),c}},a.prototype.GetFieldRange=function(a){var b={};b.start=0,b.length=0;for(var c=0,d=0;a>d;d++){var e=this.GetFieldByIndex(d);c+=e.GetLength()}var f=this.GetFieldByIndex(a);return f?(b.start=c,b.length=f.GetLength(),b):b},a}();a.FieldCollection=v;var w=function(){function c(){this.KeyActionList=null,this.Text="",this.Value=null,this.DroppedDown=!1,this.SelectionLength=0,this.SelectionStart=0,this.SelectionEnd=0,this.IsMouseDown=!1,this.OldSelectionStart=0,this.OldSelectionEnd=0,this._acceptCrlf=0,this._clipContent=0,this._editMode=0,this.__editModeInternal=0,this._useClipboard=!0,this._readOnly=!1,this._autoPostBack=!1,this._highlightText=0,this._exitOnLeftRightKey=0,this.FocusType=0,this.IsInUpdatePanelAndAsyncPostBack=!1,this.NeedResetFocus=!1,this.NeedReCalCursorPos=!0,this.SpinBtnPressed=!1,this.DropDownBtnPressed=!1,this.OldValue="",this.ValueBeforeUndo="",this.FocusExit=!1,this.Delay=0,this.SpinOnKeys=!0,this.Wrap=!0,this.SpinEnabled=!0,this.Increment=1,this.Visible=!1,this.MouseButton=-1,this.TouchDropDownScale=1,this.UIUpdate=new a.InputUIUpdate(this),this.Format={"Fields":null}}return c.prototype.Snap=function(){var a={"Text":this.Text,"Value":this.Value,"SelectionStart":this.SelectionStart,"SelectionEnd":this.SelectionEnd};return a},c.prototype.Revert=function(a){this.Text=a.Text,this.Value=a.Value,this.SelectionStart=a.SelectionStart,this.SelectionEnd=a.SelectionEnd},c.prototype.ReLoadData=function(){},c.prototype.GetOverwrite=function(){return 2===this.GetEditMode()||3===this.GetEditMode()?3===this.GetEditMode():0!==this._getEditModeInternal()&&2!==this._getEditModeInternal()},c.prototype.GetImeMode=function(){return this.InputElement.style.imeMode||"auto"},c.prototype.SetImeMode=function(a){this.GetInputElement().style.imeMode=a},c.prototype.GetEnabled=function(){return this.GetInputElement().disabled},c.prototype.SetEnabled=function(a){a?b(this.GetInputElement()).removeAttr("diabled"):b(this.GetInputElement()).attr("diabled","true")},c.prototype.SetFocus=function(){b(this.GetInputElement()).focus()},c.prototype.GetDroppedDown=function(){return this.DroppedDown},c.prototype.GetSelectionStart=function(){return Math.min(this.SelectionStart,this.SelectionEnd)},c.prototype.SetSelectionStart=function(b){b=a.Utility.CheckInt(b,0,Math.pow(2,31)),b=Math.min(b,this.Text.GetLength()),this.SetInnerSelectionStart(b),this.SetInnerSelectionEnd(b+this.SelectionLength),this.NeedReCalCursorPos=!0},c.prototype.GetSelectionLength=function(){return Math.abs(this.SelectionEnd-this.SelectionStart)},c.prototype.SetSelectionLength=function(b){b=a.Utility.CheckInt(b,0,Math.pow(2,31)),this.SelectionStart+b>this.Text.GetLength()&&(b=this.Text.GetLength()-this.SelectionStart),this.SelectionLength=b,this.SetInnerSelectionEnd(this.SelectionStart+b),this.NeedReCalCursorPos=!0},c.prototype.SetInnerSelectionStart=function(a){this.SelectionStart=a},c.prototype.SetInnerSelectionEnd=function(a){this.SelectionEnd=a},c.prototype.SetDroppedDown=function(a){this.Enabled&&(this.DroppedDown=a)},c.prototype.DoSpinUp=function(a,b){null==b&&(b=this.Increment),this.DoSpin("up",this.SelectionEnd,b)},c.prototype.DoSpinDown=function(a,b){null==b&&(b=this.Increment),this.DoSpin("down",this.SelectionEnd,b)},c.prototype.DoSpin=function(a,b,c){if("down"===a&&(c*=-1),!("number"==typeof b&&isNaN(b)||"number"==typeof c&&isNaN(c))){var d=this.UIProcess.PerformSpin(b,c,this.Wrap);d&&("number"!=typeof d.SelectionStart||isNaN(d.SelectionStart)||(this.SelectionStart=d.SelectionStart),"number"!=typeof d.SelectionEnd||isNaN(d.SelectionEnd)||(this.SelectionEnd=d.SelectionEnd),(null==d.Text||this.UpdateText(d))&&(this.UpdateDisplayText(this.Text),"up"===a?this.UIProcess.FireEvent(this,this.SpinUpEvent,null,"SpinUp"):"down"===a&&this.UIProcess.FireEvent(this,this.SpinDownEvent,null,"SpinDown")))}},c.prototype.GetExitOnLeftRightKey=function(){return this._exitOnLeftRightKey},c.prototype.SetExitOnLeftRightKey=function(a){this._exitOnLeftRightKey=a},c.prototype.GetAcceptsCrlf=function(){return this._acceptCrlf},c.prototype.SetAcceptsCrlf=function(a){this._acceptCrlf=a},c.prototype.SetInnerFocus=function(){this.FocusType=3,this.UIUpdate.SetFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)},c.prototype.UpdateDisplayText=function(a){this.UIUpdate.SetText(a),this.SetHideValue()},c.prototype.SetHideText=function(a){},c.prototype.SetSelection=function(b,c,d){if(null!=b&&null!=c&&!isNaN(b)&&!isNaN(c)){if(d&&a.CoreUtility.IsIE10OrLater()){var e=this;setTimeout(function(){a.Utility.SetSelection(e.InputElement,b,c)},0)}else a.Utility.SetSelection(this.InputElement,b,c);this.SelectionStart=b,this.SelectionEnd=c,b===c&&(this.UIProcess.isMulSelected=!1)}},c.prototype._getAutoPostBack=function(){return this._autoPostBack},c.prototype._setAutoPostBack=function(b){b=a.Utility.CheckBool(b),this._autoPostBack=b},c.prototype.GetUseClipboard=function(){return this._useClipboard},c.prototype.SetUseClipboard=function(a){this._useClipboard=a},c.prototype.GetClipContent=function(){return this._clipContent},c.prototype.SetClipContent=function(a){this._clipContent=a},c.prototype.GetTextHAlign=function(){return this.UIUpdate.GetTextHAlign()},c.prototype.SetTextHAlign=function(a){this.UIUpdate.SetTextHAlign(a)},c.prototype.GetEditMode=function(){return this._editMode},c.prototype.SetEditMode=function(a){if(a!==this._editMode){var b=!1;this._isinsertGroup(a)&&this._isOverwriteGroup(this._editMode)?b=!0:this._isinsertGroup(this._editMode)&&this._isOverwriteGroup(a)&&(b=!0),this._editMode=a,this.__editModeInternal=a,b&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},c.prototype._getEditModeInternal=function(){return this.__editModeInternal},c.prototype._setEditModeInternal=function(a){if(a!==this.__editModeInternal){var b=!1;this._isinsertGroup(a)&&this._isOverwriteGroup(this.__editModeInternal)?b=!0:this._isinsertGroup(this.__editModeInternal)&&this._isOverwriteGroup(a)&&(b=!0),this.__editModeInternal=a,b&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},c.prototype._isinsertGroup=function(a){return 0===a||2===a},c.prototype._isOverwriteGroup=function(a){return 1===a||3===a},c.prototype.GetHighlightText=function(){return this._highlightText},c.prototype.SetHighlightText=function(a){this._highlightText=a},c.prototype.GetReadOnly=function(){return this._readOnly},c.prototype.SetReadOnly=function(a){this._readOnly=a},c.prototype.GetTextboxValue=function(){return this.UIUpdate.GetText()},c.prototype.GetOldValue=function(){return this.OldValue},c.prototype.CanUndo=function(){return this.GetValue()===this.GetOldValue()?!1:!0},c.prototype.GetValue=function(){return""},c.prototype.DragStart=function(){this.DragStartElementID=this.ID},c.prototype.DragEnd=function(b){return this.DragStartElementID="",a.Utility.PreventDefault(b),!1},c.prototype.MouseOut=function(){if(this.IsMouseDown===!0&&(void 0===this.MouseUpPointerType||4===this.MouseUpPointerType||"mouse"===this.MouseUpPointerType)){var b=Math.min(this.OldSelectionStart,this.OldSelectionEnd),c=Math.max(this.OldSelectionStart,this.OldSelectionEnd),d=this.GetText().Substring(b,c);""!==d&&(this.SetSelection(this.OldSelectionStart,this.OldSelectionEnd),a.Utility.DragDrop(this.InputElement)),this.IsMouseDown=!1}},c.prototype.GetText=function(){return""},c.prototype.Focus=function(b){b.SelectionStart=this.SelectionStart;var c=this.UIProcess.Focus(b);return a.Utility.CurrentActiveControlId=this.ID,c?(null!=c.Text&&(this.Text=c.Text),null!=c.SelectionStart&&(this.SelectionStart=c.SelectionStart),null!=c.SelectionEnd&&(this.SelectionEnd=c.SelectionEnd),this.GetReadOnly()&&0===this.FocusType&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd,!0),c):void 0},c.prototype.LoseFocus=function(a){return this.FireKeyExit(),(this.SpinBtnPressed||this.DropDownBtnPressed||this.DropDownObj&&this.DropDownObj.IsMouseOver)&&4!==this.FocusType?void 0:(this.DroppedDown&&(this.DropDownBtnPressed=!1,this.CloseDropDown()),this.SetLastClientValues(),
this.UIProcess.LoseFocus(a))},c.prototype.FireKeyExit=function(){},c.prototype.SetLastClientValues=function(){},c.prototype.MouseDown=function(b){var c=a.Utility.GetMouseButton(b);if(this.MouseButton=c,this.FocusType=1,this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd,this.IsMouseDown=!0,this.MouseDownX=b.x,0===this.MouseButton&&(a.CoreUtility.IsIE()||a.CoreUtility.firefox)&&a.Utility.ClearSelection(this.GetInputElement()),this.DroppedDown&&this.CloseDropDown(),!this.IsNullFormat()){var d=this.UIProcess.MouseDown(c);d&&(null!=d.SelectionStart&&(this.SelectionStart=d.SelectionStart),null!=d.SelectionEnd&&(this.SelectionEnd=d.SelectionEnd,this.SetSelection(this.SelectionStart,this.SelectionEnd)))}},c.prototype.GetInputElement=function(){return this.InputElement},c.prototype.MouseUp=function(b){this.IsMouseDown=!1,this.MouseUpX=b.x,this.IsNullFormat();var c=this.UIProcess.MouseUp(this.InputElement,this.SelectionStart,this.SelectionEnd,this.MouseButton);if(c){if(null!=c.SelectionStart&&(this.SelectionStart=c.SelectionStart),null!=c.SelectionEnd&&(this.SelectionEnd=c.SelectionEnd),0===a.Utility.GetMouseButton(b)&&null!=this.MouseDownX&&this.MouseDownX>this.MouseUpX){var d=this.SelectionStart;this.SelectionStart=this.SelectionEnd,this.SelectionEnd=d}this.MouseDownX=null,this.MouseButton=-1}},c.prototype.MouseWheel=function(b){if(this.ImeMode===!0)return!1;if(this.GetSpinEnabled()){var c=a.Utility.GetMouseWheelValue(0,b);return c>0?this.PerformSpin("up"):0>c&&this.PerformSpin("down"),a.Utility.PreventDefault(b),!1}},c.prototype.PreProcessContextMenu=function(a){return!1},c.prototype.ProcessReservedKey=function(a){switch(a){case 131138:case 131140:case 131141:case 131144:case 131145:case 131148:case 131150:case 131154:case 131159:case 131188:case 262181:case 262183:case 112:case 114:case 115:case 116:case 117:case 121:case 122:case 123:case 65657:case 131081:case 196617:case 131179:case 131181:case 131120:case 131259:case 131261:case 131146:case 196680:case 196681:case 196682:case 131153:case 131156:case 196689:case 262157:return!0}return!1},c.prototype.IsNullFormat=function(){return!1},c.prototype.SetHideValue=function(){var a="";null!=this.GetValue()&&(a=this.GetValue().toString()),this.SetHideText(a)},c.prototype.KeyDown=function(b){var c={},d=b.FuncKeysPressed,e=b.KeyCode;if(this.PreProcessContextMenu(e))return c.System=!1,c;if(229===e)return c.System=!0,c;if(d.Shift&&(e|=65536),d.Ctrl&&(e|=131072),d.Alt){if(null!=this.AccessKey&&this.AccessKey.toLowerCase()===String.fromCharCode(e).toLowerCase())return this.SelectionStart=0,this.SelectionEnd=this.Text.GetLength(),c.System=!0,c;e|=262144}if(this.ProcessReservedKey(e))return c.System=!0,c;var f=524288|e;if(e!==f){var g=this.UIProcess.GetKeyActionName(f,this.Shortcuts);if(null!=g){var h=!0;if(h)return c.System=!1,c}}var i=this.UIProcess.GetKeyActionName(e,this.Shortcuts);switch(i){case"DropDown":return this.GetDropDownEnabled()&&(this.PerformDropDown(),c.System=!1),c;case"SpinUp":return this.GetSpinEnabled()&&this.SpinOnKeys&&(this.PerformSpin("up"),c.System=!1),c;case"SpinDown":return this.GetSpinEnabled()&&this.SpinOnKeys&&(this.PerformSpin("down"),c.System=!1),c}var j=!1;if(this.KeyActionList)for(var k=0;k<this.KeyActionList.length;k++)if(this.KeyActionList[k]===e.toString()){j=!0;break}if(this.DroppedDown&&this.DropDownObj&&262182!=e&&262184!=e&&27!=e&&118!=e&&9!=e&&65545!=e&&(null!=i&&this.DropDownObj.IsShortcut(e)&&(i=null),!i)){if(93===e)return this.CloseDropDown(),!0;if(c.System=!1,!j){var l={"keyCode":0,"shiftKey":!1,"ctrlKey":!1,"altKey":!1};return l.keyCode=b.KeyCode,l.shiftKey=d.Shift,l.ctrlKey=d.Ctrl,l.altKey=d.Alt,this.DropDownObj.KeyDown(l),c}}b.KeyAction=i,b.KeyCode=e;var m=this.UIProcess.KeyDown(b);if(!m){switch(e){case 27:return this.DroppedDown&&(this.CloseDropDown(),this.SetInnerFocus()),c.System=!1,c;case 262182:case 262184:return j||(this.PerformDropDown(),c.System=!0),c;case 262152:return c.KeyCode=10,c;case 38:return j||(this.GetSpinEnabled()&&this.SpinOnKeys&&this.PerformSpin("up"),c.System=!1),c;case 40:return j||(this.GetSpinEnabled()&&this.SpinOnKeys&&this.PerformSpin("down"),c.System=!1),c;case 13:return c.System=!0,c}if(this.IsNullFormat()||20===e||d&&(d.Ctrl||d.Alt)||91===e||144===e||145===e||93===e||92===e)return c.System=!0,c;if(d&&d.Shift&&65552===e)return c.System=!0,c;if("Number"===this.Type)return c.System=!0,c;if(120===e||123===e||113===e||118===e||119===e)return c;var n=this.UIProcess.FireEvent(this,this.InvalidInputEvent,null,"InvalidInput");return null!=n&&(this.FocusType=n),c}if(null!=m.Overwrite&&this.GetOverwrite()!==m.Overwrite&&(0===this._getEditModeInternal()?this._setEditModeInternal(1):1===this._getEditModeInternal()&&this._setEditModeInternal(0)),null!=m.Text&&!this.UpdateText(m))return c.System=!1,c;var o=this.GetSelectionLength();null!=m.SelectionStart&&(this.SelectionStart=m.SelectionStart),null!=m.SelectionEnd&&(this.SelectionEnd=m.SelectionEnd);var p=this.GetSelectionLength();if(m.System||(m.FocusExit?(this.SetHideValue(),m.System=!1):(this.UpdateDisplayText(this.Text),0===o&&0!==p?a.Utility.ShouldFireOnSelectStart=!0:a.Utility.ShouldFireOnSelectStart=!1,this.SetSelection(this.SelectionStart,this.SelectionEnd),a.Utility.ShouldFireOnSelectStart=!1,m.HasSetSelection=!0)),m.EventInfo)if("KeyExit"===m.EventInfo.Type)this.EventInfo=m.EventInfo;else{var n=this.UIProcess.FireEvent(this,m.EventInfo.Name,m.EventInfo.Args,m.EventInfo.Type);null!=n&&(this.FocusType=n)}return null!=m.FocusType&&(this.FocusType=m.FocusType),c=m,c.KeyAction=i,c},c.prototype.GetImeInputText=function(a){var b=this.GetTextboxValue();if(b===this.Text)return"";var c;if(""!==this.Text){var d=Math.min(this.SelectionStart,this.SelectionEnd),e=Math.max(this.SelectionStart,this.SelectionEnd);if(e<this.Text.GetLength()){var f=this.Text.Substring(e,this.GetText().GetLength()),g=b.IndexOf(f);c=-1!==g?b.Substring(d,b.GetLength()-f.GetLength()):""}else c=b.Substring(d,b.GetLength())}else c=b;return"ReInput"===a&&(c=c.Substring(0,c.GetLength())),"Record"===a?c:"LoseFocusInput"===a&&""===c?"":(this.ImeMode=!1,this.ImeSelect=!1,("ReInput"===a||"ClickInput"===a)&&(this.FocusType=8,this.InputElement.blur(),this.InputElement.focus()),c)},c.prototype.KeyUp=function(a){},c.prototype.GetVisible=function(){return!0},c.prototype.PerformDropDown=function(){if(this.Enabled&&this.GetDropDownEnabled()&&this.GetVisible())if(this.DroppedDown)this.CloseDropDown();else{if(this.DropDownObj&&void 0!==this.DropDownObj.GetDropDownContainer){var b=this.DropDownObj.GetDropDownContainer();a.Utility.IsTouchMouseDown?a.Utility.SetZoomStyle(b,this.TouchDropDownScale,this.DropDownObj.GetAlign()):a.Utility.SetZoomStyle(b,"")}this.ShowDropDown()}},c.prototype.DropDownBtnMouseDown=function(a){this.DropDownBtnPressed=!0,(0===a||null==a)&&(this.PerformDropDown(),this.SetInnerFocus(),this.DroppedDown&&this.ResetLocation())},c.prototype.DropDownBtnMouseUp=function(){this.DropDownBtnPressed=!1,this.SetInnerFocus()},c.prototype.ResetLocation=function(){},c.prototype.DropDownBtnMouseOut=function(){this.DropDownBtnPressed&&(this.SetInnerFocus(),this.DropDownBtnPressed=!1)},c.prototype.ShowDropDown=function(a){null!=a&&this.UIUpdate.WriteCssStyle(a)},c.prototype.CloseDropDown=function(){this.DroppedDown=!1,this.DropDownObj.Close(),this.UIUpdate.ClearCssStyle();var a=this.UIProcess.FireEvent(this,this.DropDownCloseEvent,null,"DropDownClose");null!=a&&(this.FocusType=a)},c.prototype.PerformSpin=function(a){var b=this.Increment;if(this.IsNullFormat())this.SetSelection(this.SelectionStart,this.SelectionEnd);else if(this.GetReadOnly());else{"down"===a&&(b*=-1);var c=this.UIProcess.PerformSpin(this.SelectionEnd,b,this.Wrap);if(!c)return;if(null!=c.Text&&!this.UpdateText(c))return;null!=c.SelectionStart&&(this.SelectionStart=c.SelectionStart,this.SelectionEnd=c.SelectionStart),this.UpdateDisplayText(this.Text),this.SetInnerFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)}var d=3;"up"===a?d=this.UIProcess.FireEvent(this,this.SpinUpEvent,null,"SpinUp"):"down"===a&&(d=this.UIProcess.FireEvent(this,this.SpinDownEvent,null,"SpinDown")),null!=d&&(this.FocusType=d)},c.prototype.SpinBtnMouseDown=function(b,c){if(this.SpinBtnPressed=!0,this.DroppedDown)return this.CloseDropDown(),void this.SetInnerFocus();if(0==b||null==b){var d=c===!0?"up":"down";if(this.PerformSpin(d),this.SetInnerFocus(),null==a.Utility.SpinTimer){var e=this;a.Utility.SpinTimer=setInterval(function(){e.PerformSpin(d)},this._getRealSpinDelay())}}},c.prototype._getRealSpinDelay=function(){return 0===this.Delay?150:this.Delay},c.prototype.SpinBtnMouseUp=function(){this.SpinBtnPressed&&(this.SetInnerFocus(),this.SpinBtnPressed=!1),null!=a.Utility.SpinTimer&&(clearInterval(a.Utility.SpinTimer),a.Utility.SpinTimer=null)},c.prototype.SelectStart=function(a){if(this.IsNullFormat())return!0;var b=this.UIProcess.SelectStart(this.InputElement,a,this.MouseButton);return null!=b.SelectionStart&&(this.SelectionStart=b.SelectionStart),null!=b.SetFalse?b.SetFalse:void 0},c.prototype.DoubleClick=function(){if(this.IsNullFormat())return!0;var a=this.UIProcess.DoubleClick(this.SelectionStart);null!=a.SelectionStart&&(this.SelectionStart=a.SelectionStart),null!=a.SelectionEnd&&(this.SelectionEnd=a.SelectionEnd,this.SetSelection(this.SelectionStart,this.SelectionEnd))},c.prototype.Undo=function(){if(!this.GetReadOnly()){var a=this.UIProcess.Undo();if(a&&null!=a.Text){if(!this.UpdateText(a))return;this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)}}},c.prototype.Cut=function(){if(!this.GetReadOnly()){var a=this.UIProcess.Cut(this.GetClipContent(),this.SelectionStart,this.SelectionEnd);a&&(null==a.Text||this.UpdateText(a))&&(null!=a.SelectionStart&&(this.SelectionStart=a.SelectionStart),null!=a.SelectionEnd&&(this.SelectionEnd=a.SelectionEnd),null!=a.Text&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)),null!==a.Color&&this.UIUpdate.SetForeColor(a.Color))}},c.prototype.Copy=function(){this.UIProcess.Copy(this.GetClipContent(),this.SelectionStart,this.SelectionEnd)},c.prototype.Paste=function(b){if(this.GetReadOnly())return!1;if(this.IsNullFormat())return!1;var c=a.Utility.GetPasteData(this.GetUseClipboard());b&&(c=b);var d=this.UIProcess.Paste(this.SelectionStart,this.SelectionEnd,c);return d&&(null==d.Text||this.UpdateText(d))?(null!=d.SelectionStart&&(this.SelectionStart=d.SelectionStart),null!=d.SelectionEnd&&(this.SelectionEnd=d.SelectionEnd),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),null!=d.EventInfo&&this.UIProcess.FireEvent(this,d.EventInfo.Name,d.EventInfo.Args,d.EventInfo.Type),null!=d.FocusExit&&(this.FocusExit=d.FocusExit),!0):!1},c.prototype.Delete=function(){if(!this.GetReadOnly()){var a=this.UIProcess.ProcessDelete(this.SelectionStart,this.SelectionEnd);a&&(null==a.Text||this.UpdateText(a))&&(null!=a.SelectionStart&&(this.SelectionStart=a.SelectionStart),null!=a.SelectionEnd&&(this.SelectionEnd=a.SelectionEnd),null!=a.Text&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.DoDeleteExtraWork()))}},c.prototype.DoDeleteExtraWork=function(){},c.prototype.SelectAll=function(){var a=this.UIProcess.SelectAll();null!=a.SelectionStart&&(this.SelectionStart=a.SelectionStart),null!=a.SelectionEnd&&(this.SelectionEnd=a.SelectionEnd),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.FocusType=2},c.prototype.DragDrop=function(b){if(!a.CoreUtility.IsIE()&&this.GetReadOnly())return!1;if(this.DragStartElementID===this.ID)return this.DragStartElementID="",!1;var c=this.UIProcess.Paste(0,0,b);if(c){if(null!=c.Text){if(!this.UpdateText(c))return;a.CoreUtility.IsIE()||this.SetInnerFocus()}null!=c.SelectionStart&&(this.SelectionStart=c.SelectionStart),null!=c.SelectionEnd&&(this.SelectionEnd=c.SelectionEnd),this.SetSelection(this.SelectionStart,this.SelectionEnd),null!=c.EventInfo&&this.UIProcess.FireEvent(this,c.EventInfo.Name,c.EventInfo.Args,c.EventInfo.Type)}},c.prototype.SetInnerText=function(a){this.SetText(a)},c.prototype.SetText=function(a){},c.prototype.GetInnerText=function(){return this.Text},c.prototype.UpdateText=function(a){return null!=a&&null!=a.Text&&(this.Text=a.Text),!0},c.prototype.RollBack=function(){},c.prototype.AddAllEventsHandler=function(){var c=this,d=this.GetInputElement();null!=d&&(b(d).bind("mousedown.wijinput",function(b){a.GlobalEventHandler.OnMouseDown(c,b)}),b(d).bind("mouseup.wijinput",function(b){a.GlobalEventHandler.OnMouseUp(c,b)}),b(d).bind("selectstart.wijinput",function(b){a.GlobalEventHandler.OnSelectStart(c,b)}),b(d).bind("keydown.wijinput",function(b){a.GlobalEventHandler.OnKeyDown(c,b)}),b(d).bind("keypress.wijinput",function(b){var d=b;a.GlobalEventHandler.OnKeyPress(c,d)}),b(d).bind("keyup.wijinput",function(b){a.GlobalEventHandler.OnKeyUp(c,b)}),b(d).bind("dblclick.wijinput",function(b){a.GlobalEventHandler.OnDblClick(c,b)}),b(d).bind("beforecopy.wijinput",function(b){a.GlobalEventHandler.OnHTML5BeforeCopy(c,b)}),b(d).bind("cut.wijinput",function(b){a.GlobalEventHandler.OnHTML5Cut(c,b)}),b(d).bind("paste.wijinput",function(b){a.GlobalEventHandler.OnHTML5Paste(c,b)}),b(d).bind("focus.wijinput",function(b){a.GlobalEventHandler.OnFocus(c,b)}),b(d).bind("blur.wijinput",function(b){a.GlobalEventHandler.OnLostFocus(c,b)}),b(d).bind("mousewheel.wijinput",function(b){a.GlobalEventHandler.OnMouseWheel(c,b)}),b(d).bind("DOMMouseScroll.wijinput",function(b){a.GlobalEventHandler.OnMouseWheel(c,b)}),b(d).bind("dragstart.wijinput",function(b){a.GlobalEventHandler.OnDragStart(c,b)}),b(d).bind("dragend.wijinput",function(b){a.GlobalEventHandler.OnDragEnd(c,b)}),b(d).bind("mouseout.wijinput",function(b){a.GlobalEventHandler.OnMouseOut(c,b)}),b(d).bind("drop.wijinput",function(b){a.GlobalEventHandler.OnDrop(c,b)}),b(d).bind("touchstart.wijinput",function(b){a.GlobalEventHandler.OnTouchStart(c,b)}),b(d).bind("touchend.wijinput",function(b){a.GlobalEventHandler.OnTouchEnd(c,b)}),b(d).bind("select.wijinput",function(b){a.GlobalEventHandler.OnSelect(c,b)}),a.CoreUtility.safari&&(b(d).bind("dragenter.wijinput",function(a){c._safariDropText=getSelection().toString()}),b(d).bind("dragleave.wijinput",function(a){c._safariDropText=null})),b(d).bind("compositionstart.wijinput",function(b){a.GlobalEventHandler.OnCompositionStart(c,b)}),b(d).bind("compositionupdate.wijinput",function(b){a.GlobalEventHandler.OnCompositionUpdate(c,b)}),b(d).bind("compositionend.wijinput",function(b){a.GlobalEventHandler.OnCompositionEnd(c,b)}),a.CoreUtility.IsPad()&&b(d).bind("input.wijinput",function(b){a.GlobalEventHandler.OnInput(c,b)}))},c.prototype.ResetData=function(a){this.SetText(a.ResetData)},c.prototype._createElementForNoSpinAndNoDropDown=function(a){return a},c.prototype._addControlEventHandler=function(){},c.prototype._reCreate=function(){},c.prototype._onSpinPropertyChanged=function(a){a=a.toLowerCase(),"alignment"===a||"position"===a?this._getRealSpinVisible()&&this._reCreate():"visible"===a&&this._reCreate()},c.prototype._onDropDownPropertyChanged=function(a){a=a.toLowerCase(),"position"===a?this._getRealDropDownVisible()&&this._reCreate():"visible"===a&&this._reCreate()},c.prototype._isSupportClipBoard=function(){return this.GetUseClipboard()?a.CoreUtility.IsIE()?!0:!1:!0},c.prototype._onpropertyChanged=function(){},c.prototype.GetSpinDelay=function(){return this.Delay},c.prototype.SetSpinDelay=function(a){this.Delay=a},c.prototype.GetSpinEnabled=function(){return this.SpinEnabled&&this.Enabled},c.prototype.SetSpinEnabled=function(a){this.SpinEnabled=a},c.prototype.GetSpinIncrement=function(){return this.Increment},c.prototype.SetSpinIncrement=function(a){this.Increment=a},c.prototype.GetSpinOnKeys=function(){return this.SpinOnKeys},c.prototype.SetSpinOnKeys=function(a){this.SpinOnKeys=a},c.prototype.GetSpinVisible=function(){return this.Visible},c.prototype._getRealSpinVisible=function(){return this.GetSpinVisible()},c.prototype.SetSpinVisible=function(a){this.Visible=a},c.prototype.GetSpinWrap=function(){return this.Wrap},c.prototype.SetSpinWrap=function(a){this.Wrap=a},c.prototype.GetAutoDropDown=function(){return this._dropDown.AutoDropDown},c.prototype.SetAutoDropDown=function(a){this._dropDown.SetAutoDropDown(a)},c.prototype.GetDropDownButtonImageUrl=function(){return this._dropDown.GetButtonImage()},c.prototype.SetDropDownButtonImageUrl=function(a){this._dropDown.SetButtonImage(a)},c.prototype.GetDropDownClosingAnimation=function(){return this._dropDown.ClosingAnimation},c.prototype.SetDropDownClosingAnimation=function(a){this._dropDown.SetClosingAnimation(a)},c.prototype.GetDropDownShadow=function(){return this._dropDown.DropDownShadow},c.prototype.SetDropDownShadow=function(a){this._dropDown.SetDropDownShadow(a)},c.prototype.GetDropDownEnabled=function(){return this._dropDown.GetEnabled()&&this.Enabled},c.prototype.SetDropDownEnabled=function(a){this._dropDown.SetEnabled(a)},c.prototype.GetDropDownOpeningAnimation=function(){return this._dropDown.OpeningAnimation},c.prototype.SetDropDownOpeningAnimation=function(a){this._dropDown.SetOpeningAnimation(a)},c.prototype.GetDropDownPosition=function(){return this._dropDown.Position},c.prototype.SetDropDownPosition=function(a){this._dropDown.SetPosition(a)},c.prototype.GetPressedDropDownButtonImageUrl=function(){return this._dropDown.GetPressedButtonImage()},c.prototype.SetPressedDropDownButtonImageUrl=function(a){this._dropDown.SetPressedButtonImage(a)},c.prototype.GetDropDownVisible=function(){return this._dropDown.Visible},c.prototype._getRealDropDownVisible=function(){return this.GetDropDownVisible()},c.prototype.SetDropDownVisible=function(a){this._dropDown.SetVisible(a)},c}();a.BaseInputControl=w;var x;!function(a){a[a.OctalAscII=0]="OctalAscII",a[a.HexAscII=1]="HexAscII",a[a.HexUnicode=2]="HexUnicode",a[a.DefinedCharBase=3]="DefinedCharBase",a[a.DefinedCharAddition=4]="DefinedCharAddition",a[a.CharSubset=5]="CharSubset",a[a.EnumGroup=6]="EnumGroup",a[a.Quantifier=7]="Quantifier",a[a.PromptChar=8]="PromptChar",a[a.Unknow=9]="Unknow"}(x||(x={}));var y=function(){function b(){}return b.ParseFormat=function(c,o){b.Owner=o;var p=new z(b.Owner,0,!1);if(null===c||0===c.length){var r=new t(b.Owner),v=new Array;r._bitState=v;var w=new q(b.Owner,!0),x=new e(b.Owner,!0);w.Add(x);var y=new d(b.Owner,!0);w.Add(y);var A=new l(b.Owner,!0);return w.Add(A),r.FilterField(0,2147483647,w,v),r.InitialText(""),r._trueLength=0,p.PushBack(r),p.formatIsNull=!0,p}for(var B,C=0,D="",E=8,F=5,G=b.GetKeyWord(c,C),H=G.KeyWord,I=G.KeyType,J=G.KeyLen;c.length>C;){switch(I){case 9:throw"InvalidParameter";case 5:var K=b.AnalyseCharSubset(H);if(w=K.uf,!K.Result)throw"Invalid parameter";B=w,E=5;break;case 4:if("\\K"===H)B=new m(b.Owner,!0);else if("\\H"===H)B=new d(b.Owner,!0);else if("\\N"===H)B=new k(b.Owner,!0);else if(H==="\\"+b.DBCS_K)B=new n(b.Owner,!0);else if(H==="\\"+b.DBCS_J)B=new f(b.Owner,!0);else if(H==="\\"+b.DBCS_M)B=new g(b.Owner,!0);else if(H==="\\"+b.DBCS_I)B=new h(b.Owner,!0);else if(H==="\\"+b.DBCS_G)B=new i(b.Owner,!0);else if(H==="\\"+b.DBCS_N)B=new j(b.Owner,!0);else if(H==="\\"+b.DBCS_Z)B=new e(b.Owner,!0);else{if(H!=="\\"+b.DBCS_T)throw"argument null";B=new l(b.Owner,!0)}E=5;break;case 6:var L=[];if(b.AnalyseEnumGroup(H,L)){var M=new u(b.Owner);M.Init(L),p.PushBack(M),E=6,C+=J;var N=b.GetKeyWord(c,C);H=N.KeyWord,I=N.KeyType,J=N.KeyLen;continue}throw"invalid parameter";case 0:try{var O=H.Substring(1);if(O=parseInt(O,8),0===O)throw"argument exception";var P=String.fromCharCode(O);8===E?D+=P:(D=P,E=8)}catch(Q){throw"invalid parameter"}break;case 1:case 2:try{var O=H.Substring(2);if(O=parseInt(O,16),0===O)throw"argument exception";var P=String.fromCharCode(O);8===E?D+=P:(D=P,E=8)}catch(Q){throw"invalid parameter"}break;case 8:8===E?D+=H:(D=H,E=8);break;case 7:throw"invalid parameter";default:throw"invalid parameter"}C+=J;var R=1,S=1;if(C<c.length){switch(G=b.GetKeyWord(c,C),H=G.KeyWord,I=G.KeyType,J=G.KeyLen,I){case 9:throw"invalid parameter";case 5:case 4:case 6:F=5;break;case 7:var T=b.AnalyseQuantifier(H);if(S=T.Min,R=T.Max,!T.Result)throw"invalid parameter";C+=J,G=b.GetKeyWord(c,C),H=G.KeyWord,I=G.KeyType,J=G.KeyLen,F=7;break;case 0:case 2:case 1:case 8:F=8}if(8===E){if(8!==F){if(7===F)throw"invalid parameter";p.PushBack(new s(D))}}else{var U=new t(b.Owner);U.FilterField(S,R,B,[!1,!1,!1]),U.InitialText(a.Utility.ToString(U.GetPromptChar(),S)),U._trueLength=0,p.PushBack(U)}}else if(8===E)p.PushBack(new s(D));else{var U=new t(b.Owner);U.FilterField(1,1,B,[]),p.PushBack(U)}}for(var V=0;V<p.fieldCount&&p.GetFieldByIndex(V)instanceof s;V++);if(V===p.fieldCount)throw"invalid parameter";return p},b.ParseFillExpression=function(a,c){var d={};if(d.Expression="",d.Result=!0,"{}"===a)return d.Expression="{}",d.Result=!0,d;if(void 0!==a&&null!==a&&a.length>0)try{var e=a,f="\x00",g=b.ParseFillingString(e);if(e=g.Format,f=g.FillingChar,"\x00"!==f){if(!b.NullParse(e))throw"argument exception";void 0!==c&&null!==c&&c.fieldCount>0?d.Expression=c.GetFillingString(f):d.Expression=a}else d.Expression=e}catch(h){throw"argument exception"}else d.Expression=null;return d},b.ParseFillingString=function(a){var c={};if(c.Format=a,c.FillingChar="\x00",c.Result=!1,void 0===a||null===a||0===a.length)return c.Result=!1,c;var d=a.indexOf("{"),e=a.indexOf("}");if(-1===d&&-1===e)return a=b.RemoveEscapeChar(a),c.Format=a,c.Result=!1,c;for(;d>0&&"\\"===a.charAt(d-1);)d=a.indexOf("{",d+1);for(;e>0&&"\\"===a.charAt(e-1);)e=a.indexOf("}",e+1);if(e>d){if(-1===d)return a=b.RemoveEscapeChar(a),c.Format=a,c.Result=!1,c;if(e-d===1)c.Format="";else{if("{"===a.charAt(d+1))throw"argument exception";if("\\"===a.charAt(d+1)){if(!(e>d+2))throw"arugment exception";d++}c.FillingChar=a.charAt(d+1)}return c.Result=!0,c}return a=b.RemoveEscapeChar(a),c.Format=a,c.Result=!1,c},b.RemoveEscapeChar=function(a){if(-1!==a.indexOf("\\")){for(var b="",c=a.length,d=0;c>d;d++)"\\"!==a.charAt(d)?b+=a.charAt(d):c>d+1&&(b+=a.charAt(++d));return b}return a},b.NullParse=function(a){var c=b.FindSpecialCh(a,"{",0),d=b.FindSpecialCh(a,"}",0);if(c>-1&&d>-1&&d>c){if(b.FindSpecialCh(a,"{",c+1)>-1)return!1;if(b.FindSpecialCh(a,"}",d+1)>-1)return!1}return!0},b.FindSpecialCh=function(a,b,c){var d=0,e=c-1;do{if(e=a.indexOf(b,e+1),0===e||-1===e)return e;for(var f=e-1;f>0&&"\\"===a.charAt(f);f--)d++}while("\\"===a.charAt(e-1)&&d%2!==0);return e},b.GetKeyWord=function(a,c){var d={};if(d.KeyLen=0,d.KeyType=9,d.KeyWord=null,c>=a.length)return d;var e=a.charAt(c);switch(e){case"\\":var f=b.GetEscapeCharLength(a.Substring(c),d.KeyType,d.KeyLen);if(f.Result)return d.KeyLen=f.KeyLen,d.KeyType=f.KeyType,d.KeyWord=a.substr(c,d.KeyLen),d;var g=a.charAt(c+1);return"A"===g?(d.KeyLen=2,d.KeyType=5,d.KeyWord="[A-Z]",d):g===b.DBCS_A?(d.KeyLen=2,d.KeyType=5,d.KeyWord="["+b.DBCS_A+"-"+b.DBCS_Z+"]",d):"a"===g?(d.KeyLen=2,d.KeyType=5,d.KeyWord="[a-z]",d):g===b.DBCS_a?(d.KeyLen=2,d.KeyType=5,d.KeyWord="["+b.DBCS_a+"-"+b.DBCS_z+"]",d):"D"===g?(d.KeyLen=2,d.KeyType=5,d.KeyWord="[0-9]",d):g===b.DBCS_D?(d.KeyLen=2,d.KeyType=5,d.KeyWord="["+b.DBCS_0+"-"+b.DBCS_9+"]",d):"B"===g?(d.KeyLen=2,d.KeyType=5,d.KeyWord="[0-1]",d):g===b.DBCS_B?(d.KeyLen=2,d.KeyType=5,d.KeyWord="["+b.DBCS_0+"-"+b.DBCS_1+"]",d):"X"===g?(d.KeyLen=2,d.KeyType=5,d.KeyWord="[0-9A-Fa-f]",d):g===b.DBCS_X?(d.KeyLen=2,d.KeyType=5,d.KeyWord="["+b.DBCS_0+"-"+b.DBCS_9+b.DBCS_A+"-"+b.DBCS_F+b.DBCS_a+"-"+b.DBCS_f+"]",d):"W"===g?(d.KeyLen=2,d.KeyType=5,d.KeyWord="[a-zA-Z_0-9]",d):g===b.DBCS_W?(d.KeyLen=2,d.KeyType=5,d.KeyWord="["+b.DBCS_a+"-"+b.DBCS_z+b.DBCS_A+"-"+b.DBCS_Z+b.DBCS__+b.DBCS_0+"-"+b.DBCS_9+"]",d):"K"===g||g===b.DBCS_K||g===b.DBCS_J||g===b.DBCS_Z||"H"===g||g===b.DBCS_T||g===b.DBCS_M||g===b.DBCS_I||g===b.DBCS_G||g===b.DBCS_N||"N"===g||g===b.DBCS_E||g===b.DBCS_V?(d.KeyLen=2,d.KeyType=4,d.KeyWord=a.substr(c,2),d):b.IsSpecialChar(g)?(d.KeyLen=2,d.KeyType=8,d.KeyWord=a.substr(c+1,1),d):(d.KeyWord="",d);case"{":var h=a.indexOf("}",c+1);return-1===h?(d.KeyWord="",d):(d.KeyType=7,d.KeyLen=h+1-c,d.KeyWord=a.substr(c,d.KeyLen),d);case"[":var h=c,i=0;do{if(h=a.indexOf("]",h+1),-1===h)return"";for(var j=h-1;j>0&&"\\"===a.charAt(j);j--)i++}while("\\"===a.charAt(h-1)&&i%2!==0);return d.KeyType=5,d.KeyLen=h+1-c,d.KeyWord=a.substr(c,d.KeyLen),d;case"(":var h=c;do if(h=a.indexOf(")",h+1),-1===h)return"";while("\\"===a.charAt(h-1));return d.KeyType=6,d.KeyLen=h+1-c,d.KeyWord=a.substr(c,d.KeyLen),d;case"*":return d.KeyLen=1,d.KeyType=7,d.KeyWord="{0,}",d;case"+":return d.KeyLen=1,d.KeyType=7,d.KeyWord="{1,}",d;case"?":return d.KeyLen=1,d.KeyType=7,d.KeyWord="{0,1}",d;default:for(var k=c+1;k<a.length&&!b.IsSpecialChar(a.charAt(k));k++);return d.KeyType=8,d.KeyLen=k-c,d.KeyWord=a.substr(c,d.KeyLen),d}},b.IsSpecialChar=function(a){return"\\"===a||"{"===a||"}"===a||"["===a||"]"===a||"("===a||")"===a||"."===a||"*"===a||"+"===a||"?"===a},b.GetEscapeCharLength=function(a,c,d){var e={};if(e.Result=!1,e.KeyType=c,e.Length=d,"\\"!==a.charAt(0))return e;var f=1,g=a.charAt(1);return"x"===g?a.length<f+3?e:(e.Length=4,e.KeyType=1,e.Result=!0,e):"u"===g?a.length<f+5?e:(e.Length=6,e.KeyType=2,e.Result=!0,e):b.IsOctalChar(g)?a.length<f+3?e:(e.Length=4,e.KeyType=0,e.Result=!0,e):e},b.IsOctalChar=function(a){return a>="0"&&"7">=a},b.AnalyseQuantifier=function(a){var b={};b.Min=-1,b.Max=-1,b.Result=!1;var c=a.indexOf(",",1);if(-1===c)try{return b.Min=parseInt(a.substr(1,a.length-2)),b.Max=b.Min,b.Result=b.Max>0,b}catch(d){return b.Result=!1,b}try{return b.Min=parseInt(a.substr(1,c-1)),c===a.length-2?b.Max=Math.pow(2,31):b.Max=parseInt(a.substr(c+1,a.length-c-2)),b.Min<0||b.Min>b.Max||0===b.Max?(b.Result=!1,b):(b.Result=!0,b)}catch(d){return b.Result=!1,b}},b.AnalyseCharSubset=function(a,c){var r={};r.uf=c,r.Result=!1;var s=[],t=1,u=!0,v="";if("[]"===a){if(s.push(new e(b.Owner,!0)),s.push(new d(b.Owner,!0)),s.push(new l(b.Owner,!0)),r.uf&&r.uf.filterArray.length>0)for(var w=0;w<c.filterArray.length;w++)s.push(c.filterArray[w]);return r.uf=new q(b.Owner,!0),r.uf.AddRange(s),r.Result=!0,r}if("[^]"===a){if(s.push(new e(b.Owner,!1)),s.push(new d(b.Owner,!1)),s.push(new l(b.Owner,!1)),r.uf&&r.uf.filterArray.length>0)for(var w=0;w<c.filterArray.length;w++)s.push(c.filterArray[w]);return r.uf=new q(b.Owner,!0),r.uf.AddRange(s),r.uf.filterArray[0]._include=!1,r.uf.filterArray[1]._include=!1,r.uf.filterArray[2]._include=!1,r.Result=!0,r}for("^"===a.charAt(t)&&(u=!1,t++);t<a.length-1;){var x=a.charAt(t),y=1,z=0;switch(x){case"-":return r.Result=!1,r;case"^":if(u===!1)throw"invalid fromat";if(v.length>0){var A=new o(v,"");A._include=u,s.push(A)}if(s.length>0){r.uf=new q(b.Owner,!0),r.uf.AddRange(s);for(var w=0;w<r.uf.filterArray.length;w++)if(!r.uf.filterArray[w]._include)return r.Result=!1,r;var B=b.AnalyseCharSubset("["+a.substr(t,a.length-t),r.uf);return r.uf=B.uf,r.Result=B.Result,r}return r.Result=!1,r;case"\\":var C=b.GetEscapeCharLength(a.substr(t),y,z);if(y=C.KeyType,z=C.Length,C.Result){var D=16,E=null;0===y?(D=8,E=a.substr(t+1,z-1)):E=a.substr(t+2,z-2),a=a.substring(0,t)+a.substr(t+z);var F=String.fromCharCode(parseInt(E,D));a=a.substring(0,t)+F+a.substr(t);continue}var G=a.charAt(t+1);if("A"===G)s.push(new p("A","Z",b.Owner,!0)),t++;else if(G===b.DBCS_A)s.push(new p(b.DBCS_A,b.DBCS_Z,b.Owner,!0)),t++;else if("a"===G)s.push(new p("a","z",b.Owner,!0)),t++;else if(G===b.DBCS_a)s.push(new p(b.DBCS_a,b.DBCS_z,b.Owner,!0)),t++;else if("D"===G)s.push(new p("0","9",b.Owner,!0)),t++;else if(G===b.DBCS_D)s.push(new p(b.DBCS_0,b.DBCS_9,b.Owner,!0)),t++;else if("B"===G)s.push(new p("0","1",b.Owner,!0)),t++;else if(G===b.DBCS_B)s.push(new p(b.DBCS_0,b.DBCS_1,b.Owner,!0)),t++;else if("X"===G)s.push(new p("0","9",b.Owner,!0)),s.push(new p("A","F",b.Owner,!0)),s.push(new p("a","f",b.Owner,!0)),t++;else if(G===b.DBCS_X)s.push(new p(b.DBCS_0,b.DBCS_9,b.Owner,!0)),s.push(new p(b.DBCS_A,b.DBCS_F,b.Owner,!0)),s.push(new p(b.DBCS_a,b.DBCS_f,b.Owner,!0)),t++;else if("W"===G)s.push(new p("0","9",b.Owner,!0)),s.push(new p("A","Z",b.Owner,!0)),s.push(new p("a","z")),v+="_",t++;else if(G===b.DBCS_W)s.push(new p(b.DBCS_0,b.DBCS_9,b.Owner,!0)),s.push(new p(b.DBCS_A,b.DBCS_Z,b.Owner,!0)),s.push(new p(b.DBCS_a,b.DBCS_z,b.Owner,!0)),v+=b.DBCS__,t++;else if("K"===G)s.push(new m(b.Owner,!0)),t++;else if("H"===G)s.push(new d(b.Owner,u)),t++;else if(G===b.DBCS_K)s.push(new n(b.Owner,!0)),t++;else if(G===b.DBCS_J)s.push(new f(b.Owner,!0)),t++;else if(G===b.DBCS_M)s.push(new g(b.Owner,!0)),t++;else if(G===b.DBCS_I)s.push(new h(b.Owner,!0)),t++;else if("N"===G)s.push(new k(b.Owner,!0)),t++;else if(G===b.DBCS_N)s.push(new j(b.Owner,!0)),t++;else if(G===b.DBCS_G)s.push(new i(b.Owner,!0)),t++;else if(G===b.DBCS_Z)s.push(new e(b.Owner,!0)),t++;else if(G===b.DBCS_T)s.push(new l(b.Owner,!0)),t++;else{if("\\"!==G&&"]"!==G&&"["!==G&&"-"!==G&&"^"!==G)return!1;if(-1!==v.indexOf(G)){t++;continue}v+=G,t++}break;default:if(a.length>t+2&&"-"===a.charAt(t+1)){var H=b.GetEscapeCharLength(a.substr(t+2),y,z);if(y=H.KeyType,z=H.Length,H.Result){var E=null,D=16;0===y?(D=8,E=a.substr(t+2+1,z-1)):E=a.substr(t+2+2,z-2);var I=t+2;a=a.substring(0,I)+a.substr(I+z);var F=String.fromCharCode(parseInt(E,D));a=a.substring(0,I)+F+a.substr(I)}var J,K;a.charAt(t)>a.charAt(t+2)?(J=a.charAt(t+2),K=a.charAt(t)):(J=a.charAt(t),K=a.charAt(t+2));var L=new p(J,K,b.Owner,!0);s.push(L),t+=2;break}if(-1!==v.indexOf(x)){t++;continue}v+=x}t++}v.length>0&&s.push(new o(v,"",b.Owner,!0));var M=s.length;if(r.uf&&r.uf.filterArray.length>0)for(var w=0;w<r.uf.filterArray.length;w++)s.push(c.filterArray[w]);r.uf=new q(b.Owner,!0),r.uf.AddRange(s);for(var w=0;M>w;w++)r.uf.filterArray[w]._include=u;return r.Result=!0,r},b.AnalyseEnumGroup=function(b,c){b=b.Substring(1,1+b.length-2);for(var d=0,e=0;d<b.length;){var f=a.Utility.IndexOfAny(b,["|",")","\\","("],d);if(-1!==f){if("\\"===b.charAt(f)){var g=b.charAt(f+1);if("\\"===g||")"===g||"|"===g||"("===g){if(b=b.Substring(0,f)+b.Substring(f+1,b.length),d=f+1,d===b.length){var h=b.Substring(e);if(0===h.length)return!1;c.push(h)}continue}return!1}if("|"!==b.charAt(f))return!1;var h=b.Substring(e,f);if(0===h.length)return!1;c.push(h),d=f+1,e=d}else{var h=b.Substring(e);if(0===h.length)return!1;c.push(h),d=b.length}}return!0},b.DBCS_A=a.CharProcess.CharEx.ToFullWidth("A").text,b.DBCS_a=a.CharProcess.CharEx.ToFullWidth("a").text,b.DBCS_B=a.CharProcess.CharEx.ToFullWidth("B").text,b.DBCS_D=a.CharProcess.CharEx.ToFullWidth("D").text,b.DBCS_J=a.CharProcess.CharEx.ToFullWidth("J").text,b.DBCS_K=a.CharProcess.CharEx.ToFullWidth("K").text,b.DBCS_W=a.CharProcess.CharEx.ToFullWidth("W").text,b.DBCS_X=a.CharProcess.CharEx.ToFullWidth("X").text,b.DBCS_Z=a.CharProcess.CharEx.ToFullWidth("Z").text,b.DBCS_T=a.CharProcess.CharEx.ToFullWidth("T").text,b.DBCS_M=a.CharProcess.CharEx.ToFullWidth("M").text,b.DBCS_I=a.CharProcess.CharEx.ToFullWidth("I").text,b.DBCS_N=a.CharProcess.CharEx.ToFullWidth("N").text,b.DBCS_G=a.CharProcess.CharEx.ToFullWidth("G").text,b.DBCS_E=a.CharProcess.CharEx.ToFullWidth("E").text,b.DBCS_V=a.CharProcess.CharEx.ToFullWidth("V").text,b.DBCS_z=a.CharProcess.CharEx.ToFullWidth("z").text,b.DBCS_0=a.CharProcess.CharEx.ToFullWidth("0").text,b.DBCS_1=a.CharProcess.CharEx.ToFullWidth("1").text,b.DBCS_9=a.CharProcess.CharEx.ToFullWidth("9").text,b.DBCS_F=a.CharProcess.CharEx.ToFullWidth("F").text,b.DBCS_f=a.CharProcess.CharEx.ToFullWidth("f").text,b.DBCS__=a.CharProcess.CharEx.ToFullWidth("_").text,b}(),z=function(a){function b(b,c,d){a.call(this,c),this._focusNull="",this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this._owner=b,this.formatIsNull=d}return __extends(b,a),b.prototype.GetShowLiterals=function(){return this._owner.GetShowLiterals()},b.prototype.GetFieldByIndex=function(a){return this.fieldArray[a]},b.prototype.GetLength=function(){var a=this.ValueIsNull();if(a&&""!==this._focusNull&&!this.formatIsNull)return this._focusNull.GetLength();if(a===!0&&""!==this._focusNull)return 0;for(var b=this.GetLastVisibleFieldIndex(this.GetShowLiterals()),c=0,d=0;b>=d;d++){
var e=this.GetFieldByIndex(d);c+=e.GetLength()}return c},b.prototype.GetInputFieldIndexByPos=function(a){var b,c=null,d=0,e=this.GetFieldIndex(a,d);b=e.index,d=e.offset,0!==b&&0===d&&"PromptField"!==this.fieldArray[b-1].fieldLabel&&(b--,d=this.fieldArray[b].text.GetLength());var f=this.fieldArray[b];if(d===f.text.GetLength()){var g;if(d<f._maxLength){if(c=b,c!==this.fieldCount-1)for(g=b+1;g<this.fieldCount&&"PromptField"===this.fieldArray[g].fieldLabel;g++);}else for(g=b+1;g<this.fieldCount;g++)if("PromptField"!==this.fieldArray[g].fieldLabel){c=g;break}}else c=b;var h={},i={};if(c)for(var j=!1;j===!1;){if(f=this.fieldArray[c],"FilterField"===f.fieldLabel)i.fieldMark=f._filter.filterLabel,j=!0;else if("EnumField"===f.fieldLabel)i.fieldMark="Enum",j=!0;else{if(c===this.fieldCount-1){i=null;break}c++}i.fieldIndex=c}else i=null;return null!=i?(h.currentField=i,h):null},b.prototype.GetCurrentField=function(a){for(var b={},c=0,d=0,e=0;e<this.fieldCount;e++){var f=this.fieldArray[e];"PromptField"===f.fieldLabel&&d++;var g=f.GetLength();if(c+=g,c>=a)return"PromptField"===f.fieldLabel?a===c-g?b.index=e-d:a===c?b.index=e-d+1:b.index=-1:b.index=e-d,b}},b.prototype.GetText=function(){for(var a="",b=0;b<this.fieldCount;b++){var c=this.fieldArray[b];a+=c.text}return a},b.prototype.GetTextSimpleMode=function(a){for(var b="",c=0;c<this.fieldCount;c++){var d=this.fieldArray[c];("PromptField"!==d.fieldLabel||a)&&(b+=d.text)}return b},b.prototype.GetExistLength=function(){var a,b,c=this.fieldCount;for(a=this.fieldCount-1;a>=0;a--)if(b=this.fieldArray[a],"PromptField"!==b.fieldLabel){c=a;break}var d=0;for(a=0;c>=a;a++)b=this.fieldArray[a],a===c?d>=21474e3?d=b._maxLength:d+=b._maxLength:d+=b.text.GetLength();return d},b.prototype.GetNonLiteralsText=function(a,b){var c,d="",e=0,f=this.GetFieldIndex(a,e);c=f.index,e=f.offset;var g,h=0;f=this.GetFieldIndex(a+b,h),g=f.index,h=f.offset,0!==g&&0===h&&(g--,h=this.fieldArray[g].text.GetLength());for(var i=c;g>=i;i++){var j=this.fieldArray[i];"PromptField"!==j.fieldLabel&&(c===g?(d=j.text.Substring(e,h),d.GetLength()>j._trueLength&&(d=d.Substring(0,j._trueLength))):d+=i===c?j.text.Substring(e,j.text.GetLength()):i===g?j.text.Substring(0,h):j.text.Substring(0,j.text.GetLength()))}return d},b.prototype.GetNonPromptText=function(a,b){var c,d="",e=0,f=this.GetFieldIndex(a,e);c=f.index,e=f.offset;var g,h=0;f=this.GetFieldIndex(a+b,h),g=f.index,h=f.offset,0!==g&&0===h&&(g--,h=this.fieldArray[g].text.GetLength());for(var i=c;g>=i;i++){var j=this.fieldArray[i];"PromptField"!==j.fieldLabel&&(c===g?d=j.text.Substring(e,h):d+=i===c?j.text.Substring(e,j.text.GetLength()):i===g?j.text.Substring(0,h):j.text)}return d},b.prototype.ValueIsNull=function(){for(var a=0;a<this.fieldCount;a++){var b=this.fieldArray[a];if("PromptField"!==b.fieldLabel&&0!==b.GetFieldStatus())return!1}return!0},b.prototype.ValueIsFull=function(a){a=a?a:0;var b,c;if(null!=a&&1===a)for(b=0;b<this.fieldCount;b++){if(c=this.fieldArray[b],1===this.fieldCount&&0===c._minLength)return!0;if("PromptField"!==c.fieldLabel&&!c.GetFieldIsFull())return!1}else for(b=0;b<this.fieldCount;b++)if(c=this.fieldArray[b],"PromptField"!==c.fieldLabel&&2!==c.GetFieldStatus())return!1;return!0},b.prototype.GetShowText=function(a,b,c){if(!c){var d=this.ValueIsNull();if(d===!0&&""!==this._focusNull&&""==b)return this._focusNull;if(d===!0&&""!==this._focusNull&&null==b)return"";if(d===!0&&"LoseFocus"===b)return null!==this._owner._getDisplayNullExpression()?this._owner._getDisplayNullExpression():this.GetText()}var e=this.GetLastVisibleFieldIndex(a);if(0>e)return"";for(var f="",g=0;e>g;g++)f+=this.fieldArray[g].text;if(e<this.fieldCount){var h=this.fieldArray[e];f+="PromptField"===h.fieldLabel||1===a?this.fieldArray[e].text:h.text.Substring(0,h._trueLength)}return f},b.prototype.GetLastVisibleFieldIndex=function(a){var b=this.fieldCount-1;if(1!==a){var c=this.fieldCount-1,d=!0;for(b=c;b>=0;b--){var e=this.fieldArray[b];if("PromptField"!==e.fieldLabel){if(0!==e._trueLength){if(e._trueLength>0&&e._trueLength<e._minLength)break;if(2===a){d&&(b=c);break}for(;c>b&&"PromptField"===this.fieldArray[b+1].fieldLabel;)b++;break}d=!1}}}return b},b.prototype.GetValue=function(){for(var a,b=this.fieldCount-1;b>=0&&(a=this.fieldArray[b],"PromptField"===a.fieldLabel||0===a._trueLength);b--);if(0>b)return"";for(var c="",d=0;b>=d;d++)if(a=this.fieldArray[d],"PromptField"!==a.fieldLabel){var e=a._trueLength,f=a.text,g=f;if("FilterField"===a.fieldLabel){g=g.Substring(0,e);for(var h=0;e>h;h++)a._bitState[h]===!1&&(g=g.Substring(0,h)+" "+g.Substring(h+1,g.GetLength()));var i=f.GetLength(),j=g.GetLength();if(0===e&&0!==i){if(d!==b){for(var k="",l=0;i>l;l++)k+=" ";g=k}}else if(i>j&&d!==b){for(var k="",l=0;i-j>l;l++)k+=" ";g+=k}}else-1===a._activeItem&&(g=" ");c+=g}return c},b.prototype.GetOldValue=function(){for(var a,b="",c=0;c<this.fieldCount;c++)if(a=this.fieldArray[c],"PromptField"!==a.fieldLabel){var d;if("FilterField"===a.fieldLabel)if(d=a.undoText,a._undoBitState&&a._undoBitState.length>0)for(var e=!0,f=a._undoBitState.length-1;f>=0;f--)a._undoBitState[f]===!1?d=e?d.Substring(0,d.GetLength()-1):d.Substring(0,f)+" "+d.Substring(f+1,d.GetLength()):e=!1;else d="";else d=-1!==a._undoItem?a.undoText:"";b+=d}return b},b.prototype.SetValue=function(a,b){if(!a)return this.ClearContent(),!0;var c=!1;return null!=b&&(c=b),this.SetFieldCollectionValue(a,c)?!0:(this.RollBack(),!1)},b.prototype.SetFieldCollectionValue=function(a,b){this.ClearContent();var c=!1;return null!=b&&(c=b),0!==a.GetLength()&&this.Insert(0,a,c,!1),!0},b.prototype.ClearContent=function(){if(this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.formatIsNull&&this.SaveUndoState(),this.fieldCount>0)for(var a=0;a<this.fieldCount;a++){var b=this.fieldArray[a];b.oldText=b.text,b.Delete(0,b.text.GetLength())}},b.prototype.RollBack=function(){if(this.fieldCount>0)for(var a=0;a<this.fieldCount;a++){var b=this.fieldArray[a];b.RollBack()}},b.prototype.SaveOldState=function(){if(this.fieldCount>0)for(var a=0;a<this.fieldCount;a++){var b=this.fieldArray[a];"PromptField"!==b.fieldLabel&&b.SaveOldState()}},b.prototype.SaveUndoState=function(){if(this.formatIsNull){var a=this.fieldArray[0],b=-1;if(-1===this.oldStart)a.SaveUndoState(),b=this.newStart;else{var c=a.text.substr(this.newStart,this.newLength);b=a.undoText.IndexOf(c,this.oldStart),b!==this.oldStart+this.oldLength&&(b=this.newStart,b+this.newLength!==this.oldStart&&a.SaveUndoState())}this.oldStart>0?this.oldStart=Math.min(this.oldStart,b):this.oldStart=b,this.oldLength+=this.newLength}else if(this.fieldCount>0)for(var d=0;d<this.fieldCount;d++){var a=this.fieldArray[d];"PromptField"!==a.fieldLabel&&a.SaveUndoState()}},b.prototype.Undo=function(){if(this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.fieldCount>0)for(var a=0;a<this.fieldCount;a++){var b=this.fieldArray[a];"PromptField"!==b.fieldLabel&&b.Undo()}},b.prototype.PerformSpin=function(a,b,c){var d,e=this.GetFieldIndex(a,d),f=e.index;if(d=e.offset,this.SaveOldState(),d>0||"EnumField"===this.fieldArray[f].fieldLabel){d=this.fieldArray[f].PerformSpin(d,b,c);for(var g=0,h=0;f>h;h++)g+=this.fieldArray[h].text.GetLength();a=g+d}else{for(var i,j=f;j<this.fieldCount;j++){if(i=this.fieldArray[j],0===i._minLength){if(0===i.text.GetLength())continue;break}if("EnumField"===i.fieldLabel){d=i.PerformSpin(d,b,c);for(var g=0,h=0;f>h;h++)g+=this.fieldArray[h].text.GetLength();return a=g+d}break}if(f>0&&(i=this.fieldArray[f-1],d=i.text.GetLength(),d<i._minLength&&(d=i._minLength),d=i.PerformSpin(d,b,c),"EnumField"===i.fieldLabel)){for(var g=0,h=0;f-1>h;h++)g+=this.fieldArray[h].text.GetLength();a=g+d}}return a},b.prototype.Delete=function(a,b){if(0===this.fieldCount)return a;var c=0;this.SaveOldState();var d=this.GetFieldIndex(a,c),e=d.index;c=d.offset,"PromptField"===this.fieldArray[e].fieldLabel&&b>this.fieldArray[e].text.GetLength()-c&&(a+=this.fieldArray[e].text.GetLength()-c,b-=this.fieldArray[e].text.GetLength()-c,e++,c=0),this.newStart=a,this.newLength=b,this.formatIsNull&&this.SaveUndoState();var f=0;d=this.GetFieldIndex(a+b,f);var g=d.index;for(f=d.offset;0!==g&&0===f;){var h=this.fieldArray[g-1];if("PromptField"===h.fieldLabel)break;g--,f=this.fieldArray[g].text.GetLength()>this.fieldArray[g]._minLength?this.fieldArray[g].text.GetLength():this.fieldArray[g]._minLength}for(var i=e;g>=i;i++){var h=this.fieldArray[i],j=c;if(e===g)f>c?c=h.Delete(c,f-c):c-=c-f;else if(i===e){var k=h.text.GetLength()-c;k>0&&(c=h.Delete(c,h.text.GetLength()-c))}else c=i===g?h.Delete(c,f):h.Delete(c,h.text.GetLength());null!=c&&(a+=c-j),c=0}return a},b.prototype.Replace=function(a,b,c,d){var e={};e.cursorPos=a,e.text=c;var f=this.GetFieldIndex(a,g),g=0,f=0,h={};h=this.GetFieldIndex(a,g),f=h.index,g=h.offset,this.SaveOldState();for(var i;f<this.fieldCount&&(i=this.fieldArray[f],!(i._minLength>0||i.text.GetLength()>0));f++);for(;0!==f&&0===g&&"PromptField"===this.fieldArray[f].fieldLabel;)f--,i=this.fieldArray[f],g=i.text.GetLength(),g<i._minLength&&(g=i._minLength);this.newStart=a,this.newLength=b;var j,k=0;h=this.GetFieldIndex(a+b,k),j=h.index,k=h.offset;for(var l=0,m=f;j>m;m++)i=this.fieldArray[j-1],l+=i.text.GetLength();for(l+=k;0!==j&&0===k&&(i=this.fieldArray[j-1],"PromptField"!==i.fieldLabel&&i.text.GetLength()<i._maxLength);)j--,k=this.fieldArray[j].text.GetLength();for(var n=c,o=!1,p=a-g,q=f;q<=this.fieldCount-1;q++){o=!1,i=this.fieldArray[q];var r=i.text.GetLength()>i._minLength?i.text.GetLength():i._minLength;if("PromptField"===i.fieldLabel){if(r=i.GetLength(),d){var s=i.text.Substring(g,i.text.GetLength()),t=c.GetLength();if(c.GetLength()>=s.GetLength()?(c.Substring(0,s.GetLength())!==s&&(o=!0),c=c.Substring(s.GetLength(),c.GetLength()),a+=s.GetLength()):(c.Substring(0,s.GetLength())!==s&&(o=!0),c="",a+=c.GetLength()),o&&t===c.GetLength())break}else p+g===a&&(a+=r-g);p+=i.text.GetLength()-g}else{var u=g,v=q===this.fieldCount-1;if(q>j){var w={},v=q===this.fieldCount-1;w=i.Insert(g,c,v),g=w.offset,c=w.text,o=w.existInvalid}else if(f===j){var x={};x=i.Replace(g,k-g,c,v),g=x.offset,c=x.text,o=x.existInvalid}else if(q===f){var x={};x=i.Replace(g,r-g,c,v),g=x.offset,c=x.text,o=x.existInvalid}else if(q===j){var x={};k-g>0?x=i.Replace(g,k-g,c,v):b>0&&(x=i.Replace(g,b,c,v)),g=x.offset,c=x.text,o=x.existInvalid}else{var x={};x=i.Replace(g,r,c),g=x.offset,c=x.text,o=x.existInvalid}var y=2!==i.GetFieldStatus();if(y&&o)break;a+=g-u,p+=i._minLength>i.text.GetLength()?i._minLength:i.text.GetLength()}if(g=0,""===c){if(j>q){q++;for(var m=q,z=0;j>q;q++)"PromptField"!==this.fieldArray[q].fieldLabel&&this.fieldArray[q].Delete(g,this.fieldArray[q].text.GetLength());for(var A=0;m>A;A++){var i=this.fieldArray[A],r=i.GetLength();z+=r}if(a===z&&i._trueLength===i._maxLength)for(;j>=m&&("PromptField"===this.fieldArray[m].fieldLabel&&m!==this.fieldCount-1);m++)a+=this.fieldArray[m].text.GetLength();if(0===k)break;"PromptField"!==this.fieldArray[j].fieldLabel&&this.fieldArray[j].Delete(g,k)}break}}return n===c?(this.RollBack(),e.success=!1):e.success=!0,e.cursorPos=a,e.text=c,e},b.prototype.SetText=function(a,b){var c=0,d={};if(d.cursorPos=c,d.text=a,0===this.fieldCount||!a||0>c)return d;var e=0,f=0,g={};if(g=this.GetFieldIndex(c,e),f=g.index,e=g.offset,e===this.fieldArray[f]._maxLength)return d;for(;0!==f&&0===e;){var h=this.fieldArray[f-1];if(!("PromptField"!==h.fieldLabel&&h.text.GetLength()<h._maxLength))break;f--,e=this.fieldArray[f]._trueLength,e<this.fieldArray[f]._minLength&&(e=this.fieldArray[f]._minLength)}for(var i=!1,j=f,k=c-e;j<this.fieldCount;j++){i=!1;var h=this.fieldArray[j];if("PromptField"===h.fieldLabel){if(b){var l=h.text.Substring(e,h.text.GetLength()),m=a.GetLength();if(a.GetLength()>=l.GetLength()?a.Substring(0,l.GetLength())!==l?i=!0:(a=a.Substring(l.GetLength(),a.GetLength()),c+=l.GetLength()):(l.Substring(0,a.GetLength())!==a&&(i=!0),a="",c+=a.GetLength()),i&&a.GetLength()===m)return d.isValid=!1,d}else k+e===c&&(c+=h.maxLength-e);k+=h.maxLength-e}else{var n=e,o={},p=j===this.fieldCount-1;o=h.SetTextInternal(a,e,p),this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.formatIsNull&&this.SaveUndoState(),e=o.offset,a=o.text,i=o.existInvalid;var q=o.exception;if(i&&q)return d.isValid=!1,d;c+=e-n,k+=h._minLength<h._trueLength?h._trueLength:h._minLength}if(e=0,0===a.GetLength()&&(i||q)){if(!b)break;if(i)return d.isValid=!1,d}}if(j>=this.fieldCount&&""!==a&&a.GetLength()>0)return d.isValid=!1,d;var r=this.GetFieldIndex(c,e),s=r.index,t=r.offset;return j<this.fieldCount&&s===j+1&&0===t&&this.fieldArray[j].text.GetLength()===this.fieldArray[j]._maxLength&&"PromptField"===this.fieldArray[j+1].fieldLabel&&(c+=this.fieldArray[j+1].GetLength()),d.isValid=!0,d.cursorPos=c,d.text=a,d},b.prototype.Insert=function(a,b,c,d){var e={};if(e.cursorPos=a,e.text=b,0===this.fieldCount||!b||0>a)return e;var f=0,g=this.GetFieldIndex(a,f),h=g.index;if(f=g.offset,f===this.fieldArray[h]._maxLength)return e;for(;0!==h&&0===f;){var i=this.fieldArray[h-1];if(!("PromptField"!==i.fieldLabel&&i.text.GetLength()<i._maxLength))break;if(h--,f=this.fieldArray[h]._trueLength,f<this.fieldArray[h]._minLength){if(f=this.fieldArray[h]._minLength,e=this.InsertProcess(h,f,a,b,c),""===e.text)return e;if(a===f){h++,f=0;break}}}return this.InsertProcess(h,f,a,b,c,d)},b.prototype.InsertProcess=function(a,b,c,d,e,f){var g={},h=!1,i=a,j=c-b;for(this.SaveOldState();i<this.fieldCount;i++){h=!1;var k=this.fieldArray[i];if("PromptField"===k.fieldLabel){if(e){var l=k.text.Substring(b,k.text.GetLength()),m=d.GetLength();if(d.GetLength()>=l.GetLength()?(d.Substring(0,l.GetLength())!==l&&(h=!0),d=d.Substring(l.GetLength(),d.GetLength()),c+=l.GetLength()):(l.Substring(0,d.GetLength())!==d&&(h=!0),d="",c+=d.GetLength()),h&&d.GetLength()===m)break}else c+=k.maxLength-b;j+=k.maxLength-b}else{var n=b,o=i===this.fieldCount-1,p=k.Insert(b,d,o,f);b=p.offset,d=p.text,h=p.existInvalid;var q=p.exception;if(h&&q){if(d===g.text)return g;break}c+=b-n,j+=k._minLength<k._trueLength?k._trueLength:k._minLength}if(b=0,0===d.GetLength())break}if(i>=this.fieldCount&&""!==d&&d.GetLength()>0&&d===g.text)return g;var r=this.GetFieldIndex(c,b),s=r.index,t=r.offset;return i<this.fieldCount&&s===i+1&&0===t&&this.fieldArray[i].text.GetLength()===this.fieldArray[i]._maxLength&&2!==this.GetShowLiterals()&&"PromptField"===this.fieldArray[i+1].fieldLabel&&i+1!==this.fieldCount-1&&(c+=this.fieldArray[i+1].GetLength()),g.cursorPos=c,g.text=d,g},b.prototype.MoveField=function(a,b){var c=this.GetFieldIndex(a),d=c.index,e=c.offset;if(-1===d)return-1;if(b){if(d===this.fieldCount-1)return-1;for(;0===this.GetFieldByIndex(d).text.GetLength()&&d<this.fieldCount;)d++;if(d===this.fieldCount-1)return-1;if(d++,"PromptField"===this.GetFieldByIndex(d).fieldLabel){if(d===this.fieldCount-1)return-1;d++}for(var f=0,g=0;d>g;g++)f+=this.GetFieldByIndex(g).GetLength();return f}if(0===d||1===d&&0===e)return-1;for(;0===this.GetFieldByIndex(d).text.GetLength()&&d>0;)d--;if(0===d)return-1;if(d--,"PromptField"===this.GetFieldByIndex(d).fieldLabel){if(0===d)return-1;d--}for(var f=0,g=0;d>g;g++)f+=this.GetFieldByIndex(g).GetLength();return f},b.prototype.GetPosByCurrentField=function(a){if(null==a)return null;for(var b=0,c=-1,d=!1;b<this.fieldCount;b++){var e=this.fieldArray[b];if("PromptField"!==e.fieldLabel&&c++,c===a){d=!0;break}}if(d)return this.GetFieldRange(b);if(-1===c)return null;for(b>=this.fieldCount&&(b=this.fieldCount-1);"PromptField"===this.fieldArray[b].fieldLabel;)b--;return this.GetFieldRange(b)},b.prototype.GetFirstInputPosition=function(){var a=this.ValueIsNull();return a&&""!==this._focusNull&&!this.formatIsNull?0:"PromptField"===this.fieldArray[0].fieldLabel?this.GetFieldRange(1).start:0},b.prototype.GetTotalInputFieldCount=function(){var a=0;if(this.fieldCount>0)for(var b=0;b<this.fieldCount;b++){var c=this.fieldArray[b];"PromptField"!==c.fieldLabel&&a++}return a},b.prototype.GetFieldIndexByPos=function(a){return this.GetFieldIndex(a)},b.prototype.CanUndo=function(){if(this.fieldCount>0)for(var a=0;a<this.fieldCount;a++){var b=this.fieldArray[a];if("PromptField"!==b.fieldLabel&&b.undoTempText!==b.text)return!0}return!1},b.prototype.GetRealFieldRange=function(a){var b={};b.start=0,b.length=0;for(var c=0,d=-1,e=-1,f=0;f<this.fieldCount;f++)if("PromptField"!==this.fieldArray[f].fieldLabel&&d++,d===a){e=f;break}for(var f=0;e>f;f++){var g=this.GetFieldByIndex(f);c+=g.GetLength()}var h=this.GetFieldByIndex(e);return h?(b.start=c,b.length=h.GetLength(),b):b},b.prototype.PushBack=function(a){this.Add(a),this.fieldCount++},b}(v);a.MaskFieldCollection=z;var A=function(b){function c(a){b.call(this),this.OldPosition=0,this.IsFocus=!1,this.isSelectionDeterminedByHighlightText=!1,this.Format=null,null!=a.HelpID&&(this.HelpID=a.HelpID),a.Owner&&(this.Owner=a.Owner)}return __extends(c,b),c.prototype.GetCurrentField=function(a){var b=this.GetShowText(this.GetShowLiterals());if(this.Format.Fields.ValueIsNull()&&null!=b&&(""!==this.Format.Fields._focusNull&&b===this.Format.Fields._focusNull||null!=b&&""==b)){var c={};return c.index=-1,c}return this.Format.Fields.GetCurrentField(a)},c.prototype.FocusInternal=function(b,c,d,e,f){var g={},h=this.GetShowText(this.GetShowLiterals());this.OldValue=this.Format.Fields.GetText(),this.isMulSelected=!1,this.isDblClick=!1,this.isTriClick=!1,g.SelectionStart=f,1===b&&(g.SelectionStart=a.Utility.GetCursorPosition(c),g.SelectionEnd=g.SelectionStart),g.Text=h,this.Format.Fields.ValueIsNull()&&null!=g.Text&&""!==this.Format.Fields._focusNull&&g.Text===this.Format.Fields._focusNull&&(g.SelectionStart=0,g.SelectionEnd=0),this.Format.Fields.ValueIsNull()&&null!==this.Format.Fields._owner._getDisplayNullExpression()&&(g.SelectionStart=0,g.SelectionEnd=0),(-1===g.SelectionStart||g.SelectionStart>g.Text.GetLength())&&(g.SelectionStart=0,g.SelectionEnd=0),9===b?(g.SelectionStart=0,g.SelectionEnd=0):10===b&&(g.SelectionStart=g.Text.GetLength(),g.SelectionEnd=g.Text.GetLength());var i=g.SelectionStart;if(6!==b&&2!==b&&3!==b&&8!==b&&(0!==d||-1!==e))if(this.Format.Fields.ValueIsNull()&&null!=g.Text&&""!=this.Format.Fields._focusNull&&g.Text===this.Format.Fields._focusNull)g.SelectionEnd=g.Text.GetLength();else{var j=this.SetCursorPositionAndSelection(d,"",e,i);null!=j&&(g.SelectionStart=j.SelectionStart,g.SelectionEnd=j.SelectionEnd)}return null!=g.SelectionStart&&(this.OldPosition=g.SelectionStart),this.IsFocus=!0,g},c.prototype.SetCursorPositionAndSelection=function(a,b,c,d){var e;if(2===a)this.isSelectionDeterminedByHighlightText=!0,e=this.SelectAll();else if(1===a)if(this.isSelectionDeterminedByHighlightText=!0,-1>=c)if(d>0){var f=this.Format.Fields.GetFieldIndex(d).index,g=this.Format.Fields.fieldArray[f];"PromptField"===g.fieldLabel&&(f===this.Format.Fields.fieldCount-1?f--:f++);var h=this.Format.Fields.GetFieldRange(f);e={},e.SelectionStart=h.start,e.SelectionEnd=h.length+h.start}else e=this.GetPosByCurrentField(d);else e=this.GetPosByCurrentField(c);else e=this.GetPosByCurrentField(c),null!=e&&(e.SelectionStart=e.SelectionStart,e.SelectionEnd=e.SelectionStart);return e},c.prototype.GetPosByCurrentField=function(a){var b={},c=this.Format.Fields.GetPosByCurrentField(a);return null!=c&&-1!=c?(b.SelectionStart=c.start,b.SelectionEnd=c.start+c.length,b):null},c.prototype.LoseFocus=function(){var a={};return 1!=this.Owner._getFormatIsNull()&&this.Format.Fields.SaveUndoState(),a.Text=this.GetShowText(this.GetShowLiterals(),"LoseFocus"),a.Value=this.Format.Fields.GetValue(),this.IsFocus=!1,a},c.prototype.GetSepText=function(){if(this.Owner._getFormatIsNull())return this.Format.Fields.GetText();for(var b="",c=this.Format.Fields.fieldCount-1,d=0;c>=d;d++){var e=this.Format.Fields.fieldArray[d];if("PromptField"!==e.fieldLabel){var f=e._trueLength,g=e.text;if("FilterField"===e.fieldLabel)for(var h=0;f>h;h++)e._bitState[h]===!1&&(g=g.Substring(0,h)+" "+g.Substring(h+1,g.GetLength()));else-1===e._activeItem&&(g="");if(d!=c){var i=g.Substring(0,f);if(i=i.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\"),"FilterField"===e.fieldLabel&&!this.Owner._getFormatIsNull()){for(var j=g.Substring(0,f),h=0;f>h;h++)e._bitState[h]===!1&&(j=j.Substring(0,h)+a.Utility.MaskValChar+j.Substring(h+1,j.GetLength()));i+=a.Utility.Hold+","+j.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\")}b+=i+a.Utility.Hold+";"}else{var i=g.Substring(0,f);if(i=i.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\"),"FilterField"===e.fieldLabel&&!this.Owner._getFormatIsNull()){for(var j=g.Substring(0,f),h=0;f>h;h++)e._bitState[h]===!1&&(j=j.Substring(0,h)+a.Utility.MaskValChar+j.Substring(h+1,j.GetLength()));i+=a.Utility.Hold+","+j.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\")}b+=i}}}return b},c.prototype.SetSepText=function(b){if(!b){for(var c=0;c<this.Format.Fields.fieldCount;c++){var d=this.Format.Fields.fieldArray[c];"PromptField"!==d.fieldLabel&&d.Clear()}return!0}for(var e=a.Utility.Hold+";",f=b.split(e),g=0;g<f.length;g++)f[g]=f[g].replace(/@#GCC#@/g,",").replace(/@#GCD#@/g,"'").replace(/@#GCM#@/g,'"');for(var h=!1,i=0,c=0;c<this.Format.Fields.fieldCount;c++){var d=this.Format.Fields.fieldArray[c];if("PromptField"!==d.fieldLabel)if(i<f.length){var j=f[i].split(a.Utility.Hold+","),k=j[0],l="";if(j.length>1&&(l=j[1],l&&""!=l&&k!=l))for(var m=0,n=k.IndexOf(" ",m);-1!=n;)l.Substring(n,n+1)===a.Utility.MaskValChar&&(k=k.Substring(0,n)+this.Owner.GetPromptChar()+k.Substring(n+1,k.GetLength())),m=n,n=k.IndexOf(" ",m);h=i===this.Format.Fields.fieldCount-1;var o=k.GetLength();if(o<d._minLength)for(var g=0;g<d._minLength-o;g++)k+=this.Owner.GetPromptChar(),l+=a.Utility.MaskValChar;var p;if(p="FilterField"===d.fieldLabel?d.SetTextInternal(k,0,h,l):d.SetTextInternal(k,0,h),p.existInvalid&&p.exception)return!1;i++}else d.Clear()}return!0},c.prototype.ProcessShortcutKey=function(a,c,d){var e={};switch(a){case"Clear":return c||this.Format.Fields.ClearContent(),e.SelectionStart=this.Format.Fields.GetFirstInputPosition(),e.SelectionEnd=e.SelectionStart,e.Text=this.GetShowText(this.GetShowLiterals()),e;case"NextField":if(this.IsLastInputField(d,!0))return!0;break;case"PreviousField":if(this.IsLastInputField(d,!1))return!0}return e=b.prototype.ProcessShortcutKey.call(this,a,c,d)},c.prototype.KeyDown=function(c){var d=c.KeyCode,e=b.prototype.KeyDown.call(this,c);if(27===d&&this.Owner.Clear(),null!=c.KeyAction)return e;if(c.ReadOnly===!0)return e;if(void 0!=d&&null!=d){if(d>=48&&57>=d||d>=65&&90>=d||d>=96&&105>=d||0===d||229===d||231===d)return e||(e={}),B.Mask_ImeResponse=!0,e.inputChar=!0,e;if(32===d||106===d||107===d||109===d||110===d||111===d||219===d||220===d||221===d||222===d||d>=186&&192>=d||226===d)return e||(e={}),B.Mask_ImeResponse=!0,e.inputChar=!0,e;if(!a.CoreUtility.IsIE()&&(61===d||59===d))return e||(e={}),B.Mask_ImeResponse=!0,e.inputChar=!0,e;var f=d;if(c.FuncKeysPressed.Shift&&65552!=d&&(f=d-65536),d>65600&&65627>d&&(f=d-65536),f>=48&&57>=f||f>=65&&90>=f||f>=96&&105>=f||229===f||0===f||231===f)return e||(e={}),B.Mask_ImeResponse=!0,e.inputChar=!0,e;if(32===f||106===f||107===f||109===f||110===f||111===f||219===f||220===f||221===f||222===f||f>=186&&192>=f||226===f)return e||(e={}),B.Mask_ImeResponse=!0,e.inputChar=!0,e;if(!a.CoreUtility.IsIE()&&(61===f||59===f))return e||(e={}),B.Mask_ImeResponse=!0,e.inputChar=!0,e}return e},c.prototype.KeyPressInternal=function(a,b,c,d,e){if(B.Mask_ImeResponse===!0){B.Mask_ImeResponse=!1;var f={};this.Format.Fields.ValueIsNull()&&""!=this.Format.Fields._focusNull&&(b=0,c=0);var g=this.ProcessCharKey(b,c,e,d);if(g.success){if(f.SelectionStart=g.start,f.SelectionEnd=f.SelectionStart,f.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,this.moveFocusExitOnLastChar){var h=this.MoveControl(this.GetElementId(),!0,!1,"CharInput");null!=h&&(f.EventInfo=h.EventInfo,f.FocusType=h.FocusType,f.FocusExit=!0),this.moveFocusExitOnLastChar=!1}}else f.SelectionStart=g.start,f.SelectionEnd=Math.max(b,c),f.Text=this.GetShowText(this.GetShowLiterals()),f.EventInfo=g.EventInfo,f.exception=!0,this.moveFocusExitOnLastChar&&(f.FocusExit=!0,this.moveFocusExitOnLastChar=!1);return f}return!1},c.prototype.ProcessCharKey=function(a,c,d,e){var f=b.prototype.ProcessCharKey.call(this,a,c,d,e),g=Math.min(a,c);return f.success&&(g=f.start),e&&(this.moveFocusExitOnLastChar=!1,g===this.Format.Fields.GetExistLength()&&(this.moveFocusExitOnLastChar=!0)),f},c.prototype.ContextMenu=function(){},c.prototype.Click=function(){},c.prototype.Undo=function(a){var b={};return this.Format.Fields.Undo(),b.SelectionStart=this.OldPosition,b.SelectionEnd=this.OldPosition,this.OldPosition=a,b.Value=this.Format.Fields.GetText(),b.Text=this.GetShowText(this.GetShowLiterals()),b},c.prototype.Paste=function(b,c,d,e,f){var g={};g.SelectionStart=b,g.SelectionEnd=c;var h;null!=f&&f===!0?h=d:this.Owner?(h=a.Utility.GetPasteData(this.Owner.GetUseClipboard()),h=this.UpdateCrLfString(h,this.Owner.GetAcceptsCrlf())):h=a.Utility.GetPasteData(!0);var i=null;if(null!=h&&(-1!=h.IndexOf("\r")&&(h=h.Substring(0,h.IndexOf("\r"))),-1!=h.IndexOf("\n")&&(h=h.Substring(0,h.IndexOf("\n")))),!h)return g;this.FireClientEvent("OnBeforePaste");var j=Math.min(b,c),k=Math.max(b,c),l=k-j;if(j===k)g.SelectionStart=this.Format.Fields.Insert(j,h,!1).cursorPos,g.Text=this.GetShowText(this.GetShowLiterals()),g.SelectionEnd=g.SelectionStart;else{var m=this.GetShowText(this.GetShowLiterals());i=null!=m&&""!=this.Format.Fields._focusNull&&m===this.Format.Fields._focusNull&&this.Format.Fields.fieldArray[0].text!=m?this.Format.Fields.Insert(0,h,!1):this.Format.Fields.Replace(j,l,h,!1),g.SelectionStart=i.cursorPos,g.Text=this.GetShowText(this.GetShowLiterals()),m===g.Text&&i.success===!1?(g.SelectionStart=j,g.SelectionEnd=k):g.SelectionEnd=g.SelectionStart}if(g.Text.Substring(j,j+h.GetLength())!=h&&g.SelectionStart-j<h.GetLength()&&""!=this.InvalidInput){var n={};n.Name=this.InvalidInput,n.Args=null,n.Type="InvalidInput",g.EventInfo=n}if(e)if(g.SelectionStart===this.Format.Fields.GetExistLength())this.moveFocusExitOnLastChar=!0;else{var o=this.Format.Fields.GetFieldIndex(g.SelectionStart),p=o.index,q=o.offset;p===this.Format.Fields.fieldCount-1&&0===q&&"PromptField"===this.Format.Fields.GetFieldByIndex(p).fieldLabel&&(this.moveFocusExitOnLastChar=!0)}if(this.moveFocusExitOnLastChar){var r=this.MoveControl(this.GetElementId(),!0,!1,"CharInput");null!=r&&(g.EventInfo=r.EventInfo,g.FocusType=r.FocusType,g.FocusExit=!0),this.moveFocusExitOnLastChar=!1}return g.SelectionStart!=j&&this.FireClientEvent("OnPaste"),g},c.prototype.UpdateCrLfString=function(b,c){return 0!==c?a.BaseUIProcess.UpdateCrLfString(b,c):a.BaseUIProcess.UpdateCrLfString(b,2)},c.prototype.DragStart=function(){},c.prototype.DragEnd=function(){},c.prototype.DragOver=function(){},c.prototype.DragInit=function(){},c.prototype.SetValue=function(a){this.Format.Fields.SetValue(a)},c.prototype.GetShowText=function(a,b,c){var d="";return b?"LoseFocus"===b&&(d=this.Format.Fields.GetShowText(a,"LoseFocus",c)):d=this.Format.Fields.GetShowText(a,"",c),d},c.prototype.ProcessBackSpaceKey=function(a,b){var c=Math.min(a,b),d=Math.abs(a-b),e={};if(e.SelectionStart=c,e.SelectionEnd=c+d,0===c&&0===d)return e;var f,g,h=this.Format.Fields.GetFieldIndex(c);if(f=h.index,g=h.offset,-1===f)return e;if(0===d){var i=this.Format.Fields.GetFieldByIndex(f);if(0===f&&0===g)return e;for(;(0===g||"PromptField"===i.fieldLabel)&&f>0;)f--,d+=g,i=this.Format.Fields.GetFieldByIndex(f),g=i.GetLength(),"PromptField"===i.fieldLabel&&(d+=g,g=0);if(0===f){if("PromptField"===this.Format.Fields.GetFieldByIndex(f).fieldLabel)return e;if(0===this.Format.Fields.GetFieldByIndex(f).GetLength())return e}if("FilterField"===this.Format.Fields.GetFieldByIndex(f).fieldLabel)d+=1,c-=d,d=1;else{if("EnumField"!==this.Format.Fields.GetFieldByIndex(f).fieldLabel)return e;d+=this.Format.Fields.GetFieldByIndex(f).GetLength(),c-=d,c=c>0?c:0}c=this.Format.Fields.Delete(c,d),e.SelectionStart=c,e.SelectionEnd=e.SelectionStart}else{var j;if(h=this.Format.Fields.GetFieldIndex(c+d),j=h.index,-1===j)return e;if(0===g&&0!=f&&f--,f===j&&"PromptField"===this.Format.Fields.GetFieldByIndex(j).fieldLabel)return e;e.SelectionStart=this.Format.Fields.Delete(c,d),e.SelectionEnd=e.SelectionStart}return e},c.prototype.PerformSpinInternal=function(a,b,c,d,e){if(this.Format.Fields.fieldCount<=0)return null;var f={};f.SelectionStart=a,f.SelectionEnd=b,f.Text=this.GetShowText(this.GetShowLiterals());var g=this.Format.Fields.GetFieldIndex(b),h=g.index,i=g.offset;if(0!=h&&0===i&&(a===b?"EnumField"!=this.Format.Fields.fieldArray[h].fieldLabel&&h--:b>a&&h--),"EnumField"!=this.Format.Fields.fieldArray[h].fieldLabel&&0!=this.Format.Fields.fieldArray[h].text.GetLength()||(e?f.SelectionStart=this.Format.Fields.PerformSpin(b,c,d):f.SelectionStart=this.Format.Fields.PerformSpin(b,-c,d),f.SelectionEnd=f.SelectionStart,f.Text=this.GetShowText(this.GetShowLiterals())),e){if(""!=this.SpinUp){var j={};j.Name=this.SpinUp,j.Args=null,j.Type="SpinUp",f.EventInfo=j}}else if(""!=this.SpinDown){var j={};j.Name=this.SpinDown,j.Args=null,j.Type="SpinDown",f.EventInfo=j}return f},c.prototype.ProcessBackSpace=function(a,b){var c=this.ProcessBackSpaceKey(a,b);return c.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,c},c.prototype.ProcessDeleteKey=function(a,b){var c=Math.min(a,b),d=Math.abs(a-b),e={};if(e.SelectionStart=c,e.SelectionEnd=c+d,c===this.Format.Fields.GetLength()&&0===d)return e;var f,g=this.Format.Fields.GetFieldIndex(c);if(f=g.index,-1===f)return e;if(0===d){if("PromptField"===this.Format.Fields.GetFieldByIndex(f).fieldLabel)return e;c=this.Format.Fields.Delete(c,1),e.SelectionStart=c,e.SelectionEnd=e.SelectionStart}else{var h,i;if(g=this.Format.Fields.GetFieldIndex(c+d),h=g.offset,i=g.index,-1===i)return e;if(0===h&&i--,f===i&&"PromptField"===this.Format.Fields.GetFieldByIndex(f).fieldLabel)return e;e.SelectionStart=this.Format.Fields.Delete(c,d),e.SelectionEnd=e.SelectionStart}return e},c.prototype.ProcessDelete=function(a,b){var c=this.ProcessDeleteKey(a,b);return c.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,c},c.prototype.GetNullCasePosition=function(a,b){var c=this.Format.Fields;switch(b){case 36:case 65572:case 131109:case 196645:case 196644:case 131108:a=0;break;case 35:case 65571:a=c.GetLength();break;case 65573:case 37:0!=a&&a--;break;case 39:case 65575:a!=c.GetLength()&&a++;break;case 131111:case 196647:case 196643:case 131107:a=c.GetLength();break;case 131118:case 131080:case 196616:return a}return a},c.prototype.GetCaretPosition=function(a,c){if(this.Format.Fields.ValueIsNull()&&""!=this.Format.Fields._focusNull)return this.GetNullCasePosition(a,c);var d,e,f=this.Format.Fields,g=f.GetFieldIndex(a),h=g.index,i=0,j=0;for(j=0;j<f.fieldCount;j++)if("PromptField"!=f.GetFieldByIndex(j).fieldLabel){e=f.GetFieldRange(j).start;break}var k=f.GetLastVisibleFieldIndex(this.GetShowLiterals());if(3===this.ShowLiterals)for(j=k;j>=0;j--)"PromptField"!=f.GetFieldByIndex(j).fieldLabel&&(i+=f.GetFieldByIndex(j)._trueLength);else for(j=k;j>=0;j--)if("PromptField"!=f.GetFieldByIndex(j).fieldLabel){d=f.GetFieldRange(j),i=d.start+d.length;break}var l=a;a=b.prototype.GetCaretPosition.call(this,a,c,e,i,"PromptField");var d,g=f.GetFieldIndexByPos(l),h=g.index;if(196647===c&&a===l){for(;k>h&&(d=f.GetFieldRange(h+1),a=d.start,!(a>e));h++);h===k&&(a+=d.length)}if(131111===c&&"PromptField"!=f.GetFieldByIndex(h).fieldLabel&&0===f.GetFieldRange(h).length){for(;0===f.GetFieldRange(h).length&&h<f.fieldCount-1;)h++;for(j=h+1;j<f.fieldCount;j++)if("PromptField"!=f.GetFieldByIndex(j).fieldLabel)return d=f.GetFieldRange(j),d.start}return a},c.prototype.ProcessTabKey=function(a,c,d){var e;return e=1!==d||this.Format.Fields.ValueIsNull()&&""!=this.Format.Fields._focusNull&&this.GetShowText(this.GetShowLiterals())===this.Format.Fields._focusNull?b.prototype.ProcessTabKey.call(this,a,c,d):this.MoveFieldAndControl(a,c);
},c.prototype.ProcessLeftDirection=function(a,b,c){var d={};if(this.isMulSelected&&36!==c&&131108!==c?(d.SelectionStart=Math.min(a,b),d.SelectionEnd=d.SelectionStart):(d.SelectionStart=this.GetCaretPosition(b,c),d.SelectionEnd=d.SelectionStart),37===c||131109===c){if(this.Format.Fields.ValueIsNull()&&""!=this.Format.Fields._focusNull);else if(d.SelectionStart>0){var e=this.Format.Fields.GetFieldIndex(d.SelectionStart),f=e.index,g=e.offset;"PromptField"===this.Format.Fields.GetFieldByIndex(f).fieldLabel&&this.isMulSelected===!1&&(d.SelectionStart-=g),d.SelectionEnd=d.SelectionStart}return this.isMulSelected=!1,d}if(this.isMulSelected=!1,this.isMulSelected&&36!==c&&131108!==c){d.SelectionStart=Math.min(a,b);var e=this.Format.Fields.GetFieldIndex(d.SelectionStart),f=e.index,g=e.offset;"PromptField"===this.Format.Fields.GetFieldByIndex(f).fieldLabel&&(d.SelectionStart-=g),d.SelectionEnd=d.SelectionStart}else d.SelectionStart=this.GetCaretPosition(b,c),d.SelectionEnd=d.SelectionStart;return d},c.prototype.ProcessRightDirection=function(a,b,c){var d={};if(this.isMulSelected&&35!==c&&131107!==c){if(d.SelectionStart=Math.max(a,b),this.Format.Fields.ValueIsNull()===!0&&""!=this.Format.Fields._focusNull)return d.SelectionEnd=d.SelectionStart,this.isMulSelected=!1,d;var e,f,g=this.Format.Fields.GetFieldIndex(d.SelectionStart);if(e=g.index,f=g.offset,"PromptField"===this.Format.Fields.GetFieldByIndex(e).fieldLabel&&this.isMulSelected===!1){var h=this.Format.Fields.fieldArray[e];d.SelectionStart+=h.text.GetLength()-f}return d.SelectionEnd=d.SelectionStart,this.isMulSelected=!1,d}return d.SelectionStart=this.GetCaretPosition(b,c),d.SelectionEnd=d.SelectionStart,this.isMulSelected=!1,d},c.prototype.IsLastInputField=function(a,b){var c=this.Format.Fields.GetFieldIndex(a,0),d=c.index;if(b){for(;d<this.Format.Fields.fieldCount-1&&"PromptField"!=this.Format.Fields.fieldArray[d+1].fieldLabel&&0===this.Format.Fields.fieldArray[d+1].text.GetLength();)d++;for(var e=this.Format.Fields.fieldCount-1;e>d&&"PromptField"==this.Format.Fields.fieldArray[e].fieldLabel;e--);return e===d?!0:!1}for(;d>0&&"PromptField"!=this.Format.Fields.fieldArray[d-1].fieldLabel&&0===this.Format.Fields.fieldArray[d-1].text.GetLength();)d--;for(var e=0;d>e&&"PromptField"==this.Format.Fields.fieldArray[e].fieldLabel;e++);return e===d?!0:!1},c.prototype.DoubleClick=function(a){var c={},d=this.GetShowText(this.GetShowLiterals());if(this.Format.Fields.ValueIsNull()&&null!=d&&(""!=this.Format.Fields._focusNull&&d===this.Format.Fields._focusNull||null!=d&&""==d)){var d=this.GetShowText(this.GetShowLiterals());c.SelectionStart=0,c.SelectionEnd=d.GetLength()}else c=b.prototype.DoubleClick.call(this,a);return c},c}(a.BaseUIProcess);a.MaskUIProcess=A;var B=function(c){function d(){c.call(this),this.IMControlType="Mask",this._promptChar="_",this._autoConvert=!0,this._displayNull=null,this._null="",this._formatPattern="",this._exitOnLastChar=!1,this._displayNullExpresson=null,this._showLiterals=1,this._tabAction=0,this._hideEnter=!1,this._hidePromptOnLeave=!1,this._textWithPromptChar=null,this.Init()}return __extends(d,c),d.prototype.AttachInput=function(a){this.InputElement=a,this.AddAllEventsHandler()},d.prototype.DetachInput=function(){b(this.InputElement).unbind(".wijinput"),this.InputElement=null},d.prototype.GetAutoConvert=function(){return this._autoConvert},d.prototype.SetAutoConvert=function(a){this._autoConvert=a},d.prototype.GetExitOnLastChar=function(){return this._exitOnLastChar},d.prototype.SetExitOnLastChar=function(b){b=a.Utility.CheckBool(b),this._exitOnLastChar=b},d.prototype.GetNull=function(){return this._null},d.prototype.SetNull=function(a){if(a!==this._null){var b=y.ParseFillExpression(a,this.Format.Fields);null===b.Expression?this.Format.Fields._focusNull=a:this.Format.Fields._focusNull=b.Expression,this._null=a}},d.prototype._getDisplayNullExpression=function(){return null!==this._displayNullExpresson?this._displayNullExpresson:this._displayNull},d.prototype.GetDisplayNull=function(){return this._displayNull},d.prototype.SetDisplayNull=function(b){if(void 0===b&&(b=null),null!==b&&(b=a.Utility.CheckString(b)),b!==this._displayNull){var c=y.ParseFillExpression(b,this.Format.Fields);this._displayNullExpresson=c.Expression,this._displayNull=b;var d=this.GetValue();this.SetValue(d)}},d.prototype.GetFormatPattern=function(){return this._formatPattern},d.prototype.SetFormatPattern=function(b){if(b=a.BaseUIProcess.UpdateCrLfString(b,1),b!==this._formatPattern)try{var c=y.ParseFormat(b,this);this.Clear(),this.Format.Fields=c,this.ResetNullAndDispalyNull(),this.FormatIsNull=this.Format.Fields.formatIsNull,this.Clear(),this.SetSelectionStart(0),this._formatPattern=b;var d=this.GetDisplayText();this.UpdateDisplayText(d)}catch(e){throw"Format pattern is invalid"}},d.prototype.ResetNullAndDispalyNull=function(){var a=y.ParseFillExpression(this.GetNull(),this.Format.Fields);null===a.Expression?this.Format.Fields._focusNull=this.GetNull():this.Format.Fields._focusNull=a.Expression,a=y.ParseFillExpression(this.GetDisplayNull(),this.Format.Fields),this._displayNullExpresson=a.Expression},d.prototype.GetPromptChar=function(){return this._promptChar},d.prototype.SetPromptChar=function(a){if(a||(a="_"),a.length>1&&(a=a.charAt(0)),a!==this._promptChar){this._promptChar=a;var b=this.GetValue();this.SetValue(b)}},d.prototype.GetShowLiterals=function(){return this._showLiterals},d.prototype.SetShowLiterals=function(a){if(a!=this._showLiterals){this._showLiterals=a;var b=this.GetValue();this.SetValue(b)}},d.prototype.GetTabAction=function(){return this._tabAction},d.prototype.SetTabAction=function(a){this._tabAction=a},d.prototype.GetCursorPosition=function(){return this.CursorPosition},d.prototype.SetCursorPosition=function(b){b=a.Utility.CheckInt(b,-1,Math.pow(2,31)),b=Math.min(b,this.Format.Fields.GetTotalInputFieldCount()-1),b!==this.CursorPosition&&(this.CursorPosition=b)},d.prototype.Init=function(){this._autoConvert=!0,this.FormatIsNull=!0,this.CursorPosition=-1,this.truePosition=-1,this.japInput=!1,this.ImeMode=!1,this.IsImplementImeInput=!1,this.IsJapanConvertKeyPress=!1,this.HelpID="__"+this.ID+"_State",this.IsDragDrop=!1;var a={};if(a.ID=this.ID,a.HelpID=this.HelpID,a.Owner=this,this.UIProcess=this._createUIProcess(a),this.Format.Fields=y.ParseFormat("",this),this.FormatIsNull=this.Format.Fields.formatIsNull,this.UIProcess.Format=this.Format,this.NewSelectionStart=0,this.NewSelectionEnd=0,this.IsInUpdatePanelAndAsyncPostBack||this.UIUpdate&&(this.UIProcess.Format.Fields.ClearContent(),this.UIProcess.Format.Fields.SetText(this.UIUpdate.GetText(),!0)),this.Text=this.UIProcess.Format.Fields.GetText(),this.Value=this.UIProcess.Format.Fields.GetValue(),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),this.MouseButton=-1,this.FocusType=0,this.IsInUpdatePanelAndAsyncPostBack){var b=this.UIUpdate.GetText();if(b!=this.UIProcess.GetShowText(this.GetShowLiterals(),null,!0)&&b!=this.UIProcess.GetShowText(this.GetShowLiterals(),"LoseFocus",!1))if(1===this.ShowLiterals)this.UIProcess.Format.Fields.ClearContent(),this.UIProcess.Format.Fields.SetText(b,!0),this.SetHideValue();else{this.UIProcess.Format.Fields.ClearContent();var c=this.UIProcess.GetShowText("Always",null,!0);b.GetLength()<c.GetLength()&&(b+=c.Substring(b.GetLength(),c.GetLength())),this.UIProcess.Format.Fields.SetText(b,!0),this.SetHideValue()}this.Text=this.UIProcess.Format.Fields.GetText(),this.Value=this.UIProcess.Format.Fields.GetValue(),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText()}this.UIUpdate&&(this.DisplayText=this.GetTextboxValue()),this.LastStart=0,this.LastEnd=0,this.OrientText="",this.ImeSelect=!1,this.ImeSelectTimes=0,this.Type="Mask",this.UIUpdate&&this.ReLoadData()},d.prototype._createUIProcess=function(a){return new A(a)},d.prototype.Clear=function(){this.SetValue(""),this.SelectionStart=this.SelectionEnd=this.Format.Fields.GetFirstInputPosition()},d.prototype.SetValue=function(b){b&&("string"!=typeof b&&(b=b.toString()),this.FormatIsNull&&(b=b.replace(/[\r\n]/g,"")),b=a.BaseUIProcess.UpdateCrLfString(b,1)),this.UIProcess.Format.Fields.SetValue(b,!1)&&this.AfterSetTextValue()},d.prototype.GetValue=function(){return this.Value},d.prototype.GetSelectedText=function(){var a=Math.min(this.SelectionStart,this.SelectionEnd),b=Math.max(this.SelectionStart,this.SelectionEnd),c=this.Text.Substring(a,b);if(1===this.GetClipContent()){var d=Math.min(this.SelectionStart,this.SelectionEnd),e=this.GetSelectionLength();c=this.UIProcess.Format.Fields.GetNonPromptText(d,e)}return c},d.prototype.SetSelectedText=function(a){if(a){var b=this.Value,c=this.Text;this.UIProcess.Paste(this.SelectionStart,this.SelectionEnd,a,!1,!0);var d={};d.Text=this.GetDisplayText("Focus"),this.UpdateText(d)&&(this.UpdateDisplayText(this.Text),this.Value=this.UIProcess.Format.Fields.GetValue(),this.Text!=c&&this.FireClientEvent("TextChanged",null),this.Value!=b&&this.FireClientEvent("ValueChanged",null))}},d.prototype.SetText=function(b){try{if(this.ShowPromptChar(),this.Value=this.UIProcess.Format.Fields.GetValue(),!b)return void this.SetValue("");if(b===this.UIProcess.Format.Fields._focusNull&&!this.UIProcess.Format.Fields.formatIsNull)return void this.SetValue("");this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull&&(b=b.replace(/[\r\n]/g,"")),b=a.BaseUIProcess.UpdateCrLfString(b,1),this.UIProcess.Format.Fields.SetText(b,!0).isValid===!1?this.UIProcess.Format.Fields.RollBack():this.AfterSetTextValue()}finally{this.HidePromptChar()}},d.prototype.AfterSetTextValue=function(){var a=this.Value,b=this.Text,c={};c.Text=this.GetDisplayText("Focus"),this.UpdateText(c)&&(this.Value=this.UIProcess.Format.Fields.GetValue(),this.UpdateDisplayText(this.GetDisplayText()),this.Text!=b&&(this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),this.FireClientEvent("TextChanged",null)),this.Value!=a&&this.FireClientEvent("ValueChanged",null))},d.prototype.GetText=function(){return this.GetDisplayText("Focus")},d.prototype.GetDisplayText=function(a){return a?"Focus"===a?this.UIProcess.GetShowText(this.GetShowLiterals()):"":this.UIProcess.GetShowText(this.GetShowLiterals(),"LoseFocus")},d.prototype.GetCurrentField=function(){return null!=this.UIProcess.GetCurrentField(this.SelectionEnd)?this.UIProcess.GetCurrentField(this.SelectionEnd).index:0},d.prototype.GetValueIsFull=function(){return this.UIProcess.Format.Fields.ValueIsFull(1)},d.prototype._getFormatIsNull=function(){return this.FormatIsNull},d.prototype.FireClientEvent=function(a,b){var c="";switch(a){case"TextChanged":""!=this.TextChanged&&(c=this.TextChanged);break;case"ValueChanged":""!=this.ValueChanged&&(c=this.ValueChanged);break;default:return}return this.UIProcess.FireEvent(this,c,b,a)},d.prototype.Focus=function(){if(this.ShowPromptChar(),this.IsDragDrop||3==this.FocusType||6==this.FocusType||(this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText()),this.UIProcess.Format.Fields.fieldCount>0){var a=this.UIProcess.FocusInternal(this.FocusType,this.InputElement,this.GetHighlightText(),this.CursorPosition,this.SelectionStart);if(!a)return;null!=a.Text&&(this.Text=a.Text),null!=a.SelectionStart&&this.NeedReCalCursorPos&&(this.SelectionStart=a.SelectionStart),null!=a.SelectionEnd&&this.NeedReCalCursorPos&&(this.SelectionEnd=a.SelectionEnd,this.SelectionLength=this.GetSelectionLength()),this.NeedReCalCursorPos||(this.NeedReCalCursorPos=!0),this.japInput===!0&&(-1!=this.truePosition&&(this.SelectionStart=this.truePosition,this.SelectionEnd=this.truePosition),this.japInput=!1),this.GetReadOnly()===!0&&0===this.FocusType&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd,!0),this.IsDragDrop||3==this.FocusType||6==this.FocusType||7==this.FocusType||(this.OldValue=this.Value)}else this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.OldValue=this.Value;this.IsDragDrop=!1},d.prototype._shouldFireValueChangedEvent=function(){return this.OldText!=this.Text},d.prototype.LoseFocus=function(){this.FireKeyExit();var b=this.ImeMode;if(a.CoreUtility.IsIE()?this.ImeInput("LoseFocusInput"):this.ImeInput("ReInput",!0),!this.SpinBtnPressed){this.SetLastClientValues();var c=this.UIProcess.LoseFocus();this.DisplayText=c.Text,this.Value=c.Value,this.Text=this.UIProcess.Format.Fields.GetText(),(a.CoreUtility.IsIE()||!b)&&this.UpdateDisplayText(this.DisplayText),!a.CoreUtility.IsIE()&&b&&this.UpdateDisplayText(this.DisplayText),this.FocusType=0;var d;null!=c.EventInfo&&(d=this.UIProcess.FireEvent(this,c.EventInfo.Name,c.EventInfo.Args,c.EventInfo.Type),null!=d&&(this.FocusType=d));var e=this;!a.CoreUtility.IsIE()&&this.DisplayText!=this.UIUpdate.GetText()&&b&&window.setTimeout(function(){e.UpdateDisplayText(e.DisplayText)},0),2===this.GetHighlightText()&&(this.SelectionStart=0),this._shouldFireValueChangedEvent()&&(d=this.FireClientEvent("TextChanged",null),null!=d&&(this.FocusType=d),d=this.FireClientEvent("ValueChanged",null),null!=d&&(this.FocusType=d),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),a.Utility.FireSystemEvent(this.InputElement,"onchange"),this._getAutoPostBack()),window.setTimeout(function(){e.HidePromptChar()},50)}},d.prototype.shouldFireValueChangedEvent=function(){return this.OldText!=this.Text},d.prototype.MouseDown=function(b){var d=a.Utility.GetMouseButton(b);this.FocusedWhenMouseDown=document.activeElement===(b.srcElement||b.target),this.MouseDownOnClearButton=a.CoreUtility.IsMouseDownOnClearButton(b),c.prototype.MouseDown.call(this,b),2===this.MouseButton?this.FocusType=2:this.MouseButton=0,this.UIProcess.isDblClick=!1,this.SelectionLength=this.GetSelectionLength(),!a.CoreUtility.IsIE()&&this.ImeMode&&0===d&&(this.IsImplementImeInput=!0)},d.prototype.MouseUp=function(b){if(!a.CoreUtility.IsIE()&&this.ImeMode){if(!this.IsImplementImeInput)return;this.IsImplementImeInput=!1}if(this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd,c.prototype.MouseUp.call(this,b),this.ImeMode){if(this.SelectionStart=this.LastStart,this.SelectionEnd=this.LastEnd,this.SelectionLength=this.GetSelectionLength(),a.CoreUtility.IsIE()?this.ImeInput("ClickInput"):this.ImeInput("ReInput",!0),!a.CoreUtility.IsIE()&&this.Text!=this.UIUpdate.GetText()){var d=this;window.setTimeout(function(){d.UpdateDisplayText(d.Text)},0)}}else this.SelectionLength=this.GetSelectionLength();void 0==this.MouseUpPointerType&&(this.MouseUpHasValue=this.GetInputElement().value.length>0),this.HandleClearButton(b)},d.prototype.KeyDown=function(b){var d=b.keyCode,e={};e.Shift=!1,e.Ctrl=!1,e.Alt=!1,b.shiftKey&&(e.Shift=!0),b.ctrlKey&&(e.Ctrl=!0),b.altKey&&(e.Alt=!0);var f={},g=this.ImeMode;if(this.ImeMode=!1,229===d)return a.CoreUtility.IsIE8OrBelow()&&(this.ImeMode=!0),!0;this.ImeMode||!g||e.Shift||e.Ctrl||9!=d&&65545!=d&&(this.ImeInput("ReInput",!0),this.ImeSelectTimes=0),f.KeyCode=d,f.Text=this.Text,f.FuncKeysPressed=e,f.SelectionStart=this.SelectionStart,f.SelectionEnd=this.SelectionEnd,f.EditMode=this._getEditModeInternal(),f.ReadOnly=this.GetReadOnly(),f.ClipContent=this.GetClipContent(),f.ExitOnLastChar=this.GetExitOnLastChar(),f.ExitOnLeftRightKey=this.GetExitOnLeftRightKey(),f.TabAction=this.GetTabAction();var h=c.prototype.KeyDown.call(this,f);return null!=h.inputChar?!0:(e.Shift||e.Ctrl||e.Alt)&&!h?!0:this.GetHideEnter()&&13===d?!1:h.System},d.prototype.KeyPress=function(b,c){var d=c.keyCode||c.charCode,e=192===d&&c.altKey;if(!a.CoreUtility.IsIE()&&this.ImeMode&&e)return this.ImeInput("ReInput",!0),!1;if(!a.CoreUtility.IsIE()&&(229===d||e))return!1;var f=b,g=this.UIProcess.KeyPressInternal(this.InputElement,this.SelectionStart,this.SelectionEnd,this.GetExitOnLastChar(),f);if(1!=this.japInput){if(null!=g.SelectionStart&&(this.NewSelectionStart=g.SelectionStart),null!=g.SelectionEnd&&(this.NewSelectionEnd=g.SelectionEnd),null!=g.Text){if(!this.UpdateText(g))return!1;this.UpdateDisplayText(this.Text)}var h=this._doExtraWorkForKeyPress(b);if(h===!0)return;if(null!=g.SelectionStart&&(this.SelectionStart=g.SelectionStart),null!=g.SelectionEnd&&(this.SelectionEnd=g.SelectionEnd,this.SelectionLength=this.GetSelectionLength(),1!=g.FocusExit&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),null!=g.exception&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)),null!=g.EventInfo&&(this.UIProcess.FireEvent(this,g.EventInfo.Name,g.EventInfo.Args,g.EventInfo.Type),"KeyExit"===g.EventInfo.Type&&(this.EventInfo=g.EventInfo,this.FireKeyExit()),this.FocusType=3),13===c.keyCode)return!0}else{if(13===c.keyCode)return!0;null!=g.SelectionStart&&(this.truePosition=g.SelectionStart),null!=g.EventInfo&&this.UIProcess.FireEvent(this,g.EventInfo.Name,g.EventInfo.Args,g.EventInfo.Type)}},d.prototype._doExtraWorkForKeyPress=function(a){return!1},d.prototype.innerKeyPress=function(a,b,c){var d=a;b=!!b;var e=this.UIProcess.KeyPressInternal(this.InputElement,this.SelectionStart,this.SelectionEnd,this.GetExitOnLastChar(),d);if(1!=this.japInput){if(null!=e.Text){if(!this.UpdateText(e))return!1;c||this.UpdateDisplayText(this.Text)}if(null!=e.SelectionStart&&(this.SelectionStart=e.SelectionStart),null!=e.SelectionEnd&&(this.SelectionEnd=e.SelectionEnd,this.SelectionLength=this.GetSelectionLength(),1==e.FocusExit||b||c||1!=e.FocusExit&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),null!=e.exception&&(c||this.UpdateDisplayText(this.Text),1!=e.FocusExit&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),null!=e.EventInfo&&(this.UIProcess.FireEvent(this,e.EventInfo.Name,e.EventInfo.Args,e.EventInfo.Type),this.FocusType=3),null!=window.event&&13===event.keyCode)return!0}else{if(null!=window.event&&13===event.keyCode)return!0;null!=e.SelectionStart&&(this.truePosition=e.SelectionStart),null!=e.EventInfo&&this.UIProcess.FireEvent(this,e.EventInfo.Name,e.EventInfo.Args,e.EventInfo.Type)}},d.prototype.KeyUp=function(b){if(this.ImeMode===!0&&a.CoreUtility.IsIE8OrBelow()){var c=b.keyCode,d=a.CharProcess.CharEx,e=this.GetTextboxValue(),f=e;if(this.SelectionEnd<this.Text.GetLength()){var g=this.Text.GetLength()-this.SelectionEnd;f=e.Substring(0,e.GetLength()-g)}if(f=f.Substring(f.GetLength()-1,f.GetLength()),13===c)this.ImeInput("DirectInput");else if(c>=48&&57>=c||c>=96&&105>=c)c>=96&&(c-=48),f=d.ToHalfWidth(f),f!=String.fromCharCode(c)||f===String.fromCharCode(c)&&this.ImeSelectTimes<1||this.ImeSelect||this.ImeInput("ReInput"),this.ImeSelectTimes=0;else if(32===c){if(this.ImeSelect===!1)if(1===this.ImeSelectTimes)this.ImeSelect=!0;else if(d.ToHalfWidth(f)!=String.fromCharCode(c))this.ImeSelectTimes++;else{var h=e.Substring(this.SelectionStart,e.GetLength()-g);d.ToHalfWidth(h)===String.fromCharCode(c)&&this.ImeInput("DirectInput")}}else c>=65&&90>=c?this.ImeSelectTimes=0:32===c||106===c||107===c||109===c||110===c||111===c||219===c||220===c||221===c||222===c||c>=186&&192>=c?(this.ImeSelectTimes>=1&&this.ImeInput("ReInput"),this.ImeSelectTimes=0):40===c||38===c?this.ImeSelect===!1&&1===this.ImeSelectTimes&&(this.ImeSelect=!0):8===c||46===c||27===c?this.ImeSelectTimes=0:244===c&&(this.IsJapanConvertKeyPress=!0)}return 13!==b.keyCode?!1:void 0},d.prototype.PerformSpin=function(a){var b=this.Spin.Increment,c=!0;"down"===a&&(c=!1),this.PerformSpinProcess(this.SelectionStart,this.SelectionEnd,b,this.Spin.Wrap,c,!0),this.UIUpdate.SetFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)},d.prototype.PerformSpinProcess=function(a,b,c,d,e,f){if(!this.GetReadOnly()||!f){var g=this.UIProcess.PerformSpinInternal(a,b,c,d,e);if(this.FocusType=6,!g)return void this.UIUpdate.SetFocus();if(null==g.Text||this.UpdateText(g)){if(null!=g.SelectionStart&&(this.SelectionStart=g.SelectionStart),null!=g.SelectionEnd&&(this.SelectionEnd=g.SelectionEnd,this.SelectionLength=this.GetSelectionLength()),g.EventInfo){var h=this.UIProcess.FireEvent(this,g.EventInfo.Name,g.EventInfo.Args,g.EventInfo.Type);null!=h&&(this.FocusType=h)}if(this.Text!==this.GetTextboxValue()){for(var i=this.Format.Fields.fieldArray,j=0;j<i.length&&"EnumField"!==i[j].fieldLabel;j++);if(j===i.length)return;this.UpdateDisplayText(this.Text)}}}},d.prototype.SelectStart=function(a){return this.ImeMode?!1:void c.prototype.SelectStart.call(this,a)},d.prototype.Click=function(){},d.prototype.DragDrop=function(b){return!a.CoreUtility.IsIE()&&this.GetReadOnly()?!1:(this.IsDragDrop=!0,this.Paste(b,!0,0,0),!1)},d.prototype.DragOver=function(){},d.prototype.DragInit=function(){},d.prototype.ImeInput=function(b,c){var e=this.UIUpdate.GetText();if(e===this.Text)return window.event&&a.Utility.PreventDefault(window.event),this.ImeMode=!1,!1;var f;if(""!==this.Text){var g=Math.min(this.SelectionStart,this.SelectionEnd),h=Math.max(this.SelectionStart,this.SelectionEnd);if(h<this.Text.GetLength()){var i=this.Text.Substring(h,this.Text.GetLength()),j=e.IndexOf(i);f=-1!==j?e.Substring(g,e.GetLength()-i.GetLength()):""}else f=e.Substring(g,e.GetLength())}else f=e;if("ReInput"===b&&(f=c?f.Substring(0,f.GetLength()):f.Substring(0,f.GetLength()-1)),"Record"===b)return f;var k=!1;if("LoseFocusInput"===b){if(""===f)return;d.Mask_ImeResponse=!0,k=!0}for(var l=0;l<f.GetLength();l++)if(l===f.GetLength()-1&&"LoseFocusInput"===b&&(this.japInput=!0),d.Mask_ImeResponse=!0,f.GetLength()>l+1){var m=f.Substring(l+1,l+2),n=new a.CharCategory,o=m.charCodeAt(0)-(n.KATAKANA_VOICED.charCodeAt(0)-1);1===o||2===o?(this.innerKeyPress(f.Substring(l,l+2),k),l++):"ReInput"===b?this.innerKeyPress(f.Substring(l,l+1),k,!0):this.innerKeyPress(f.Substring(l,l+1),k)}else"ReInput"===b?this.innerKeyPress(f.Substring(l,l+1),k,!0):this.innerKeyPress(f.Substring(l,l+1),k);this.japInput=!1,this.ImeMode=!1,this.ImeSelect=!1,("ReInput"===b||"ClickInput"===b)&&(this.truePosition=this.SelectionStart,this.FocusType=8)},d.prototype.SetInnerText=function(a){this.Clear(),this.UIProcess.Format.Fields.SetText(a,!0).isValid===!1?this.UIProcess.Format.Fields.RollBack():this.UIProcess.Format.Fields.SaveOldState();var b={};b.Text=this.GetDisplayText("Focus"),this.UpdateText(b)&&this.UpdateDisplayText(this.Text)},d.prototype.Copy=function(){this.SetSelection(this.SelectionStart,this.SelectionEnd),c.prototype.Copy.call(this)},d.prototype.Cut=function(){this.SetSelection(this.SelectionStart,this.SelectionEnd),c.prototype.Cut.call(this)},d.prototype.Paste=function(b,c,d,e){var f="";null!=b&&(f=b),d||(d=this.SelectionStart),e||(e=this.SelectionEnd);var g=this.UIProcess.Paste(d,e,f,this.GetExitOnLastChar(),c);if(!g)return!1;if(null!=g.Value&&(this.Value=g.Value),null!=g.Text){if(!this.UpdateText(g))return!1;this.UpdateDisplayText(this.Text),a.CoreUtility.IsIE()||this.SetInnerFocus()}return null!=g.SelectionStart&&(this.SelectionStart=g.SelectionStart),null!=g.SelectionEnd&&(this.SelectionEnd=g.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart)),g&&null!=g.FocusExit&&g.FocusExit||this.SetSelection(this.SelectionStart,this.SelectionEnd),g.EventInfo&&this.UIProcess.FireEvent(this,g.EventInfo.Name,g.EventInfo.Args,g.EventInfo.Type),!0},d.prototype.SetHideValue=function(){},d.prototype.GetHideValue=function(){},d.prototype.CanUndo=function(){return this.Format.Fields.CanUndo()?!0:!1},d.prototype.DoSpinUp=function(a,b){1===arguments.length&&(b=a,a=void 0),this.DoSpin("up",a,b)},d.prototype.DoSpinDown=function(a,b){1===arguments.length&&(b=a,a=void 0),this.DoSpin("down",a,b)},d.prototype.DoSpin=function(b,c,d){if(!("number"==typeof c&&isNaN(c)||"number"==typeof d&&isNaN(d))){var e=this.SelectionStart,f=this.SelectionEnd,g=this.Increment;if(void 0!=c){c=a.Utility.CheckInt(c,0,Math.pow(2,31));var h={};h.start=0,h.length=0,h=this.Format.Fields.GetRealFieldRange(c),e=h.start,f=h.start+h.length}void 0!=d&&(g=d),g=a.Utility.CheckInt(g,-Math.pow(2,31),Math.pow(2,31)),"up"===b?this.PerformSpinProcess(e,f,g,this.Wrap,!0,!1):this.PerformSpinProcess(e,f,g,this.Wrap,!1,!1)}},d.prototype.UpdateText=function(a){if(!a)return!1;var b="";if(null!=a.Text&&(b=a.Text),b!==this.Text&&null!=this.TextChanging&&""!=this.TextChanging){var c={},d={};d.Result=b,d.Cancel=!1,c.Name=this.TextChanging,c.Args=d,null!=a.SelectionStart&&(this.NewSelectionStart=a.SelectionStart),null!=a.SelectionEnd&&(this.NewSelectionEnd=a.SelectionEnd);var e=this.UIProcess.GetSepText();this.RollBack(),"undefined"==typeof this.NeedSetHideValue&&(this.NeedSetHideValue=!0),this.NeedSetHideValue&&this.SetHideValue(),c.Name.IndexOf&&c.Name.IndexOf("gcsh_InputManWeb_AjaxServerEventHandler")>-1&&(this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull?this.UIProcess.Format.Fields.SetText(e,!0):this.UIProcess.SetSepText(e));var f=this.UIProcess.FireEvent(this,c.Name,c.Args,"TextChanging");if(c.Name.IndexOf&&c.Name.IndexOf("gcsh_InputManWeb_AjaxServerEventHandler")>-1,null!=f&&(this.FocusType=f),"undefined"!=typeof this.TextChanging&&(this.NeedSetHideValue=!1),d.Cancel)return this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),!1;this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull?this.UIProcess.Format.Fields.SetText(e,!0):this.UIProcess.SetSepText(e)}return this.Text=b,this.Value=this.UIProcess.Format.Fields.GetValue(),!0},d.prototype.UpdateDisplayText=function(a){"undefined"==typeof this.NeedSetHideValue&&(this.NeedSetHideValue=!0),this.NeedSetHideValue&&(c.prototype.UpdateDisplayText.call(this,a),this.EditingTextChanged&&this.EditingTextChanged.call(this))},d.prototype.RollBack=function(){this.UIProcess.Format.Fields.RollBack()},d.prototype.ProcessReservedKey=function(a){var b=c.prototype.ProcessReservedKey.call(this,a);if(b)return!0;switch(a){case 118:case 119:return!0}return!1},d.prototype.AddAllEventsHandler=function(){c.prototype.AddAllEventsHandler.call(this);var d=this;a.CoreUtility.IsIE10OrLater()&&b(this.GetInputElement()).bind("MSPointerUp.wijinput",function(b){a.GlobalEventHandler.OnMSPointerUp(d,b)},!1)},d.prototype.CompositionStart=function(a){this.ImeMode=!0},d.prototype.CompositionUpdate=function(a){},d.prototype.CompositionEnd=function(b){var c=this,d=function(){try{c.ImeInput("DirectInput")}finally{c.ImeMode=!1}};a.CoreUtility.IsIE9OrLater()?d():window.setTimeout(d,0)},d.prototype.Select=function(){this.ImeMode||(this.SelectionStart=a.Utility.GetSelectionStartPosition(this.GetInputElement()),this.SelectionEnd=this.SelectionStart+a.Utility.GetSelectionText(this.GetInputElement()).GetLength())},d.prototype.MSPointerUp=function(a){a&&(this.MouseUpPointerType=a.pointerType,this.MouseUpHasValue=(a.srcElement||a.target).value.length>0)},d.prototype.Input=function(a){var b=this,c=function(){try{b.ImeInput("DirectInput")}finally{b.ImeMode=!1}};setTimeout(c,0)},d.prototype.HandleClearButton=function(b){if(a.CoreUtility.IsIE10OrLater()&&this.FocusedWhenMouseDown&&this.MouseDownOnClearButton&&(b.srcElement||b.target)===this.InputElement){var c=document.activeElement===(b.srcElement||b.target),d=a.CoreUtility.IsMouseDownOnClearButton(b);if(this.MouseUpHasValue&&c&&d){this.Clear();var e=this.GetText(),f=this;window.setTimeout(function(){f.UpdateDisplayText(e),f.SelectionStart=f.SelectionEnd=f.Format.Fields.GetFirstInputPosition(),f.SetSelection(f.SelectionStart,f.SelectionEnd)},0)}}},d.prototype.HidePromptChar=function(){if(this.GetHidePromptOnLeave()){var a=this.GetInputElement().value;this._textWithPromptChar=a,a=a.replace(new RegExp(this.GetPromptChar(),"g")," "),this.GetInputElement().value=a}},d.prototype.ShowPromptChar=function(){null!==this._textWithPromptChar&&(this.GetInputElement().value=this._textWithPromptChar,this._textWithPromptChar=null)},d.prototype.GetHideEnter=function(){return this._hideEnter},d.prototype.SetHideEnter=function(a){this._hideEnter=a},d.prototype.GetHidePromptOnLeave=function(){return this._hidePromptOnLeave},d.prototype.SetHidePromptOnLeave=function(a){a!==this._hidePromptOnLeave&&(this._hidePromptOnLeave=a,a&&document.activeElement!==this.GetInputElement()&&this.HidePromptChar(),a||document.activeElement===this.GetInputElement()||this.ShowPromptChar())},d.prototype.FireKeyExit=function(){null!=this.EventInfo&&"KeyExit"==this.EventInfo.Type&&(this.KeyExit&&this.KeyExit.call(this),this.FocusType=4,this.EventInfo=null)},d.prototype.OnEditStatusChanged=function(b){b=a.Utility.CheckFunction(b),this.EditStatusChangedEvent=b},d.prototype.OnInvalidInput=function(b){b=a.Utility.CheckFunction(b),this.InvalidInputEvent=b},d.prototype.OnKeyExit=function(b){b=a.Utility.CheckFunction(b),this.KeyExit=b},d.prototype.OnSpinDown=function(b){b=a.Utility.CheckFunction(b),this.SpinDown=b},d.prototype.OnSpinUp=function(b){b=a.Utility.CheckFunction(b),this.SpinUp=b},d.prototype.OnTextChanged=function(b){b=a.Utility.CheckFunction(b),this.TextChanged=b},d.prototype.OnTextChanging=function(b){b=a.Utility.CheckFunction(b),this.TextChanging=b},d.prototype.OnValueChanged=function(b){b=a.Utility.CheckFunction(b),this.ValueChanged=b},d.prototype.OnMouseDownCallBack=function(b){b=a.Utility.CheckFunction(b),this.MouseDownEvent=b},d.prototype.OnMouseUpCallBack=function(b){b=a.Utility.CheckFunction(b),this.MouseUpEvent=b},d.prototype.OnEditingTextChanged=function(b){b=a.Utility.CheckFunction(b),this.EditingTextChanged=b},d.prototype.IsFocused=function(){try{return document.activeElement===this.GetInputElement()}catch(a){return!1}},d.prototype.GetTextOnSimpleMode=function(){if(!this.IsFocused()&&this.Format.Fields.ValueIsNull()&&null!==this._getDisplayNullExpression())return this.GetTextboxValue();var a=this.Format.Fields.GetTextSimpleMode(!1),b=new RegExp("\\"+this.GetPromptChar(),"g");return a=a.replace(b," ")},d.prototype.GetPostValueOnSimpleMode=function(){if(!this.IsFocused()&&this.Format.Fields.ValueIsNull()&&null!==this._getDisplayNullExpression())return this.GetTextboxValue();var a=this.Format.Fields.GetTextSimpleMode(!0),b=new RegExp("\\"+this.GetPromptChar(),"g");return a=a.replace(b," ")},d.Mask_ImeResponse=!1,d}(w);a.MaskControl=B}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){!function(a){a[a.editOptional=1]="editOptional",a[a.editRequired=2]="editRequired",a[a.separator=4]="separator",a[a.literal=8]="literal"}(b.wijchartype||(b.wijchartype={}));var c=(b.wijchartype,function(){function c(a,b,c){this.inputWidget=a,this.mask=b,this.asciiOnly=c,this.testString="",this.assignedCharCount=0,this.requiredCharCount=0,this.noMask=!1,this._autoConvertPosition=0,this._needCheckNextChar=!1,this.descriptors=[],this.initialize()}return c.prototype.initialize=function(){if(this.noMask=!this.mask||this.mask.length<=0,!this.noMask){this.testString="",this.assignedCharCount=0,this.requiredCharCount=0,this.descriptors=[];var a="none",b=!1,e=8,f="",g=this.inputWidget._getCulture();"undefined"==typeof g&&(g=Globalize.findClosestCulture(""));for(var h=0;h<this.mask.length;h++){var i=!1,j=this.mask.charAt(h);if(b&&(b=!1,i=!0),!i){var k=j;if("C">=k){switch(k){case"#":case"9":case"?":case"C":j=this.getPromtChar(),e=1,i=!0;break;case"$":f=g.numberFormat.currency.symbol,e=4,i=!0;break;case"%":case"-":case";":case"=":case"@":e=8,i=!0;break;case"&":case"0":case"A":j=this.getPromtChar(),e=2,i=!0;break;case",":f=g.numberFormat[","],e=4,i=!0;break;case".":f=g.numberFormat["."],e=4,i=!0;break;case"/":f=g.calendars.standard["/"],e=4,i=!0;break;case":":f=g.calendars.standard[":"],e=4,i=!0;break;case"<":a="lower";continue;case">":a="upper";continue}i||(e=8,i=!0)}if(!i){if("\\">=k){switch(k){case c.FK_K:case c.FK_H:case c.FK_N:case"L":j=this.getPromtChar(),e=2,i=!0;break;case"\\":b=!0,e=8;continue}i||(e=8,i=!0)}if(!i){switch("a"===k&&(j=this.getPromtChar(),e=1,i=!0),k){case c.FK_DB_K:case c.FK_DB_J:case c.FK_DB_9:case c.FK_DB_Z:case c.FK_DB_N:case c.FK_DB_G:case c.FK_DB_T:j=this.getPromtChar(),e=2,i=!0}if(!i&&("|"!==k&&(e=8,
i=!0),!i)){a="none";continue}}}}if(i){var l=new d(h,e);this.isEditDesc(l)&&(l.caseConversion=a),4!==e&&(f=j);for(var m=0;m<f.length;m++)this.testString=this.testString+f.charAt(m),this.descriptors[this.descriptors.length]=l}}}},c.prototype.getAllowPromptAsInput=function(){return this.inputWidget?this.inputWidget._getAllowPromptAsInput():!1},c.prototype.getPasswordChar=function(){var a=this.inputWidget?this.inputWidget._getPasswordChar():"*";return""===a&&(a="*"),a.length>1?a.charAt(0):a},c.prototype.isPassword=function(){return this.inputWidget?this.inputWidget._isPassword():!1},c.prototype.getResetOnPrompt=function(){return this.inputWidget?this.inputWidget._getResetOnPrompt():!0},c.prototype.getResetOnSpace=function(){return this.inputWidget?this.inputWidget._getResetOnSpace():!0},c.prototype.getSkipLiterals=function(){return this.inputWidget?this.inputWidget._getSkipLiterals():!0},c.prototype.getHidePromptOnLeave=function(){return this.inputWidget?this.inputWidget._getHidePromptOnLeave():!1},c.prototype._trueOR=function(a,b){return 2*(a>>>1|b>>>1)+(1&a|1&b)},c.prototype.setValue=function(a){return!1},c.prototype.getValue=function(){return null},c.prototype.getPromtChar=function(){var a=this.inputWidget?this.inputWidget._getPromptChar():"_";return""===a&&(a="_"),a.length>1?a.charAt(0):a},c.prototype.getAutoConvert=function(){return this.inputWidget?this.inputWidget._getAutoConvert():!0},c.prototype.updatePromptChar=function(){if(!this.noMask)for(var a=0;a<this.descriptors.length;a++){var b=this.descriptors[a];(1===b.charType||2===b.charType)&&(b.isAssigned||(this.testString=$.wij.charValidator.setChar(this.testString,this.getPromtChar(),a)))}},c.prototype.resetChar=function(a){var b=this.descriptors[a];this.isEditPos(a)&&b.isAssigned&&(b.isAssigned=!1,this.testString=$.wij.charValidator.setChar(this.testString,this.getPromtChar(),a),this.assignedCharCount--,2===b.charType&&this.requiredCharCount--)},c.prototype.getAdjustedPos=function(a){return this.noMask?a=Math.min(a,this.testString.length-1):a>=this.descriptors.length&&a--,Math.max(0,a)},c.prototype.findNonEditPositionInRange=function(a,b,c){var d=this._trueOR(8,4);return this.findPositionInRange(a,b,c,d)},c.prototype.findPositionInRange=function(a,b,c,d){if(a=Math.max(0,a),b=Math.min(b,this.testString.length-1),b>=a)for(;b>=a;){var e=c?a++:b--,f=this.descriptors[e];if((4294967295&f.charType&(4294967295&d))===f.charType)return e}return-1},c.prototype.findAssignedEditPositionInRange=function(a,b,c){return 0===this.assignedCharCount?-1:this.findEditPositionInRange(a,b,c,2)},c.prototype.findEditPositionInRange=function(a,b,c,d){do{var e=this._trueOR(2,1),f=this.findPositionInRange(a,b,c,e);if(-1===f)break;var g=this.descriptors[f];switch(d){case 1:if(!g.isAssigned)return f;break;case 2:if(g.isAssigned)return f;break;default:return f}c?a++:b--}while(b>=a);return-1},c.prototype.findAssignedEditPositionFrom=function(a,b){if(!this.assignedCharCount)return-1;var c,d;return b?(c=a,d=this.testString.length-1):(c=0,d=a),this.findAssignedEditPositionInRange(c,d,b)},c.prototype.findEditPositionFrom=function(a,b){var c,d;return b?(c=a,d=this.testString.length-1):(c=0,d=a),this.findEditPositionInRange(c,d,b,0)},c.prototype.setChar=function(b,c,d){if(this.getAutoConvert()){var e=new a.input.wijInputResult,f=this.testInternal(b,c,e);if(!f){var g=this._convert(b,0);0===b.length,b=g.strValue.charAt(0),g.strValue.length>1&&(this.inputWidget._appendChar=g.strValue.charAt(1)),2===g.index&&(this.inputWidget._skipNextChar=!0)}}c=Math.max(0,c),d||(d=this.descriptors[c]),this.testEscapeChar(b,c,d)?this.resetChar(c):($.wij.charValidator.isLetter(b)&&($.wij.charValidator.isUpper(b)?"lower"===d.caseConversion&&(b=b.toLowerCase()):"upper"===d.caseConversion&&(b=b.toUpperCase())),this.testString=$.wij.charValidator.setChar(this.testString,b,c),d.isAssigned||(d.isAssigned=!0,this.assignedCharCount++,2===d.charType&&this.requiredCharCount++))},c.prototype.internalInsertAt=function(a,c,d,e){if(0===a.length)return d.testPosition=c,d.hint=d.noEffect,!0;if(!this._testString(a,c,d))return!1;var f=this.findEditPositionFrom(c,!0),g=-1!==this.findAssignedEditPositionInRange(f,d.testPosition,!0);if(g&&d.testPosition===this.testString.length-1)return d.hint=d.unavailableEditPosition,d.testPosition=this.testString.length,!1;var h=this.findEditPositionFrom(d.testPosition+1,!0);if(g){var i=new b.wijInputResult;i.hint=i.unknown;for(var j=!0,k=this.findAssignedEditPositionFrom(this.testString.length-1,!1);j;){if(j=!1,-1===h)return d.hint=d.unavailableEditPosition,d.testPosition=this.testString.length,!1;var l=this.testChar(this.testString.charAt(f),h,i);if(this.descriptors[f].isAssigned&&!l)return d.hint=i.hint,d.testPosition=h,!1;f===k||(f=this.findEditPositionFrom(f+1,!0),h=this.findEditPositionFrom(h+1,!0),j=!0)}d.hint=Math.max(d.hint,i.hint)}if(!e){if(g)for(;f>=c;)this.descriptors[f].isAssigned?this.setChar(this.testString.charAt(f),h):this.resetChar(h),h=this.findEditPositionFrom(h-1,!1),f=this.findEditPositionFrom(f-1,!1);this.setString(a,c)}return!0},c.prototype.insertAt=function(a,c,d){if("undefined"==typeof d&&(d=new b.wijInputResult),void 0===a)throw"InsertAt: input";return this.noMask?(this.testString=this.testString.substring(0,c)+a+this.testString.substring(c,this.testString.length),d.testPosition=c+a.length-1,!0):c>=0&&c<this.testString.length?this.internalInsertAt(a,c,d,!1):(d.testPosition=c,d.hint=d.positionOutOfRange,!1)},c.prototype.clear=function(a){if(this.noMask)return this.testString="",void(a.hint=a.success);if(this.assignedCharCount){a.hint=a.success;for(var b=0;b<this.testString.length;b++)this.resetChar(b)}else a.hint=a.noEffect},c.prototype.isLiteral=function(a){return a?8===a.charType||4===a.charType:!1},c.prototype.testEscapeChar=function(a,b,c){if(b=Math.max(0,b),c||(c=this.descriptors[b]),this.isLiteral(c))return this.getSkipLiterals()?a===this.testString.charAt(b):!1;var d=this.getResetOnPrompt()&&a===this.getPromtChar(),e=this.getResetOnSpace()&&" "===a;return d||e},c.prototype.testChar=function(a,b,c){var d=this.testInternal(a,b,c);if(!d&&this.getAutoConvert()){this._autoConvertPosition=b;var e=this._convert(a,0);d=e.strValue.length>0,e.strValue.length>1&&(this.inputWidget._appendChar=e.strValue.charAt(1)),2===e.index&&(this.inputWidget._skipNextChar=!0)}return d},c.prototype.testInternal=function(a,d,e){if(!$.wij.charValidator.isPrintableChar(a))return e.hint=e.invalidInput,!1;var f=this.descriptors[d];if(!f)return!1;if(this.isLiteral(f))return this.getSkipLiterals()&&a===this.testString.charAt(d)?(e.hint=e.characterEscaped,!0):(e.hint=e.nonEditPosition,!1);if(a===this.getPromtChar()){if(this.getResetOnPrompt())return this.isEditDesc(f)&&f.isAssigned?e.hint=e.sideEffect:e.hint=e.characterEscaped,!0;if(!this.getAllowPromptAsInput())return e.hint=e.promptCharNotAllowed,!1}if(" "===a&&this.getResetOnSpace())return this.isEditDesc(f)&&f.isAssigned?e.hint=e.sideEffect:e.hint=e.characterEscaped,!0;switch(this.mask.charAt(f.maskPosition)){case"L":if(!$.wij.charValidator.isLetter(a))return e.hint=e.letterExpected,!1;if(!$.wij.charValidator.isAsciiLetter(a)&&this.asciiOnly)return e.hint=e.asciiCharacterExpected,!1;break;case"?":if(!$.wij.charValidator.isLetter(a)&&" "!==a)return e.hint=e.letterExpected,!1;if(!$.wij.charValidator.isAsciiLetter(a)&&this.asciiOnly)return e.hint=e.asciiCharacterExpected,!1;break;case"A":if(!$.wij.charValidator.isAlphanumeric(a))return e.hint=e.alphanumericCharacterExpected,!1;if(!$.wij.charValidator.isAciiAlphanumeric(a)&&this.asciiOnly)return e.hint=e.asciiCharacterExpected,!1;break;case"a":if(!$.wij.charValidator.isAlphanumeric(a)&&" "!==a)return e.hint=e.alphanumericCharacterExpected,!1;if(!$.wij.charValidator.isAciiAlphanumeric(a)&&this.asciiOnly)return e.hint=e.asciiCharacterExpected,!1;break;case"&":if(!$.wij.charValidator.isAscii(a)&&this.asciiOnly)return e.hint=e.asciiCharacterExpected,!1;break;case"C":if(!$.wij.charValidator.isAscii(a)&&this.asciiOnly&&" "!==a)return e.hint=e.asciiCharacterExpected,!1;break;case"0":if(!$.wij.charValidator.isDigit(a))return e.hint=e.digitExpected,!1;break;case"9":if(!$.wij.charValidator.isDigit(a)&&" "!==a)return e.hint=e.digitExpected,!1;break;case c.FK_N:if(b.CharProcess.CharEx.IsFullWidth(a)||!b.CharProcess.CharEx.IsKatakana(a)||b.CharProcess.CharEx.IsLowerKana(a))return!1;break;case c.FK_DB_N:if(!b.CharProcess.CharEx.IsFullWidth(a)||!b.CharProcess.CharEx.IsKatakana(a)||b.CharProcess.CharEx.IsLowerKana(a))return!1;break;case c.FK_DB_G:if(!b.CharProcess.CharEx.IsUpperKana(a)||!b.CharProcess.CharEx.IsHiragana(a))return!1;break;case c.FK_DB_9:if(a>=c.DBCS_0&&a<=c.DBCS_9);else if(" "!==a)return!1;break;case"#":if(!$.wij.charValidator.isDigit(a)&&"-"!==a&&"+"!==a&&" "!==a)return e.hint=e.digitExpected,!1;break;case c.FK_K:if(b.CharProcess.CharEx.IsFullWidth(a)||!b.CharProcess.CharEx.IsKatakana(a))return!1;break;case c.FK_H:if(b.CharProcess.CharEx.IsFullWidth(a))return!1;break;case c.FK_DB_K:if(!b.CharProcess.CharEx.IsFullWidth(a)||!b.CharProcess.CharEx.IsKatakana(a))return!1;break;case c.FK_DB_T:if(!b.CharProcess.CharEx.IsSurrogate(a))return!1;break;case c.FK_DB_J:if(!b.CharProcess.CharEx.IsHiragana(a))return!1;break;case c.FK_DB_Z:if(!b.CharProcess.CharEx.IsFullWidth(a))return!1}return a===this.testString.charAt(d)&&f.isAssigned?e.hint=e.noEffect:e.hint=e.success,!0},c.prototype._convert=function(a,c){var d={};d.success=!0,d.strValue="",d.index=c;var e,f=a.Substring(c,c+1),g=b.CharProcess.CharEx,h=!0;if(g.IsAlphabet(f)){var i=g.IsLower(f)?f.toUpperCase():f.toLowerCase();return e=this._isValid(i),e&&h||!e&&!h?(c++,d.index=c,d.strValue=i,d):(f=g.IsFullWidth(f)?g.ToHalfWidth(f):g.ToFullWidth(f).text,e=this._isValid(f),e&&h||!e&&!h?(c++,d.index=c,d.strValue=f,d):(i=g.IsFullWidth(i)?g.ToHalfWidth(i):g.ToFullWidth(i).text,e=this._isValid(i),e&&h||!e&&!h?(c++,d.index=c,d.strValue=i,d):(d.success=!1,d)))}if(g.IsHiragana(f)){if(g.IsLowerKana(f)){var j=g.ToUpperKana(f);if(e=this._isValid(j),e&&h||!e&&!h)return c++,d.index=c,d.strValue=j,d}else if(g.HasLowerKana(f)){var k=g.ToLowerKana(f);if(e=this._isValid(k),e&&h||!e&&!h)return c++,d.index=c,d.strValue=k,d}if(f=g.ToKatakana(f),e=this._isValid(f),e&&h||!e&&!h)return c++,d.index=c,d.strValue=f,d;if(g.IsLowerKana(f)){var j=g.ToUpperKana(f);if(e=this._isValid(j),e&&h||!e&&!h)return c++,d.index=c,d.strValue=j,d}else if(g.HasLowerKana(f)){var k=g.ToLowerKana(f);if(e=this._isValid(k),e&&h||!e&&!h)return c++,d.index=c,d.strValue=k,d}var l=g.ToHalfWidthEx(f);if(e=this._isValid(l),e&&h||!e&&!h)return c++,d.index=c,d.strValue=l,d;if(g.IsLowerKana(l)){if(l=g.ToUpperKana(l),e=this._isValid(l),e&&h||!e&&!h)return c++,d.index=c,d.strValue=l,d}else if(g.HasLowerKana(l)&&(l=g.ToLowerKana(l),e=this._isValid(l),e&&h||!e&&!h))return c++,d.index=c,d.strValue=l,d;return d.success=!1,d}if(g.IsKatakana(f)){if(g.IsLowerKana(f)){var j=g.ToUpperKana(f);if(e=this._isValid(j),e&&h||!e&&!h)return c++,d.index=c,d.strValue=j,d}else if(g.HasLowerKana(f)){var k=g.ToLowerKana(f);if(e=this._isValid(k),e&&h||!e&&!h)return c++,d.index=c,d.strValue=k,d}var i=f,m=!1;if(g.IsFullWidth(f)){var n=g.ToHalfWidthEx(f);if(n.GetLength()>0&&(e=this._isValid(n),e&&h||!e&&!h))return c++,d.index=c,d.strValue=n,d;if(g.IsLowerKana(n)){if(n=g.ToUpperKana(n),e=this._isValid(n),e&&h||!e&&!h)return c++,d.index=c,d.strValue=n,d}else if(g.HasLowerKana(n)&&(n=g.ToLowerKana(n),e=this._isValid(n),e&&h||!e&&!h))return c++,d.index=c,d.strValue=n,d}else{if(null==c){if(i=g.ToFullWidth(f).text,!g.IsKatakana(i))return d;if(e=this._isValid(i),e&&h||!e&&!h)return c++,d.index=c,d.strValue=i,d}else{var o=this.inputWidget._nextChar;if(this._needCheckNextChar&&o&&o.length>0){var p=g.ToFullWidth(a+o);i=p.text,m=p.processedAll}else i=g.ToFullWidth(f).text;if(!g.IsKatakana(i))return d;if(e=this._isValid(i),e&&h||!e&&!h)return c++,m&&c++,d.index=c,d.strValue=i,d}if(g.IsLowerKana(i)){var j=g.ToUpperKana(i);if(e=this._isValid(j),e&&h||!e&&!h)return c++,d.index=c,d.strValue=j,d}else if(g.HasLowerKana(i)){var k=g.ToLowerKana(i);if(e=this._isValid(k),e&&h||!e&&!h)return c++,d.index=c,d.strValue=k,d}}if(i=g.ToHiragana(i),e=this._isValid(i),e&&h||!e&&!h)return c++,m&&c++,d.index=c,d.strValue=i,"\u3094"==i&&(m?d.strValue="\u3046\u309b":(c--,d.index=c,d.strValue="",d.success=!1)),d;if(g.IsLowerKana(i)){var j=g.ToUpperKana(i);if(e=this._isValid(j),e&&h||!e&&!h)return c++,d.index=c,d.strValue=j,d}else if(g.HasLowerKana(i)){var k=g.ToLowerKana(i);if(e=this._isValid(k),e&&h||!e&&!h)return c++,d.index=c,d.strValue=k,d}}return f=g.IsFullWidth(f)?g.ToHalfWidth(f):g.ToFullWidth(f).text,e=this._isValid(f),e&&h||!e&&!h?(c++,d.index=c,d.strValue=f,d):(d.success=!1,d)},c.prototype._isValid=function(b){var c=new a.input.wijInputResult;return this.testInternal(b,this._autoConvertPosition,c)},c.prototype._testString=function(a,c,d){if(d.hint=d.unknown,d.testPosition=c,a.length){var e=new b.wijInputResult;e.testPosition=d.testPosition,e.hint=d.hint;for(var f=0;f<a.length;f++){if(d.testPosition>this.testString.length)return d.hint=d.unavailableEditPosition,!1;var g=a.charAt(f);if(!this.testEscapeChar(g,d.testPosition)&&(d.testPosition=this.findEditPositionFrom(d.testPosition,!0),-1===d.testPosition))return d.testPosition=this.testString.length,d.hint=d.unavailableEditPosition,!1;if(this._needCheckNextChar=!0,this.inputWidget._batchKeyPress||(this.inputWidget._nextChar=f===a.length-1?"":a.charAt(f+1)),!this.testChar(g,d.testPosition,e))return d.hint=e.hint,this._needCheckNextChar=!1,this.inputWidget._batchKeyPress||(this.inputWidget._nextChar=""),!1;if(this._needCheckNextChar=!1,!this.inputWidget._batchKeyPress){this.inputWidget._nextChar="";var h=this.inputWidget._appendChar;if(h&&h.length>0&&(this.inputWidget._appendChar="",d.testPosition++,!this.testChar(h,d.testPosition,e)))return d.hint=e.hint,this._needCheckNextChar=!1,!1;this.inputWidget._skipNextChar&&(f++,this.inputWidget._skipNextChar=!1)}if(d.hint=Math.max(e.hint,d.hint),d.testPosition++,d.testPosition===this.testString.length)break}d.testPosition--}return!0},c.prototype.setText=function(a,c){if("undefined"==typeof c&&(c=new b.wijInputResult),void 0===a)throw"SetFromPos: input parameter is null or undefined.";if(c.hint=c.unknown,c.testPosition=0,!a.length)return this.clear(c),!0;if(this.noMask)return this.testString=a,!0;if(!this.testSetString(a,c.testPosition,c))return!1;var d=this.findAssignedEditPositionFrom(c.testPosition+1,!0);return-1!==d&&this.resetString(d,this.testString.length-1),!0},c.prototype.resetString=function(a,b){if(this.noMask)return void(this.testString="");if(a=this.findAssignedEditPositionFrom(a,!0),-1!==a)for(b=this.findAssignedEditPositionFrom(b,!1);b>=a;)a=this.findAssignedEditPositionFrom(a,!0),this.resetChar(a),a++},c.prototype.setString=function(a,b){for(var c=0;c<a.length;c++){var d=a.charAt(c);if(this.testEscapeChar(d,b)||(b=this.findEditPositionFrom(b,!0)),0>b||b>=this.testString.length)return;if(this.inputWidget._batchKeyPress||(this.inputWidget._nextChar=c===a.length-1?"":a.charAt(c+1)),this._needCheckNextChar=!0,this.setChar(d,b),b++,this._needCheckNextChar=!1,!this.inputWidget._batchKeyPress){this.inputWidget._nextChar="";var e=this.inputWidget._appendChar;e&&e.length>0&&(this.inputWidget._appendChar="",this.inputWidget._nextChar="",this.testEscapeChar(e,b)||(b=this.findEditPositionFrom(b,!0)),this.setChar(e,b),b++),this.inputWidget._skipNextChar&&(c++,this.inputWidget._skipNextChar=!1)}}},c.prototype.testSetString=function(a,b,c){return a.length>this.testString.length&&(a=a.substring(0,this.testString.length)),this._testString(a,b,c)?(this.setString(a,b),!0):!1},c.prototype.isAllDecriptorUnAssigned=function(){for(var a=0;a<this.testString.length;a++){var b=this.descriptors[a];if(b&&(1===b.charType||2===b.charType)&&b.isAssigned)return!1}return!0},c.prototype.toString=function(a,b,c,d,e){var f=this.inputWidget._showNullText(),g=!this.inputWidget.isFocused(),h=this.isAllDecriptorUnAssigned();if(f&&g&&h)return this.inputWidget._getNullText();a=void 0===a?!this.isPassword():a;var i=this.getHidePromptOnLeave()?this.inputWidget.isFocused():!0;if(b=void 0===b?i:b,c=void 0===c?!0:c,this.noMask){if(!a){for(var j="",k=0;k<this.testString.length;k++)j+=this.getPasswordChar();return j}return this.testString}if(d=void 0===d?0:d,e=void 0===e?this.testString.length:e,0>=e)return"";if(d=Math.max(0,d),d>=this.testString.length)return"";var l=this.testString.length-d;if(e=Math.min(e,l),f=!this.isPassword()||a,g=b&&c,f&&g)return this.testString.substring(d,e-d);for(var m="",n=d+e-1,o=d;n>=o;o++){var p=this.testString.charAt(o),q=this.descriptors[o];switch(q.charType){case 1:case 2:if(!q.isAssigned)break;if(!this.isPassword()||a){m+=p;continue}m+=this.getPasswordChar();continue;case 3:m+=p;continue;case 4:case 8:if(!c)continue;m+=p;continue;default:m+=p;continue}m+=b?p:" "}return m},c.prototype.isEditDesc=function(a){return this.noMask?!0:2===a.charType||1===a.charType},c.prototype.isEditPos=function(a){if(this.noMask)return!0;if(0>a||a>=this.testString.length)return!1;var b=this.descriptors[a];return this.isEditDesc(b)},c.prototype.internalRemoveAt=function(a,c,d,e){if("undefined"==typeof e&&(e=!1),this.noMask){try{this.testString=this.testString.substring(0,a)+this.testString.substring(c+1,this.testString.length),d.testPosition=a}catch(f){}return!0}var g=this.findAssignedEditPositionFrom(this.testString.length-1,!1),h=this.findEditPositionInRange(a,c,!0,0);if(d.hint=d.noEffect,-1===h||h>g)return d.testPosition=a,!0;if(d.testPosition=a,-1!==this.findAssignedEditPositionInRange(a,c,!0)&&(d.hint=d.success),g>c){var i=this.findEditPositionFrom(c+1,!0),j=i;a=h;for(var k=!0,l=new b.wijInputResult;k;){k=!1;var m=this.testString.charAt(i),n=this.descriptors[i],o=m!==this.getPromtChar()||n.isAssigned,p=!this.testChar(m,h,l);if(o&&p)return d.hint=l.hint,d.testPosition=h,!1;i===g||(i=this.findEditPositionFrom(i+1,!0),h=this.findEditPositionFrom(h+1,!0),k=!0)}if(d.sideEffect>d.hint&&(d.hint=d.sideEffect),e)return!0;for(i=j,h=a,k=!0;k;){k=!1;var q=this.testString.charAt(i),r=this.descriptors[i];q!==this.getPromtChar()||r.isAssigned?(this.setChar(q,h),this.resetChar(i)):this.resetChar(h),i===g||(i=this.findEditPositionFrom(i+1,!0),h=this.findEditPositionFrom(h+1,!0),k=!0)}a=h+1}return c>=a&&this.resetString(a,c),!0},c.prototype.removeAt=function(a,c,d,e){return"undefined"==typeof c&&(c=a),"undefined"==typeof d&&(d=new b.wijInputResult),c>=this.testString.length?(d.testPosition=c,d.hint=d.positionOutOfRange,!1):a>=0&&c>=a?this.internalRemoveAt(a,c,d,!1):(d.testPosition=a,d.hint=d.positionOutOfRange,!1)},c.prototype._isLastCharAssigned=function(){var a=this.findEditPositionFrom(this.testString.length,!1);return a>=0&&a<this.testString.length?this.descriptors[a].isAssigned:!1},c.prototype._getFieldList=function(){for(var a=[],b=this.findEditPositionFrom(0,!0);b>=0&&b<this.testString.length;)a.push(b),b=this.findEditPositionFrom(b+1,!0);var c=[];if(a.length>0){for(var d=a[0],e=1,f=d;e<a.length;)a[e]-d==1||(c.push({"start":f,"end":d}),f=a[e]),d=a[e],e++;c.push({"start":f,"end":d})}return c},c.prototype.replaceWith=function(a,c){var d=a.start,e=new b.wijInputResult;return a.start<a.end&&(this.removeAt(a.start,a.end-1,e,!0),d=e.testPosition),this.insertAt(c,d,e)?e:null},c.FK_K="K",c.FK_H="H",c.FK_DB_9="\uff19",c.FK_N="N",c.FK_DB_N="\uff2e",c.FK_DB_G="\uff27",c.FK_DB_K="\uff2b",c.FK_DB_J="\uff2a",c.FK_DB_Z="\uff3a",c.FK_DB_T="\uff34",c.DBCS_0="\uff10",c.DBCS_9="\uff19",c.DBCS_A="\uff21",c.DBCS_a="\uff41",c.DBCS_Z="\uff3a",c.DBCS_z="\uff5a",c}());b.wijMaskedTextProvider=c;var d=function(){function a(a,b){this.maskPos=a,this.charType=b,this.caseConversion="none",this.isAssigned=!1,this.maskPosition=0,this.maskPosition=a,this.charType=b}return a}();b.wijCharDescriptor=d;var e=function(){function a(a){this._imaskOptions=a}return a.prototype._getCulture=function(){return Globalize.findClosestCulture(this._imaskOptions.culture)},a.prototype._getAllowPromptAsInput=function(){return!1},a.prototype._getPasswordChar=function(){return""},a.prototype._getResetOnPrompt=function(){return!0},a.prototype._getResetOnSpace=function(){return!0},a.prototype._getSkipLiterals=function(){return!0},a.prototype._getHidePromptOnLeave=function(){return!1},a.prototype._getPromptChar=function(){return"_"},a.prototype._getAutoConvert=function(){return this._imaskOptions.autoConvert},a.prototype._getNullText=function(){return""},a.prototype._isPassword=function(){return!1},a.prototype._showNullText=function(){return!1},a.prototype.isFocused=function(){return!1},a}();b.MaskStub=e}(a.input||(a.input={}));a.input}(wijmo||(wijmo={})),$.wijinputcore=$.wijinputcore||{},$.wijinputcore.formatmask=$.wijinputcore.formatmask||function(a,b,c){var d=c||{};d.autoConvert!==!1&&(d.autoConvert=!0),d.culture="";var e=new wijmo.input.MaskStub(d),f=new wijmo.input.wijMaskedTextProvider(e,b,!1),g=f.setText(a);return g?f.toString(!0,!0,!0):f.toString(!0,!1,!1)},$.wijinputcore.validateMask=function(a,b){var c={"autoConvert":!1};c.culture="";var d=new wijmo.input.MaskStub(c),e=new wijmo.input.wijMaskedTextProvider(d,b,!1);e.setText(a);var f=e.toString(!0,!0,!0);return f===a};var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(a){"use strict";var b=jQuery,c=function(c){function d(){c.apply(this,arguments),this._imMask=null,this._advanceMode=!1}return __extends(d,c),d.prototype._createTextProvider=function(){this._textProvider=new a.wijMaskedTextProvider(this,this.options.mask,!1)},d.prototype._checkMaskAndPassword=function(){var a=!this.options.mask||this.options.mask.length<0;if(a&&this._isPassword())throw'Option "passwordChar" requires a mask'},d.prototype._updateIsPassword=function(){var a=this.options.passwordChar.length>0&&"password"!==this.element.attr("type");this.element.data("isPassword",a),this._checkMaskAndPassword()},d.prototype._beginUpdate=function(){this.element.addClass(this.options.wijCSS.wijinputmask),this._updateIsPassword(),this.element.data("defaultText",this.options.text)},d.prototype._setOption=function(a,b){switch(a){case"maskFormat":this._super(a,b),a="mask"}if(c.prototype._setOption.call(this,a,b),this._advanceMode)if(d._imMaskAssociatedoptions.indexOf)-1!==d._imMaskAssociatedoptions.indexOf(a)&&this._syncProperties();else for(var e=0;e<d._imMaskAssociatedoptions.length;e++)if(d._imMaskAssociatedoptions[e]===a){this._syncProperties();break}switch(a){case"text":this._advanceMode&&this.options.textWithPromptAndLiterals&&(b=this.options.textWithPromptAndLiterals),this.setText(b);break;case"mask":case"culture":("undefined"==typeof b||b.length<=0)&&(b=""),this._checkMaskAndPassword();var f=this.getText();if(f===this._getNullText()&&(f=""),"mask"===a){if(!this._isAdvanceMode()&&b instanceof RegExp)return;this._textProvider.mask=b}this._checkFormatPattern(b),this._advanceMode?(this._imMask.SetText(f),this._updateText()):(this._textProvider.initialize(),this._textProvider.setText(f),this._updateText());break;case"promptChar":case"nullText":this._textProvider&&(this._textProvider.updatePromptChar(),this._updateText());break;case"hidePromptOnLeave":case"resetOnPrompt":this._updateText();break;case"passwordChar":this._updateIsPassword(),this._updateText()}},d.prototype._isAdvanceMode=function(){return"undefined"!=typeof a.MaskControl},d.prototype._checkFormatPattern=function(b){if(b instanceof RegExp||"advanced"===this.options.formatMode){if(this._advanceMode||(this._detachInputEvent(),this._imMask||(this._imMask=new a.MaskControl,this._addimMaskCustomEvent()),this._imMask.AttachInput(this.element.get(0)),this._attachKeyEventForDropDownList(),this._advanceMode=!0),b instanceof RegExp){var d=b;this._imMask.SetFormatPattern(d.source)}else this._imMask.SetFormatPattern(b);this._syncProperties()}else this._advanceMode&&(this._imMask.DetachInput(),this._detachEventForDropDownList(),c.prototype._attachInputEvent.call(this)),this._advanceMode=!1},d.prototype._attachKeyEventForDropDownList=function(){this.element.bind({"keydown.wijinput":b.proxy(this._onKeyDownForDropDownList,this)})},d.prototype._detachEventForDropDownList=function(){this.element.unbind(".wijinput")},d.prototype._onKeyDownForDropDownList=function(a){c.prototype._processKeyForDropDownList.call(this,a)},d.prototype._syncProperties=function(){this._imMask.SetEnabled(!this.options.disabled),this._imMask.SetReadOnly(!!this.options.disableUserInput),this._imMask.SetExitOnLastChar(!!this.options.blurOnLastChar),this._imMask.SetImeMode(this.options.imeMode),this._imMask.SetExitOnLeftRightKey(this._convertExistOnLeftRightKey(this.options.blurOnLeftRightKey)),this._imMask.SetTabAction(this._convertTabAction(this.options.tabAction)),this._imMask.SetDisplayNull(this.options.nullText),this._imMask.SetHideEnter(!!this.options.hideEnter),this._imMask.SetPromptChar(this.options.promptChar),this._imMask.SetAutoConvert(!!this.options.autoConvert),this._imMask.SetHidePromptOnLeave(!!this.options.hidePromptOnLeave),this._imMask.SetHighlightText(this._convertHighlightText(this.options.highlightText))},d.prototype._convertExistOnLeftRightKey=function(a){return a||(a="none"),a=a.toLowerCase(),"none"===a?0:"left"===a?1:"right"===a?2:"both"===a?3:void 0},d.prototype._convertHighlightText=function(a){return a?(a=a.toLowerCase(),"field"===a?1:"all"===a?2:0):0},d.prototype._convertTabAction=function(a){return a||(a="control"),a=a.toLowerCase(),"control"===a?0:1},d.prototype._addimMaskCustomEvent=function(){var a=this;this._imMask.OnInvalidInput(function(b){a._fireIvalidInputEvent("")}),this._imMask.OnTextChanged(function(b){a._raiseTextChanged()}),this._imMask.OnEditingTextChanged(function(b){a._updateText(!0)}),this._imMask.OnKeyExit(function(b){a._trigger("keyExit")})},d.prototype._processClearButton=function(){this._textProvider.clear(new a.wijInputResult),this._updateText();var b=this._textProvider.findEditPositionFrom(0,!0);this.selectText(b,b)},d.prototype._resetData=function(){var a=this.element.data("defaultText");(void 0===a||null===a)&&(a=this.element.data("elementValue")),(void 0===a||null===a)&&(a=""),this.setText(a)},d.prototype._isPassword=function(){return!!this.element.data("isPassword")},d.prototype._getTextWithPrompts=function(){return this._isInitialized()?this._textProvider.toString(!0,!0,!1):this.element.val()},d.prototype._getTextWithLiterals=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!0):this.element.val()},d.prototype._getTextWithPromptAndLiterals=function(){return this._isInitialized()?this._textProvider.toString(!0,!0,!0):this.element.val()},d.prototype._getTextWithPromptAndLiteralsAndPassword=function(){return this._isInitialized()?this._textProvider.toString(!1,!0,!0):this.element.val()},d.prototype._onChange=function(){if(this.element){var a=this.element.val();this.getText()!==a&&this._getTextWithPrompts()!==a&&this._getTextWithPromptAndLiterals()!==a&&(""!==this._textProvider.getPasswordChar()?this._getTextWithPromptAndLiteralsAndPassword()!==a&&this.setText(a):this.setText(a))}},d.prototype._onMouseDown=function(a){c.prototype._onMouseDown.call(this,a),this.element.data("prevSelection",null)},d.prototype._afterFocused=function(){if((this._isNullText()||this.options.hidePromptOnLeave)&&this._doFocus(),"none"===this.options.highlightText){var a=this.element.data("prevSelection");a&&this.element.wijtextselection(a.start,a.end)}else if("field"===this.options.highlightText){var b=this._getCurrentField(),c=b.currentField,d=b.fieldList;c>=d.length&&(c=d.length-1);var e=d[c];e&&this.selectText(e.start,e.end+1)}else if("all"===this.options.highlightText){var f=this.element.get(0);this.selectText(0,f.value.length)}},d.prototype._processTabKey=function(a){var b=this,c=this.options.tabAction;return c=c?c.toLowerCase():"control","control"===c?(setTimeout(function(){b._trigger("keyExit")},0),!1):this._moveField(!a.shiftKey)},d.prototype._getCurrentField=function(){var a=this._textProvider._getFieldList(),b=this.element.wijtextselection(),c=b.start,d=-1;if(a.length>0&&c>a[a.length-1].end&&(d=a.length),-1===d)for(var e=0;e<a.length;e++){if(c>=a[e].start&&c<=a[e].end){d=e;break}if(c<a[e].start){d=0!=e?e:-1;break}}var f={};return f.currentField=d,f.fieldList=a,f},d.prototype._moveField=function(a){var b=this._getCurrentField(),c=b.currentField,d=b.fieldList;if(a){if(c===d.length-1)return!1;this.element.wijtextselection(d[c+1].start,d[c+1].start)}else{if(0>=c)return!1;this.element.wijtextselection(d[c-1].start,d[c-1].start)}return!0},d.prototype._processLeftRightKey=function(a){var b=this.element.wijtextselection(),c=this.options.blurOnLeftRightKey?this.options.blurOnLeftRightKey.toLowerCase():"none";if(a&&0===b.start){if("both"===c||"left"===c)return this._moveControl(this.element.get(0),!1,!0),!0}else{var d="both"===c||"right"===c,e=!1;if(this._textProvider.noMask&&b.start===this.options.text.length?e=!0:this._textProvider.noMask||b.start!==this._textProvider.testString.length||(e=!0),!a&&d&&e)return this._moveControl(this.element.get(0),!0,!0),!0}return!1},d.prototype._onKeyPress=function(a){if(!this._textProvider.noMask&&this.options.blurOnLastChar)var b=this._textProvider._isLastCharAssigned();if(c.prototype._onKeyPress.call(this,a),!this._textProvider.noMask&&this.options.blurOnLastChar){var d=this._textProvider._isLastCharAssigned();!b&&d&&this._moveControl(this.element.get(0),!0,!0)}},d.prototype.setText=function(a){void 0!==a&&(this._advanceMode?a==this.options.textWithPromptAndLiterals?(this.options.textWithPromptAndLiterals=void 0,this._imMask.SetText(a)):this._imMask.SetValue(a):c.prototype.setText.call(this,a))},d.prototype.getText=function(){return this._advanceMode?this._imMask.GetTextOnSimpleMode():c.prototype.getText.call(this)},d.prototype.selectText=function(a,b){"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=this.getText().length),isNaN(a)&&(a=0),isNaN(b)&&(b=0),this._advanceMode?(this._imMask.SetSelectionStart(a),this._imMask.SetSelectionLength(Math.abs(b-a)),this._imMask.SetFocus()):c.prototype.selectText.call(this,a,b)},d.prototype.getSelectedText=function(){return this._advanceMode?this._imMask.GetSelectedText():c.prototype.getSelectedText.call(this)},d.prototype._attachInputEvent=function(){this._advanceMode?this._imMask.AttachInput(this.element.get(0)):c.prototype._attachInputEvent.call(this)},d.prototype._detachInputEvent=function(){this._advanceMode?this._imMask.DetachInput():c.prototype._detachInputEvent.call(this)},d.prototype.getPostValue=function(){return this._advanceMode?this._imMask.GetPostValueOnSimpleMode():c.prototype.getPostValue.call(this)},d.prototype._initialize=function(){this.options.maskFormat&&(this.options.mask=this.options.maskFormat),c.prototype._initialize.call(this)},d.prototype._init=function(){c.prototype._init.call(this);var b=this.options.text||this.element.val();this.options.mask&&this._setOption("mask",this.options.mask),b&&b!==this._getNullText()&&this._setOption("text",b),a.CoreUtility.IsIE()||this.element.data("prevSelection",{"start":0,"end":0})},d.prototype._updateText=function(a){if("undefined"==typeof a&&(a=!1),this.element.data("initialized")||!(this.options.mask instanceof RegExp||"advanced"===this.options.formatMode))if(this._advanceMode){if(!this._isInitialized())return;if(this.element.is(":disabled"))return;var b=this._imMask.GetTextOnSimpleMode();this.options.advancedText=this._imMask.GetText(),b!==this.options.text&&(this.options.text=b,this._raiseTextChanged())}else c.prototype._updateText.call(this,a),this.options.text===this._getNullText()&&(this.options.text="")},d.prototype.isFocused=function(){return this._advanceMode?this._imMask.IsFocused():c.prototype.isFocused.call(this)},d.prototype._getAllowPromptAsInput=function(){return this.options.allowPromptAsInput},d.prototype._getPasswordChar=function(){return this.options.passwordChar},d.prototype._getResetOnPrompt=function(){return this.options.resetOnPrompt},d.prototype._getResetOnSpace=function(){
return this.options.resetOnSpace},d.prototype._getSkipLiterals=function(){return this.options.skipLiterals},d.prototype._getHidePromptOnLeave=function(){return this.options.hidePromptOnLeave},d.prototype._getPromptChar=function(){return this.options.promptChar},d.prototype._getAutoConvert=function(){return this.options.autoConvert},d.prototype._getNullText=function(){return this.options.nullText},d._imMaskAssociatedoptions=["disabled","disableUserInput","blurOnLastChar","imeMode","blurOnLeftRightKey","tabAction","nullText","placeholder","readonly","promptChar","autoConvert","showNullText","hideEnter","hidePromptOnLeave","highlightText"],d}(a.wijinputcore);a.wijinputmask=c;var d=function(){function b(){this.wijCSS={"wijinputmask":a.wijinputcore.prototype.options.wijCSS.wijinput+"-mask"},this.autoConvert=!0,this.text=null,this.highlightText="none",this.mask="",this.maskFormat="",this.promptChar="_",this.hidePromptOnLeave=!1,this.resetOnPrompt=!0,this.allowPromptAsInput=!1,this.passwordChar="",this.resetOnSpace=!0,this.skipLiterals=!0,this.blurOnLastChar=!1,this.tabAction="control",this.imeMode="auto",this.allowSpinLoop=!1,this.spinnerAlign="verticalRight",this.showSpinner=!1}return b}();c.prototype.options=b.extend(!0,{},a.wijinputcore.prototype.options,new d),b.wijmo.registerWidget("wijinputmask",c.prototype)}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){"use strict";function b(b,d,e){if(g||(g=new a.wijNumberFormat),d||(d="numeric"),e||(e="string"==typeof d?{}:d),g._showNullText(e)&&null===b)return e.nullText;if(null===b||void 0===b)return"";g._currentValueInString=b.toString();var f=Globalize.findClosestCulture(e.culture);return e.type=e.type||d,e.showGroup=e.showGroup||!1,"number"!=typeof e.decimalPlaces&&(e.decimalPlaces=2),c(f,e),g.getFormattedValue(0,!1,f,e.positivePrefix,e.positiveSuffix,e.negativePrefix,e.negativeSuffix,e)}function c(a,b){var c=a.numberFormat,d=c[b.type]||c,e=d.pattern[0],f=d.pattern[1]||"n",g=e.split("n"),h=f.split("n"),i=c.percent.symbol;void 0===b.currencySymbol&&(b.currencySymbol=c.currency.symbol),b.negativePrefix=(b.negativePrefix?b.negativePrefix:g[0]).replace(/%/g,i).replace(/\$/g,b.currencySymbol),b.negativeSuffix=(b.negativeSuffix?b.negativeSuffix:g[1]).replace(/%/g,i).replace(/\$/g,b.currencySymbol),b.positivePrefix=(b.positivePrefix?b.positivePrefix:h[0]).replace(/%/g,i).replace(/\$/g,b.currencySymbol),b.positiveSuffix=(b.positiveSuffix?b.positiveSuffix:h[1]).replace(/%/g,i).replace(/\$/g,b.currencySymbol)}function d(a,b){var c,d=Globalize.findClosestCulture(b),e=d.numberFormat,f=e.currency,g=e.percent,h=e.pattern,i=f.pattern,j=g.pattern,k=[];for(var l in i){var m=new RegExp(i[l].replace(/n/g,"\\d*\\.?\\d+"));k.push(m)}for(var l in k){var n=a.replace(new RegExp(f[","],"g"),"");if(c=n.match(k[l]))return Globalize.parseFloat(c[0],b)}var o=[];for(var l in j){var m=new RegExp(j[l].replace(/n/g,"\\d*\\.?\\d+"));o.push(m)}for(var l in o){var p=a.replace(new RegExp(g[","],"g"),"");if(c=p.match(o[l]))return Globalize.parseFloat(c[0],b)/100}var q=[];for(var l in h){var m=new RegExp(h[l].replace(/n/g,"\\d*\\.?\\d+"));q.push(m)}var r=a.replace(new RegExp(e[","],"g"),"");for(var l in q)if(c=r.match(q[l]))return Globalize.parseFloat(c[0],b);return c=r.match(/\d*\.?\d+/),c?Globalize.parseFloat(c[0],b):Globalize.parseFloat(a,b)}function e(a,b,c,e){var f=d(a,e);return f>=b&&c>=f}var f=function(){function a(){this._currentValueInString="0",this._currentText="0",this._strippedText="0",this._groupSeparator=" "}return a.prototype._isNegtive=function(a){return-1!==a.indexOf("-")||-1!==a.indexOf("(")},a.prototype._stripValue=function(a,b,c){var d,e=b.numberFormat,f=e[c.type]||e,g=this._isNegtive(a),h=f[","],i=f["."],j=new RegExp("["+h+e.percent.symbol+c.currencySymbol+" ]","g");return this._groupSeparator=h,a=this._removeNegativeSign(a),a=a.replace(j,""),a=a.replace(i,"."),d=/([\d\.])+/.exec(a),d&&(a=d[0]),g&&(a="-"+a),a},a.prototype.tryParseValue=function(a,b,c){try{var d=parseFloat(this._stripValue(a,b,c));return isNaN(d)&&(d=null),d}catch(e){return null}},a.prototype.deFormatValue=function(a,b,c,d,e,f,g){a=this._stripValue(a,b,g),this._currentValueInString=a,this._currentText=this._formatValue(a,b,c,d,e,f,g)},a.prototype._formatValue=function(a,b,c,d,e,f,g){var h,i=g,j=b.numberFormat,k=j[i.type]||j,l=i.decimalPlaces,m=k[","],n=k["."],o=-2!==l?l:k.decimals,p=i.showGroup?k.groupSizes:[0];a=this._removeLeadingZero(a),h=this._formatDigit(a,m,n,o,p),h=this._removeLeadingZero(h,i.showGroup?m:""),0===h.indexOf(n)&&(h="0"+h),""===h&&(h="0"),this._currentValueInString=a,this._strippedText=h;var q=this.isNegative()?e:c,r=this.isNegative()?f:d;return this._currentText=q+h+r,this._currentText},a.prototype._showNullText=function(a){return!!a.nullText||""===a.nullText},a.prototype.getFormattedValue=function(a,b,c,d,e,f,g,h){return!this._showNullText(h)&&b&&(this._currentValueInString=a+""),this._formatValue(this._currentValueInString,c,d,e,f,g,h)},a.prototype.getJSFloatValue=function(){try{return""===this._currentValueInString||"."===this._currentValueInString?0:parseFloat(this._currentValueInString)}catch(a){return Number.NaN}},a.prototype.clear=function(){this._currentValueInString="0",this._currentText="0",this._strippedText="0"},a.prototype.setValueFromJSFloat=function(a,b,c,d,e,f,g){var h=a.toFixed(g.decimalPlaces+1);try{return this._currentValueInString=h,this._formatValue(h,b,c,d,e,f,g),!0}catch(i){return!1}},a.prototype.isZero=function(a){"undefined"==typeof a&&(a=this._currentValueInString);var b,c=this._removeNegativeSign(a);return c?(b=parseFloat(c),!isNaN(b)&&!b):!0},a.prototype.setPositiveSign=function(){this._currentValueInString=this._removeNegativeSign(this._currentValueInString)},a.prototype._removeNegativeSign=function(a){return a.replace(/[()\-]/g,"")},a.prototype._removeLeadingZero=function(a,b){"undefined"==typeof b&&(b="");for(var a=a.replace(/^0+/,"");b.length>0&&0===a.indexOf(b);){a=a.substr(b.length);var a=a.replace(/^0+/,"")}return a},a.prototype.isNegative=function(){return-1!==this._currentValueInString.indexOf("-")||-1!==this._currentValueInString.indexOf("(")},a.prototype.invertSign=function(a,b,c,d,e,f){var g=this.isNegative();g?this.setPositiveSign():this._currentValueInString=this._currentValueInString.length?"-"+this._currentValueInString:"0",this.isZero()&&(this._currentValueInString=g?"0":"-0"),this._formatValue(this._currentValueInString,a,b,c,d,e,f)},a.prototype.checkDigitsLimits=function(a){var b=this._currentValueInString.split("."),c="";if(b.length&&(1!==b.length||""!==b[0])){for(b.length>1&&(c=b[1]),c=c.substring(0,a);c.length<a;)c+="0";this._currentValueInString=b[0],c&&(this._currentValueInString+="."+c)}},a.prototype.checkMinValue=function(a,b,c){"undefined"==typeof c&&(c=!1);var d,e,f,g,h,i=!0;try{if(d=this._currentValueInString.split("."),e=parseFloat(""===d[0]||"-"===d[0]?"0":d[0]),f=0,d.length>1&&parseFloat(d[1])>=0&&(f=parseFloat("1."+d[1])),(0>e||"-"===d[0]||d[0].length>0&&"-"===d[0][0])&&(f=-1*f),a=""+a.toFixed(12),d=a.split("."),g=parseFloat(""===d[0]||"-"===d[0]?"0":d[0]),h=0,d.length>1&&parseFloat(d[1])>=0&&(h=parseFloat("1."+d[1])),(0>g||"-"===d[0]||d[0].length>0&&"-"===d[0][0])&&(h=-1*h),e>g)return!0;g>e||c&&e===g&&h>=f?i=!1:e===g&&0>e&&h>f?i=!1:e===g&&e>=0&&h>f&&(i=!1),!i&&b&&(this._currentValueInString=""+a)}catch(j){}return i},a.prototype.checkMaxValue=function(a,b){var c,d,e,f,g,h=!0;try{if(c=this._currentValueInString.split("."),d=parseFloat(""===c[0]||"-"===c[0]?"0":c[0]),e=0,c.length>1&&parseFloat(c[1])>=0&&(e=parseFloat("1."+c[1])),(0>d||"-"===c[0]||c[0].length>0&&"-"===c[0][0])&&(e=-1*e),a=""+a.toFixed(12),c=a.split("."),f=parseFloat(""===c[0]||"-"===c[0]?"0":c[0]),g=0,c.length>1&&parseFloat(c[1])>=0&&(g=parseFloat("1."+c[1])),(0>f||"-"===c[0]||c[0].length>0&&"-"===c[0][0])&&(g=-1*g),f>d)return!0;d>f&&(h=!1),d===f&&d>=0&&e>g&&(h=!1),d===f&&0>d&&e>g&&(h=!1),!h&&b&&(this._currentValueInString=""+a)}catch(i){}return h},a.prototype._formatDigit=function(a,b,c,d,e){var f,g,h,i,j,k,l=this._removeNegativeSign(a);for(f=l.indexOf("."),-1===f&&(f=l.length),g="",h=0,i=0,k=l.length-1;k>=0;k--)j=l.charAt(k),f>k&&(g=j+g,i++,i===1*e[h]&&1*e[h]&&k&&(g=b+g,i=0,e.length-1>h&&h++));if(d>0)for(g+=c,k=0;d>k;k++)j="0",k+f+1<l.length&&(j=l.charAt(k+f+1)),g+=j;return-1===d&&f<l.length-1&&(g+=c,g+=l.substr(f+1)),g},a}();a.wijNumberFormat=f;var g,h=jQuery;h.wijinputcore=h.wijinputcore||{},h.wijinputcore.formatnumber=h.wijinputcore.formatnumber||b,h.wijinputcore.parseNumber=h.wijinputcore.parseNumber||d,h.wijinputcore.validateNumber=h.wijinputcore.validateNumber||e}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=a.getKeyCodeEnum(),e=function(a){function e(){a.apply(this,arguments),this._initialValue=0}return __extends(e,a),e.prototype._init=function(){a.prototype._init.call(this),this._initUserCultureOptions(),this._updateCultureRelatedOptions(),this._updateText(),this.element.data("changed",!1)},e.prototype._initUserCultureOptions=function(){null!==this.options.negativePrefix&&(this._userNegativePrefix=this.options.negativePrefix),null!==this.options.negativeSuffix&&(this._userNegativeSuffix=this.options.negativeSuffix),null!==this.options.positivePrefix&&(this._userPositivePrefix=this.options.positivePrefix),null!==this.options.positiveSuffix&&(this._userPositiveSuffix=this.options.positiveSuffix),null!==this.options.currencySymbol&&(this._userCurrencySymbol=this.options.currencySymbol)},e.prototype._updateCultureRelatedOptions=function(){var a=this._getCulture().numberFormat,b=a[this.options.type]||a,c=b.pattern[0],d=b.pattern[1]||"n",e=c.split("n"),f=d.split("n"),g=this._getPercentSymbol(),h=this._getCulture().numberFormat.currency.symbol;void 0===this._userNegativePrefix&&(this.options.negativePrefix=e[0].replace(/%/g,g).replace(/\$/g,h)),void 0===this._userNegativeSuffix&&(this.options.negativeSuffix=e[1].replace(/%/g,g).replace(/\$/g,h)),void 0===this._userPositivePrefix&&(this.options.positivePrefix=f[0].replace(/%/g,g).replace(/\$/g,h)),void 0===this._userPositiveSuffix&&(this.options.positiveSuffix=f[1].replace(/%/g,g).replace(/\$/g,h)),void 0===this._userCurrencySymbol&&(this.options.currencySymbol=a.currency.symbol)},e.prototype._createTextProvider=function(){return this._textProvider?this._textProvider:(this._textProvider=new g(this,this.options.type),void this._textProvider.setNullValue(""===this.element.val()&&null===this.options.value))},e.prototype._beginUpdate=function(){this._initialValue=0;var a=this.options;this.element.addClass(a.wijCSS.wijinputnumber),this.element.data({"defaultValue":a.value,"preValue":a.value}).attr({"aria-valuemin":a.minValue,"aria-valuemax":a.maxValue,"aria-valuenow":a.value||this._initialValue})},e.prototype.focus=function(){this._doFocus()},e.prototype._setOption=function(b,c){switch(a.prototype._setOption.call(this,b,c),b){case"minValue":this.element.attr("aria-valuemin",c),this._updateText();break;case"maxValue":this.element.attr("aria-valuemax",c),this._updateText();break;case"value":this.setValue(c),this._updateText();break;case"showGroup":case"decimalPlaces":case"culture":this._updateCultureRelatedOptions(),this._updateText();break;case"positivePrefix":this._userPositivePrefix=c,this._updateText();break;case"negativePrefix":this._userNegativePrefix=c,this._updateText();break;case"positiveSuffix":this._userPositiveSuffix=c,this._updateText();break;case"negativeSuffix":this._userNegativeSuffix=c,this._updateText();break;case"currencySymbol":this._userCurrencySymbol=c,this._updateCultureRelatedOptions(),this._updateText();break;case"type":this._updateCultureRelatedOptions(),this._updateText()}},e.prototype._setData=function(a){this.setValue(a)},e.prototype._resetData=function(){var a=this.element.data("defaultValue");if(0===a){var b=this.element.data("elementValue");void 0!==b&&null!==b&&""!==b&&(a=b)}(a!==this._textProvider.getValue()||this._textProvider._nullvalue&&0===a)&&this.setValue(a)},e.prototype._validateData=function(){this._textProvider.checkAndRepairBounds(!0,!1)||null===this.options.value||this._updateText()},e.prototype._raiseDataChanged=function(){var a=this.options.value,b=this.element.data("preValue");this.element.data("preValue",a),b!==a&&(this.element.attr("aria-valuenow",a),this._trigger("valueChanged",null,{"value":a}))},e.prototype._onChange=function(){},e.prototype._getPrefix=function(){return this._textProvider._stringFormat.isNegative()?void 0!==this._userNegativePrefix?this._userNegativePrefix:this.options.negativePrefix:void 0!==this._userPositivePrefix?this._userPositivePrefix:this.options.positivePrefix},e.prototype._getInvertPrefix=function(){return this._textProvider._stringFormat.isNegative()?void 0!==this._userPositivePrefix?this._userPositivePrefix:this.options.positivePrefix:void 0!==this._userNegativePrefix?this._userNegativePrefix:this.options.negativePrefix},e.prototype._getSuffix=function(){return this._textProvider._stringFormat.isNegative()?void 0!==this._userNegativeSuffix?this._userNegativeSuffix:this.options.negativeSuffix:void 0!==this._userPositiveSuffix?this._userPositiveSuffix:this.options.positiveSuffix},e.prototype._getCurrencySymbol=function(){return void 0!==this._userCurrencySymbol?this._userCurrencySymbol:this._getCulture().numberFormat.currency.symbol},e.prototype._getPercentSymbol=function(){return this._getCulture().numberFormat.percent.symbol},e.prototype.getValue=function(){if(this._textProvider._nullvalue)return null;var a=this._textProvider.getValue();return(void 0===a||null===a)&&(a=this.getText()),a},e.prototype.setValue=function(a,b){"undefined"==typeof b&&(b=!1);try{if(b=!!b,null===a||"undefined"==typeof a||isNaN(a)?a=null:"boolean"==typeof a?a=a?1:0:"string"==typeof a&&(a=this._textProvider.tryParseValue(a)),this._textProvider.setValue(a))this._updateText();else if(b){var c=this.getText();this.setText(a);var d=this.getText().trim();a=a.trim(),d!==a&&this.setText(c)}else this.setText(a);return!0}catch(e){return!1}},e.prototype._isLastValueNull=function(){return a.prototype._isLastValueNull.call(this)&&!this._textProvider._nullvalue},e.prototype.isValueNull=function(){try{return this._textProvider.isValueNull()}catch(a){return!0}},e.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(a.prototype._showNullText.call(this)&&this.isValueNull())return"0";var b=this.options.value?this.options.value:0;return"percent"===this.options.type&&(b=(b/100).toFixed(10)),b.toString()},e.prototype._updateText=function(b){"undefined"==typeof b&&(b=!1),this._isInitialized()&&(this._textProvider._stringFormat.isNegative()?this.element.addClass(this.options.negativeClass):this.element.removeClass(this.options.negativeClass),this._textProvider._nullvalue?this.options.value=null:this.options.value=this._textProvider.getValue(),a.prototype._updateText.call(this,b),this._textProvider.checkAndRepairBounds(!0,!1)||(this._trigger("valueBoundsExceeded"),this.isFocused()||(this._textProvider.setNullValue(!1),this.options.value=this._textProvider.getValue(),this._textProvider._stringFormat.isNegative()?this.element.addClass(this.options.negativeClass):this.element.removeClass(this.options.negativeClass),a.prototype._updateText.call(this,b))))},e.prototype._doSpin=function(a,d,e){if(!this._allowEdit())return!1;if(d&&this.element.data("breakSpinner"))return!1;var f=this.element.wijtextselection(),g=new b.wijInputResult;if(-9!==this.element.data("focusNotCalledFirstTime")&&(new Date).getTime()-this.element.data("focusNotCalledFirstTime")<600&&(this.element.data("focusNotCalledFirstTime",-9),this.element.data("prevSelection",{"start":0,"end":0})),null===this.element.data("prevSelection")?this.element.data("prevSelection",{"start":f.start,"end":f.start}):f.start=this.element.data("prevSelection").start,g.testPosition=f.start,this.options.increment<0){var h=this.options.increment;this.options.increment*=-1,this._textProvider.spinEnumPart(f.start,g,this.options.increment,!a),this.options.increment=h}else this._textProvider.spinEnumPart(f.start,g,this.options.increment,a);if(a?this._trigger("spinUp",null):this._trigger("spinDown",null),this._updateText(),this.element.data("prevSelection",{"start":g.testPosition,"end":g.testPosition}),e||this.selectText(g.testPosition,g.testPosition),d&&!this.element.data("breakSpinner")){var i=window.setTimeout(c.proxy(function(){this._doSpin(a,!0)},this),this._calcSpinInterval());this.element.data("spintimer",i)}return!0},e.prototype._deleteSelText=function(b){"undefined"==typeof b&&(b=!1);var c,d=this.element.wijtextselection(),e=0===d.start&&d.end===this.element.val().length;if(d.start===d.end&&!b&&(c=this._textProvider._stringFormat._currentText,c.charAt(d.end)===this._textProvider.getGroupSeparator()||c.charAt(d.end)===this._textProvider.getDecimalSeparator()))return d.start++,d.end++,void this.element.wijtextselection(d);var f=this._textProvider.getEditingValue();a.prototype._deleteSelText.call(this,b),0!==f||!e&&0!==this._textProvider.getEditingValue()||(this._textProvider.setNullValue(!0),this._updateText(!0),this.options.value=null)},e.prototype._processClearButton=function(){this._setOption("value",null)},e.prototype._processLeftRightKey=function(a){if(a){if(0===this.element.wijtextselection().start&&("left"===this.options.blurOnLeftRightKey.toLowerCase()||"both"===this.options.blurOnLeftRightKey.toLowerCase()))return b.CoreUtility.MoveFocus(this.element.get(0),!1),!0}else if(this.element.wijtextselection().start===this.element.val().length&&("right"===this.options.blurOnLeftRightKey.toLowerCase()||"both"===this.options.blurOnLeftRightKey.toLowerCase()))return b.CoreUtility.MoveFocus(this.element.get(0),!0),!0;return!1},e.prototype._processTabKey=function(a){var b=a.keyCode||a.which;switch(b){case d.TAB:if("field"!==this.options.tabAction){this._trigger("keyExit");break}var c=this.element.val().indexOf(".");-1===c&&(c=this.element.val().length);var e=this.element.wijtextselection();return a.shiftKey?e.start>c&&this._toPrevField():e.start<c&&this._toNextField(),!0}return!1},e.prototype._toPrevField=function(){var a=this._getPrefix();this.element.wijtextselection(a.length,a.length)},e.prototype._toNextField=function(){var a=this.element.val().indexOf(".");-1===a?this._toPrevField():this.element.wijtextselection(a+1,a+1)},e.prototype.spinUp=function(){this._doSpin(!0,!1,!0)},e.prototype.spinDown=function(){this._doSpin(!1,!1,!0)},e.prototype._getRealNegativePrefix=function(){return void 0!==this._userNegativePrefix?this._userNegativePrefix.replace(/\$/g,this.options.currencySymbol):null===this.options.negativePrefix?"":this.options.negativePrefix.replace(/\$/g,this.options.currencySymbol)},e.prototype._getRealPositivePrefix=function(){return void 0!==this._userPositivePrefix?this._userPositivePrefix.replace(/\$/g,this.options.currencySymbol):null===this.options.positivePrefix?"":this.options.positivePrefix.replace(/\$/g,this.options.currencySymbol)},e.prototype._getRealNegativeSuffix=function(){return void 0!==this._userNegativeSuffix?this._userNegativeSuffix.replace(/\$/g,this.options.currencySymbol):null===this.options.negativeSuffix?"":this.options.negativeSuffix.replace(/\$/g,this.options.currencySymbol)},e.prototype._getRealPositiveSuffix=function(){return void 0!==this._userPositiveSuffix?this._userPositiveSuffix.replace(/\$/g,this.options.currencySymbol):null===this.options.positiveSuffix?"":this.options.positiveSuffix.replace(/\$/g,this.options.currencySymbol)},e.prototype._afterFocused=function(){this._isNullText()?a.prototype._doFocus.call(this):this._doFocus()},e.prototype._doFocus=function(){if(a.prototype.focus.call(this),this.options.highlightText)this.element.wijtextselection(0,this.element.val().length);else{var b=this.element.data("prevSelection");b&&this.element.wijtextselection(b.start,b.end)}this.element.data("isFocusSelecting",!0)},e}(b.wijinputcore);b.wijinputnumber=e;var f=function(){function a(){this.wijCSS={"wijinputnumber":b.wijinputcore.prototype.options.wijCSS.wijinput+"-numeric","wijinputnumberNegative":"ui-state-negative"},this.type="numeric",this.value=0,this.minValue=-1e9,this.maxValue=1e9,this.showGroup=!1,this.decimalPlaces=2,this.increment=1,this.currencySymbol=null,this.negativePrefix=null,this.negativeSuffix=null,this.positivePrefix=null,this.positiveSuffix=null,this.imeMode="",this.highlightText=!1,this.valueChanged=null,this.spinUp=null,this.spinDown=null,this.valueBoundsExceeded=null,this.negativeClass=this.wijCSS.wijinputnumberNegative}return a}();e.prototype.options=c.extend(!0,{},b.wijinputcore.prototype.options,new f),c.wijmo.registerWidget("wijinputnumber",e.prototype);var g=function(){function a(a,c){this._type="numeric",this._stringFormat=null,this._nullvalue=!1,this.inputWidget=a,this._type=c,this._stringFormat=new b.wijNumberFormat,this._stringFormat.setValueFromJSFloat(this.getValue(),this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options)}return a.prototype.getEditingValue=function(){return this._stringFormat.tryParseValue(this._stringFormat._strippedText,this.inputWidget._getCulture(),this.inputWidget.options)},a.prototype._getCulture=function(){return this.inputWidget._getCulture()},a.prototype.getDecimalSeparator=function(){return this._getCulture().numberFormat["."]},a.prototype.getGroupSeparator=function(){return this._getCulture().numberFormat[","]},a.prototype.tryParseValue=function(a){return this._stringFormat.tryParseValue(a,this.inputWidget._getCulture(),this.inputWidget.options)},a.prototype.toString=function(){return this.inputWidget._showNullText()&&!this.inputWidget.isFocused()&&this.isValueNull()?this.inputWidget.options.nullText:this.isValueNull()?"":this._stringFormat.getFormattedValue(this.inputWidget._initialValue,this.isValueNull(),this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options)},a.prototype.isValueNull=function(){var a=this.inputWidget.options;return null===a.value||void 0===a.value||this._nullvalue},a.prototype.setText=function(a,b){return this.clear(),this.insertAt(a,0,b),!0},a.prototype.clear=function(){this._stringFormat.clear()},a.prototype.checkAndRepairBounds=function(a,b,c){if("undefined"==typeof c&&(c=!1),this._nullvalue)return!0;var d,e,f=!0;if("undefined"==typeof a&&(a=!1),d=this.inputWidget.options.minValue,e=this.inputWidget.options.maxValue,"undefined"!=typeof b&&b)return this._stringFormat.checkMinValue(d,!1,!0);var g=!0;return this._stringFormat.checkMinValue(d,a,!1)||(f=!1,c&&(g=!1,this._stringFormat._currentValueInString=e.toString())),g&&!this._stringFormat.checkMaxValue(e,a)&&(f=!1,c&&(this._stringFormat._currentValueInString=d.toString())),this.inputWidget.options.decimalPlaces>=0&&this._stringFormat.checkDigitsLimits(this.inputWidget.options.decimalPlaces),f},a.prototype._countSubstring=function(a,b){for(var c=0,d=a.indexOf(b);-1!==d;)c++,d=a.indexOf(b,d+1);return c},a.prototype._getAdjustedPositionFromLeft=function(a){var b,d,e=this._stringFormat._strippedText;for(b=0;b<e.length&&(d=e.charAt(b),!c.wij.charValidator.isDigit(d)&&d!==this.getGroupSeparator()&&d!==this.getDecimalSeparator()||"0"===d);b++)this._stringFormat.isZero()?b>a&&a++:b>=a&&a++;return a},a.prototype._getDecimalSeparatorPos=function(){var a=this._stringFormat._strippedText;return a.indexOf(this.getDecimalSeparator())},a.prototype._removeLeadingZero=function(a){var b=0;(" "===a.charAt(b)||a.charAt(b)===this.inputWidget.options.currencySymbol)&&b++;for(var c=Globalize.findClosestCulture(this.inputWidget.options.culture),d=c.numberFormat,e=d[this.inputWidget.options.type]||d;"0"===a.charAt(b)&&a.charAt(b+1)!==e["."];)a=a.substr(0,b)+a.substr(b+1);return a},a.prototype.insertAt=function(a,d,e){var f,g,h,i,j,k,l,m,n,o=this._getCulture().numberFormat,p=this._stringFormat._strippedText,q=this.inputWidget._getPrefix(),r=this.inputWidget._getInvertPrefix();d<q.length?d=q.length:d>q.length+p.length&&(d=q.length+p.length),d-=q.length,e||(e=new b.wijInputResult);var s=this._nullvalue;if(this.setNullValue(!1),1===a.length){if("+"===a){var t=this._stringFormat.isNegative();this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1);var u=t!==this._stringFormat.isNegative();return u?e.testPosition=r.length+d-1:e.testPosition=q.length+d-1,!0}if("-"===a||")"===a||"("===a){var v=this._stringFormat.isNegative();return this._stringFormat.invertSign(this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),this.checkAndRepairBounds(!0,!1),this._stringFormat.isNegative()===v?(e.testPosition=q.length+d-1,!0):(e.testPosition=r.length+d-1,!0)}if(!c.wij.charValidator.isDigit(a)){if(a===this.getDecimalSeparator()&&(f=this._getDecimalSeparatorPos()+q.length,f>=0))return e.testPosition=f,!0;if(a!==this.getGroupSeparator()&&a!==this.getDecimalSeparator()&&")"!==a&&"+"!==a&&"-"!==a&&"("!==a&&a!==this.getDecimalSeparator())return"percent"===this._type&&a===o.percent.symbol?(e.testPosition=d,!0):"currency"===this._type&&a===this.inputWidget.options.currencySymbol?(e.testPosition=d,!0):(this.setNullValue(s),!1)}}d=this._getAdjustedPositionFromLeft(d),g=d,g>p.length&&(g=p.length-1),h=this._removeLeadingZero(p.substring(0,g)),i=p.substring(g,p.length),this._stringFormat.isZero()&&(i=i.replace(/0/,""));for(var w=a,x="";"+"===w.charAt(0)||"-"===w.charAt(0)||")"===w.charAt(0)||"("===w.charAt(0);)x=w.charAt(0),w=w.substring(1);w=w.replace(/[^0-9\.]/gi,"");var y=w.indexOf(".");if(-1!==y){var z,A,B=w.split(".");z=B.shift();var C=B;A=C.join(""),w=z+"."+A}else w=w;"+"===x&&(this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1)),("-"===x||")"===x||"("===x)&&(this._stringFormat.invertSign(this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),this.checkAndRepairBounds(!0,!1)),e.testPosition=q.length+h.length+w.length-1,this._stringFormat.deFormatValue((this._stringFormat.isNegative()?"-":"")+h+w+i,this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),j=this._stringFormat._strippedText;try{this.inputWidget.options.showGroup?(k=this._countSubstring(h,this._stringFormat._groupSeparator),l=this._countSubstring(j.substring(0,h.length+w.length),this._stringFormat._groupSeparator),e.testPosition+=l-k):1===w.length&&(m=h.charAt(h.length-1),n=j.charAt(h.length-1),n!==m&&e.testPosition--)}catch(D){}return!0},a.prototype.removeAt=function(a,c,d,e){"undefined"==typeof d&&(d=new b.wijInputResult),"undefined"==typeof e&&(e=!1);var f,g,h,i,j,k,l=this._getCulture().numberFormat;d.testPosition=a;try{if(f=this._stringFormat._currentText,a===c&&f.substring(a,c+1)===this.getDecimalSeparator())return!1;if(g=f.slice(0,a),h=g,i=f.slice(a,c+1).indexOf(this.getDecimalSeparator())>=0,i&&(h+=this.getDecimalSeparator()),h+=f.slice(c+1),h=h||"0",this._stringFormat.deFormatValue(h,this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),h=this._stringFormat._currentText,this.setNullValue(!1),this.inputWidget.options.showGroup)if(i)d.testPosition=h.indexOf(this.getDecimalSeparator());else try{j=this._countSubstring(g,this._stringFormat._groupSeparator),k=this._countSubstring(h.substring(0,Math.max(0,a-1)),this._stringFormat._groupSeparator),d.testPosition-=j-k,(f.indexOf(this.inputWidget.options.currencySymbol)===d.testPosition||f.indexOf(l.percent.symbol)===d.testPosition)&&d.testPosition++}catch(m){}return!0}catch(n){}return!0},a.prototype.replaceWith=function(a,c){if("."===c&&this.inputWidget.options.decimalPlaces<=0){var d=new b.wijInputResult;return d.testPosition=a.start-1,d}var e=!1;this._stringFormat.isNegative()&&"-"===c&&a.text.length===this._stringFormat._currentText.length&&(e=!0);var f=this.superReplaceWith(a,c);return e&&this.insertAt("-",this.inputWidget.element.wijtextselection().start,f),f},a.prototype.superReplaceWith=function(a,c){var d=a.start,e=new b.wijInputResult;return a.start<a.end&&(this.removeAt(a.start,a.end-1,e,!0),d=e.testPosition),this.insertAt(c,d,e)?e:null},a.prototype._parseNumber=function(a){"undefined"==typeof a&&(a=this._stringFormat._currentValueInString);var b=a.split(".",2),c={"integer":parseInt(b[0],10)||0,"fraction":(b.length>1?parseInt(b[1],10):0)||0,"isNegative":-1!==b[0].indexOf("-")};return 0===c.integer&&0===c.fraction&&(c.isNegative=!1),c},a.prototype._doSpin=function(a,b){var c=this._parseNumber(),d=a>=0?1:-1,e=Math.abs(a)>=1?"integer":"decimal",f=this.inputWidget.options.increment;f>=Math.pow(10,this.inputWidget.options.decimalPlaces)&&(f="integer"===e?Math.abs(a):Math.abs(a)*Math.pow(10,this.inputWidget.options.decimalPlaces));var g,h,i=d*f,j="",k=c.integer,l=c.fraction;if("integer"===e)k=c.integer+i,0>k&&(j="-",k=-k);else if("decimal"===e){var m=c.isNegative?-c.fraction:c.fraction;k=c.integer,0>m?(l=-Math.abs(m+i),0>m*(m+i)&&(k=Math.abs(k),j="-")):l=m+i,0===m&&c.isNegative&&(l=-Math.abs(l),j="-",1===d&&(k=Math.abs(k))),0>=l&&(k>0?(k-=1,l=Math.pow(10,this.inputWidget.options.decimalPlaces)+l):(k=Math.abs(c.integer),l=Math.abs(l),j="-"))}for(g=k.toString(),h=l.toString(),parseInt(this.inputWidget.options.decimalPlaces)>0&&h.length>parseInt(this.inputWidget.options.decimalPlaces)&&(k++,h=h.substring(1),g=k.toString());h.length<this.inputWidget.options.decimalPlaces;)h="0"+h;-1!==g.indexOf("-")&&(j=""),0===parseInt(g)&&0===parseInt(h)&&(j=""),b?a>=0?this._stringFormat._currentValueInString=this.inputWidget.options.minValue.toString():this._stringFormat._currentValueInString=this.inputWidget.options.maxValue.toString():this._stringFormat._currentValueInString=j+g+"."+h},a.prototype.spinUp=function(a,b){(null===a||void 0===a)&&(a=1),this._doSpin(a,b)},a.prototype.spinDown=function(a,b){(null===a||void 0===a)&&(a=1),this._doSpin(-a,b)},a.prototype.spinEnumPart=function(a,c,d,e){c||(c=new b.wijInputResult),d=parseInt(d.toString());var f=this.inputWidget._getPrefix(),g=this._stringFormat._currentText.indexOf(this._getCulture().numberFormat["."]),h=this._stringFormat._currentValueInString.replace("-",""),i=h.indexOf("."),j=!0;-1===g&&(j=!1,g=this._stringFormat._currentText.length),0===i?i=1:-1===i&&(i=g);var k=Math.pow(10,this.inputWidget.options.decimalPlaces);if(c.testPosition>g&&j){var l=d;d/=k,Math.abs(d)>=1&&(e?this.spinUp(parseInt(d),this._nullvalue):this.spinDown(parseInt(d),this._nullvalue),d=(l-parseInt(d)*k)/k)}e?this.spinUp(d,this._nullvalue):this.spinDown(d,this._nullvalue),this.setNullValue(!1);var m=this.inputWidget.options.allowSpinLoop;this.checkAndRepairBounds(!0,!1,m);var n=this._stringFormat._currentValueInString.replace("-",""),o=n.indexOf(".");-1===o&&(j=!1,o=n.length);var p=this.inputWidget._getPrefix();o!==i&&j?c.testPosition=c.testPosition-f.length+p.length+o-i:c.testPosition=c.testPosition-f.length+p.length},a.prototype.getValue=function(){return this._stringFormat.getJSFloatValue()},a.prototype.setValue=function(a){try{return null===a?(this.setNullValue(!0),a=this.inputWidget._initialValue):this.setNullValue(!1),this._stringFormat.setValueFromJSFloat(a,this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),
this.checkAndRepairBounds(!0,!1),!0}catch(b){return!1}},a.prototype.setNullValue=function(a){this._nullvalue=a},a}();b.wijNumberTextProvider=g}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){var b=function(){function a(){this.DBCS_UpperAlphabet=2147483650,this.SBCS_UpperAlphabet=1073741825,this.DBCS_LowerAlphabet=2147483656,this.SBCS_LowerAlphabet=1073741828,this.DBCS_Number=2147483680,this.SBCS_Number=1073741840,this.DBCS_Binary=2147483776,this.SBCS_Binary=1073741888,this.DBCS_Hexadecimal=2147484160,this.SBCS_Hexadecimal=1073742080,this.DBCS_Symbol=2147485696,this.SBCS_Symbol=1073742848,this.DBCS_NumberSymbol=2147491840,this.SBCS_NumberSymbol=1073745920,this.DBCS_Katakana=2147516416,this.SBCS_Katakana=1073758208,this.DBCS_Space=2147614720,this.SBCS_Space=1073807360,this.TwoBytes=2148007936,this.FourBytes=2147745792,this.DBCS_ShiftJIS=2148532224,this.DBCS_JISX0208=2149580800,this.Emoji=4194304,this.IVS=8388608,this.DBCS_Hiragana=2164260864,this.Upper_SBCS_Katakana=1207959552,this.Upper_DBCS_Katakana=2415919104,this.Upper_DBCS_Hiragana=2684354560,this.All=3321888768,this.DBCS_All=2214592512,this.SBCS_All=1107296256,this.DBCS=2147483648,this.SBCS=1073741824}return a}(),c=function(){function c(c,d){this.charType=new b,this.format=d,this.includeFormat="",this.excludeFormat="",this.includeNormalChar="",this.excludeNormalChar="",this.allowTypes=this.charType.All,this.excludeTypes=this.charType.All,this.include=!0,this.autoConvert=c,this.charExInstance=a.CharProcess.CharEx,this.isInputValid=!0,this.ParseFormat(this.format)}return c.prototype.allowDBCS=function(){return!(0!=(this.allowTypes&this.charType.DBCS_All)^this.include)},c.prototype.allowSBCS=function(){return!(0!=(this.allowTypes&this.charType.SBCS_All)^this.include)},c.prototype.GetIncludeFormat=function(a){if(null==a||0==a.GetLength())return"";for(var b="",c=0;c<a.GetLength();c++){var d=a.Substring(c,c+1);if("\\"==d){if(c==a.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";b+=d,b+=a.Substring(c+1,c+2),c++}else{if("^"==d)return b;b+=d}}return b},c.prototype.GetExcludeFormat=function(a){if(null==a||0==a.GetLength())return"";for(var b=0,c="",d=0;d<a.GetLength();d++){var e=a.Substring(d,d+1);if("\\"==e){if(d==a.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";0!=b&&(c+=e,c+=a.Substring(d+1,d+2)),d++}else if("^"==e){if(b++,b>1)throw"Exception.TextFilter.Format.DuplicatedChar"}else 0!=b&&(c+=e)}return 1==b&&(c="^"+c),c},c.prototype.ParseIncludeFormat=function(a){if(null==a||0==a.GetLength())return this.allowTypes=this.charType.All,this.includeNormalChar="",void(this.includeFormat="");this.allowTypes=0,this.includeNormalChar="";for(var b=0;b<a.GetLength();b++)switch(a.charCodeAt(b)){case 94:break;case 92:if(b==a.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";this.includeNormalChar=this.includeNormalChar+a.Substring(b+1,b+2),b++;break;case 65313:(this.allowTypes&this.charType.DBCS_UpperAlphabet)==(0|this.charType.DBCS_UpperAlphabet)||(this.allowTypes|=this.charType.DBCS_UpperAlphabet);break;case 65:(this.allowTypes&this.charType.SBCS_UpperAlphabet)==this.charType.SBCS_UpperAlphabet||(this.allowTypes|=this.charType.SBCS_UpperAlphabet);break;case 65345:(this.allowTypes&this.charType.DBCS_LowerAlphabet)==(0|this.charType.DBCS_LowerAlphabet)||(this.allowTypes|=this.charType.DBCS_LowerAlphabet);break;case 97:(this.allowTypes&this.charType.SBCS_LowerAlphabet)==this.charType.SBCS_LowerAlphabet||(this.allowTypes|=this.charType.SBCS_LowerAlphabet);break;case 65323:(this.allowTypes&this.charType.DBCS_Katakana)==(0|this.charType.DBCS_Katakana)||(this.allowTypes|=this.charType.DBCS_Katakana);break;case 75:(this.allowTypes&this.charType.SBCS_Katakana)==this.charType.SBCS_Katakana||(this.allowTypes|=this.charType.SBCS_Katakana);break;case 65305:(this.allowTypes&this.charType.DBCS_Number)==(0|this.charType.DBCS_Number)||(this.allowTypes|=this.charType.DBCS_Number);break;case 57:(this.allowTypes&this.charType.SBCS_Number)==this.charType.SBCS_Number||(this.allowTypes|=this.charType.SBCS_Number);break;case 65283:(this.allowTypes&this.charType.DBCS_NumberSymbol)==(0|this.charType.DBCS_NumberSymbol)||(this.allowTypes|=this.charType.DBCS_NumberSymbol);break;case 35:(this.allowTypes&this.charType.SBCS_NumberSymbol)==this.charType.SBCS_NumberSymbol||(this.allowTypes|=this.charType.SBCS_NumberSymbol);break;case 65312:(this.allowTypes&this.charType.DBCS_Symbol)==(0|this.charType.DBCS_Symbol)||(this.allowTypes|=this.charType.DBCS_Symbol);break;case 64:(this.allowTypes&this.charType.SBCS_Symbol)==this.charType.SBCS_Symbol||(this.allowTypes|=this.charType.SBCS_Symbol);break;case 65314:(this.allowTypes&this.charType.DBCS_Binary)==(0|this.charType.DBCS_Binary)||(this.allowTypes|=this.charType.DBCS_Binary);break;case 66:(this.allowTypes&this.charType.SBCS_Binary)==this.charType.SBCS_Binary||(this.allowTypes|=this.charType.SBCS_Binary);break;case 65336:(this.allowTypes&this.charType.DBCS_Hexadecimal)==(0|this.charType.DBCS_Hexadecimal)||(this.allowTypes|=this.charType.DBCS_Hexadecimal);break;case 88:(this.allowTypes&this.charType.SBCS_Hexadecimal)==this.charType.SBCS_Hexadecimal||(this.allowTypes|=this.charType.SBCS_Hexadecimal);break;case 65322:(this.allowTypes&this.charType.DBCS_Hiragana)==(0|this.charType.DBCS_Hiragana)||(this.allowTypes|=this.charType.DBCS_Hiragana);break;case 65338:(this.allowTypes&this.charType.DBCS_All)==(0|this.charType.DBCS_All)||(this.allowTypes|=this.charType.DBCS_All);break;case 65325:(this.allowTypes&this.charType.DBCS_ShiftJIS)==(0|this.charType.DBCS_ShiftJIS)||(this.allowTypes|=this.charType.DBCS_ShiftJIS);break;case 65321:(this.allowTypes&this.charType.DBCS_JISX0208)==(0|this.charType.DBCS_JISX0208)||(this.allowTypes|=this.charType.DBCS_JISX0208);break;case 72:(this.allowTypes&this.charType.SBCS_All)==this.charType.SBCS_All||(this.allowTypes|=this.charType.SBCS_All);break;case 78:(this.allowTypes&this.charType.Upper_SBCS_Katakana)==this.charType.Upper_SBCS_Katakana||(this.allowTypes|=this.charType.Upper_SBCS_Katakana);break;case 65326:(this.allowTypes&this.charType.Upper_DBCS_Katakana)==this.charType.Upper_DBCS_Katakana||(this.allowTypes|=this.charType.Upper_DBCS_Katakana);break;case 65319:(this.allowTypes&this.charType.Upper_DBCS_Hiragana)==this.charType.Upper_DBCS_Hiragana||(this.allowTypes|=this.charType.Upper_DBCS_Hiragana);break;case 65331:(this.allowTypes&this.charType.DBCS_Space)==this.charType.DBCS_Space||(this.allowTypes|=this.charType.DBCS_Space);break;case 83:(this.allowTypes&this.charType.SBCS_Space)==this.charType.SBCS_Space||(this.allowTypes|=this.charType.SBCS_Space);break;case 65332:(this.allowTypes&this.charType.FourBytes)==this.charType.FourBytes||(this.allowTypes|=this.charType.FourBytes);break;case 65316:(this.allowTypes&this.charType.TwoBytes)==this.charType.TwoBytes||(this.allowTypes|=this.charType.TwoBytes);break;case 65317:this.allowTypes|=this.charType.Emoji;break;case 65334:this.allowTypes|=this.charType.IVS;break;default:this.includeNormalChar=this.includeNormalChar+a.Substring(b,b+1)}},c.prototype.ParseExcludeFormat=function(a){if(null==a||0==a.GetLength())return this.excludeTypes=this.excludeTypes.All,this.excludeNormalChar="",void(this.excludeFormat="");if("^"==a)return this.excludeTypes=this.charType.All,this.excludeNormalChar="",void(this.excludeFormat="^");this.excludeTypes=0,this.excludeNormalChar="";for(var b=0;b<a.GetLength();b++)switch(a.charCodeAt(b)){case 94:break;case 92:if(b==a.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";this.excludeNormalChar=this.excludeNormalChar+a.Substring(b+1,b+2),b++;break;case 65313:(this.excludeTypes&this.charType.DBCS_UpperAlphabet)==(0|this.charType.DBCS_UpperAlphabet)||(this.excludeTypes|=this.charType.DBCS_UpperAlphabet);break;case 65:(this.excludeTypes&this.charType.SBCS_UpperAlphabet)==this.charType.SBCS_UpperAlphabet||(this.excludeTypes|=this.charType.SBCS_UpperAlphabet);break;case 65345:(this.excludeTypes&this.charType.DBCS_LowerAlphabet)==(0|this.charType.DBCS_LowerAlphabet)||(this.excludeTypes|=this.charType.DBCS_LowerAlphabet);break;case 97:(this.excludeTypes&this.charType.SBCS_LowerAlphabet)==this.charType.SBCS_LowerAlphabet||(this.excludeTypes|=this.charType.SBCS_LowerAlphabet);break;case 65323:(this.excludeTypes&this.charType.DBCS_Katakana)==(0|this.charType.DBCS_Katakana)||(this.excludeTypes|=this.charType.DBCS_Katakana);break;case 75:(this.excludeTypes&this.charType.SBCS_Katakana)==this.charType.SBCS_Katakana||(this.excludeTypes|=this.charType.SBCS_Katakana);break;case 65305:if((this.excludeTypes&this.charType.DBCS_Number)==(0|this.charType.DBCS_Number))return;this.excludeTypes|=this.charType.DBCS_Number;break;case 57:(this.excludeTypes&this.charType.SBCS_Number)==this.charType.SBCS_Number||(this.excludeTypes|=this.charType.SBCS_Number);break;case 65283:(this.excludeTypes&this.charType.DBCS_NumberSymbol)==(0|this.charType.DBCS_NumberSymbol)||(this.excludeTypes|=this.charType.DBCS_NumberSymbol);break;case 35:(this.excludeTypes&this.charType.SBCS_NumberSymbol)==this.charType.SBCS_NumberSymbol||(this.excludeTypes|=this.charType.SBCS_NumberSymbol);break;case 65312:(this.excludeTypes&this.charType.DBCS_Symbol)==(0|this.charType.DBCS_Symbol)||(this.excludeTypes|=this.charType.DBCS_Symbol);break;case 64:(this.excludeTypes&this.charType.SBCS_Symbol)==this.charType.SBCS_Symbol||(this.excludeTypes|=this.charType.SBCS_Symbol);break;case 65314:(this.excludeTypes&this.charType.DBCS_Binary)==(0|this.charType.DBCS_Binary)||(this.excludeTypes|=this.charType.DBCS_Binary);break;case 66:(this.excludeTypes&this.charType.SBCS_Binary)==this.charType.SBCS_Binary||(this.excludeTypes|=this.charType.SBCS_Binary);break;case 65336:(this.excludeTypes&this.charType.DBCS_Hexadecimal)==(0|this.charType.DBCS_Hexadecimal)||(this.excludeTypes|=this.charType.DBCS_Hexadecimal);break;case 88:(this.excludeTypes&this.charType.SBCS_Hexadecimal)==this.charType.SBCS_Hexadecimal||(this.excludeTypes|=this.charType.SBCS_Hexadecimal);break;case 65322:(this.excludeTypes&this.charType.DBCS_Hiragana)==(0|this.charType.DBCS_Hiragana)||(this.excludeTypes|=this.charType.DBCS_Hiragana);break;case 65338:(this.excludeTypes&this.charType.DBCS_All)==(0|this.charType.DBCS_All)||(this.excludeTypes|=this.charType.DBCS_All);break;case 65325:(this.excludeTypes&this.charType.DBCS_ShiftJIS)==(0|this.charType.DBCS_ShiftJIS)||(this.excludeTypes|=this.charType.DBCS_ShiftJIS);break;case 65321:(this.excludeTypes&this.charType.DBCS_JISX0208)==(0|this.charType.DBCS_JISX0208)||(this.excludeTypes|=this.charType.DBCS_JISX0208);break;case 72:(this.excludeTypes&this.charType.SBCS_All)==this.charType.SBCS_All||(this.excludeTypes|=this.charType.SBCS_All);break;case 78:(this.excludeTypes&this.charType.Upper_SBCS_Katakana)==this.charType.Upper_SBCS_Katakana||(this.excludeTypes|=this.charType.Upper_SBCS_Katakana);break;case 65326:(this.excludeTypes&this.charType.Upper_DBCS_Katakana)==this.charType.Upper_DBCS_Katakana||(this.excludeTypes|=this.charType.Upper_DBCS_Katakana);break;case 65319:(this.excludeTypes&this.charType.Upper_DBCS_Hiragana)==this.charType.Upper_DBCS_Hiragana||(this.excludeTypes|=this.charType.Upper_DBCS_Hiragana);break;case 65331:(this.excludeTypes&this.charType.DBCS_Space)==this.charType.DBCS_Space||(this.excludeTypes|=this.charType.DBCS_Space);break;case 83:(this.excludeTypes&this.charType.SBCS_Space)==this.charType.SBCS_Space||(this.excludeTypes|=this.charType.SBCS_Space);break;case 65332:(this.excludeTypes&this.charType.FourBytes)==this.charType.FourBytes||(this.excludeTypes|=this.charType.FourBytes);break;case 65316:(this.excludeTypes&this.charType.TwoBytes)==this.charType.TwoBytes||(this.excludeTypes|=this.charType.TwoBytes);break;case 65317:this.excludeTypes|=this.charType.Emoji;break;case 65334:this.excludeTypes|=this.charType.IVS;break;default:this.excludeNormalChar=this.excludeNormalChar+a.Substring(b,b+1)}},c.prototype.ParseFormat=function(a){this.includeFormat=this.GetIncludeFormat(a),this.excludeFormat=this.GetExcludeFormat(a),this.ParseIncludeFormat(this.includeFormat),this.ParseExcludeFormat(this.excludeFormat)},c.prototype.IsValidProcess=function(a,b,c){if(-1!=c.IndexOf(a))return!0;if("	"==a||"\r"==a||"\n"==a)return!0;if(0==b)return!1;var d=!1;if(b==this.charType.All)return!0;if((b&this.charType.Emoji)==(0|this.charType.Emoji)&&this.IsEmoji(a))return!0;if((b&this.charType.IVS)==(0|this.charType.IVS)&&this.IsIVS(a))return!0;if((b&this.charType.FourBytes)==(0|this.charType.FourBytes)&&this.IsFourBytes(a))return!0;if(1==a.GetLength()&&a.length>1)return!1;if((b&this.charType.DBCS_ShiftJIS)==(0|this.charType.DBCS_ShiftJIS)&&this.IsShiftJIS(a))return!0;if(this.charExInstance.IsFullWidth(a)){if((b&this.charType.DBCS)!=(0|this.charType.DBCS))return!1;if((b&this.charType.DBCS_All)==(0|this.charType.DBCS_All)&&"\u3000"!=a)d=!0;else if((b&this.charType.DBCS_LowerAlphabet)==(0|this.charType.DBCS_LowerAlphabet)&&this.IsLower(a))d=!0;else if((b&this.charType.DBCS_UpperAlphabet)==(0|this.charType.DBCS_UpperAlphabet)&&this.IsUpper(a))d=!0;else if((b&this.charType.DBCS_Number)==(0|this.charType.DBCS_Number)&&this.IsNumber(a))d=!0;else if((b&this.charType.DBCS_Binary)==(0|this.charType.DBCS_Binary)&&this.IsBinary(a))d=!0;else if((b&this.charType.DBCS_Hexadecimal)==(0|this.charType.DBCS_Hexadecimal)&&this.IsHex(a))d=!0;else if((b&this.charType.DBCS_Symbol)==(0|this.charType.DBCS_Symbol)&&this.IsSymbol(a))d=!0;else if((b&this.charType.DBCS_NumberSymbol)==(0|this.charType.DBCS_NumberSymbol)&&this.IsNumberSymbol(a))d=!0;else if((b&this.charType.DBCS_Katakana)==(0|this.charType.DBCS_Katakana)&&this.IsKatakana(a)){var e=this.IsHiragana(a);d=e?this.include?!0:(b&this.charType.DBCS_Hiragana)==(0|this.charType.DBCS_Hiragana):!0}else if((b&this.charType.DBCS_Hiragana)==(0|this.charType.DBCS_Hiragana)&&this.IsHiragana(a)){var e=this.IsKatakana(a);d=e?this.include?!0:(b&this.charType.DBCS_Katakana)==(0|this.charType.DBCS_Katakana):!0}else(b&this.charType.DBCS_JISX0208)==(0|this.charType.DBCS_JISX0208)&&this.IsJISX0208(a)?d=!0:(b&this.charType.Upper_DBCS_Katakana)==(0|this.charType.Upper_DBCS_Katakana)&&this.IsKatakana(a)&&this.IsUpperKana(a)?d=!0:(b&this.charType.Upper_DBCS_Hiragana)==(0|this.charType.Upper_DBCS_Hiragana)&&this.IsHiragana(a)&&this.IsUpperKana(a)?d=!0:(b&this.charType.DBCS_Space)==(0|this.charType.DBCS_Space)&&this.IsFormatSpace(a)?d=!0:(b&this.charType.FourBytes)==(0|this.charType.FourBytes)&&this.IsFourBytes(a)?d=!0:(b&this.charType.TwoBytes)!=(0|this.charType.TwoBytes)||this.IsFourBytes(a)||"\u3000"==a||(d=!0)}else{if((b&this.charType.SBCS)!=this.charType.SBCS)return!1;(b&this.charType.SBCS_All)==this.charType.SBCS_All&&" "!=a?d=!0:(b&this.charType.SBCS_LowerAlphabet)==this.charType.SBCS_LowerAlphabet&&this.IsLower(a)?d=!0:(b&this.charType.SBCS_UpperAlphabet)==this.charType.SBCS_UpperAlphabet&&this.IsUpper(a)?d=!0:(b&this.charType.SBCS_Number)==this.charType.SBCS_Number&&this.IsNumber(a)?d=!0:(b&this.charType.SBCS_Binary)==this.charType.SBCS_Binary&&this.IsBinary(a)?d=!0:(b&this.charType.SBCS_Hexadecimal)==this.charType.SBCS_Hexadecimal&&this.IsHex(a)?d=!0:(b&this.charType.SBCS_Symbol)==this.charType.SBCS_Symbol&&this.IsSymbol(a)?d=!0:(b&this.charType.SBCS_NumberSymbol)==this.charType.SBCS_NumberSymbol&&this.IsNumberSymbol(a)?d=!0:(b&this.charType.SBCS_Katakana)==this.charType.SBCS_Katakana&&this.IsKatakana(a)?d=!0:(b&this.charType.Upper_SBCS_Katakana)==this.charType.Upper_SBCS_Katakana&&this.IsKatakana(a)&&this.IsUpperKana(a)?d=!0:(b&this.charType.SBCS_Space)==this.charType.SBCS_Space&&this.IsFormatSpace(a)&&(d=!0)}return d},c.prototype.IsIncludeValid=function(a){return this.IsValidProcess(a,this.allowTypes,this.includeNormalChar)},c.prototype.IsExcludeValid=function(a){return this.IsValidProcess(a,this.excludeTypes,this.excludeNormalChar)},c.prototype.IsValid=function(a){if(""!=this.excludeFormat){if(this.IsExcludeValid(a))return!1;if(""!=this.includeFormat)return this.IsIncludeValid(a)}else if(""!=this.includeFormat)return this.IsIncludeValid(a);return!0},c.prototype.IsFormatSpace=function(a){return" "==a||"\u3000"==a?!0:!1},c.prototype.IsFourBytes=function(b){var c=a.CharProcess.CharEx,d=b.Substring(0,1);if(d.length>1)for(var e=0;e<d.length;e++)if(c.IsSurrogate(d[e]))return!0;return!1},c.prototype.IsUpper=function(a){return this.charExInstance.IsUpper(a)},c.prototype.IsLower=function(a){return this.charExInstance.IsLower(a)},c.prototype.IsNumber=function(a){return this.charExInstance.IsDigit(a)},c.prototype.IsBinary=function(a){return a=this.IsFullWidth(a)?this.ToHalfWidth(a):a,"0"==a||"1"==a},c.prototype.IsHex=function(a){return a=this.IsFullWidth(a)?this.ToHalfWidth(a):a,"A"==a||"B"==a||"C"==a||"D"==a||"E"==a||"F"==a||"a"==a||"b"==a||"c"==a||"d"==a||"e"==a||"f"==a||this.IsDigit(a)},c.prototype.IsSymbol=function(a){return this.charExInstance.IsHalfWidthSymbol(a)||this.charExInstance.IsFullWidthSymbol(a)},c.prototype.IsNumberSymbol=function(a){return a=this.IsFullWidth(a)?this.ToHalfWidth(a):a,this.IsDigit(a)||"+"==a||"-"==a||"$"==a||"%"==a||"\\"==a||","==a||"."==a},c.prototype.IsKatakana=function(a){return this.charExInstance.IsKatakana(a)},c.prototype.IsHiragana=function(a){return this.charExInstance.IsHiragana(a)},c.prototype.IsShiftJIS=function(a){return this.charExInstance.IsShiftJIS(a)},c.prototype.IsJISX0208=function(a){return this.charExInstance.IsJISX0208(a)},c.prototype.IsEmoji=function(a){return!1},c.prototype.IsIVS=function(a){return!1},c.prototype.IsDBCS=function(a){return this.IsFullWidth(a)},c.prototype.IsSBCS=function(a){return!this.IsFullWidth(a)},c.prototype.IsFullWidth=function(a){return this.charExInstance.IsFullWidth(a)},c.prototype.IsSurrogatePair=function(a){return this.charExInstance.IsSurrogatePair(a)},c.prototype.ToHalfWidth=function(a){return this.charExInstance.ToHalfWidth(a)},c.prototype.IsDigit=function(a){return this.charExInstance.IsDigit(a)},c.prototype.IsUpperKana=function(a){return this.charExInstance.IsUpperKana(a)},c.prototype.CheckValidSpace=function(a){return" "==a&&(this.allowTypes&this.charType.SBCS_Space)==(0|this.charType.SBCS_Space)?!0:"\u3000"==a&&(this.allowTypes&this.charType.DBCS_Space)==(0|this.charType.DBCS_Space)?!0:!1},c.prototype.Check=function(a,b){var c;c=null!=b?a.Substring(b,b+1):a;var d=this.IsValid(c);return d?c:this.autoConvert?null!=b?this.Convert(a,b):this.Convert(c):""},c.prototype.CheckText=function(a){for(var b=a.GetLength(),c={"IsInputValid":!0,"CheckedText":""},d=0;b>d;){var e=a.Substring(d,d+1);if("	"!=e&&"\r"!=e&&"\n"!=e){var f=this.Check(a,d);null!=f.index?(d=f.index,e=f.strValue):(e=f,d++),""==e&&(c.IsInputValid=!1)}else d++;c.CheckedText+=e}return c},c.prototype.Convert=function(a,b){var c;c=null==b?a:a.Substring(b,b+1);var d=!1;if(this.charExInstance.IsAlphabet(c)){var e=this.charExInstance.IsLower(c)?c.toUpperCase():c.toLowerCase();return(d=this.IsValid(e))?e:(c=this.charExInstance.IsFullWidth(c)?this.charExInstance.ToHalfWidth(c):this.charExInstance.ToFullWidth(c).text,(d=this.IsValid(c))?c:(e=this.charExInstance.IsFullWidth(e)?this.charExInstance.ToHalfWidth(e):this.charExInstance.ToFullWidth(e).text,d=this.IsValid(e),d?e:""))}if(this.charExInstance.IsHiragana(c)){if(this.charExInstance.IsLowerKana(c)){var f=this.charExInstance.ToUpperKana(c);if(d=this.IsValid(f))return f}else if(this.charExInstance.HasLowerKana(c)){var g=this.charExInstance.ToLowerKana(c);if(d=this.IsValid(g))return g}var e=this.charExInstance.ToKatakana(c);if(d=this.IsValid(e))return e;if(this.charExInstance.IsLowerKana(e)){var f=this.charExInstance.ToUpperKana(e);if(d=this.IsValid(f))return f}else if(this.charExInstance.HasLowerKana(e)){var g=this.charExInstance.ToLowerKana(e);if(d=this.IsValid(g))return g}var h=this.charExInstance.ToHalfWidthEx(e);if(d=this.IsValid(h))return h;if(this.charExInstance.IsLowerKana(h)){if(h=this.charExInstance.ToUpperKana(h),d=this.IsValid(h))return h}else if(this.charExInstance.HasLowerKana(h)&&(h=this.charExInstance.ToLowerKana(h),d=this.IsValid(h)))return h;return""}if(this.charExInstance.IsKatakana(c)){if(this.charExInstance.IsLowerKana(c)){var f=this.charExInstance.ToUpperKana(c);if(d=this.IsValid(f))return f}else if(this.charExInstance.HasLowerKana(c)){var g=this.charExInstance.ToLowerKana(c);if(d=this.IsValid(g))return g}var i=!1,e=c;if(this.charExInstance.IsFullWidth(c)){var j=this.charExInstance.ToHalfWidthEx(c);if(j.GetLength()>0&&(d=this.IsValid(j)))return j;if(this.charExInstance.IsLowerKana(j)){if(j=this.charExInstance.ToUpperKana(j),d=this.IsValid(j))return j}else if(this.charExInstance.HasLowerKana(j)&&(j=this.charExInstance.ToLowerKana(j),d=this.IsValid(j)))return j}else{if(null==b){if(e=this.charExInstance.ToFullWidth(c).text,!this.charExInstance.IsKatakana(e))return"";if(d=this.IsValid(e))return e}else{if(b+1<a.GetLength()){var k=this.charExInstance.ToFullWidth(a.Substring(b,b+2));e=k.text,i=k.processedAll}else e=this.charExInstance.ToFullWidth(c).text;if(!this.charExInstance.IsKatakana(e))return"";if(d=this.IsValid(e))return b++,i&&b++,{"index":b,"strValue":e}}if(this.charExInstance.IsLowerKana(e)){var f=this.charExInstance.ToUpperKana(e);if(d=this.IsValid(f))return f}else if(this.charExInstance.HasLowerKana(e)){var g=this.charExInstance.ToLowerKana(e);if(d=this.IsValid(g))return g}}if(e=this.charExInstance.ToHiragana(e),d=this.IsValid(e)){if(null!=b){b++,i&&b++;var l={"index":b,"strValue":e};return"\u3094"==e&&(i?l.strValue="\u3046\u309b":l.strValue=""),l}return"\u3094"==e?"":e}if(this.charExInstance.IsLowerKana(e)){var f=this.charExInstance.ToUpperKana(e);if(d=this.IsValid(f))return f}else if(this.charExInstance.HasLowerKana(e)){var g=this.charExInstance.ToLowerKana(e);if(d=this.IsValid(g))return g}}return c=this.charExInstance.IsFullWidth(c)?this.charExInstance.ToHalfWidth(c):this.charExInstance.ToFullWidth(c).text,d=this.IsValid(c),d?c:""},c}();a.TextFilter=c}(a.input||(a.input={}));a.input}(wijmo||(wijmo={})),$.wijinputcore=$.wijinputcore||{},$.wijinputcore.validateText=$.wijinputcore.validateText||function(a,b,c){if(void 0===c){var d=new wijmo.input.TextFilter(!1,b),e=d.CheckText(a),f=e.CheckedText;return f===a?!0:!1}var g=a.length;return b>g||g>c?!1:!0};var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c,d=jQuery,e="wijinputtext",f=function(){function a(){}return a.None="none",a.EllipsisEnd="ellipsisEnd",a.EllipsisPath="ellipsisPath",a}();!function(a){a[a.Append=0]="Append",a[a.Replace=1]="Replace"}(c||(c={}));var g=function(){function a(){}return a.Auto="auto",a.Active="active",a.Disabled="disabled",a.Inactive="inactive",a}(),h=function(c){function d(){c.apply(this,arguments)}return __extends(d,c),d.prototype._getIMTextBox=function(){return void 0===this.imtextbox&&(this.imtextbox=new k(this.element[0],this.outerDiv)),this.imtextbox},d.prototype._create=function(){c.prototype._create.call(this);var a=this;a.imtextbox=a._getIMTextBox()},d.prototype._init=function(){c.prototype._init.call(this),this.options.disableUserInput&&this.imtextbox.SetReadOnly(!0),this.imtextbox.placeHolder=this.options.nullText?this.options.nullText:"";var a=this;this.imtextbox.readingImeStringOutputEvent=function(b,c){a._trigger("readingImeStringOutput",null,c)},this.imtextbox.InvalidInputEvent=function(b,c){a._fireIvalidInputEvent(c)},this.imtextbox.SetAutoConvert(this.options.autoConvert),this.imtextbox.SetExitOnLastChar(this.options.blurOnLastChar),this.imtextbox.SetExitOnLeftRightKey(this.options.blurOnLeftRightKey),this.imtextbox.SetFormat(this.options.format),this.imtextbox.SetMaxLength(this.options.maxLength),this.imtextbox.SetHighlightText(this.options.highlightText),this.imtextbox.SetOverflowTip(this.options.showOverflowTip),this.imtextbox.SetMaxLineCount(this.options.maxLineCount),this.imtextbox.SetCountWrappedLine(this.options.countWrappedLine),null!==this.options.invalidInput&&this.imtextbox.OnInvalidInput(this.options.invalidInput),null!==this.options.keyExit&&this.imtextbox.OnKeyExit(this.options.keyExit),this.imtextbox.TextChangedEvent=function(b,c){a.options.text=c,a._trigger("textChanged",null,{"text":c})};var b=this.element,d=this.options.wijCSS,e={"input":!0,"textarea":!0},f={"text":!0,"password":!0,"email":!0,"url":!0},g=b.get(0).nodeName.toLowerCase();if(e.hasOwnProperty(g)&&("input"!==g||!this.element.attr("type")||f.hasOwnProperty(this.element.attr("type").toLowerCase()))){if("input"===g){if(this.imtextbox.SetMultiLine(!1),"password"===this.element.attr("type")){var h;h=this.options.passwordChar?this.options.passwordChar:this.imtextbox.SystemPasswordChar(),this.imtextbox.SetPasswordChar(h)}}else"textarea"===g&&this.imtextbox.SetMultiLine(!0);if(this.imtextbox.SetLengthAsByte(this.options.lengthAsByte),null===this.options.text){var i=this.getText();i!=this.imtextbox.placeHolder&&(this.options.text=i)}this.options.text===this.imtextbox.placeHolder&&this.imtextbox.isNullText||this.setText(this.options.text),this.imtextbox.SetEllipsisString(this.options.ellipsisString),this.imtextbox.SetEllipsis(this.options.ellipsis),b.is(":disabled")?(this._setOption("disabled",!0),b.addClass(d.stateDisabled)):(this._setOption("disabled",!1),b.removeClass(d.stateDisabled)),this.options.passwordChar&&this.imtextbox.SetPasswordChar(this.options.passwordChar)}},d.prototype.destroy=function(){var a=this,b=a.options.wijCSS;a.element.removeClass(b.widget).removeClass(b.stateDefault).removeClass(b.cornerAll).removeClass(b.stateHover).removeClass(b.stateActive).off("."+a.widgetName),a.element.off(".imtextbox"),c.prototype.destroy.call(this)},d.prototype.getSelectedText=function(){return this.imtextbox.GetSelectedText()},d.prototype._setOption=function(a,b){switch(a){case"nullText":case"placeholder":this.imtextbox.placeHolder=b}switch(c.prototype._setOption.call(this,a,b),a){case"autoConvert":this.imtextbox.SetAutoConvert(b);break;case"blurOnLastChar":this.imtextbox.SetExitOnLastChar(b);break;case"blurOnLeftRightKey":this.imtextbox.SetExitOnLeftRightKey(b);break;case"showDropDownButton":var d=this.imtextbox.GetEllipsis();this.imtextbox.SetEllipsis(d);break;case"ellipsis":this.imtextbox.SetEllipsis(b);break;case"ellipsisString":this.imtextbox.SetEllipsisString(b);break;case"highlightText":this.imtextbox.SetHighlightText(b);break;case"showOverflowTip":this.imtextbox.SetOverflowTip(b);break;case"format":this.imtextbox.SetFormat(b);break;case"maxLineCount":this.imtextbox.SetMaxLineCount(b);break;case"countWrappedLine":this.imtextbox.SetCountWrappedLine(b);break;case"lengthAsByte":this.imtextbox.SetLengthAsByte(b);break;case"maxLength":this.imtextbox.SetMaxLength(b);break;case"readonly":case"disableUserInput":this.imtextbox.SetReadOnly(b);break;case"passwordChar":this.imtextbox.SetPasswordChar(b);break;case"text":this.setText(b);break;case"invalidInput":this.imtextbox.OnInvalidInput(b);break;case"keyExit":this.imtextbox.OnKeyExit(b);break;case"":}},d.prototype._updateTextOnLostFocus=function(){this.imtextbox.PasswordMode||c.prototype._updateTextOnLostFocus.call(this)},d.prototype._onMouseUp=function(a){},d.prototype._onCompositionStart=function(){},d.prototype._onCompositionEnd=function(){},d.prototype._onChange=function(){},d.prototype._onPaste=function(a){},d.prototype._onDrop=function(a){},d.prototype._onKeyDown=function(b){var c=this._getKeyCode(b),d=a.getKeyCodeEnum();return this.options.disableUserInput?void(c===d.TAB?this._processTabKey(b)&&this._stopEvent(b):this._stopEvent(b)):void(this._processKeyForDropDownList(b)||c===d.ENTER&&this._onEnterDown(b))},d.prototype._onKeyPress=function(b){if(!this.options.disableUserInput){var c=this._getKeyCode(b),d=a.getKeyCodeEnum();c===d.ENTER&&this._onEnterDown(b)}},d.prototype._onKeyUp=function(a){return this.options.disableUserInput?(this._raiseTextChanged(),void this._raiseDataChanged()):void 0},d.prototype._createTextProvider=function(){this._textProvider=new j(this)},d.prototype.selectText=function(a,c){"undefined"==typeof a&&(a=0),"undefined"==typeof c&&(c=this.getText().length),isNaN(a)&&(a=0),isNaN(c)&&(c=0),this.element.is(":disabled")||(b.CoreUtility.IsFireFox4OrLater()&&this.focus(),this.imtextbox.SetSelection(a,c))},d.prototype._updateText=function(){this.element.data("initialized")&&(c.prototype._updateText.call(this),this.imtextbox&&this.options.text===this.imtextbox.placeHolder&&(this.options.text=""))},d}(b.wijinputcore);b.wijinputtext=h;var i=function(){function a(){this.initSelector=":jqmData(role='wijinput')",this.wijCSS={},this.autoConvert=!0,this.blurOnLastChar=!1,this.blurOnLeftRightKey="none",this.ellipsis=f.None,this.ellipsisString=String.fromCharCode(8230),this.showOverflowTip=!1,this.highlightText=!1,this.format="",this.imeMode="auto",this.lengthAsByte=!1,this.maxLength=0,this.maxLineCount=0,this.countWrappedLine=!1,this.passwordChar="",this.text=null,this.allowSpinLoop=!1,this.spinnerAlign="verticalRight",this.showSpinner=!1,this.culture="",this.readingImeStringOutput=null}return a}();h.prototype.options=d.extend(!0,{},b.wijinputcore.prototype.options,new i),d.wijmo.registerWidget(e,h.prototype);var j=function(){function a(a){this.inputWidget=a}return a.prototype.toString=function(a){return this.inputWidget._showNullText()&&!this.inputWidget.isFocused()&&this.isValueNull()?(this.inputWidget.element.data("isShowNullText",!0),this.inputWidget.options.nullText):this.inputWidget._showNullText()&&!this.inputWidget.isFocused()||!this.inputWidget.element.data("isShowNullText")?this.inputWidget.imtextbox&&this.inputWidget.imtextbox.GetPasswordChar()?a?this.inputWidget.options.text:this.inputWidget.imtextbox._getInputValueWithPlaceHolder():this.inputWidget.imtextbox?this.inputWidget.imtextbox._getInputValueWithPlaceHolder():void 0!==this.inputWidget.options.text?this.inputWidget.options.text:this.inputWidget.element.val():(this.inputWidget.element.data("isShowNullText",!1),"")},a.prototype.isValueNull=function(){return this.inputWidget.imtextbox?this.inputWidget.imtextbox.isNullText:!0},a.prototype.setText=function(a){this.inputWidget.imtextbox.SetText(a)},a.prototype.replaceWith=function(a,c){var d=a.start,e=new b.wijInputResult;return a.start<a.end&&(this.removeAt(a.start,a.end-1,e,!0),d=e.testPosition),this.insertAt(c,d,e)?e:null},a.prototype.insertAt=function(a,b,c){},a.prototype.removeAt=function(a,b,c,d){},a}();b.wijInputTextProvider=j;var k=function(){function a(a,c){this.ToolTip=null,this.placeHolder="",this.Focused=!1,this.InputElement=a,this._container=c,""===this.InputElement.id&&(this.InputElement.id="wijmo_input_"+b.Utility.IdCounter++),this.ScrollBarMode=1,this.IsControlInPreview=null,this.AddressObj=null,this.KeyActionList=null,this.UseSystemPasswordChar=!1,this.Overwrite=!1,this.Format="",this.ShowHistory=!1,this.ReadOnly=!1,this.AutoConvert=!0,this.CausesValidation=!1,this.ValidationGroup="",this.LengthAsByte=!1,this.MaxLength=0,this.MaxHistoryCount=10,this.MultiLine=!1,this.AcceptsCrLf=0,this.AcceptReturn=!0,this.AcceptTab=!1,this.HighlightText=!1,this.Ellipsis=f.None,this.EllipsisString=String.fromCharCode(8230),this.ExitOnLastChar=!1,b.CoreUtility.IPad?this.TouchDropDownScale=1:this.TouchDropDownScale=1.5,this.ExitOnLeftRightKey=0,this.EditMode=0,this.__editModeInternal=0,this.AutoPostBack=!1,this.PasswordMode=!1,this.PasswordChar="",this.OverflowTip=!1,this.MaxLineCount=0,this.CountWrappedLine=!1,this.IsInUpdatePanelAndAsyncPostBack=!1,this.UseClipboard=!0,this.ReadingImeStringOutput=new Object,this.ReadingImeStringOutput.OutputMode=0,this.ReadingImeStringOutput.TargetControl=null,this.ScrollBars=0,this.prevval="",this.RubyText="",this.FocusType=0,this.SelectionStart=0,this.SelectionEnd=0,this.SelectionLength=0,this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd;var d=this,e=null!=d;if(this.IsInUpdatePanelAndAsyncPostBack?e&&(this.OldText=d.GetOldValue()):this.OldText=this.Text,this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd,this.Text="",this.LastText=this.Text,this.BuffText="",
this.IsUndoAfterDel=!1,this.MouseButton=0,this.EnableOnSelectStartEvent=!0,this.isLeftMouseButtonPressed=!1,this.OrientText="",this.ImeSelect=!1,this.ImeSelectTimes=0,this.DragEdit=!1,this.DropEdit=!1,this.isFuncKeyPressed=!1,this.SystemChange=!0,this.ImeMode=!1,this.KeyDownAction=!1,this.FocusExit=!1,this.lastValue="",this.truePosition=-1,this.mouseupTimes=0,this.LastInputText="",this.BeforeDragSelectionStart=0,this.BeforeDragSelectionEnd=0,this.IsMouseDown=!1,this.Type="Edit",this.ToolTip=null,!this.MultiLine&&this.OverflowTip){var h=this;b.Utility.AttachEvent(document,"mousemove",function(a){b.GlobalEventHandler.OnMouseMove(h,a)},!1)}this.HasFocus=!1;var i={"SelectionStart":this.SelectionStart,"SelectionEnd":this.SelectionEnd,"Text":this.Text,"OldSelectionStart":this.OldSelectionStart,"OldSelectionEnd":this.OldSelectionEnd,"OldText":this.OldText,"LastStart":this.LastStart,"LastEnd":this.LastEnd,"LastText":this.LastText,"BuffText":this.BuffText};this.DropDownEditData=i,this.IsChangedByDropDownEdit=!1,this.DropText="",this.isTextEllipsis=!1,this.TextHeadLength=0,this.IsJapanConvertKeyPress=!1,this.NeedReCalCursorPos=!0,b.CoreUtility.IsIE()||(this.IsActive=!1),this.HasValidatedImeInput=!0,this.IsFocusToDropDownEdit=!1,this.IsCausedByClickingDropDownBt=!1,this.IsCausedByImplementingDrop=!1,b.CoreUtility.IsIE()||(this.MaxLineCount=0,this.Ellipsis=f.None,this.OverflowTip=!1,this.IsImplementImeInput=!1),this.Create(),this.AddAllEventsHandler(),this.EditStatusChangedEvent=null,this.InvalidInputEvent=null,this.KeyExitEvent=null,this.TextChangedEvent=null,this.DropDownCloseEvent=null,this.DropDownOpenEvent=null,this.readingImeStringOutputEvent=null,this.IsjQueryControl=!0,this.UIProcess=new l(this.AutoConvert,this.Format,this.PasswordMode,this.PasswordChar,this.IsjQueryControl,this),this.Text="",this.isPasting=!1,this.WordWrap=!0,this.Enabled=!0,this.AutoCompleteType="None",""===this.InputElement.style.imeMode&&this.SetImeMode(g.Auto),this._autoComplete=new m(this),this.IsFromServer=!1,this._historyList=[],this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&"Disabled"!=this.AutoCompleteType&&!this.ReadOnly&&this.Enabled:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&this.Enabled,this._lines=[],this.tempIMEMode="auto",this.HeightChangedBySet=!1,this.Width="",this.Height="",this.LastPassWordChar="",b.Utility.AttachFocusEventOfDocument(),this.ShouldShowClearButton=!0,this.switchPasswordChar=!1,""===this.InputElement.value?this.isNullText=!0:this.isNullText=!1}return a.prototype.GetId=function(){return this.InputElement.id},a.prototype.GetContainer=function(){return this._container},a.prototype.GetJQueryInputElement=function(){return d(this.InputElement)},a.prototype.GetInputElement=function(){return this.InputElement},a.prototype.Create=function(){b.CoreUtility.IsIE10OrLater()&&this.CreateHideMSClearButtonForIE10Class()},a.prototype.CreateHideMSClearButtonForIE10Class=function(){if(void 0===a.HideMSClearButtonForIE10ClassName){a.HideMSClearButtonForIE10ClassName="gcsh_HideMSClearButtonForIE10";var c=b.Utility.CreateClassStyle(a.HideMSClearButtonForIE10ClassName+"::-ms-clear");c.style.display="none"}},a.prototype.IsNullFormat=function(){return!1},a.prototype.IsNeedFishEyeButton=function(){return b.CoreUtility.IsIE10OrLater()&&!this.MultiLine&&this.PasswordMode},a.prototype.SetAddressObj=function(a){this.AddressObj=a},a.prototype.ShowClearButton=function(){this.InputElement.className=this.InputElement.className.replace(a.HideMSClearButtonForIE10ClassName,"")},a.prototype.HideClearButton=function(){null!=this.InputElement.className&&-1==this.InputElement.className.indexOf(a.HideMSClearButtonForIE10ClassName)&&(this.InputElement.className+=" "+a.HideMSClearButtonForIE10ClassName)},a.prototype.HandleClearButton=function(a){if(b.CoreUtility.IsIE10OrLater()&&this.FocusedWhenMouseDown&&this.MouseDownOnClearButton&&a.target==this.InputElement&&!this.MultiLine){var c=document.activeElement==a.target,d=b.CoreUtility.IsMouseDownOnClearButton(a);if(this.MouseUpHasValue&&c&&d){var e=this;setTimeout(function(a){e.Clear()},0)}}},a.prototype.GetAcceptsTab=function(){return this.AcceptTab},a.prototype.SetAcceptsTab=function(a){a=b.Utility.CheckBool(a),this.AcceptTab=a},a.prototype.GetAcceptsCrlf=function(){return this.AcceptsCrLf},a.prototype.SetAcceptsCrlf=function(a){a=b.Utility.CheckEnum(b.CrLfMode,a),this.AcceptsCrLf=a},a.prototype.GetAutoConvert=function(){return this.AutoConvert},a.prototype.SetAutoConvert=function(a){a=b.Utility.CheckBool(a),this.AutoConvert=a,this.UIProcess.Reset()},a.prototype.GetCountWrappedLine=function(){return this.CountWrappedLine},a.prototype.SetCountWrappedLine=function(a){a=b.Utility.CheckBool(a),this.CountWrappedLine=a,this.InternalSetText(this.GetText()),this.Ellipsis!==f.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},a.prototype.GetEditMode=function(){return this.EditMode},a.prototype.SetEditMode=function(a){var c=a;if(c=b.Utility.CheckEnum(b.EditMode,c),0===c||2===c?this.Overwrite=!1:this.Overwrite=!0,c!==this.EditMode){var d=!1;this._isinsertGroup(c)&&this._isOverwriteGroup(this.EditMode)?d=!0:this._isinsertGroup(this.EditMode)&&this._isOverwriteGroup(c)&&(d=!0),this.EditMode=c,this.__editModeInternal=c,d&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},a.prototype._getEditModeInternal=function(){return this.__editModeInternal},a.prototype._setEditModeInternal=function(a){a=b.Utility.CheckEnum(b.EditMode,a),0===a||2===a?this.Overwrite=!1:this.Overwrite=!0,a!==this.__editModeInternal&&(this.__editModeInternal=a)},a.prototype.GetEllipsis=function(){return this.Ellipsis},a.prototype.SetEllipsis=function(a){var c=a;c=b.Utility.CheckEnum(f,c),this.Ellipsis=c,this.InternalDirectSetText(this.Text),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},a.prototype.GetEllipsisString=function(){return this.EllipsisString},a.prototype.SetEllipsisString=function(a){a=b.Utility.CheckString(a),this.EllipsisString=a,this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},a.prototype.GetExitOnLastChar=function(){return this.ExitOnLastChar},a.prototype.SetExitOnLastChar=function(a){a=b.Utility.CheckBool(a),this.ExitOnLastChar=a},a.prototype.GetExitOnLeftRightKey=function(){switch(this.ExitOnLeftRightKey){case 0:return"none";case 3:return"both";case 1:return"left";case 2:return"right"}},a.prototype.SetExitOnLeftRightKey=function(a){switch(b.Utility.CheckString(a),a.toLowerCase()){case"none":this.ExitOnLeftRightKey=0;break;case"both":this.ExitOnLeftRightKey=3;break;case"left":this.ExitOnLeftRightKey=1;break;case"right":this.ExitOnLeftRightKey=2}},a.prototype.GetFormat=function(){return this.Format},a.prototype.SetFormat=function(a){a=b.Utility.CheckString(a),this.Format=a,this.UIProcess.Reset();var c=this.InternalSetText(this.GetText());this.Text=c,this.DropDownEditData.Text=c,this.Ellipsis!==f.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},a.prototype.GetHighlightText=function(){return this.HighlightText},a.prototype.SetHighlightText=function(a){a=b.Utility.CheckBool(a),this.HighlightText=a},a.prototype.GetHistoryList=function(){return this._historyList},a.prototype.SetHistoryList=function(a){if(null!==a){var b;if(b=arguments[0]instanceof Array?arguments[0]:Array.prototype.slice.call(arguments),0!==b.length&&(1!==b.length||""!==b[0])){this.IsFromServer=!1,this._historyList=[];for(var c=0;c<b.length;c++)this._historyList.push(b[c])}}},a.prototype.GetImeMode=function(){return null!==this.InputElement?this.InputElement.style.imeMode||"auto":""},a.prototype.SetImeMode=function(a){b.Utility.CheckString(a),null!==this.InputElement&&(this.InputElement.style.imeMode=a)},a.prototype.GetLengthAsByte=function(){return this.LengthAsByte},a.prototype.SetLengthAsByte=function(a){a=b.Utility.CheckBool(a),this.LengthAsByte=a,this.SetText(this.UIProcess.Filter.CheckText(this.GetText()).CheckedText)},a.prototype.GetLines=function(){var a=new Array,c=this.GetText(),d="\r\n";(!b.CoreUtility.IsIE()||b.CoreUtility.IsIE9OrLater())&&(d="\n");for(var e=c.IndexOf(d),f=0;-1!=e;)a[f++]=c.Substring(0,e),c=c.Substring(e+d.GetLength(),c.GetLength()),e=c.IndexOf(d);return a[f]=c,a},a.prototype.SetLines=function(a){if(null!==a){var c;if(c=arguments[0]instanceof Array?arguments[0]:Array.prototype.slice.call(arguments),0!==c.length&&(1!==c.length||""!==c[0])){this._lines=[];for(var d=0;d<c.length;d++)this._lines.push(c[d]);var e="";if(this.MultiLine)for(var f=0;f<this._lines.length;f++)f>0&&(e+=b.CoreUtility.IsIE()?"\r\n":"\n"),e+=this._lines[f];else for(var f=0;f<this._lines.length;f++)e+=this._lines[f];this.SetText(e)}}},a.prototype.GetMaxHistoryCount=function(){return this.MaxHistoryCount},a.prototype.SetMaxHistoryCount=function(a){if(a=b.Utility.CheckInt(a),0>a)throw"ArgumentOutOfRangeException";this.MaxHistoryCount=a},a.prototype.GetMaxLength=function(){return this.MaxLength},a.prototype.SetMaxLength=function(a){if(a=b.Utility.CheckInt(a),0>a)throw"ArgumentOutOfRangeException";this.MaxLength=a,this.InternalSetText(this.GetText()),this.Ellipsis!==f.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.DropDownEditData.Text=this.GetText()},a.prototype.GetMaxLineCount=function(){return this.MaxLineCount},a.prototype.SetMaxLineCount=function(a){if(a=b.Utility.CheckInt(a),0>a)throw"ArgumentOutOfRangeException";this.MaxLineCount=a,this.InternalSetText(this.GetText()),this.Ellipsis!==f.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},a.prototype.GetMultiLine=function(){return this.MultiLine},a.prototype.SetMultiLine=function(a){a=b.Utility.CheckBool(a),a!==this.MultiLine&&(this.MultiLine=a,this.InternalDirectSetText(this.Text),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.DropDownEditData.Text=this.GetText())},a.prototype.GetOverflowTip=function(){return this.OverflowTip},a.prototype.SetOverflowTip=function(a){a=b.Utility.CheckBool(a),this.OverflowTip=a},a.prototype.GetOverwrite=function(){return this.Overwrite},a.prototype.GetPasswordChar=function(){return this.PasswordChar},a.prototype.SetPasswordChar=function(a){if(""!==a){if(a=b.Utility.CheckChar(a),this.PasswordChar===this.SystemPasswordChar()&&this.GetUseSystemPasswordChar())return void(this.LastPassWordChar=a);this.LastPassWordChar=this.PasswordChar,this.PasswordChar=a,this.PasswordMode=!0,this.isNullText||this.InternalSetText(this.GetText()),this.tempIMEMode=this.GetImeMode(),this.SetImeMode(g.Disabled)}else{if(this.UseSystemPasswordChar===!1&&(this.PasswordMode=!1,this.SetText(this.hideText),""!==this.tempIMEMode&&this.SetImeMode(this.tempIMEMode)),this.PasswordChar===this.SystemPasswordChar()&&!this.GetUseSystemPasswordChar()&&""!==this.LastPassWordChar)return this.PasswordChar=b.Utility.CheckChar(this.LastPassWordChar),this.PasswordMode=!0,this.InternalSetText(this.GetText()),this.tempIMEMode=this.GetImeMode(),this.SetImeMode(g.Disabled),void(this.Ellipsis!==f.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement));this.PasswordChar=a}this.switchPasswordChar=!0,this.UIProcess.Reset(),this.Ellipsis!==f.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},a.prototype.GetReadingImeStringOutputMode=function(){return this.ReadingImeStringOutput.OutputMode},a.prototype.SetReadingImeStringOutputMode=function(a){a=b.Utility.CheckString(a),this.ReadingImeStringOutput.OutputMode=a},a.prototype.GetReadingImeStringOutputTargetControl=function(){return this.ReadingImeStringOutput.TargetControl},a.prototype.SetReadingImeStringOutputTargetControl=function(a){a=b.Utility.CheckString(a),this.ReadingImeStringOutput.TargetControl=a},a.prototype.GetReadOnly=function(){return this.ReadOnly},a.prototype.SetReadOnly=function(a){a=b.Utility.CheckBool(a),null!=this.InputElement&&(this.InputElement.readOnly=a),this.ReadOnly=a,this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&"Disabled"!=this.AutoCompleteType&&!this.ReadOnly&&a:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&a},a.prototype.GetScrollBarMode=function(){return this.ScrollBarMode},a.prototype.SetScrollBarMode=function(a){a=b.Utility.CheckEnum(b.ScrollBarMode,a),this.ScrollBarMode=a,this._CheckScrollBar(this.GetScrollBars(),a)},a.prototype.GetScrollBars=function(){return this.ScrollBars},a.prototype.SetScrollBars=function(a){a=b.Utility.CheckEnum(b.ScrollBars,a),this.ScrollBars=a,this._CheckScrollBar(a,this.GetScrollBarMode());var c=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-5+"px";var d=this;setTimeout(function(){d.InputElement.style.width=c},10)},a.prototype.GetSelectionStart=function(){return Math.min(this.SelectionStart,this.SelectionEnd)},a.prototype.SetSelectionStart=function(a){if(a=b.Utility.CheckInt(a),0>a)throw"ArgumentOutOfRangeException";if(null!=a){var c=a.toString(),d=parseInt(c);if(b.Utility.FilterText("0123456789",c)!=c);else if(d>this.GetText().GetLength())this.SelectionStart=this.GetText().GetLength(),this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionStart=this.DropDownEditData.Text.GetLength(),this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength());else{var e=this.GetSelectionLength();this.SelectionStart=d,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,d)),d-0+e<=this.GetText().GetLength()?(this.SelectionEnd=d-0+e,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,d+e))):(this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength()))}}},a.prototype.GetSelectedText=function(){return this.GetText().Substring(Math.min(this.SelectionStart,this.SelectionEnd),Math.max(this.SelectionStart,this.SelectionEnd))},a.prototype.SetSelectedText=function(a){a=b.Utility.CheckString(a),this.OldText=this.GetText();var c=this.SelectionStart,d=this.SelectionEnd,e=this.GetText();this.MultiLine||(this.DropDownEditData.OldText=this.DropDownEditData.Text,c=this.DropDownEditData.SelectionStart,d=this.DropDownEditData.SelectionEnd,e=this.DropDownEditData.Text);var g=this.UIProcess.TextBoxPaste(c,d,e,this.ExitOnLastChar,this.AcceptTab,this.AcceptReturn,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,a,!0);null!=g.Text&&(this.DirectSetText(g.Text),this.MultiLine||(this.DropDownEditData.Text=g.Text)),null!=g.SelectionStart&&(this.SelectionStart=g.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=g.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(this.DropDownEditData.Text,g.SelectionStart))),null!=g.SelectionEnd&&(this.SelectionEnd=g.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=g.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(this.DropDownEditData.Text,g.SelectionEnd)));this.OldText;this.OldText=this.GetText(),this.LastText=this.OldText,this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.Ellipsis!==f.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},a.prototype.GetSelectionLength=function(){return Math.abs(this.SelectionEnd-this.SelectionStart)},a.prototype.SetSelectionLength=function(a){if(a=b.Utility.CheckInt(a),0>a)throw"ArgumentOutOfRangeException";if(a=a.toString(),b.Utility.FilterText("0123456789",a)!=a);else{var c=this.GetSelectionStart();this.SelectionStart=c,c+(a-0)<=this.GetText().GetLength()?(this.SelectionEnd=c+(a-0),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,c+parseInt(a)))):(this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength()))}},a.prototype.GetShowHistory=function(){return this.ShowHistory},a.prototype.SetShowHistory=function(a){a=b.Utility.CheckBool(a),this.ShowHistory=a,this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&"Disabled"!=this.AutoCompleteType&&!this.ReadOnly&&this.Enabled:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&this.Enabled},a.prototype.GetText=function(){var a=this._getInputValueWithPlaceHolder();if(this.isTextEllipsis&&!this.DragEdit&&(a=this.Text),this.PasswordMode){var c,d=this.hideText,e=d.LastIndexOf(":true");return c=-1==e?d:d.Substring(0,e)}return!b.CoreUtility.IsIE()&&this.FFDragFlag&&(a=this.Text),a},a.prototype.SetText=function(a){a=b.Utility.CheckString(a),this.OldText=this.GetText(),this.switchPasswordChar=!1,this.InternalSetText(a,!1),this.GetText()!=this.OldText&&(this.OldText=this.GetText(),this.SetHideText(this.GetText())),this.LastText=this.GetText();var c=this.GetText().GetLength();this.SelectionStart=c,this.SelectionEnd=c,this.BuffText=this.LastText,this.DropDownEditData.Text=this.GetText(),this.DropDownEditData.LastText=this.DropDownEditData.Text,this.DropDownEditData.SelectionStart=c,this.DropDownEditData.SelectionEnd=c,this.DropDownEditData.BuffText=this.DropDownEditData.Text,this.Ellipsis!==f.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},a.prototype.GetTouchDropDownScale=function(){return this.TouchDropDownScale},a.prototype.SetTouchDropDownScale=function(a){a=b.Utility.CheckFloat(a,.25,4),this.TouchDropDownScale=a},a.prototype.GetUseClipboard=function(){return this.UseClipboard},a.prototype.SetUseClipboard=function(a){a=b.Utility.CheckBool(a),this.UseClipboard=a},a.prototype.GetUseSystemPasswordChar=function(){return this.UseSystemPasswordChar},a.prototype.SetUseSystemPasswordChar=function(a){a=b.Utility.CheckBool(a),this.UseSystemPasswordChar=a,a===!0?(this.PasswordMode=!0,this.SetPasswordChar(this.SystemPasswordChar())):this.SetPasswordChar(""),this.UIProcess.Reset()},a.prototype.GetWordWrap=function(){return this.WordWrap},a.prototype.SetWordWrap=function(a){a=b.Utility.CheckBool(a),this.WordWrap=a,a===!1?this.InputElement.style.wordWrap="normal":this.InputElement.style.wordWrap="break-word";var c=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-5+"px";var d=this;setTimeout(function(){d.InputElement.style.width=c},10),this._CheckScrollBar(this.GetScrollBars(),this.GetScrollBarMode())},a.prototype.Drop=function(){},a.prototype.Clear=function(){this.SetText("")},a.prototype.SetFocus=function(){},a.prototype.OnDropDownClose=function(a){a=b.Utility.CheckFunction(a),this.DropDownCloseEvent=a},a.prototype.OnDropDownOpen=function(a){a=b.Utility.CheckFunction(a),this.DropDownOpenEvent=a},a.prototype.OnEditStatusChanged=function(a){a=b.Utility.CheckFunction(a),this.EditStatusChangedEvent=a},a.prototype.OnInvalidInput=function(a){a=b.Utility.CheckFunction(a),this.InvalidInputEvent=a,this.UIProcess.InvalidInputEvent=a},a.prototype.OnKeyExit=function(a){a=b.Utility.CheckFunction(a),this.KeyExitEvent=a},a.prototype.OnTextChanged=function(a){a=b.Utility.CheckFunction(a),this.TextChangedEvent=a},a.prototype.Undo=function(){var a=this.GetText(),b=this.BuffText,c=this.LastText,d=this.LastSelectionStart,e=this.LastSelectionEnd;this.MultiLine||(a=this.DropDownEditData.Text,b=this.DropDownEditData.BuffText,c=this.DropDownEditData.LastText,d=this.DropDownEditData.LastSelectionStart,e=this.DropDownEditData.LastSelectionEnd);var f=this.UIProcess.TextBoxUndo(a,b,c,d,e);return null==f?!1:(null!=f.Text&&(f.DelInclude?(this.BuffText=this.Text,this.IsUndoAfterDel=!0,this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)):(this.LastText=this.Text,this.MultiLine||(this.DropDownEditData.LastText=this.DropDownEditData.Text)),this.InternalSetText(f.Text,!0)),null!=f.SelectionStart&&(this.LastSelectionStart=this.SelectionStart,this.SelectionStart=f.SelectionStart,this.MultiLine||(this.DropDownEditData.LastSelectionStart=this.DropDownEditData.SelectionStart,this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(f.Text,f.SelectionStart))),null!=f.SelectionEnd&&(this.LastSelectionEnd=this.SelectionEnd,this.SelectionEnd=f.SelectionEnd,this.MultiLine||(this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.SelectionEnd,this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(f.Text,f.SelectionEnd))),void(1==f.SetSelection&&this.SetSelection(this.SelectionStart,this.SelectionEnd)))},a.prototype.Cut=function(){var a=this.SelectionStart,b=this.SelectionEnd,c=this.GetText();this.MultiLine||(a=this.DropDownEditData.SelectionStart,b=this.DropDownEditData.SelectionEnd,c=this.DropDownEditData.Text);var d=this.UIProcess.Cut(c,a,b);return null==d?!1:(null!=d.SelectionStart&&(this.SelectionStart=d.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(d.Text,d.SelectionStart))),null!=d.SelectionEnd&&(this.SelectionEnd=d.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(d.Text,d.SelectionEnd))),d.DelInclude&&(this.IsUndoAfterDel=!0,this.BuffText=this.GetText(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),null!=d.Text&&(this.DirectSetText(d.Text),this.MultiLine||(this.DropDownEditData.Text=d.Text)),1==d.SetSelection&&this.SetSelection(this.SelectionStart,this.SelectionEnd),void(null!=d.EventInfo&&this.UIProcess.FireEvent(this,d.EventInfo.Name,d.EventInfo.Args,d.EventInfo.Type)))},a.prototype.Copy=function(){this.PasswordMode||this.UIProcess.Copy(this.GetText(),this.SelectionStart,this.SelectionEnd)},a.prototype.Delete=function(){var a=this.SelectionStart,b=this.SelectionEnd,c=this.GetText();this.MultiLine||(a=this.DropDownEditData.SelectionStart,b=this.DropDownEditData.SelectionEnd,c=this.DropDownEditData.Text);var d=this.UIProcess.Delete(this.MultiLine,c,a,b);return null==d?!1:(d.DelInclude&&(this.BuffText=this.Text,this.IsUndoAfterDel=!0,this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),null!=d.SelectionStart&&(this.SelectionStart=d.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(d.Text,d.SelectionStart))),null!=d.SelectionEnd&&(this.SelectionEnd=d.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(d.Text,d.SelectionEnd))),null!=d.Text&&(this.DirectSetText(d.Text),this.MultiLine||(this.DropDownEditData.Text=d.Text)),void(1==d.SetSelection&&this.SetSelection(this.SelectionStart,this.SelectionEnd)))},a.prototype.Paste=function(a){var b=this.SelectionStart,c=this.SelectionEnd,d=this.GetText();this.MultiLine||(b=this.DropDownEditData.SelectionStart,c=this.DropDownEditData.SelectionEnd,d=this.DropDownEditData.Text);var e=this.UIProcess.TextBoxPaste(b,c,d,this.ExitOnLastChar,this.AcceptTab,this.AcceptReturn,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,a,!1);if(null==e)return!1;if(null!=e.SelectionStart&&(this.SelectionStart=e.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(e.Text,e.SelectionStart))),null!=e.SelectionEnd&&(this.SelectionEnd=e.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(e.Text,e.SelectionEnd))),null!=e.Text&&(this.DirectSetText(e.Text),this.MultiLine||(this.DropDownEditData.Text=e.Text)),1==e.SetSelection&&this.SetSelection(this.SelectionStart,this.SelectionEnd),null!=e.EventInfo)for(var f=0;f<e.EventInfo.length;f++)null!=e.EventInfo[f]&&this.UIProcess.FireEvent(this,e.EventInfo[f].Name,e.EventInfo[f].Args,e.EventInfo[f].Type)},a.prototype.SelectAll=function(){var a=this.GetText();this.MultiLine||(a=this.DropDownEditData.Text);var b=this.UIProcess.TextBoxSelectAll(a);return null==b?!1:(null!=b.SelectionStart&&(this.SelectionStart=b.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(a,b.SelectionStart))),null!=b.SelectionEnd&&(this.SelectionEnd=b.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(a,b.SelectionEnd))),void(1==b.SetSelection&&this.SetSelection(this.SelectionStart,this.SelectionEnd)))},a.prototype._CheckScrollBar=function(a,c){switch(a){case 3:0==c?(this.InputElement.style.overflowX="auto",this.InputElement.style.overflowY="auto"):(this.InputElement.style.overflowX=this.GetWordWrap()?"auto":"scroll",this.InputElement.style.overflowY="scroll");break;case 0:this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="hidden";break;case 2:0==c?(this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="auto"):(this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="scroll");break;case 1:this.InputElement.style.overflowY="hidden",0==c?this.InputElement.style.overflowX="auto":this.InputElement.style.overflowX=this.GetWordWrap()?"auto":"scroll"}if(b.CoreUtility.safari||b.CoreUtility.chrome){var d=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-1+"px";var e=this;setTimeout(function(){e.InputElement.style.width=d},0)}b.CoreUtility.IPad&&(this.InputElement.style.webkitOverflowScrolling="touch"),this.InternalSetText(this.GetText())},a.prototype.Select=function(){return this._isInnerKeyPressCall?void delete this._isInnerKeyPressCall:(this.SelectionStart=b.Utility.GetSelectionStartPosition(this.InputElement),this.SelectionEnd=this.SelectionStart+b.Utility.GetSelectionText(this.InputElement).GetLength(),void(this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))))},a.prototype._IMSetSelection=function(a,c,d,e){var f={"start":c,"end":d};if(c>d){var g=c;c=d,d=g}if(b.CoreUtility.IsIE())try{var h=a.createTextRange();if(e){for(var i=a.value,j=0,k=0,l=0,m=i.lastIndexOf("\r\n");-1!=m;)j++,m>=c&&k++,m>=d&&l++,i=i.substring(0,m),m=i.lastIndexOf("\r\n");k=j-k;var n=c;d=d,c=n-k,d=a.value.length-d-l,h.moveEnd("character",-1*parseInt(d)),h.moveStart("character",parseInt(c)),b.Utility.InnerSelect=!0,h.select(),b.Utility.InnerSelect=!1}else{var n=a.value.GetStandardPosition(c);d=a.value.GetStandardPosition(d,n-c),c=n,d=a.value.length-d,h.moveEnd("character",-1*parseInt(d)),h.moveStart("character",parseInt(c)),b.Utility.InnerSelect=!0,h.select(),b.Utility.InnerSelect=!1}}catch(o){}else{var n=c;d=d,c=n;try{var p=parseInt(c),q=parseInt(d);(a.selectionStart!=p||a.selectionEnd!=q)&&a.setSelectionRange(p,q)}catch(o){}}var r=a.value.substring(0,p),s=b.CoreUtility.MeasureText(r,a).Width,t=a.scrollHeight,u=a.clientWidth,v=a.currentStyle||window.getComputedStyle(a,null);u-=parseInt(v.paddingLeft)+parseInt(v.paddingRight);var w=a.clientHeight;return w-=parseInt(v.paddingTop)+parseInt(v.paddingBottom),b.CoreUtility.IsIE10OrLater()&&(u-=w),a.scrollLeft>s?a.scrollLeft=s:s>a.scrollLeft+u&&(a.scrollLeft=s-u+parseInt(v.paddingLeft)),a.scrollTop>t?a.scrollTop=t:t>a.scrollTop+w&&(a.scrollTop=t-w+parseInt(v.paddingTop)),f},a.prototype.SetSelection=function(a,b){this.MultiLine?this._IMSetSelection(this.InputElement,a,b,!0):this._IMSetSelection(this.InputElement,a,b),this.SelectionStart=a,this.SelectionEnd=b,this.DropDownEditData.SelectionStart=a,this.DropDownEditData.SelectionEnd=b},a.prototype.InternalSetSelection=function(a,b){this.MultiLine?this._IMSetSelection(this.InputElement,a,b,!0):(this._IMSetSelection(this.InputElement,a,b),this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,a),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,b)),this.SelectionStart=a,this.SelectionEnd=b},a.prototype.SetInnerSelectionStart=function(a){this.SelectionStart=a,this.DropDownEditData.SelectionStart=a},a.prototype.SetInnerSelectionEnd=function(a){this.SelectionEnd=a,this.DropDownEditData.SelectionEnd=a},a.prototype.GetTrueSelection=function(a,b,c,d){var e=new Object;return e.SelectionStart=a,e.SelectionEnd=b,this.isTextEllipsis?(e.SelectionStart=this.GetTruePosition(a,c,d,this.TextHeadLength),a==b?e.SelectionEnd=e.SelectionStart:e.SelectionEnd=this.GetTruePosition(b,c,d,this.TextHeadLength),e):e},a.prototype.DropDownListValidate=function(a){for(var b=a,c=new Array,d=0,e=0;d<b.length;d++){var f=b[d];if(this.UIProcess.ListValidateCheck(b[d])){if(0!=this.MaxLength&&(f=this.UIProcess.MaxLengthCheck(f,this.MaxLength,this.LengthAsByte)),0!=this.MaxLineCount&&this.MultiLine)if(this.PasswordMode){var g=this.UIProcess.GetPasswordText(f,this.PasswordChar,this.MultiLine);g=this.UIProcess.MaxLineCheck("","",g,this.MaxLineCount,this.CountWrappedLine),f=f.Substring(0,g.GetLength())}else f=this.UIProcess.MaxLineCheck("","",f,this.MaxLineCount,this.CountWrappedLine);f==b[d]&&(c[e]=b[d],e++)}}return c},a.prototype.SystemPasswordChar=function(){var a=b.CoreUtility.GetClientOS();switch(a.toLowerCase()){case"win2000":return"*";case"win2003":case"winxp":case"vista":case"win7":case"win8":return"\u25cf";default:return"*"}},a.prototype.InternalSetText=function(a,c,d){var e=this.UIProcess.FormatCheck(a,this.AcceptTab,this.AcceptReturn),f=e;if(0!=this.MaxLength&&(f=this.UIProcess.MaxLengthCheck(e,this.MaxLength,this.LengthAsByte)),0!=this.MaxLineCount&&this.MultiLine)if(this.PasswordMode){var g=this.UIProcess.GetPasswordText(f,this.PasswordChar,this.MultiLine);g=this.UIProcess.MaxLineCheck("","",g,this.MaxLineCount,this.CountWrappedLine),f=f.Substring(0,g.GetLength())}else f=this.UIProcess.MaxLineCheck("","",f,this.MaxLineCount,this.CountWrappedLine);return d&&(b.CoreUtility.firefox||b.CoreUtility.chrome)?this.DirectSetText(f,!0):this.DirectSetText(f),!this.MultiLine&&c&&(this.DropDownEditData.Text=f),f},a.prototype.DirectSetText=function(a,c){this.SystemChange=!1;var d=a;this.PasswordMode&&(d=this.UIProcess.GetPasswordText(a,this.PasswordChar,this.MultiLine)),this.MultiLine||b.CoreUtility.IsIE()||(d=d.replace(/\r\n/g,""),d=d.replace(/\n/g,""),d=d.replace(/\r/g,"")),this.Text!=a&&(this.Text=a,this.switchPasswordChar||(this.switchPasswordChar=!1)),c||this._setInputValueWithPlaceHolder(d),this.SetHideText(a)},a.prototype.InternalDirectSetText=function(a){var b=a;this.PasswordMode&&(b=this.UIProcess.GetPasswordText(a,this.PasswordChar,this.MultiLine)),this._setInputValueWithPlaceHolder(b)},a.prototype._setInputValueWithPlaceHolder=function(a){""===a?(this.isNullText=!0,this.Focused===!1&&(a=this.placeHolder)):a===this.placeHolder&&this.isNullText||(this.isNullText=!1),this.InputElement.value=a},a.prototype._getInputValueWithPlaceHolder=function(){return this.isNullText?"":this.InputElement.value},a.prototype.SetHideText=function(a){this.hideText!==a&&""!=this.TextChangedEvent&&null!=this.TextChangedEvent&&this.UIProcess.FireEvent(this,this.TextChangedEvent,a,"textChanged"),this.hideText=a},a.prototype.GetSingleCurPosition=function(a,b){if(0>b)return-1;var c=b;b>=a.GetLength()&&(c=a.GetLength());for(var d=a.Substring(0,c);;){var e=d.GetLength();if(d=d.replace(/\r/g,""),d=d.replace(/\n/g,""),e==d.GetLength())break}return d.GetLength()},a.prototype.GetSingleText=function(a){for(var b=a;;){var c=b.GetLength();if(b=b.replace(/\r/g,""),b=b.replace(/\n/g,""),b.GetLength()==c)break}return b},a.prototype.GetMultiPosition=function(a,b){if(0>=b)return 0;if(b>=a.GetLength())return a.GetLength();for(var c=b;c<a.GetLength();){var d=a.Substring(0,c);if(d=this.GetSingleText(d),d.GetLength()==b)break;c+=1}return c},a.prototype.GetOldValue=function(){
return this.OldText},a.prototype.GetValue=function(){return this.GetText()},a.prototype.SetInnerText=function(a){this.SetText(a)},a.prototype.GetDisPlayText=function(a){var b=a;return this.PasswordMode&&(b=this.UIProcess.GetPasswordText(a,this.PasswordChar,this.MultiLine)),b},a.prototype.Focus=function(){this._destoryOverflowTip(),this.oldTextValue=this._getInputValueWithPlaceHolder();var a=this.oldTextValue;if(b.CoreUtility.IsIE()||(this.IsActive=!0),this.HasFocus=!0,this._autoComplete.GetIsFocusOnList())this._autoComplete.SetIsFocusOnList(!1);else{this._autoComplete.HideDropdown();var c;c="None"!=this.AutoCompleteType?this.GetItem(this.AutoCompleteType):this.GetItem(this.GetId(),"focus");var d=null!=c?c.sort():null;1==b.Utility.LoadComplete&&this._autoComplete.SetDataList(d)}var e=this.UIProcess.TextBoxFocus(this.FocusType,this.InputElement,this.GetText(),this.MultiLine,this.HighlightText,!1);if(b.Utility.CurrentActiveControlId=this.GetId(),null!=e){if(this.isTextEllipsis&&this.InternalDirectSetText(this.Text),null!=e.SelectionStart&&(this.SelectionStart=e.SelectionStart),null!=e.SelectionEnd&&(this.SelectionEnd=e.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart)),null!=e.SelectionStart&&null!=e.SelectionEnd){var f=this.GetTrueSelection(this.SelectionStart,this.SelectionEnd,this.Text,a);this.isTextEllipsis&&(this.SelectionStart=f.SelectionStart,this.SelectionEnd=f.SelectionEnd),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,f.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,f.SelectionEnd))}if(1==this.UIProcess.japInput)-1!=this.truePosition&&(this.SelectionStart=this.truePosition,this.SelectionEnd=this.truePosition,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))),this.UIProcess.japInput=!1;else if(2!=this.FocusType&&3!=this.FocusType&&7!=this.FocusType&&11!=this.FocusType&&(this.OldText=this.GetText(),this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd,this.LastSelectionStart=this.OldSelectionStart,this.LastSelectionEnd=this.OldSelectionEnd,!this.MultiLine)){this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.OldSelectionStart=this.DropDownEditData.SelectionStart,this.DropDownEditData.OldSelectionEnd=this.DropDownEditData.SelectionEnd,this.DropDownEditData.LastSelectionStart=this.DropDownEditData.OldSelectionStart,this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.OldSelectionEnd;var g=this;setTimeout(function(){g.DropDownEditData.SelectionStart=g.SelectionStart,g.DropDownEditData.SelectionEnd=g.SelectionEnd},0)}1==this.ReadOnly&&0==this.FocusType&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),(1==e.SetSelection||this.isTextEllipsis)&&this.SetSelection(this.SelectionStart,this.SelectionEnd),this.IsCausedByImplementingDrop&&(this.IsCausedByImplementingDrop=!1),this.FocusExit&&(this.UIProcess.MoveControl(this.InputElement,!0),this.FocusExit=!1),this.isTextEllipsis&&(this.isTextEllipsis=!1)}},a.prototype.SetInnerFocus=function(a){null!==a&&void 0!==a?this.FocusType=a:this.FocusType=3,this.InputElement.focus(),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))},a.prototype.LoseFocus=function(a){if(b.CoreUtility.IsIE()||(this.IsActive=!1),this.FireKeyExit(),b.CoreUtility.IsIE()&&this.ImeMode&&this.ReadingImeOperation(),b.CoreUtility.IsIE())this.ImeMode?(this.ImeInput("LoseFocusInput",void 0,a),this.ImeSelectTimes=0):this.Text!=this.GetText()&&this.InternalSetText(this.Text,!0);else if(this.ImeMode&&this.ImeInput("ReInput",!0,a),this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder()){var c=this.Text;c=c.replace(/\\/g,"\\\\"),this.MultiLine?(c=c.replace(/\r/g,"\\r"),c=c.replace(/\n/g,"\\n")):(c=c.replace(/\r\n/g,""),c=c.replace(/\r/g,""),c=c.replace(/\n/g,"")),this.InternalSetText(c,!0)}if(this.HasFocus=!1,this._autoComplete.IsVisible()){if(this._autoComplete.GetIsMouseOnList())return;this._autoComplete.HideDropdown()}7!=this.FocusType&&(this.FocusType=0);var d;d=b.CoreUtility.IsIE()?this.GetText():this.hideText,this.OldText==d||this.UIProcess.japInput?(this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.hideText!=this.GetText()&&b.CoreUtility.IsIE()&&this.SetHideText(this.GetText())):(this.OldText=this.Text,b.CoreUtility.IsIE()&&(this.Text=this.GetText(),this.SetHideText(this.GetText())),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.SystemChange&&this.oldTextValue==this.GetText()||(this.SystemChange=!0))},a.prototype.FireKeyExit=function(){null!=this.EventInfo&&"KeyExit"==this.EventInfo.Type&&(this.UIProcess.FireEvent(this,this.EventInfo.Name,this.EventInfo.Args,this.EventInfo.Type),this.FocusType=4,this.EventInfo=null)},a.prototype.GetTruePosition=function(a,b,c,d){var e=this.EllipsisString.GetLength();if(d>=a)return a;if(a>=d+e)return b.GetLength()-c.GetLength()+a;var f=b.GetLength()-c.GetLength()+e,g=Math.floor((a-d)*f/e)+d;return g},a.prototype.DealEllipsis=function(a,c,d,e){if(this.isTextEllipsis=!1,!a&&c!=f.None){this.InternalDirectSetText(this.Text);var g=c,h=0,i=0,j=0,k=0,l=e.value,m=e.value,n="",o="",p=0,q=!0;if(e.value=l,b.Utility.GetTextBoxScrollWidth(e,this.IsControlInPreview)>e.clientWidth){this.isTextEllipsis=!0,e.value=d;var r=d;if(b.Utility.GetTextBoxScrollWidth(e,this.IsControlInPreview)>e.clientWidth)r="",l=d,m=d;else if(g==f.EllipsisPath){var s=m.LastIndexOf("\\");-1!=s&&(e.value=r+m.substr(s),b.Utility.GetTextBoxScrollWidth(e,this.IsControlInPreview)<=e.clientWidth&&(r=e.value,l=m.Substring(0,s),g=f.EllipsisEnd))}e.value=l+r;do h=e.value.GetLength(),i=Math.ceil(b.Utility.GetTextBoxScrollWidth(e,this.IsControlInPreview)/h),j=b.Utility.GetTextBoxScrollWidth(e,this.IsControlInPreview)-e.clientWidth,k=Math.ceil(j/i),g==f.EllipsisEnd?(e.value=l.Substring(0,l.GetLength()-k)+r,l=l.Substring(0,l.GetLength()-k)):g==f.EllipsisPath&&(p=Math.ceil((l.GetLength()-k)/2),n=l.substr(0,p),o=l.substr(p+k),e.value=n+r+o,l=n+o);while(b.Utility.GetTextBoxScrollWidth(e,this.IsControlInPreview)>e.clientWidth);var t=l.GetLength();do g==f.EllipsisEnd?(e.value=m.Substring(0,t+1)+r,t+=1):g==f.EllipsisPath&&(q?(o=m.substr(m.GetLength()-o.GetLength()-1),q=!1):(n=m.substr(0,n.GetLength()+1),q=!0),e.value=n+r+o);while(b.Utility.GetTextBoxScrollWidth(e,this.IsControlInPreview)==e.clientWidth);g==f.EllipsisEnd?(e.value=m.Substring(0,t-1)+r,this.TextHeadLength=t-1):g==f.EllipsisPath&&(q?n=m.substr(0,n.GetLength()-1):o=m.substr(m.GetLength()-o.GetLength()+1),e.value=n+r+o,this.TextHeadLength=n.GetLength())}}},a.prototype.ImeInput=function(a,c,d,e){if(e)var f=this.Text,g=this.SelectionEnd,h=this.SelectionStart;var i;if(i="DirectInput"!=a||c?"LoseFocusInput"==a&&this._getInputValueWithPlaceHolder()!=this.GetText()?this._getInputValueWithPlaceHolder():this.GetText():this.InputElement.value,i==this.Text)return this.lastValue=this.Text,null!=d&&b.Utility.PreventDefault(d),this.ImeMode=!1,!1;if(b.CoreUtility.IsIE()&&this.HasValidatedImeInput){if(this.InternalSetText(i,!0),e){var j=this.Text;if(f!==j){var k=h+j.length-(f.length-(g-h));this.SetSelection(k,k)}}return!1}var l;if(""!=this.Text){var m=Math.min(this.SelectionStart,this.SelectionEnd),n=Math.max(this.SelectionStart,this.SelectionEnd),o=this.Text;if(b.CoreUtility.IsIE()||(o=this.GetDisPlayText(this.Text)),n<o.GetLength()){var p=o.Substring(n,o.GetLength()),q=i.IndexOf(p);l=-1!=q?i.Substring(m,i.GetLength()-p.GetLength()):""}else l=i.Substring(m,i.GetLength())}else l=i;if(""==l||this.MultiLine||this._autoComplete.IsDataListEmpty()||!this.EnableAutoComplete||this._autoComplete.KeyUp(null,!0),"ReInput"==a&&(l=c?l.Substring(0,l.GetLength()):l.Substring(0,l.GetLength()-1)),"Record"==a)return l;var r=!1;if("LoseFocusInput"==a){if(""==l)return void(this.GetText()!=this.Text&&this._setInputValueWithPlaceHolder(this.Text));r=!0,this.UIProcess.japInput=!0}this.UIProcess.keypressResponse=!0,this.UIProcess.inputJap=!0,"ReInput"==a||!b.CoreUtility.IsIE()&&"ClickInput"==a?this.InnerKeyPress(l,!0,r):this.InnerKeyPress(l,!1,r),this.HasValidatedImeInput=!0,this.UIProcess.inputJap=!1,this.UIProcess.japInput=!1,this.ImeMode=!1,this.ImeSelect=!1,("ReInput"==a||"ClickInput"==a)&&(this.truePosition=this.SelectionStart,this.FocusType=8)},a.prototype.CanUndo=function(){return this.IsChangedByDropDownEdit?(this.IsUndoAfterDel?this.BuffText=this.GetText():this.LastText=this.GetText(),this.IsChangedByDropDownEdit=!1,!0):this.IsUndoAfterDel?this.GetText()!=this.BuffText:this.GetText()!=this.LastText},a.prototype.GetCookie=function(a){for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].split("=");if(a==d[0]&&null!=d[1])return window.unescape(d[1])}return null},a.prototype.SetCookie=function(a,b){var c=new Date(2020,8,20);if(-1==document.cookie.IndexOf(a)){if(""!=b)for(;-1!=b.IndexOf(",");)b=b.replace(",","@#GCD#@");document.cookie=a+"="+window.escape(b)+"; expires="+c.toGMTString()}else{for(var d=document.cookie.split("; "),e="",f=0;f<d.length;f++){var g=d[f].split("=");if(a==g[0]){if(null!=g[1]){e=window.unescape(g[1]);break}return void(document.cookie=a+"="+window.escape(b.replace(",","@#GCD#@"))+"; expires="+c.toGMTString())}}if(""!=b){for(;-1!=b.IndexOf(",");)b=b.replace(",","@#GCD#@");for(var h=e.split(","),i=!1,j=0;j<h.length;j++)h[j]==b&&(i=!0);if(!i){e=b+","+e;var k=e.split(",");if(k.length>this.MaxHistoryCount){for(var l="",m=0;m<this.MaxHistoryCount;m++)l+=m!=this.MaxHistoryCount-1?k[m]+",":k[m];e=l}document.cookie=a+"="+window.escape(e)+"; expires="+c.toGMTString()}}}},a.prototype.DelCookie=function(a){document.cookie=a+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;"},a.prototype.DeleteItem=function(a){for(;-1!=a.IndexOf("&nbsp;");)a=a.replace("&nbsp;"," ");var b,c=new Date(2020,8,20);if(b="None"!=this.AutoCompleteType?this.GetCookie(this.AutoCompleteType):this.GetCookie(this.GetId()),null!=b)try{var d=b.split(","),e=b.split(",");if(d.length>0){var f;for(f=0;f<d.length;f++){for(;-1!=d[f].IndexOf("@#GCD#@");)d[f]=d[f].replace("@#GCD#@",",");if(-1!=d[f].IndexOf("&")){for(var g=d[f],h="";-1!=g.IndexOf("&");){g=g.replace("&","&amp;");var i=g.IndexOf("&");h+=g.Substring(0,i+5),g=g.Substring(i+5,g.GetLength())}-1==g.IndexOf("&")&&""!=g&&(h+=g),d[f]=h}for(;-1!=d[f].IndexOf("<");)d[f]=d[f].replace("<","&lt;");for(;-1!=d[f].IndexOf(">");)d[f]=d[f].replace(">","&gt;");if(d[f]==a)break}if(f<e.length&&e.length>1){var j;for(j=f;j<e.length-1;j++)e[j]=e[j+1];e[d.length-1]=null;var k="";for(j=0;j<e.length-1;j++)k+=j!=e.length-2?e[j]+",":e[j];if("None"!=this.AutoCompleteType){document.cookie=this.AutoCompleteType+"="+window.escape(k)+"; expires="+c.toGMTString();var l=this.GetItem(this.AutoCompleteType).sort();for(f=0;f<l.length;f++)for(;-1!=l[f].IndexOf("@#GCD#@");)l[f]=l[f].replace("@#GCD#@",",");this._autoComplete.SetDataList(l)}else{document.cookie=this.GetId()+"="+window.escape(k)+"; expires="+c.toGMTString();var l=this.GetItem(this.GetId()).sort();for(f=0;f<l.length;f++)for(;-1!=l[f].IndexOf("@#GCD#@");)l[f]=l[f].replace("@#GCD#@",",");this._autoComplete.SetDataList(l)}}else this._autoComplete.SetDataList([]),"None"!=this.AutoCompleteType?document.cookie=this.AutoCompleteType+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;":document.cookie=this.GetId()+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;"}}catch(m){}},a.prototype.GetItem=function(a,b){if(this.IsFromServer){var c;if("None"!=this.AutoCompleteType&&(c=this.GetCookie(this.AutoCompleteType)),null!=c)try{for(var d=c.split(","),e=d.length>this.MaxHistoryCount?this.MaxHistoryCount:d.length,f=0;e>f;f++)for(;-1!=d[f].IndexOf("@#GCD#@");)d[f]=d[f].replace("@#GCD#@",",");if(e!=d.length){for(var g=new Array,h=0;e>h;h++)g[h]=d[h];for(;h<d.length;)this.DeleteItem(d[h]),h++;d=g}return d.length>0&&(d=this.DropDownListValidate(d)),d}catch(i){}return null}var d=this._historyList;if(d=d.sort(),null!=d)try{var e=d.length>this.MaxHistoryCount?this.MaxHistoryCount:d.length;if(void 0!==b&&"focus"===b&&(e=d.length),e!=d.length){for(var g=new Array,h=0;e>h;h++)g[h]=d[h];for(;h<d.length;)this.DeleteItem(d[h]),h++;d=g}return d.length>0&&(d=this.DropDownListValidate(d)),d}catch(i){}return null},a.prototype.ResetData=function(a){this.SetText(a.ResetData)},a.prototype.ReadingImeOperation=function(){""!=this.RubyText&&(b.Utility.FireEvent(this,this.readingImeStringOutputEvent,{"readingString":this.RubyText},"readingImeStringOutput"),this.prevval="",this.RubyText="")},a.prototype.ReadingImeKeyUpProcess=function(a,c,d){var e=this.ImeMode?this.InputElement.value:this._getInputValueWithPlaceHolder(),f=e;if(this.SelectionEnd<this.Text.GetLength()){var g=this.Text.GetLength()-this.SelectionEnd;f=e.Substring(0,e.GetLength()-g)}var h,i=f.Substring(this.SelectionStart,f.GetLength()),j=i;for(h=this.prevval.length;h>=0;h--)if(i.substring(0,h)==this.prevval.substring(0,h)){j=i.substring(h);break}if(this.prevval=i,e!=this.Text||13==a||d.altKey){if(32!=a&&229!=a&&!(a>=112&&123>=a)&&37!=a&&39!=a&&38!=a&&40!=a&&27!=a&&28!=a&&29!=a&&8!=a){var k=this.ConvertReadingIMEString(j,c);b.CoreUtility.IsIE()&&(this.ImeMode?(192!=a&&219!=a&&221!=a||1!=j.length||2!=k.length||this.RubyText.charAt(this.RubyText.length-1)==k.charAt(0)&&(k=k.charAt(1)),this.RubyText+=k):this.ReadingImeOperation())}}else this.prevval="",this.RubyText=""},a.prototype.IsValidReadingString=function(a){if(void 0===a||null===a||0===a.length)return!1;for(var b=0;b<a.length;b++)if(!this.IsValidCharacter(a[b]))return!1;return!0},a.prototype.IsValidCharacter=function(a){var c=b.CharProcess.CharEx;if(c.IsSpace(a))return!0;var d=c.GetCharType(a),e=d&~c.Ctype.FullWidth;return e==c.Ctype.Hiragana||e==c.Ctype.Katakana||e==c.Ctype.UpperCase||e==c.Ctype.LowerCase||e==c.Ctype.Numeric||e==c.Ctype.Symbol||e==c.Ctype.MathSymbol||e==c.Ctype.Punctuation||-1!==c.CharCategory._jpnMixed.indexOf(a)?!0:!1},a.prototype.UpdateReadingIME=function(a){this.RubyText=this.ConvertReadingIMEString(a),this.ReadingImeOperation()},a.prototype.ConvertReadingIMEString=function(a,c){void 0===c&&(c=b.CharProcess.CharEx);for(var d="",e=0;e<a.length;e++){var f=a.charAt(e),g=c.ToHalfKatakana(f);"\u309b"==f&&(g="\uff9e"),"\u309c"==f&&(g="\uff9f"),"\uff65"==g&&(g=""),d+=g}return d},a.prototype.AddAllEventsHandler=function(){var a=this;if(null!=this.GetInputElement()){var c=function(c){b.GlobalEventHandler.OnMouseDown(a,c)},e=function(c){b.GlobalEventHandler.OnMouseUp(a,c)},f=function(c){b.GlobalEventHandler.OnMouseOver(a,c)},g=function(c){b.GlobalEventHandler.OnSelectStart(a,c)},h=function(c){b.GlobalEventHandler.OnKeyDown(a,c)},i=function(c){b.GlobalEventHandler.OnKeyPress(a,c)},j=function(c){b.GlobalEventHandler.OnKeyUp(a,c)},k=function(c){b.GlobalEventHandler.OnDblClick(a,c)},l=function(c){b.GlobalEventHandler.OnHTML5BeforeCopy(a,c)},m=function(c){b.GlobalEventHandler.OnHTML5Cut(a,c)},n=function(c){b.GlobalEventHandler.OnHTML5Paste(a,c)},o=function(c){b.GlobalEventHandler.OnDragStart(a,c)},p=function(c){b.GlobalEventHandler.OnDragEnd(a,c)},q=function(c){b.GlobalEventHandler.OnMouseOut(a,c)},r=function(c){b.GlobalEventHandler.OnDrop(a,c)},s=function(c){b.GlobalEventHandler.OnTouchStart(a,c)},t=function(c){b.GlobalEventHandler.OnTouchEnd(a,c)},u=function(c){b.GlobalEventHandler.OnSelect(a,c)};if(b.CoreUtility.safari){var v=function(b){a._safariDropText=getSelection().toString()},w=function(b){a._safariDropText=null};this.GetJQueryInputElement().on({"dragenter.imtextbox":v,"dragleave.imtextbox":w})}var x=function(c){b.GlobalEventHandler.OnDragEnter(a,c)},y=function(c){b.GlobalEventHandler.OnDragLeave(a,c)};if(b.CoreUtility.IsIE7OrLater()&&!b.CoreUtility.IsIE11OrLater()){var z=function(c){b.GlobalEventHandler.OnPropertyChanged(a,c)};this.GetJQueryInputElement().on({"onpropertychange.imtextbox":z})}else{var A=function(c){b.GlobalEventHandler.OnPropertyChanged(a,c)};this.GetJQueryInputElement().on({"propertychange.imtextbox":A})}var B=function(c){b.GlobalEventHandler.OnCompositionStart(a,c)},C=function(c){b.GlobalEventHandler.OnCompositionUpdate(a,c)},D=function(c){b.GlobalEventHandler.OnCompositionEnd(a,c)};if(b.CoreUtility.IsIE10OrLater()){var E=function(c){b.GlobalEventHandler.OnMSPointerUp(a,c)},F=function(c){b.GlobalEventHandler.OnMSPointerDown(a,c)},G=function(c){b.GlobalEventHandler.OnMSGestureTap(a,c)};this.GetJQueryInputElement().on({"MSPointerUp.imtextbox":E,"MSPointerDown.imtextbox":F,"MSGestureTap.imtextbox":G})}var H=function(c){b.GlobalEventHandler.OnEditFieldLoseFocus(a,c)},I=function(c){b.GlobalEventHandler.OnFocusOut(a,c)},J=function(c){b.GlobalEventHandler.OnEditFieldFocus(a,c)},K=function(c){b.GlobalEventHandler.OnActivate(a,c)},L=function(c){b.GlobalEventHandler.OnDeActivate(a,c)};if(b.CoreUtility.IsPad()){var M=function(c){b.GlobalEventHandler.OnInput(a,c)};this.GetJQueryInputElement().on({"input.imtextbox":M})}this.GetJQueryInputElement().on({"mousedown.imtextbox":c,"mouseup.imtextbox":e,"selectstart.imtextbox":g,"keydown.imtextbox":h,"keypress.imtextbox":i,"keyup.imtextbox":j,"dblclick.imtextbox":k,"beforecopy.imtextbox":l,"cut.imtextbox":m,"paste.imtextbox":n,"dragstart.imtextbox":o,"dragend.imtextbox":p,"mouseout.imtextbox":q,"drop.imtextbox":r,"touchstart.imtextbox":s,"touchend.imtextbox":t,"select.imtextbox":u,"dragenter.imtextbox":x,"dragleave.imtextbox":y,"compositionstart.imtextbox":B,"compositionupdate.imtextbox":C,"compositionend.imtextbox":D,"blur.imtextbox":H,"focusout.imtextbox":I,"focus.imtextbox":J,"activate.imtextbox":K,"deactivate.imtextbox":L}),d(this.GetJQueryInputElement()[0].parentElement).on("mouseover",f)}},a.prototype.Input=function(a){try{this.ImeInput("DirectInput")}finally{this.ImeMode=!1}},a.prototype.KeyDown=function(a){var c=this,d=a.keyCode,e=new Object;if(e.Shift=!1,e.Ctrl=!1,e.Alt=!1,a.shiftKey&&(e.Shift=!0),a.ctrlKey&&(e.Ctrl=!0),a.altKey&&(e.Alt=!0),this.LastInputText=this.GetText(),this.isFuncKeyPressed=!1,!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete){var f=this._autoComplete.KeyDown(a);if(null!=f&&0==f)return}if(this.KeyDownAction=!0,229==d&&!this.IsJapanConvertKeyPress||13==d&&this.GetText()!=this.Text)return this.ImeMode=!0,!0;if(this.ImeMode){var g=e.Shift||e.Ctrl||20==d||d>=112&&123>=d;g=g||8==d&&!b.CoreUtility.IsIE(),g||(this.ImeInput("ReInput",!0,a),this.ImeSelectTimes=0,this.ImeMode=!1)}229==d&&this.IsJapanConvertKeyPress&&(this.IsJapanConvertKeyPress=!1);var h=new Object;if(e.Shift&&(d|=65536),e.Ctrl&&(d|=131072),e.Alt&&40===d)var i="DropDown";e.Alt&&(d|=262144);var j,k=!1;if(null!=this.KeyActionList)for(j=0;j<this.KeyActionList.length;j++)if(this.KeyActionList[j]==d.toString()){k=!0;break}if("DropDown"==i||(262182==d||262184==d)&&!k)return!1;d>95&&106>d&&(d-=48);var l=this.SelectionStart,m=this.SelectionEnd,n=this.GetText(),o=this.BuffText,p=this.LastText,q=this.LastSelectionStart,r=this.LastSelectionEnd;if(this.MultiLine||(l=this.DropDownEditData.SelectionStart,m=this.DropDownEditData.SelectionEnd,n=this.DropDownEditData.Text,o=this.DropDownEditData.BuffText,p=this.DropDownEditData.LastText,q=this.DropDownEditData.LastSelectionStart,r=this.DropDownEditData.LastSelectionEnd),h=this.UIProcess.TextBoxKeyDown(d,e,this._getEditModeInternal(),this.Overwrite,l,m,this.ReadOnly,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.ExitOnLastChar,this.ExitOnLeftRightKey,this.MultiLine,this.PasswordMode,n,this.AcceptTab,this.AcceptReturn,o,p,q,r,i,a),null==h)return!1;if(null!=h.inputChar)return!0;1==h.InputTab&&(this.Text=this.GetText(),this.InnerKeyPress("	")),h.DelInclude&&(this.IsUndoAfterDel=!0,h.SerialDel||(this.BuffText=this.GetText(),this.LastSelectionStart=this.BuffText.GetLength(),this.LastSelectionEnd=this.BuffText.GetLength(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text,this.DropDownEditData.LastSelectionStart=this.DropDownEditData.BuffText.GetLength(),this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.BuffText.GetLength()))),null!=h.Text&&(1==h.Undo&&(this.LastText=this.Text,this.BuffText=this.LastText,this.MultiLine||(this.DropDownEditData.LastText=this.DropDownEditData.Text,this.DropDownEditData.BuffText=this.DropDownEditData.LastText)),this.DirectSetText(h.Text),this.MultiLine||(this.DropDownEditData.Text=h.Text));var s=this.GetSelectionLength();null!=h.SelectionStart&&(1==h.Undo&&(this.isFuncKeyPressed=!0,this.LastSelectionStart=this.SelectionStart,this.MultiLine||(this.DropDownEditData.LastSelectionStart=this.DropDownEditData.SelectionStart)),this.SelectionStart=h.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(this.DropDownEditData.Text,h.SelectionStart))),null!=h.SelectionEnd&&(1==h.Undo&&(this.LastSelectionEnd=this.SelectionEnd,this.MultiLine||(this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.SelectionEnd)),this.SelectionEnd=h.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(this.DropDownEditData.Text,h.SelectionEnd)));var t=this.GetSelectionLength();if(null!=h.KeyCode){var u=new Object;return u.KeyCode=h.KeyCode,u}if(null!=h.FocusType&&(this.FocusType=h.FocusType),null!=h.Overwrite&&this.GetOverwrite()!=h.Overwrite&&(0==this._getEditModeInternal()?this._setEditModeInternal(1):1==this._getEditModeInternal()&&this._setEditModeInternal(0)),null!=h.EventInfo)for(j=0;j<h.EventInfo.length;j++)null!=h.EventInfo[j]&&("KeyExit"==h.EventInfo[j].Type?this.EventInfo=h.EventInfo[j]:this.UIProcess.FireEvent(this,h.EventInfo[j].Name,h.EventInfo[j].Args,h.EventInfo[j].Type));return null!=h.System?(setTimeout(function(){h.System&&""===c.InputElement.value&&c.Clear()},0),h.System):(1==h.SetSelection&&(0==s&&0!=t?b.Utility.ShouldFireOnSelectStart=!0:b.Utility.ShouldFireOnSelectStart=!1,this.SetSelection(this.SelectionStart,this.SelectionEnd),b.Utility.ShouldFireOnSelectStart=!1),!1)},a.prototype.KeyPress=function(a,c,d){var e=a;if(!b.CoreUtility.IsIE()&&this.ImeMode){var f=192==c.keyCode&&c.altKey;if(f)return this.ImeInput("ReInput",!0,c),this.ImeSelectTimes=0,void(this.ImeMode=!1)}if(!b.CoreUtility.IsIE()&&0==c.charCode){var g=c.keyCode||c.charCode;if(g=!this.MultiLine||!this.AcceptReturn&&this.MultiLine&&!c.ctrlKey)return!0}return this.InnerKeyPress(e,d)},a.prototype.KeyUp=function(a){this.PasswordMode||this.MultiLine||!this.EnableAutoComplete||(8!=a.keyCode&&46!=a.keyCode&&9!=a.keyCode||""!=this.GetText()?this.isFuncKeyPressed?this._autoComplete.HideDropdown():this.LastInputText!=this.GetText()&&""!=this.GetText()&&this._autoComplete.KeyUp(a):this._autoComplete.GetIsDeleteItem()||this._autoComplete.HideDropdown(),this._autoComplete.SetIsDeleteItem(!1)),this.KeyDownAction=!1;var c=a.keyCode,d=b.CharProcess.CharEx;if(13==c&&this._getInputValueWithPlaceHolder()!=this.Text&&(b.CoreUtility.IsIE()&&this.ImeMode?this.HasValidatedImeInput=!1:b.CoreUtility.IsIE()||(this.ImeMode=!0)),1==this.ImeMode){var e=this._getInputValueWithPlaceHolder(),f=e;if(this.SelectionEnd<this.Text.GetLength()){var g=this.Text.GetLength()-this.SelectionEnd;f=e.Substring(0,e.GetLength()-g)}f=f.Substring(f.GetLength()-1,f.GetLength()),13==c?(this.ImeInput("DirectInput",void 0,a),this.ImeSelectTimes=0):c>=48&&57>=c||c>=96&&105>=c?(c>=96&&(c-=48),f=d.ToHalfWidth(f),f==String.fromCharCode(c)||this.ImeSelect?f==String.fromCharCode(c)&&this.ImeSelectTimes<1?this.HasValidatedImeInput=!1:this.ImeSelect||(this.ImeInput("ReInput",void 0,a),this.HasValidatedImeInput=!1,this.ImeMode=!0):this.HasValidatedImeInput=!1,this.ImeSelectTimes=0):32==c?0==this.ImeSelect&&(1==this.ImeSelectTimes?this.ImeSelect=!0:d.ToHalfWidth(f)!=String.fromCharCode(c)?this.ImeSelectTimes++:this.HasValidatedImeInput&&(this.UIProcess.inputJap=!0,b.CoreUtility.IsIE()&&(this.HasValidatedImeInput=!1),this.ImeInput("DirectInput",void 0,a),this.ImeSelectTimes=0)):c>=65&&90>=c?(this.ImeSelectTimes=0,this.HasValidatedImeInput=!1):32==c||106==c||107==c||109==c||173==c&&b.CoreUtility.IsFireFox4OrLater()||110==c||111==c||219==c||220==c||221==c||222==c||c>=186&&192>=c||226==c?(this.ImeSelectTimes>=1&&this.ImeInput("ReInput",void 0,a),this.ImeSelectTimes=0,b.CoreUtility.IsIE()&&(this.HasValidatedImeInput=!1)):40==c||38==c?0==this.ImeSelect&&1==this.ImeSelectTimes&&(this.ImeSelect=!0):8==c||46==c?this.ImeSelectTimes=0:27==c?this.ImeSelectTimes=0:244==c?this.IsJapanConvertKeyPress=!0:b.CoreUtility.IsIE()||243!=c?b.CoreUtility.IsIE()&&229==c&&(this.HasValidatedImeInput=!1):(this.ImeInput("ReInput",!0,a),this.ImeSelectTimes=0,this.ImeMode=!1)}if(242==c&&this.ImeInput("ReInput",!0,a),this.ReadingImeKeyUpProcess(c,d,a),1==this.UIProcess.keyupResponse){this.UIProcess.keyupResponse=!1;var h=this.UIProcess.TextBoxKeyUp(this.InputElement,this.MultiLine,this.SelectionStart,this.SelectionEnd,this.GetText()),i=this.SelectionStart,j=this.SelectionEnd,k=!1,l=!1;this.MultiLine||(i=this.DropDownEditData.SelectionStart,j=this.DropDownEditData.SelectionEnd),null!=h.SelectionStart&&this.SelectionStart!=h.SelectionStart&&(k=!0,this.SelectionStart=h.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),null!=h.SelectionEnd&&this.SelectionEnd!=h.SelectionEnd&&(this.SelectionEnd=h.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart),l=!0,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd)));var m,n=this._getInputValueWithPlaceHolder(),o=this.MultiLine?this.Text:this.GetSingleText(this.Text),p=o.GetLength()-n.GetLength();this.MultiLine?this.PasswordMode?0!=p&&(m=this.Text,k&&l?o=m.Substring(0,this.SelectionStart)+m.Substring(j,m.GetLength()):k||(j=this.SelectionStart+p,o=m.Substring(0,i)+m.Substring(j,m.GetLength()))):o=this.GetText():(0!=p&&(m=this.DropDownEditData.Text,k&&l?this.DropDownEditData.Text=m.Substring(0,this.DropDownEditData.SelectionStart)+m.Substring(j,m.GetLength()):k||(j=this.GetMultiPosition(m,this.SelectionStart+p),this.DropDownEditData.Text=m.Substring(0,i)+m.Substring(j,m.GetLength()))),o=this.GetSingleText(this.DropDownEditData.Text)),1==h.SystemEdit&&(this.Text=o,this.SetHideText(o)),null!=h.Text&&this.InternalSetText(h.Text,!0),1==h.SetSelection&&this.SetSelection(this.SelectionStart,this.SelectionEnd)}},a.prototype.PropertyChange=function(a){if(null!=a&&b.CoreUtility.IsIE10OrLater()&&"value"==a.propertyName,this.DragEdit)this.DragEdit=!1,this.MultiLine||this.Text!=this.GetText()&&(this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.Text=this.DropDownEditData.Text.Substring(0,this.DropDownEditData.SelectionStart)+this.DropDownEditData.Text.Substring(this.DropDownEditData.SelectionEnd,this.DropDownEditData.Text.GetLength()),this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.DropDownEditData.SelectionEnd=this.DropDownEditData.SelectionStart),this.OldText=this.Text,this.Text=this.GetText(),this.SetHideText(this.GetText()),this.SystemChange=!0,this.LastText=this.OldText,this.SetSelectionLength(0);else if(this.DropEdit){this.DropEdit=!1,this.FocusType=11,this.SelectionStart=b.Utility.GetSelectionStartPosition(this.InputElement),this.SelectionEnd=this.SelectionStart+b.Utility.GetSelectionText(this.InputElement).GetLength();var c=this._getInputValueWithPlaceHolder();if(this.MultiLine){if(this.PasswordMode){var d=this.SelectionEnd-this.DropText.GetLength();c=this.Text.Substring(0,d)+this.DropText+this.Text.Substring(d,this.Text.GetLength())}}else{var e,f=this.GetSingleText(this.DropDownEditData.Text),g=c.GetLength()-f.GetLength();e=this.PasswordMode?this.DropText:c.Substring(this.SelectionEnd-g,this.SelectionEnd),0!=g&&(this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd-g),this.DropDownEditData.Text=this.DropDownEditData.Text.Substring(0,this.DropDownEditData.SelectionStart)+e+this.DropDownEditData.Text.Substring(this.DropDownEditData.SelectionStart,this.DropDownEditData.Text.GetLength()),this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.DropDownEditData.SelectionEnd=this.DropDownEditData.SelectionStart+g),this.PasswordMode&&(c=this.GetSingleText(this.DropDownEditData.Text))}this.OldText=this.Text,this.Text=c,this.SetHideText(c),this.SystemChange=!0,this.LastText=this.OldText}else this.MultiLine||this.isTextEllipsis||this.PasswordMode||this.SetHideText(this.GetText());return!1},a.prototype.MouseDown=function(a){this._isInnerKeyPressCall=!1;var c=b.Utility.GetMouseButton(a);if(this.FocusedWhenMouseDown=document.activeElement==a.target,this.MouseDownOnClearButton=b.CoreUtility.IsMouseDownOnClearButton(a),b.CoreUtility.IsIE()||(this.IsActive=!0,this.ImeMode&&0==c&&(this.IsImplementImeInput=!0)),this.MouseButton=c,this.BeforeDragSelectionStart=this.SelectionStart,this.BeforeDragSelectionEnd=this.SelectionEnd,2==this.MouseButton)3!=this.FocusType&&(this.FocusType=1);else{this.isLeftMouseButtonPressed=!0,3!=this.FocusType&&(this.FocusType=1);try{var d=b.Utility.GetSelectionText(this.InputElement);""!=d&&(this.IsMouseDown=!0,b.Utility.ClearSelection(this.InputElement))}catch(e){}}var f=this.UIProcess.TextBoxMouseDown(this.InputElement,c);null!=f&&(null!=f.SelectionStart&&(this.SelectionStart=f.SelectionStart),null!=f.SelectionEnd&&(this.SelectionEnd=f.SelectionEnd))},a.prototype.MouseUp=function(a){var c=null;if(b.CoreUtility.IsIE()&&this.ImeMode&&this.ReadingImeOperation(),this.IsMouseDown=!1,b.CoreUtility.IsIE()&&(this.ImeMode||this.Text!=this.GetText()))this.ImeMode?(this.ImeInput("ClickInput",void 0,a),this.ImeSelectTimes=0):this.InternalSetText(this.Text,!0);else if(b.CoreUtility.IsIE()||!this.ImeMode&&this.GetDisPlayText(this.Text)==this._getInputValueWithPlaceHolder()){this.isLeftMouseButtonPressed=!1,this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd;var d=this.SelectionStart,e=this.SelectionEnd,f=this.GetText(),g=null;null!=c&&null!=c.Ctrl&&(g=c.Ctrl);var h=this.UIProcess.TextBoxMouseUp(this.InputElement,d,e,this.MouseButton,this.MultiLine,f,g,this.HighlightText,a);if(null==h)return;null!=h.SelectionStart&&(this.SelectionStart=h.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),null!=h.SelectionEnd&&(this.SelectionEnd=h.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))),1==h.SetSelection&&this.SetSelection(this.SelectionStart,this.SelectionEnd)}else{if(!this.IsImplementImeInput)return;if(this.ImeInput("ClickInput",void 0,a),this.ImeSelectTimes=0,this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder()){this.IsImplementImeInput=!1;var i=this.Text;this.MultiLine?(i=i.replace(/\r/g,"\\r"),i=i.replace(/\n/g,"\\n")):(i=i.replace(/\r\n/g,""),i=i.replace(/\r/g,""),i=i.replace(/\n/g,""));var j=this;window.setTimeout(function(){j.InternalSetText(i,!0)},0),this.Select()}}this.MouseButton=0,void 0==this.MouseUpPointerType&&(this.MouseUpHasValue=a.target.value.length>0),this.HandleClearButton(a)},a.prototype.MouseWheel=function(a){},a.prototype.ShouldCancelMouseWheelDefaultBehavior=function(){return!1},a.prototype.MouseOut=function(){if(1==this.IsMouseDown&&(4===this.MouseUpPointerType||void 0==this.MouseUpPointerType||"mouse"===this.MouseUpPointerType)){var a=Math.min(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),c=Math.max(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),d=this.GetText().Substring(a,c);
""!=d&&(this.SetSelection(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),b.Utility.DragDrop(this.InputElement)),this.IsMouseDown=!1}},a.prototype.DoubleClick=function(){this.PasswordMode||this.MultiLine||!this.EnableAutoComplete||this.ReadOnly||this._autoComplete.ShowDropdown();var a=this.UIProcess.TextBoxDoubleClick(this.InputElement,this.SelectionStart,this.GetText());return null!=a.SelectionStart&&(this.SelectionStart=a.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),null!=a.SelectionEnd&&(this.SelectionEnd=a.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd)),this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart)),1==a.SetSelection&&this.SetSelection(this.SelectionStart,this.SelectionEnd),!0},a.prototype.DragStart=function(a){this.PasswordMode?a.dataTransfer.effectAllowed="none":this.DragEdit=!0},a.prototype.DragEnd=function(){this.DragEdit=!0},a.prototype.DragEnter=function(){this.isTextEllipsis&&this.InternalDirectSetText(this.GetText())},a.prototype.DragLeave=function(){this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},a.prototype.MouseMove=function(a){},a.prototype.MouseOver=function(){var a=!(this.HasFocus||this.MultiLine||!this.OverflowTip);if(a){var c=this.InputElement,e=this.GetText();if(this.isTextEllipsis&&(e=this.Text),this.PasswordMode){for(var f="",g=0;g<e.GetLength();g++)f+=this.PasswordChar;e=f}var h=b.CoreUtility.MeasureText(e,c).Width;h>c.clientWidth?(this.ToolTip=d(this.InputElement.parentElement).wijtooltip({"content":e,"position":{"my":"left bottom","at":"left+1 top"}}),d(this.InputElement.parentElement).wijtooltip("show")):a=!1}a||this._destoryOverflowTip()},a.prototype._destoryOverflowTip=function(){null!=this.ToolTip&&(this.ToolTip=null,d(this.InputElement.parentElement).wijtooltip("destroy"))},a.prototype._isinsertGroup=function(a){return 0==a||2==a},a.prototype._isOverwriteGroup=function(a){return 1==a||3==a},a.prototype.InnerKeyPress=function(a,b,c){var d,e=a;this.ImeMode||this.isPasting?d=this.Text:(d=this._getInputValueWithPlaceHolder(),""!=d&&(d=this.GetText())),this.isPasting=!1;var f=this.SelectionStart,g=this.SelectionEnd;this.MultiLine||(f=this.DropDownEditData.SelectionStart,g=this.DropDownEditData.SelectionEnd);var h=this.UIProcess.TextBoxKeyPress(f,g,e,d,this.MaxLength,this.LengthAsByte,this.ExitOnLastChar,this.Overwrite,this.MultiLine,this.MaxLineCount,this.CountWrappedLine);if(null!=h.Text&&(h.DelInclude&&(this.BuffText=this.GetText(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),this.DirectSetText(h.Text,b),this.MultiLine||(this.DropDownEditData.Text=h.Text)),null!=h.SelectionStart&&(this.SelectionStart=h.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(h.Text,h.SelectionStart))),null!=h.SelectionEnd&&(this.SelectionEnd=h.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(h.Text,h.SelectionEnd))),1!=h.SetSelection||b||c||(this._isInnerKeyPressCall=!0,this.SetSelection(this.SelectionStart,this.SelectionEnd)),null!=h.EventInfo)for(var i=0;i<h.EventInfo.length;i++)null!=h.EventInfo[i]&&this.UIProcess.FireEvent(this,h.EventInfo[i].Name,h.EventInfo[i].Args,h.EventInfo[i].Type);return 1==h.SystemEdit?!0:!1},a.prototype._isSupportClipBoard=function(){if(!this.GetUseClipboard())return!0;if(b.CoreUtility.IsIE())return!0;if(b.CoreUtility.IsFireFox4OrLater())try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var a=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!a)return;var c=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!c)return;c.addDataFlavor("text/unicode"),a.getData(c,a.kGlobalClipboard);var d=new Object,e=new Object;try{c.getTransferData("text/unicode",d,e)}catch(f){return null}if(d&&(d=Components.interfaces.nsISupportsWString?d.value.QueryInterface(Components.interfaces.nsISupportsWString):Components.interfaces.nsISupportsString?d.value.QueryInterface(Components.interfaces.nsISupportsString):null),d)return d.data.substring(0,e.value/2)}catch(g){return!1}return!1},a.prototype.MSPointerUp=function(a){null!=a&&(this.MouseUpPointerType=a.pointerType,this.MouseUpHasValue=(a.srcElement||a.target).value.length>0)},a.prototype.CompositionStart=function(a){this.ImeMode=!0,this._lastCompositionText="",this._lastCompositionOffset=0,this._convertedOnLastUpdate=!1,this._cachedReadingString="",this._readingString="",this._compositionUpdateFired=!1},a.prototype.CompositionUpdate=function(a){if(this._compositionUpdateFired=!0,void 0!==a.originalEvent.data&&0!==a.originalEvent.data.length){var b=this.InputElement.selectionStart-a.originalEvent.data.length;if(b>this._lastCompositionOffset){if(!this._convertedOnLastUpdate){var c=this._lastCompositionText.substring(0,b-this._lastCompositionOffset);this.IsValidReadingString(c)?this._cachedReadingString+=c:this._cachedReadingString+=this._readingString,this._readingString="",this._convertedOnLastUpdate=!0}}else this._convertedOnLastUpdate&&(this._convertedOnLastUpdate=!1);this.IsValidReadingString(a.originalEvent.data)&&(this._readingString=a.originalEvent.data)}},a.prototype.CompositionEnd=function(a){var c=this.HasValidatedImeInput;this.ImeMode=!0,this.HasValidatedImeInput=!1;var d=this,e=function(){try{d.ImeInput("DirectInput",void 0,a)}finally{d.ImeMode=!1}};b.CoreUtility.IsIE9OrLater()?e():setTimeout(e,0),this._compositionUpdateFired||this.CompositionUpdate(a),this._convertedOnLastUpdate=!1;var f=this._cachedReadingString+this._readingString;this._cachedReadingString="",this._readingString="",0!==a.originalEvent.data.length&&0!==f.length&&(this.UpdateReadingIME(f),(b.CoreUtility.IPad&&b.CoreUtility.safari||b.CoreUtility.chrome&&"Android"===b.CoreUtility.GetClientOS())&&(this.HasValidatedImeInput=c,this.ImeMode=!1))},a.prototype.SelectStart=function(a){if(this.ImeMode)return!1;if(this.isLeftMouseButtonPressed){var b=this.UIProcess.SelectStart(this.InputElement,a,this.MultiLine);null!=b.SelectionStart&&(this.SelectionStart=b.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,b.SelectionStart))),null!=b.SelectionEnd&&(this.SelectionEnd=b.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,b.SelectionEnd)))}},a.prototype.DragDrop=function(a){if(!b.CoreUtility.IsIE()&&this.ReadOnly)return!1;this.FFDragFlag=!1,b.CoreUtility.IsIE()||(this.FFDragFlag=!0),b.CoreUtility.IsIE()||b.CoreUtility.safari||this.SetInnerFocus();var c=b.Utility.GetSelectionStartPosition(this.InputElement),d=c,e=this.UIProcess.DragDrop(a,this.ExitOnLastChar,c,d,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,this.GetText());if(null!=e){if(null!=e.DropText){var f,g;if(this.PasswordMode){var h=this.UIProcess.GetPasswordText(e.DropText,this.PasswordChar,this.MultiLine);b.CoreUtility.IsIE()?(window.event.dataTransfer.setData("Text",h),h!=window.event.dataTransfer.getData("Text")&&(f=this.GetText(),g=f+e.DropText,this.InternalSetText(g,!0),b.Utility.PreventDefault(window.event))):(f=this.GetText(),g=f+e.DropText,this.InternalSetText(g,!0,!0)),this.DropText=e.DropText}else if(b.CoreUtility.IsIE())if(event.dataTransfer.setData("Text",e.DropText),e.DropText!=event.dataTransfer.getData("Text"))f=this.GetText(),g=f+e.DropText,this.InternalSetText(g,!0),b.Utility.PreventDefault(event);else{var i=this;setTimeout(function(){var a=i.GetText();i.InternalSetText(a,!0)},0)}else f=this.GetText(),g=f+e.DropText,this.InternalSetText(g,!0,!0);this.DropEdit=!0}if(null!=e.EventInfo)for(var j=0;j<e.EventInfo.length;j++)null!=e.EventInfo[j]&&null!=e.EventInfo[j].Name&&(this.UIProcess.FireEvent(this,e.EventInfo[j].Name,e.EventInfo[j].Args,e.EventInfo[j].Type),e.EventInfo[j].Name==this.KeyExitEvent&&(this.FocusExit=!0));this.FFDragFlag=!1;var k=this,l=this.MultiLine,m=this.Ellipsis,n=this.EllipsisString,o=this.InputElement;return setTimeout(function(){k.InternalSetText(k.GetText()),k.DealEllipsis(l,m,n,o)},0),!0}},a.prototype.MSGestureTap=function(a){if(this.Focused&&!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly){var b=this;setTimeout(function(){b.Focused&&b._autoComplete.ShowDropdown()},400)}},a.prototype.MSPointerDown=function(a){if(this.Focused&&(a.pointerType===a.MSPOINTER_TYPE_TOUCH||"touch"===a.pointerType)&&!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly){var b=new MSGesture;b.target=a.target,b.addPointer(a.pointerId)}},a.prototype.GetShowLiterals=function(){return 1},a}();b.IMTextBox=k;var l=function(a){function c(c,d,e,f,g,h){a.call(this),this.isMulSelected=!1,this.isOverWrite=!1,this.ForwardSelection="None",this.isCtrlPress=!1,this.isCtrlClick=!1,this.isDblClick=!1,this.isTriClick=!1,this.isInputValid=!0,this.ctrlDelete=!1,this.ctrlBackspace=!1,this.IsDelInclude=!1,this.IsSerialDel=!1,this.StartPos=null,this.LastKey=null,this.keypressResponse=!1,this.systemEdit=!1,this.keyupResponse=!1,this.japInput=!1,this.inputJap=!1,this.IsKeyDown=!1,this.CurStart=0,this.CurEnd=0,this.control=h,this.Owner=h,this.Filter=new b.TextFilter(c,d),this.IsjQueryControl=g,this.PasswordMode=e,this.PasswordChar=f}return __extends(c,a),c.prototype.Reset=function(){this.Filter=new b.TextFilter(this.control.AutoConvert,this.control.Format),this.PasswordMode=this.control.PasswordMode,this.PasswordChar=this.control.GetPasswordChar()},c.prototype.TextBoxKeyDown=function(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){c.Ctrl?this.isCtrlPress=!0:this.isCtrlPress=!1;var z=new Object;switch(d){case 0:this.isOverWrite=!1;break;case 1:this.isOverWrite=!0;break;case 2:this.isOverWrite=!1;break;case 3:this.isOverWrite=!0}f!=g?this.isMulSelected=!0:this.isMulSelected=!1;var A;switch(x){case"Clear":return h||(z.SelectionStart=0,z.SelectionEnd=0,z.Text="",z.DelInclude=!0,this.IsDelInclude=!0),z;case"NextControl":return A=this.MoveControl(this.control.InputElement,!0,!1,"NextControl"),null!=A&&(z.EventInfo=new Array,z.EventInfo[0]=A.EventInfo,z.FocusType=A.FocusType,z.FocusExit=!0),z;case"PreviousControl":return A=this.MoveControl(this.control.InputElement,!1,!1,"PreviousControl"),null!=A&&(z.EventInfo=new Array,z.EventInfo[0]=A.EventInfo,z.FocusType=A.FocusType,z.FocusExit=!0),z}if(h&&131117!=a&&131139!=a&&9!=a&&65545!=a&&131081!=a&&196617!=a&&131137!=a&&37!=a&&39!=a&&38!=a&&40!=a)return z;var B;switch(a){case 131138:case 131140:case 131141:case 131144:case 131145:case 131148:case 131150:case 131154:case 131159:case 131188:case 262181:case 262183:case 117:case 65657:case 116:case 121:case 123:z.System=!0;break;case 45:var C;if(2===d)C=!1;else if(3===d)C=!0;else if(C=!e,""!=this.EditStatusChangedEvent&&null!=this.EditStatusChangedEvent){var D=new Object;D.Name=this.EditStatusChangedEvent,D.Args=null,D.Type="EditStatusChanged",z.EventInfo=new Array,z.EventInfo[0]=D}z.Overwrite=C;break;case 13:o&&s?(this.keypressResponse=!0,this.keyupResponse=!0,z.System=!0):o&&!s?(z.System=!1,z.IsDoPostBack=!0):(this.keypressResponse=!0,this.keyupResponse=!1,z.System=!0);break;case 131085:o&&(this.systemEdit=!0,this.keypressResponse=!0,this.keyupResponse=!0,z.System=!0);break;case 9:case 65545:o&&r&&!h?(this.keypressResponse=!0,z.InputTab=!0):(z.System=!0,A=new Object,""!=this.Owner.KeyExitEvent&&null!=this.Owner.KeyExitEvent&&(A.Name=this.Owner.KeyExitEvent,A.Args={"Key":9==a?1:2},A.Type="KeyExit"),z.EventInfo=new Array,z.EventInfo[0]=A,o&&(z.SelectionStart=q.GetLength(),z.SelectionEnd=q.GetLength()));break;case 131081:A=this.MoveControl(this.control.InputElement,!0,!1,"NextControl"),null!=A&&(z.EventInfo=new Array,z.EventInfo[0]=A.EventInfo,z.FocusType=A.FocusType,z.FocusExit=!0);break;case 196617:A=this.MoveControl(this.control.InputElement,!1,!1,"PreviousControl"),null!=A&&(z.EventInfo=new Array,z.EventInfo[0]=A.EventInfo,z.FocusType=A.FocusType,z.FocusExit=!0);break;case 8:case 65544:this.systemEdit=!0,this.keyupResponse=!0,this.DelOperation(a,f,g),z.DelInclude=!0,z.SerialDel=this.IsSerialDel,z.System=!0;break;case 46:this.systemEdit=!0,this.keyupResponse=!0,this.DelOperation(a,f,g),z.DelInclude=!0,z.SerialDel=this.IsSerialDel,z.System=!0;break;case 131080:case 196616:this.isMulSelected?(this.keyupResponse=!0,this.ctrlBackspace=!0):(this.systemEdit=!0,this.keyupResponse=!0,z.System=!0),this.DelOperation(a,f,g),z.SerialDel=this.IsSerialDel,z.DelInclude=!0;break;case 131118:this.keyupResponse=!0,z.System=!0,this.DelOperation(a,f,g),z.SerialDel=this.IsSerialDel,z.DelInclude=!0,z.KeyCode=39,this.ctrlDelete=!0;break;case 131139:case 131117:if(p)z.System=!1;else{var E;E=void 0===this.Owner?this.control:this.Owner,E._isSupportClipBoard()?this.Copy(q,f,g):z.System=!0}break;case 65581:case 131158:E=void 0===this.Owner?this.control:this.Owner,E._isSupportClipBoard()?z=this.TextBoxPaste(f,g,q,m,r,s,i,j,k,l,o):z.System=!0;break;case 131160:p?z.System=!1:(E=void 0===this.Owner?this.control:this.Owner,E._isSupportClipBoard()?z=this.Cut(q,f,g):z.System=!0);break;case 65582:f!=g?z=this.Cut(q,f,g):(this.systemEdit=!0,this.keyupResponse=!0,z.KeyCode=8),this.DelOperation(a,f,g),z.SerialDel=this.IsSerialDel,z.DelInclude=!0;break;case 131137:z=this.TextBoxSelectAll(q);break;case 131162:z=this.TextBoxUndo(q,t,u,v,w,f,g);break;case 65573:this.ForwardSelection="Left",z.System=!0,this.keyupResponse=!0;break;case 65575:this.ForwardSelection="Right",z.System=!0,this.keyupResponse=!0;break;case 65574:o?(this.ForwardSelection="Left",z.System=!0,this.keyupResponse=!0):(g>0&&(z.SelectionEnd=g-1),z.SetSelection=!0);break;case 65576:o?(this.ForwardSelection="Right",z.System=!0,this.keyupResponse=!0):(g<q.GetLength()&&(z.SelectionEnd=g+1),z.SetSelection=!0);break;case 65569:this.ForwardSelection="Left",z.System=!0,this.keyupResponse=!0;break;case 65570:this.ForwardSelection="Right",z.System=!0,this.keyupResponse=!0;break;case 196645:this.ForwardSelection="Left",z.System=!0,this.keyupResponse=!0;break;case 196647:this.ForwardSelection="Right",z.System=!0,this.keyupResponse=!0;break;case 65572:case 196644:this.ForwardSelection="Left",z.System=!0,this.keyupResponse=!0;break;case 65571:case 196643:this.ForwardSelection="Right",z.System=!0,this.keyupResponse=!0;break;case 37:case 131109:if(B=!1,this.IsKeyDown?B=!0:(this.IsKeyDown=!0,this.CurStart=f,this.CurEnd=g),B&&0===this.CurStart&&0==this.CurEnd&&(3===n||1===n)){var F=37===a?"Left":"CtrlLeft";A=this.MoveControl(this.control.InputElement,!1,!0,F),null!=A&&(z.EventInfo=new Array,z.EventInfo[0]=A.EventInfo,z.FocusType=A.FocusType,z.FocusExit=!0),this.IsKeyDown=!1;break}if(this.CurStart-=1,this.CurEnd=this.CurStart,0!==f||0!==g||3!==n&&1!==n)h||(this.keyupResponse=!0),z.System=!0;else{var F=37===a?"Left":"CtrlLeft";A=this.MoveControl(this.control.InputElement,!1,!0,F),null!=A&&(z.EventInfo=new Array,z.EventInfo[0]=A.EventInfo,z.FocusType=A.FocusType,z.FocusExit=!0)}break;case 39:case 131111:if(B=!1,this.IsKeyDown?B=!0:(this.IsKeyDown=!0,this.CurStart=f,this.CurEnd=g),B&&this.CurStart===q.GetLength()&&this.CurEnd===q.GetLength()&&(3===n||2===n)){var F=39==a?"Right":"CtrlRight";A=this.MoveControl(this.control.InputElement,!0,!0,F),null!=A&&(z.EventInfo=new Array,z.EventInfo[0]=A.EventInfo,z.FocusType=A.FocusType,z.FocusExit=!0),this.IsKeyDown=!1;break}if(this.CurStart+=1,this.CurEnd=this.CurStart,f!==q.GetLength()||g!==q.GetLength()||3!==n&&2!==n)h||(this.keyupResponse=!0),z.System=!0;else{var F=39==a?"Right":"CtrlRight";A=this.MoveControl(this.control.InputElement,!0,!0,F),null!=A&&(z.EventInfo=new Array,z.EventInfo[0]=A.EventInfo,z.FocusType=A.FocusType,z.FocusExit=!0)}break;case 33:case 131105:this.keyupResponse=!0,o?z.System=!0:z.System=!1;break;case 34:case 131106:this.keyupResponse=!0,o?z.System=!0:z.System=!1;break;case 38:h||(this.keyupResponse=!0),this.Owner.GetMultiLine()?z.System=!0:z.System=!1;break;case 40:h||(this.keyupResponse=!0),this.Owner.GetMultiLine()?z.System=!0:z.System=!1;break;case 131108:case 36:this.keyupResponse=!0,z.System=!0;break;case 131107:case 35:this.keyupResponse=!0,z.System=!0;break;case 131112:case 131110:this.keyupResponse=!0,z.System=!0;break;case 27:this.control.Clear();break;case 393266:case 393267:case 393268:case 393269:case 393271:case 393272:case 393273:case 393264:case 393403:case 393285:case 393442:case 393293:case 393402:this.keypressResponse=!0,z.System=!0}if(void 0!==a&&null!==a){if(a>=48&&57>=a||a>=65&&90>=a||a>=96&&105>=a||229==a||0==a||231==a)return this.keypressResponse=!0,null==z&&(z={}),z.System=!0,z.inputChar=!0,z;if(32==a||106==a||107==a||109==a||173==a&&b.CoreUtility.IsFireFox4OrLater()||110==a||111==a||219==a||220==a||221==a||222==a||a>=186&&192>=a||226==a||231==a)return this.keypressResponse=!0,z.System=!0,z;if(!b.CoreUtility.IsIE()&&(61===a||59===a))return this.keypressResponse=!0,z.System=!0,z;if(y.shiftKey)var G=a-65536;if(G>=48&&57>=G||G>=65&&90>=G||G>=96&&105>=G||229==G)return this.keypressResponse=!0,z.System=!0,z;if(32==G||106==G||107==G||109==G||173==a&&b.CoreUtility.IsFireFox4OrLater()||110==G||111==G||219==G||220==G||221==G||222==G||G>=186&&192>=G||226==G||231==G)return this.keypressResponse=!0,z.System=!0,z;if(!b.CoreUtility.IsIE()&&(61==G||59==G))return this.keypressResponse=!0,z.System=!0,z}return z},c.prototype.TextBoxKeyPress=function(a,c,e,f,g,h,i,j,k,l,m){if(1==this.keypressResponse){this.keypressResponse=!1,this.isInputValid=!0;var n=new Object,o=(new Object,"\r\n");(!b.CoreUtility.IsIE()||parseInt(d.browser.version)>=9)&&(o="\n");var p="";if("	"==e)p=e;else if("\r"==e||"\n"==e){if(!k)return n.SystemEdit=!0,n;p=o}else if(1==e.GetLength())p=this.Filter.Check(e);else{var q=this.Filter.CheckText(e);p=q.CheckedText,this.isInputValid=q.IsInputValid}if(a==c){if(0!=g){var r=g-this.GetLength(f,h);if(p==o)r<o.GetLength()&&0!=g&&(p="");else if(!j||j&&a==f.GetLength())p=g>this.GetLength(f,h)?this.MaxLengthCheck(p,r,h):"";else if(j){var s=f.Substring(0,a),t=f.Substring(a,f.GetLength()),u=t.IndexOf(o);-1!=u&&(s+=t.Substring(u,t.GetLength())),r=g-this.GetLength(s,h),p=this.MaxLengthCheck(p,r,h)}}}else{var v=f.Substring(Math.min(a,c),Math.max(a,c));if(0!=g){var r=g-this.GetLength(f,h)+this.GetLength(v,h);p==o?r<o.GetLength()&&(p=""):p=this.MaxLengthCheck(p,r,h)}}if(0!=l&&k)if(l>=this.GetLinesCount(f,m)){var w=f.Substring(0,a),x=f.Substring(c,f.GetLength());if(this.PasswordMode){w=this.GetPasswordText(w,this.PasswordChar,k),x=this.GetPasswordText(x,this.PasswordChar,k);var y=this.GetPasswordText(p,this.PasswordChar,k);y=this.MaxLineCheck(w,x,y,l,m),p=p.Substring(0,y.GetLength())}else p=this.MaxLineCheck(w,x,p,l,m)}else p="";""!=e&&""==p&&(this.isInputValid=!1);var z=f;if(j&&p!=o&&a==c){if(""!=p)if(a==f.GetLength())z=f+p;else if(a+o.GetLength()<=f.GetLength()&&f.Substring(a,a+o.GetLength())==o)z=f.Substring(0,a)+p+f.Substring(a,f.GetLength());else{var A;if(0!=g&&h){for(var B=p.GetLength(),C=f.Substring(a,a+B),D=this.GetLength(C,h),E=this.GetLength(p,h);E>D&&B<=f.GetLength();)B+=1,C=f.Substring(a,a+B),D=this.GetLength(C,h);A=f.Substring(a,a+B)}else A=f.Substring(a,a+p.GetLength());var u=A.IndexOf(o);z=-1!=u?f.Substring(0,a)+p+f.Substring(a+u,f.GetLength()):f.Substring(0,a)+p+f.Substring(a+A.GetLength(),f.GetLength())}}else{if(a>c){var F=a;a=c,c=F}a!=c&&(n.DelInclude=!0,this.IsDelInclude=!0),""!=p&&(z=f.Substring(0,a)+p+f.Substring(c,f.GetLength()))}if(n.Text=z,n.SetSelection=!0,(0!=this.isInputValid||p.GetLength()>0)&&(n.SelectionStart=a+p.GetLength(),n.SelectionEnd=n.SelectionStart),n.EventInfo=new Array,!this.isInputValid){this.isInputValid=!0;var q=new Object;q.Name=this.control.InvalidInputEvent,q.Args=e,q.Type="invalidInput",n.EventInfo[0]=q}if(null!=n.Text&&i&&0!=g){var G=this.GetLength(n.Text.Substring(0,n.SelectionStart),h);if(G==g&&""!=p){var q=this.MoveControl(this.control.InputElement,!0,!1,"CharInput");null!=q&&(n.EventInfo[1]=q.EventInfo,n.FocusType=q.FocusType,n.FocusExit=!0,n.SetSelection=!1)}}return n}return!1},c.prototype.TextBoxKeyUp=function(a,c,d,e,f){var g=new Object;if(this.IsKeyDown=!1,g.SelectionStart=b.Utility.GetSelectionStartPosition(a),g.SelectionEnd=g.SelectionStart+b.Utility.GetSelectionText(this.control.InputElement).GetLength(),1==this.systemEdit&&(this.systemEdit=!1,g.SystemEdit=!0),this.ctrlDelete||this.ctrlBackspace){var h;this.ctrlDelete?(h=g.SelectionStart,this.ctrlDelete=!1):this.ctrlBackspace&&(h=e,this.ctrlBackspace=!1),g.Text=f.Substring(0,d)+f.Substring(h,f.GetLength()),g.SelectionStart=g.SelectionEnd=d,g.SetSelection=!0}return g},c.prototype.TextBoxMouseDown=function(a,b){return this.isFocusing=!1,new Object},c.prototype.TextBoxMouseUp=function(a,c,d,e,f,g,h,i,j){var k=new Object;if(this.isFocusing&&(this.isFocusing=!1,i))return k;if(0==e){if(this.isDblClick&&!b.Utility.GrapeCityTimeout)if(this.isDblClick=!1,this.isTriClick=!0,f){var l=b.Utility.GetSelectionStartPosition(a),m=this.GetLineEnds(l,g);null!=m.start&&(k.SelectionStart=m.start),null!=m.end&&(k.SelectionEnd=m.end)}else k.SelectionStart=0,k.SelectionEnd=g.GetLength();else""==b.Utility.GetSelectionText(this.control.InputElement)&&f?""==b.Utility.GetSelectionText(this.control.InputElement)?(k.SelectionStart=b.Utility.GetSelectionStartPosition(a),k.SelectionEnd=k.SelectionStart+b.Utility.GetSelectionText(this.control.InputElement).GetLength()):(k.SelectionStart=b.Utility.GetSelectionStartPosition(a),document.selection&&j.y<document.selection.createRange().offsetTop&&(k.SelectionStart-=2),k.SelectionEnd=k.SelectionStart):(k.SelectionStart=b.Utility.GetSelectionStartPosition(a),k.SelectionEnd=k.SelectionStart+b.Utility.GetSelectionText(this.control.InputElement).GetLength());if(!b.CoreUtility.IsIE()&&b.Utility.FuncKeysPressed.Ctrl)if(f){var l=b.Utility.GetSelectionStartPosition(a),m=this.GetLineEnds(l,g);null!=m.start&&(k.SelectionStart=m.start),null!=m.end&&(k.SelectionEnd=m.end)}else k.SelectionStart=0,k.SelectionEnd=g.GetLength();k.SelectionStart!=k.SelectionEnd&&(k.SetSelection=!0)}return k},c.prototype.GetLineEnds=function(a,c){var e=c,f=0,g="\r\n";(!b.CoreUtility.IsIE()||parseInt(d.browser.version)>=9)&&(g="\n");for(var h=e.IndexOf(g),i=new Object;-1!=h;){if(a>=f&&a<f+h+g.GetLength())return i.start=f,i.end=f+h,i;f=f+h+g.GetLength(),e=e.Substring(h+g.GetLength(),e.GetLength()),h=e.IndexOf(g)}return i.start=f,i.end=c.GetLength(),i},c.prototype.ShowContextMenu=function(a,c){var d=new Object;return d.SelectionStart=b.Utility.GetSelectionStartPosition(a),d.SelectionEnd=d.SelectionStart+b.Utility.GetSelectionText(this.control.InputElement).GetLength(),d},c.prototype.TextBoxDoubleClick=function(a,c,d){this.isDblClick=!0,b.Utility.GrapeCityTimeout=!1,window.setTimeout(function(){b.Utility.GrapeCityTimeout=!0},500);var e=new Object;return e.SelectionStart=b.Utility.GetSelectionStartPosition(a),e.SelectionEnd=e.SelectionStart+b.Utility.GetSelectionText(this.control.InputElement).GetLength(),e},c.prototype.SelectStart=function(a,c,d){this.isTriClick&&(this.isTriClick=!1);var e=new Object;return e.SelectionStart=b.Utility.GetSelectionStartPosition(a),e.SelectionEnd=e.SelectionStart,e},c.prototype.Copy=function(a,c,d){if(c!=d){if(c>d){var e=c;c=d,d=e}var f=a.Substring(c,d),g=!0;this.Owner&&(this.Owner.MultiLine===!1&&(f=b.BaseUIProcess.UpdateCrLfString(f,this.Owner.AcceptsCrLf)),g=this.Owner.UseClipboard),b.CoreUtility.IsIE()?b.Utility.SetCopy(f,g):b.Utility.SetCopy(f,!1)}},c.prototype.TextBoxPaste=function(a,c,d,e,f,g,h,i,j,k,l,m,n){this.isInputValid=!0;var o=new Object,p=this.Owner?this.Owner.UseClipboard:!0;b.CoreUtility.IsIE()||(p=!1);var q=null==m?b.Utility.GetPasteData(p):m;if(b.CoreUtility.chrome&&(q=q.replace(/\r\n/g,"\n")),!n&&this.Owner&&this.Owner.MultiLine===!1&&(q=b.BaseUIProcess.UpdateCrLfString(q,this.Owner.AcceptsCrLf)),b.CoreUtility.IsIE9OrLater()&&this.Owner&&this.Owner.MultiLine===!0&&(q=b.BaseUIProcess.FilterReturnChar(q)),null==q)return o;this.FireClientEvent("OnBeforePaste");var r,s=this.FormatCheck(q,f,g),t=s;if(0!=h){var u=this.GetLength(d.Substring(Math.min(a,c),Math.max(a,c)),i);r=h-this.GetLength(d,i)+u,t=this.MaxLengthCheck(s,r,i)}if(0!=j&&l)if(j>=this.GetLinesCount(d,k)){var v=d.Substring(0,a),w=d.Substring(c,d.GetLength());if(this.PasswordMode){v=this.GetPasswordText(v,this.PasswordChar,l),w=this.GetPasswordText(w,this.PasswordChar,l);var x=this.GetPasswordText(t,this.PasswordChar,l);x=this.MaxLineCheck(v,w,x,j,k),t=t.Substring(0,x.GetLength())}else t=this.MaxLineCheck(v,w,t,j,k)}else t="";var y=Math.min(a,c),z=Math.max(a,c);if((""!=t||n===!0)&&(o.Text=d.Substring(0,y)+t+d.Substring(z,d.GetLength()),o.SelectionStart=y+t.GetLength(),o.SelectionEnd=o.SelectionStart),o.SetSelection=!0,a!=c&&(o.DelInclude=!0,this.IsDelInclude=!0),o.EventInfo=new Array,!this.isInputValid){this.isInputValid=!0;var A=new Object;A.Name=this.control.InvalidInputEvent,A.Args=q,A.Type="invalidInput",o.EventInfo[0]=A}if(null!=o.Text)var B=this.GetLength(o.Text.Substring(0,o.SelectionStart),i);else var B=0;if(0!=h&&B==h&&e&&""!=t){var A=this.MoveControl(this.control.InputElement,!0,!1,"CharInput");null!=A&&(o.EventInfo[1]=A.EventInfo,o.FocusType=A.FocusType,o.FocusExit=!0,o.SetSelection=!1)}return this.FireClientEvent("OnPaste"),o},c.prototype.Cut=function(a,b,c){var d=new Object;return b!=c&&this.FireClientEvent("OnBeforeCut"),this.Copy(a,b,c),c>b?(d.SelectionStart=b,d.Text=a.Substring(0,b)+a.Substring(c,a.GetLength())):(d.SelectionStart=c,d.Text=a.Substring(0,c)+a.Substring(b,a.GetLength())),d.SelectionEnd=d.SelectionStart,d.SetSelection=!0,d.Text!=a&&(d.DelInclude=!0,this.IsDelInclude=!0),b!=c&&this.FireClientEvent("OnCut"),d},c.prototype.TextBoxUndo=function(a,b,c,d,e,f,g){var h=new Object;return this.IsDelInclude?a!=b&&(h.Text=b,h.SelectionStart=f,h.SelectionEnd=g,h.SetSelection=!0,h.DelInclude=!0,h.Undo=!0):a!=c&&(h.Text=c,h.SelectionStart=d,h.SelectionEnd=e,h.SetSelection=!0,h.Undo=!0),this.StartPos=null,this.LastKey=null,h},c.prototype.Delete=function(a,b,c,d){var e=new Object;return d>c?(e.SelectionStart=c,e.Text=b.Substring(0,c)+b.Substring(d,b.GetLength())):(e.SelectionStart=d,e.Text=b.Substring(0,d)+b.Substring(c,b.GetLength())),e.SelectionEnd=e.SelectionStart,e.SetSelection=!0,e.Text!=b&&(e.DelInclude=!0,this.IsDelInclude=!0),e},c.prototype.TextBoxSelectAll=function(a){var b=new Object;return b.SelectionStart=0,b.SelectionEnd=a.GetLength(),b.SetSelection=!0,b},c.prototype.DragDrop=function(a,b,c,d,e,f,g,h,i,j){this.isInputValid=!0;var k=new Object,l=this.FormatCheck(a),m=l,n=0;if(0!=e&&(n=e-this.GetLength(j,f),m=this.MaxLengthCheck(l,n,f)),0!=g&&i)if(g>=this.GetLinesCount(j,h)){var o=j.Substring(0,c),p=j.Substring(d,j.GetLength());if(this.PasswordMode){o=this.GetPasswordText(o,this.PasswordChar,i),p=this.GetPasswordText(p,this.PasswordChar,i);var q=this.GetPasswordText(m,this.PasswordChar,i);q=this.MaxLineCheck(o,p,q,g,h),m=q.Substring(0,m.GetLength())}else m=this.MaxLineCheck(o,p,m,g,h)}else m="";if(k.DropText=m,k.EventInfo=new Array,!this.isInputValid){this.isInputValid=!0;var r=new Object;r.Name=this.control.InvalidInputEvent,r.Args=l,r.Type="invalidInput",k.EventInfo[0]=r}if(this.GetLength(l,f)>=n&&0!=e&&b&&""!=m){var r=new Object;""!=this.Owner.KeyExitEvent&&null!=this.Owner.KeyExitEvent&&(r.Name=this.Owner.KeyExitEvent,r.Args=new Object,r.Args.Key=9,r.Type="KeyExit"),k.EventInfo[1]=r}return k},c.prototype.TextBoxFocus=function(a,c,d,e,f,g){var h=new Object;return this.isFocusing=!0,9===a?(h.SelectionStart=0,h.SelectionEnd=0):10===a&&(h.SelectionStart=d.GetLength(),h.SelectionEnd=d.GetLength()),f?g||(h.SelectionStart=0,h.SelectionEnd=d.GetLength()):(1===a||11==a)&&(h.SelectionStart=b.Utility.GetSelectionStartPosition(c),h.SelectionEnd=h.SelectionStart+b.Utility.GetSelectionText(this.control.InputElement).GetLength()),(1!==a||f)&&(h.SetSelection=!0),h},c.prototype.MaxLengthCheck=function(a,b,c){var d="",e=0;if("\r\n"==a)b>=2&&(d=a);else if(c)for(var f=0;f<a.GetLength();f++){var g=a.Substring(f,f+1);if(g.length>=2?e+=2*g.length:this.Filter.IsFullWidth(g)?e+=2:e++,!(b>=e))break;d+=a.Substring(f,f+1)}else d=a.GetLength()<=b?a:a.Substring(0,b);var h=d.GetLength();return 0!=h&&"\r"==d.Substring(h-1,h)&&(d=d.Substring(0,h-1)),d!=a&&(this.isInputValid=!1),d},c.prototype.MaxLineCheck=function(a,b,c,d,e){var f="",g=a+c+b,h=this.GetLinesCount(g,e);if(d>=h)f=c;else{var i=0,j=c.GetLength();do{var k=Math.floor((i+j)/2),l=c.Substring(0,k);if(g=a+l+b,h=this.GetLinesCount(g,e),h>d)j=k;else if(d>h)i=k;else if(h==d&&j>i+1)i=k;else if(h==d&&j==i+1)break}while(j>i);f=c.Substring(0,i)}return f!=c&&(this.isInputValid=!1),f},c.prototype.GetLinesCount=function(a,b){var c=1,e=b;if(""==a)return c;var f=this._testTextArea;if((void 0===this._testTextArea||null===this._testTextArea)&&(this._testTextArea=d("<textarea/>"),this._testTextArea.css("visibility","hidden"),this._testTextArea.css("position","absolute"),this._testTextArea.css("left","-100000000px"),this._testTextArea.css("top","-100000000px"),this._testTextArea.attr("rows",1),this._testTextArea.appendTo(d(document.body)),f=this._testTextArea,e=!1),!e){var g=a,h=g,i=g.IndexOf("\r\n");for(c=1;-1!=i;)h=h.replace("\r\n",""),c+=1,g=g.Substring(i+2,g.GetLength()),i=g.IndexOf("\r\n");for(g=h,i=g.IndexOf("\r");-1!=i;)h=h.replace("\r",""),c+=1,g=g.Substring(i+1,g.GetLength()),i=g.IndexOf("\r");for(g=h,i=g.IndexOf("\n");-1!=i;)h=h.replace("\n",""),c+=1,g=g.Substring(i+1,g.GetLength()),i=g.IndexOf("\n");return c}var j=a;j=j.replace(/\r\n/g,"\r"),j=j.replace(/\n/g,"\r");var i=j.IndexOf("\r");if(-1!=i){c=0;var k=j.Substring(0,i);return c+=this.GetLinesCount(k,b),j=j.Substring(i+1,j.GetLength()),c+=this.GetLinesCount(j,b)}var l=d(this.control.InputElement);if(f.css("fontSize",l.css("fontSize")),f.css("fontFamily",l.css("fontFamily")),f.css("width",l.css("width")),f.css("borderWidth",l.css("borderWidth")),f.css("padding",l.css("padding")),f.css("wordWrap",l.css("wordWrap")),f.css("overflowY",l.css("overflowY")),null!=f){for(f.val(a),f=f.get(0);f.scrollHeight-f.clientHeight>1;)f.rows++;return f.scrollTop=0,c=f.rows,f.rows>1&&(f.rows=1),c}},c.prototype.FormatCheck=function(a,b,c){this.Owner&&!this.Owner.MultiLine&&a&&("string"!=typeof a&&(a=a.toString()),a=a.replace(/[\r\n]/g,""));var d=this.Filter.CheckText(a),e=d.CheckedText;return this.isInputValid=d.IsInputValid,e},c.prototype.ListValidateCheck=function(a){var b=this.Filter.autoConvert;this.Filter.autoConvert=!1;var c=this.Filter.CheckText(a);return this.Filter.autoConvert=b,c.IsInputValid},c.prototype.GetLength=function(a,b){var c=0;if(b)for(var d=0;d<a.GetLength();d++){var e=a.Substring(d,d+1);e.length>=2?c+=2*e.length:this.Filter.IsFullWidth(e)?c+=2:c++}else c=a.GetLength();return c},c.prototype.TextBoxProcessBackSpace=function(a,b,c,d){var e=new Object;return this.systemEdit=!0,this.keyupResponse=!0,e.System=!0,e},c.prototype.GetRightWordPosition=function(a,b){if(a<b.GetLength()){for(var c=a,d=b.Substring(a,a+1),e=d;(!this.Filter.IsFormatSpace(e)||this.Filter.IsFormatSpace(d))&&("\r"!=d&&"\n"!=e||a==c)&&("	"!=d&&"	"!=e||a==c)&&(c+=1,c<b.GetLength());)e=d,d=b.Substring(c,c+1);return c}return a},c.prototype.DelOperation=function(a,b,c){this.IsDelInclude=!0;var d=Math.abs(c-b);switch(a){case 8:var e=!1;if(this.IsKeyDown?e=!0:(this.IsKeyDown=!0,this.CurStart=b-1),e){this.IsSerialDel=!0;break}if(this.CurStart==this.StartPos&&(this.IsSerialDel=!0,this.CurStart-=1),b!=c){if(b<this.StartPos)this.StartPos-=d;else if(b==this.StartPos){this.IsSerialDel=!0,this.StartPos=b;break}}else if(b==this.StartPos){this.IsSerialDel=!0,this.StartPos=b-1;break}b-=1,this.StartPos==b?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=b-1;break;case 131080:case 196616:if(b==c)b-=1;else if(b<this.StartPos)this.StartPos-=d;else if(b==this.StartPos){this.IsSerialDel=!0,this.StartPos=b-1;break}this.StartPos==b?this.IsSerialDel=!0:this.IsSerialDel=!1,
this.StartPos=b-1;break;case 65544:b!=c&&b<this.StartPos&&(this.StartPos-=d),this.StartPos==b?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=b-1;break;case 65582:if(b==c)b-=1;else if(b<this.StartPos)this.StartPos-=d;else if(b==this.StartPos){this.IsSerialDel=!0,this.StartPos=b;break}this.StartPos==b||this.StartPos==c?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=b-1;break;case 46:var f=null;if(8==this.LastKey&&(f=b,b-=1),this.StartPos==b||null!=this.StartPos&&1==Math.abs(this.StartPos-b)||this.StartPos==c)this.IsSerialDel=!0;else if(this.IsSerialDel=!1,null!=f){this.StartPos=f;break}this.StartPos=b;break;case 131118:if(b!=c)if(b<this.StartPos)this.StartPos-=d;else if(b==this.StartPos){this.IsSerialDel=!0,this.StartPos=b;break}b-=1,this.StartPos==b||b-this.StartPos==1?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=b}this.LastKey=a},c.prototype.GetPasswordText=function(a,b,c){for(var d="",e=0;e<a.GetLength();e++){var f=a.Substring(e,e+1);"\r"!=f&&"\n"!=f?d+=b:c&&(d+=f)}return d},c}(b.BaseUIProcess);b.GcTextBoxUIProcess=l;var m=function(){function a(a){this._hightlightIndex=-1,this._dataList=[],this._isDeleteItem=!1,this._isFocusOnList=!1,this._isMouseOnList=!1,this._owner=a;var b=5;this._maxItems=b,this._firstItemShowing=0,this._lastItemShowing=b-1,this._refreshElement(),this._createDropdown()}return a.prototype._refreshElement=function(){this._controlContainer=this._owner.GetContainer(),this._inputElement=this._owner.GetJQueryInputElement(),this._maxItems=this._owner.GetMaxHistoryCount(),this._inputElement&&this._inputElement.attr("autocomplete","off")},a.prototype._createDropdown=function(){var a=d("<div>");a.css({"position":"absolute","zIndex":"999999","display":"none","backgroundColor":"white","border":"solid 1px black","overflowX":"hidden","overflowY":"auto"});var b=this;a.bind("focus",function(){b._isFocusOnList=!0,a.blur(),b._owner.SetInnerFocus(2)}),a.bind("mouseover",function(){b._isMouseOnList=!0}),a.bind("mouseout",function(){b._isMouseOnList=!1}),a.bind("contextmenu",function(a){a.preventDefault()}),this._dropDownElement=a},a.prototype.GetIsDeleteItem=function(){return this._isDeleteItem},a.prototype.SetIsDeleteItem=function(a){this._isDeleteItem=a},a.prototype.GetIsFocusOnList=function(){return this._isFocusOnList},a.prototype.SetIsFocusOnList=function(a){this._isFocusOnList=a},a.prototype.GetIsMouseOnList=function(){return this._isMouseOnList},a.prototype.ShowDropdown=function(){this._refreshElement(),this.IsVisible()&&this.HideDropdown(),this._dropDownElement.empty();var a;if(a=this._addDisplayItems(),0!==a){var c=b.Utility.GetElementPosition(this._controlContainer.get(0)).Left,e=b.Utility.GetElementPosition(this._controlContainer.get(0)).Top+this._controlContainer.outerHeight(),f=this._controlContainer.outerWidth(),g="";if(a>this._maxItems){var h=b.CoreUtility.MeasureText("WHQ",this._dropDownElement.get(0).firstChild).Height;g=this._maxItems*(h+2)+"px"}var i="";1==b.Utility.IsTouchMouseDown&&(i=this._owner.GetTouchDropDownScale()+""),f-=2,this._dropDownElement.css("left",c+"px"),this._dropDownElement.css("top",e+"px"),this._dropDownElement.css("width",f+"px"),this._dropDownElement.css("display",""),b.Utility.SetZoomStyle(this._dropDownElement,i),this._dropDownElement.css("height",g),d("body").append(this._dropDownElement);var j=this;this._docClickListerner=function(){j.HideDropdown()},d(document).bind("click",this._docClickListerner)}},a.prototype._addDisplayItems=function(){for(var a=this._inputElement.val(),c=[],e=0;e<this._dataList.length;++e)this._dataList[e].substr(0,a.GetLength())==a&&this._dataList[e].GetLength()>a.GetLength()&&c.push(this._dataList[e]);var f=this,g=c.length>this._maxItems?this._maxItems:c.length;for(e=0;g>e;++e){var h=d("<div>");h.attr("index",e),h.css({"fontFamily":b.Utility.GetOSDefaultFontFamily(),"fontSize":"10pt","whiteSpace":"nowrap","padding":"1px"}),h.bind("mouseover",function(a){var b=a.target||a.srcElement;f.HighlightItem(parseInt(b.getAttribute("index").toString()))}),h.bind("click",function(){f._isFocusOnList=!1,f.SetValue(),f.HideDropdown()}),h.html(b.Utility.EncodingToHTML(c[e])),this._dropDownElement.append(h)}return g},a.prototype.HideDropdown=function(){this.IsVisible()&&(this._dropDownElement.remove(),this._dropDownElement.css("display","none"),d("document").unbind("click",this._docClickListerner),this._dropDownElement.empty(),this._isMouseOnList=!1,this._hightlightIndex=-1)},a.prototype.SetDataList=function(a){(null===a||void 0===a)&&(a=[]),this._dataList=a},a.prototype.IsDataListEmpty=function(){return 0===this._dataList.length},a.prototype.HighlightItem=function(a){this.SetHighlighItem(a)},a.prototype.SetHighlighItem=function(a){var b=this._dropDownElement.get(0).childNodes[this._hightlightIndex];-1!==this._hightlightIndex&&(b.style.backgroundColor="",b.style.color=""),this._hightlightIndex=a,-1!==this._hightlightIndex&&(b.style.color="white")},a.prototype.Highlight=function(a){var b=!1;if(a>0&&this._hightlightIndex==this._dropDownElement.get(0).childNodes.length-1?(this.SetHighlighItem(-1),b=!0):0>a&&0==this._hightlightIndex&&(this.SetHighlighItem(-1),b=!0),-1===this._hightlightIndex)0==b&&(a>0&&this.SetHighlighItem(0),0>a&&this.SetHighlighItem(this._dropDownElement.get(0).childNodes.length-1));else{var c;a>1&&this._firstItemShowing+this._maxItems-1!==this._hightlightIndex&&(a=this._firstItemShowing+this._maxItems-this._hightlightIndex),-1>a&&this._firstItemShowing!=this._hightlightIndex&&(a=this._firstItemShowing-this._hightlightIndex),c=a>0?this._hightlightIndex+a>=this._dropDownElement.get(0).childNodes.length?this._dropDownElement.get(0).childNodes.length-1:this._hightlightIndex+a:this._hightlightIndex+a<0?0:this._hightlightIndex+a,a>1&&(c-=1),this.SetHighlighItem(c)}},a.prototype.SetValue=function(){var a=this._dropDownElement.get(0).childNodes[this._hightlightIndex],c=a.innerHTML;c=b.Utility.DecodingFromHTML(c),this._owner.InternalSetText(c,!0),this._owner.SetInnerFocus(2);var d=this._inputElement.val().GetLength(),e=Math.abs(this._owner.SelectionEnd-this._owner.SelectionStart);0!=e?this._owner.InternalSetSelection(0,d):this._owner.InternalSetSelection(d,d)},a.prototype.ScrollCheck=function(){if(-1!==this._hightlightIndex){this._hightlightIndex>this._lastItemShowing&&(this._firstItemShowing=this._hightlightIndex-(this._maxItems-1),this._lastItemShowing=this._hightlightIndex),this._hightlightIndex<this._firstItemShowing&&(this._firstItemShowing=this._hightlightIndex,this._lastItemShowing=this._hightlightIndex+(this._maxItems-1));var a=b.CoreUtility.MeasureText("WQH",this._dropDownElement.get(0).firstChild).Height+2;this._dropDownElement.get(0).scrollTop=this._firstItemShowing*a}},a.prototype.KeyDown=function(a){var c=a.keyCode,d={"Shift":!1,"Ctrl":!1,"Alt":!1};a.shiftKey&&(d.Shift=!0),a.ctrlKey&&(d.Ctrl=!0),a.altKey&&(d.Alt=!0);b.Key;switch(c){case 13:if(-1!==this._hightlightIndex)return this.SetValue(),this.HideDropdown(),a.stopPropagation(),a.preventDefault(),!1;break;case 46:if(-1!==this._hightlightIndex){var e=this._dropDownElement.get(0).childNodes[this._hightlightIndex],f=e.innerHTML;return this.HideDropdown(),this._owner.DeleteItem(f),this._isDeleteItem=!0,this._inputElement.focus(),this.IsVisible()||this.ShowDropdown(),a.stopPropagation(),a.preventDefault(),!1}break;case 27:this.HideDropdown(),a.stopPropagation(),a.preventDefault();break;case 38:if(d.Alt)break;return this.IsVisible()?(-1===this._hightlightIndex&&this.ShowDropdown(),this.Highlight(-1),this.ScrollCheck()):this.ShowDropdown(),!1;case 33:return this.IsVisible()?(-1===this._hightlightIndex&&this.ShowDropdown(),this.Highlight(-1*this._maxItems),this.ScrollCheck()):this.ShowDropdown(),!1;case 9:this.HideDropdown();break;case 40:if(d.Alt)break;return this.IsVisible()?(this.Highlight(1),this.ScrollCheck()):this.ShowDropdown(),!1;case 34:return this.IsVisible()?(this.Highlight(this._maxItems),this.ScrollCheck()):this.ShowDropdown(),!1}},a.prototype.KeyUp=function(a,c){if(c===!0)return void this.ShowDropdown();var d=a.keyCode;b.Key;switch(d){case 13:break;case 27:this.HideDropdown();break;case 38:case 40:break;default:this.ShowDropdown()}},a.prototype.IsVisible=function(){return""===this._dropDownElement.css("display")},a}();b.AutoComplete=m}(a.input||(a.input={}));a.input}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";function c(a,b){var c=d.extend(!0,{},a,b);return delete c.constructor,c}var d=jQuery;b.extendWidgetOptions=c;var e=function(c){function e(){c.apply(this,arguments),this.mDataOffset=0,this.mRowOuterHeight=-1,this._windowResizeTimer=0,this.mEditSkechRowIndex=-1,this.mCurrentCellLocker=!1}return __extends(e,c),e.prototype._createWidget=function(b,d){var e=b&&a.data.util.isClassInstance(b.data)&&!("function"==typeof wijdatasource&&b.data instanceof wijdatasource)&&b.data;e&&(b._lateBindingFlag=!0,delete b.data),c.prototype._createWidget.apply(this,arguments),e&&(delete b._lateBindingFlag,b.data=e,this.option("data",e))},e.prototype._create=function(){var b=this;if(!this.element.is("table"))throw"invalid markup";this.mAdjustHeaderText=!0,this.mSplitDistanceX=0,this.mSplitDistanceY=0,this.mCurrentCellLocker=!1,this._windowResizeTimer=0,this.mDataOffset=0,this.mScrollingState={"x":null,"y":null,"index":0},this.mRowOuterHeight=-1,this._initialized=!1,this.mDestroyed=!1,this._rendered=!1,this._eventUID=void 0,this.mDataViewWrapper=void 0,this._originalHtml=void 0,this._originalAttr=void 0,this._originalCssText=void 0,this.mAutoHeight=void 0,this._autoWidth=void 0,this.mRenderCounter=0,this.mSuperPanelHeader=void 0,this.mTopPagerDiv=void 0,this.mBottomPagerDiv=void 0,this.$groupArea=void 0,this.__uid=void 0,this.mWijDataView=void 0,this.mOuterDiv=void 0,this.mSketchTable=void 0,this.mCellFormatter=void 0,this.mRowStyleFormatter=void 0,this.mCellStyleFormatter=void 0,this._eventUID=a.grid.getUID(),this._spinnerActivated=!1,this.mDeficientFilters={};var c="data"in this.options,e=c&&this.options.data;c&&delete this.options.data,this.options=d.extend(!0,{},this.options),d.isFunction(window.wijmoASPNetParseOptions)&&window.wijmoASPNetParseOptions(this.options),c&&(this.options.data=e),window.wijmoApplyWijTouchUtilEvents&&(d=window.wijmoApplyWijTouchUtilEvents(d)),this._initialized=!1,this.mDestroyed=!1,this.mClosestCulture=d.wijGetCulture(this.options.culture,this.options.cultureCalendar),this.mDataViewWrapper=new a.grid.dataViewWrapper(this),this._originalHtml=this.element.html(),this._originalAttr={},this._originalCssText=this.element[0].style.cssText,this.element.addClass(a.grid.wijgrid.CSS.root),this.element.wrap('<div class="'+this.options.wijCSS.widget+" "+a.grid.wijgrid.CSS.wijgrid+" "+this.options.wijCSS.wijgrid+" "+this.options.wijCSS.content+" "+this.options.wijCSS.cornerAll+'"></div>'),this.mOuterDiv=this.element.parent();var f=this.element[0].style.height,g=this.element[0].style.width;f&&this.mOuterDiv.css("height",f),this.mAutoHeight=""==f||"auto"==f,g&&this.mOuterDiv.css("width",this.element[0].style.width),this._autoWidth=""==g||"auto"==g,this.element.css({"height":"","width":""}),this.options.disabled&&this.disable(),this.mCellFormatter=new a.grid.cellFormatterHelper,this.mRowStyleFormatter=new a.grid.rowStyleFormatterHelper(this),this.mCellStyleFormatter=new a.grid.cellStyleFormatterHelper(this),this._viewPortBounds({"start":0,"end":0}),this._allowVirtualScrolling()&&(this._viewPortBounds().start=this.mScrollingState.index,this._serverSideVirtualScrolling()&&(this.mDataOffset=this.mScrollingState.index)),this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(a){b._initialized&&!b.mDestroyed&&a.target!==b.mOuterDiv[0]&&b.setSize()},"wijgrid"),this._winOrientation=a.grid.getWindowOrientation(),this.mRenderCounter=0},e.prototype._destroy=function(){var b=this;try{this._view().dispose(),this._detachEvents(!0),this._resizerui&&(this._resizerui.dispose(),this._resizerui=null),this._frozenerui&&(this._frozenerui.dispose(),this._frozenerui=null),this._selectionui&&(this._selectionui.dispose(),this._selectionui=null),this._dragndropui&&(this._dragndropui.dispose(),this._dragndropui=null),this.mDataViewWrapper.dispose(),this.mCellFormatter&&(this.mCellFormatter.dispose(),this.mCellFormatter=null),a.grid.remove$dataByPrefix(this.element,this.mDataPrefix),this.element.wijRemoveVisibilityObserver&&this.element.wijRemoveVisibilityObserver(),this.element.insertBefore(this.mOuterDiv),this.mOuterDiv.remove(),this.element.html(this._originalHtml),d.each(this._originalAttr,function(a,c){void 0===c?b.element.removeAttr(a):b.element.attr(a,c)}),this.element.removeClass(a.grid.wijgrid.CSS.root),this.element[0].style.cssText=this._originalCssText}finally{this.mDestroyed=!0}},e.prototype._init=function(){this.mSuperPanelHeader=null,this.mTopPagerDiv=null,this.mBottomPagerDiv=null,this.$groupArea=null,this._prevHoveredSketchRowIndex=-1,this.mClosestCulture=d.wijGetCulture(this.options.culture,this.options.cultureCalendar),this.options.data||(this.mTHead||(this.mTHead=a.grid.readTableSection(this.element,1)),this.mTFoot||(this.mTFoot=a.grid.readTableSection(this.element,3))),this._initialized=this._initialized||!1,this.ensureControl(!0)},e.prototype._setOption=function(a,b){var d,e,f=this["_preset_"+a],g=this.options[a];void 0!==f&&(b=f.apply(this,[b,g])),d=b!==g||"columns"===a.toLowerCase(),c.prototype._setOption.apply(this,[a,b]),d&&(e=this["_postset_"+a],void 0!==e&&e.apply(this,[b,g]))},e.prototype.columns=function(){return this.mVisibleLeaves||[]},e.prototype._setColumns=function(a){this.mVisibleLeaves=a},e.prototype.currentCell=function(b,c,d){var e,f=this._view();this._rows();if(0===arguments.length)return e=this._currentCell(),e||this._currentCell(e=a.grid.cellInfo.outsideValue),e;if(e="number"!=typeof b?b._clone():new a.grid.cellInfo(b,c),!e.isEqual(a.grid.cellInfo.outsideValue)){if(!e._isValid())throw"invalid arguments";if(e._clip(this._getDataCellsRange(0)),e.rowIndex()>=0){var g=f._getRowInfoBySketchRowIndex(e.rowIndex());if(!(g&&2&g.type))return}}return e._setGridView(this),this._changeCurrentCell(null,e,{"changeSelection":d||!1,"setFocus":!1}),this._currentCell()},e.prototype.data=function(){return this.mDataViewWrapper.dataView().getSource()},e.prototype.dataView=function(){return this.mDataViewWrapper.dataView()},e.prototype.doRefresh=function(c){var e=this;d.isPlainObject(c)||(c={});var f=this,g=c&&c.virtualScrollData;if(!this._initialized)try{this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this.mDataViewWrapper.getFieldsInfo(),!0,!0)}catch(h){throw h}finally{this._initialized=!0}if(!g){this._rebuildLeaves();var i=b.lazy(this.mDataViewWrapper.data,this.mDataViewWrapper),j=this.mDataViewWrapper.dataView(),k=this._prepareTotalsRequest();if(k.length&&d.each(this._leaves(),function(a,b){b.options._totalsValue=i().totals?i().totals[b.options.dataKey]:void 0}),j.count()){var l=this._leaves(),m=new a.grid.LazySketchTable({"count":function(){return j.count()},"getRange":function(a,b,c,d){for(var f=0;b>f;f++){var g=a+f,h=j.item(g);c[d+f]=e._buildSketchRow(e.mDataViewWrapper._wrapDataItem(h,g),l)}}});(this._hasGrouping()||this._hasMerging())&&m.ensureNotLazy(),this.mSketchTable=m}else{this.mSketchTable=new a.grid.SketchTable;var n=i().emptyData;n&&d.each(n,function(a,b){f.mSketchTable.add(f._buildSketchRowEmptyDataItem(b,e._leaves(),a===n.length-1))})}}this._onRendering(c),g?this._refreshVirtual(c):this._refresh(c),c&&d.isFunction(c.beforeOnRendered)&&c.beforeOnRendered.apply(this,[c]);var o=this._view();if(this.mEditSkechRowIndex>=0&&o._isRowRendered(this.mEditSkechRowIndex)>=0){var p=o._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex);p&&16&p.state&&o._makeRowEditable(p)}this._onRendered(c),c&&d.isFunction(c.afterRefresh)&&c.afterRefresh.apply(this,[c])},e.prototype.beginEdit=function(){if(!this._allowCellEditing())throw'Can be used only if the editingMode option is set to "cell".';return this._beginEditInternal(null)},e.prototype.endEdit=function(a){return"undefined"==typeof a&&(a=!1),this._endEditInternal(null,a)},e.prototype.editRow=function(a){if("row"!==this.options.editingMode)throw'Can be used only if the editingMode option is set to "row".';if(this.mEditSkechRowIndex>=0&&this.cancelRowEditing(),a>=0){for(var b,c=-1,d=0;d<this.mSketchTable.count()&&0>c;d++)b=this.mSketchTable.row(d),b.isDataRow()&&b.dataItemIndex()===a&&(c=d);if(c>=0){var e=this._view();if(this.mEditSkechRowIndex=c,b.renderState|=16,e._isRowRendered(this.mEditSkechRowIndex)>=0){var f=e._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1);f.state|=16,e._removeBodyRow(f.sectionRowIndex,!1),f=e._insertBodyRow(b,f.sectionRowIndex,f.dataItemIndex,-1),e._makeRowEditable(f),this.selection()._ensureSelectionInRow(this.mEditSkechRowIndex)}}}},e.prototype.exportGrid=function(a,b,c,d){},e.prototype.updateRow=function(){if(this.mEditSkechRowIndex>=0){var c=a.grid.asEditableDataView(this.mDataViewWrapper.dataView()),d=!1;if(!c)throw"The provided DataView doesn't supports the editing operation.";try{var e=this.mSketchTable.row(this.mEditSkechRowIndex),f=this._view();if(!(e&&e.isDataRow()&&16&e.renderState))throw"Invalid row";if(this._view()._isRowRendered(this.mEditSkechRowIndex)>=0){for(var g=f._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1),h=this._visibleLeaves(),i=[],j=new a.grid.cellEditorHelper,k=0;k<h.length;k++){var l=h[k];if(l instanceof b.c1field&&!l.options.readOnly){var m=g.$rows.children("td, th").eq(k);if(m.length){var n=f._changeCellRenderState(m,0,!0);if(16&n){var o=f.getAbsoluteCellInfo(m[0],!0),p=j.updateCell(this,o,null,!1);if(!(2&p))return void(d=!0);8&p||i.push(o)}}}}for(var k=0;k<i.length;k++)j.cellEditEnd(this,i[k],null);e.renderState&=-17,g.state&=-17,f._removeBodyRow(g.sectionRowIndex,!1),g=f._insertBodyRow(e,g.sectionRowIndex,g.dataItemIndex,-1),this.selection()._ensureSelectionInRow(this.mEditSkechRowIndex)}else e.renderState&=-17}finally{d||(this.mEditSkechRowIndex=-1)}}},e.prototype.cancelRowEditing=function(){if(this.mEditSkechRowIndex>=0)try{var a=this.mSketchTable.row(this.mEditSkechRowIndex),b=this._view();if(!(a&&a.isDataRow()&&16&a.renderState))throw"Invalid row.";if(a.renderState&=-17,this._view()._isRowRendered(this.mEditSkechRowIndex)>=0){var c=b._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1);c.state&=-17,b._removeBodyRow(c.sectionRowIndex,!1),c=b._insertBodyRow(a,c.sectionRowIndex,c.dataItemIndex,-1),this.selection()._ensureSelectionInRow(this.mEditSkechRowIndex)}}finally{this.mEditSkechRowIndex=-1}},e.prototype.deleteRow=function(b){if(b>=0){var c=a.grid.asEditableDataView(this.mDataViewWrapper.dataView());if(!c||!c.canRemove())throw"The provided DataView doesn't supports the deleting operation.";this.mDataViewWrapper.ignoreChangeEvent(!0),c.remove(b),this.mDataViewWrapper.ignoreChangeEvent(!1),this.ensureControl(!0,{"forceDataLoad":!0})}},e.prototype.ensureControl=function(b,c){this._loading(),d.isPlainObject(c)||(c={"data":null,"afterRefresh":null,"beforeRefresh":null}),this._initialized||(this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this.mDataViewWrapper.isDataLoaded()&&this.mDataViewWrapper.getFieldsInfo(),this.mDataViewWrapper.isDataLoaded(),!1),this.mDataViewWrapper.isOwnDataView()||new a.grid.settingsManager(this).MapDVToWG()),this._initialized&&c&&d.isFunction(c.beforeRefresh)&&c.beforeRefresh.apply(this),c&&c.virtualScrollData||(this.mAllowVirtualScrolling=void 0,this.mEditSkechRowIndex=-1),b===!0?this.mDataViewWrapper.load(c):(this.doRefresh(c),this._loaded())},e.prototype.getCellInfo=function(a){var b=null;return a&&(a=this._findUntilOuterDiv(a,{"td":!0,"th":!0}))&&(b=this._view().getAbsoluteCellInfo(a,!1)),b},e.prototype.getFilterOperatorsByDataType=function(b){return new a.grid.filterOperatorsCache(this).getByDataType(b||"string")},e.prototype.pageCount=function(){return this._customPagingEnabled()?Math.ceil(this.options.totalRows/this.options.pageSize)||1:this.options.allowPaging?this.mDataViewWrapper.dataView().pageCount():1},e.prototype._closestCulture=function(){return this.mClosestCulture},e.prototype._serverShaping=function(){return!1},e.prototype._pageIndexForDataView=function(){return this.options.pageIndex},e.prototype.setSize=function(b,c){var e=this._view(),f=null,g=this.mOuterDiv,h=this._visibleLeaves(),i=d.browser&&d.browser.msie&&d.browser.version<9;try{i&&(a.grid.wijgrid.IGNORE_WIN_RESIZE=!0),e&&e.getScrollValue&&(f=e.getScrollValue()),(b||0===b)&&(this._autoWidth=!1,g.width(b)),(c||0===c)&&(this.mAutoHeight=!1,g.height(c)),d.each(h,function(a,b){var c=e.getHeaderCell(a),f=e.getJoinedCols(a);d(c).css("width",""),d.each(f,function(a,b){d(b).css("width","")})}),this._setSizeInternal(f);var j=this._UIFrozener();j&&j.refresh()}finally{a.grid.wijgrid.IGNORE_WIN_RESIZE=!1}},e.prototype._setSizeInternal=function(a){this._view().updateSplits(a)},e.prototype.selection=function(){return this.mSelection||(this.mSelection=new a.grid.selection(this)),this.mSelection},e.prototype._leaves=function(){return this.mLeaves||(this.mLeaves=[]),this.mLeaves},e.prototype._visibleLeaves=function(){return this.mVisibleLeaves||(this.mVisibleLeaves=[]),this.mVisibleLeaves},e.prototype._allColumns=function(){return this.mAllColumns||(this.mAllColumns=[]),this.mAllColumns},e.prototype._findInstance=function(a){return a?this._allColumns()[a.travIdx]||null:null},e.prototype._currentCell=function(a){return arguments.length?void(this.mCurrentCell=a):this.mCurrentCell},e.prototype._groupAreaColumns=function(){return this.mGroupAreaColumns||(this.mGroupAreaColumns=[]),this.mGroupAreaColumns},e.prototype._tHead=function(){return this.mTHead},e.prototype._onDataViewCurrentPositionChanged=function(a,b){var c=this._currentCellFromDataView(this.currentCell().cellIndex());c=this.currentCell(c,null,!0)},e.prototype._resetColumns=function(){a.grid.traverse(this.options.columns,function(a,b){if(a.dynamic){var c=d.inArray(a,b);c>=0&&b.splice(c,1)}else a.dataKey=a._originalDataKey,a.headerText=a._originalHeaderText}),this._initialized=!1},e.prototype._resetDataProperties=function(){this.options.pageIndex=0},e.prototype._resetVerticalBounds=function(){var a=this._viewPortBounds();a.start=0,this.mScrollingState.index=0,this.mScrollingState.y=0},e.prototype._onDataViewLoading=function(){this._activateSpinner(),this._trigger("dataLoading")},e.prototype._onDataViewReset=function(b,c){this.options._lateBindingFlag?delete this.options._lateBindingFlag:(this.mEditSkechRowIndex=-1,new a.grid.settingsManager(this).MapDVToWG(),this._trigger("dataLoaded"),c&&this._resetColumns(),this.doRefresh(b),this._loaded())},e.prototype._onDataViewLoaded=function(){},e.prototype._loading=function(){this._activateSpinner(),this._trigger("loading")},e.prototype._loaded=function(){this._deactivateSpinner(),this._trigger("loaded")},e.prototype._buildSketchRow=function(c,d){for(var e,f,g=a.data.Expando.getFrom(c.values,!1),h=g?g[a.grid.EXPANDO]:null,i=new b.SketchDataRow(c.originalRowIndex,1,h&&h.rowAttributes),j=h&&h.cellsAttributes,k=0,l=d.length;l>k;k++){var m=d[k];if(m instanceof b.c1field){var n=m;e=j?j[n.options.dataKey]:null,f=this.mDataViewWrapper.getValue(c.values,n.options.dataKey),i.add(new b.ValueCell(this.parse(m.options,f),e))}else i.add(new b.ValueCell(null,{}))}return i},e.prototype._buildSketchRowEmptyDataItem=function(a,c,d){for(var e=new b.SketchRow(128,1,null),f=c.length,g=0,h=a.length;h>g;g++)e.add(new b.HtmlCell(a[g],{"colSpan":f>0&&d?this._visibleLeaves().length:1}));return e},e.prototype._prepareColumnOptions=function(c,e,f,g,h){var i=this;a.grid.traverse(c,function(a){a._originalDataKey=a.dataKey,a._originalHeaderText=a.headerText}),(new a.grid.bandProcessor).getVisibleHeight(c,!0),g&&(a.grid.columnsGenerator.generate(e,f,c),d.each(c,function(a,b){b.isLeaf=!d.isArray(b.columns)})),a.grid.setTraverseIndex(c),this._generateColumnInstancesFromOptions(c),g&&this.mDataViewWrapper&&this.mAdjustHeaderText&&d.each(this._leaves(),function(a,c){var e=i.mDataViewWrapper.isBoundedToDOM(),f=c.options,g="number"==typeof f.dataKey?f.dataKey:f.leavesIdx;if(void 0===f.headerText&&("merge"===i.options.columnsAutogenerationMode||f.dynamic)){var h=i._originalHeaderRowData();e&&h&&g<h.length?f.headerText=d.trim(h[g]):c instanceof b.c1field&&(f.headerText=f.dataKey+"")}var j=i._originalFooterRowData();e&&j&&g<j.length&&(f._footerTextDOM=d.trim(j[g]))})},e.prototype._rebuildLeaves=function(){var c=[];this._showRowHeader()&&c.push(b.c1rowheaderfield.getInitOptions()),d.each(this.options.columns,function(a,b){c.push(b)}),a.grid.setTraverseIndex(c),this._columnsHeadersTable((new a.grid.bandProcessor).generateSpanTable(c)),this._generateColumnInstancesFromOptions(c),this._onLeavesCreated()},e.prototype._generateColumnInstancesFromOptions=function(c){var d=this;this.mAllColumns=[],this.mLeaves=[],this.mVisibleLeaves=[],this.mGroupedLeaves=null;var e=0,f=0,g=0;a.grid.traverse(c,function(c){delete c.visLeavesIdx,delete c.leavesIdx,c.isLeaf&&(c.leavesIdx=f++,c.parentVis&&(c.visLeavesIdx=g++)),c.disabled=d.options.disabled===!0;var h=a.grid.asColumnInstance(d,c);d.mAllColumns.push(h),h instanceof b.c1field&&(c.dataIndex=e++),c.isLeaf&&(d.mLeaves.push(h),c.parentVis&&d.mVisibleLeaves.push(h))})},e.prototype._onLeavesCreated=function(){},e.prototype._allowEditing=function(){return this.options.allowEditing===!0||"cell"===this.options.editingMode||"row"===this.options.editingMode},e.prototype._allowCellEditing=function(){var a=this.options.editingMode;return"row"===a?!1:this.options.allowEditing===!0||"cell"===a},e.prototype._allowVirtualScrolling=function(){return void 0===this.mAllowVirtualScrolling&&(this.mAllowVirtualScrolling=!this.options.allowPaging&&this.options.allowVirtualScrolling&&this.options.staticRowIndex<0&&"none"!==this.options.scrollMode&&!this._hasMerging()),this.mAllowVirtualScrolling},e.prototype._headerRows=function(){return this._view().headerRows()},e.prototype._filterRow=function(){return this._view().filterRow()},e.prototype._rows=function(){return this._view().bodyRows()},e.prototype._localizeFilterOperators=function(b){var c=new a.grid.filterOperatorsCache(this);d.each(b,function(a,b){if(b.name){var d=c.getByName(b.name);d&&(d.displayName=b.displayName)}})},e.prototype._KeyDownEventListener=function(){if(!this.mKeyDownEventListener){var a=this._view(),c=a&&a.focusableElement();c&&(this.mKeyDownEventListener=new b.keyDownEventListener(this,c))}return this.mKeyDownEventListener},e.prototype._UIDragndrop=function(b){return!this._dragndropui&&b&&(this._dragndropui=new a.grid.uiDragndrop(this)),this._dragndropui},e.prototype._UIFrozener=function(b){return!this._frozenerui&&b&&(this._frozenerui=new a.grid.uiFrozener(this)),this._frozenerui},e.prototype._UIResizer=function(b){return!this._resizerui&&b&&(this._resizerui=new a.grid.uiResizer(this)),this._resizerui},e.prototype._UISelection=function(b){return!this._selectionui&&b&&(this._selectionui=new a.grid.uiSelection(this)),this._selectionui},e.prototype._postset_allowColMoving=function(a,b){var c=this;d.each(this.columns(),function(b,d){a?c._UIDragndrop(!0).attach(d):c._UIDragndrop(!0).detach(d)});var e=this._groupAreaColumns();e&&d.each(e,function(b,d){a?c._UIDragndrop(!0).attach(d):c._UIDragndrop(!0).detach(d)})},e.prototype._postset_allowEditing=function(a,b){this._postset_editingMode(this.options.editingMode,void 0)},e.prototype._postset_allowSorting=function(a,b){this.ensureControl(!1)},e.prototype._postset_columns=function(a,b){this._initialized=!1,this.ensureControl(!0)},e.prototype._postset_allowPaging=function(a,b){this.ensureControl(!0)},e.prototype._postset_freezingMode=function(a,b){this._frozenerui&&this._frozenerui.refresh()},e.prototype._postset_culture=function(a,b){this.mClosestCulture=d.wijGetCulture(this.options.culture,this.options.cultureCalendar),this.ensureControl(!1)},e.prototype._postset_customFilterOperators=function(a,b){this.mDataViewWrapper.dataView()},e.prototype._postset_data=function(b,c){this._resetColumns(),this.mDataViewWrapper&&this.mDataViewWrapper.dispose(),this.mDataViewWrapper=new a.grid.dataViewWrapper(this),this.ensureControl(!0)},e.prototype._postset_disabled=function(b,c){var d=this,e=this._view();if(a.grid.iterateChildrenWidgets(this.mOuterDiv,function(a,c){c!==d&&c.option("disabled",b)}),this.mEditSkechRowIndex>=0&&e._isRowRendered(this.mEditSkechRowIndex)>=0){var f=e._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1);f&&f.$rows.find("."+a.grid.wijgrid.CSS.inputMarker).prop("disabled",b)}e&&e.ensureDisabledState()},e.prototype._postset_editingMode=function(a,b){this.mKeyDownEventListener&&(this.mKeyDownEventListener.dispose(),this.mKeyDownEventListener=null,this._KeyDownEventListener())},e.prototype._postset_groupIndent=function(a,b){this.ensureControl(!1)},e.prototype._postset_groupAreaCaption=function(a,b){var c=this._groupedLeaves();!this.$groupArea||c&&c.length||this.$groupArea.html(a||"&nbsp;")},e.prototype._postset_highlightCurrentCell=function(a,b){var c=this.currentCell();c&&c._isValid()&&this._highlightCellPosition(c,a)},e.prototype._preset_pageIndex=function(a,c){if(b.isNaN(a))throw"out of range";var e=this.pageCount(),f=function(a){return a>e-1&&(a=e-1),0>a&&(a=0),a};if(a=f(a),this.options.allowPaging&&a!==c){var g={"newPageIndex":a};this._onPageIndexChanging(g)?a=f(g.newPageIndex):(a=c,d.each([this.mTopPagerDiv,this.mBottomPagerDiv],function(b,c){if(c&&c.length){var d=c.data("wijmo-wijpager");d&&(d.options.pageIndex=a)}}))}return a},e.prototype._postset_pageIndex=function(a,b){if(this.options.allowPaging){var c={"newPageIndex":a};this._customPagingEnabled()?this._onPageIndexChanged(c):this.ensureControl(!0,{"afterRefresh":function(){this._onPageIndexChanged(c)}})}},e.prototype._preset_pageSize=function(a,c){if(b.isNaN(a))throw"out of range";return 0>=a&&(a=1),a},e.prototype._postset_pageSize=function(a,b){this._resetDataProperties(),this.options.allowPaging&&!this._customPagingEnabled()&&this.ensureControl(!0)},e.prototype._postset_pagerSettings=function(a,b){this.ensureControl(!1)},e.prototype._postset_rowHeight=function(a,b){this.mRowOuterHeight=-1,this.ensureControl(!1)},e.prototype._postset_scrollMode=function(a,b){this.ensureControl(!1)},e.prototype._postset_selectionMode=function(b,c){var d=this.selection(),e=this.currentCell(),f=this.selection().selectedCells().length();d.beginUpdate(),d.clear(),e&&e._isValid()&&f&&d._selectRange(new a.grid.cellInfoRange(e,e),!1,!1,0,null),d.endUpdate(),this._view().toggleDOMSelection("none"===b)},e.prototype._postset_showFilter=function(a,b){this.ensureControl(!1)},e.prototype._postset_showGroupArea=function(a,b){this.ensureControl(!1)},e.prototype._postset_showRowHeader=function(a,b){this.ensureControl(!1)},e.prototype._postset_staticRowIndex=function(){"none"!==this.options.scrollMode&&this.ensureControl(!1)},e.prototype._postset_staticColumnIndex=function(){"none"!==this.options.scrollMode&&this.ensureControl(!1)},e.prototype._postset_allowVirtualScrolling=function(a,b){this.ensureControl(!1)},e.prototype._preset_allowVirtualScrolling=function(a,c){if(b.isNaN(a)||0>a)throw"out of range";return a},e.prototype._activateSpinner=function(){if(!this._spinnerActivated){var b=a.grid.wijgrid.CSS,c=this.options.wijCSS,d=this.mOuterDiv.append('<div class="'+b.loadingOverlay+" "+c.wijgridLoadingOverlay+" "+c.overlay+'"></div><span class="'+b.loadingText+" "+c.wijgridLoadingText+" "+c.content+" "+c.cornerAll+'"><span class="'+c.icon+" "+c.iconClock+'"></span>'+this.options.loadingText+"</span>").find("> ."+b.loadingText);d.position({"my":"center","at":"center center","of":this.mOuterDiv,"collision":"none"}),this._spinnerActivated=!0}},e.prototype._customPagingEnabled=function(){return this.options.allowPaging&&this.options.totalRows>=0},e.prototype._deactivateSpinner=function(){if(this._spinnerActivated)try{
var b=a.grid.wijgrid.CSS;this.mOuterDiv.find("> ."+b.loadingOverlay+", > ."+b.loadingText).remove()}finally{this._spinnerActivated=!1}},e.prototype._prepareTotalsRequest=function(){var a,c=this._leaves();return c&&this.options.showFooter?a=d.map(c,function(a,c){var d=a.options;return a instanceof b.c1field&&d.aggregate&&"none"!==d.aggregate?[a]:null}):[]},e.prototype._groupedLeaves=function(a){var c;if(a=!(c=this.mGroupedLeaves)||a){c=[];var e=this._leaves(),f=!1;d.each(e,function(a,d){b.c1field.isGroupedColumn(d)?(f=f||void 0===d.options.groupedIndex,f||c.push(d)):delete d.options.groupedIndex}),f?d.each(e,function(a,d){b.c1field.isGroupedColumn(d)&&(d.options.groupedIndex=c.length,c.push(d))}):(c.sort(function(a,b){return a.options.groupedIndex-b.options.groupedIndex}),d.each(c,function(a,b){b.options.groupedIndex=a})),this.mGroupedLeaves=c}return c||[]},e.prototype._ensureRenderableBounds=function(b){return a.grid.ensureBounds(b,this._renderableRowsCount()-1)},e.prototype._ensureTotalRowsBounds=function(b){return a.grid.ensureBounds(b,this._totalRowsCount()-1)},e.prototype._ensureViewPortBoundsVisible=function(a){var b=this._renderableRowsCount();return a.end>=b&&(a.start-=a.end-(b-1),a.end=b-1,a.start=Math.max(0,a.start),a.end=Math.max(0,a.end)),a},e.prototype._renderableBoundsCollection=function(){return this.mRenderableBoundsCollection},e.prototype._rebuildRenderBoundsCollection=function(){var b=-1,c=-1,d=!1,e=this._totalRowsCount();if(this.mRenderableBoundsCollection=new a.grid.renderBoundsCollection(e-1),this._allowVirtualScrolling()&&this._serverSideVirtualScrolling())this.mRenderableBoundsCollection.add({"start":0,"end":e-1});else if(this._allowVirtualScrolling()&&this._hasGrouping()){for(var f=0;f<this.mSketchTable.count();f++){var g=this.mSketchTable.row(f);1&g.extInfo.state?(b>=0&&(this.mRenderableBoundsCollection.add({"start":b,"end":c}),d=!1),b=c=-1):0>b?(d=!0,b=c=f):c++}d&&this.mRenderableBoundsCollection.add({"start":b,"end":c})}else this.mRenderableBoundsCollection.add({"start":0,"end":e-1})},e.prototype._refresh=function(b){(new a.grid.grouper).group(this,this.mSketchTable),(new a.grid.merger).merge(this,this.mSketchTable),this._rebuildRenderBoundsCollection(),"none"!==this.options.scrollMode?this.mView=new a.grid.fixedView(this,this._viewPortBounds()):this.mView=new a.grid.flatView(this,this._viewPortBounds()),this._render(),this.options.allowPaging&&(this.mTopPagerDiv&&this.mTopPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5),this.mBottomPagerDiv&&this.mBottomPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5))},e.prototype._refreshVirtual=function(a){var b=a.virtualScrollData,c={"top":0,"bottom":0};b.data&&(c=this._processVirtualData(b)),this._updateRowInfos(b,c),this._renderVirtualIntoView(b)},e.prototype._updateRowInfos=function(a,b){var c,d,e,f,g=this._viewPortBounds(),h=this._view(),i=a.newBounds,j=this._view().bodyRows();switch(a.mode){case 3:break;case 2:for(c={"start":i.start-g.start,"end":g.end-g.start},e=i.start-g.start,d=c.start;d<=c.end;d++)f=h._getRowInfo(j.item(d),!1),f.sectionRowIndex-=e,0!==b.top&&(f.dataItemIndex+=b.top),h._setRowInfo(f.$rows,f);break;case 1:for(c={"start":g.start-g.start,"end":i.end-g.start},e=g.start-i.start,d=c.start;d<=c.end;d++)f=h._getRowInfo(j.item(d),!1),f.sectionRowIndex+=e,0!==b.top&&(f.dataItemIndex+=b.top),h._setRowInfo(f.$rows,f)}},e.prototype._renderVirtualIntoView=function(a){var b,c,d,e,f=this._viewPortBounds(),g=this,h=this._view();switch(a.mode){case 3:h._clearBody();var i=a.newBounds.end-a.newBounds.start+1;this._renderableBoundsCollection().forEachIndex(a.newBounds.start,i,function(a){b=g.mSketchTable.row(a-g.mDataOffset),h._insertBodyRow(b,-1,b.dataItemIndex(),a)}),h._rebuildOffsets();break;case 2:for(c={"start":a.newBounds.start,"end":f.end},d=0;d<c.start-f.start;d++)h._removeBodyRow(0);var i=a.newBounds.end-c.end;this._renderableBoundsCollection().forEachIndex(c.end+1,i,function(a){b=g.mSketchTable.row(a-g.mDataOffset),h._insertBodyRow(b,-1,b.dataItemIndex(),a)});break;case 1:for(c={"start":f.start,"end":a.newBounds.end},d=0;d<f.end-a.newBounds.end;d++)h._removeBodyRow(c.end-c.start+1);e=0;var i=f.start-a.newBounds.start;this._renderableBoundsCollection().forEachIndex(a.newBounds.start,i,function(a){b=g.mSketchTable.row(a-g.mDataOffset),h._insertBodyRow(b,e++,b.dataItemIndex(),a)})}},e.prototype._processVirtualData=function(a){var b,c,d,e,f=this.mDataViewWrapper,g=f.dataView().getSource(),h=this._leaves(),i=0,j={"top":0,"bottom":0},k=this._serverSideVirtualScrollingMargin();switch(a.mode){case 3:for(this.mSketchTable.clear(),f._unsafeSplice(0,g.length),this.mDataOffset=a.request.index,c=0;c<a.data.length;c++)f._unsafePush(b=a.data[c]),this.mSketchTable.add(this._buildSketchRow(f._wrapDataItem(b,c),h));break;case 2:for(c=0;c<a.data.length;c++)f._unsafePush(b=a.data[c]),this.mSketchTable.add(this._buildSketchRow(f._wrapDataItem(b,g.length-1),h));j.bottom=a.data.length;break;case 1:for(c=a.data.length-1;c>=0;c--)f._unsafeSplice(0,0,b=a.data[c]),this.mSketchTable.insert(0,this._buildSketchRow(f._wrapDataItem(b,c),h));this.mDataOffset=a.request.index,j.top=a.data.length}return d=this._ensureTotalRowsBounds({"start":a.newBounds.start,"end":a.newBounds.end}),e={"start":this.mDataOffset,"end":this.mDataOffset+g.length-1},i=e.end-d.end-k,i>0&&(j.bottom-=i,f._unsafeSplice(g.length-i,i),this.mSketchTable.removeLast(i)),i=d.start-e.start-k,i>0&&(j.top-=i,f._unsafeSplice(0,i),this.mSketchTable.removeFirst(i),this.mDataOffset+=i),this.mSketchTable.updateIndexes(),f._refreshSilent(),j},e.prototype._needToCreatePagerItem=function(){return this.options.allowPaging===!0},e.prototype._isMobileEnv=function(){return this._isMobile},e.prototype._isTouchEnv=function(){return!(!d.support.isTouchEnabled||!d.support.isTouchEnabled())},e.prototype._render=function(){var b,c=this._view(),e=this.options,f=a.grid.wijgrid.CSS,g=this.options.wijCSS;c.render(),b=this.mOuterDiv,"none"!==e.scrollMode&&(b=this.mOuterDiv.find("div."+f.scroller+":first")),this.mSuperPanelHeader=null,this.mTopPagerDiv&&(this.mTopPagerDiv.data("wijmo-wijpager")&&this.mTopPagerDiv.wijpager("destroy"),this.mTopPagerDiv.remove()),this.mTopPagerDiv=null,!this._needToCreatePagerItem()||"top"!==e.pagerSettings.position&&"topAndBottom"!==e.pagerSettings.position||this.mTopPagerDiv||(b.prepend(this.mSuperPanelHeader=d('<div class="wijmo-wijsuperpanel-header"></div>')),this.mSuperPanelHeader.prepend(this.mTopPagerDiv=d('<div class="'+f.headerArea+" "+g.wijgridHeaderArea+" "+g.header+" "+g.cornerTop+'"></div>'))),e.showGroupArea?this._processGroupArea(b):this.$groupArea=null,this.mBottomPagerDiv&&(this.mBottomPagerDiv.data("wijmo-wijpager")&&this.mBottomPagerDiv.wijpager("destroy"),this.mBottomPagerDiv.remove()),this.mBottomPagerDiv=null,!this._needToCreatePagerItem()||"bottom"!==e.pagerSettings.position&&"topAndBottom"!==e.pagerSettings.position||this.mBottomPagerDiv||b.append(this.mBottomPagerDiv=d('<div class="'+f.footerArea+" "+g.wijgridFooterArea+" wijmo-wijsuperpanel-footer "+g.stateDefault+" "+g.cornerBottom+'"></div>'))},e.prototype._processGroupArea=function(b){var c=this,e=this,f=this._groupedLeaves(),g=a.grid.wijgrid.CSS,h=this.options.wijCSS;this.mGroupAreaColumns=[],this.$groupArea=d('<div class="'+h.content+" "+h.helperClearFix+" "+g.groupArea+" "+h.wijgridGroupArea+'"></div>'),f.length>0?d.each(f,function(a,b){var f=d('<a href="#"></a>').appendTo(e.$groupArea);c.mGroupAreaColumns.push(c._createGroupAreaColumnHeader(f,b))}):this.$groupArea.addClass(g.groupAreaEmpty).css("padding",0).html(this.options.groupAreaCaption||"&nbsp;"),this.mSuperPanelHeader||b.prepend(this.mSuperPanelHeader=d('<div class="wijmo-wijsuperpanel-header"></div>')),this.mSuperPanelHeader.prepend(this.$groupArea),this._UIDragndrop(!0).attachGroupArea(this.$groupArea)},e.prototype._createGroupAreaColumnHeader=function(a,c){return new b.c1groupedfield(this,c.options,a)},e.prototype._pagerSettings2PagerWidgetSettings=function(){return d.extend({},this.options.pagerSettings,{"disabled":this.options.disabled,"pageCount":this.pageCount(),"pageIndex":this.options.pageIndex,"pageIndexChanging":d.proxy(this._onPagerWidgetPageIndexChanging,this),"pageIndexChanged":d.proxy(this._onPagerWidgetPageIndexChanged,this)})},e.prototype._showRowHeader=function(){return this.options.showRowHeader===!0&&"right"!==this.options.staticColumnsAlignment},e.prototype._attachEvents=function(){var a=this._view(),b=a.focusableElement(),c=this;b.bind("keydown."+this.widgetName,d.proxy(this._onKeyDown,this)),b.bind("focusin."+this.widgetName,d.proxy(this._onFocusIn,this)),this._KeyDownEventListener(),d.each(a.subTables(),function(a,b){var e=b.element();e&&(e.tHead&&d(e.tHead).bind("click."+c.widgetName,d.proxy(c._onClick,c)),e.tBodies.length&&d(e.tBodies[0]).bind("click."+c.widgetName,d.proxy(c._onClick,c)).bind("dblclick."+c.widgetName,d.proxy(c._onDblClick,c)).bind("mousemove."+c.widgetName,d.proxy(c._onMouseMove,c)).bind("mouseout."+c.widgetName,d.proxy(c._onMouseOut,c)))}),d(window).bind("resize."+this.widgetName+"."+this._eventUID,d.proxy(this._onWindowResize,this))},e.prototype._detachEvents=function(a){var b,c=this._view(),e=this;this._windowResizeTimer=0,d(window).unbind("resize."+this.widgetName+"."+this._eventUID),c&&(b=c.focusableElement(),b.unbind("."+this.widgetName),d.each(c.subTables(),function(){var a=this.element();a&&(a.tHead&&d(a.tHead).unbind("."+e.widgetName),a.tBodies.length&&d(a.tBodies[0]).unbind("."+e.widgetName))}))},e.prototype._handleSort=function(a,c){var e=a.options;this.options.columns;if(this.options.allowSorting){var f="none"===e.sortDirection?"ascending":"ascending"===e.sortDirection?"descending":"ascending",g={"column":e,"sortDirection":f,"sortCommand":e.dataKey+" "+("ascending"===f?"asc":"desc")};if(this._onColumnSorting(g)){e.sortDirection=g.sortDirection,c?e.sortOrder=this.mCustomSortOrder++:(this.mCustomSortOrder=1e3,d.each(this._allColumns(),function(c,d){if(d.options.sortOrder=0,d instanceof b.c1field){var e=d.options;d===a||e.groupInfo&&"none"!==e.groupInfo.position||(e.sortDirection="none")}}));var h={"column":e,"sortDirection":e.sortDirection,"sortCommand":e.dataKey+" "+("ascending"===e.sortDirection?"asc":"desc")};this._customPagingEnabled()?this._onColumnSorted(h):this.ensureControl(!0,{"afterRefresh":function(){this._onColumnSorted(h)}})}}},e.prototype._handleDragnDrop=function(a,b,c,e,f){var g=a.options,h=b&&b.options||null,i=e?"groupArea":"columns",j=f?"groupArea":"columns";if(f)this._onColumnGrouping({"drag":g,"drop":h,"dragSource":i,"dropSource":j,"at":c})&&this.ensureControl(!0,{"beforeRefresh":function(){if(h)switch(c){case"left":g.groupedIndex=h.groupedIndex-.5;break;case"right":g.groupedIndex=h.groupedIndex+.5}else g.groupedIndex=0;e||d.extend(!0,g,{"groupInfo":{"position":"header"}})},"afterRefresh":function(){this._onColumnGrouped({"drag":g,"drop":h,"dragSource":i,"dropSource":j,"at":c})}});else{var k=this._allColumns(),l=g.parentIdx>=0?k[g.parentIdx].options.columns:this.options.columns,m=h.parentIdx>=0?k[h.parentIdx].options.columns:this.options.columns,n=l===this.options.columns&&this._showRowHeader()?1:0,o=m===this.options.columns&&this._showRowHeader()?1:0;this._onColumnDropping({"drag":g,"drop":h,"at":c})&&this.ensureControl(!1,{"beforeRefresh":function(){switch(l.splice(g.linearIdx-n,1),c){case"left":l===m&&g.linearIdx<h.linearIdx?m.splice(h.linearIdx-o-1,0,g):m.splice(h.linearIdx-o,0,g);break;case"right":l===m&&g.linearIdx<h.linearIdx?m.splice(h.linearIdx-o,0,g):m.splice(h.linearIdx-o+1,0,g);break;case"center":h.columns.push(g)}},"afterRefresh":function(){this._onColumnDropped({"drag":g,"drop":h,"at":c})}})}},e.prototype._handleFilter=function(c,d,e){var f,g,h=new a.grid.filterOperatorsCache(this).getByName(d);if(h){var i=c.options;if(h.arity>1?(f=this.parse(i,e),g=null!==f&&("string"===a.grid.getDataType(i)||!b.isNaN(f))):g=!0,g){var j={"column":i,"operator":h.name,"value":f};this._onColumnFiltering(j)&&(i.filterValue=j.value,i.filterOperator=j.operator,this._resetDataProperties(),this._resetVerticalBounds(),this._customPagingEnabled()?this._onColumnFiltered({"column":i}):this.ensureControl(!0,{"afterRefresh":function(){this._onColumnFiltered({"column":i})}}))}}},e.prototype._handleUngroup=function(a){var b=a.options;this._onColumnUngrouping({"column":b})&&this.ensureControl(!0,{"beforeRefresh":function(){delete b.groupedIndex,d.extend(!0,b,{"groupInfo":{"position":"none"}})},"afterRefresh":function(){this._onColumnUngrouped({"column":b})}})},e.prototype._onVirtualScrolling=function(a,b,c,e,f,g){var h=this;this.ensureControl(this._serverSideVirtualScrolling(),{"virtualScrollData":{"newBounds":a,"request":b,"mode":c,"data":g},"beforeOnRendered":function(a){var b=h._viewPortBounds();d.extend(b,a.virtualScrollData.newBounds)},"afterRefresh":function(a){h._view()._adjustRowsHeights(),f&&f(e)}})},e.prototype._handleVirtualScrolling=function(a,b,c){"undefined"==typeof b&&(b=null);var d,e=this._view(),f=this._viewPortBounds(),g=this._ensureRenderableBounds({"start":a,"end":a+e.getVirtualPageSize()-1}),h=this._ensureTotalRowsBounds({"start":this.mDataOffset,"end":this.mDataOffset+this.mDataViewWrapper.dataView().count()-1}),i=null,j=this._view().getVirtualPageSize();if(d=b?b:g.start>f.end||g.end<f.start?3:g.start>f.start?2:g.start<f.start?1:g.start!==f.start||g.end!==f.end?3:0,this._serverSideVirtualScrolling())switch(d){case 3:i={"index":a,"maxCount":j};break;case 2:g.end>h.end&&(i={"index":h.end+1,"maxCount":j});break;case 1:g.start<h.start&&(i={"index":Math.max(0,h.start-j),"maxCount":0},i.maxCount=h.start-i.index)}0!==d&&this._onVirtualScrolling(g,i,d,a,c)},e.prototype._serverSideVirtualScrolling=function(){return!1},e.prototype._serverSideVirtualScrollingMargin=function(){var a=2*this._view().getVirtualPageSize();return 20>a&&(a=20),a},e.prototype._onColumnDropping=function(a){return this._trigger("columnDropping",null,a)},e.prototype._onColumnDropped=function(a){this._trigger("columnDropped",null,a)},e.prototype._onColumnGrouping=function(a){return this._trigger("columnGrouping",null,a)},e.prototype._onColumnGrouped=function(a){this._trigger("columnGrouped",null,a)},e.prototype._onColumnUngrouping=function(a){return this._trigger("columnUngrouping",null,a)},e.prototype._onColumnUngrouped=function(a){this._trigger("columnUngrouped",null,a)},e.prototype._onColumnFiltering=function(a){return this._trigger("filtering",null,a)},e.prototype._onColumnFiltered=function(a){this._trigger("filtered",null,a)},e.prototype._onFilterOperatorsListShowing=function(a){this._trigger("filterOperatorsListShowing",null,a)},e.prototype._onColumnSorting=function(a){return this._trigger("sorting",null,a)},e.prototype._onColumnSorted=function(a){this._trigger("sorted",null,a)},e.prototype._onCurrentCellChanged=function(b,c){var e=this,f=this.options,g=this.currentCell(),h=g.row(),i=function(){var f=e.currentCell(),g=e._getDataCellsRange(0);if(e.options.highlightCurrentCell){var h=new a.grid.cellInfo(c.changingEventArgs.oldCellIndex,c.changingEventArgs.oldRowIndex,e);h._isValid&&g._containsCellInfo(h)&&e._highlightCellPosition(h,!1),e._highlightCellPosition(f,!0)}var i;c.setFocus&&(i=f.tableCell())&&e._setFocusOnCell(d(c.hasFocusedChild?b.target:i),c.hasFocusedChild,f.columnInst()),e._trigger("currentCellChanged"),c.changeSelection&&e._updateSelection(b,c.selectionExtendMode);var j=b&&(b.type||"").toLowerCase()||"";"click"===j&&e._editBySingleClick()&&e._beginEditInternal(b)};if(this.mCurrentCellLocker=!0,this.mDataViewWrapper.currentPosition(h&&2&h.type?h.dataItemIndex:-1),"none"!==f.scrollMode&&g&&!g.isEqual(a.grid.cellInfo.outsideValue)){var j=g,h=j.row();!h||2&h.type||j.tableCell()||(j=g._clone(),j.cellIndex(0)),this._view().scrollTo(j,function(){try{i()}finally{e.mCurrentCellLocker=!1}},c)}else try{i()}finally{this.mCurrentCellLocker=!1}},e.prototype._onPageIndexChanging=function(a){return this._trigger("pageIndexChanging",null,a)},e.prototype._onPageIndexChanged=function(a){this._trigger("pageIndexChanged",null,a)},e.prototype._onPagerWidgetPageIndexChanging=function(a,b){b.handled=!0},e.prototype._onPagerWidgetPageIndexChanged=function(a,b){this._setOption("pageIndex",b.newPageIndex)},e.prototype._onRendering=function(b){var c=this._view();if(this._rendered=!1,b.virtualScrollData);else{var d=this._currentCell();this.mCurrentCellPrevCycle=d?{"x":d.cellIndex(),"y":d.rowIndex(),"dataItemIndex":d.row()?d.row().dataItemIndex:-1}:{"x":-1,"y":-1,"dataItemIndex":-1},this._currentCell(null),c&&c.dispose(),this._detachEvents(!1),0===this.mRenderCounter&&a.grid.emptyTable(this.element[0]),this.mOuterDiv[0].style.height||(this._isHeightTemporaryFixed=!0,this.mOuterDiv.height(this.mOuterDiv.height())),this.element.detach(),this.element.css({"table-layout":"","width":""}),this.element.empty(),this.mOuterDiv.empty(),this.mOuterDiv.append(this.element),this._selectionui&&(this._selectionui.dispose(),this._selectionui=null),this._resizerui&&(this._resizerui.dispose(),this._resizerui=null),this._frozenerui&&(this._frozenerui.dispose(),this._frozenerui=null),this.mKeyDownEventListener&&(this.mKeyDownEventListener.dispose(),this.mKeyDownEventListener=null)}this._trigger("rendering")},e.prototype._onRendered=function(b){var c,e=this._view();this.selection().selectedCells().length()>0;if(this._rendered=!0,this.mRenderCounter++,b.virtualScrollData){var c=this.currentCell();this.currentCell(c,null,!1),c._isEdit()&&!c.row()&&c._isEdit(!1),this.selection()._ensureSelection()}else{this._isHeightTemporaryFixed&&(this._isHeightTemporaryFixed=!1,this.mOuterDiv[0].style.height=""),this.mSelection=null,this._attachEvents(),this._setAttr(e.focusableElement(),"tabIndex",0),c=this._currentCellFromDataView(this.mCurrentCellPrevCycle.x),!c._isValid()&&this.options.showSelectionOnRender&&(c=this._getFirstDataRowCell(0)),this.currentCell(c,null,!0),this._UISelection(!0);var f=new a.grid.uiResizer(this);d.each(this.columns(),function(a,b){var c=b.options;c.visible&&c.parentVis&&c.isLeaf&&f.addElement(b)}),this._resizerui=f,this._setSizeInternal(this.mScrollingState),"none"!==this.options.scrollMode&&(this._frozenerui=new a.grid.uiFrozener(this))}this._trigger("rendered")},e.prototype._onClick=function(b){if(this._canInteract()&&b.target){var c,e,f=this._view(),g=this._findUntilOuterDiv(b.target,{"td":!0,"th":!0}),h=0,i=!1,j=!(!b||"click"!==b.type);if(g){if(j&&d(b.target).hasClass(a.grid.wijgrid.CSS.groupToggleVisibilityButton))return this._onGroupBtnClick(b),b.stopPropagation(),!1;if(c=d(g).closest("tr"),!c.length)return;if(e=f.getAbsoluteCellInfo(g,!1),(c.hasClass(a.grid.wijgrid.CSS.dataRow)||c.hasClass(a.grid.wijgrid.CSS.headerRow))&&((e.cellIndex()<0||e.rowIndex()<0)&&(e.rowIndex()>=0?(e=new a.grid.cellInfo(0,e.rowIndex()),h=2,i=!0):e.cellIndex()>=0&&(e=this._getFirstDataRowCell(e.cellIndex()),h=1,i=!0)),i||(e=f.getAbsoluteCellInfo(g,!0)),this._changeCurrentCell(b,e,{"changeSelection":!0,"setFocus":j,"selectionExtendMode":h})),j){var k={"cell":e};this._trigger("cellClicked",null,k)}}}},e.prototype._onDblClick=function(a){this._editBySingleClick()||this._beginEditInternal(a)},e.prototype._onGroupBtnClick=function(b){if(this._canInteract()){var c=d(b.target).closest("tr"),e=a.grid.groupHelper,f=e.getGroupInfo(c[0]);if(f){var g=e.getColumnByGroupLevel(this._leaves(),f.level);if(g){var h=g.options.groupInfo.expandInfo[f.index];h.isExpanded?h.collapse(this,g):h.expand(this,g,b.shiftKey),this._allowVirtualScrolling()&&(this._rebuildRenderBoundsCollection(),this._view().vsUI._changeVisibleRowsCount(this._renderableBoundsCollection().capacity()),this._ensureViewPortBoundsVisible(this._viewPortBounds()),this._handleVirtualScrolling(this._viewPortBounds().start,3)),this.setSize()}}}},e.prototype._onKeyDown=function(b){var c=this._KeyDownEventListener().isHiddenInput(d(b.target));if(!this._canInteract()||c&&this._KeyDownEventListener().canHandle(b))return!0;var e=b.target.tagName.toLowerCase(),f=d(b.target),g=this.currentCell(),h=a.getKeyCodeEnum();if(!c&&("input"===e||"option"===e||"select"===e||"textarea"===e)&&0===f.closest("tr.wijmo-wijgrid-datarow").length)return!0;if(this._allowCellEditing()){if((b.which===h.ESCAPE||113===b.which)&&g._isValid()&&g._isEdit())return this._endEditInternal(b,b.which===h.ESCAPE),!1;if(113===b.which)return this._beginEditInternal(b),!1}if(!this.options.allowKeyboardNavigation)return!0;var i;switch(b.which){case h.DOWN:case h.PAGE_DOWN:case h.UP:case h.PAGE_UP:case h.LEFT:case h.RIGHT:case h.HOME:case h.END:case h.TAB:if(b.which===h.TAB){var j=this._visibleLeaves();if(!j||!j.length)return!0}if(c||this._canMoveToAnotherCell(b.target,b.which)){var k=this._getDataCellsRange(2);i=this._getNextCurrentCell(k,g,b.keyCode,b.shiftKey)}}return i?(this._changeCurrentCell(b,i,{"changeSelection":!0,"setFocus":!0}),!1):!0},e.prototype._onFocusIn=function(a){this.options.allowKeyboardNavigation&&a&&a.target&&d(a.target).is(":input")&&!this._KeyDownEventListener().isHiddenInput(d(a.target))&&this._onClick(a)},e.prototype._onMouseMove=function(b){var c,e,f,g,h=this._view(),i=this._frozenerui;a.grid.renderState;if(this.options.highlightOnHover&&this._canInteract()&&(!i||!i.inProgress())&&(c=this._findUntilOuterDiv(b.target,{"td":!0,"th":!0}))){if(e=d(c).closest("tr"),!e.length||!e.hasClass(a.grid.wijgrid.CSS.dataRow)&&!e.hasClass(a.grid.wijgrid.CSS.headerRow))return;f=h.getAbsoluteCellInfo(c,!0);var j=f.rowIndex();j!==this._prevHoveredSketchRowIndex&&(void 0!==this._prevHoveredSketchRowIndex&&h._isRowRendered(this._prevHoveredSketchRowIndex)>=0&&(g=h._getRowInfoBySketchRowIndex(this._prevHoveredSketchRowIndex),g&&(h._changeRowRenderState(g,4,!1),this.mRowStyleFormatter.format(g))),this._prevHoveredSketchRowIndex=j,j>=0&&(g=h._getRowInfoBySketchRowIndex(j),g&&(h._changeRowRenderState(g,4,!0),this.mRowStyleFormatter.format(g))))}},e.prototype._onMouseOut=function(b){if(this._canInteract()){var c=this._findUntilOuterDiv(b.relatedTarget,{"tr":!0});if(!c||!d(c).hasClass(a.grid.wijgrid.CSS.dataRow)){var e=this._prevHoveredSketchRowIndex,f=this._view();if(e>=0){var g=f._getRowInfoBySketchRowIndex(e);g&&g.$rows&&(f._changeRowRenderState(g,4,!1),this.mRowStyleFormatter.format(g)),this._prevHoveredSketchRowIndex=-1}}}},e.prototype._onWindowResize=function(b){var c=this;a.grid.wijgrid.IGNORE_WIN_RESIZE||(this._windowResizeTimer>0&&(window.clearTimeout(this._windowResizeTimer),this._windowResizeTimer=0),-1!==this._windowResizeTimer&&(this._windowResizeTimer=window.setTimeout(function(){c._windowResizeTimer=-1;try{if(!c.mDestroyed&&c._initialized&&c.element.parent().length){var b=a.grid.getWindowOrientation(),d=!a.grid.isAndroid()||b!==c._winOrientation;c._winOrientation=b,d&&c.setSize()}}finally{c._windowResizeTimer=0}},a.grid.wijgrid.WIN_RESIZE_TIMEOUT)))},e.prototype._fieldResized=function(a,c,d){0>c&&(c=0),0>=d&&(d=1);var e={"column":a.options,"oldWidth":c,"newWidth":d};if(this._trigger("columnResizing",null,e)!==!1){(b.isNaN(e.newWidth)||e.newWidth<0)&&(e.newWidth=1),a.option("width",e.newWidth);var f={"column":a.options};this._trigger("columnResized",null,f)}},e.prototype._setFocusOnCell=function(a,b,c){b||this._KeyDownEventListener().focus(a,c)},e.prototype._findFocusedChild=function(a){var b=a.find(":focus");return b.length?b:null},e.prototype._changeCurrentCell=function(b,c,e){if(!this.mCurrentCellLocker){var f=this.currentCell(),g=this._getDataCellsRange(0);if(g._isValid()&&g._containsCellInfo(c)||c.isEqual(a.grid.cellInfo.outsideValue)){var h=b&&b.target&&d(b.target),i=c.tableCell(),j=c.container(),k=null;if(e.hasFocusedChild=!(!i||!h||h[0]===i||h[0]===j[0]||this._KeyDownEventListener().isHiddenInput(h)||!(k=this._findFocusedChild(j))),f.cellIndex()!==c.cellIndex()||f.rowIndex()!==c.rowIndex()){var l={"cellIndex":c.cellIndex(),"rowIndex":c.rowIndex(),"oldCellIndex":f.cellIndex(),"oldRowIndex":f.rowIndex()};if(!this._trigger("currentCellChanging",null,l))return!1;var m=!1;this._allowCellEditing()&&f._isEdit()&&!(m=this._endEditInternal(null))||(e.changingEventArgs=l,f=c._clone(),f._setGridView(this),this._currentCell(f),this._onCurrentCellChanged(b,e))}else this.options.highlightCurrentCell&&this._highlightCellPosition(f,!0),e.changeSelection&&this.selection()._multipleEntitiesAllowed()&&this._updateSelection(b,e.selectionExtendMode),i&&!f._isEdit()&&(b&&this._editBySingleClick()?(this.mCurrentCellLocker=!0,this._beginEditInternal(b),this.mCurrentCellLocker=!1):e.setFocus&&this._setFocusOnCell(e.hasFocusedChild?k:d(i),e.hasFocusedChild,f.columnInst()))}return!0}},e.prototype._highlightCellPosition=function(b,c){if(b&&b._isValid()){var e,f,g,h=b.cellIndexAbs(),i=b.rowIndexAbs(),j=(a.grid.renderState,this._view());f=j.getHeaderCell(h),f&&(e=j._getRowInfo(this._headerRows().item(b.column().thY)),f=d(f),g=j._changeCellRenderState(f,2,c),this.mCellStyleFormatter.format(f,h,b.columnInst(),e,g)),b._isRendered()&&(f=j.getJoinedRows(i,0),f&&(e=j._getRowInfo(f),j._changeRowRenderState(e,2,c),this.mRowStyleFormatter.format(e)),f=j.getCell(h,i),f&&(f=d(f),g=j._changeCellRenderState(f,2,c),this.mCellStyleFormatter.format(f,h,b.columnInst(),e,g)))}},e.prototype._beginEditInternal=function(b){if(this._canInteract()&&this._allowCellEditing()){var c,d=this.currentCell(),e=d.column();if(e&&!e.readOnly)return c=(new a.grid.cellEditorHelper).cellEditStart(this,d,b)}return!1},e.prototype._endEditInternal=function(b,c){if("undefined"==typeof c&&(c=!1),this._canInteract()&&this._allowCellEditing()){var e=this.currentCell(),f=new a.grid.cellEditorHelper,g=f.updateCell(this,e,b,c);if(2&g){if(8&g)return!0;f.cellEditEnd(this,e,b),e=this.currentCell();var h=e.tableCell();return h?this._KeyDownEventListener().focus(d(h),e.columnInst()):d(this._view().focusableElement()).focus(),this._allowVirtualScrolling()||this._view().ensureHeight(e.rowIndex()),!0}}return!1},e.prototype._onViewInsertEmptyRow=function(a,b,c,d,e,f,g){return null},e.prototype._onViewCreateEmptyCell=function(a,b,c){return null},e.prototype._onViewCellRendered=function(a,b,c,d){},e.prototype._onViewRowRendered=function(a,b,c){},e.prototype._getDataParser=function(b){return b.dataParser||a.data.defaultParsers[b.dataType]||a.data.defaultParsers.string},e.prototype._needParseColumnDOM=function(b){return"string"!==a.grid.getDataType(b)&&a.grid.validDataKey(b.dataKey)},e.prototype.parse=function(b,c){var e=a.grid.getDataType(b),f=a.grid.getDataType(b);return d.isFunction(c)&&(c=c()),c=a.data.convert(c,e,f,{"culture":this.mClosestCulture,"format":b.dataFormatString,"nullString":this.options.nullString,"parser":b.dataParser})},e.prototype.toStr=function(b,c){var d=(this.mDataViewWrapper.dataView(),a.grid.getDataType(b)),e="string";return c=a.data.convert(c,d,e,{"culture":this.mClosestCulture,"format":b.dataFormatString,"nullString":this.options.nullString,"parser":b.dataParser})},e.prototype.parseFailed=function(a,b,c,d){return b},e.prototype._funcOptions=function(){return["cellStyleFormatter","rowStyleFormatter","afterCellEdit","afterCellUpdate","beforeCellEdit","beforeCellUpdate","cellClicked","columnDragging","columnDragged","columnDropping","columnDropped","columnResizing","columnResized","columnGrouping","columnGrouped","columnUngrouping","columnUngrouped","currentCellChanging","currentCellChanged","filtering","filtered","filterOperatorsListShowing","groupAggregate","groupText","invalidCellValue","pageIndexChanging","pageIndexChanged","selectionChanged","sorting","sorted","dataLoading","dataLoaded","loading","loaded","rendering","rendered"]},e.prototype._canInteract=function(){return!this.options.disabled},e.prototype._canMoveToAnotherCell=function(b,c){var e,f,g,h,i=b.tagName.toLowerCase();switch(i){case"input":if(d(b).hasClass(a.grid.wijgrid.CSS.inputMarker)){var j=b;return"text"===j.type?(e=j.value.length,f=new a.grid.domSelection(j).getSelection(),g=a.getKeyCodeEnum(),h=c===g.TAB||c===g.UP||c===g.DOWN||c===g.PAGE_DOWN||c===g.PAGE_UP||0===f.length&&(0===f.start&&(c===g.LEFT||c===g.HOME)||f.end>=e&&(c===g.RIGHT||c===g.END))):!0}return!1;case"textarea":case"select":return!1}return!0},e.prototype._editBySingleClick=function(){var a=(this.options.editingInitOption||"").toLowerCase();switch(a){case"click":case"doubleclick":break;case"auto":default:a=this._isMobileEnv()?"click":"doubleclick"}return"click"===a},e.prototype._getDataToAbsOffset=function(){var a=0,b=0,c=this._headerRows();return this._showRowHeader()&&a++,c&&(b+=c.length()),this._filterRow()&&b++,{"x":a,"y":b}},e.prototype._currentCellFromDataView=function(b){var c=this.mDataViewWrapper.currentPosition(),d=new a.grid.cellInfo(b,this._dataViewDataRowIndexToGrid(c),null);return d.rowIndex()<0?d.cellIndex(-1):d.cellIndex()<0&&d.cellIndex(0),d},e.prototype._dataViewDataRowIndexToGrid=function(a){if(a>=0&&this.mSketchTable)for(var b=0;b<this.mSketchTable.count();b++){var c=this.mSketchTable.row(b);if(c.isDataRow()&&c.dataItemIndex()===a)return b}return-1},e.prototype._getDataCellsRange=function(b,c){"undefined"==typeof c&&(c=!1);var d,e=0,f=0,g=this._visibleLeaves().length-1;switch(b){case 1:if(this._rendered){d=this._rows().length()-1;break}case 0:d=this._totalRowsCount()-1;break;case 2:d=this._renderableRowsCount()-1}return this._showRowHeader()&&g--,c&&d>0&&d--,(0>g||0>d)&&(e=f=g=d=-1),new a.grid.cellInfoRange(new a.grid.cellInfo(e,f,null),new a.grid.cellInfo(g,d,null))},e.prototype._getDataItem=function(a){return this.dataView().item(a)},e.prototype._getFirstDataRowCell=function(b){var c,d,e,f=this._view(),g=this._rows();a.grid.rowType;for(c=0,d=g.length();d>c;c++)if(e=f._getRowInfo(g.item(c)),2&e.type)return new a.grid.cellInfo(b,c);return a.grid.cellInfo.outsideValue},e.prototype._getNextCurrentCell=function(b,c,d,e){var f,g=c.cellIndex(),h=c.rowIndex(),i=a.getKeyCodeEnum(),j=this.mSketchTable,k=this._renderableBoundsCollection().getRenderedIndex(h),l=this._renderableBoundsCollection(),m=(d===i.TAB,this),n=m._serverSideVirtualScrolling(),o=function(a,b,c,d){"undefined"==typeof d&&(d=!1);var e=a?l.forEachIndex:l.forEachIndexBackward,f=0,g=null;return e.call(l,b,-1,function(a){var b=a-m.mDataOffset;if(n&&(0>b||b>=j.count()))return g=a,!1;var e=j.row(b),h=e.isDataRow();return d&&!h||1&e.extInfo.state||(g=a,!(++f>=c))?void 0:!1}),g};switch(d){case i.ENTER:case i.DOWN:null!=(f=o(!0,k+1,1))&&(h=f);break;case i.PAGE_DOWN:null!=(f=o(!0,k+1,this.mPageSizeKey))&&(h=f);break;case i.UP:null!=(f=o(!1,k-1,1))&&(h=f);break;case i.PAGE_UP:null!=(f=o(!1,k-1,this.mPageSizeKey))&&(h=f);break;case i.TAB:e?(g--,g<b.topLeft().cellIndex()&&(g=b.bottomRight().cellIndex(),null!=(f=o(!1,k-1,1,!0))?h=f:null!=(f=o(!1,l.capacity()-1,1,!0))&&(h=f))):(g++,g>b.bottomRight().cellIndex()&&(g=b.topLeft().cellIndex(),null!=(f=o(!0,k+1,1,!0))?h=f:null!=(f=o(!0,0,1,!0))&&(h=f)));break;case i.END:g=b.bottomRight().cellIndex();break;case i.HOME:g=b.topLeft().cellIndex();break;case i.LEFT:g>b.topLeft().cellIndex()&&g--;break;case i.RIGHT:g<b.bottomRight().cellIndex()&&g++}return new a.grid.cellInfo(g,h,this)},e.prototype._findUntilOuterDiv=function(a,b){for(var c,d,e=a,f=this.mOuterDiv[0],g=null;e;e=e.parentNode)if(d=e.nodeName&&e.nodeName.toLowerCase()){if(e===f){c=e;break}b[d]&&(g=e)}return c?g:null},e.prototype._getStaticIndex=function(a){var b,c=this._getDataCellsRange(1);return this._hasSpannedCells()?-1:(b=a?Math.min(this.options.staticRowIndex,c.bottomRight().rowIndex()):Math.min(this.options.staticColumnIndex,c.bottomRight().cellIndex()),-1>b&&(b=-1),b)},e.prototype._getStaticOffsetIndex=function(a){var b=0;return a?this._showRowHeader()&&b++:(b=this._columnsHeadersTable().length,this.options.showFilter&&b++),b},e.prototype._getRealStaticColumnIndex=function(){var b=this._getStaticOffsetIndex(!0),c=this._getStaticIndex(!1),d=c+b;if(c>=0){var e=this._visibleLeaves(),f=this._allColumns(),g=e.length;if(b>0&&(f=f.slice(b-1,-1)),g-1>d){var h=a.grid.getTompostParent(e[d],f);if(h)for(d++;g>d;d++){var i=a.grid.getTompostParent(e[d],f);if(i!==h){d--;break}}}d>=g&&(d=g-1)}return d},e.prototype._getRealStaticRowIndex=function(){
var a=this._getStaticOffsetIndex(!1);return this._getStaticIndex(!0)+a},e.prototype._hasMerging=function(){var a=this._leaves(),b=!1;if(a)for(var c=0,d=a.length;d>c&&!b;c++){var e=a[c].options;b=b||e.parentVis&&e.rowMerge&&"none"!==e.rowMerge}return b},e.prototype._hasGrouping=function(){for(var a=this._leaves(),b=!1,c=0,d=a.length;d>c&&!b;c++){var e=a[c].options;b=e.groupInfo&&"none"!==e.groupInfo.position}return b},e.prototype._hasSpannedCells=function(){return this._hasGrouping()||this._hasMerging()},e.prototype._columnsHeadersTable=function(a){return arguments.length&&(this.mColumnsHeadersTable=a),this.mColumnsHeadersTable},e.prototype._view=function(){return this.mView},e.prototype._originalFooterRowData=function(){var a=this.mTFoot;return a&&a.length?a[0]:null},e.prototype._originalHeaderRowData=function(){var a=this.mTHead;return a&&a.length?a[a.length-1]:null},e.prototype._setAttr=function(a,b,c){var e=this;return a===this.element?2===arguments.length?(d.each(b,function(b,c){b in e._originalAttr||(e._originalAttr[b]=a.attr(b))}),a.attr(b)):(b in this._originalAttr||(this._originalAttr[b]=a.attr(b)),a.attr(b,c)):3===arguments.length?a.attr(b,c):a.attr(b)},e.prototype._totalRowsCount=function(){return this.mSketchTable.count()},e.prototype._renderableRowsCount=function(){return this._renderableBoundsCollection().capacity()},e.prototype._trackScrollingPosition=function(a,b){this.mScrollingState.x=a,this.mScrollingState.y=b},e.prototype._trackScrollingIndex=function(a){this.mScrollingState.index=a},e.prototype._uid=function(){return void 0===this.__uid&&(this.__uid=a.grid.getUID()),"wijgrid"+this.__uid},e.prototype._updateSelection=function(b,c){var d=b&&(b.type||"").toLowerCase()||"",e=this.selection(),f=this.currentCell();if(c=c||0,e.beginUpdate(),d){if(f._isValid())switch(d){case"focusin":case"click":b.shiftKey&&e._multipleEntitiesAllowed()||e._startNewTransaction(f),b.shiftKey&&b.ctrlKey?e._clearRange(new a.grid.cellInfoRange(f,f),c):e._selectRange(new a.grid.cellInfoRange(e._anchorCell(),f),b.ctrlKey,b.shiftKey,c,null);break;case"keydown":b.shiftKey&&e._multipleEntitiesAllowed()||e._startNewTransaction(f),e._selectRange(new a.grid.cellInfoRange(e._anchorCell(),f),!1,b.shiftKey,0,null)}}else e.clear(),f._isValid()&&(e._startNewTransaction(f),e._selectRange(new a.grid.cellInfoRange(f,f),!1,!1,0,null));e.endUpdate()},e.prototype._viewPortBounds=function(a){return arguments.length&&(this.mViewPortBounds=a),this.mViewPortBounds},e.prototype._viewPortBoundsOfEntirelyShownRows=function(){var a=this._viewPortBounds(),b=!1,c=a.end-a.start+1;if(this._allowVirtualScrolling()){var e=this._view();c<e.getVirtualPageSize()&&(b=!0)}return b||(a=d.extend({},a),a.end--),a},e.WIN_RESIZE_TIMEOUT=200,e.IGNORE_WIN_RESIZE=!1,e.CSS={"wijgrid":"wijmo-wijgrid","root":"wijmo-wijgrid-root","editedCellMarker":"wijmo-wijgrid-cell-edit","inputMarker":"wijgridinput","table":"wijmo-wijgrid-table","TH":"wijgridth","TD":"wijgridtd","cellContainer":"wijmo-wijgrid-innercell","aggregateContainer":"wijmo-wijgrid-aggregate","rowHeader":"wijmo-wijgrid-rowheader","currentRowHeaderCell":"wijmo-wijgrid-current-rowheadercell","currentHeaderCell":"wijmo-wijgrid-current-headercell","currentCell":"wijmo-wijgrid-current-cell","cellAlignLeft":"wijalign-left","cellAlignRight":"wijalign-right","cellAlignCenter":"wijalign-center","filterList":"wijmo-wijgrid-filterlist","filter":"wijmo-wijgrid-filter","filterInput":"wijmo-wijgrid-filter-input","filterTrigger":"wijmo-wijgrid-filter-trigger","filterNativeHtmlEditorWrapper":"wijgrid-input-wrapper","headerArea":"wijmo-wijgrid-header","footerArea":"wijmo-wijgrid-footer","headerRow":"wijmo-wijgrid-headerrow","row":"wijmo-wijgrid-row","dataRow":"wijmo-wijgrid-datarow","altRow":"wijmo-wijgrid-alternatingrow","emptyDataRow":"wijmo-wijgrid-emptydatarow","filterRow":"wijmo-wijgrid-filterrow","groupHeaderRow":"wijmo-wijgrid-groupheaderrow","groupFooterRow":"wijmo-wijgrid-groupfooterrow","groupHeaderRowCollapsed":"wijmo-wijgrid-groupheaderrow-collapsed","groupHeaderRowExpanded":"wijmo-wijgrid-groupheaderrow-expanded","footerRow":"wijmo-wijgrid-footerrow","loadingOverlay":"wijmo-wijgrid-overlay","loadingText":"wijmo-wijgrid-loadingtext","groupArea":"wijmo-wijgrid-group-area","groupAreaEmpty":"wijmo-wijgrid-group-area-empty","groupAreaButton":"wijmo-wijgrid-group-button","groupAreaButtonSort":"wijmo-wijgrid-group-button-sort","groupAreaButtonClose":"wijmo-wijgrid-group-button-close","groupToggleVisibilityButton":"wijmo-wijgrid-grouptogglebtn","fixedView":"wijmo-wijgrid-fixedview","scroller":"wijmo-wijgrid-scroller","dndHelper":"wijmo-wijgrid-dnd-helper","dndArrowTopContainer":"wijmo-wijgrid-dnd-arrow-top","dndArrowBottomContainer":"wijmo-wijgrid-dnd-arrow-bottom","freezingHandleV":"wijmo-wijgrid-freezing-handle-v","freezingHandleH":"wijmo-wijgrid-freezing-handle-h","freezingHandleContent":"wijmo-wijgrid-freezing-handle-content","resizingHandle":"wijmo-wijgrid-resizehandle","headerCellSortIcon":"wijmo-wijgrid-sort-icon","headerCellText":"wijmo-wijgrid-headertext","c1basefield":"wijmo-c1basefield","c1band":"wijmo-c1band","c1field":"wijmo-c1field"},e}(a.wijmoWidget);b.wijgrid=e,e.prototype.widgetEventPrefix="wijgrid",e.prototype.mDataPrefix="wijgrid",e.prototype.mCustomSortOrder=1e3,e.prototype.mPageSizeKey=10;var f=function(){function a(){this.wijMobileCSS={"header":"ui-header ui-bar-a","content":"ui-body-b","stateHover":"ui-btn-down-c","stateActive":"ui-btn-down-c","stateHighlight":"ui-btn-down-e"},this.wijCSS={"wijgrid":"","wijgridTable":"","wijgridTH":"","wijgridTD":"","wijgridCellContainer":"","wijgridRowHeader":"","wijgridCurrentRowHeaderCell":"","wijgridCurrentHeaderCell":"","wijgridCurrentCell":"","wijgridCellAlignLeft":"","wijgridCellAlignRight":"","wijgridCellAlignCenter":"","wijgridFilterList":"","wijgridFilter":"","wijgridFilterInput":"","wijgridFilterTrigger":"","wijgridFilterNativeHtmlEditorWrapper":"","wijgridHeaderArea":"","wijgridFooterArea":"","wijgridHeaderRow":"","wijgridRow":"","wijgridDataRow":"","wijgridAltRow":"","wijgridEmptyDataRow":"","wijgridFilterRow":"","wijgridGroupHeaderRow":"","wijgridGroupFooterRow":"","wijgridGroupHeaderRowCollapsed":"","wijgridGroupHeaderRowExpanded":"","wijgridFooterRow":"","wijgridLoadingOverlay":"","wijgridLoadingText":"","wijgridGroupArea":"","wijgridGroupAreaButton":"","wijgridGroupAreaButtonSort":"","wijgridGroupAreaButtonClose":"","wijgridGroupToggleVisibilityButton":"","wijgridFixedView":"","wijgridScroller":"","wijgridDndHelper":"","wijgridDndArrowTopContainer":"","wijgridDndArrowBottomContainer":"","wijgridFreezingHandleV":"","wijgridFreezingHandleH":"","wijgridResizingHandle":"","wijgridHeaderCellSortIcon":"","wijgridHeaderCellText":""},this.allowColMoving=!1,this.allowColSizing=!1,this.allowEditing=!1,this.allowKeyboardNavigation=!0,this.allowPaging=!1,this.allowSorting=!1,this.allowVirtualScrolling=!1,this.cellStyleFormatter=void 0,this.columns=[],this.columnsAutogenerationMode="merge",this.culture="",this.cultureCalendar="",this.customFilterOperators=[],this.data=null,this.editingInitOption="auto",this.editingMode="none",this.ensureColumnsPxWidth=!1,this.filterOperatorsSortMode="alphabeticalCustomFirst",this.freezingMode="none",this.groupAreaCaption="Drag a column here to group by that column.",this.groupIndent=10,this.highlightCurrentCell=!1,this.highlightOnHover=!0,this.loadingText="Loading...",this.nullString="",this.pageIndex=0,this.pageSize=10,this.pagerSettings={"mode":"numeric","pageButtonCount":10,"position":"bottom"},this.readAttributesFromData=!1,this.rowHeight=-1,this.rowStyleFormatter=void 0,this.scrollMode="none",this.selectionMode="singleRow",this.showFilter=!1,this.showFooter=!1,this.showGroupArea=!1,this.showSelectionOnRender=!0,this.showRowHeader=!1,this.staticColumnIndex=-1,this.staticColumnsAlignment="left",this.staticRowIndex=-1,this.totalRows=-1,this.afterCellEdit=null,this.afterCellUpdate=null,this.beforeCellEdit=null,this.beforeCellUpdate=null,this.cellClicked=null,this.columnDragging=null,this.columnDragged=null,this.columnDropping=null,this.columnDropped=null,this.columnGrouping=null,this.columnGrouped=null,this.columnResizing=null,this.columnResized=null,this.columnUngrouping=null,this.columnUngrouped=null,this.currentCellChanging=null,this.currentCellChanged=null,this.filterOperatorsListShowing=null,this.filtering=null,this.filtered=null,this.groupAggregate=null,this.groupText=null,this.invalidCellValue=null,this.pageIndexChanging=null,this.pageIndexChanged=null,this.selectionChanged=null,this.sorting=null,this.sorted=null,this.dataLoading=null,this.dataLoaded=null,this.loading=null,this.loaded=null,this.rendering=null,this.rendered=null}return a}();e.prototype.options=a.grid.extendWidgetOptions(a.wijmoWidget.prototype.options,new f),d.wijmo.registerWidget("wijgrid",e.prototype)}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(a){"use strict";var b=(jQuery,function(){function a(a){a&&(this.__attr=a)}return a.prototype.attrs=function(){return this.__attr},a.prototype.ensureAttr=function(){return this.__attr=this.__attr||{},this.__attr},a.prototype.attr=function(a,b){return 0==arguments.length?this.__attr:1==arguments.length?this.__attr?this.__attr[a]:null:void(this.ensureAttr()[a]=b)},a.prototype.style=function(a,b){return 0==arguments.length?this.__style:1==arguments.length?this.__style&&this.__style[a]:void(this.ensureStyle()[a]=b)},a.prototype.deleteAttr=function(a){this.__attr&&delete this.__attr[a]},a.prototype.deleteStyle=function(a){this.__style&&delete this.__style[a]},a.prototype.ensureStyle=function(){return this.__style=this.__style||{},this.__style},a}());a.SketchObject=b;var c=function(a){function b(b){a.call(this,b)}return __extends(b,a),b.prototype.visible=function(a){return 0==arguments.length?!(this._visible===!1):void(this._visible=a)},b}(b);a.SketchCell=c;var d=function(a){function b(b,c){a.call(this,c),this.value=b}return __extends(b,a),b}(c);a.ValueCell=d;var e=function(a){function b(b,c){a.call(this,c),this.html=b||""}return __extends(b,a),b.nbsp=function(){return new b("&nbsp;",null)},b}(c);a.HtmlCell=e;var f=function(a){function b(b,c,d){a.call(this,d),this.rowType=b,this.renderState=c,this.extInfo={"state":0}}return __extends(b,a),b.prototype.isDataRow=function(){return 2==(2&this.rowType)},b.prototype.dataItemIndex=function(a){return"undefined"==typeof a&&(a=0),-1},b.prototype.cellCount=function(){return this._cells?this._cells.length:0},b.prototype._ensureCells=function(){this._cells=this._cells||[]},b.prototype.add=function(a){this._ensureCells(),this._cells.push(a)},b.prototype.insert=function(a,b){this._ensureCells(),this._cells.splice(a,0,b)},b.prototype.cell=function(a){return this._cells[a]},b.prototype.valueCell=function(a){return this.cell(a)},b.prototype.removeAt=function(a){if(!this._cells)throw"Wrong index";this._cells.splice(a,1)},b.prototype.clear=function(){},b.prototype.getRowInfo=function(){return{"type":this.rowType,"state":this.renderState,"sectionRowIndex":null,"dataRowIndex":null,"virtualDataItemIndex":null,"dataItemIndex":this.dataItemIndex(),"$rows":null,"_extInfo":this.extInfo}},b}(b);a.SketchRow=f;var g=function(a){function b(b,c,d){a.call(this,2|(b%2==1?4:0),c,d),this.originalRowIndex=b}return __extends(b,a),b.prototype.dataItemIndex=function(a){return"undefined"==typeof a&&(a=0),a+this.originalRowIndex},b.prototype.isDataRow=function(){return!0},b}(f);a.SketchDataRow=g;var h=function(a){function b(b,c){var d=b?16:32;a.call(this,d,1,c)}return __extends(b,a),b.prototype.getRowInfo=function(){var b=a.prototype.getRowInfo.call(this);return void 0!==this.groupByValue&&(b.groupByValue=this.groupByValue),b},b}(f);a.SketchGroupRow=h;var i=function(){function a(){this._table=[]}return a.prototype.getRawTable=function(){return this._table},a.prototype.row=function(a){return this._table[a]},a.prototype.valueAt=function(a,b){return this.row(a).valueCell(b).value},a.prototype.count=function(a){return"number"==typeof a&&(this._table.length=a),this._table.length},a.prototype.add=function(a){this._table.push(a)},a.prototype.insert=function(a,b){this._table.splice(a,0,b)},a.prototype.clear=function(){this._table.length=0},a.prototype.removeFirst=function(a){"undefined"==typeof a&&(a=1),this._table.splice(0,a)},a.prototype.removeLast=function(a){"undefined"==typeof a&&(a=1),this._table.splice(this._table.length-a,a)},a.prototype.replace=function(a,b){var c=this._table.splice(a,1,b);c&&c.length&&b&&(b.extInfo=c[0].extInfo)},a.prototype.updateIndexes=function(){for(var a=0;a<this._table.length;a++){var b=this._table[a];this._table[a].isDataRow()&&(b.originalRowIndex=a)}},a.prototype.isLazy=function(){return!1},a.prototype.ensureNotLazy=function(){},a}();a.SketchTable=i;var j=function(a){function b(b){if(a.call(this),this.mIsLazy=!0,this.pageSize=30,null==b)throw"Row source is null";this.mSource=b,this._table.length=b.count()}return __extends(b,a),b.prototype.isLazy=function(){return this.mIsLazy},b.prototype.ensureNotLazy=function(){this.isLazy()&&(this.ensureRange(),this.mIsLazy=!1)},b.prototype.invalidate=function(){this._table=new Array(this.mSource.count()),this.isLazy()||this.updateRange()},b.prototype.row=function(b){return a.prototype.row.call(this,b)||this.ensureRange(Math.max(0,b-this.pageSize/2),this.pageSize),a.prototype.row.call(this,b)},b.prototype.ensureRange=function(a,b){if("undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=this._table.length-a),this.isLazy()){if(0>a)throw"Wrong range start";if(this._table.length=this.mSource.count(),0!=this._table.length){for(;a<this._table.length&&this._table[a];)a++;if(!(a>=this._table.length)){for(var c=Math.min(a+b-1,this._table.length-1);c>=a&&this._table[c];)c--;b=c-a+1,b>0&&this.updateRange(a,b)}}else if(b>0)throw"Wrong range length"}},b.prototype.updateRange=function(a,b){if("undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=this._table.length-a),null==this.mSource)throw"Cannot create sketch row because source is null";this.mSource.getRange(a,b,this._table,a)},b}(i);a.LazySketchTable=j}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(a){"use strict";var b=jQuery,c=function(){function a(a,b){var c=b.split(".");this.namespace=c[0],this.widgetName=c[1],this.widgetFullName=this.namespace+"-"+this.widgetName,this.options=a||{},this._destroyed=!1,this._provideDefaults()}return a.prototype.option=function(a,b){var c=a;if(!arguments.length)return this.options;if("string"==typeof a){if(void 0===b)return this.options[a];c={},c[a]=b,this._setOptions(c)}return this},a.prototype.enable=function(){this._setOption("disabled",!1)},a.prototype.disable=function(){this._setOption("disabled",!0)},a.prototype.destroy=function(){try{this._destroyed||(this._destroy(),this.element.unbind("."+this.widgetName),this.element.removeData(this.widgetFullName))}finally{this._destroyed=!0}},a.prototype.widget=function(){return this.element},a.prototype._destroy=function(){},a.prototype._setOptions=function(a){var c=this;b.each(a,function(a,b){c._setOption(a,b)})},a.prototype._attachToElement=function(b){var c=this;this.element=b,this.element&&(this.options.disabled&&this.disable(),this.element.data(a.DATA_INSTANCE_PROP,this),this.element.bind("remove."+this.widgetName,function(){c.destroy()}))},a.prototype._provideDefaults=function(){this.options.disabled=this.options.disabled||!1},a.prototype._setOption=function(a,b){var c=this["_preset_"+a],d=this.options[a];if(c&&(b=c.apply(this,[b,d])),b!==d){var e=this["_postset_"+a];this.options[a]=b,this._prepostsetOption(a,b),e&&e.apply(this,[b,d])}},a.prototype._prepostsetOption=function(a,b){},a.prototype._postset_disabled=function(a,b){this.element&&this.element[a?"addClass":"removeClass"](this.widgetFullName+"-disabled ui-state-disabled").attr("aria-disabled",a)},a.prototype._eventKey=function(a){return a+"."+this.widgetName},a.DATA_INSTANCE_PROP="wijemuinstance",a}();a.widgetEmulator=c}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){"use strict";function b(a){if(!$.isFunction(a))throw"'factory' must be a function.";d.push(a)}function c(a,b){for(var c=d.length-1;c>=0;c--){var e=d[c](a,b);if(e)return e}throw"Unsupported column."}var d=[];a.registerColumnFactory=b,a.asColumnInstance=c}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(b){function d(a,c,e){b.call(this,c,e||d.WIDGET_NAME),this.mFirstVisible=void 0,this.mWijgrid=a}return __extends(d,b),d.test=function(a){return!0},d.prototype._destroy=function(){var a=this._owner(),c=this._defCSS(),d=this._wijCSS();this.element&&(this.element.find("*").unbind("."+this.widgetName),this.element.removeClass(d.widget+" "+c.c1basefield+" "+d.c1basefield+" "+d.stateDefault).html(this.element.find("."+c.headerCellText).html())),a&&a._UIDragndrop()&&a._UIDragndrop(!1).detach(this),b.prototype._destroy.apply(this,arguments)},d.prototype._owner=function(){return this.mWijgrid},d.prototype._attachToElement=function(a){b.prototype._attachToElement.apply(this,arguments);var c=this._owner();c.options.allowColMoving&&this._draggable()&&c._UIDragndrop(!0).attach(this)},d.prototype._provideDefaults=function(){b.prototype._provideDefaults.call(this),a.grid.shallowMerge(this.options,d.prototype.options)},d.prototype._defCSS=function(){return a.grid.wijgrid.CSS},d.prototype._wijCSS=function(){return this.mWijgrid?this.mWijgrid.options.wijCSS:{}},d.prototype._initializeCell=function(b,d,e,f,g){var h=(a.grid.rowType,!0),i={"$cell":b,"$container":e,"column":this.options,"formattedValue":f,"row":g,"afterDefaultCallback":null};if((2&g.type||32===g.type||16===g.type)&&this.mWijgrid._allowVirtualScrolling()){var j=this.mWijgrid._view().getDefaultRowHeight();e.css({"overflow":"hidden","height":j})}if(c.isFunction(this.options.cellFormatter)&&(h=!this.options.cellFormatter(i)),h){a.grid.rowType;switch(-5&g.type){case 2:this._initializeDataCell(b,e,f,g);break;case 64:this._initializeFooterCell(b,e);break;case 1:this._initializeHeaderCell(b,e);break;case 8:this._initializeFilterCell(b,e);break;case 16:this._initializeGroupHeaderCell(b,d,e,f,g);break;default:this._updateHTML(e,f)}c.isFunction(i.afterDefaultCallback)&&i.afterDefaultCallback(i)}},d.prototype._initializeDataCell=function(a,b,c,d){this._setupDataCell(b,c,d)},d.prototype._initializeFooterCell=function(a,b){this._setupFooterCell(b)},d.prototype._initializeHeaderCell=function(a,b){this._attachToElement(a);var c=this._defCSS(),d=this._wijCSS();a.addClass(d.widget+" "+c.c1basefield+" "+d.stateDefault),this._setupHeaderCell()},d.prototype._initializeFilterCell=function(a,b){var c=(this._defCSS(),this._wijCSS());b.addClass(c.widget+" "+c.stateDefault),this._setupFilterCell(b)},d.prototype._initializeGroupHeaderCell=function(a,b,c,d,e){var f=this.mWijgrid;if(b===(f.options.showRowHeader?1:0)){var g=this.mWijgrid._groupedLeaves()[e._extInfo.groupLevel-1];if(g){var h=g.options.groupInfo;if(h&&"none"!==h.outlineMode){var i=this._defCSS(),j=f.options.wijCSS,k=2&e._extInfo.state?h.collapsedImageClass||j.iconArrowRight:h.expandedImageClass||j.iconArrowRightDown;d='<div class="'+j.icon+" "+k+" "+i.groupToggleVisibilityButton+" "+j.wijgridGroupToggleVisibilityButton+'">&nbsp;</div>'+d}}}this._updateHTML(c,d)},d.prototype._updateHTML=function(a,b){this.mWijgrid.mCellFormatter.updateHTML(a,b,!1)},d.prototype._getHeaderContent=function(){return this.options.headerText||"&nbsp;"},d.prototype._createHeaderContent=function(a){a.html(this._getHeaderContent())},d.prototype._decorateHeaderContent=function(a){var b=this._defCSS(),c=this._wijCSS();a.wrapInner('<span class="'+b.headerCellText+" "+c.wijgridHeaderCellText+'" />')},d.prototype._setupHeaderCell=function(){var a=this.element.children("."+this._defCSS().cellContainer).empty();this._createHeaderContent(a),this._decorateHeaderContent(a)},d.prototype._setupFilterCell=function(a){},d.prototype._setupDataCell=function(a,b,c){this._updateHTML(a,b)},d.prototype._setupFooterCell=function(a){this._updateHTML(a,this.options.footerText||this.options._footerTextDOM)},d.prototype._postset_headerText=function(a,b){this._setupHeaderCell()},d.prototype._postset_visible=function(a,b){this._owner().ensureControl(!1)},d.prototype._postset_width=function(a,b){this.options.ensurePxWidth=!0,this._owner().setSize()},d.prototype._draggable=function(){return!0},d.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing},d.prototype._canDrag=function(){return this.options.allowMoving===!0},d.prototype._canDropTo=function(b){return a.grid.isChildOf(this._owner()._allColumns(),b,this)?!1:!0},d.prototype._canDropToGroupArea=function(){return!1},d.prototype._visible=function(){return this.options.visLeavesIdx>=0},d.prototype._isFirstVisible=function(){return void 0===this.mFirstVisible&&(this.mFirstVisible=this.options.visLeavesIdx===(this.mWijgrid._showRowHeader()?1:0)),this.mFirstVisible},d.WIDGET_NAME="wijmo.c1basefield",d}(b.widgetEmulator);b.c1basefield=d;var e=function(){function a(){this.allowMoving=!0,this.allowSizing=!0,this.cellFormatter=void 0,this.ensurePxWidth=void 0,this.footerText=void 0,this.headerText=void 0,this.textAlignment=void 0,this.visible=!0,this.width=void 0}return a}();b.c1basefield_options=e,d.prototype.options=a.grid.extendWidgetOptions({},new e),a.grid.registerColumnFactory(function(a,b){return d.test(b)?new d(a,b):null})}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=(jQuery,function(a){function b(c,d,e){a.call(this,c,d,e||b.WIDGET_NAME)}return __extends(b,a),b.getInitOptions=function(){return{"clientType":b.CLIENT_TYPE,"parentVis":!0}},b.test=function(a){return a.clientType===b.CLIENT_TYPE},b.prototype._provideDefaults=function(){a.prototype._provideDefaults.call(this),this.options.allowMoving=!1,this.options.allowSizing=!1,this.options.dataKey=null},b.prototype._initializeCell=function(b,c,d,e,f){var g=this._defCSS(),h=this._wijCSS();a.prototype._initializeCell.apply(this,arguments),b.attr({"role":"rowheader","scope":"row"}).addClass(h.stateDefault+" "+h.content+" "+g.rowHeader+" "+h.wijgridRowHeader)},b.prototype._draggable=function(){return!1},b.prototype._isFirstVisible=function(){return!1},b.CLIENT_TYPE="c1rowheaderfield",b.WIDGET_NAME="wijmo.c1rowheaderfield",b.COLUMN_WIDTH=22,b}(b.c1basefield));b.c1rowheaderfield=c,c.prototype.options=a.grid.extendWidgetOptions({},new b.c1basefield_options),a.grid.registerColumnFactory(function(a,b){return c.test(b)?new c(a,b):null})}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(d){function e(a,b,c){d.call(this,a,b,c||e.WIDGET_NAME),this.mFilterEditorInitialized=!1}return __extends(e,d),e.test=function(b){return a.grid.validDataKey(b.dataKey)},e.isGroupedColumn=function(b){var c=b.options;return a.grid.c1field.test(c)&&c.groupInfo&&c.groupInfo.position&&"none"!==c.groupInfo.position},e.prototype._destroy=function(){if(this.element){var a=this._defCSS();this.element.removeClass(a.c1field)}try{if(this.mFilterEditor)switch(this.mFilterEditor.closest("td").find("*").unbind("."+this.widgetName),this._getInputEditorType()){case"date":this.mFilterEditor.data("wijmo-wijinputdate")&&this.mFilterEditor.wijinputdate("destroy");break;case"text":this.mFilterEditor.data("wijmo-wijinputtext")&&this.mFilterEditor.wijinputtext("destroy");break;case"numberCurrency":case"numberNumber":case"numberPercent":this.mFilterEditor.data("wijmo-wijinputnumber")&&this.mFilterEditor.wijinputnumber("destroy")}this._removeDropDownFilterList()}finally{this.mFilterEditor=null,this.mDropDownFilterList}d.prototype._destroy.apply(this,arguments)},e.prototype._provideDefaults=function(){d.prototype._provideDefaults.call(this),a.grid.shallowMerge(this.options,e.prototype.options),c.isFunction(this.options.dataParser)&&(this.options.dataParser=new this.options.dataParser),this.options.groupInfo=this.options.groupInfo||{},a.grid.shallowMerge(this.options.groupInfo,e.prototype.options.groupInfo)},e.prototype._initializeHeaderCell=function(a,b){d.prototype._initializeHeaderCell.apply(this,arguments);var c=this._defCSS();a.addClass(c.c1field)},e.prototype._updateHTML=function(a,b){this._owner().mCellFormatter.updateHTML(a,b,this.options.encodeHtml)},e.prototype._isSortable=function(){return!0},e.prototype._isSortableUI=function(){var a=this._owner();return a.options.allowSorting&&this.options.allowSort&&this._isSortable()},e.prototype._canDropTo=function(a){return d.prototype._canDropTo.apply(this,arguments)?void 0!==this.options.groupedIndex&&a instanceof b.c1groupedfield?!1:!0:!1},e.prototype._canDropToGroupArea=function(){return void 0===this.options.groupedIndex},e.prototype._decorateHeaderContent=function(b){var e=this._owner(),f=a.grid.wijgrid.CSS,g=e.options.wijCSS;if(this._isSortable()){var h=this._isSortableUI();h?b.wrapInner('<a class="'+f.headerCellText+" "+g.wijgridHeaderCellText+'" href="#" role="button" />').children("a").bind("click."+this.widgetName,this,c.proxy(this._onSortableElementClick,this)):d.prototype._decorateHeaderContent.apply(this,arguments);var i=f.headerCellSortIcon+" "+g.wijgridHeaderCellSortIcon+" "+g.icon,j=null;switch(this.options.sortDirection){case"ascending":b.append(j=c('<span class="'+i+" "+g.iconArrowUp+'"></span>'));break;case"descending":b.append(j=c('<span class="'+i+" "+g.iconArrowDown+'"></span>'))}j&&h&&j.css("cursor","pointer").bind("click."+this.widgetName,this,c.proxy(this._onSortableElementClick,this))}else d.prototype._decorateHeaderContent.apply(this,arguments)},e.prototype._onSortableElementClick=function(a){var b=a.data;return b.options.disabled?!1:(b.options.allowSort&&b._owner()._handleSort(b,a.ctrlKey),!1)},e.prototype._setupFilterCell=function(a){if(this.options.showFilter){var b=this._defCSS(),c=this._wijCSS();a.html('<table cellPadding="0" cellSpacing="0" class="'+b.filter+" "+c.wijgridFilter+" "+c.cornerAll+'"><tr><td style="width:100%"><input type="text" class="'+b.filterInput+" "+c.wijgridFilterInput+'" style="width:100%" /></td><td class="'+b.filterTrigger+" "+c.wijgridFilterTrigger+" "+c.cornerRight+" "+c.stateDefault+'"><span class="'+c.icon+" "+c.iconArrowDown+'"></span></td></tr></table>'),this._createFilterCellEditor(a)}},e.prototype._createFilterCellEditor=function(b){var d=this,e=this._owner(),f=a.grid.HTML5InputSupport.getDefaultInputType(e._isMobileEnv(),this.options),g=this._defCSS(),h=this._wijCSS(),i=this;b.find("."+g.filterTrigger).attr({"role":"button","aria-haspopup":"true"}).bind("mouseenter."+this.widgetName,function(a){i.options.disabled||c(this).addClass(h.stateDefault+" "+h.stateHover)}).bind("mouseleave."+this.widgetName,function(a){i.options.disabled||c(this).removeClass(h.stateDefault+" "+h.stateHover+" "+h.stateActive)}).bind("mouseup."+this.widgetName,this,function(a){i.options.disabled||c(this).removeClass(h.stateDefault+" "+h.stateActive)}).bind("mousedown."+this.widgetName,{"column":this},c.proxy(this._onFilterBtnClick,this)).bind("click."+this.widgetName,function(a){a.preventDefault()});var j=e.parse(this.options,a.grid.filterHelper.getSingleValue(this.options.filterValue));if(null===j||"undefined"===j)switch(a.grid.getDataType(this.options)){case"boolean":j=!1;break;case"number":case"currency":j=0;break;case"datetime":j=new Date;break;default:j=""}var k={"culture":e.options.culture,"cultureCalendar":e.options.cultureCalendar,"disabled":e.options.disabled,"decimalPlaces":function(a){var b=/^(n|p|c){1}(\d*)$/.exec(a);return b&&b[2]?parseInt(b[2],10):(b=/^(d){1}(\d*)$/.exec(a),b?0:2)}(this.options.dataFormatString),"imeMode":this.options.imeMode,"triggerMouseUp":function(a){d._closeAllDropdownsAndTestForThis()}};this.mFilterEditor=b.find("input").bind("keypress."+this.widgetName,c.proxy(this._onFilterEditorKeyPress,this));var l=function(a){d.mFilterEditorInitialized&&d._onFilterEditorValueChanged(a)};switch(this._getInputEditorType()){case"date":"text"===f?this.mFilterEditor.wijinputdate(c.extend(k,{"date":j,"dateFormat":this.options.dataFormatString||void 0,"showTrigger":!0,"dateChanged":function(a,b){l({"value":b.data})}})):this._createHtmlEditor(this.mFilterEditor,f,a.grid.HTML5InputSupport.toStr(j,f));break;case"text":this.mFilterEditor.wijinputtext(c.extend(k,{"text":j+"","textChanged":function(a,b){l({"value":b.text})}}));break;case"numberCurrency":this.mFilterEditor.wijinputnumber(c.extend(k,{"type":"currency","value":j,"valueChanged":function(a,b){l({"value":b.value})}}));break;case"numberNumber":"text"===f?this.mFilterEditor.wijinputnumber(c.extend(k,{"value":j,"valueChanged":function(a,b){l({"value":b.value})}})):this._createHtmlEditor(this.mFilterEditor,f,a.grid.HTML5InputSupport.toStr(j,f));break;case"numberPercent":this.mFilterEditor.wijinputnumber(c.extend(k,{"type":"percent","value":100*j,"valueChanged":function(a,b){l({"value":b.value/100})}}));break;default:throw"Unsupported editor type"}this.mFilterEditorInitialized=!0},e.prototype._createHtmlEditor=function(b,c,d){var e=a.grid.wijgrid.CSS,f=this._owner().options.wijCSS;return b[0].type=c,b.addClass(f.stateDefault).wrap('<span class="'+e.filterNativeHtmlEditorWrapper+" "+f.wijgridFilterNativeHtmlEditorWrapper+'"></span').val(d)},e.prototype._closeAllDropdownsAndTestForThis=function(){var a=this,b=this._owner(),d=!1;return b&&c.each(b._visibleLeaves(),function(b,c){var e=c;e.mDropDownFilterList&&(d||a!==c||(d=!0),e._removeDropDownFilterList())}),d},e.prototype._onFilterBtnClick=function(b){var d=this,f=b.data.column,g=f._owner();if(f.options.disabled||this._closeAllDropdownsAndTestForThis())return!1;b.target.focus();var h=a.grid.filterHelper.getSingleOperatorName(f.options.filterOperator).toLowerCase(),i=g.getFilterOperatorsByDataType(a.grid.getDataType(f.options)),j={"operators":c.extend(!0,[],i),"column":f.options},k=[];g._onFilterOperatorsListShowing(j),j.operators&&c.each(j.operators,function(a,b){k.push({"label":b.displayName||b.name,"value":b.name,"selected":b.name.toLowerCase()===h})}),f.mDropDownFilterList=c("<div />").addClass(a.grid.wijgrid.CSS.filterList+" "+g.options.wijCSS.wijgridFilterList).appendTo(document.body).wijlist({"autoSize":!0,"maxItemsCount":e.DROPDOWN_FILTERS_MAX,"selected":function(a,b){var c=d._getFilterValueFromEditor();f._removeDropDownFilterList(),g._handleFilter(f,b.item.value,c)}}).css("z-index",a.grid.getZIndex(g.mOuterDiv,9999)).wijlist("setItems",k).wijlist("renderList");var l=150|f.mDropDownFilterList.width();f.mDropDownFilterList.width(k.length>e.DROPDOWN_FILTERS_MAX?l+20:l).wijlist("refreshSuperPanel").position({"of":c(b.currentTarget),"my":"left top","at":"left bottom"}),f.mDropDownFilterList.$button=c(b.currentTarget);var m=f.mDropDownFilterList.eventUID=a.grid.getUID();c(document).bind("mousedown."+f.widgetName+"."+m,{"column":f},f._onDocMouseDown)},e.prototype._onFilterEditorKeyPress=function(b){if(b&&13===b.which){var c=this._owner(),d=this._getFilterValueFromEditor(),e=(this.options.filterOperator||"").toLowerCase();d?e&&"nofilter"!==e||(e="string"===a.grid.getDataType(this.options)?"contains":"equals"):(d=void 0,e="nofilter"),this._removeDropDownFilterList(),c._handleFilter(this,e,d)}},e.prototype._onDocMouseDown=function(b){var d=b.data.column,e=c(b.target),f=a.grid.wijgrid.CSS,g=e.parents("."+f.filterList+":first"),h=e.is("."+f.filterTrigger)?e:e.parents("."+f.filterTrigger+":first");h.length&&h[0]===d.mDropDownFilterList.$button[0]||g.length&&g[0]===d.mDropDownFilterList[0]||d._removeDropDownFilterList();
},e.prototype._removeDropDownFilterList=function(){if(this.mDropDownFilterList){var a=this.mDropDownFilterList.eventUID;this.mDropDownFilterList.remove(),this.mDropDownFilterList=null,c(document).unbind("mousedown."+this.widgetName+"."+a,this._onDocMouseDown)}},e.prototype._getInputEditorType=function(){switch(a.grid.getDataType(this.options)){case"number":return this.options.dataFormatString&&0===this.options.dataFormatString.indexOf("p")?"numberPercent":"numberNumber";case"currency":return"numberCurrency";case"datetime":return"date";default:return"text"}},e.prototype._getFilterValueFromEditor=function(){var b,c=this._owner(),d=a.grid.HTML5InputSupport.getDefaultInputType(c._isMobileEnv(),this.options);switch(this._getInputEditorType()){case"date":b="text"===d?this.mFilterEditor.wijinputdate("option","date")||new Date:a.grid.HTML5InputSupport.parse(this.mFilterEditor.val(),d)||new Date;break;case"text":b=this.mFilterEditor.wijinputtext("option","text");break;case"numberNumber":if("text"!==d){b=a.grid.HTML5InputSupport.parse(this.mFilterEditor.val(),d)||0;break}case"numberCurrency":b=this.mFilterEditor.wijinputnumber("option","value");break;case"numberPercent":b=this.mFilterEditor.wijinputnumber("option","value")/100}return b},e.prototype._setupFooterCell=function(b){var c=this.options;c.aggregate&&"none"!==c.aggregate?this._updateHTML(b,a.grid.stringFormat(c.footerText||"{0}",c._totalsValue||"")):d.prototype._setupFooterCell.apply(this,arguments)},e.prototype._postset_aggregate=function(a,b){this._owner().ensureControl(!1)},e.prototype._postset_allowSort=function(a,b){this._setupHeaderCell()},e.prototype._postset_dataType=function(a,b){throw"read-only"},e.prototype._postset_dataParser=function(a,b){this._owner().ensureControl(!1)},e.prototype._postset_disabled=function(a,b){this.mFilterEditor&&c.each(this.mFilterEditor.data(),function(b,c){c&&c.widgetName&&c.option&&c.option("disabled",a)})},e.prototype._postset_dataFormatString=function(a,b){this._owner().ensureControl(!1)},e.prototype._postset_filterOperator=function(a,b){this._owner().ensureControl(!0)},e.prototype._postset_filterValue=function(a,b){this._owner().ensureControl(!0)},e.prototype._postset_groupInfo=function(a,b){this._owner().ensureControl(!0)},e.prototype._postset_rowMerge=function(a,b){this._owner().ensureControl(!1)},e.prototype._postset_showFilter=function(a,b){this._owner().ensureControl(!1)},e.prototype._postset_sortDirection=function(a,b){this.options.sortOrder=0,this._owner().ensureControl(!0)},e.prototype._onFilterEditorValueChanged=function(a){},e.WIDGET_NAME="wijmo.c1field",e.DROPDOWN_FILTERS_MAX=8,e}(b.c1basefield);b.c1field=d;var e=function(a){function b(){a.apply(this,arguments),this.aggregate="none",this.allowSort=!0,this.dataKey=void 0,this.dataType=void 0,this.dataParser=void 0,this.dataFormatString=void 0,this.encodeHtml=!1,this.filterOperator="nofilter",this.filterValue=void 0,this.groupInfo={"expandInfo":[],"level":void 0,"groupSingleRow":!0,"collapsedImageClass":void 0,"expandedImageClass":void 0,"position":"none","outlineMode":"startExpanded","headerText":void 0,"footerText":void 0},this.imeMode="auto",this.inputType=void 0,this.readOnly=!1,this.rowMerge="none",this.showFilter=!0,this.sortDirection="none",this.valueRequired=!1}return __extends(b,a),b}(b.c1basefield_options);b.c1field_options=e,d.prototype.options=a.grid.extendWidgetOptions(b.c1basefield.prototype.options,new e),a.grid.registerColumnFactory(function(a,b){return d.test(b)?new d(a,b):null})}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(d){function e(a,b,c){d.call(this,a,b,c||e.WIDGET_NAME)}return __extends(e,d),e.test=function(a){return b.c1field.test(a)&&"boolean"===a.dataType},e.prototype._setupDataCell=function(b,d,e){var f=this._owner(),g=this.options,h=this._defCSS(),i=f._allowCellEditing()&&g.readOnly!==!0,j=a.getKeyCodeEnum(),k=c('<input class="'+h.inputMarker+'" type="checkbox" />');i||k.prop("disabled",!0),f.parse(g,f.mDataViewWrapper.getValue(e.data,g.dataKey))===!0&&k.prop("checked","checked"),b.empty().append(k),i&&b.children("input").bind("mousedown",function(a){var c=b.parent()[0],d=f.currentCell();d.tableCell()!==c&&f._onClick({"target":c}),d._isEdit()||f.beginEdit()}).bind("keydown",function(a){return a.which===j.ENTER?(f._endEditInternal(a),!1):void 0})},e.WIDGET_NAME="wijmo.c1booleanfield",e}(b.c1field);b.c1booleanfield=d,a.grid.registerColumnFactory(function(a,b){return d.test(b)?new d(a,b):null})}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=(jQuery,function(b){function c(a,d,e){b.call(this,a,d,e||c.WIDGET_NAME)}return __extends(c,b),c.test=function(a){return!(!a||!a.columns)},c.prototype._provideDefaults=function(){b.prototype._provideDefaults.call(this),a.grid.shallowMerge(this.options,c.prototype.options),this.options.dataKey=null},c.WIDGET_NAME="wijmo.c1bandfield",c}(b.c1basefield));b.c1bandfield=c;var d=function(a){function b(){a.apply(this,arguments),this.columns=[]}return __extends(b,a),b}(b.c1basefield_options);b.c1bandfield_options=d,c.prototype.options=a.grid.extendWidgetOptions(b.c1basefield.prototype.options,new d),a.grid.registerColumnFactory(function(a,b){return b&&b.columns?new c(a,b):null})}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(b){function d(a,c,e,f){b.call(this,c,f||d.WIDGET_NAME),this.mWijgrid=a,this._attachToElement(e),this._createContent(),this.mWijgrid.options.allowColMoving&&this.mWijgrid._UIDragndrop(!0).attach(this)}return __extends(d,b),d.prototype._destroy=function(){this.mWijgrid._UIDragndrop()&&this.mWijgrid._UIDragndrop(!1).detach(this),this.mWijgrid=null,b.prototype._destroy.apply(this,arguments)},d.prototype._owner=function(){return this.mWijgrid},d.prototype._createContent=function(){var b=a.grid.wijgrid.CSS,d=this.mWijgrid.options.wijCSS,e=c('<span class="'+b.groupAreaButtonClose+" "+d.wijgridGroupAreaButtonClose+" "+d.stateDefault+" "+d.cornerAll+'"><span class="'+d.icon+" "+d.iconClose+'"></span></span>').bind("click."+this.widgetName,this,this._onCloseClick);if(this.element.addClass(b.groupAreaButton+" "+d.wijgridGroupAreaButton+" "+d.stateDefault+" "+d.cornerAll).html(this.options.headerText||"").prepend(e),this._isSortableUI()&&this.element.bind("click."+this.widgetName,this,c.proxy(this._onSortableElementClick,this)),this._isSortable()){var f=b.groupAreaButtonSort+" "+d.wijgridGroupAreaButtonSort+" "+d.icon;switch(this.options.sortDirection){case"ascending":this.element.append(c('<span class="'+f+" "+d.iconArrowUp+'"></span>'));break;case"descending":this.element.append(c('<span class="'+f+" "+d.iconArrowDown+'"></span>'))}}},d.prototype._onCloseClick=function(a){var b=a.data;return b.options.disabled||b.mWijgrid._handleUngroup(b),!1},d.prototype._onSortableElementClick=function(a){var b=a.data;return b.options.disabled?!1:(b.options.allowSort&&b.mWijgrid._handleSort(b,a.ctrlKey),!1)},d.prototype._canDrag=function(){return this.options.allowMoving===!0},d.prototype._canDropTo=function(a){return a instanceof d},d.prototype._canDropToGroupArea=function(){return this.options.groupedIndex!==this.mWijgrid._groupedLeaves().length-1},d.prototype._isSortable=function(){return a.grid.c1field.test(this.options)},d.prototype._isSortableUI=function(){return this.mWijgrid.options.allowSorting&&this.options.allowSort&&this._isSortable()},d.WIDGET_NAME="wijmo.c1groupedfield",d}(b.widgetEmulator);b.c1groupedfield=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._create=function(){this.element.css("display","inline").addClass(this.options.wijCSS.widget)},b.prototype._destroy=function(){this.mBtnElement=null},b.prototype._init=function(){var a=this;this.mBtnElement=this._createElement(this.options).addClass("wijmo-wijgrid-commandbutton").click(function(b){!a.options.disabled&&c.isFunction(a.options.click)&&a.options.click.call(self,b)}),this.element.append(this.mBtnElement),this._attachWidget(this.mBtnElement,this.options)},b.prototype._setOption=function(b,c){var d=this.options[b];a.prototype._setOption.apply(this,[b,c]),d!==c&&"disabled"===b&&this._onDisabledChanged(c===!0)},b.prototype._createElement=function(a){throw"not implemented"},b.prototype._attachWidget=function(a,b){throw"not implemented"},b.prototype._btnElement=function(){return this.mBtnElement},b.prototype._onDisabledChanged=function(a){},b}(a.wijmoWidget);b.wijgridcommandbuttonbase=d;var e=function(){function a(){this.text=void 0,this.click=void 0,this.iconClass=void 0,this.disabled=!1}return a}();b.wijgridcommandbuttonbase_options=e,d.prototype.options=a.grid.extendWidgetOptions(a.wijmoWidget.prototype.options,new e),c.wijmo.registerWidget("wijgridcommandbuttonbase",d.prototype);var f=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._createElement=function(a){var b=c('<a href="#" />').text(a.text||"");return a.disabled&&b.prop("disabled","disabled"),b},b.prototype._attachWidget=function(a,b){},b.prototype._onDisabledChanged=function(a){var b=this._btnElement();b&&b.prop("disabled",a)},b}(d);b.wijgridcommandlink=f,c.wijmo.registerWidget("wijgridcommandlink",c.wijmo.wijgridcommandbuttonbase,f.prototype);var g=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._createElement=function(a){return c('<input type="button" />').val(a.text)},b.prototype._attachWidget=function(a,b){a.button({"disabled":b.disabled})},b.prototype._onDisabledChanged=function(a){var b=this._btnElement();b&&b.button({"disabled":a})},b}(d);b.wijgridcommandbutton=g,c.wijmo.registerWidget("wijgridcommandbutton",c.wijmo.wijgridcommandbuttonbase,g.prototype);var h=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._createElement=function(a){var b=c("<button />"),d=!!a.text;return d?b.text(a.text):b.html("&nbsp;"),b},b.prototype._attachWidget=function(a,b){var c=!!b.text;a.button({"disabled":b.disabled,"icons":{"primary":b.iconClass},"text":c})},b.prototype._onDisabledChanged=function(a){var b=this._btnElement();b&&b.button({"disabled":a})},b}(d);b.wijgridcommandimagebutton=h,c.wijmo.registerWidget("wijgridcommandimagebutton",c.wijmo.wijgridcommandbuttonbase,h.prototype);var i=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._createElement=function(a){var b=c("<button />").html("&nbsp;");return b},b.prototype._attachWidget=function(a,b){a.button({"disabled":b.disabled,"icons":{"primary":b.iconClass},"text":!1})},b.prototype._onDisabledChanged=function(a){var b=this._btnElement();b&&b.button({"disabled":a})},b}(d);b.wijgridcommandimage=i,c.wijmo.registerWidget("wijgridcommandimage",c.wijmo.wijgridcommandbuttonbase,i.prototype)}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(b){function d(){b.apply(this,arguments)}return __extends(d,b),d.test=function(a){return!(!a||!a.buttonType)},d.prototype._provideDefaults=function(){b.prototype._provideDefaults.call(this),a.grid.shallowMerge(this.options,d.prototype.options),this.options.dataKey=null},d.prototype._createCommand=function(a,b,d,e){var f=c.extend({},{"text":b.text,"iconClass":b.iconClass,"disabled":this._owner().options.disabled,"click":function(a){var f=!0;if(c.isFunction(b.click)){var g=b.click.apply(this,[a,{"row":d,"column":this.options}]);f=g!==!1&&!a.isDefaultPrevented()}f&&e&&e.apply(this,[a,{"row":d}]),a.preventDefault()}}),g=c("<div />");switch(a.append(g),this.options.buttonType){case"link":g.wijgridcommandlink(f);break;case"imageButton":g.wijgridcommandimagebutton(f);break;case"button":g.wijgridcommandbutton(f);break;case"image":g.wijgridcommandimage(f);break;default:throw"Unknown buttonType"}},d}(b.c1basefield);b.c1buttonbasefield=d;var e=function(a){function b(){a.apply(this,arguments),this.buttonType="button"}return __extends(b,a),b}(b.c1basefield_options);b.c1buttonbasefield_options=e,d.prototype.options=a.grid.extendWidgetOptions(b.c1basefield.prototype.options,new e)}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=(jQuery,function(c){function d(a,b,e){c.call(this,a,b,e||d.WIDGET_NAME)}return __extends(d,c),d.test=function(a){return!(!b.c1buttonbasefield.test(a)&&!a.command)},d.prototype._provideDefaults=function(){c.prototype._provideDefaults.call(this),a.grid.shallowMerge(this.options,b.c1basefield.prototype.options),this.options.command=this.options.command||{},a.grid.shallowMerge(this.options.command,d.prototype.options.command)},d.prototype._setupDataCell=function(a,b,c){this._createCommand(a,this.options.command,c,null)},d.WIDGET_NAME="wijmo.c1buttonfield",d}(b.c1buttonbasefield));b.c1buttonfield=c;var d=function(a){function b(){a.apply(this,arguments),this.command=void 0}return __extends(b,a),b}(b.c1buttonbasefield_options);b.c1buttonfield_options=d,c.prototype.options=a.grid.extendWidgetOptions(b.c1buttonbasefield.prototype.options,new d),a.grid.registerColumnFactory(function(a,b){return c.test(b)?new c(a,b):null})}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=(jQuery,function(b){function c(a,d,e){b.call(this,a,d,e||c.WIDGET_NAME)}return __extends(c,b),c.test=function(a){return!!(a.showDeleteButton&&a.showDeleteButton!==!1||a.showEditButton&&a.showEditButton!==!1||a.cancelCommand||a.deleteCommand||a.editCommand||a.updateCommand)},c.prototype._provideDefaults=function(){b.prototype._provideDefaults.call(this),a.grid.shallowMerge(this.options,c.prototype.options),this.options.cancelCommand=this.options.cancelCommand||{},a.grid.shallowMerge(this.options.cancelCommand,c.prototype.options.cancelCommand),this.options.deleteCommand=this.options.deleteCommand||{},a.grid.shallowMerge(this.options.deleteCommand,c.prototype.options.deleteCommand),this.options.editCommand=this.options.editCommand||{},a.grid.shallowMerge(this.options.editCommand,c.prototype.options.editCommand),this.options.updateCommand=this.options.updateCommand||{},a.grid.shallowMerge(this.options.updateCommand,c.prototype.options.updateCommand)},c.prototype._setupDataCell=function(a,b,c){var d=this.options,e=this._owner();16&c.state?d.showEditButton&&(this._createCommand(a,d.updateCommand,c,function(a,b){e.updateRow()}),a.append(document.createTextNode("\xa0")),this._createCommand(a,d.cancelCommand,c,function(a,b){e.cancelRowEditing()})):(d.showEditButton&&this._createCommand(a,d.editCommand,c,function(a,b){e.editRow(c.dataItemIndex)}),d.showDeleteButton&&(d.showEditButton&&a.append(document.createTextNode("\xa0")),this._createCommand(a,d.deleteCommand,c,function(a,b){e.deleteRow(c.dataItemIndex)}))),a.addClass("wijmo-wijgrid-innercell-command")},c.WIDGET_NAME="wijmo.c1commandbuttonfield",c}(b.c1buttonbasefield));b.c1commandbuttonfield=c;var d=function(a){function b(){a.apply(this,arguments),this.showDeleteButton=!1,this.showEditButton=!1,this.cancelCommand={"text":"Cancel","iconClass":"ui-icon-close","click":void 0},this.deleteCommand={"text":"Delete","iconClass":"ui-icon-trash","click":void 0},this.editCommand={"text":"Edit","iconClass":"ui-icon-pencil","click":void 0},this.updateCommand={"text":"Update","iconClass":"ui-icon-disk","click":void 0}}return __extends(b,a),b}(b.c1buttonbasefield_options);b.c1commandbuttonfield_options=d,c.prototype.options=a.grid.extendWidgetOptions(b.c1buttonbasefield.prototype.options,new d),a.grid.registerColumnFactory(function(a,b){return c.test(b)?new c(a,b):null})}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";function c(b){var c=[];return a.grid.traverse(b,function(a){c.push(a)}),c}function d(b,c){if(!b||!c||-1===b.options.parentIdx)return null;var d=c[b.options.parentIdx];return-1===d.options.parentIdx?d:a.grid.getTompostParent(d,c)}function e(a,b,c){if(i.isArray(c.options.columns)&&b.options.parentIdx>=0){if(b.options.parentIdx===c.options.travIdx)return!0;if(b.options.parentIdx>c.options.travIdx)for(;;){if(b=a[b.options.parentIdx],b.options.travIdx===c.options.travIdx)return!0;if(-1===b.options.parentIdx)break}}return!1}function f(a){return g(a,0,-1)}function g(a,b,c){var d,e,f;if(a)for(d=0,e=a.length;e>d;d++)f=a[d],f.options&&(f=f.options),f.linearIdx=d,f.travIdx=b++,f.parentIdx=c,f.columns&&(b=g(f.columns,b,b-1));return b}function h(b,c){var d,e,f;if(b&&i.isFunction(c))for(d=0;d<b.length;d++)f=b[d],f.options&&(f=f.options),e=b.length,c(f,b),b.length===e?f.columns&&a.grid.traverse(f.columns,c):d--}var i=jQuery,j=function(){function b(){}return b.prototype.generateSpanTable=function(a){return this._height=this._width=this._inc=this._shift=0,this._table=[],this._traverseList=[],this._savedXPos=[],this._generateSpanTable(a,!0)},b.prototype._generateSpanTable=function(b,c){this._height=this.getVisibleHeight(b,c),this._traverseList=a.grid.flatten(b),this._width=this._traverseList.length;for(var d=0;d<this._height;d++){this._table[d]=[];for(var e=0;e<this._width;e++)this._table[d][e]={"column":null,"colSpan":0,"rowSpan":0}}return this._setTableValues(b,0,0),this._table},b.prototype.getVisibleHeight=function(a,b){var c,d,e,f,g=0;if(i.isArray(a))for(c=0,d=a.length;d>c;c++)f=this.getVisibleHeight(a[c],b),g=Math.max(g,f);else if(e=void 0===a.visible?!0:a.visible,a.parentVis=e&&b,i.isArray(a.columns)){for(c=0,d=a.columns.length;d>c;c++)f=this.getVisibleHeight(a.columns[c],a.parentVis),g=Math.max(g,f);if(!a.parentVis)return g;a.isLeaf=0===g,g++}else a.isLeaf=!0,a.parentVis&&(g=1);return g},b.prototype._getVisibleParent=function(a){for(;a;)if(a=this._traverseList[a.parentIdx],a&&(a.parentVis||void 0===a.parentVis))return a;return null},b.prototype._setTableValues=function(a,b,c){var d,e,f,g,h,j;if(i.isArray(a))for(d=0,e=a.length;e>d;d++)this._setTableValues(a[d],b,c);else{if(void 0===a.travIdx)throw"undefined travIdx";if(f=c+this._shift,a.parentVis&&(g=f+this._inc,this._table[b][g].column=a,this._savedXPos[a.travIdx]=g),i.isArray(a.columns))for(d=0,e=a.columns.length;e>d;d++)this._setTableValues(a.columns[d],b+1,c);a.parentVis?this._shift-f===0?(this._table[b][this._savedXPos[a.travIdx]].rowSpan=this._height-b,this._shift++):this._table[b][this._savedXPos[a.travIdx]].colSpan=this._shift-f:!i.isArray(a.columns)&&this._height>0&&(j=this._getVisibleParent(a),h=j?j.isLeaf:!1,h&&this._inc++,b>=this._height&&(b=this._height-1),g=c+this._shift+this._inc,this._table[b][g].column=a,h||(j&&this._savedXPos[j.travIdx]===g&&this._shiftTableElements(g,b),this._inc++))}},b.prototype._shiftTableElements=function(a,b){var c;for(c=0;b>c;c++)this._table[c][a+1]=this._table[c][a],this._table[c][a]={"column":null,"colSpan":0,"rowSpan":0},this._table[c][a+1].column&&this._savedXPos[this._table[c][a+1].column.travIdx]++},b}();b.bandProcessor=j,b.flatten=c,b.getTompostParent=d,b.isChildOf=e,b.setTraverseIndex=f,b.traverse=h}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function d(b){if(this._dvFilteringSettings=void 0,this._dvPagingSettings=void 0,this._dvSortingSettings=void 0,this._wgFilteringSettings=void 0,this._wgPagingSettings=void 0,this._wgSortingSettings=void 0,!b)throw"exception";this._wijgrid=b,this._dataView=b.mDataViewWrapper.dataView(),this._filterCache=new a.grid.filterOperatorsCache(b)}return d.prototype.compareSettings=function(){var b,c,d,e,f=!0;if(f=(b=this.DVPagingSettings())===(c=this.WGPagingSettings()),!f&&b&&c&&(f=b.pageSize===c.pageSize&&b.pageIndex===c.pageIndex),f&&(f=(b=this.DVSortingSettings())===(c=this.WGSortingSettings()),!f&&b&&c&&(e=b.length)===c.length))for(f=!0,d=0;e>d&&f;d++)f=b[d].dataKey===c[d].dataKey&&b[d].sortDirection===c[d].sortDirection;return f&&(b=this.DVFilteringSettings(),c=this.WGFilteringSettings(),f=a.grid.compareObj(b,c)),f},d.prototype.DVFilteringSettings=function(){function a(b,d){var e;c.each(b,function(b,f){if("string"==typeof f)e=f;else if(c.isArray(f))a(f,d);else{var g=f;d.filterValue.push(g.value),d.filterOperator.push({"name":g.customProps&&g.customProps.originalOperator||g.operator,"condition":e})}})}if(void 0===this._dvFilteringSettings){var b=[],d=this._dataView.filter();d&&c.each(d,function(d,e){var f={"dataKey":d};if(c.isArray(e))f.filterValue=[],f.filterOperator=[],a(e,f);else if(c.isPlainObject(e)){var g=e;f.filterValue=g.value,f.filterOperator=g.customProps&&g.customProps.originalOperator||e.operator||"Equals",f.customProps=g.customProps}else f.filterValue=e,f.filterOperator="Equals";b.push(f)}),this._dvFilteringSettings=b.length?b:null}return this._dvFilteringSettings},d.prototype.DVPagingSettings=function(){if(void 0===this._dvPagingSettings){var b=a.grid.asPagedDataView(this._dataView);if(b){var c=b.pageSize();this._dvPagingSettings=c>0?{"pageSize":b.pageSize(),"pageIndex":b.pageIndex()}:null}}return this._dvPagingSettings},d.prototype.DVSortingSettings=function(){if(void 0===this._dvSortingSettings){var b=[],d=a.data.sorting.compile(this._dataView.sort()).normalized;d&&c.each(d,function(a,c){null!==c&&b.push({"dataKey":"string"==typeof c?c:c.property,"sortDirection":c.asc||void 0===c.asc?"ascending":"descending","sortOrder":void 0,"customProps":c.customProps})}),this._dvSortingSettings=b.length?b:null}return this._dvSortingSettings},d.prototype.WGFilteringSettings=function(){if(void 0===this._wgFilteringSettings){var d=[],e=this._wijgrid._leaves(),f=this;e&&c.each(e,function(c,e){if(e instanceof b.c1field){var g=e.options,h=a.grid.deepExtend({},{"foo":g.filterValue}).foo,i=a.grid.deepExtend({},{"foo":g.filterOperator}).foo,j=a.grid.filterHelper.verify(i,h,g.dataType,f._filterCache);j&&d.push({"owner":e,"dataKey":g.dataKey,"filterValue":j.filterValue,"filterOperator":j.filterOperator,"customProps":{"travIdx":g.travIdx}})}}),this._wgFilteringSettings=d.length?d:null}return this._wgFilteringSettings},d.prototype.WGPagingSettings=function(){return void 0===this._wgPagingSettings&&(this._wgPagingSettings=this._wijgrid.options.allowPaging?{"pageSize":this._wijgrid.options.pageSize,"pageIndex":this._wijgrid.options.pageIndex}:null),this._wgPagingSettings},d.prototype.WGSortingSettings=function(){if(void 0===this._wgSortingSettings){var a={},d=[],e=this._wijgrid._groupedLeaves(!0),f=this._wijgrid._leaves(),g=0;c.each(e,function(b,c){if(c._isSortable()){var d=c.options;"none"===d.sortDirection&&(d.sortDirection="ascending"),a[d.dataKey]={"dataKey":d.dataKey,"sortDirection":d.sortDirection,"sortOrder":g++,"customProps":{"travIdx":d.travIdx}}}}),g++,c.each(f,function(c,d){if(d instanceof b.c1field&&d._isSortable()){var e=d.options;("ascending"===e.sortDirection||"descending"===e.sortDirection)&&(a[e.dataKey]||(a[e.dataKey]={"dataKey":e.dataKey,"sortDirection":e.sortDirection,"sortOrder":(e.sortOrder||0)+g,"customProps":{"travIdx":e.travIdx}}))}}),c.each(a,function(a,b){d.push(b)}),d.sort(function(a,b){return a.sortOrder-b.sortOrder}),c.each(d,function(a,b){delete b.sortOrder}),this._wgSortingSettings=d.length?d:null}return this._wgSortingSettings},d.prototype.MapWGToDV=function(){var a,d=this,e={};return this._mapPagingParams()&&(a=this.WGPagingSettings())?(e.pageIndex=a.pageIndex,e.pageSize=a.pageSize):e.pageSize=-1,this._mapSortingParams()&&(e.sort=[],(a=this.WGSortingSettings())&&(e.sort=[],c.each(a,function(a,b){e.sort.push({"property":b.dataKey,"asc":"ascending"===b.sortDirection,"customProps":b.customProps})}))),this._wijgrid.mDeficientFilters={},this._mapFilteringParams()&&(c.each(this._wijgrid._leaves(),function(a,c){if(c instanceof b.c1field){var e=c.options;void 0===e.filterOperator^void 0===e.filterValue&&(d._wijgrid.mDeficientFilters[e.dataKey]={"filterOperator":e.filterOperator,"filterValue":e.filterValue})}}),e.filter={},(a=this.WGFilteringSettings())&&(e.filter=this._convertFilterToDV(a)),c.isEmptyObject(e.filter)&&(e.filter=null)),e},d.prototype.MapDVToWG=function(){var d,e={},f={},g=this._mapSortingParams(),h=this._mapPagingParams(),i=this._mapFilteringParams(),j=a.grid.asPagedDataView(this._dataView),k=this;c.each(this._wijgrid._leaves(),function(a,c){if(c instanceof b.c1field){var d=c.options;g&&(d.sortOrder=0,d.sortDirection="none"),i&&(d.filterOperator="nofilter",d.filterValue=void 0),e[d.dataKey]=c,d.travIdx>=0&&(f[d.travIdx]=c)}}),h&&j&&(this._wijgrid.options.pageSize=j.pageSize(),this._wijgrid.options.pageIndex=j.pageIndex()),g&&(d=this.DVSortingSettings())&&c.each(d,function(a,b){var c;b.customProps&&b.customProps.travIdx>=0&&(c=f[b.customProps.travIdx]),c&&c.options.dataKey===b.dataKey||(c=e[b.dataKey]),c&&(c.options.sortDirection=b.sortDirection,c.options.sortOrder=a)}),i&&((d=this.DVFilteringSettings())&&c.each(d,function(a,b){var d;if(b.customProps&&b.customProps.travIdx>=0&&(d=f[b.customProps.travIdx]),d&&d.options.dataKey===b.dataKey||(d=e[b.dataKey]),d){var g=d.options;g.filterValue=b.filterValue,g.filterOperator=b.filterOperator,c.isPlainObject(g.filterOperator)&&(g.filterOperator=g.filterOperator.name),delete k._wijgrid.mDeficientFilters[g.dataKey]}}),c.each(this._wijgrid.mDeficientFilters,function(a,b){var c=e[a].options;c.filterOperator=b.filterOperator,c.filterValue=b.filterValue}))},d.prototype._mapPagingParams=function(){return this._wijgrid.options.allowPaging&&!this._wijgrid._customPagingEnabled()&&!this._wijgrid._serverShaping()},d.prototype._mapSortingParams=function(){return!this._wijgrid._serverShaping()},d.prototype._mapFilteringParams=function(){return!this._wijgrid._serverShaping()},d.prototype.makeProxyFilter=function(b,d,e,f){e=e.toLowerCase();var g=this,h=b.options,i="datetime"===h.dataType,j={"property":d,"operator":e,"value":f,"customProps":{"travIdx":h.travIdx}},k=this._filterCache.getByNameInt(e),l=a.data.filtering.ops[e];if("nofilter"!==e&&(k.isCustom||i))if(j.customProps.originalOperator=j.operator,k.isCustom)j.operator=c.extend(!0,{},k.op),j.operator.apply=j.operator.operator;else{j.operator=c.extend(!0,{},l);var m=h.inputType?a.grid.TimeUnitConverter.convertInputType(h.inputType):a.grid.TimeUnitConverter.convertFormatString(h.dataFormatString||"d");j.operator.apply=function(b,c){return b instanceof Date||(b=g._wijgrid.parse(h,b)),c instanceof Date||(c=g._wijgrid.parse(h,c)),a.grid.TimeUnitConverter.cutDate(b,m),a.grid.TimeUnitConverter.cutDate(c,m),l.apply(b,c)}}return j},d.prototype._convertFilterToDV=function(a){var b={},d=this;return c.each(a,function(a,e){var f,g,h,i,j=e.dataKey,k=[],l="and";if(c.isPlainObject(e)&&(g=e.filterOperator,h=e.filterValue,null!=g)){if(c.isArray(g)||(g=[g]),c.isArray(h)||(h=[h]),g.length!=h.length)throw"The number of filter operators must match the number of filter values";0!=g.length&&(c.each(g,function(a,b){function g(){i.length>1?i.splice(0,0,"or"):i=i[0]}function m(){null==l&&(l=f,k.splice(0,0,f))}var n;if("string"==typeof b&&(b={"name":b}),!c.isPlainObject(b)||!b.name)throw"Invalid filter operator";n=h[a],c.isArray(n)||(n=[n]),i=c.map(n,function(a){return d.makeProxyFilter(e.owner,j,b.name,a)}),l=null,f=b.condition||"or",k.length<=1||l==f?1==i.length||k.length<=1||"or"==l?(k=k.concat(i),m()):(g(),k.push(i),m()):(g(),k=[k,i],m())}),c.each(k,function(a,b){c.isArray(b)&&2==b.length&&(k[a]=b[1])}),2==k.length&&k.shift(),1==k.length&&(k=k[0]),b[j]=k)}}),b},d}();b.settingsManager=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";function c(a){return a&&"pageCount"in a?a:null}function d(a){return a&&"commitEdit"in a?a:null}var e=jQuery,f=function(){function b(a){this._domSource=null,this._ignoreAllEvents=!1,this._ignoreChangeEvent=!1,this._ignoreCurrentChangedEvent=!1,this._userData=null,this._totals=null,this._changeTimer=0,this._toDispose=[],this._isOwnDataView=!1,this._isWijdatasource=!1,this._isKODataView=!1,this._isDynamicWijdatasource=!1,this._wijgrid=a,this._createDataViewWrapper()}return b.prototype.data=function(){var b=this._getDataViewInst(),c=a.grid.asPagedDataView(b);return{"totalRows":null!=c?c.totalItemCount():(b.getSource()||[]).length,"totals":this._getTotals(),"emptyData":this.isBoundedToDOM()?this._domSource.emptyData:null}},b.prototype.dataView=function(){return this._getDataViewInst()},b.prototype.dispose=function(){var a=this._getDataViewInst();e.each(this._toDispose,function(a,b){b.dispose()}),a&&this._isOwnDataView&&a.dispose(),this._wijgrid.mWijDataView=null},b.prototype.ignoreChangeEvent=function(a){return arguments.length?void(this._ignoreChangeEvent=a===!0):this._ignoreChangeEvent},b.prototype.ignoreCurrentChangedEvent=function(a){return arguments.length?void(this._ignoreCurrentChangedEvent=a===!0):this._ignoreCurrentChangedEvent},b.prototype.isDataLoaded=function(){var a=this._getDataViewInst();return a.isLoaded()},b.prototype.isOwnDataView=function(){return this._isOwnDataView},b.prototype.getFieldsInfo=function(){var a=this._getDataViewInst();return this._propDescriptorsToFieldsInfo(a.getProperties())},b.prototype._propDescriptorsToFieldsInfo=function(a){var b={};return a&&e.each(a,function(a,c){"$$hash"!==c.name&&"$$hashKey"!==c.name&&(b[c.name]={"name":c.name,"type":c.type||"string"})}),b},b.prototype.isBoundedToDOM=function(){return null!==this._domSource},b.prototype.load=function(b){this._userData=b;var c=this._getDataViewInst();c||(this._createDataViewWrapper(),c=this._getDataViewInst()),this._onDataViewLoading();var d=new a.grid.settingsManager(this._wijgrid);if(b&&b.forceDataLoad||this._needToLoad(d)){var e=d.MapWGToDV(),f=!1;this._isWijdatasource&&!this._isDynamicWijdatasource&&c.isLoaded()&&(f=!0);var g=a.grid.asPagedDataView(c),h=-1;if(g&&e.pageSize>=0&&(h=g.totalItemCount())>=0){if(this._isOwnDataView&&!this._isKODataView&&!this._isDynamicWijdatasource&&g.pageSize()>0){var i=g.getSource();i&&i.length<h&&(h=i.length)}var j=Math.ceil(h/e.pageSize)||1,k=e.pageIndex;k>=j&&(k=Math.max(0,j-1)),e.pageIndex=k}this.ignoreCurrentChangedEvent(!0),c.refresh(e,f)}else this.isDataLoaded()&&(this._onDataViewLoaded(),this._onDataViewReset())},b.prototype.currentPosition=function(a){var b=this._getDataViewInst();if(!arguments.length)return b.currentPosition();this.ignoreCurrentChangedEvent(!0);try{b.currentPosition(a)}finally{this.ignoreCurrentChangedEvent(!1)}},b.prototype.getValue=function(a,b){var c=this._getDataViewInst();return"number"==typeof b&&(b+=""),c.getProperty(a,b)},b.prototype.setValue=function(a,b,c){var d=this._getDataViewInst();this.ignoreChangeEvent(!0);try{"number"==typeof b&&(b+=""),d.setProperty(a,b,c)}finally{this.ignoreChangeEvent(!1)}},b.prototype.makeDirty=function(){this._totals=null},b.prototype._createDataViewWrapper=function(){var b=this._wijgrid.options.data,c=this._getDataViewInst(),d=!1;if(!c){if(b||(this._domSource=this._processDOM(this._wijgrid.element,this._wijgrid.options.readAttributesFromData),b=this._domSource.items),d="undefined"!=typeof wijdatasource&&b instanceof wijdatasource,this._isKODataView=b instanceof a.grid.koDataView,this._isOwnDataView=e.isArray(b)||d||this._isKODataView,this._isWijdatasource=!(!this._isOwnDataView||!d),this._isDynamicWijdatasource=!!(this._isOwnDataView&&d&&b.dynamic),this._isOwnDataView&&!this._isKODataView){!this._domSource&&this._wijgrid.options.readAttributesFromData&&this._moveAttributesToExpando(b);
var f=this.isBoundedToDOM()&&a.grid.getTableSection(this._wijgrid.element,2);c=a.grid.GridDataView.create(a.data.asDataView(this._parseOwnData(b,f)))}else c=b;this._wijgrid.mWijDataView=c,this._toDispose.push(c.isLoading.subscribe(e.proxy(this._onDataViewLoadingInternal,this))),this._toDispose.push(c.isLoaded.subscribe(e.proxy(this._onDataViewLoadedInternal,this))),this._toDispose.push(c.subscribe(e.proxy(this._onDataViewChangeInternal,this))),this._toDispose.push(c.currentPosition.subscribe(e.proxy(this._onDataViewCurrentChangedInternal,this)))}},b.prototype._parseOwnData=function(b,c){if(b&&b.length){var d=e.extend(!0,[],this._wijgrid.options.columns),f=this._wijgrid,g=a.data.ArrayDataViewBase._getProps(b[0])||[],h=this._propDescriptorsToFieldsInfo(g),i=[];f._prepareColumnOptions(d,"merge",h,!0,!0),a.grid.traverse(d,function(a){f._needParseColumnDOM(a)&&i.push(a)}),i.length&&c&&e.each(b,function(b,d){a.grid.dataViewWrapper._parseDataItem(f,d,c&&c.rows[b],i)})}return b},b._parseDataItem=function(b,c,d,f){return e.each(f,function(e,f){var g=c[f.dataKey],h=b.parse(f,g,c,d.cells[f.dataKey]);if(a.grid.isNaN(h)){var i=null;d&&(i=d.cells[f.dataKey]),h=b.parseFailed(f,g,c,i)}c[f.dataKey]=h}),c},b.prototype._getDataViewInst=function(){return this._wijgrid.mWijDataView},b.prototype._needToLoad=function(a){var b=this._getDataViewInst();return this._isDynamicWijdatasource||this._isWijdatasource&&!b.isLoaded()?!0:this._isOwnDataView&&!this._isWijdatasource&&this.isDataLoaded()?!0:this.isDataLoaded()||b.isLoading()?!a.compareSettings():!0},b.prototype._validateSettings=function(a){if(!this._isOwnDataView&&this._wijgrid.options.allowPaging&&(a.DVPagingSettings()||{}).pageSize!==(a.WGPagingSettings()||{}).pageSize)throw"The pageSize option of the external dataView can't be changed."},b.prototype._onDataViewLoadingInternal=function(a){this._ignoreAllEvents||a&&(this._userData||this._onDataViewLoading())},b.prototype._onDataViewLoadedInternal=function(a){this._ignoreAllEvents||a&&this._onDataViewLoaded()},b.prototype._onDataViewChangeInternal=function(a){if(!this._ignoreAllEvents&&!this._ignoreChangeEvent){if(a.changes){if(a.length&&"detached"===a[0].entityState())return;e.each(a.changes,function(a,b){switch(b.changeType){case"remove":break;case"add":}})}this._onDataViewChange.apply(this,arguments)}},b.prototype._onDataViewCurrentChangedInternal=function(){this._ignoreAllEvents||this._ignoreCurrentChangedEvent||this._onDataViewCurrentChanged.apply(this,arguments)},b.prototype._onDataViewReset=function(){try{this.ignoreCurrentChangedEvent(!1),this.makeDirty(),this._wijgrid._onDataViewReset(this._userData,this._isKODataView)}finally{this._userData=null}},b.prototype._onPropertyChanged=function(a){var b=this;this._changeTimer>0&&(window.clearTimeout(this._changeTimer),this._changeTimer=0),-1!=this._changeTimer&&(this._changeTimer=window.setTimeout(function(){b._changeTimer=-1,b._wijgrid.mDestroyed||b._onDataViewChange(),b._changeTimer=0},100))},b.prototype._onDataViewChange=function(a){this._onDataViewReset()},b.prototype._onDataViewCurrentChanged=function(a,b){this._wijgrid._onDataViewCurrentPositionChanged(a,b)},b.prototype._onDataViewLoading=function(){this._wijgrid._onDataViewLoading()},b.prototype._onDataViewLoaded=function(){this._wijgrid._onDataViewLoaded()},b.prototype._getTotals=function(){if(!this._totals){var a=this._getDataViewInst();this._totals=this._prepareTotals(a,this._wijgrid._prepareTotalsRequest())}return this._totals||(this._totals={}),this._totals},b.prototype._prepareTotals=function(b,c){if(!c||0===c.length)return{};for(var d=[],e={},f=0,g=c.length;g>f;f++)d.push(new a.grid.tally(this._wijgrid));for(var f=0,g=b.count();g>f;f++)for(var h=0,i=d.length;i>h;h++){var j=c[h].options;d[h].add(this._wijgrid.parse(j,this.getValue(f,j.dataKey)))}for(var f=0,g=d.length;g>f;f++){var j=c[f].options;e[j.dataKey]=d[f].getValueString(c[f],this._wijgrid)}return e},b.prototype._processDOM=function(b,c){var d={"items":[],"emptyData":[],"header":a.grid.readTableSection(b,1)};return 1===a.grid.getTableSectionLength(b,2)&&e(a.grid.getTableSectionRow(b,2,0)).hasClass(a.grid.wijgrid.CSS.emptyDataRow)?d.emptyData=a.grid.readTableSection(b,2):d.items=a.grid.readTableSection(b,2,c),d},b.prototype._moveAttributesToExpando=function(b){e.each(b,function(b,c){var d,f=a.data.Expando.getFrom(c,!0);d=f[a.grid.EXPANDO]={"cellsAttributes":{},"rowAttributes":{}},c.rowAttributes&&(d.rowAttributes=c.rowAttributes,delete c.rowAttributes),e.each(c,function(a,b){e.isArray(b)&&(d.cellsAttributes[a]=b[1],c[a]=b[0])})})},b.prototype._wrapDataItem=function(a,b){return{"values":a,"originalRowIndex":b}},b.prototype._refreshSilent=function(){var a=this._getDataViewInst();if(a)try{this._ignoreAllEvents=!0,a.refresh()}finally{this._ignoreAllEvents=!1}},b.prototype._unsafeReplace=function(b,c){var d=this._getDataViewInst();!(d instanceof a.grid.GridDataView),d._unsafeReplace(b,c)},b.prototype._unsafeSplice=function(b,c,d){var e=this._getDataViewInst();!(e instanceof a.grid.GridDataView),2===arguments.length?e._unsafeSplice(b,c):e._unsafeSplice(b,c,d)},b.prototype._unsafePush=function(b){var c=this._getDataViewInst();!(c instanceof a.grid.GridDataView),c._unsafePush(b)},b}();b.dataViewWrapper=f,b.asPagedDataView=c,b.asEditableDataView=d;var g=function(){function a(a){this._subscriptions=[],this._callback=a}return a.prototype.insert=function(a,b){var c=null,d=this;return e.each(b,function(a,b){d._isValidPropName(a)&&b&&e.isFunction(b.subscribe)&&(c=c||[],c.push(b.subscribe(d._callback)))}),c?(this._subscriptions.length<a&&(this._subscriptions.length=a),this._subscriptions.splice(a,0,c),!0):!1},a.prototype.remove=function(a){var b=this._subscriptions[a];b&&e.each(b,function(a,c){c.dispose(),b[a]=null}),this._subscriptions[a]=null,this._subscriptions.splice(a,1)},a.prototype.removeAll=function(){for(var a;a=this._subscriptions.length;)this.remove(a-1);this._subscriptions=[]},a.prototype.dispose=function(){this.removeAll()},a.prototype._isValidPropName=function(a){return a&&"string"==typeof a?null===a.match(/^entityState|jQuery/):!0},a}();b.propChangeListener=g}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function b(b,c,d,e,f){this.cr=new a.grid.cellRange(-1,-1),this.isExpanded=!1,this.position="none",this._sum=-1,this._hasHeaderOrFooter=!0,void 0!==b&&(this.isExpanded=b),void 0!==c&&(this.cr=c),void 0!==d&&(this._sum=d),void 0!==e&&(this.position=e),void 0!==f&&(this._hasHeaderOrFooter=f)}return b.prototype.isSubRange=function(a){return this.cr.r1>=a.cr.r1&&this.cr.r2<=a.cr.r2},b.prototype.toString=function(){return this.cr.r1+"-"+this.cr.r2},b.prototype.collapse=function(b,c){var d=c.options.groupInfo,e=b._leaves();if(a.grid.groupHelper.isParentExpanded(e,this.cr,d.level)&&"footer"!==d.position&&"none"!==d.outlineMode){var f=a.grid.groupHelper.getGroupedColumnsCount(e);this._collapse(b,c,b._rows(),e,this,f,b._allowVirtualScrolling())}},b.prototype.expand=function(b,c,d){var e=c.options.groupInfo,f=b._leaves();if(a.grid.groupHelper.isParentExpanded(f,this.cr,e.level)){var g=a.grid.groupHelper.getGroupedColumnsCount(f);this._expand(b,c,b._rows(),f,this,g,d,!0,b._allowVirtualScrolling())}},b.prototype._collapse=function(b,c,d,e,f,g,h){var i=c.options.groupInfo,j=f.cr.r1,k=f.cr.r2;switch(i.position){case"header":case"headerAndFooter":this._toggleSketchRowVisibility(b.mSketchTable.row(f.cr.r1),void 0,!1),h||this._toggleRowVisibility(b,d.item(f.cr.r1),void 0,!1),j++}for(var l=j;k>=l;l++)this._toggleSketchRowVisibility(b.mSketchTable.row(l),!1,void 0),h||this._toggleRowVisibility(b,d.item(l),!1,void 0);f.isExpanded=!1;for(var l=i.level+1;g>=l;l++){var m=a.grid.groupHelper.getChildGroupRanges(e,f.cr,l-1);if(m)for(var n=m.ranges,o=0,p=n.length;p>o;o++){var q=n[o];switch(q.isExpanded=!1,m.column.options.groupInfo.position){case"header":case"headerAndFooter":this._toggleSketchRowVisibility(b.mSketchTable.row(q.cr.r1),!1,!1),h||this._toggleRowVisibility(b,d.item(q.cr.r1),!1,!1)}}}},b.prototype._expand=function(b,c,d,e,f,g,h,i,j){var k=c.options.groupInfo,l=f.cr.r1,m=f.cr.r2;switch(k.position){case"header":this._toggleSketchRowVisibility(b.mSketchTable.row(l),!0,i||h),j||this._toggleRowVisibility(b,d.item(l),!0,i||h),l++;break;case"footer":this._toggleSketchRowVisibility(b.mSketchTable.row(m),!0,void 0),j||this._toggleRowVisibility(b,d.item(m),!0,void 0),m--;break;case"headerAndFooter":this._toggleSketchRowVisibility(b.mSketchTable.row(l),!0,i||h),j||this._toggleRowVisibility(b,d.item(l),!0,i||h),i&&(this._toggleSketchRowVisibility(b.mSketchTable.row(m),!0,void 0),j||this._toggleRowVisibility(b,d.item(m),!0,void 0)),l++,m--}if(i)if(f.isExpanded=!0,k.level===g)for(var n=l;m>=n;n++)this._toggleSketchRowVisibility(b.mSketchTable.row(n),!0,void 0),j||this._toggleRowVisibility(b,d.item(n),!0,void 0);else{var o=a.grid.groupHelper.getChildGroupRanges(e,f.cr,k.level);if(o){var p=o.ranges,q=o.column;if(p.length&&l!==p[0].cr.r1)for(n=l;n<p[0].cr.r1;n++)this._toggleSketchRowVisibility(b.mSketchTable.row(n),!0,void 0),j||this._toggleRowVisibility(b,d.item(n),!0,void 0);if(h)for(var n=0,r=p.length;r>n;n++){var s=p[n];this._expand(b,q,d,e,s,g,h,!0,j)}else for(var n=0,r=p.length;r>n;n++){var s=p[n],t="footer"===q.options.groupInfo.position||"none"===q.options.groupInfo.outlineMode;this._expand(b,q,d,e,s,g,!1,t,j)}}}},b.prototype._toggleRowVisibility=function(b,c,d,e){if(c){var f=(a.grid.renderStateEx,b._view()),g=f._getRowInfo(c,!1);void 0!==d&&(d?g._extInfo.state&=-2:g._extInfo.state|=1),void 0!==e&&(e?g._extInfo.state&=-3:g._extInfo.state|=2),f._setRowInfo(g.$rows,g),b.mRowStyleFormatter._groupFormatter(g)}},b.prototype._toggleSketchRowVisibility=function(b,c,d){if(b){a.grid.renderStateEx;void 0!==c&&(c?b.extInfo.state&=-2:b.extInfo.state|=1),void 0!==d&&(d?b.extInfo.state&=-3:b.extInfo.state|=2)}},b}();b.groupRange=d;var e=function(){function d(){this.mGroupRowIdx=0,this.mFirstVisbileLeafIndex=0}return d.prototype.group=function(a,b){var d=this;this.mGrid=a,this.mLeaves=a._leaves(),this.mSketchTable=b,this.mGroupRowIdx=0;var e=!1;c.each(this.mLeaves,function(a,b){var c=b.options;c.groupInfo&&(delete c.groupInfo.level,delete c.groupInfo.expandInfo),!e&&(e=b._isFirstVisible())&&(d.mFirstVisbileLeafIndex=a)}),this._group()},d.prototype._group=function(){var a=this,d=this.mGrid._groupedLeaves(!0),e=1;0!=d.length&&(this.mSketchTable.ensureNotLazy(),c.each(d,function(c,d){if(a.mGroupRowIdx=0,b.c1field.isGroupedColumn(d)){var f=d.options;f.groupInfo.level=e,f.groupInfo.expandInfo=[],a._processRowGroup(d,e++)}}))},d.prototype._processRowGroup=function(b,c){for(var d=!0,e=(a.grid.renderStateEx,0);e<this.mSketchTable.count();e++){var f=this.mSketchTable.row(e);if(f.isDataRow()){var g,h,i,j,k=this._getGroupCellRange(e,b,c),l=!0,m="startCollapsed"===b.options.groupInfo.outlineMode;if(m||a.grid.groupHelper.isParentCollapsed(this.mLeaves,k,c)){if(b.options.groupInfo.groupSingleRow===!1&&k.r1===k.r2)continue;l=!1}if(c&&this.mGrid.options.groupIndent)for(var n=k.r1;n<=k.r2;n++)this._addIndent(this.mSketchTable.row(n).cell(this.mFirstVisbileLeafIndex),c);switch(d=!(b.options.groupInfo.groupSingleRow===!1&&k.r1===k.r2),b.options.groupInfo.position){case"header":i=this._addGroupRange(b.options.groupInfo,k,l,d);for(var o=k.r1;o<=k.r2;o++)f=this.mSketchTable.row(o),f.extInfo.groupLevel=c+1,l||(f.extInfo.state|=1);if(!d)break;this._updateByGroupRange(i,c),j=a.grid.groupHelper.isParentCollapsed(this.mLeaves,i.cr,c),g=this._buildGroupRow(b,i,k,!0,j),this.mSketchTable.insert(k.r1,g),g.extInfo.groupLevel=c,l||(g.extInfo.state|=2),j&&(g.extInfo.state|=1),e=k.r2+1;break;case"footer":if(i=this._addGroupRange(b.options.groupInfo,k,!0,d),!d)break;this._updateByGroupRange(i,c),h=this._buildGroupRow(b,i,k,!1,!1),h.extInfo.groupLevel=c,this.mSketchTable.insert(k.r2+1,h),e=k.r2+1,j=a.grid.groupHelper.isParentCollapsed(this.mLeaves,i.cr,c),j&&(h.extInfo.state|=1);break;case"headerAndFooter":for(i=this._addGroupRange(b.options.groupInfo,k,l,d),o=k.r1;o<=k.r2;o++)f=this.mSketchTable.row(o),f.extInfo.groupLevel=c+1,l||(f.extInfo.state|=1);if(!d)break;this._updateByGroupRange(i,c),j=a.grid.groupHelper.isParentCollapsed(this.mLeaves,i.cr,c),g=this._buildGroupRow(b,i,k,!0,j),h=this._buildGroupRow(b,i,k,!1,!1),this.mSketchTable.insert(k.r2+1,h),h.extInfo.groupLevel=c,(j||!l)&&(h.extInfo.state|=1),this.mSketchTable.insert(k.r1,g),g.extInfo.groupLevel=c,l||(g.extInfo.state|=2),j&&(g.extInfo.state|=1),e=k.r2+2;break;default:throw a.grid.stringFormat('Unknown Position value: "{0}"',b.options.groupInfo.position)}this.mGroupRowIdx++}}},d.prototype._buildGroupRow=function(c,d,e,f,g){var h=c.options,i=h.groupInfo,j=new b.SketchGroupRow(f,null),k=void 0,l="",m="";a.grid.wijgrid.CSS;j.extInfo.groupIndex=this.mGroupRowIdx,null!==(k=this.mSketchTable.valueAt(e.r1,h.leavesIdx))&&(l=this.mGrid.toStr(h,k)),j.groupByValue=k,this.mGrid._showRowHeader()&&j.add(b.HtmlCell.nbsp());var n=new b.HtmlCell("",null);j.add(n),h.aggregate&&"none"!==h.aggregate&&(m=this._getAggregate(e,c,c,f,l));var o=f?i.headerText:i.footerText;if("custom"===o){var p={"data":this.mSketchTable.getRawTable(),"column":h,"groupByColumn":h,"groupText":l,"text":"","groupingStart":e.r1,"groupingEnd":e.r2,"isGroupHeader":f,"aggregate":m};this.mGrid._trigger("groupText",null,p)&&(o=p.text)}else(void 0===o||null===o)&&(f&&(o="{1}: {0}"),(m||0===m)&&(o=o?o+" {2}":"{2}")),o=a.grid.stringFormat(o,h.encodeHtml?a.htmlEncode(l):l,h.headerText?h.headerText:"",this._wrapAggregateValue(m));o||(o="&nbsp;"),n.html+="<span>"+o+"</span>",this._addIndent(n,i.level-1);for(var q=1,r=this.mGrid._showRowHeader()?1:0,s=!0;r<this.mLeaves.length;r++){var t=this.mLeaves[r].options;if(t.parentVis){if(s){s=!1;continue}if(t.dynamic!==!0&&t.aggregate&&"none"!==t.aggregate)break;q++}}for(;r<this.mLeaves.length;r++){var u=this.mLeaves[r],v="";u.options.parentVis&&(u instanceof b.c1field&&(v=this._getAggregate(e,u,c,f,l)),v=v||"&nbsp;",j.add(new b.HtmlCell(this._wrapAggregateValue(v),{"groupInfo":{"leafIndex":u.options.leavesIdx,"purpose":1}})))}return n.ensureAttr().colSpan=q,n.ensureAttr().groupInfo={"leafIndex":h.leavesIdx,"purpose":0},j},d.prototype._getAggregate=function(b,c,d,e,f){var g="";if(!c.options.aggregate||"none"===c.options.aggregate)return g;if("custom"===c.options.aggregate){var h={"data":this.mSketchTable.getRawTable(),"column":c.options,"groupByColumn":d.options,"groupText":f,"text":"","groupingStart":b.r1,"groupingEnd":b.r2,"isGroupHeader":e},i=c.options.dataIndex;try{c.options.dataIndex=c.options.leavesIdx,this.mGrid._trigger("groupAggregate",null,h)&&(g=h.text)}finally{c.options.dataIndex=i}}else{for(var j=new a.grid.tally(this.mGrid),k=b.r1;k<=b.r2;k++)j.add(this.mSketchTable.valueAt(k,c.options.leavesIdx));g=j.getValueString(c,this.mGrid)}return g},d.prototype._getGroupCellRange=function(b,c,d){var e,f,g,h,i=c.options.leavesIdx,j=new a.grid.cellRange(b,i),k=a.grid.groupHelper.getParentGroupRange(this.mLeaves,j,d);if(e=this.mSketchTable.row(b),e.isDataRow())for(f=e.valueCell(c.options.leavesIdx).value,f instanceof Date&&(f=f.getTime()),j.r2=b,h=this.mSketchTable.count()-1;j.r2<h&&(this.mSketchTable.row(j.r2+1).isDataRow()&&!(k&&j.r2+1>k.cr.r2))&&(g=this.mSketchTable.valueAt(j.r2+1,c.options.leavesIdx),g instanceof Date&&(g=g.getTime()),f===g);j.r2++);return j},d.prototype._addGroupRange=function(b,c,d,e){var f,g,h,i,j=null,k=a.grid.groupHelper.getChildGroupIndex(c,b.expandInfo);return k>=0&&k<b.expandInfo.length?j=b.expandInfo[k]:(f=new a.grid.cellRange(c.r1,c.r1,c.r2,c.r2),g="footer"!==b.position&&e?d&&"startCollapsed"!==b.outlineMode:!0,j=new a.grid.groupRange(g,f,-1,b.position,e),b.expandInfo.push(j)),j&&e&&(h=c.r1,i=c.r2,"headerAndFooter"===b.position&&(i+=2),"headerAndFooter"!==b.position&&i++,j.cr.r2=i),j},d.prototype._updateByGroupRange=function(a,b){for(var c=0,d=this.mLeaves.length;d>c;c++){var e=this.mLeaves[c].options.groupInfo;if(e&&e.level<b)for(var f=e.expandInfo?e.expandInfo.length:0,g=0;f>g;g++){var h=e.expandInfo[g],i="headerAndFooter"===a.position?2:1;h.cr.r1>=a.cr.r1&&(h.cr.r1!==a.cr.r1||"footer"!==h.position)&&(h.cr.r1+=i),h.cr.r2>=a.cr.r1&&(h.cr.r2+=i)}}},d.prototype._addIndent=function(a,b){var c;b>0&&(c=this.mGrid.options.groupIndent)&&(a.ensureStyle().paddingLeft=c*b+"px")},d.prototype._wrapAggregateValue=function(b){return"<span class='"+a.grid.wijgrid.CSS.aggregateContainer+"'>"+b.toString()+"</span>"},d}();b.grouper=e}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=(jQuery,function(){function b(){}return b.getGroupInfo=function(b){if(b){var c,d,e,f=a.grid.groupHelper._getGroupInfoRegExp.exec(b.id);if(f)return c=parseInt(f[3],10),d=parseInt(f[2],10),e="H"===f[1],{"level":c,"index":d,"isHeader":e,"toString":function(){return(e?"GH":"GF")+d+"-"+c}}}return null},b.getColumnByGroupLevel=function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c],f=a[c].options;if(f.groupInfo&&f.groupInfo.level===b)return e}return null},b.getGroupedColumnsCount=function(a){for(var b=0,c=0,d=a.length;d>c;c++){var e=a[c].options.groupInfo;!e||"header"!==e.position&&"headerAndFooter"!==e.position&&"footer"!==e.position||b++}return b},b.getChildGroupIndex=function(a,b){for(var c,d,e=0,f=b.length-1;f>=e;){if(c=(f-e>>1)+e,d=b[c].cr.r1-a.r1,0===d)return c;0>d?e=c+1:f=c-1}return e},b.getParentGroupIndex=function(b,c){var d=a.grid.groupHelper.getChildGroupIndex(b,c);if(d>0&&d--,d<c.length){var e=c[d];if(b.r1>=e.cr.r1&&b.r2<=e.cr.r2)return d}return-1},b.getChildGroupRanges=function(b,c,d){var e=[],f=a.grid.groupHelper.getColumnByGroupLevel(b,d+1);if(f){for(var g=f.options.groupInfo.expandInfo,h=a.grid.groupHelper.getChildGroupIndex(c,g),i=h,j=g.length;j>i;i++){var k=g[i];if(!(k.cr.r2<=c.r2))break;e.push(k)}return{"column":f,"ranges":e}}return null},b.getParentGroupRange=function(b,c,d){if(void 0===d&&(d=65535),c&&d-2>=0)for(var e=b.length-1;e>=0;e--){var f=b[e].options.groupInfo;if(f&&f.expandInfo&&!(f.level<0)&&f.level===d-1){var g=a.grid.groupHelper.getParentGroupIndex(c,f.expandInfo);if(g>=0)return f.expandInfo[g]}}return null},b.isParentCollapsed=function(b,c,d){if(1===d)return!1;for(var e=d;e>1;e--){var f=a.grid.groupHelper.getParentGroupRange(b,c,e);if(!f)return!1;if(!f.isExpanded)return!0;c=f.cr}return!1},b.isParentExpanded=function(b,c,d){if(1===d)return!0;for(var e=d;e>1;e--){var f=a.grid.groupHelper.getParentGroupRange(b,c,e);if(!f||f&&f.isExpanded)return!0;c=f.cr}return!1},b._getGroupInfoRegExp=new RegExp(".*G([HF]){1}(\\d+)-(\\d+)$"),b}());b.groupHelper=c}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=(jQuery,function(){function a(a,b,c,d){switch(arguments.length){case 2:this.r1=this.r2=a,this.c1=this.c2=b;break;case 4:this.r1=a,this.r2=c,this.c1=b,this.c2=d;break;default:this.r1=0,this.r2=0,this.c1=0,this.c2=0}}return a.prototype.isSingleCell=function(){return this.r1===this.r2&&this.c1===this.c2},a}());b.cellRange=c;var d=function(){function c(){}return c.prototype.merge=function(a,b){this._leaves=a._visibleLeaves(),this._data=b,this._merge()},c.prototype._merge=function(){for(var a=!0,c=0,d=this._leaves.length;d>c;c++)if(this._leaves[c]instanceof b.c1field){var e=this._leaves[c];("free"===e.options.rowMerge||"restricted"===e.options.rowMerge)&&(a&&(this._data.ensureNotLazy(),a=!1),this._mergeColumn(e))}},c.prototype._mergeColumn=function(a){for(var b=a.options.leavesIdx,c=0,d=this._data.count();d>c;c++){var e=this._data.row(c);if(e.isDataRow()){var f=this._getCellRange(c,a);if(f.r1!==f.r2){var g=f.r2-f.r1+1;this._data.row(f.r1).cell(b).ensureAttr().rowSpan=g;for(var h=f.r1+1;h<=f.r2;h++)this._data.row(h).cell(b).visible(!1)}c=f.r2}}},c.prototype._getCellRange=function(b,c){var d=c.options.leavesIdx,e=new a.grid.cellRange(b,d),f=(this._data.valueAt(b,d)||"").toString(),g=this._data.count();for(e.r2=b;e.r2<g-1;e.r2++){var h=this._data.row(e.r2+1);if(!h.isDataRow()||(h.valueCell(d).value||"").toString()!==f)break}var i=c.options.leavesIdx;if(i>0&&"restricted"===c.options.rowMerge){var j=this._leaves[i-1];if(j instanceof a.grid.c1field){var k=this._getCellRange(b,j);e.r1=Math.max(e.r1,k.r1),e.r2=Math.min(e.r2,k.r2)}}return e},c}();b.merger=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";function c(a){if(a){for(;a.rows.length;){for(var b;(b=a.rows[0]).cells.length;){for(var c=b.cells[0];c.firstChild;)c.removeChild(c.firstChild);b.deleteCell(0),b=c=null}a.deleteRow(0)}for(;a.firstChild;)a.removeChild(a.firstChild)}a=null}function d(b,c){var d,e,f;if(D.isArray(b)&&D.isArray(c)){if(b.length===c.length){for(f=!0,d=0,e=b.length;e>d&&f;d++)f=a.grid.compareObj(b[d],c[d]);return f}}else{if(D.isPlainObject(b)&&D.isPlainObject(c)){for(d in b)if(b.hasOwnProperty(d)&&!a.grid.compareObj(b[d],c[d]))return!1;for(d in c)if(c.hasOwnProperty(d)&&!a.grid.compareObj(b[d],c[d]))return!1;return!0}b instanceof Date&&(b=b.getTime()),c instanceof Date&&(c=c.getTime())}return b===c}function e(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];var d,e;if(!a)return"";for(d=0,e=b.length;e>d;d++)a=a.replace(new RegExp("\\{"+d+"\\}","gm"),b[d]);return a}function f(a){return a&&!(0>a)||0===a}function g(a){return a&&a instanceof Date?!o(a.getTime()):!1}function h(a){return a.dataType||"string"}function i(a,b){a&&b&&a.find(".ui-widget").each(function(a,c){return D.each(D(c).data(),function(c,d){d.widgetName&&b(a,d)}),!0})}function j(a,b){var c=[];D.each(a.data(),function(a){0===a.indexOf(b)&&c.push(a)}),D.each(c,function(b,c){a.removeData(c)})}function k(a){return D.extend(!0,{"dynamic":!0,"isLeaf":!0},a)}function l(a,b){if(a){var c=a.nodeType?D(a):a,d=c.offset();if(d)return b?{"top":d.top,"left":d.left,"width":c[0].clientWidth||0,"height":c[0].clientHeight||0}:{"top":d.top,"left":d.left,"width":c.outerWidth(),"height":c.outerHeight()}}return null}function m(a,b){return a&&(a.start<0&&(a.start=0),a.end<0&&(a.end=0),a.start=Math.min(a.start,b),a.end=Math.min(a.end,b)),a}function n(b,c,d){if(!d&&3===b.nodeType){var e=(b.nodeValue||"").replace(/[\r\t\n]+/g,"");return e}if(b&&0!==c){if(!d&&3===b.nodeType)return b.nodeValue;if(1===b.nodeType){switch(b.type){case"button":case"text":case"textarea":case"select-one":return b.value;case"checkbox":return b.checked.toString()}for(var f,g="",h=0;f=b.childNodes[h++];)g+=a.grid._getDOMText(f,c-1,d);return g}}return""}function o(a){return a!==a}function p(a,b,c,d){var e,f,g,h=a.jquery||D.isArray(a),i=b+c;if(3===arguments.length)return h?D.data(a[0],i):D.data(a,i);if(h){for(e=0,f=a.length;f>e;e++)g=D.data(a[e],i,d);return g}return D.data(a,i,d)}function q(a,b){if(b&&a){var c,d,e;for(c in b)b.hasOwnProperty(c)&&(d=b[c],e=typeof d,"string"!==e&&"boolean"!==e&&"number"!==e||void 0!==a[c]||(a[c]=d))}}function r(a,b){if(a){var c,d,e,f,g=0,h={};for(c=0,d=a.attributes.length;d>c;c++)f=a.attributes[c].name,!f||b&&b(f)||(e=a.getAttribute(f),"style"===f&&(e="object"==typeof e?e.cssText:e),e||"class"!==f||(e=a.getAttribute("className")),e&&"function"!=typeof e&&(h[f]=e,g++));if(g)return h}return null}function s(b,c){var d,e,f,g,h;if(b){"object"==typeof c||D.isFunction(c)||(c={});for(d in b)e=b[d],f=c[f],e!==c&&(e&&(D.isPlainObject(e)||(g=D.isArray(e)))?(g?(g=!1,h=f&&D.isArray(f)?f:[]):h=f&&D.isPlainObject(f)?f:{},c[d]=a.grid.deepExtend(e,h)):c[d]=e)}return c}function t(a,b){return a&&a.jquery&&(a=a[0]),a?1===arguments.length?D.data(a,"wijgridwidgetName"):D.data(a,"wijgridwidgetName",b):void 0}function u(a,b){"undefined"==typeof b&&(b=99);var c=0;return a&&D.ui&&D.fn.zIndex&&(c=a.zIndex(),c&&c++),Math.max(c,b)}function v(a,b,c){return a>b&&b+c>a}function w(b,c,d,e,f,g){return a.grid.isOverAxis(b,d,f)&&a.grid.isOverAxis(c,e,g)}function x(){return"uid"+G++}function y(){return!(!navigator||!navigator.userAgent||null===navigator.userAgent.match(/Mobile.*Safari/))}function z(){return!!(navigator&&(navigator.userAgent||"").toLowerCase().indexOf("android")>=0)}function A(){return window.orientation||0}function B(a){return!(!a||"string"!=typeof a||"%"!==a[a.length-1])}function C(){if(!(H>0)){if(document&&document.body&&D.support.isTouchEnabled&&D.support.isTouchEnabled()){var a;try{a=D("<div></div>").css({"overflow":"scroll","width":30,"height":30,"position":"absolute","visibility":"hidden"}).append(D("<div></div>").css({"width":100,"height":100})).appendTo(document.body),H=a[0].offsetWidth-a[0].clientWidth}catch(b){}finally{a&&a.remove()}}H>0||(H=18)}return H}var D=jQuery;b.EXPANDO="__wijgrid",function(a){a[a.header=1]="header",a[a.data=2]="data",a[a.dataAlt=4]="dataAlt",a[a.filter=8]="filter",a[a.groupHeader=16]="groupHeader",a[a.groupFooter=32]="groupFooter",a[a.footer=64]="footer",a[a.emptyDataRow=128]="emptyDataRow"}(b.rowType||(b.rowType={}));b.rowType;!function(a){a[a.none=0]="none",a[a.rendering=1]="rendering",a[a.current=2]="current",a[a.hovered=4]="hovered",a[a.selected=8]="selected",a[a.editing=16]="editing"}(b.renderState||(b.renderState={}));b.renderState;!function(a){a[a.none=0]="none",a[a.hidden=1]="hidden",a[a.collapsed=2]="collapsed"}(b.renderStateEx||(b.renderStateEx={}));b.renderStateEx;!function(a){a[a.table=0]="table",a[a.head=1]="head",a[a.body=2]="body",a[a.foot=3]="foot"}(b.rowScope||(b.rowScope={}));b.rowScope;!function(a){a[a.none=0]="none",a[a.column=1]="column",a[a.row=2]="row"}(b.cellRangeExtendMode||(b.cellRangeExtendMode={}));b.cellRangeExtendMode;!function(a){a[a.createIfNull=0]="createIfNull",a[a.createAlways=1]="createAlways",a[a.dispose=2]="dispose"}(b.objectMode||(b.objectMode={}));b.objectMode;!function(a){a[a.groupCell=0]="groupCell",a[a.aggregateCell=1]="aggregateCell"}(b.groupRowCellPurpose||(b.groupRowCellPurpose={}));b.groupRowCellPurpose;!function(a){a[a.sketch=0]="sketch",a[a.rendered=1]="rendered",a[a.renderable=2]="renderable"}(b.dataRowsRangeMode||(b.dataRowsRangeMode={}));b.dataRowsRangeMode;!function(a){a[a.none=0]="none",a[a.overlapTop=1]="overlapTop",a[a.overlapBottom=2]="overlapBottom",a[a.reset=3]="reset"}(b.intersectionMode||(b.intersectionMode={}));b.intersectionMode;b.emptyTable=c,b.compareObj=d,b.stringFormat=e,b.validDataKey=f,b.validDate=g,b.getDataType=h,b.iterateChildrenWidgets=i,b.remove$dataByPrefix=j;var E=function(){function a(a){this._dom=a}return a.prototype.getSelection=function(){var a,b=0,c=0;return void 0!==this._dom.selectionStart?(b=this._dom.selectionStart,c=this._dom.selectionEnd):document.selection&&(a=document.selection.createRange().duplicate(),c=a.text.length,b=Math.abs(a.moveStart("character",-this._dom.value.length)),c+=b),{"start":b,"end":c,"length":c-b}},a.prototype.setSelection=function(a){if(void 0!==this._dom.selectionStart)this._dom.setSelectionRange(a.start,a.end);else{var b=this._dom.createTextRange();b.collapse(!0),b.moveStart("character",a.start),b.moveEnd("character",a.end),b.select()}},a.prototype.toggleSelection=function(a){var b=D(this._dom),c="onselectstart"in this._dom;a?c?b.unbind(".wijgrid-disableSelection"):b.css({"MozUserSelect":"","WebkitUserSelect":""}):c?b.bind("selectstart.wijgrid-disableSelection",function(a){a.preventDefault()}):b.css({"MozUserSelect":"-moz-none","WebkitUserSelect":"none"})},a}();b.domSelection=E,b.createDynamicField=k,b.bounds=l,b.ensureBounds=m,b._getDOMText=n,b.isNaN=o,b.dataPrefix=p,b.shallowMerge=q,b.getAttributes=r,b.deepExtend=s,b.widgetName=t;var F=function(){function b(){}return b.isExtendSupportRequired=function(b){return b=(b||"").toLowerCase(),b in a.grid.HTML5InputSupport._requiresExtendedSupport},b.getDefaultInputType=function(c,d){var e=(d.inputType||"").toLowerCase();if(!e&&c)switch(a.grid.getDataType(d)){case"number":case"currency":e="number";break;case"datetime":e="datetime"}return(!e||"text"!==e&&!b._isSupportedByBrowser(e))&&(e="text"),e},b.toStr=function(b,c){var d=b;if(c=(c||"").toLowerCase(),a.grid.HTML5InputSupport.isExtendSupportRequired(c))switch(c){case"datetime":d=b?d=Globalize.format(b,"yyyy-MM-ddTHH:mm:ssZ"):"";break;case"datetime-local":d=b?d=Globalize.format(b,"yyyy-MM-ddTHH:mm:ss"):"";break;case"date":d=b?d=Globalize.format(b,"yyyy-MM-dd"):"";break;case"month":d=b?d=Globalize.format(b,"yyyy-MM"):"";break;case"time":d=b?d=Globalize.format(b,"HH:mm:ss"):""}else d=b+"";return d},b.parse=function(b,c){var d,e=function(b){return b=new Date(b),a.grid.validDate(b)||(b=null),b};if(c=(c||"").toLowerCase(),a.grid.HTML5InputSupport.isExtendSupportRequired(c))switch(c){case"datetime":d=Globalize.parseDate(b,"yyyy-MM-ddTHH:mm:ssZ")||Globalize.parseDate(b,"yyyy-MM-ddTHH:mmZ")||e(b);break;case"datetime-local":d=Globalize.parseDate(b,"yyyy-MM-ddTHH:mm:ss")||Globalize.parseDate(b,"yyyy-MM-ddTHH:mm")||e(b);break;case"date":d=Globalize.parseDate(b,"yyyy-MM-dd")||e(b);break;case"month":d=Globalize.parseDate(b,"yyyy-MM");break;case"time":d=Globalize.parseDate(b,"HH:mm:ss")||Globalize.parseDate(b,"HH:mm");break;case"number":d=parseFloat(b)}else d=b;return d},b.extend=function(a,b,c){if(a)switch(c=(c||"").toLowerCase()){case"date":a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());break;case"month":a.setFullYear(b.getFullYear(),b.getMonth());break;case"time":a.setHours(b.getHours()),a.setMinutes(b.getMinutes()),a.setSeconds(b.getSeconds());break;default:a=b}else a=b;return a},b._isSupportedByBrowser=function(a){if(a){if(void 0===this._supportedInputTypesCache[a]){var b;try{var c=D("<input type='"+a+"' style='display:none' />");b=!0}catch(d){b=!1}this._supportedInputTypesCache[a]=b&&c[0].type===a}return this._supportedInputTypesCache[a]}return!1},b._requiresExtendedSupport={"date":"","datetime":"","datetime-local":"","month":"","time":""},b._supportedInputTypesCache={},b}();b.HTML5InputSupport=F,b.getZIndex=u,b.isOverAxis=v,b.isOver=w;var G=0;b.getUID=x,b.isMobileSafari=y,b.isAndroid=z,b.getWindowOrientation=A,b.isPercentage=B;var H=0;b.getSuperPanelScrollBarSize=C,D.extend(D.wijmo.wijgrid,{"rowType":a.grid.rowType,"renderState":a.grid.renderState,"bounds":a.grid.bounds})}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){function c(a,b){var c,d=!1;return function(){return d||(c=b?a.call(b):a(),d=!0),c}}!function(a){a[a.Millisecond=1]="Millisecond",a[a.Second=2]="Second",a[a.Minute=4]="Minute",a[a.Hour=8]="Hour",a[a.Day=16]="Day",a[a.Month=32]="Month",a[a.Year=64]="Year",a[a.DATE=112]="DATE",a[a.TIME=15]="TIME",a[a.ALL=a.DATE|a.TIME]="ALL"}(b.TimeUnit||(b.TimeUnit={}));var d=b.TimeUnit,e=function(){function b(){}return b.convertInputType=function(b){var c=a.grid.TimeUnitConverter.convertInputTypeToFormatString(b),d=a.grid.TimeUnitConverter.convertFormatString(c);return d},b.convertInputTypeToFormatString=function(a){switch((a||"").toLowerCase()){case"datetime":case"datetime-local":return"f";case"date":return"d";case"month":return"Y";case"time":return"t"}return""},b.convertFormatString=function(a){var b=0;if(a){if(1===a.length)switch(a[0]){case"t":return 12;case"T":return d.TIME;case"d":case"D":return d.DATE;case"Y":return 96;case"M":return 48;case"S":return d.ALL}var c,e;(c=a.indexOf("'"))>=0&&(e=a.lastIndexOf("'"))>=0&&c!==e&&(a=a.substr(0,c)+a.substring(e+1,a.length-1));for(var f=0,g=a.length;g>f;f++)switch(a[f]){case"d":b|=16;break;case"M":b|=32;break;case"y":b|=64;break;case"m":b|=4;break;case"h":case"H":b|=8;break;case"s":b|=2;break;case"f":b|=1}}return b||d.ALL},b.cutDate=function(a,b){return a&&(b=~b,1&b&&a.setMilliseconds(0),2&b&&a.setSeconds(0),4&b&&a.setMinutes(0),8&b&&a.setHours(0),16&b&&a.setDate(1),32&b&&a.setMonth(0),64&b&&a.setFullYear(0)),a},b}();b.TimeUnitConverter=e,b.lazy=c}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function a(){}return a.NoFilterOp={"applicableTo":null,"name":"NoFilter","displayName":"No filter","arity":1,"operator":function(){return!0}},a}(),e=function(){function b(b){this._cache={};var e=this;this._wijgrid=b,this._addOperator(null,d.NoFilterOp),c.each(a.data.filtering.ops,function(a,b){e._addOperator(a,b)}),c.each(b.options.customFilterOperators,function(a,b){
e._addOperator(null,b,!0)})}return b.prototype.getByName=function(a){var b=this.getByNameInt(a);return b?b.op:null},b.prototype.getByNameInt=function(a){return this._cache[(a||"").toLowerCase()]},b.prototype.getByDataType=function(a){var b,d=[];switch(c.each(this._cache,function(b,e){var f=e.op;(!f.applicableTo||c.inArray(a,f.applicableTo)>=0)&&d.push(e)}),this._wijgrid.options.filterOperatorsSortMode.toLowerCase()){case"alphabetical":d.sort(this._sortAlpha);break;case"alphabeticalcustomfirst":d.sort(this._sortAlphaCustomFirst);break;case"alphabeticalembeddedFirst":d.sort(this._sortAlphaEmbeddedFirst);break;case"none":}return b=c.map(d,function(a,b){return a.op})},b.prototype._addOperator=function(a,b,c){"undefined"==typeof c&&(c=!1),a&&!b.name&&(b.name=a),a=(a||b.name).toLowerCase(),this._cache[a]||(this._cache[a]={"op":b,"isCustom":c===!0})},b.prototype._sortAlpha=function(a,b){var c=a.op.name.toLowerCase(),d=b.op.name.toLowerCase();if(c!==d){if("nofilter"===c)return-1;if("nofilter"===d)return 1}return c===d?0:d>c?-1:1},b.prototype._sortAlphaEmbeddedFirst=function(a,b){var c=a.op.name.toLowerCase(),d=b.op.name.toLowerCase();if(c!==d){if("nofilter"===c)return-1;if("nofilter"===d)return 1}if(a.isCustom!==b.isCustom){if(a.isCustom)return 1;if(b.isCustom)return-1}return c===d?0:d>c?-1:1},b.prototype._sortAlphaCustomFirst=function(a,b){var c=a.op.name.toLowerCase(),d=b.op.name.toLowerCase();if(c!==d){if("nofilter"===c)return-1;if("nofilter"===d)return 1}if(a.isCustom!==b.isCustom){if(a.isCustom)return-1;if(b.isCustom)return 1}return c===d?0:d>c?-1:1},b}();b.filterOperatorsCache=e;var f=function(){function b(){}return b.getSingleValue=function(a){return c.isArray(a)&&(a=a[0],c.isArray(a)&&(a=a[0])),a},b.getSingleOperatorName=function(a){return c.isArray(a)&&(a=a[0]),a.name||a||""},b.verify=function(b,d,e,f){if(b)if(c.isArray(b)){var g,h,i=[],j=[];for(c.isArray(d)||(d=[d]),g=0,h=b.length;h>g;g++)a.grid.filterHelper._verifySingleOp(b[g],d[g],e,f)&&(i.push({"name":b[g].name||b[g],"condition":b[g].condition||"or"}),j.push(d?d[g]:void 0));if(i.length)return{"filterOperator":i,"filterValue":j}}else if(a.grid.filterHelper._verifySingleOp(b,d,e,f))return{"filterOperator":b,"filterValue":d};return null},b._verifySingleOp=function(b,d,e,f){if(b&&(b=b.name||b)){var g;if(b=(b||"").toLowerCase(),("nofilter"!==b||void 0!==d)&&(g=f.getByName(b))&&(null===g.applicableTo||c.inArray(e||"string",g.applicableTo)>=0)&&(1===g.arity||g.arity>1&&void 0!==a.grid.filterHelper.getSingleValue(d)))return!0}return!1},b.marker="_wijgrid",b}();b.filterHelper=f}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";function c(a,b){if(a&&!a.nodeType&&(a=a[0]),a)switch(b){case 1:return a.tHead;case 2:if(a.tBodies)return a.tBodies[0]||null;break;case 3:return a.tFoot;default:return a}return null}function d(a,b){var c;return a&&!a.nodeType&&(a=a[0]),a&&(c=this.getTableSection(a,b))?c.rows.length:0}function e(a,b,c){var d;return a&&!a.nodeType&&(a=a[0]),a&&(d=this.getTableSection(a,b))?d.rows[c]||null:null}function f(b,c,d){var e,f,g,i,j,k,l,m,n,o=[],p=function(a){return a=a.toLowerCase(),"rowspan"===a||"colspan"===a};if(b&&!b.nodeType&&(b=b[0]),b&&(n=this.getTableSection(b,c)))for(e=0,f=n.rows.length;f>e;e++){for(j=n.rows[e],k=[],d&&(l=a.data.Expando.getFrom(k,!0),m=l[a.grid.EXPANDO]={"cellsAttributes":{},"rowAttributes":a.grid.getAttributes(j)||{}}),g=0,i=j.cells.length;i>g;g++){var q=h.trim(j.cells[g].innerHTML);"&nbsp;"==q&&(q=""),k[g]=q,d&&(m.cellsAttributes[g]=a.grid.getAttributes(j.cells[g],p)||{})}o[e]=k}return o}function g(a){var b=a.parentNode.parentNode;switch(b.tagName.toLowerCase()){case"thead":return 1;case"tbody":return 2;case"tfoot":return 3}return null}var h=jQuery;b.getTableSection=c,b.getTableSectionLength=d,b.getTableSectionRow=e,b.readTableSection=f,b.determineSection=g;var i=function(){function b(a,b,c,d){this._width=0,this._table=a,this._offsets=[],d&&this.ensureColGroup(),c&&this.ensureTBody(),b||this._buildOffsets()}return b.prototype.element=function(){return this._table},b.prototype.width=function(){return this._width},b.prototype.getCellIdx=function(a,b){return a<this._width&&b>=0&&b<this._offsets.length?this._offsets[b][a].cellIdx:-1},b.prototype.getColumnIdx=function(a,b){if("number"!=typeof a){var c=a;a=c.cellIndex,b=c.parentNode.rowIndex}return a<this._width?this._offsets[b][a].colIdx:-1},b.prototype.clearSection=function(b){var c,d,e=a.grid.getTableSection(this._table,b);switch(b){case 2:c=this.getSectionLength(0),d=c+this.getSectionLength(b)-1;break;case 3:c=this.getSectionLength(0)+this.getSectionLength(1),d=c+this.getSectionLength(b)-1;break;default:c=0,d=this.getSectionLength(b)-1}for(;e.rows.length;)e.deleteRow(0);this._offsets.splice(c,d-c+1)},b.prototype.getSectionLength=function(b){return a.grid.getTableSectionLength(this._table,b)},b.prototype.getSectionRow=function(b,c){return a.grid.getTableSectionRow(this._table,c,b)},b.prototype.forEachColumnCellNatural=function(a,b,c){var d,e,f,g;for(d=0,e=this._table.rows.length;e>d;d++)if(f=this._table.rows[d],a<f.cells.length&&(g=b(f.cells[a],d,c),g!==!0))return g;return!0},b.prototype.forEachColumnCell=function(a,b,c){var d,e,f,g,h;for(d=0,e=this._offsets.length;e>d;d++)if(f=this._table.rows[d],g=this.getCellIdx(a,d),g>=0&&(h=b(f.cells[g],d,c),h!==!0))return h;return!0},b.prototype.forEachRowCell=function(a,b,c){var d,e,f,g=this._table.rows[a];for(d=0,e=g.cells.length;e>d;d++)if(f=b(g.cells[d],d,c),f!==!0)return f;return!0},b.prototype.colGroupTag=function(){var a=this._table.getElementsByTagName("colgroup");return a&&a[0]||null},b.prototype.colTags=function(){var a=this.colGroupTag();return a&&a.getElementsByTagName("col")||[]},b.prototype.ensureTBody=function(){return this._table.tBodies&&this._table.tBodies[0]||this._table.appendChild(document.createElement("tbody"))},b.prototype.ensureTHead=function(){return this._table.tHead&&this._table.tHead[0]||this._table.createTHead()},b.prototype.ensureTFoot=function(){return this._table.tFoot&&this._table.tFoot[0]||this._table.createTFoot()},b.prototype.ensureColGroup=function(){var a=this._table.getElementsByTagName("colgroup");return a&&a[0]||this._table.appendChild(document.createElement("colgroup"))},b.prototype.appendCol=function(a){var b=this.ensureColGroup();return a&&b.appendChild(a)||b.appendChild(document.createElement("col"))},b.prototype.removeOffset=function(a){a>=0&&a<this._offsets.length&&((0>a||!a&&0!==a)&&(a=this._offsets.length-1),this._offsets.splice(a,1))},b.prototype.insertOffset=function(a){var b,c;if(this._width>0){for(b=[],c=0;c<this._width;c++)b.push({"cellIdx":c,"colIdx":c});(0>a||!a&&0!==a)&&(a=this._offsets.length),this._offsets.splice(a,0,b)}},b.prototype.rebuildOffsets=function(){this._offsets=[],this._width=0,this._buildOffsets()},b.prototype._buildOffsets=function(){var a,b,c,d,e,f,g,h,i,j,k=[];for(b=0,c=this._table.rows.length;c>b;b++){for(a=[],this._offsets[b]=a,d=this._table.rows[b],e=0,f=0,g=d.cells.length;g>e;e++,f++){for(h=d.cells[e];k[f]>1;f++)k[f]--,a[f]={"cellIdx":-1,"colIdx":-1};for(k[f]>1||(k[f]=h.rowSpan),a[f]={"cellIdx":e,"colIdx":-1},a[e].colIdx=f,i=h.colSpan;i>1;i--)a[++f]={"cellIdx":-1,"colIdx":-1}}for(j=k.length;j>f;f++)k[f]--,a[f]={"cellIdx":-1,"colIdx":-1};this._width=Math.max(this._width,j)}},b}();b.htmlTableAccessor=i}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function d(a,b,c,d,e){"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=!1),"undefined"==typeof e&&(e=!0),this.__isEdit=!1,this._wijgrid=c,this._virtualize=e,d?(this._ci=a-this._wijgrid._getDataToAbsOffset().x,this._ri=b-this._wijgrid._getDataToAbsOffset().y,this._virtualize&&(this._ri=this._wijgrid._renderableBoundsCollection().getAbsIndex(this._ri+this._wijgrid._viewPortBounds().start))):(this._ci=a,this._ri=b)}return d.prototype.cellIndexAbs=function(){return this._ci+this._wijgrid._getDataToAbsOffset().x},d.prototype.rowIndexAbs=function(){var a=this._virtualize?this._wijgrid._renderableBoundsCollection().getRenderedIndex(this._ri)-this._wijgrid._viewPortBounds().start:this._ri;return a+=this._wijgrid._getDataToAbsOffset().y},d.prototype.cellIndex=function(a){return arguments.length?void(this._ci=a):this._ci},d.prototype.column=function(){var a=this.columnInst();return a?a.options:null},d.prototype.columnInst=function(){return this._wijgrid&&this._isValid()?this._wijgrid._visibleLeaves()[this.cellIndexAbs()]:null},d.prototype.container=function(){var b,d=this.tableCell();return d&&(b=c(d).children("div."+a.grid.wijgrid.CSS.cellContainer))?b:null},d.prototype.isEqual=function(a){return a&&a.rowIndex()===this.rowIndex()&&a.cellIndex()===this.cellIndex()},d.prototype.row=function(){var a=null,b=null;return this._wijgrid&&(this._virtualize?b=this._wijgrid._view()._getRowInfoBySketchRowIndex(this.rowIndex()):(a=this._wijgrid._view().rows().item(this.rowIndexAbs()),a&&a.length&&(b=this._wijgrid._view()._getRowInfo(a)))),b},d.prototype.rowIndex=function(a){return arguments.length?void(this._ri=a):this._ri},d.prototype.tableCell=function(){return this._wijgrid&&this._isValid()&&(!this._virtualize||this._isRendered())?this._wijgrid._view().getCell(this.cellIndexAbs(),this.rowIndexAbs()):null},d.prototype.value=function(c){var d,e,f;if(this._wijgrid&&this._isValid()&&(e=this.row(),2&e.type)){if(d=this.column(),0===arguments.length)return f=this._wijgrid.mDataViewWrapper.getValue(e.data,d.dataKey),this._wijgrid.parse(d,f);if(c=this._wijgrid.parse(d,c),null===c&&d.valueRequired||"string"!==a.grid.getDataType(d)&&b.isNaN(c))throw"invalid value";this._wijgrid.mDataViewWrapper.setValue(e.dataItemIndex,d.dataKey,c);var g=this._wijgrid.mSketchTable.row(this.rowIndex()),h=g.cell(d.leavesIdx);h.value=c}},d.prototype.toString=function(){return this.cellIndex()+":"+this.rowIndex()},d.prototype._clip=function(a,b){"undefined"==typeof b&&(b=!1);var c,d=!1;return b?(this.cellIndexAbs()<(c=a.topLeft().cellIndexAbs())&&(d=!0,this._ci=a.topLeft().cellIndex()),this.cellIndexAbs()>(c=a.bottomRight().cellIndexAbs())&&(d=!0,this._ci=a.bottomRight().cellIndex()),this.rowIndexAbs()<(c=a.topLeft().rowIndexAbs())&&(d=!0,this._ri=a.topLeft().rowIndex()),this.rowIndexAbs()>(c=a.bottomRight().rowIndexAbs())&&(d=!0,this._ri=a.bottomRight().rowIndex())):(this.cellIndex()<(c=a.topLeft().cellIndex())&&(d=!0,this._ci=c),this.cellIndex()>(c=a.bottomRight().cellIndex())&&(d=!0,this._ci=c),this.rowIndex()<(c=a.topLeft().rowIndex())&&(d=!0,this._ri=c),this.rowIndex()>(c=a.bottomRight().rowIndex())&&(d=!0,this._ri=c)),d},d.prototype._clone=function(){return new a.grid.cellInfo(this.cellIndex(),this.rowIndex(),this._wijgrid,!1,this._virtualize)},d.prototype._isValid=function(){return this.cellIndex()>=0&&this.rowIndex()>=0},d.prototype._isRendered=function(){var a;if(this._wijgrid&&(a=this._wijgrid._view())&&this._isValid()){var b=a._isRowRendered(this.rowIndex());return b>=0}return!1},d.prototype._isEdit=function(b){var d=null,e=a.grid.wijgrid.CSS.editedCellMarker;if(this._isValid())try{d=this.tableCell()}catch(f){}return arguments.length?(d&&c(d)[b?"addClass":"removeClass"](e),void(this.__isEdit=b)):d?c(d).hasClass(e):this.__isEdit},d.prototype._setGridView=function(a){this._wijgrid=a},d.outsideValue=new d(-1,-1,null),d}();b.cellInfo=d;var e=function(){function a(a,b){if(!a||!b)throw"invalid arguments";this._topLeft=a._clone(),this._bottomRight=b._clone()}return a.prototype.bottomRight=function(){return this._bottomRight},a.prototype.isEqual=function(a){return a&&this._topLeft.isEqual(a.topLeft())&&this._bottomRight.isEqual(a.bottomRight())},a.prototype.topLeft=function(){return this._topLeft},a.prototype.toString=function(){return this._topLeft.toString()+" - "+this._bottomRight.toString()},a.prototype._isIntersect=function(a){var b,c,d,e;return a&&(b=a.bottomRight().rowIndex()-a.topLeft().rowIndex()+1,c=this._bottomRight.rowIndex()-this._topLeft.rowIndex()+1,a.topLeft().rowIndex()+b-this._topLeft.rowIndex()<b+c)?(d=a.bottomRight().cellIndex()-a.topLeft().cellIndex()+1,e=this._bottomRight.cellIndex()-this._topLeft.cellIndex()+1,a.topLeft().cellIndex()+d-this._topLeft.cellIndex()<d+e):!1},a.prototype._isValid=function(){return this._topLeft._isValid()&&this._bottomRight._isValid()},a.prototype._clip=function(a,b){"undefined"==typeof b&&(b=!1);var c=this._topLeft._clip(a,b),d=this._bottomRight._clip(a,b);return c||d},a.prototype._clone=function(){return new a(this._topLeft._clone(),this._bottomRight._clone())},a.prototype._containsCellInfo=function(a){return a&&a.cellIndex()>=this._topLeft.cellIndex()&&a.cellIndex()<=this._bottomRight.cellIndex()&&a.rowIndex()>=this._topLeft.rowIndex()&&a.rowIndex()<=this._bottomRight.rowIndex()},a.prototype._containsCellRange=function(a){return a&&this._containsCellInfo(a.topLeft())&&this._containsCellInfo(a.bottomRight())},a.prototype._extend=function(a,b){return 1===a?(this._topLeft.rowIndex(b.topLeft().rowIndex()),this._bottomRight.rowIndex(b.bottomRight().rowIndex())):2===a&&(this._topLeft.cellIndex(b.topLeft().cellIndex()),this._bottomRight.cellIndex(b.bottomRight().cellIndex())),this},a.prototype._normalize=function(){var a=this._topLeft.cellIndex(),b=this._topLeft.rowIndex(),c=this._bottomRight.cellIndex(),d=this._bottomRight.rowIndex();this._topLeft.cellIndex(Math.min(a,c)),this._topLeft.rowIndex(Math.min(b,d)),this._bottomRight.cellIndex(Math.max(a,c)),this._bottomRight.rowIndex(Math.max(b,d))},a.prototype._height=function(){return this._bottomRight.rowIndex()-this._topLeft.rowIndex()},a.prototype._width=function(){return this._bottomRight.cellIndex()-this._topLeft.cellIndex()},a}();b.cellInfoRange=e,c.extend(c.wijmo.wijgrid,{"cellInfo":a.grid.cellInfo,"cellInfoRange":a.grid.cellInfoRange})}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function d(b,c){if(this.mIsRendered=!1,this._sizesAdjCache={"th":0,"col":0,"subTable":0},!b)throw"'wijgrid' must be specified";this._wijgrid=b,this._bounds=c,this._wijgrid.element.addClass(a.grid.wijgrid.CSS.table).addClass(this._wijgrid.options.wijCSS.wijgridTable)}return d.prototype.dispose=function(){this.toggleDOMSelection(!0),this._wijgrid.element.removeClass(a.grid.wijgrid.CSS.table).removeClass(this._wijgrid.options.wijCSS.wijgridTable)},d.prototype.ensureDisabledState=function(){var a="wijmo-wijgrid-disabled "+this._wijgrid.options.wijCSS.stateDisabled,b=this._wijgrid.options.disabled,d=this;c.each(this.subTables(),function(e,f){if(f){var g=c(f.element());b?(g.addClass(a),d._wijgrid._setAttr(g,"aria-disabled",!0)):(g.removeClass(a),d._wijgrid._setAttr(g,"aria-disabled",!1))}})},d.prototype.ensureWidth=function(a,b,c){this._setColumnWidth(a,b)},d.prototype.ensureHeight=function(a){},d.prototype.getScrollValue=function(){return null},d.prototype.getVisibleAreaBounds=function(a){throw"not implemented"},d.prototype.getVisibleContentAreaBounds=function(){throw"not implemented"},d.prototype.getFixedAreaVisibleBounds=function(){throw"not implemented"},d.prototype.isRendered=function(){return this.mIsRendered},d.prototype.render=function(){this._ensureRenderBounds(),this._preRender(),this._renderContent(),this._postRender()},d.prototype.toggleDOMSelection=function(b){c.each(this.subTables(),function(c,d){new a.grid.domSelection(d.element()).toggleSelection(b)}),new a.grid.domSelection(this._wijgrid.mOuterDiv).toggleSelection(b)},d.prototype.updateSplits=function(a){throw"not implemented"},d.prototype.getInlineTotalWidth=function(){throw"not implemented"},d.prototype.bodyRows=function(){if(!this._bodyRowsAccessor){if(!this.isRendered())throw"not rendered yet";this._bodyRowsAccessor=new a.grid.rowAccessor(this,2,0,0)}return this._bodyRowsAccessor},d.prototype.filterRow=function(){if(this._wijgrid.options.showFilter){if(!this.isRendered())throw"not rendered yet";var b=new a.grid.rowAccessor(this,1,0,0);return b.item(b.length()-1)}return null},d.prototype.footerRow=function(){if(this._wijgrid.options.showFooter){if(!this.isRendered())throw"not rendered yet";var b=new a.grid.rowAccessor(this,3,0,0);return b.item(0)}},d.prototype.headerRows=function(){var b;if(!this._headerRowsAccessor){if(!this.isRendered())throw"not rendered yet";b=this._wijgrid.options.showFilter?1:0,this._headerRowsAccessor=new a.grid.rowAccessor(this,1,0,b)}return this._headerRowsAccessor},d.prototype.rows=function(){if(!this._rowsAccessor){if(!this.isRendered())throw"not rendered yet";this._rowsAccessor=new a.grid.rowAccessor(this,0,0,0)}return this._rowsAccessor},d.prototype.focusableElement=function(){return this._wijgrid.mOuterDiv},d.prototype.forEachColumnCell=function(a,b,c){throw"not implemented"},d.prototype.forEachRowCell=function(a,b,c){throw"not implemented"},d.prototype.getAbsoluteCellInfo=function(a,b){throw"not implemented"},d.prototype.getAbsoluteRowIndex=function(a){throw"not implemented"},d.prototype.getCell=function(a,b){throw"not implemented"},d.prototype.getColumnIndex=function(a){throw"not implemented"},d.prototype.getHeaderCell=function(a){throw"not implemented"},d.prototype.getJoinedCols=function(a){throw"not implemented"},d.prototype.getJoinedRows=function(a,b){throw"not implemented"},d.prototype.getJoinedTables=function(a,b){throw"not implemented"},d.prototype.subTables=function(){throw"not implemented"},d.prototype._getMappedScrollMode=function(){var a=this._wijgrid.options.scrollMode,b="auto",c="auto";switch(a){case"horizontal":b="hidden",c="visible";break;case"vertical":b="visible",c="hidden";break;case"both":b="visible",c="visible"}return{"vScrollBarVisibility":b,"hScrollBarVisibility":c}},d.prototype._postRender=function(){this.mIsRendered=!0,this.ensureDisabledState(),this._sizesAdjCache.col=0,this._sizesAdjCache.th=0,this._sizesAdjCache.subTable=0;var a=this._wijgrid._visibleLeaves();if(a.length>0){var b=this.getHeaderCell(0),d=this.getJoinedCols(0);b&&(this._sizesAdjCache.th=c(b).leftBorderWidth()+c(b).rightBorderWidth()),d&&d.length&&(this._sizesAdjCache.col=c(d[0]).leftBorderWidth()+c(d[0]).rightBorderWidth())}var e=this.subTables()[0];this._sizesAdjCache.subTable=c(e.element()).leftBorderWidth()+c(e.element()).rightBorderWidth()},d.prototype._preRender=function(){this.mIsRendered=!1},d.prototype._ensureRenderBounds=function(){var a=this._wijgrid._getDataCellsRange(0);this._bounds.start=0,this._bounds.end=a.bottomRight().rowIndex()},d.prototype._renderContent=function(){this._renderCOLS(),this._renderHeader(),this._wijgrid.options.showFilter&&this._renderFilter(),this._renderBody(),this._wijgrid.options.showFooter&&this._renderFooter()},d.prototype._renderCOLS=function(){for(var a=this._wijgrid._visibleLeaves(),b=0,c=a.length;c>b;b++){var d=a[b],e=this._createCol(d,b);this._appendCol(e,d,b)}},d.prototype._renderHeader=function(){var b,c,d,e=(a.grid.rowType,a.grid.renderState,this._wijgrid._columnsHeadersTable());if(e&&(c=e.length))for(b=0;c>b;b++)d=this._insertEmptyRow(1,1,b,-1,-1,-1,void 0,{}),this._renderRow(d,null,e[b])},d.prototype._renderFilter=function(){var a=this._insertEmptyRow(8,1,-1,-1,-1,-1,void 0,{});this._renderRow(a,this._wijgrid._leaves(),null)},d.prototype._renderBody=function(){var b=(a.grid.renderState,this._wijgrid._leaves()),c=this._wijgrid.mSketchTable,d=-1,e=0,f=0,g=this._wijgrid.mDataOffset,h=this;this._bounds.start>=0&&this._bounds.end>=0&&this._wijgrid._renderableBoundsCollection().forEachIndex(this._bounds.start,this._bounds.end-this._bounds.start+1,function(a){var i=c.row(a-g),j=i.isDataRow(),k=i.groupByValue,l=h._insertEmptyRow(i.rowType,1,f++,j?++d:-1,i.dataItemIndex(),i.dataItemIndex(e),k,i.extInfo);h._renderRow(l,b,i)})},d.prototype._renderFooter=function(){var a=this._insertEmptyRow(64,1,-1,-1,-1,-1,void 0,{});this._renderRow(a,this._wijgrid._leaves(),null)},d.prototype._insertEmptyRow=function(a,b,c,d,e,f,g,h){var i=this._wijgrid._onViewInsertEmptyRow.apply(this._wijgrid,arguments),j=this._insertRow(a,c,i);return void 0===b&&(b=1),this._createRowInfo(j,a,b,c,d,e,f,g,h)},d.prototype._createEmptyCell=function(b,c,d){var e=(a.grid.rowType,this._wijgrid._onViewCreateEmptyCell.apply(this._wijgrid,arguments));return this._createCell(b.type,e)},d.prototype._insertRow=function(a,b,c){throw"not implemented"},d.prototype._createCell=function(b,d){var e;a.grid.rowType;if(d||(d=1===b?document.createElement("th"):document.createElement("td")),8!==b){if(e=document.createElement("div"),e.className=a.grid.wijgrid.CSS.cellContainer+" "+this._wijgrid.options.wijCSS.wijgridCellContainer,d.firstChild)for(;d.firstChild;)e.appendChild(d.firstChild);d.appendChild(e)}return c(d)},d.prototype._appendCell=function(a,b,c){throw"not implemented"},d.prototype._createCol=function(a,b){throw"not implemented"},d.prototype._appendCol=function(a,b,c){throw"not implemented"},d.prototype._renderRow=function(b,c,d){var e,f;a.grid.rowType;switch(b.type){case 8:this._renderFilterRow(b,c);break;case 64:this._renderFooterRow(b,c);break;case 1:this._renderHeaderRow(b,d);break;case 2:case 6:this._renderDataRow(b,c,d),e=d.attr(),f=d.style();break;case 128:case 16:case 32:this._renderSpannedRow(b,c,d),e=d.attr(),f=d.style();break;default:throw"unknown rowType"}this._rowRendered(b,e,f)},d.prototype._renderCell=function(a,b,d,e,f,g,h,i){var j=this._createEmptyCell(a,f.options.dataIndex,f),k=8===a.type?j:c(j[0].firstChild);this._appendCell(a,b,j),e?k.html(d):this._wijgrid.mCellFormatter.format(j,b,k,f,d,a),this._cellRendered(a,j,b,f,g,h,i)},d.prototype._renderDataRow=function(a,c,d){for(var e=0,f=c.length;f>e;e++){var g=c[e];if(g._visible()){var h,i=d.cell(e),j=i.attr(),k=i.style(),l=a.state;if(g instanceof b.c1field){if(!i||!i.visible())continue;h=this._wijgrid.toStr(g.options,i.value),j=i.attr(),k=i.style()}else h=null;g.options.readOnly&&(l&=-17),this._renderCell(a,e,h,!1,g,l,j,k)}}},d.prototype._renderFilterRow=function(b,c){for(var d=0,e=c.length;e>d;d++){var f=c[d];f._visible()&&this._renderCell(b,d,a.grid.filterHelper.getSingleValue(f.options.filterValue),!1,f,b.state)}},d.prototype._renderFooterRow=function(a,b){for(var c=0,d=b.length;d>c;c++){var e=b[c];e._visible()&&this._renderCell(a,c,"",!1,b[c],a.state)}},d.prototype._renderHeaderRow=function(a,b){for(var c=0,d=this._wijgrid._showRowHeader()?-1:0,e=0,f=b.length;f>e;e++){var g=b[e];if(g.column&&(g.column.thX2=d++,g.column.parentVis)){g.column.thX=c++,g.column.thY=a.sectionRowIndex;var h=this._wijgrid._findInstance(g.column);this._renderCell(a,e,g.column.headerText,!1,h,a.state,{"colSpan":g.colSpan,"rowSpan":g.rowSpan})}}},d.prototype._renderSpannedRow=function(a,b,c){for(var d=Math.min(b.length,c.cellCount()),e=0;d>e;e++){var f=b[e],g=128===a.type,h=c.cell(e);this._renderCell(a,e,h.html,g,f,a.state,h.attr(),h.style())}},d.prototype._cellRendered=function(a,b,c,d,e,f,g){this._wijgrid.mCellStyleFormatter.format(b,c,d,a,e,f,g),this._changeCellRenderState(b,e,!1),this._wijgrid._onViewCellRendered(a,b,c,d)},d.prototype._rowRendered=function(a,b,c){this._wijgrid.mRowStyleFormatter.format(a,b,c),a.state&=-2,this._setRowInfo(a.$rows,a),this._wijgrid._onViewRowRendered(a,b,c)},d.prototype._makeRowEditable=function(c){var d=this._wijgrid._visibleLeaves(),e=new a.grid.cellEditorHelper;if(d)for(var f=0;f<d.length;f++){var g=d[f];if(g instanceof b.c1field&&!g.options.readOnly){var h=c.$rows.children("td, th").eq(f);if(h.length){var i=this.getAbsoluteCellInfo(h[0],!0);this._changeCellRenderState(h,16,e.cellEditStart(this._wijgrid,i,null))}}}},d.prototype._isBodyRow=function(b){var c=(a.grid.rowType,b.type);return 2&c||16===c||32===c||128===c},d.prototype._changeRowRenderState=function(a,b,c){c?a.state|=b:a.state&=~b,this._setRowInfo(a.$rows,a)},d.prototype._changeCellRenderState=function(b,c,d){var e=a.grid.dataPrefix,f=this._wijgrid.mDataPrefix,g=e(b,f,"renderState");return d?(c=g|c,e(b,f,"renderState",c)):(c=g&~c,e(b,f,"renderState",c)),c},d.prototype._adjustWidthArray=function(a,b,d,e){var f,g,h,i=this._sumWidthArray(a),j=this._sumWidthArray(b),k=[],l=0,m=!0;if(d>=i){if(c.extend(!0,k,a),i===d||e)return k;f=d-i}else{if(c.extend(!0,k,b),j>=d)return k;f=d-j}return c.each(k,function(a,b){b.real||l++}),0!==l&&(g=Math.floor(f/l),h=f-g*l,c.each(k,function(a,b){b.real||(b.width+=g,m&&(b.width+=h,m=!1))})),k},d.prototype._getColumnWidth=function(d){var e=this._wijgrid._visibleLeaves()[d];if(e instanceof b.c1rowheaderfield)return{"width":b.c1rowheaderfield.COLUMN_WIDTH,"real":!0};if(void 0!==e.options._realWidth)return{"width":e.options._realWidth,"real":!0,"realPercent":a.grid.isPercentage(e.options.width)};for(var f=0,g=this.getJoinedTables(!0,d),h=g[2],i=0;2>i;i++){var j=g[i];if(null!==j){var k=j.element().rows,l=null,m=k.length;if(m>0){for(var n=m-1;n>=0&&(k[n].cells.length!==j.width()||(l=k[n],"none"===l.style.display));n--);if(l){var o=l.cells[h];f=Math.max(f,c(o).outerWidth())}}}}return{"width":f,"real":!1}},d.prototype._setColumnWidth=function(a,b){var d,e=this.getHeaderCell(a),f=this.getJoinedCols(a);if(b){var g=this;e&&(d=b-this._sizesAdjCache.th,0>d&&(d=0),e.style.width=d+"px"),c.each(f,function(a,c){c&&(d=b-g._sizesAdjCache.col,0>d&&(d=0),c.style.width=d+"px")})}},d.prototype._setTableWidth=function(a,b,d,e){var f,g,h=this;c.each(a,function(a,c){c[0].style.tableLayout="fixed",c[0].style.width=b-h._sizesAdjCache.subTable+"px"}),f=a[0].outerWidth(),g=f-b,0!==g&&this._setColumnWidth(e,d-g)},d.prototype._sumWidthArray=function(a,b,d){var e=0;return c.each(a,function(a,c){return void 0!==b&&void 0!==d&&(b>a||a>d)?!0:void(e+=c.width)}),e},d.prototype._clearBody=function(){c.each(this.subTables(),function(a,b){b.clearSection(2)})},d.prototype._rebuildOffsets=function(){c.each(this.subTables(),function(a,b){b.rebuildOffsets()})},d.prototype._removeBodyRow=function(b,c){"undefined"==typeof c&&(c=!0);var d,e,f,g=(a.grid.rowType,this._wijgrid._rows());if(b>=0&&b<(d=g.length())&&(e=this._getRowInfo(g.item(b),!1),f=this.getAbsoluteRowIndex(e.$rows[0]),e.$rows.remove(),c)){var h,i=this.getJoinedTables(!1,f);(h=i[0])&&h.removeOffset(i[2]),(h=i[1])&&h.removeOffset(i[2])}},d.prototype._insertBodyRow=function(b,c,d,e){var f,g,h=this._wijgrid._leaves(),i=(a.grid.rowType,this._wijgrid._view(),this._wijgrid._rows()),j=i.length();b.isDataRow();(0>c||c>=j||!c&&0!==c)&&(c=j),f=this._insertEmptyRow(b.rowType,b.renderState,c,-1,d,e,b.groupByValue,b.extInfo),this._renderRow(f,h,b),g=this.getAbsoluteRowIndex(f.$rows[0]);var k,l=this.getJoinedTables(!1,g);return(k=l[0])&&k.insertOffset(g),(k=l[1])&&k.insertOffset(g),f},d.prototype._findRowInfo=function(a){var b,d=this.bodyRows(),e=0,f=d.length();if(c.isFunction(a))for(e=0;f>e;e++)if(b=this._getRowInfo(d.item(e)),a(b)===!0)return b;return null},d.prototype._setRowInfo=function(b,c){var d,e,f="$rows"in c,g="data"in c;f&&(d=c.$rows,delete c.$rows),g&&(e=c.data,delete c.data),a.grid.dataPrefix(b,this._wijgrid.mDataPrefix,"rowInfo",c),f&&(c.$rows=d),g&&(c.data=e)},d.prototype._getRowInfo=function(b,d){"undefined"==typeof d&&(d=!0);var e=this._wijgrid,f=c(b[1]?b:b[0]),g=a.grid.dataPrefix(f,e.mDataPrefix,"rowInfo");if(g.$rows=f,d&&g.dataItemIndex>=0&&2&g.type)try{g.data=e._getDataItem(g.dataItemIndex)}catch(h){g.data=null}return g},d.prototype._getRowInfoBySketchRowIndex=function(a,b){if("undefined"==typeof b&&(b=!0),a>=0){var c=this._isRowRendered(a);if(!(c>=0)){var d=this._wijgrid.mSketchTable.row(a),e=null;if(d&&(e=d.getRowInfo(),b&&e.dataItemIndex>=0&&d.isDataRow()))try{e.data=this._wijgrid._getDataItem(e.dataItemIndex)}catch(f){e.data=null}return e}var g=this.bodyRows().item(c);if(g)return this._getRowInfo(g,b)}return null},d.prototype._createRowInfo=function(a,b,d,e,f,g,h,i,j){var k={"type":b,"state":d,"sectionRowIndex":e,"dataRowIndex":f,"dataItemIndex":g,"virtualDataItemIndex":h,"$rows":a?c(a):null,"_extInfo":j};return void 0!==i&&(k.groupByValue=i),g>=0&&2&b&&(k.data=this._wijgrid._getDataItem(g)),k},d.prototype._isRowRendered=function(a){var b=this._wijgrid._renderableBoundsCollection().getRenderedIndex(a);return b>=0&&b>=this._bounds.start&&b<=this._bounds.end?b-this._bounds.start:-1},d}();b.baseView=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(b){function d(a,c){b.call(this,a,c),this._dataTable=null,this._contentArea=null}return __extends(d,b),d.prototype.ensureWidth=function(a,d,e){var f=c(this._dataTable.element()),g=f.width()+d-e;b.prototype.ensureWidth.call(this,a,d,e),this._setTableWidth([f],g,d,a)},d.prototype.getVisibleAreaBounds=function(b){var c=a.grid.bounds(this._dataTable.element(),b);return c},d.prototype.getVisibleContentAreaBounds=function(){return this.getVisibleAreaBounds()},d.prototype.updateSplits=function(b){var d,e,f=this,g=this._wijgrid,h=g.options,i=g.element,j=[],k=[],l=[],m=g._visibleLeaves(),n=g.mOuterDiv;if(i.css({"table-layout":"","width":"auto"}),c.each(m,function(b,c){var d=c.options.width;(d||0===d)&&(d=a.grid.isPercentage(d)?n.width()*parseFloat(d)/100:parseFloat(d),(c.options.ensurePxWidth||h.ensureColumnsPxWidth)&&(c.options._realWidth=d),f._setColumnWidth(b,d))}),c.each(m,function(a,b){j.push(f._getColumnWidth(a))}),i.css("width","1px"),c.each(m,function(a,b){k.push(f._getColumnWidth(a))}),d=n.width(),l=this._adjustWidthArray(j,k,d,h.ensureColumnsPxWidth),c.each(l,function(a,b){var c=m[a];return void 0!==c.options._realWidth?void delete c.options._realWidth:void f._setColumnWidth(a,b.width)}),i.css("table-layout","fixed"),e=l.length-1,-1!==e){var o=n.width()-d;l[e].width+=o,this._setTableWidth([i],this._sumWidthArray(l,0,e),l[e].width,e)}},d.prototype.getInlineTotalWidth=function(){var a=this._dataTable.element(),b=a.style.width;return b&&"auto"!==b?b:""},d.prototype.forEachColumnCell=function(a,b,c){return this._dataTable.forEachColumnCell(a,b,c)},d.prototype.forEachRowCell=function(a,b,c){return this._dataTable.forEachRowCell(a,b,c)},d.prototype.getAbsoluteCellInfo=function(b,c){return new a.grid.cellInfo(this.getColumnIndex(b),b.parentNode.rowIndex,this._wijgrid,!0,c)},d.prototype.getAbsoluteRowIndex=function(a){return a.rowIndex},d.prototype.getCell=function(a,b){var c,d=this._dataTable.getCellIdx(a,b);return d>=0&&(c=this.getJoinedRows(b,0),c[0])?c[0].cells[d]:null},d.prototype.getColumnIndex=function(a){return this._dataTable.getColumnIdx(a)},d.prototype.getHeaderCell=function(b){var c,d=this._wijgrid._visibleLeaves()[b];return d&&(c=this._wijgrid._headerRows())?a.grid.rowAccessor.getCell(c.item(d.options.thY),d.options.thX):null},d.prototype.getJoinedCols=function(a){var b=c(this._dataTable.element()).find("> colgroup");return b.length&&a<b[0].childNodes.length?[b[0].childNodes[a],null]:[null,null]},d.prototype.getJoinedRows=function(a,b){return[this._dataTable.getSectionRow(a,b),null]},d.prototype.getJoinedTables=function(a,b){return[this._dataTable,null,b]},d.prototype.subTables=function(){return[this._dataTable]},d.prototype._preRender=function(){b.prototype._preRender.call(this),this._dataTable=new a.grid.htmlTableAccessor(this._wijgrid.element[0],!0,!0,!0)},d.prototype._postRender=function(){this._wijgrid.element.find("> tbody").addClass(this._wijgrid.options.wijCSS.content),this._dataTable=new a.grid.htmlTableAccessor(this._wijgrid.element[0]),this._wijgrid._setAttr(this._wijgrid.element,{"role":"grid","cellpadding":"0","border":"0","cellspacing":"0"}),this._wijgrid.element.css("border-collapse","separate"),b.prototype._postRender.call(this)},d.prototype._insertRow=function(b,c,d){var e;a.grid.rowType;switch(b){case 1:case 8:e=this._dataTable.ensureTHead();break;case 64:e=this._dataTable.ensureTFoot();break;default:e=this._dataTable.ensureTBody()}return d?[e.appendChild(d)]:(c>e.rows.length&&(c=-1),[e.insertRow(c)])},d.prototype._rowRendered=function(a,c,d){var e=a.$rows[0];!e.cells.length&&this._isBodyRow(a)?e.parentNode.removeChild(e):b.prototype._rowRendered.call(this,a,c,d)},d.prototype._appendCell=function(a,b,c){
a.$rows[0].appendChild(c[0])},d.prototype._createCol=function(a,b){return[document.createElement("col")]},d.prototype._appendCol=function(a,b,c){this._dataTable.appendCol(a[0])},d}(b.baseView);b.flatView=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(b){function d(d,e){b.call(this,d,e),this._verScrollBarSize=a.grid.getSuperPanelScrollBarSize(),this._viewTables={},this._splitAreas={},this._superPanelElementsCache={},this.element=d.element,this._staticDataRowIndex=d._getStaticIndex(!0),this._staticRowIndex=d._getRealStaticRowIndex(),this._staticColumnIndex=d._getRealStaticColumnIndex(),this._staticAllColumnIndex=-1===this._staticColumnIndex?-1:d._visibleLeaves()[this._staticColumnIndex].options.leavesIdx,this._mouseWheelHandler=c.proxy(this._onMouseWheel,this)}return __extends(d,b),d.prototype.dispose=function(){b.prototype.dispose.call(this),this._wijgrid.mOuterDiv.unbind("mousewheel",this._mouseWheelHandler)},d.prototype.ensureWidth=function(a,d,e){var f=this._wijgrid,g=this._staticColumnIndex,h=g>=a,i=c(this._viewTables.nw.element()),j=c(this._viewTables.ne.element()),k=c(this._viewTables.sw.element()),l=c(this._viewTables.se.element()),m=h?[i,k]:[j,l],n=(h?i.width():j.width())+d-e,o=this.getScrollValue();this._destroySuperPanel(),b.prototype.ensureWidth.call(this,a,d,e),this._setTableWidth(m,n,d,a);try{g>=0?f.mSplitDistanceX=i[0].offsetWidth:f.mSplitDistanceX=0}catch(p){}this._updateSplitAreaBounds(0),this._adjustRowsHeights();try{this._staticRowIndex>=0?f.mSplitDistanceY=Math.max(i[0].offsetHeight,j[0].offsetHeight):f.mSplitDistanceY=0}catch(p){}this._updateSplitAreaBounds(1),this.refreshPanel(o);var q=f._UIFrozener();q&&q.refresh()},d.prototype.ensureHeight=function(a){var b=this._wijgrid,d=c(this._viewTables.nw.element()),e=c(this._viewTables.ne.element()),f=c(this._viewTables.sw.element()),g=c(this._viewTables.se.element()),h=this.getScrollValue();if(this._destroySuperPanel(),arguments.length>0){var i=this.getJoinedRows(a,2);this._setRowHeight(i,this._getRowHeight(i))}g.css("height",""),f.css("height","");var j=Math.max(g.height(),f.height());g.height(j),f.height(j);try{this._staticRowIndex>=0?b.mSplitDistanceY=Math.max(d[0].offsetHeight,e[0].offsetHeight):b.mSplitDistanceY=0}catch(k){}this._updateSplitAreaBounds(1),this.refreshPanel(h);var l=b._UIFrozener();l&&l.refresh()},d.prototype.getScrollValue=function(){var a=this._getSuperPanel();return a?{"x":a.options.hScroller.scrollValue,"y":a.options.vScroller.scrollValue}:null},d.prototype.getVisibleAreaBounds=function(b){var c=this._isNativeSuperPanel()?a.grid.bounds(this._getSuperPanelStateContainer(),b):a.grid.bounds(this._getSuperPanelContentWrapper(),b);return c||(c=a.grid.bounds(this._wijgrid.mOuterDiv,b)),c},d.prototype.getVisibleContentAreaBounds=function(){var b=this.getVisibleAreaBounds(!0),c=a.grid.bounds(this._viewTables.nw.element())||{},d=a.grid.bounds(this._viewTables.ne.element())||{},e=a.grid.bounds(this._viewTables.sw.element())||{},f=a.grid.bounds(this._viewTables.se.element())||{},g={"top":b.top,"left":b.left,"width":Math.max(c.width+d.width,e.width+f.width),"height":Math.max(c.height+e.height,d.height+f.height)};return g.width=Math.min(b.width,g.width),g.height=Math.min(b.height,g.height),g},d.prototype.getRowAreaHeight=function(){var a=this._getSuperPanelContentWrapper();0==a.length&&(a=this._wijgrid.mOuterDiv);var b=a.height(),d=this._wijgrid.mSplitDistanceY;if(d&&(b-=d),this._wijgrid.options.showFooter){var e,f=this.isRendered()&&(e=this.footerRow())?c(e).height():this.getDefaultRowHeight();b-=f}return b},d.prototype.getVirtualPageSize=function(a){"undefined"==typeof a&&(a=!0);var b=this._wijgrid.mRowOuterHeight&&this._wijgrid.mRowOuterHeight>0?this._wijgrid.mRowOuterHeight:this.getDefaultRowHeight(),c=this.getRowAreaHeight()/b;return a?Math.ceil(c):Math.floor(c)},d.prototype.getFixedAreaVisibleBounds=function(){var b=this.getVisibleAreaBounds(),c=a.grid.bounds(this._splitAreas.ne),d=a.grid.bounds(this._splitAreas.nw),e=null,f=null;return(c.height||d.height)&&(e={"left":b.left,"top":b.top,"width":b.width,"height":Math.min(c.height||d.height,b.height)}),d.width&&(f={"left":d.left,"top":b.top,"width":Math.min(d.width,b.width),"height":b.height}),[e,f]},d.prototype.getDefaultRowHeight=function(){return this._wijgrid.options.rowHeight>=0?this._wijgrid.options.rowHeight:d.DEFAULT_ROW_HEIGHT_VIRTUAL},d.prototype.refreshPanel=function(b){var d=this._wijgrid,e=d.options,f=this._getMappedScrollMode(),g=d._rows().item(0),h=!1;if(d.mRowOuterHeight=g&&g[0]?c(g[0]).outerHeight():this.getDefaultRowHeight(),this._scroller.data("wijmo-wijsuperpanel"))this._scroller.wijsuperpanel("paintPanel");else{if(h=!0,this._wijgrid._allowVirtualScrolling()&&(this.vsUI=new a.grid.uiVirtualScroller(d,this._splitAreas.se,d.mSplitDistanceY,d.mRowOuterHeight)),b&&"hidden"===f.hScrollBarVisibility&&(b.x=0),this._scroller.wijsuperpanel({"disabled":d.options.disabled,"scroll":c.proxy(this._onScroll,this),"bubbleScrollingEvent":!0,"customScrolling":this._wijgrid._allowVirtualScrolling(),"vScroller":{"scrollBarVisibility":f.vScrollBarVisibility,"scrollValue":b?b.y:null},"hScroller":{"scrollBarVisibility":f.hScrollBarVisibility,"scrollValue":b?b.x:null},"hScrollerActivating":c.proxy(this._onHScrollerActivating,this)}),this._isNativeSuperPanel()){var i=this._getSuperPanelStateContainer();i.length&&i[0].offsetHeight!==i[0].clientHeight&&this._onHScrollerActivating(null,{"contentLength":i[0].clientHeight})}this._isNativeSuperPanel()||this._getSuperPanelContentWrapper().bind("scroll",function(a){a.target.scrollLeft=0,a.target.scrollTop=0,a.preventDefault()}),this._wijgrid._allowVirtualScrolling()&&this.vsUI.attach(this._scroller)}var j=this._testNeedVBar(d.mOuterDiv,d.element,c(this._viewTables.ne.element()),e.scrollMode,d.mAutoHeight),k=j&&!this._testAutohiddenScrollbars(),l=this.getVisibleContentAreaBounds().width;if(this._splitAreas.ne.width(l-d.mSplitDistanceX),h&&b&&b.x){var m=this._scroller.wijsuperpanel("scrollValueToPx",b.x,"h");this._setFixedAreaPosition(this._splitAreas.ne,"h",m,null,!0)}"right"===e.staticColumnsAlignment&&(this._splitAreas.nw.css({"left":"","right":k?this._verScrollBarSize:0}),this._splitAreas.sw.css({"left":"","right":k?this._verScrollBarSize:0})),this._scroller.find(".wijmo-wijsuperpanel-hbarcontainer, .wijmo-wijsuperpanel-vbarcontainer").css("zIndex",5),this._wijgrid._allowVirtualScrolling()&&this._wijgrid._handleVirtualScrolling(this._bounds.start)},d.prototype.scrollTo=function(a,b,d){var e=this._wijgrid,f=null;if(e._allowVirtualScrolling()){var g,h,i=e._renderableBoundsCollection().getRenderedIndex(a.rowIndex()),j=e._rows().length(),k=i-e._viewPortBounds().start>=j-1;(!a._isRendered()||k&&(g=this.getVisibleAreaBounds(!0))&&(h=a.row().$rows)&&h.offset().top+h.outerHeight()>g.top+g.height)&&(f=i,a.rowIndex()>d.changingEventArgs.oldRowIndex&&(f-=j-1,f+=1))}var l=this._getSuperPanel();if(null!==f)d.setFocus=!0,d.hasFocusedChild=!1,l?this.vsUI.scrollTo(f,function(){b()}):b();else{var m=c(a.tableCell()),n=null,o=null;if(l&&m.is(":visible")){var p=l.getContentElement(),q=p.parent(),r=-1*parseInt((p.css("left")+"").replace("px",""),10),s=-1*parseInt((p.css("top")+"").replace("px",""),10),t=q.outerWidth()-e.mSplitDistanceX,u=q.outerHeight()-e.mSplitDistanceY,v=m.position(),w=v.left,x=v.top,y=m.outerWidth(),z=m.outerHeight(),A=e._getStaticIndex(!0),B=e._getStaticIndex(!1),C=a.rowIndex(),D=a.cellIndex();A>=C?B>=D?(n=0,o=0):(w+=r,w+y>r+t&&(r=n=w+y-t),r>w&&(n=w),o=0):B>=D?(x+=this._splitAreas.sw.scrollTop(),x+z>s+u&&(s=o=x+z-u),s>x&&(o=x),n=0):(w-=e.mSplitDistanceX,x+z>s+u&&(s=o=x+z-u),w+y>r+t&&(r=n=w+y-t),s>x&&(o=x),r>w&&(n=w)),null!==n&&l.hScrollTo(n),null!==o&&l.vScrollTo(o)}b()}},d.prototype.updateSplits=function(b){var d,e,f,g,h=this._wijgrid,i=h.options,j=this,k=[],l=[],m=[],n=this._staticColumnIndex,o=h._visibleLeaves(),p=c(this._viewTables.se.element()),q=c(this._viewTables.ne.element()),r=c(this._viewTables.sw.element()),s=c(this._viewTables.nw.element()),t=h.mOuterDiv;if(this._destroySuperPanel(),t.unbind("mousewheel",this._mouseWheelHandler),(f=j._viewTables.se.element().tBodies)&&(f=f[0])){g=!1;for(var u=0;u<f.rows.length;u++)if(!c(f.rows[u]).hasClass(a.grid.wijgrid.CSS.groupHeaderRow)){g=!0;break}g||h.element.css("width","100%")}c.each([p,q,r,s],function(a,b){b.css({"table-layout":"","width":""})}),c.each(o,function(b,c){var d=c.options.width;(d||0===d)&&(d=a.grid.isPercentage(d)?t.width()*parseFloat(d)/100:parseFloat(d),(c.options.ensurePxWidth||i.ensureColumnsPxWidth)&&(c.options._realWidth=d),j._setColumnWidth(b,d))}),c.each(o,function(a,b){m.push(j._getColumnWidth(a))}),c.each([s,q,r,p],function(a,b){b.css({"width":"1px"})}),c.each(o,function(a,b){l.push(j._getColumnWidth(a))}),d=t.width(),k=this._adjustWidthArray(m,l,d,i.ensureColumnsPxWidth),c.each(k,function(a,b){var c=o[a];return void 0!==c.options._realWidth?void delete c.options._realWidth:void j._setColumnWidth(a,b.width)}),n>=0&&(e=n,this._setTableWidth([s,r],this._sumWidthArray(k,0,e),k[e].width,e));try{n>=0?h.mSplitDistanceX=s[0].offsetWidth:h.mSplitDistanceX=0}catch(v){}this._updateSplitAreaBounds(0),i.ensureColumnsPxWidth||q.parent().width(d-h.mSplitDistanceX),e=k.length-1,-1!==e&&this._setTableWidth([q,p],this._sumWidthArray(k,n+1,e),k[e].width,e),this._adjustRowsHeights();try{this._staticRowIndex>=0?h.mSplitDistanceY=Math.max(s[0].offsetHeight,q[0].offsetHeight):h.mSplitDistanceY=0}catch(v){}if(this._updateSplitAreaBounds(1),this._testNeedVBar(h.mOuterDiv,p,q,h.options.scrollMode,h.mAutoHeight)){var w=!1;if(d-=this._verScrollBarSize,i.ensureColumnsPxWidth?c.each(o,function(b,c){var e=c.options;a.grid.isPercentage(e.width)&&(m[b].width=l[b].width=d*parseFloat(e.width)/100,w=!0)}):w=!0,w){k=this._adjustWidthArray(m,l,d,i.ensureColumnsPxWidth),c.each(k,function(a,b){(!b.real||b.realPercent)&&j._setColumnWidth(a,b.width)}),n>=0&&(e=n,this._setTableWidth([s,r],this._sumWidthArray(k,0,e),k[e].width,e));try{h.mSplitDistanceX=n>=0?s[0].offsetWidth:0}catch(v){}this._updateSplitAreaBounds(0),q.parent().width(d-h.mSplitDistanceX),e=k.length-1,-1!==e&&this._setTableWidth([q,p],this._sumWidthArray(k,n+1,e),k[e].width,e),this._adjustRowsHeights();try{h.mSplitDistanceY=this._staticRowIndex>=0?Math.max(s[0].offsetHeight,q[0].offsetHeight):0}catch(v){}this._updateSplitAreaBounds(1)}}this.refreshPanel(b),t.bind("mousewheel",c.proxy(this._mouseWheelHandler,this))},d.prototype.getInlineTotalWidth=function(){if(this._scroller){var a=this._getSuperPanelStateContainer();if(a.length){var b=a[0].style.width;if(b&&"auto"!==b)return b}}return""},d.prototype._clearBody=function(){b.prototype._clearBody.call(this)},d.prototype.bodyRows=function(){var a=b.prototype.bodyRows.call(this);return a},d.prototype.forEachColumnCell=function(a,b,c){var d,e,f=this.getJoinedTables(!0,a);if(null!==f[0]){if(d=f[2],e=f[0].forEachColumnCell(d,b,c),e!==!0)return e;if(null!==f[1]&&(e=f[1].forEachColumnCell(d,b,c),e!==!0))return e}return!0},d.prototype.forEachRowCell=function(a,b,c){var d,e,f=this.getJoinedTables(!1,a),g=f[0],h=f[1];if(null!==g){if(d=f[2],d<g.element().rows.length&&(e=g.forEachRowCell(d,b,c),e!==!0))return e;if(null!==h&&d<h.element().rows.length&&(e=h.forEachRowCell(d,b,c),e!==!0))return e}return!0},d.prototype.getAbsoluteCellInfo=function(b,c){return new a.grid.cellInfo(this.getColumnIndex(b),this.getAbsoluteRowIndex(b.parentNode),this._wijgrid,!0,c)},d.prototype.getAbsoluteRowIndex=function(a){for(var b=a.rowIndex,c=a.parentNode;c&&c.tagName&&"table"!==c.tagName.toLowerCase();)c=c.parentNode;return c===this._viewTables.nw.element()||c===this._viewTables.ne.element()?b:b+this._staticRowIndex+1},d.prototype.getCell=function(a,b){var c,d,e,f,g,h=this.getJoinedTables(!1,b);return null!==h[0]&&(c=this.getJoinedTables(!0,a),null!==c[0]&&(d=h[2],e=c[2],f=null,f=null!==h[1]?a===e?h[0]:h[1]:h[0],g=f.getCellIdx(e,d),g>=0))?f.element().rows[d].cells[g]:null},d.prototype.getColumnIndex=function(a){var b,c=null,d=null,e=!1;for(c=a.parentNode;"table"!==c.tagName.toLowerCase();c=c.parentNode);return null!==c&&(c===this._viewTables.nw.element()?d=this._viewTables.nw:c===this._viewTables.ne.element()?(d=this._viewTables.ne,e=!0):c===this._viewTables.sw.element()?d=this._viewTables.sw:c===this._viewTables.se.element()&&(d=this._viewTables.se,e=!0),null!==d)?(b=d.getColumnIdx(a),e&&(b+=this._staticColumnIndex+1),b):-1},d.prototype.getHeaderCell=function(b){var c,d=this._wijgrid._visibleLeaves()[b];return d&&(c=this._wijgrid._headerRows())?a.grid.rowAccessor.getCell(c.item(d.options.thY),d.options.thX):null},d.prototype.getJoinedCols=function(a){var b=[],d=this.getJoinedTables(!0,a),e=d[2];return d.splice(d.length-1,1),c.each(d,function(a,d){b.push(d?c(d.element()).find("col")[e]:null)}),b},d.prototype.getJoinedRows=function(a,b){var c=null,d=null,e=null,f=null,g=this._staticRowIndex,h=this._staticColumnIndex,i=this._wijgrid._visibleLeaves().length-1,j=this._rowsCountRaw()-1,k=g===j,l=0>g,m=!k&&!l,n=0;return(k||m)&&(h>=0&&i>h?(e=this._viewTables.nw,f=this._viewTables.ne):e=0>h?this._viewTables.ne:this._viewTables.nw,n=e.getSectionLength(b),n>a&&(c=e.getSectionRow(a,b),null!==f&&(d=f.getSectionRow(a,b)))),(l||m&&null===c)&&(l||(a-=n),h>=0&&i>h?(e=this._viewTables.sw,f=this._viewTables.se):e=0>h?this._viewTables.se:this._viewTables.sw,c=e.getSectionRow(a,b),null!==f&&(d=f.getSectionRow(a,b))),null===c&&null===d?null:[c,d]},d.prototype.getJoinedTables=function(a,b){var c=null,d=null,e=b,f=this._wijgrid,g=this._staticRowIndex,h=this._staticColumnIndex;return a?(h>=b?(c=this._viewTables.nw,d=this._viewTables.sw):(c=this._viewTables.ne,d=this._viewTables.se,e-=h+1),0>g&&(c=null),g===this._rowsCountRaw()-1&&(d=null)):(g>=b?(c=this._viewTables.nw,d=this._viewTables.ne):(c=this._viewTables.sw,d=this._viewTables.se,e-=g+1),0>h&&(c=null),h===f._leaves().length-1&&(d=null)),null===c&&(c=d,d=null),[c,d,e]},d.prototype.subTables=function(){return[this._viewTables.nw,this._viewTables.ne,this._viewTables.sw,this._viewTables.se]},d.prototype._getSuperPanel=function(){return this._scroller?this._scroller.data("wijmo-wijsuperpanel"):null},d.prototype._ensureRenderBounds=function(){if(this._wijgrid._allowVirtualScrolling()){var a=this.getVirtualPageSize();if(this._wijgrid._ensureRenderableBounds(this._bounds),this._bounds.end=this._bounds.start+a-1,this._wijgrid._serverSideVirtualScrolling()){var c=this._bounds.end-this._bounds.start+1-this._wijgrid.mSketchTable.count();c>0&&(this._bounds.end-=c)}if(this._wijgrid._ensureRenderableBounds(this._bounds),this._bounds.start>0&&this._bounds.end===this._wijgrid.mSketchTable.count()-1){a=this.getVirtualPageSize(!1);var d=this._bounds.end-this._bounds.start+1;a>d&&(this._bounds.start=this._bounds.end-a+1),this._wijgrid._ensureRenderableBounds(this._bounds),this._bounds.start!==this._wijgrid.mScrollingState.index&&(this._wijgrid.mScrollingState.index=this._wijgrid.mScrollingState.y=this._bounds.start)}}else b.prototype._ensureRenderBounds.call(this)},d.prototype._renderContent=function(){b.prototype._renderContent.call(this)},d.prototype._preRender=function(){b.prototype._preRender.call(this);var d=document.createDocumentFragment(),e=a.grid.htmlTableAccessor,f=a.grid.wijgrid.CSS,g=this._wijgrid.options.wijCSS;this._wijgrid.mOuterDiv.wrapInner('<div class="'+f.fixedView+" "+g.wijgridFixedView+'"><div class="'+f.scroller+" "+g.wijgridScroller+'"><div class="wijmo-wijgrid-split-area-se wijmo-wijgrid-content-area"></div></div></div>'),this._scroller=this._wijgrid.mOuterDiv.find("."+f.scroller),this._scroller.css("padding",0),this._scroller.after(this._splitAreas.nw=c('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-nw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._scroller.after(this._splitAreas.ne=c('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-ne" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._scroller.after(this._splitAreas.sw=c('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-sw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._splitAreas.se=this._scroller.find(".wijmo-wijgrid-split-area-se:first"),this._viewTables={"nw":new e(d.appendChild(document.createElement("table")),!0,!0,!0),"ne":new e(d.appendChild(document.createElement("table")),!0,!0,!0),"sw":new e(d.appendChild(document.createElement("table")),!0,!0,!0),"se":new e(d.appendChild(this._wijgrid.element[0]),!0,!0,!0)}},d.prototype._postRender=function(){var d,e,f,g,h=a.grid.htmlTableAccessor,i=this;this._viewTables={"nw":new h(d=this._viewTables.nw.element()),"ne":new h(e=this._viewTables.ne.element()),"sw":new h(f=this._viewTables.sw.element()),"se":new h(g=this._viewTables.se.element())},this._splitAreas.nw.empty().append(d),this._splitAreas.ne.empty().append(e),this._splitAreas.sw.empty().append(f),this._splitAreas.se.empty().append(g),c.each(this._viewTables,function(b,d){var e=c(d.element());i._wijgrid._setAttr(e,{"role":"grid","border":"0","cellpadding":"0","cellspacing":"0"}),e.addClass(a.grid.wijgrid.CSS.table).addClass(i._wijgrid.options.wijCSS.wijgridTable).css("border-collapse","separate").find("> tbody").addClass(i._wijgrid.options.wijCSS.content)}),b.prototype._postRender.call(this)},d.prototype._rowsCountRaw=function(){var a,b=this._viewTables.nw.element(),c=this._viewTables.ne.element(),d=this._viewTables.sw.element(),e=this._viewTables.se.element();return a=Math.max(b.rows.length,c.rows.length)+Math.max(d.rows.length,e.rows.length)},d.prototype._createCol=function(a,b){return[document.createElement("col"),document.createElement("col")]},d.prototype._appendCol=function(a,b,c){c<=this._staticColumnIndex?(this._viewTables.nw.appendCol(a[0]),this._viewTables.sw.appendCol(a[1])):(this._viewTables.ne.appendCol(a[0]),this._viewTables.se.appendCol(a[1]))},d.prototype._insertRow=function(b,c,d){var e,f,g=(a.grid.rowType,this._viewTables);switch(b){case 1:case 8:e=g.nw.ensureTHead(),f=g.ne.ensureTHead();break;case 64:e=g.sw.ensureTFoot(),f=g.se.ensureTFoot();break;default:c<=this._staticDataRowIndex?(e=g.nw.ensureTBody(),f=g.ne.ensureTBody()):(c-=this._staticDataRowIndex+1,e=g.sw.ensureTBody(),f=g.se.ensureTBody())}return d?[e.appendChild(d),f.appendChild(d.cloneNode(!1))]:[e.insertRow(c>e.rows.length?-1:c),f.insertRow(c>f.rows.length?-1:c)]},d.prototype._rowRendered=function(a,d,e){var f=a.$rows[0],g=a.$rows[1];!f.cells.length&&this._isBodyRow(a)&&(f.parentNode.removeChild(f),f=null),!g.cells.length&&this._isBodyRow(a)&&(g.parentNode.removeChild(g),g=null),(f||g)&&(f&&g||(a.$rows=c(f?f:g)),b.prototype._rowRendered.call(this,a,d,e))},d.prototype._appendCell=function(a,b,c){var d=1!==a.type?this._staticColumnIndex:this._staticAllColumnIndex;d>=b?a.$rows[0].appendChild(c[0]):a.$rows[1].appendChild(c[0])},d.prototype._getRowHeight=function(a,b){if(a[0]&&a[1]){var d,e,f,g=a[0],h=a[1],i=c(g),j=c(h),k=function(a){var b,d,e=a[0];for(b=0;b<e.cells.length;b++)if(d=e.cells[b],!d.rowSpan||1===d.rowSpan)return c(d).outerHeight();return a.height()};return(f=c.data(g,"customHeight"))?d=e=parseInt(f):(i.css("height",""),j.css("height",""),b?(d=k(i),e=k(j)):(d=i.height(),e=j.height())),Math.max(d,e)}return null},d.prototype._setRowHeight=function(a,b){if(a[0]&&a[1]){var d,e=[c(a[0]),c(a[1])];if(null===b)return;b+=1,c.each(e,function(a,c){c.height(b),d=b-c.height(),d&&c.height(b+d)})}},d.prototype._adjustRowHeight=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=this._wijgrid,r=this._staticColumnIndex,s=q._visibleLeaves().length-1,t=[];if(r>-1&&s>r){if(a=this._staticRowIndex,b=this._rowsCountRaw()-1,c=this._viewTables,a>-1&&b>=a)for(d=c.ne.element(),e=d.parentNode,f=c.nw.element(),g=f.parentNode,o=f.rows,p=d.rows,l=o.length,m=0;l>m;m++)t.push(this._getRowHeight([o[m],p[m]],!0));if(a>=-1&&b>a)for(h=c.se.element(),i=h.parentNode,j=c.sw.element(),k=j.parentNode,o=j.rows,p=h.rows,l=o.length,m=0;l>m;m++)t.push(this._getRowHeight([o[m],p[m]]));if(a>-1&&b>=a&&(g.removeChild(f),e.removeChild(d)),a>=-1&&b>a&&(k.removeChild(j),i.removeChild(h)),a>-1&&b>=a)for(o=f.rows,p=d.rows,l=o.length,m=0,n=0;l>m;m++)this._setRowHeight([o[m],p[m]],t[n++]);if(a>=-1&&b>a)for(o=j.rows,p=h.rows,l=o.length,m=0;l>m;m++)this._setRowHeight([o[m],p[m]],t[n++]);a>-1&&b>=a&&(g.appendChild(f),e.appendChild(d)),a>=-1&&b>a&&(k.appendChild(j),i.appendChild(h))}},d.prototype._adjustRowsHeights=function(){var a,b=c(this._viewTables.sw.element()),d=c(this._viewTables.se.element());d.css("height",""),b.css("height",""),this._adjustRowHeight(),a=Math.max(d.height(),b.height()),b.height(a),d.height(a)},d.prototype._destroySuperPanel=function(){this._scroller.data("wijmo-wijsuperpanel")&&(this.vsUI&&this.vsUI.dispose(),this._superPanelElementsCache={},this._scroller.wijsuperpanel("destroy"))},d.prototype._onScroll=function(a,b){var c=this._getSuperPanel();this._wijgrid._allowVirtualScrolling()?"h"===b.dir&&(this._setFixedAreaPosition(c.getContentElement(),b.dir,b.position,b.animationOptions,!1),this._setFixedAreaPosition(this._splitAreas.ne,b.dir,b.position,b.animationOptions,!0)):this._setFixedAreaPosition("h"===b.dir?this._splitAreas.ne:this._splitAreas.sw,b.dir,b.position,b.animationOptions,!0),this._wijgrid._trackScrollingPosition(c.options.hScroller.scrollValue,c.options.vScroller.scrollValue)},d.prototype._onHScrollerActivating=function(a,b){if(this._wijgrid.mAutoHeight){var c=this._wijgrid.element.height()+this._wijgrid.mSplitDistanceY-b.contentLength;if(c>0)return this._scroller.height(this._scroller.height()+c),this._scroller.wijsuperpanel("paintPanel"),!1}this._splitAreas.sw.height(b.contentLength-this._wijgrid.mSplitDistanceY)},d.prototype._onMouseWheel=function(b,d){var e,f,g=d>0?"top":"bottom",h=!1;this._wijgrid._canInteract()&&(e=this.getFixedAreaVisibleBounds(),c.each(e,function(c,d){return d&&a.grid.isOver(b.pageY,b.pageX,d.top,d.left,d.height,d.width)?(h=!0,!1):void 0}),h&&this._scroller.data("wijmo-wijsuperpanel")&&(f=this._scroller.wijsuperpanel("option","vScroller").scrollValue,this._scroller.wijsuperpanel("doScrolling",g),f!==this._scroller.wijsuperpanel("option","vScroller").scrollValue&&(b.stopPropagation(),b.preventDefault())))},d.prototype._setFixedAreaPosition=function(a,b,c,d,e){var f,g={};f="h"===b?e?"scrollLeft":"left":e?"scrollTop":"top",e||(c=-c),d?(g[f]=c,a.animate(g,d)):e?a[0][f]=c:a.css(f,c)},d.prototype._testNeedVBar=function(a,b,c,d,e){var f,g=!1,h=this._wijgrid,i=c.width()+h.mSplitDistanceX,j=b.height()+h.mSplitDistanceY,k=a.width(),l=a.height(),m=0,n=0;switch(null!==h.mSuperPanelHeader&&(m=h.mSuperPanelHeader.outerHeight(!0)),null!==h.mBottomPagerDiv&&(n=h.mBottomPagerDiv.outerHeight(!0)),f=l-m-n,d){case"both":case"vertical":g=!0;break;case"auto":if(g=j>f||!e&&i>k&&j>f-this._verScrollBarSize,!g&&this._wijgrid._allowVirtualScrolling()){var o=h._view().getVirtualPageSize();g=o>0&&o<h._totalRowsCount()}}return g},d.prototype._updateSplitAreaBounds=function(a){var b,c,d=this._wijgrid,e=0,f=0;(0===a||2===a)&&(this._splitAreas.nw.width(d.mSplitDistanceX),this._splitAreas.sw.width(d.mSplitDistanceX),"right"===d.options.staticColumnsAlignment?(this._splitAreas.se.css("marginRight",d.mSplitDistanceX),this._splitAreas.ne.css("marginRight",d.mSplitDistanceX)):(this._splitAreas.se.css("marginLeft",d.mSplitDistanceX),this._splitAreas.ne.css("marginLeft",d.mSplitDistanceX))),(1===a||2===a)&&(this._scroller.css("height",""),this._splitAreas.se.css("marginTop",0),b=d.mOuterDiv.height(),d.mAutoHeight?this._scroller.height(b+d.mSplitDistanceY):this._scroller.height(b),this._splitAreas.nw.height(d.mSplitDistanceY),this._splitAreas.ne.height(d.mSplitDistanceY),null!==d.mSuperPanelHeader&&(e=d.mSuperPanelHeader.outerHeight(!0)),null!==d.mBottomPagerDiv&&(f=d.mBottomPagerDiv.outerHeight(!0)),c=b-e-f,null!==d.mSuperPanelHeader&&(this._splitAreas.nw.css("top",e+"px"),this._splitAreas.ne.css("top",e+"px")),d.mAutoHeight?this._splitAreas.sw.height(c):this._splitAreas.sw.height(c-d.mSplitDistanceY),this._splitAreas.sw.css("top",d.mSplitDistanceY+e),this._splitAreas.se.css("marginTop",d.mSplitDistanceY))},d.prototype._getSuperPanelContentWrapper=function(){return this._superPanelElementsCache.contentWrapper&&this._superPanelElementsCache.contentWrapper.length||(this._superPanelElementsCache.contentWrapper=this._wijgrid.mOuterDiv.find(".wijmo-wijsuperpanel-contentwrapper:first")),this._superPanelElementsCache.contentWrapper},d.prototype._getSuperPanelStateContainer=function(){return this._superPanelElementsCache.stateContainer&&this._superPanelElementsCache.stateContainer.length||(this._superPanelElementsCache.stateContainer=this._wijgrid.mOuterDiv.find(".wijmo-wijsuperpanel-statecontainer:first")),this._superPanelElementsCache.stateContainer},d.prototype._isNativeSuperPanel=function(){return this._wijgrid._isTouchEnv()},d.prototype._testAutohiddenScrollbars=function(){if(this._isNativeSuperPanel()){var a=this._getSuperPanelStateContainer();if(a.length)return a[0].offsetWidth===a[0].clientWidth}return!1},d.DEFAULT_ROW_HEIGHT_VIRTUAL=19,d}(b.baseView);b.fixedView=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function b(a){if(this._updates=0,this._selectedColumns=null,this._selectedRows=null,this._extend_rules={"singlecell":[0,0,0],"singlecolumn":[1,1,1],"singlerow":[2,2,2],"singlerange":[0,1,2],"multicolumn":[1,1,1],"multirow":[2,2,2],"multirange":[0,1,2]},!a)throw"invalid arguments";this._wijgrid=a,this._addedCells=new e(a),this._removedCells=new e(a),this._selectedCells=new e(a),this._addedDuringCurTransactionCells=new e(a)}return b.prototype.selectedCells=function(){return this._selectedCells},b.prototype.selectedRows=function(){return this._selectedRows||(this._selectedRows=new f(this._wijgrid)),this._selectedRows},b.prototype.addColumns=function(a,b){b||0===b||(b=a),this.addRange(a,0,b,16777215)},b.prototype.addRange=function(b,c,d,e){if(!b&&1===arguments.length)throw"invalid argument";var f=4===arguments.length?new a.grid.cellInfoRange(new a.grid.cellInfo(b,c),new a.grid.cellInfo(d,e)):b._clone();if(f._normalize(),!f._isValid())throw"invalid argument";this.beginUpdate(),this._startNewTransaction(this._wijgrid._currentCell()),this._selectRange(f,!1,!0,0,null),this.endUpdate()},b.prototype.addRows=function(a,b){b||0===b||(b=a),this.addRange(0,a,16777215,b)},b.prototype.removeRange=function(b,c,d,e){if(!b&&1===arguments.length)throw"invalid argument";var f=4===arguments.length?new a.grid.cellInfoRange(new a.grid.cellInfo(b,c),new a.grid.cellInfo(d,e)):b._clone();if(f._normalize(),!f._isValid())throw"invalid argument";this.beginUpdate(),this._startNewTransaction(this._wijgrid._currentCell()),this._clearRange(f,0),this.endUpdate()},b.prototype.removeColumns=function(a,b){b||0===b||(b=a),this.removeRange(a,0,b,16777215)},b.prototype.removeRows=function(a,b){b||0===b||(b=a),this.removeRange(0,a,16777215,b)},b.prototype.clear=function(){this.beginUpdate(),this._removedCells._clear(),this._removedCells._addFrom(this._selectedCells),this.endUpdate()},b.prototype.selectAll=function(){this.beginUpdate(),this._selectRange(this._wijgrid._getDataCellsRange(0),!1,!1,0,null),this.endUpdate()},b.prototype.beginUpdate=function(){this._updates++},b.prototype.endUpdate=function(){this._updates>0&&(this._updates--,0===this._updates&&(this.doSelection(),(this._addedCells.length()||this._removedCells.length())&&(null!==this._selectedColumns&&this._selectedColumns.UnderlyingDataChanged(),null!==this._selectedRows&&this._selectedRows._setDirty(),this._wijgrid._trigger("selectionChanged",null,{"addedCells":this._addedCells,"removedCells":this._removedCells})),this._addedCells=new a.grid.cellInfoOrderedCollection(this._wijgrid),this._removedCells._clear()))},b.prototype._multipleRangesAllowed=function(){var a=this._wijgrid.options.selectionMode;return a&&("multicolumn"===(a=a.toLowerCase())||"multirow"===a||"multirange"===a)},b.prototype._multipleEntitiesAllowed=function(){var a=this._wijgrid.options.selectionMode;return a&&("multicolumn"===(a=a.toLowerCase())||"multirow"===a||"multirange"===a||"singlerange"===a)},b.prototype._anchorCell=function(){return this.__anchorCell},b.prototype._startNewTransaction=function(b){b&&(this.__anchorCell=b._clone(),this._addedDuringCurTransactionCells=new a.grid.cellInfoOrderedCollection(this._wijgrid))},b.prototype._clearRange=function(a,b){var c,d,e,f,g=this._wijgrid.options.selectionMode.toLowerCase(),h=this._wijgrid._getDataCellsRange(0);if(a._isValid()&&"none"!==g&&this._selectedCells.length()>0){if(c=a._clone(),c._normalize(),c._clip(h),!a._isValid())return;for(c._extend(this._extend_rules[g][b],h),this.beginUpdate(),d=0,e=this._selectedCells.length();e>d;d++)f=this._selectedCells.item(d),c._containsCellInfo(f)&&this._removedCells._add(f);this.endUpdate()}},b.prototype._selectRange=function(b,c,d,e,f){var g,h=this._wijgrid.options.selectionMode.toLowerCase(),i=this._wijgrid._getDataCellsRange(0);if("none"!==h&&b._isValid()){if(g=b._clone(),g._normalize(),g._clip(i),!g._isValid())return;switch(this.beginUpdate(),this._multipleRangesAllowed()&&(c||d)?d&&(this._removedCells._clear(),this._removedCells._addFrom(this._addedDuringCurTransactionCells)):this.clear(),h){case"singlecell":case"singlecolumn":case"singlerow":g=null===f?new a.grid.cellInfoRange(g.topLeft(),g.topLeft()):new a.grid.cellInfoRange(f,f)}g._extend(this._extend_rules[h][e],i),this.doRange(g,!0),this.endUpdate()}},b.prototype._ensureSelection=function(){for(var a,b=this._wijgrid._view(),c=-2,d=0;d<this._selectedCells.length();d++){var e=this._selectedCells.item(d);e._isRendered()&&(c!==e.rowIndex()&&(a=e.row(),c=e.rowIndex()),this.selectCell(e,a,b,!0))}},b.prototype._ensureSelectionInRow=function(a){var b=this,c=this._wijgrid._view();if(c._isRowRendered(a)>=0){var d=c._getRowInfoBySketchRowIndex(a,!1),e=this.selectedCells();d&&e&&e.length()>0&&d.$rows.children("td, th").each(function(f,g){var h=e.indexOf(f,a);h>=0&&b.selectCell(e.item(h),d,c,!0)})}},b.prototype.doSelection=function(){var b,c,d,e,f,g=this._wijgrid._view(),h=(a.grid.renderState,-1);for(b=0,c=this._removedCells.length();c>b;b++)d=this._removedCells.item(b),this._addedCells.indexOf(d)<0?(h!==d.rowIndex()&&(f=d.row(),h=d.rowIndex()),this.selectCell(d,f,g,!1),this._selectedCells._remove(d),this._addedDuringCurTransactionCells._remove(d)):(this._removedCells._removeAt(b),b--,c--);for(h=-1,b=0,c=this._addedCells.length();c>b;b++)d=this._addedCells.item(b),e=this._selectedCells.indexOf(d),0>e?(h!==d.rowIndex()&&(f=d.row(),h=d.rowIndex()),this.selectCell(d,f,g,!0),this._selectedCells._insertUnsafe(d,~e),this._addedDuringCurTransactionCells._add(d)):(this._addedCells._removeAt(b),b--,c--)},b.prototype.selectCell=function(a,b,d,e){if(a._isRendered()){var f=(this._wijgrid._viewPortBounds(),d.getCell(a.cellIndexAbs(),a.rowIndexAbs()));if(f){var g=c(f),h=d._changeCellRenderState(g,8,e===!0);this._wijgrid.mCellStyleFormatter.format(g,a.cellIndex(),a.columnInst(),b,h)}}},b.prototype.doRange=function(b,c){var d,e,f,g,h,i,j=b.topLeft().cellIndex(),k=b.topLeft().rowIndex(),l=b.bottomRight().cellIndex(),m=b.bottomRight().rowIndex(),n=this._wijgrid._view();this._wijgrid._viewPortBounds();if(c){for(d=this._addedCells.length(),i=this._wijgrid._rows(),e=k;m>=e;e++)if(h=n._getRowInfoBySketchRowIndex(e),2&h.type)for(f=j;l>=f;f++)g=new a.grid.cellInfo(f,e),0===d?this._addedCells._appendUnsafe(g):this._addedCells._add(g)}else for(d=this._removedCells.length(),e=k;m>=e;e++)for(f=j;l>=f;f++)g=new a.grid.cellInfo(f,e),0===d?this._removedCells._appendUnsafe(g):this._removedCells._add(g)},b}();b.selection=d;var e=function(){function b(a){if(!a)throw"invalid arguments";this._wijgrid=a,this._list=[]}return b.prototype.item=function(a){return this._list[a]},b.prototype.length=function(){
return this._list.length},b.prototype.indexOf=function(a,b){1===arguments.length&&(b=a.rowIndex(),a=a.cellIndex());for(var c,d,e,f=0,g=this._list.length-1;g>=f;)if(c=f+(g-f>>1),d=this._list[c],e=d.rowIndex()-b,0===e&&(e=d.cellIndex()-a),0>e)f=c+1;else{if(!(e>0))return c;g=c-1}return~f},b.prototype.toString=function(){var a,b,c="";for(a=0,b=this._list.length;b>a;a++)c+=this._list[a].toString()+"\n";return c},b.prototype._add=function(a){var b=this.indexOf(a);return 0>b?(this._list.splice(~b,0,a),a._setGridView(this._wijgrid),!0):!1},b.prototype._addFrom=function(a){if(a){var b,c=a.length(),d=this._list.length;if(0===d)for(this._list.length=c,b=0;c>b;b++)this._list[b]=a.item(b),this._list[b]._setGridView(this._wijgrid);else for(b=0;c>b;b++)this._add(a.item(b))}},b.prototype._appendUnsafe=function(a){this._list[this._list.length]=a,a._setGridView(this._wijgrid)},b.prototype._insertUnsafe=function(a,b){this._list.splice(b,0,a)},b.prototype._clear=function(){this._list.length=0},b.prototype._remove=function(a){var b=this.indexOf(a);return b>=0?(this._list.splice(b,1),!0):!1},b.prototype._removeAt=function(a){this._list.splice(a,1)},b.prototype._getColumnsIndicies=function(){var a,b,c,d=[],e=this._list.length;if(e){for(a=[],b=0;e>b;b++)a[this._list[b].cellIndex()]=1;for(e=a.length,c=0,b=0;e>b;b++)a[b]&&(d[c++]=b)}return d},b.prototype._getSelectedRowsIndicies=function(){var a,b,c,d=[],e=this._list.length;if(e){for(a=[],b=0;e>b;b++)a[this._list[b].rowIndex()]=1;for(e=a.length,c=0,b=0;e>b;b++)a[b]&&(d[c++]=b)}return d},b.prototype._rectangulate=function(){var b,c,d=this._list.length,e=4294967295,f=4294967295,g=0,h=0;if(d){for(b=0;d>b;b++)c=this._list[b],e=Math.min(e,c.cellIndex()),f=Math.min(f,c.rowIndex()),g=Math.max(g,c.cellIndex()),h=Math.max(h,c.rowIndex());return new a.grid.cellInfoRange(new a.grid.cellInfo(e,f),new a.grid.cellInfo(g,h))}return null},b}();b.cellInfoOrderedCollection=e;var f=function(){function a(a){this.mLength=0,this.mDirty=!0,this.mRowIndicies=[],this.mWijgrid=a}return a.prototype.length=function(){return this._ensure(),this.mLength},a.prototype.item=function(a){this._ensure();var b=this.mWijgrid._view()._getRowInfoBySketchRowIndex(this.mRowIndicies[a]);return b},a.prototype._ensure=function(){this.mDirty&&(this.mRowIndicies=this.mWijgrid.selection().selectedCells()._getSelectedRowsIndicies(),this.mLength=this.mRowIndicies.length,this.mDirty=!1)},a.prototype._setDirty=function(){this.mDirty=!0},a}();b.selectedRowsAccessor=f}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function b(b){this._gap_to_start=10,this._inProgress=!1,this._additionalEventsAttached=!1,this._wijgrid=b,this._evntFormat="{0}."+this._wijgrid.widgetName+".selectionui",this._addedCells=new a.grid.cellInfoOrderedCollection(this._wijgrid),this._view=this._wijgrid._view(),this._rootElement=this._view.focusableElement(),this._visLeavesLen=this._wijgrid._visibleLeaves().length,this._rootElement.bind(this._eventKey("mousedown"),c.proxy(this._onGridMouseDown,this))}return b.prototype.dispose=function(){this._rootElement.unbind(this._eventKey("mousedown"),this._onGridMouseDown),this._detachAdditionalEvents()},b.prototype._onGridMouseDown=function(b){if(this._wijgrid._canInteract()&&"none"!==this._wijgrid.options.selectionMode.toLowerCase()){var d=this._view.getVisibleContentAreaBounds(),e={"x":b.pageX,"y":b.pageY},f=b.target&&void 0!==b.target.tagName?b.target.tagName.toLowerCase():void 0,g=c(b.target),h=a.grid.wijgrid.CSS;(!f||g.is("td."+h.TD+", th."+h.TD+", div."+h.cellContainer))&&e.x>d.left&&e.x<d.left+d.width&&e.y>d.top&&e.y<d.top+d.height&&(this._attachAdditionalEvents(),this._startPos=e,this._startCellInfo=this._coordToDataCellInfo(this._startPos))}},b.prototype._onDocumentMouseMove=function(b){if(this._startCellInfo&&this._startCellInfo._isValid()){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r={"x":b.pageX,"y":b.pageY},s=this._wijgrid._view();this._wijgrid._rows(),a.grid.renderState;if(this._inProgress||(this._inProgress=Math.abs(this._startPos.x-r.x)>this._gap_to_start||Math.abs(this._startPos.y-r.y)>this._gap_to_start),this._inProgress){if(d=this._coordToDataCellInfo(r),!d._isValid())return;if(this._endCellInfo=d,f=new a.grid.cellInfoRange(this._startCellInfo,this._endCellInfo),f._normalize(),f._clip(this._wijgrid._getDataCellsRange(0)),f._isValid()&&!f.isEqual(this._prevMouseMoveRange)){for(this._prevMouseMoveRange=f,g=new a.grid.cellInfoOrderedCollection(this._wijgrid),h=f.bottomRight().rowIndex(),i=f.bottomRight().cellIndex(),j=f.topLeft().rowIndex();h>=j;j++)if(o=s._getRowInfoBySketchRowIndex(j),2&o.type)for(k=f.topLeft().cellIndex();i>=k;k++)g._appendUnsafe(new a.grid.cellInfo(k,j));for(p=-1,l=0,m=this._addedCells.length();m>l;l++)e=this._addedCells.item(l),g.indexOf(e)<0&&(this._wijgrid.selection().selectedCells().indexOf(e)<0&&(k=this._view.getCell(e.cellIndexAbs(),e.rowIndexAbs()),k&&(p!==e.rowIndex()&&(o=e.row(),p=e.rowIndex()),n=c(k),q=s._changeCellRenderState(n,8,!1),this._wijgrid.mCellStyleFormatter.format(n,e.cellIndex(),e.columnInst(),o,q))),this._addedCells._removeAt(l),l--,m--);for(p=-1,l=0,m=g.length();m>l;l++)e=g.item(l),this._addedCells.indexOf(e)<0&&this._wijgrid.selection().selectedCells().indexOf(e)<0&&this._addedCells._add(e)&&(k=this._view.getCell(e.cellIndexAbs(),e.rowIndexAbs()),k&&(p!==e.rowIndex()&&(o=e.row(),p=e.rowIndex()),n=c(k),q=s._changeCellRenderState(n,8,!0),this._wijgrid.mCellStyleFormatter.format(n,e.cellIndex(),e.columnInst(),o,q)))}}}},b.prototype._onDocumentMouseUp=function(b){if(this._detachAdditionalEvents(),this._inProgress&&(this._inProgress=!1,this._prevMouseMoveRange&&this._prevMouseMoveRange._isValid())){this._wijgrid._changeCurrentCell(b,this._endCellInfo,{"changeSelection":!1,"setFocus":!1}),b.shiftKey&&this._wijgrid.selection()._multipleEntitiesAllowed()||this._wijgrid.selection()._startNewTransaction(this._startCellInfo),this._wijgrid.selection().beginUpdate(),this._wijgrid.selection()._selectRange(this._prevMouseMoveRange,b.shiftKey,b.ctrlKey,0,this._endCellInfo),this._wijgrid.selection().endUpdate();for(var d,e=this._wijgrid._view(),f=-1,g=(a.grid.renderState,0),h=this._addedCells.length();h>g;g++){var i=this._addedCells.item(g);if(this._wijgrid.selection().selectedCells().indexOf(i)<0){var j=e.getCell(i.cellIndexAbs(),i.rowIndexAbs());if(null!==j){f!==i.rowIndex()&&(d=i.row(),f=i.rowIndex());var k=c(j),l=e._changeCellRenderState(k,8,!1);this._wijgrid.mCellStyleFormatter.format(k,i.cellIndex(),i.columnInst(),d,l)}}}return this._addedCells._clear(),this._startCellInfo=this._endCellInfo=this._prevMouseMoveRange=null,!1}},b.prototype._attachAdditionalEvents=function(){if(!this._additionalEventsAttached)try{this._view.toggleDOMSelection(!1),c(document).bind(this._eventKey("mousemove"),c.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),c.proxy(this._onDocumentMouseUp,this))}finally{this._additionalEventsAttached=!0}},b.prototype._detachAdditionalEvents=function(){if(this._additionalEventsAttached)try{this._view.toggleDOMSelection(!0),c(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp)}finally{this._additionalEventsAttached=!1}},b.prototype._eventKey=function(b){return a.grid.stringFormat(this._evntFormat,b)},b.prototype._coordToDataCellInfo=function(b){for(var c,d,e,f,g=0,h=this._visLeavesLen-1,i=0,j=-1,k=new a.grid.rowAccessor(this._view,2,0,0);h>=g&&(i=(h-g>>1)+g,c=a.grid.bounds(this._view.getHeaderCell(i)),c||(e=k.item(0),c=a.grid.bounds(a.grid.rowAccessor.getCell(e,i))),c);)if(b.x<c.left)h=i-1;else{if(!(b.x>c.left+c.width)){j=i;break}g=i+1}if(-1===j)return a.grid.cellInfo.outsideValue;for(k=new a.grid.rowAccessor(this._view,0,0,0),d=-1,g=0,h=k.length()-1,i=0;h>=g;)if(i=(h-g>>1)+g,e=k.item(i),c=a.grid.bounds(a.grid.rowAccessor.getCell(e,0)),b.y<c.top)h=i-1;else{if(!(b.y>c.top+c.height)){d=i;break}g=i+1}return-1===d?a.grid.cellInfo.outsideValue:f=new a.grid.cellInfo(j,d,this._wijgrid,!0)},b}();b.uiSelection=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function b(a,b,c,d){this._view=a,this._scope=b,this._offsetBottom=d,this._offsetTop=c}return b.prototype.item=function(a){var b=this.length();return a>=0&&b>a?this._view.getJoinedRows(a+this._offsetTop,this._scope):null},b.prototype.length=function(){var a,b=this._view.getJoinedTables(!0,0),c=0;return(a=b[0])&&(c=a.getSectionLength(this._scope)),(a=b[1])&&(c+=a.getSectionLength(this._scope)),c-=this._offsetTop+this._offsetBottom,0>c&&(c=0),c},b.iterateCells=function(a,b,c){if(a&&b){var d,e,f,g,h,i,j=0;for(d=0,e=a.length;e>d;d++)if(f=a[d])for(g=0,h=f.cells.length;h>g;g++)if(i=b(f.cells[g],j++,c),i!==!0)return}},b.getCell=function(a,b){var c,d;if(a&&(c=a[0])){if(d=c.cells.length,d>b)return c.cells[b];if(b-=d,(c=a[1])&&(d=c.cells.length,d>b))return c.cells[b]}return null},b.getCell$=function(b,d){var e=a.grid.rowAccessor.getCell(b,d);return c(e?e:[])},b.cellsCount=function(a){var b,c=0;return a&&(b=a[0])&&(c=b.cells.length,(b=a[1])&&(c+=b.cells.length)),c},b}();b.rowAccessor=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery;!function(a){a[a.error=0]="error",a[a.continueEditing=1]="continueEditing",a[a.success=2]="success",a[a.cancel=4]="cancel",a[a.notEdited=8]="notEdited"}(b.updateCellResult||(b.updateCellResult={}));var d=(b.updateCellResult,function(){function b(){this._timeout=25}return b.prototype.cellEditStart=function(b,d,e){var f=!1;b._view();if(d._isValid()&&!d._isEdit()&&d.columnInst()instanceof a.grid.c1field){var g=d.row();if(g){var h=g.type;if(2&h){var i={"cell":d,"event":e,"handled":!1};if((f=b._trigger("beforeCellEdit",null,i)||"row"===b.options.editingMode)&&(i.handled||(f=this._defaultBeforeCellEdit(b,i))),f&&(d._isEdit(!0),b._showRowHeader())){var j=c(g.$rows[0].cells[0]).children("div."+a.grid.wijgrid.CSS.cellContainer);j.length&&(j.empty(),j.append(c("<div>&nbsp;</div>").addClass(b.options.wijCSS.icon+" "+b.options.wijCSS.iconPencil)))}}}}return f},b.prototype.updateCell=function(b,c,d,e){var f;if(c&&!c._isEdit())return 10;if(!(c&&c._isValid()&&(f=c.row())&&2&f.type))return 0;if(e||!c._isRendered())return 6;var g=2,h=c.column(),i={"cell":c,"value":void 0};if(!b._trigger("beforeCellUpdate",null,i)&&"row"!==b.options.editingMode)return 1;void 0===i.value&&(i.value=this._getCellValue(b,c));var j=i.value,k=c.value();try{var l=this._getHTMLInputElementType(c);a.grid.HTML5InputSupport.isExtendSupportRequired(l)?(i.value=a.grid.HTML5InputSupport.parse(i.value,l),i.value=a.grid.HTML5InputSupport.extend(k,i.value,l)):i.value=b.parse(c.column(),i.value),j=i.value}catch(m){i.value=j}if("datetime"===a.grid.getDataType(h)&&(j instanceof Date&&(j=j.getTime()),k instanceof Date&&(k=k.getTime())),j!==k){try{c.value(i.value)}catch(m){var n={"cell":c,"value":i.value};g=0,b._trigger("invalidCellValue",null,n)}if(2&g){var o={"cell":c};b._trigger("afterCellUpdate",null,o)}}return g},b.prototype.cellEditEnd=function(b,d,e){var f=d.row(),g={"cell":d,"event":e,"handled":!1};d._isEdit(!1),d._isRendered()&&(b._trigger("afterCellEdit",null,g),g.handled||this._defaultAfterCellEdit(b,g),b._showRowHeader()&&c(f.$rows[0].cells[0]).children("div."+a.grid.wijgrid.CSS.cellContainer).html("&nbsp;"))},b.prototype._defaultBeforeCellEdit=function(b,d){var e,f,g=d.cell.column(),h=!1;if(g.dataIndex>=0){var i=d.cell.value(),j=a.getKeyCodeEnum(),k=a.grid.HTML5InputSupport.getDefaultInputType(b._isMobileEnv(),g),l=b._allowCellEditing(),m=!1;h=!0;try{if(e=d.cell.container(),"boolean"===a.grid.getDataType(g)){var n=e.children("span");(m=!(!n.length||!n.prop("disabled")))&&(c.data(n[0],"serverSideCheckbox",!0),n.prop("disabled",!1)),f=e.find(":checkbox"),(m||!l)&&f.prop("disabled",!1),d.event&&"keypress"===d.event.type&&f.one("keyup",function(a){a.which===j.SPACE&&(a.preventDefault(),f[0].checked=!i)})}else{if(f=c("<input type='"+k+"' />").css("ime-mode",g.imeMode||"auto").addClass(a.grid.wijgrid.CSS.inputMarker).addClass("wijmo-wijinput "+b.options.wijCSS.stateFocus).bind("keydown",b,c.proxy(this._checkBoxOrInputKeyDown,this)),f.bind(c.support.selectstart?"selectstart":"mousedown",function(a){a.stopPropagation()}),d.event&&"keydown"===d.event.type&&113!==d.event.which);else switch(a.grid.getDataType(g)){case"currency":case"number":if(null!==i){f.val(i);break}case"datetime":if(a.grid.HTML5InputSupport.isExtendSupportRequired(k)){f.val(a.grid.HTML5InputSupport.toStr(i,k));break}default:f.val(b.toStr(g,i))}if(e.empty().append(f),l){var o=f.val().length;"text"===k&&new a.grid.domSelection(f[0]).setSelection({"start":o,"end":o})}}l&&(f.focus(),setTimeout(function(){f.focus()},2*this._timeout))}catch(p){alert(p.message),h=!1}}return h},b.prototype._defaultAfterCellEdit=function(b,d){var e=d.cell.columnInst(),f=e.options,g=!1;if(f.dataIndex>=0){g=!0;var h=b._view();try{var i=d.cell.container(),j=b.toStr(f,d.cell.value()),k=h._getRowInfoBySketchRowIndex(d.cell.rowIndex());if("boolean"===a.grid.getDataType(f)){var l=i.children("span"),m=l.length&&c.data(l[0],"serverSideCheckbox"),n=i.find(":checkbox");n.prop("checked","true"===j),m&&(l.prop("disabled",!0),n.prop("disabled",!0))}else b.mCellFormatter.format(c(d.cell.tableCell()),d.cell.cellIndex(),i,e,j,k)}catch(o){alert("defaultAfterCellEdit: "+o.message),g=!1}}return g},b.prototype._checkBoxOrInputKeyDown=function(b){var c=a.getKeyCodeEnum();if(b.which===c.ENTER){var d=b.data;if(d)return d._endEditInternal(b),!1}},b.prototype._getCellValue=function(a,b){var c=b.container().find(":input:first"),d=null;return c.length&&(d="checkbox"===c.attr("type")?c[0].checked:c.val()),d},b.prototype._getHTMLInputElementType=function(a){return a.container().find(":input:first").attr("type")},b}());b.cellEditorHelper=d;var e=function(){function d(b,d){this.mGrid=b,this.mWrapper=c("<div />"),this.mGrid._allowCellEditing()?this.mHiddenElement=c('<input type="text" />').keydown(c.proxy(this._onKeyDown,this)):this.mHiddenElement=c('<input type="button" />'),this.mHiddenElement.css({"position":"relative","border":0,"padding":0,"margin":0,"width":1,"height":1,"font-size":a.grid.isMobileSafari()?"0em":"1px"}),this.mFakeFocusable=c('<input type="button" />').css({"position":"relative","width":1,"height":1,"border":0,"padding":0,"margin":0}),this.mWrapper.append(this.mHiddenElement).append(this.mFakeFocusable).css({"position":"absolute","width":"0px","height":"0px","overflow":"hidden","z-index":999999}),d.append(this.mWrapper)}return d.prototype.dispose=function(){if(this.mWrapper)try{this.mWrapper.remove()}catch(a){}finally{this.mWrapper=null,this.mHiddenElement=null,this.mGrid=null}},d.prototype.focus=function(a,c){if(a&&a.length){var d=a.offset();this.mWrapper.offset({"top":d.top,"left":d.left}),this.mFakeFocusable.focus(),this.mHiddenElement.css("ime-mode",c&&c instanceof b.c1field&&c.options.imeMode||"auto").focus()}},d.prototype.isHiddenInput=function(a){return a&&(a[0]===this.mHiddenElement[0]||a[0]===this.mFakeFocusable[0])},d.prototype.canHandle=function(a){return this.mGrid._allowCellEditing()&&this.isPrintableKeyCode(a)},d.prototype.isPrintableKeyCode=function(a){var b=a.keyCode;return!a.ctrlKey&&!a.altKey&&(b>=65&&90>=b||b>=48&&57>=b||b>=96&&105>=b||b>=186&&192>=b||b>=220&&222>=b||219===b||b>=106&&111>=b||32===b||61===b||173===b||229===b||0===a.keyCode)},d.prototype._onKeyDown=function(b){if(this.canHandle(b))this.mGrid._beginEditInternal(b);else{var c=a.getKeyCodeEnum();switch(b.keyCode){case c.ESCAPE:case c.ENTER:b.preventDefault()}}},d}();b.keyDownEventListener=e}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){"use strict";var b=(jQuery,function(){function a(){this._div=document.createElement("div"),this._div.style.display="none",document&&document.body&&document.body.appendChild(this._div)}return a.prototype.dispose=function(){try{this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div)}catch(a){}finally{this._div=null}},a.prototype.format=function(a,b,c,d,e,f){d._initializeCell(a,b,c,e,f)},a.prototype.updateHTML=function(a,b,c){"undefined"==typeof c&&(c=!1);var d=a[0];if(d.firstChild)for(;d.firstChild;)d.removeChild(d.firstChild);for(c?void 0!=this._div.textContent?this._div.textContent=b||"":this._div.innerText=b||"":this._div.innerHTML=b||"&nbsp;";this._div.firstChild;)d.appendChild(this._div.firstChild)},a}());a.cellFormatterHelper=b}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function b(a){this.MIN_WIDTH=5,this._elements=[],this._gap=10,this._step=1,this._inProgress=!1,this._hoveredColumn=null,this._startLocation=null,this._lastLocation=null,this._proxy=null,this._wijgrid=a,this._evntFormat="{0}."+this._wijgrid.widgetName+".resizer"}return b.prototype.addElement=function(a){a&&a.element&&(a.element.bind(this._eventKey("mousemove"),c.proxy(this._onMouseMove,this)).bind(this._eventKey("mousedown"),c.proxy(this._onMouseDown,this)).bind(this._eventKey("mouseout"),c.proxy(this._onMouseOut,this)),this._elements.push(a))},b.prototype.dispose=function(){var a=this;c.each(this._elements,function(b,c){c.element.unbind(a._eventKey("mousemove"),a._onMouseMove).unbind(a._eventKey("mousedown"),a._onMouseDown).unbind(a._eventKey("mouseout"),a._onMouseOut)}),this._detachDocEvents()},b.prototype.inProgress=function(){return this._inProgress},b.prototype._onMouseMove=function(a){if(!this._inProgress){var b=this._getFieldByPos({"x":a.pageX,"y":a.pageY});b&&b._canSize()&&this._wijgrid._canInteract()?(b.element.css("cursor","e-resize"),this._hoveredColumn=b,a.stopPropagation()):this._onMouseOut(a)}},b.prototype._onMouseOut=function(a){this._inProgress||this._hoveredColumn&&(this._hoveredColumn.element.css("cursor",""),this._hoveredColumn=null)},b.prototype._onMouseDown=function(b){if(this._hoveredColumn=this._getFieldByPos({"x":b.pageX,"y":b.pageY}),this._hoveredColumn&&this._hoveredColumn._canSize()&&this._wijgrid._canInteract())try{var d=this._wijgrid.options.wijCSS,e=a.grid.wijgrid.CSS;this._hoveredColumn.element.css("cursor",""),this._docCursor=document.body.style.cursor,document.body.style.cursor="e-resize",this._startLocation=this._lastLocation=a.grid.bounds(this._hoveredColumn.element),this._proxy=c('<div class="'+e.resizingHandle+" "+d.wijgridResizingHandle+" "+d.stateHighlight+'">&nbsp;</div>');var f=this._wijgrid._view().getVisibleAreaBounds(!0);this._proxy.css({"left":b.pageX,"top":this._startLocation.top,"height":f.height+f.top-this._startLocation.top}),c(document.body).append(this._proxy)}finally{this._attachDocEvents(),this._inProgress=!0,b.stopPropagation()}},b.prototype._onDocumentMouseMove=function(a){var b=this._step*Math.round((a.pageX-this._lastLocation.left)/this._step);this._lastLocation={"left":this._lastLocation.left+b,"top":a.pageY,"width":void 0,"height":void 0},this._proxy.css("left",this._lastLocation.left)},b.prototype._onDocumentMouseUp=function(a){try{document.body.style.cursor=this._docCursor,this._proxy.remove(),this._startLocation!==this._lastLocation&&this._wijgrid._fieldResized(this._hoveredColumn,this._startLocation.width,Math.max(this._lastLocation.left-this._startLocation.left,this.MIN_WIDTH))}finally{this._hoveredColumn=null,this._proxy=null,this._detachDocEvents(),this._inProgress=!1}},b.prototype._onSelectStart=function(a){a.preventDefault()},b.prototype._attachDocEvents=function(){this._inProgress||(c(document).bind(this._eventKey("mousemove"),c.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),c.proxy(this._onDocumentMouseUp,this)),c.fn.disableSelection&&c(document.body).disableSelection(),"onselectstart"in document&&c(document.body).bind("selectstart",this._onSelectStart))},b.prototype._detachDocEvents=function(){this._inProgress&&(c(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp),c.fn.enableSelection&&c(document.body).enableSelection(),"onselectstart"in document&&c(document.body).unbind("selectstart",this._onSelectStart))},b.prototype._getFieldByPos=function(b){for(var c=0,d=this._elements.length;d>c;c++){var e=this._elements[c],f=a.grid.bounds(e.element),g=a.grid.isOver(b.y,b.x,f.top,f.left+f.width-this._gap,f.height,this._gap);if(g)return e}return null},b.prototype._eventKey=function(b){var c=this._wijgrid._isTouchEnv()?"wij":"";return c+a.grid.stringFormat(this._evntFormat,b)},b}();b.uiResizer=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function d(b){this._scope_guid="scope_"+a.grid.getUID(),this._dragEnd=!1,this.mZIndex=1e3;var c=a.grid.wijgrid.CSS;this._wijgrid=b,this._wijCSS=this._wijgrid.options.wijCSS,this._wrapHtml='<div class="'+this._wijCSS.widget+" "+c.wijgrid+" "+this._wijCSS.wijgrid+" "+this._wijCSS.content+" "+this._wijCSS.cornerAll+'"><table class="'+c.root+" "+c.table+" "+this._wijCSS.wijgridTable+'"><tr class="'+c.headerRow+" "+this._wijCSS.wijgridHeaderRow+'"></tr></table></div>'}return d.prototype.attachGroupArea=function(a){var b,d=this;c.ui&&c.ui.droppable&&c.ui.draggable&&a.droppable({"scope":this._scope_guid,"tolerance":"pointer","greedy":!0,"accept":function(a){return d._wijgrid.options.allowColMoving&&(b=d._getColumnInstance(a))?b._canDropToGroupArea():!1},"drop":function(a,c){!d._isInElement(a,c.draggable)&&(b=d._getColumnInstance(c.draggable))&&(d._dragEnd=!0)},"over":function(b,c){var e=d._wijgrid._groupAreaColumns().length;d._dropTargetRedirected=e>0,d._droppableColumn=e>0?d._wijgrid._groupAreaColumns()[e-1]:a,a.data("thisDroppableWijField",d._droppableColumn)},"out":function(b,c){d._droppableColumn===a.data("thisDroppableWijField")&&(d._droppableColumn=null)}})},d.prototype.attach=function(d){var e,f,g=a.grid.wijgrid.CSS,h=this;c.ui.droppable&&c.ui.draggable&&d&&(e=d.element)&&e.draggable({"helper":function(c){var f;return f=d instanceof b.c1groupedfield?e.clone():e.clone().wrap(h._wrapHtml).width(e.width()).height(e.height()).closest("."+g.wijgrid),f.addClass(g.dndHelper+" "+h._wijCSS.wijgridDndHelper).css("z-index",h.mZIndex=a.grid.getZIndex(h._wijgrid.mOuterDiv,1e3)),f},"appendTo":"body","scope":h._scope_guid,"drag":function(a,b){if(h._hideArrows(),h._droppableColumn&&!h._isInElement(a,e)){var c=h._droppableColumn.element;c||(c=h._droppableColumn),h._showArrows(c,h._getPosition(d,h._droppableColumn,a,b))}},"start":function(a,c){if(h._wijgrid._canInteract()&&h._wijgrid.options.allowColMoving&&(null==h._wijgrid._UIResizer()||!h._wijgrid._UIResizer().inProgress())){var e=d,f=d instanceof b.c1groupedfield,g=f?"groupArea":"columns";f&&(e=h._wijgrid._findInstance(d.options));var i=e.options;if(d._canDrag()&&h._wijgrid._trigger("columnDragging",null,{"drag":i,"dragSource":g}))return h._wijgrid._trigger("columnDragged",null,{"drag":i,"dragSource":g}),!0}return!1},"stop":function(a,c){h._hideArrows();try{h._dragEnd&&(h._droppableColumn.element?h._wijgrid._handleDragnDrop(d,h._droppableColumn,h._getPosition(d,h._droppableColumn,a,c),d instanceof b.c1groupedfield,h._droppableColumn instanceof b.c1groupedfield):h._wijgrid._handleDragnDrop(d,null,"left",d instanceof b.c1groupedfield,!0))}finally{h._droppableColumn=null,h._dragEnd=!1}}}).droppable({"hoverClass":h._wijCSS.stateHover,"scope":h._scope_guid,"tolerance":"pointer","greedy":!0,"accept":function(a){return h._wijgrid.options.allowColMoving&&e[0]!==a[0]&&(f=h._getColumnInstance(a))?f._canDropTo(d):!1},"drop":function(a,b){(f=h._getColumnInstance(b.draggable))&&(h._dragEnd=!0)},"over":function(a,b){h._dropTargetRedirected=!1,h._droppableColumn=d,e.data("thisDroppableWijField",h._droppableColumn)},"out":function(a,b){h._droppableColumn===d.element.data("thisDroppableWijField")&&(h._droppableColumn=null)}})},d.prototype.detach=function(a){var b;a&&(b=a.element)&&(b.data("ui-draggable")&&b.draggable("destroy"),b.data("ui-droppable")&&b.droppable("destroy"))},d.prototype.dispose=function(){this._$topArrow&&(this._$topArrow.remove(),this._$topArrow=null),this._$bottomArrow&&(this._$bottomArrow.remove(),this._$bottomArrow=null)},d.prototype._getColumnInstance=function(a){var c=a.data(b.widgetEmulator.DATA_INSTANCE_PROP);if(!c)throw"Unable to get a column instance";return c},d.prototype._showArrows=function(a,b){this._topArrow().css("z-index",this.mZIndex).show().position({"my":"center","at":b+" top","of":a,"collision":"none"}),this._bottomArrow().css("z-index",this.mZIndex).show().position({"my":"center","at":b+" bottom","of":a,"collision":"none"})},d.prototype._hideArrows=function(){this._topArrow().hide(),this._bottomArrow().hide()},d.prototype._topArrow=function(){return this._$topArrow||(this._$topArrow=c("<div />").addClass(a.grid.wijgrid.CSS.dndArrowTopContainer+" "+this._wijCSS.wijgridDndArrowTopContainer).append(c("<span />").addClass(this._wijCSS.icon+" "+this._wijCSS.iconArrowThickDown)).hide().appendTo(document.body)),this._$topArrow},d.prototype._bottomArrow=function(){return this._$bottomArrow||(this._$bottomArrow=c("<div />").addClass(a.grid.wijgrid.CSS.dndArrowBottomContainer+" "+this._wijCSS.wijgridDndArrowBottomContainer).append(c("<span />").addClass(this._wijCSS.icon+" "+this._wijCSS.iconArrowThickUp)).hide().appendTo(document.body)),this._$bottomArrow},d.prototype._isInElement=function(b,c){var d=a.grid.bounds(c,!1);return b.pageX>d.left&&b.pageX<d.left+d.width&&b.pageY>d.top&&b.pageY<d.top+d.height},d.prototype._getPosition=function(c,d,e,f){if(!d.element)return"left";if(this._dropTargetRedirected)return"right";var g,h=a.grid.bounds(d.element,!1),i=h.width/6,j=h.left+h.width/2,k="right";return e.pageX<j&&(k="left"),d instanceof b.c1groupedfield?(c instanceof b.c1groupedfield&&(g=d.options.groupedIndex-c.options.groupedIndex,1===Math.abs(g)&&(k=0>g?"left":"right")),k):(g=d.options.linearIdx-c.options.linearIdx,b.c1bandfield.test(d.options)&&c.options.parentIdx!==d.options.travIdx&&Math.abs(e.pageX-j)<i?"center":(c.options.parentIdx===d.options.parentIdx&&1===Math.abs(g)&&(k=0>g?"left":"right"),k))},d}();b.uiDragndrop=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function b(a){if(!a)throw"invalid arguments";this._wijgrid=a}return b.prototype.format=function(b,d,e,f,g,h,i){var j=(a.grid.renderState,a.grid.rowType,f.type),k=null;0===d&&this._wijgrid._showRowHeader()&&(e=null),(16===j||32===j)&&(e=null,h&&(k=h.groupInfo)&&(e=this._wijgrid._leaves()[k.leafIndex]));var l={"$cell":b,"state":g,"row":f,"column":e&&e.options,"_cellIndex":d,"_purpose":k?k.purpose:void 0};1&g?this._renderingStateFormatter(l,h,i):(this._currentStateFormatter(l,2&g),this._selectedStateFormatter(l,8&g),1!==j&&(2&g||8&g?l.$cell.addClass(this._wijgrid.options.wijCSS.stateDefault):l.$cell.removeClass(this._wijgrid.options.wijCSS.stateDefault))),c.isFunction(this._wijgrid.options.cellStyleFormatter)&&this._wijgrid.options.cellStyleFormatter(l)},b.prototype._renderingStateFormatter=function(b,c,d){var e,f,g=(a.grid.rowType,b.column),h=b.row.type,i=a.grid.wijgrid.CSS,j=this._wijgrid.options.wijCSS;switch(h){case 1:b.$cell.addClass(i.TH+" "+j.wijgridTH);break;default:b.$cell.addClass(i.TD+" "+j.wijgridTD)}if(2&h&&g&&g.textAlignment)switch(g.textAlignment.toLowerCase()){case"left":b.$cell.addClass(i.cellAlignLeft+" "+j.wijgridCellAlignLeft);break;case"right":b.$cell.addClass(i.cellAlignRight+" "+j.wijgridCellAlignRight);break;case"center":b.$cell.addClass(i.cellAlignCenter+" "+j.wijgridCellAlignCenter)}if(c)for(e in c)if(c.hasOwnProperty(e)){if(f=c[e],!("groupInfo"!==e&&"colSpan"!==e&&"rowSpan"!==e||f>1))continue;"class"===e?b.$cell.addClass(f):b.$cell.attr(e,f)}if(d)for(e in d)if(d.hasOwnProperty(e)){if("paddingLeft"===e){b.$cell.children("."+i.cellContainer).css(e,d[e]);continue}b.$cell.css(e,d[e])}if(0===b._cellIndex&&this._wijgrid._showRowHeader())b.$cell.attr({"role":"rowheader","scope":"row"}).addClass(j.stateDefault+" "+j.content+" "+i.rowHeader+" "+j.wijgridRowHeader);else switch(h){case 1:b.$cell.attr({"role":"columnheader","scope":"col"});break;case 64:b.$cell.attr({"role":"columnfooter","scope":"col"});break;default:b.$cell.attr("role","gridcell")}2&h&&b._cellIndex>=0&&g&&(b.$cell.attr("headers",window.escape(g.headerText)),g.readOnly&&b.$cell.attr("aria-readonly",!0),g.dataIndex>=0&&b.$cell.addClass("wijdata-type-"+a.grid.getDataType(g))),(16===h||32===h)&&g&&1===b._purpose&&b.$cell.addClass("wijdata-type-"+a.grid.getDataType(g))},b.prototype._currentStateFormatter=function(b,c){var d=(a.grid.rowType,a.grid.wijgrid.CSS),e=this._wijgrid.options.wijCSS;c?(b.$cell.addClass(e.stateActive),1===b.row.type?b.$cell.addClass(d.currentHeaderCell+" "+e.wijgridCurrentHeaderCell):b.$cell.addClass(d.currentCell+" "+e.wijgridCurrentCell)):(b.$cell.removeClass(e.stateActive),1===b.row.type?b.$cell.removeClass(d.currentHeaderCell+" "+e.wijgridCurrentHeaderCell):b.$cell.removeClass(d.currentCell+" "+e.wijgridCurrentCell))},b.prototype._hoveredStateFormatter=function(a,b){},b.prototype._selectedStateFormatter=function(a,b){var c=this._wijgrid.options.wijCSS;b?a.$cell.addClass(c.stateHighlight).attr("aria-selected","true"):a.$cell.removeClass(c.stateHighlight).removeAttr("aria-selected")},b}();b.cellStyleFormatterHelper=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function b(a){if(!a)throw"invalid arguments";this._wijgrid=a}return b.prototype.format=function(b,d,e){var f=(a.grid.renderState,a.grid.rowType,b.state),g=b;1&f?this._renderingStateFormatter(g,d,e):(this._currentStateFormatter(g,0!==(2&f)),this._hoveredStateFormatter(g,0!==(4&f)),this._selectedStateFormatter(g,0!==(8&f))),c.isFunction(this._wijgrid.options.rowStyleFormatter)&&this._wijgrid.options.rowStyleFormatter(g)},b.prototype._groupFormatter=function(b){var c=(a.grid.renderStateEx,b._extInfo),d=a.grid.wijgrid.CSS,e=this._wijgrid.options.wijCSS;if(1&c.state?b.$rows.css("display","none"):b.$rows.css("display",""),16&b.type){var f=this._wijgrid._groupedLeaves()[b._extInfo.groupLevel-1].options.groupInfo,g=f.expandedImageClass||e.iconArrowRightDown,h=f.collapsedImageClass||e.iconArrowRight,i=a.grid.rowAccessor.getCell$(b.$rows,this._wijgrid._showRowHeader()?1:0).find("."+d.groupToggleVisibilityButton);2&c.state?(b.$rows.attr("aria-expanded",!1),b.$rows.removeClass(d.groupHeaderRowExpanded+" "+e.wijgridGroupHeaderRowExpanded).addClass(d.groupHeaderRowCollapsed+" "+e.wijgridGroupHeaderRowCollapsed),i.removeClass(g).addClass(h)):(b.$rows.attr("aria-expanded",!0),b.$rows.removeClass(d.groupHeaderRowCollapsed+" "+e.wijgridGroupHeaderRowCollapsed).addClass(d.groupHeaderRowExpanded+" "+e.wijgridGroupHeaderRowExpanded),i.removeClass(h).addClass(g))}},b.prototype._renderingStateFormatter=function(b,d,e){var f,g,h=a.grid.wijgrid.CSS,i=this._wijgrid.options.wijCSS,j=h.row+" "+i.wijgridRow+" "+i.content;a.grid.rowType,a.grid.renderStateEx;if(b.$rows.attr("role","row"),d)for(g in d)d.hasOwnProperty(g)&&("class"===g?b.$rows.addClass(d[g]):(b.$rows.attr(g,d[g]),b.$rows[0].style.height&&b.$rows.each(function(){return c.data(this,"customHeight",this.style.height),!0})));if(e)for(g in e)e.hasOwnProperty(g)&&b.$rows.css(g,e[g]);switch(b._extInfo.groupLevel&&b.$rows.attr("aria-level",b._extInfo.groupLevel),1&b._extInfo.state&&b.$rows.css("display","none"),-5&b.type){case 1:f=h.headerRow+" "+i.wijgridHeaderRow;break;case 2:f=j+" "+h.dataRow+" "+i.wijgridDataRow,4&b.type&&(f+=" "+h.altRow+" "+i.wijgridAltRow);break;case 128:f=j+" "+h.emptyDataRow+" "+i.wijgridEmptyDataRow;break;case 8:f=h.filterRow+" "+i.wijgridFilterRow;break;case 16:b.$rows.attr({"id":"GH"+b._extInfo.groupIndex+"-"+b._extInfo.groupLevel,"aria-expanded":0===(2&b._extInfo.state)}),f=j+" "+h.groupHeaderRow+" "+i.wijgridGroupHeaderRow+" ",f+=2&b._extInfo.state?h.groupHeaderRowCollapsed+" "+i.wijgridGroupHeaderRowCollapsed:h.groupHeaderRowExpanded+" "+i.wijgridGroupHeaderRowExpanded;
break;case 32:b.$rows.attr("id","GF"+b._extInfo.groupIndex+"-"+b._extInfo.groupLevel),f=j+" "+h.groupFooterRow+" "+i.wijgridGroupFooterRow;break;case 64:f=h.footerRow+" "+i.wijgridFooterRow+" "+i.stateDefault+" "+i.stateHighlight;break;default:throw a.grid.stringFormat("unknown rowType: {0}",b.type)}b.$rows.addClass(f)},b.prototype._currentStateFormatter=function(b,d){if(this._wijgrid._showRowHeader()){var e=this._wijgrid.options.wijCSS,f=a.grid.wijgrid.CSS;d?c(b.$rows[0].cells[0]).addClass(e.stateActive+" "+f.currentRowHeaderCell+" "+e.wijgridCurrentRowHeaderCell):c(b.$rows[0].cells[0]).removeClass(e.stateActive+" "+f.currentRowHeaderCell+" "+e.wijgridCurrentRowHeaderCell)}},b.prototype._hoveredStateFormatter=function(a,b){var c=this._wijgrid.options.wijCSS;b?a.$rows.addClass(c.stateDefault+" "+c.stateHover):(a.$rows.removeClass(c.stateDefault+" "+c.stateHover),2&a.type&&a.$rows.addClass(c.wijgridDataRow))},b.prototype._selectedStateFormatter=function(a,b){},b}();b.rowStyleFormatterHelper=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function d(a){this._sum=0,this._sum2=0,this._cntNumbers=0,this._cntStrings=0,this._cntDates=0,this._max=0,this._min=0,this._minDate=0,this._maxDate=0,this._parser=a}return d.prototype.add=function(b){if(null!==b){var c=b instanceof Date?"datetime":typeof b,d=b.toString();0===this._cntStrings++&&(this._minString=this._maxString=d),d<this._minString&&(this._minString=d),d>this._maxString&&(this._maxString=d);var e=this._parseValue(b);"number"!=typeof e||a.grid.isNaN(e)?"datetime"===c&&(d=b.getTime(),0===this._cntDates++&&(this._minDate=this._maxDate=d),d<this._minDate&&(this._minDate=d),d>this._maxDate&&(this._maxDate=d)):(b=e,0===this._cntNumbers++&&(this._min=this._max=b),this._sum+=b,this._sum2+=b*b,b<this._min&&(this._min=b),b>this._max&&(this._max=b))}},d.prototype.getValueString=function(a,b){var c=a.options;if(this._cntNumbers&&("number"===c.dataType||"currency"===c.dataType||this._cntNumbers==this._cntStrings)){var d=this._getValue(c.aggregate);return b.toStr(c,d)}if(this._cntDates&&"datetime"===c.dataType)switch(c.aggregate){case"max":return b.toStr(c,new Date(this._maxDate));case"min":return b.toStr(c,new Date(this._minDate));case"count":return this._cntStrings+""}if(this._cntStrings)switch(c.aggregate){case"max":return this._maxString;case"min":return this._minString;case"count":return this._cntStrings+""}return""},d.prototype._parseValue=function(a){var d=typeof a;if("number"===d)return a;if("string"===d&&""===c.trim(a))return 0;if(this._parser){var e;try{e=this._parser.parse({"dataType":"currency"},a)}catch(f){e=NaN}if(b.isNaN(e)&&(e=parseFloat(a)),!b.isNaN(e))return e}return a},d.prototype._getValue=function(a){switch(a){case"average":return 0===this._cntNumbers?0:this._sum/this._cntNumbers;case"count":return this._cntStrings;case"max":return this._max;case"min":return this._min;case"sum":return this._sum;case"std":return this._cntNumbers<=1?0:Math.sqrt(this._getValue("var"));case"stdPop":return this._cntNumbers<=1?0:Math.sqrt(this._getValue("varPop"));case"var":return this._cntNumbers<=1?0:this._getValue("varPop")*this._cntNumbers/(this._cntNumbers-1);case"vapPop":if(this._cntNumbers<=1)return 0;var b=this._sum/this._cntNumbers;return this._sum2/this._cntNumbers-b*b}return 0},d}();b.tally=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function b(b){this._docEventsUID="wijgridfrozener"+a.grid.getUID(),this._docEventsAttached=!1,this._newStaticIndex=-1,this._staticColumnIndex=-1,this._staticRowIndex=-1,this._staticOffsetH=0,this._staticOffsetV=0,this._inProgress=!1,this._wijgrid=b,this.refresh()}return b.prototype.inProgress=function(){return this._inProgress},b.prototype.refresh=function(){this.dispose();var b=this._wijgrid.options.freezingMode;if("none"!==b){this._$outerDiv=this._wijgrid.mOuterDiv.find("."+a.grid.wijgrid.CSS.fixedView),this._superPanel=this._wijgrid._view()._getSuperPanel(),this._staticOffsetH=this._wijgrid._getStaticOffsetIndex(!1),this._staticOffsetV=this._wijgrid._getStaticOffsetIndex(!0),this._staticColumnIndex=this._wijgrid._getStaticIndex(!1),this._staticRowIndex=this._wijgrid._getStaticIndex(!0),this._visibleBounds=this._wijgrid._view().getVisibleContentAreaBounds();var c=a.grid.bounds(this._$outerDiv.find(".wijmo-wijgrid-split-area-nw")),d=a.grid.bounds(this._$outerDiv);"both"!==b&&"columns"!==b||!("right"!==this._wijgrid.options.staticColumnsAlignment||this._staticColumnIndex>=0)||this._createVBar(this._visibleBounds,c,d),"both"!==b&&"rows"!==b||this._wijgrid._serverSideVirtualScrolling()||this._createHBar(this._visibleBounds,c,d)}},b.prototype.dispose=function(){this._$hBar&&(this._$hBar.remove(),this._$hBar=null),this._$vBar&&(this._$vBar.remove(),this._$vBar=null),this._$proxy&&(this._$proxy.remove(),this._$proxy=null),this._$outerDiv=null,this._superPanel=null,this._detachDocEvents()},b.prototype._createVBar=function(b,d,e){var f="right"!==this._wijgrid.options.staticColumnsAlignment,g=f?d.width+d.left:d.left-2,h=this,i=a.grid.wijgrid.CSS,j=this._wijgrid.options.wijCSS;g<=b.left+b.width&&(this._$vBar=c("<div><div></div></div>").addClass(i.freezingHandleV+" "+j.wijgridFreezingHandleV).addClass(f?"":"not-allowed").css({"left":g-e.left,"top":d.top-e.top,"height":b.height+b.top-d.top}).bind("mousedown",function(a){a.data=!0,h._onBarMouseDown.apply(h,arguments)}).appendTo(this._$outerDiv),this._$vBar.find("div").addClass(i.freezingHandleContent+" "+j.header))},b.prototype._createHBar=function(b,d,e){var f=d.top+d.height,g="right"!==this._wijgrid.options.staticColumnsAlignment,h=this,i=a.grid.wijgrid.CSS,j=this._wijgrid.options.wijCSS;f<=b.top+b.height&&(this._$hBar=c("<div><div></div></div>").addClass(i.freezingHandleH+" "+j.wijgridFreezingHandleH).css({"left":g?d.left-e.left:0,"top":f-e.top,"width":g?b.width+b.left-d.left:b.width}).bind("mousedown",function(a){a.data=!1,h._onBarMouseDown.apply(h,arguments)}).appendTo(this._$outerDiv),this._$hBar.find("div").addClass(i.freezingHandleContent+" "+j.header))},b.prototype._onBarMouseDown=function(b){if(this._wijgrid.options.disabled||"right"===this._wijgrid.options.staticColumnsAlignment&&b.data)return!1;var d=a.grid.wijgrid.CSS,e=this._wijgrid.options.wijCSS;this._visibleBounds=this._wijgrid._view().getVisibleContentAreaBounds(),this._newStaticIndex=b.data?this._staticColumnIndex:this._staticRowIndex,this._$proxy=c('<div class="'+d.resizingHandle+" "+e.wijgridResizingHandle+" "+e.header+'"></div>').appendTo(document.body),this._attachDocEvents(b.data),this._inProgress=!0,b.stopPropagation()},b.prototype._onDocumentMouseMove=function(a){a.data&&this._superPanel.options.hScroller.scrollValue?this._superPanel.hScrollTo(0):!a.data&&this._superPanel.options.vScroller.scrollValue&&this._superPanel.vScrollTo(0),this._showPosition(a)},b.prototype._onDocumentMouseUp=function(a){try{this._$proxy&&this._$proxy.remove(),this._detachDocEvents(),a.data?this._newStaticIndex!==this._staticColumnIndex&&this._wijgrid.option("staticColumnIndex",this._newStaticIndex):this._newStaticIndex!==this._staticRowIndex&&this._wijgrid.option("staticRowIndex",this._newStaticIndex)}finally{this._$proxy=null,this._inProgress=!1}},b.prototype._attachDocEvents=function(a){if(!this._docEventsAttached)try{c.fn.disableSelection&&c(document.body).disableSelection(),this._wijgrid._view().toggleDOMSelection(!1),c(document).bind(this._docEventKey("mousemove"),a,c.proxy(this._onDocumentMouseMove,this)).bind(this._docEventKey("mouseup"),a,c.proxy(this._onDocumentMouseUp,this))}finally{this._docEventsAttached=!0}},b.prototype._detachDocEvents=function(){if(this._docEventsAttached)try{c.fn.enableSelection&&c(document.body).enableSelection(),this._wijgrid._view().toggleDOMSelection(!0),c(document).unbind("."+this._docEventsUID)}finally{this._docEventsAttached=!1}},b.prototype._docEventKey=function(b){return a.grid.stringFormat("{0}.{1}",b,this._docEventsUID)},b.prototype._showPosition=function(b){var c,d,e,f,g,h,i,j,k="right"!==this._wijgrid.options.staticColumnsAlignment;if(b.data){if(j=a.grid.bounds(this._$vBar),Math.abs(b.pageX-(j.left+j.width/2))<j.width)return void this._$proxy.hide();if(c=this._getFieldByPos({"x":b.pageX,"y":b.pageY})){if(d=a.grid.bounds(c.element),e=d.left+d.width/2,f=c.options.visLeavesIdx-this._staticOffsetV,g=Math.max(f-1,-1),h=b.pageX<e?g!==this._staticColumnIndex:f===this._staticColumnIndex,i=h?d.left:d.left+d.width,!a.grid.isOverAxis(i,this._visibleBounds.left-1,this._visibleBounds.width+2))return;this._newStaticIndex=h?g:f,this._$proxy.show().css({"left":i,"top":d.top,"width":3,"height":this._visibleBounds.height+this._visibleBounds.top-d.top})}}else{if(j=a.grid.bounds(this._$hBar),Math.abs(b.pageY-(j.top+j.height/2))<j.height)return void this._$proxy.hide();if(c=this._getRowByPos({"x":b.pageX,"y":b.pageY})){if(d=a.grid.bounds(c),e=d.top+d.height/2,f=this._wijgrid._view().getAbsoluteRowIndex(c)-this._staticOffsetH,g=Math.max(f-1,-1),h=b.pageY<e?g!==this._staticRowIndex:f===this._staticRowIndex,i=h?d.top:d.top+d.height,!a.grid.isOverAxis(i,this._visibleBounds.top-1,this._visibleBounds.height+2))return;this._newStaticIndex=h?g:f,this._$proxy.show().css({"left":k?d.left:this._visibleBounds.left,"top":i,"width":k?this._visibleBounds.width+this._visibleBounds.left-d.left:this._visibleBounds.width,"height":3})}}},b.prototype._getFieldByPos=function(b){for(var c=this._wijgrid.columns(),d=0,e=c.length;e>d;d++){var f=c[d],g=f.options;if(g.isLeaf){var h=a.grid.bounds(f.element);if(a.grid.isOverAxis(b.x,h.left,h.width))return f}}return null},b.prototype._getRowByPos=function(b){var d,e,f,g,h=this._wijgrid._rows();for(d=0,e=h.length();e>d;d++)if(f=h.item(d)[0],g=a.grid.bounds(c(f)),a.grid.isOverAxis(b.y,g.top,g.height))return f;return null},b}();b.uiFrozener=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(){function d(){}return d.generate=function(b,c,e){switch(b=(b||"").toLowerCase()){case"append":d._processAppendMode(c,e);break;case"merge":d._processMergeMode(c,e);break;case"none":break;default:throw a.grid.stringFormat('Unsupported value: "{0}"',b)}},d._processAppendMode=function(b,e){var f={};a.grid.traverse(e,function(b){b.dynamic&&a.grid.validDataKey(b.dataKey)&&(f[b.dataKey]=!0)}),c.each(b,function(a,b){"name"in b&&!f[b.name]&&e.push(d._createAutoField(b))})},d._processMergeMode=function(b,e){var f=[];if(a.grid.traverse(e,function(c){if(c.isLeaf&&d._isBindableColumn(c)){var e=c.dataKey;a.grid.validDataKey(e)?void 0!==b[e]&&delete b[e]:null!==e&&f.push(c)}}),f.length){var g=0;c.each(b,function(a,c){var d=f[g++];d&&(d.dataKey=c.name,delete b[a])})}c.each(b,function(a,b){e.push(d._createAutoField(b))})},d._createAutoField=function(b){return a.grid.createDynamicField({"dataKey":b.name})},d._isBindableColumn=function(a){return!(b.c1bandfield.test(a)||b.c1rowheaderfield.test(a)||b.c1buttonbasefield.test(a)||b.c1buttonfield.test(a)||b.c1commandbuttonfield.test(a))},d}();b.columnsGenerator=d}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){"use strict";var b=jQuery,c=function(){function a(a,b,c,d){this._timer=0,this._timeout=50,this._ignoreScrollEvents=!1,this._debounceScrolledEvent=!0,this._wijgrid=a,this._$content=b,this._view=this._wijgrid._view(),this._N=this._wijgrid._renderableRowsCount(),this._rowOuterHeight=d,this._updateContentHeight();var e=this._wijgrid.mOuterDiv.height()+this._N*this._rowOuterHeight;this._view._splitAreas.sw.height(e)}return a.prototype.scrollTo=function(a,b){this._debounceScrolledEvent=!1,this._completeListener=b,this._panelInst.vScrollTo(a*this._panelInst.options.vScroller.scrollSmallChange,!0)},a.prototype._updateContentHeight=function(){this._$content.height(this._rowOuterHeight*this._N)},a.prototype.attach=function(a){this._$scroller=a,this._panelInst=a.data("wijmo-wijsuperpanel"),this._updateContentHeight(),this._updateVerticalScroller(),a.bind("wijsuperpanelscrolled.wijgrid",b.proxy(this._onSuperpanelScrolled,this)),a.bind("wijsuperpanelscrolling.wijgrid",b.proxy(this._onSuperpanelScrolling,this)),a.bind("wijsuperpanelscrolled.wijgrid",b.proxy(this._onSuperpanelPostScrolled,this))},a.prototype._updateVerticalScroller=function(){var a=Math.max(0,this._N-(this._view.getVirtualPageSize()-1));this._setVerticalScrollerOptions(1,a)},a.prototype._setVerticalScrollerOptions=function(a,b){var c=this._panelInst.options.vScroller;if(c.scrollSmallChange=a,c.scrollLargeChange=4*a,b+=c.scrollLargeChange-1,c.scrollMax=b,this._panelInst.option("vScroller",c),!this._view._isNativeSuperPanel()&&void 0!=this._panelInst._scrollDrag){var d=this._panelInst._fields(),e=d.vbarContainer,f=d.vbarDrag;this._panelInst._scrollDrag("v",e,f,!1)}},a.prototype._changeVisibleRowsCount=function(a){this._N=a,this._updateContentHeight(),this._updateVerticalScroller()},a.prototype.dispose=function(){this._$scroller.unbind(".wijgrid"),this._clearTimer()},a.prototype._clearTimer=function(){window.clearTimeout(this._timer),this._timer=0},a.prototype._onSuperpanelScrolling=function(a,b){return this._ignoreScrollEvents||"v"!==b.dir?void 0:-1===this._timer?!1:void 0},a.prototype._onSuperpanelScrolled=function(a,c){var d=this;this._ignoreScrollEvents||"v"!==c.dir||(this._timer>0&&this._clearTimer(),-1!==this._timer&&(this._timer=window.setTimeout(function(){d._timer=-1;var a=Math.floor(c.newValue/d._panelInst.options.vScroller.scrollSmallChange),e=d._view._bounds.start;0>a&&(a=0),a>=d._N&&(a=d._N-1),a!==e?(d._debounceScrolledEvent=!0,d._wijgrid._handleVirtualScrolling(a,null,b.proxy(d._scrollingCompleted,d))):(d._debounceScrolledEvent=!0,d._log(),d._clearTimer())},this._debounceScrolledEvent?this._timeout:0)))},a.prototype._scrollingCompleted=function(a){this._wijgrid._trackScrollingIndex(a),this._log(),this._completeListener&&(this._completeListener(),this._completeListener=null),this._clearTimer()},a.prototype._onSuperpanelPostScrolled=function(){b.isFunction(this._postScrolled)&&this._postScrolled.apply(this,arguments)},a.prototype._log=function(){},a}();a.uiVirtualScroller=c}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){var b=function(){function a(a){this._items=[],this._capacity=null,this._maxRowIndex=a}return a.prototype.add=function(a){this._capacity=null;var b,c=this._items.length;if(!c||(b=this._items[c-1]).end<a.start)c&&a.start-b.end===1?b.end=a.end:this._items.push(a);else{var d,e=this._binSearchByStartVal(a.start),f=this._binSearchByEndVal(a.end),g=0>e?~e:e,h=0>f?~f:f,i=e>=0||g>0&&a.start<=this._items[g-1].end,j=f>=0||c>h&&a.end<=this._items[h].end&&a.end>=this._items[h].start;i?j?e>=0?(this._items[h].start=this._items[g].start,(d=h-g)&&this._items.splice(g,d)):(this._items[h].start=this._items[g-1].start,(d=h-g+1)&&this._items.splice(g-1,d)):e>=0?(this._items[g].end=a.end,(d=h-g-1)&&this._items.splice(g,d)):(this._items[g-1].end=a.end,(d=h-g)&&this._items.splice(g,d)):j?(this._items[h].start=a.start,(d=h-g)&&this._items.splice(g,d)):this._items.splice(g,h-g,a)}},a.prototype.item=function(a){return this._items[a]},a.prototype.forEachIndex=function(a,b,c){if(!(0>a)){var d=this._items.length,e=this._getIteratorStateFor(a),f=0,g=!0,h=!1;if(e)for(var i=e.j,j=e.i;d>j&&!h;j++){var k=this._items[j];for(g||(i=k.start),i;i<=k.end&&!h;i++){if(++f>b&&-1!==b)return;h=c(i)===!1}g=!1}}},a.prototype.forEachIndexBackward=function(a,b,c){if(!(0>a)){var d=(this._items.length,this._getIteratorStateFor(a)),e=0,f=!0,g=!1;if(d)for(var h=d.j,i=d.i;i>=0&&!g;i--){var j=this._items[i];for(f||(h=j.end),h;h>=j.start&&!g;h--){if(++e>b&&-1!==b)return;g=c(h)===!1}f=!1}}},a.prototype._getIteratorStateFor=function(a){for(var b=this._items.length,c=0,d=0;b>d;d++){var e=this._items[d];c+=e.end-e.start+1;var f=c-a;if(f>=0)return{"i":d,"j":e.end-f+1}}return null},a.prototype.getAbsIndex=function(a){for(var b=0,c=this._items.length;c>b;b++){var d=this._items[b],e=d.end-d.start;if(e>=a)return d.start+a;a-=e+1}return-1},a.prototype.getRenderedIndex=function(a){var b=this.hasAbsIndex(a);if(b>=0){for(var c=0,d=0;b>d;d++){var e=this._items[d];c+=e.end-e.start+1}return c+(a-this._items[b].start)}return-1},a.prototype.hasAbsIndex=function(a){if(this._items.length){var b=this._binSearchByStartVal(a);if(b>=0)return b;if(b=~b,b>0&&a<=this._items[b-1].end)return b-1}return-1},a.prototype.length=function(){return this._items.length},a.prototype.capacity=function(){if(null===this._capacity){for(var a=0,b=0,c=this._items.length;c>b;b++){var d=this._items[b];a+=d.end-d.start+1}this._capacity=a}return this._capacity},a.prototype.truncateByStart=function(a,b){var c=this._binSearchByStartVal(a),d=this._items.length;0>c?(c=~c,d>c?c>0&&this._items[c-1].end>=a?(this._items[c-1].start=a,this._items.splice(0,c-1)):(b&&(this._items[c].start=a),this._items.splice(0,c)):this._items=[]):this._items.splice(0,c)},a.prototype._binSearchByStartVal=function(a){for(var b=0,c=this._items.length-1;c>=b;){var d=c+b>>1,e=this._items[d].start-a;if(0===e)return d;0>e?b=d+1:c=d-1}return~b},a.prototype._binSearchByEndVal=function(a){for(var b=0,c=this._items.length-1;c>=b;){var d=c+b>>1,e=this._items[d].end-a;if(0>e)b=d+1;else{if(!e)return d;c=d-1}}return~b},a}();a.renderBoundsCollection=b}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){function b(b,c,e,f){function g(c){return f.parser=f.parser||a.defaultParsers[c],f.parser||null==b||a.errors.noParser(c),f.parser}var h=b;if(f=d.extend({"nullString":"","format":""},f),c=c||null!=b&&typeof b,e=e||c,!e)return b;if("string"==e)return g(c),f.parser?f.parser.toStr(b,f.culture,f.format,f.nullString,!0):b;if(g(e),!f.parser)return b;if(b=f.parser.parse(b,f.culture,f.format,f.nullString,!0),isNaN(b)&&null!=b&&a.util.isNumeric(b)){if(f.ignoreError)return h;a.errors.cantConvert(e,h)}return b}function c(b){return function(){return e||a.util.logError(a.errors.noGlobalize.create().message),b.apply(this,arguments)}}var d=jQuery,e=Globalize;a.convert=b,a.defaultParsers={"string":{"parse":function(a,b,c,d,e){switch(a){case null:return null;case d:if(e)return null;case void 0:case"&nbsp":return"";default:return""+a}},"toStr":function(a,b,c,d,e){return null===a&&e?d:""+a}},"number":{"parse":function(a,b,c,d,f){var g=typeof a;return"number"===g?isNaN(a)?NaN:a:!a&&0!==a||"&nbsp;"===a||a===d&&f?null:e.parseFloat(a,10,b)},"toStr":function(a,b,c,d,f){return null===a&&f?d:e.format(a,c||"n",b)}},"currency":{"parse":function(a,b,c,d,f){var g=typeof a;return"number"===g?isNaN(a)?NaN:a:!a&&0!==a||"&nbsp;"===a||a===d&&f?null:("string"===g&&(a=a.replace(b.numberFormat.currency.symbol,"")),e.parseFloat(a,10,b))},"toStr":function(a,b,c,d,f){return null===a&&f?d:e.format(a,c||"c",b)}},"datetime":{"parse":function(a,b,c,d,f){var g;if(a instanceof Date)return a;if(!a||"&nbsp;"===a||a===d&&f)return null;if(g=/^\/Date\((\d+)\)\/$/.exec(a))return new Date(parseInt(g[1],10));var h=e.parseDate(a,c||"d",b);return(null==h||isNaN(h))&&(h=Date.parse(a),h=isNaN(h)?NaN:new Date(h)),h},"toStr":function(a,b,c,d,f){return null===a&&f?d:e.format(a,c||"d",b)}},"boolean":{"parse":function(a,b,c,e,f){var g=typeof a;if("number"===g)return 0!=a;if("boolean"===g)return a;if("string"===g&&(a=d.trim(a)),!a||"&nbsp;"===a||a===e&&f)return null;switch(a.toLowerCase()){case"true":return!0;case"false":return!1}return NaN},"toStr":function(a,b,c,d,e){return null===a&&e?d:a?"true":"false"}}},d.each(a.defaultParsers,function(a,b){b.parse=b.parse&&c(b.parse),b.toStr=b.toStr&&c(b.toStr)})}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){!function(b){!function(c){function d(d){function e(d){var f=[];if(0===d.length)return f;var g=c.Connective.AND;return a.util.each(d,function(d,h){if(0==d&&a.util.isString(h)){var i=h.toLowerCase();if(i==c.Connective.AND||i==c.Connective.OR)return void(g=i)}if($.isArray(h)){if(h=e(h),!h)return;if(h[0]===g||2==h.length)return h.shift(),void(f=f.concat(h))}else{var j=b.normalizeCondition(h);if(!j)return;j.property=h.property,h=j}f.push(h)}),0==f.length?null:(f.unshift(g),f)}return e(d)}function e(b){if(!$.isArray(b))return null;var e={"isEmpty":!0,"original":b,"normalized":d(b),"func":null};return null==e.normalized?e.func=function(a){return!0}:(e.isEmpty=!1,e.func=function(b){function d(e){var f=e[0]===c.Connective.AND,g=f?a.util.every:a.util.some;return g(e,function(c,e){if(0===e)return f;if($.isArray(c))return d(c);var g=a.util.getProperty(b,c.property);return c.op.apply(g,c.value)})}return d(e.normalized)}),e}function f(a){return e(a)||b.compile(a)}c.Connective={"AND":"and","OR":"or"},c.compile=f}(b.extended||(b.extended={}));b.extended}(a.filtering||(a.filtering={}));a.filtering}(a.data||(a.data={}));a.data}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){var c=jQuery,d=a.data,e=a.data.filtering.extended,f=function(){function a(a){this.real=a,this._updatingFilter=!1,this._overrideFilter(),this._makeMemberProxies()}return a.prototype._overrideFilter=function(){var a=this;this.filter=d.observable(this.real.filter()),this.filter.subscribe(function(b){a.real.filter()===b||a._updatingFilter||a.refresh({"filter":b})}),this.real.filter.subscribe(function(b){b!==a._lastSetFilter&&a.filter(b)})},a.prototype.refresh=function(a,b){"undefined"==typeof b&&(b=!1),a=c.extend({},a);var d=a.filter;a.filter=this._coerceFilter(a.filter),this._lastSetFilter=a.filter,this._updatingFilter=!0;try{c.isFunction(a.filter)&&!c.isFunction(d)?this.filter(d):this.filter(a.filter)}finally{this._updatingFilter=!1}return this.real.refresh(a,b)},a.prototype._makeMemberProxies=function(){var a=this;d.util.each(this.real,function(b,d){c.isFunction(d)&&!a[b]&&"_"!==b.charAt(0)&&(a[b]=c.isFunction(d.subscribe)?d:function(){return d.apply(a.real,arguments)})})},a.create=function(b){return new a(b)},a.prototype._convertComplexPropertyFilterToExtendedFilterFormat=function(a){var b=[];return c.each(a,function(a,f){if(c.isArray(f)){var g=d.util.isString(f[0])&&f[0].toLowerCase();if(g===e.Connective.AND||g===e.Connective.OR)return void b.push(f)}else f=[f];var h=[];c.each(f,function(b,c){var e=d.filtering.normalizeCondition(c);e&&(e.property=a,h.push(e))}),h.length>0&&b.push(h)}),b.length>0?b:null},a.prototype._coerceFilter=function(a){if(c.isArray(a))return e.compile(a).func;if(!c.isPlainObject(a))return a;a=c.extend(!0,{},a);var b={};if(c.each(a,function(e,f){if(c.isArray(f)||(f=[f]),b){var g=d.util.isString(f[0])&&f[0].toLowerCase();if(1==f.length||2==f.length&&("and"===g||"or"===g))return void(b[e]=f[f.length-1])}a[e]=f,b=null}),b)return b;var f=this._convertComplexPropertyFilterToExtendedFilterFormat(a);return e.compile(f).func},a.prototype._unsafeReplace=function(a,b){this.real.sourceArray[a]=b,this.real.local[a]=b},a.prototype._unsafeSplice=function(a,b,c){2===arguments.length?(this.real.sourceArray.splice(a,b),this.real.local.splice(a,b)):(this.real.sourceArray.splice(a,b,c),this.real.local.splice(a,b,c))},a.prototype._unsafePush=function(a){this.real.sourceArray.push(a),this.real.local.push(a)},a}();b.GridDataView=f}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){var c=function(b){function c(a){this.mObservableArray=a;var c=ko.utils.unwrapObservable(this.mObservableArray);b.call(this,c,null)}return __extends(c,b),c.validSource=function(a){return!!(ko&&ko.isObservable(a)&&$.isFunction(a.slice))},c.prototype.refresh=function(c,d){"undefined"==typeof d&&(d=!1),this.sourceArray=ko.utils.unwrapObservable(this.mObservableArray),this.mPlainArray=ko.toJS(this.sourceArray);var e=c&&void 0!==c.pageSize?c.pageSize:this.pageSize(),f=c&&void 0!==c.pageIndex?c.pageIndex:this.pageIndex();if(e>0&&f>0){var g=a.data.util.pageCount(this.sourceArray.length,e);f>=g&&(f=Math.max(0,g-1),c||(c={}),c.pageIndex=f)}return b.prototype.refresh.apply(this,[c,d])},c.prototype.getPlainSource=function(){return this.mPlainArray},c.prototype.dispose=function(){this.mObservableArray=null,this.mPlainArray=null,b.prototype.dispose.apply(this,arguments)},c}(a.data.ArrayDataView);b.koDataView=c}(a.grid||(a.grid={}));a.grid}(wijmo||(wijmo={}));var wijmo;!function(a){var b=jQuery,c=function(){function a(){}return a.prototype.round=function(a,b){if(!a)return 0;var c=Math.pow(10,b||2);return Math.round(a*c)/c},a.prototype.toOADate=function(a){var b=864e5,c=null;return a&&a.valueOf&&(c=a.valueOf()-new Date(1900,0,1).valueOf()+2*b),c},a.prototype.fromOADate=function(a){var b=864e5,c=new Date(a-2*b+new Date(1900,0,1).getTime());return c},a.prototype.arrayClone=function(a){var c=[];return b.each(a,function(a,d){c.push(b.extend(!0,{},d))}),c},a}(),d=function(){function a(){}return a.prototype.isSVGElem=function(a){var b="http://www.w3.org/2000/svg";return 1===a.nodeType&&a.namespaceURI===b},a.prototype.addClass=function(a,c){c=c||"";var d=this;b.each(a,function(){if(d.isSVGElem(this)){var a=this;b.each(c.split(/\s+/),function(c,d){var e=a.className?a.className.baseVal:a.getAttribute("class");-1===b.inArray(d,e.split(/\s+/))&&(e+=(e?" ":"")+d,a.className?a.className.baseVal=e:a.setAttribute("class",e))})}else b(this).addClass(c)})},a.prototype.clearRaphaelCache=function(){},a.prototype.getPositionByAngle=function(a,b,c,d){var e={"x":0,"y":0},f=Raphael.rad(d);return e.x=a+c*Math.cos(-1*f),e.y=b+c*Math.sin(-1*f),e},a.prototype.hasClass=function(a,c){if(!c||0===c.length)return!1;if(this.isSVGElem(a)){var d=a.className?a.className.baseVal:a.getAttribute("class"),e=!1;return b.each(d.split(/\s+/),function(a,b){return b===c?(e=!0,!1):void 0}),e}return b(a).hasClass(c)},a.prototype.sector=function(a,b,c,d,e){var f=this.getPositionByAngle(a,b,c,d),g=this.getPositionByAngle(a,b,c,e);return["M",a,b,"L",f.x,f.y,"A",c,c,0,+(e-d>180),0,g.x,g.y,"z"]},a}();b.extend(c.prototype),b.extend({"wijraphael":d.prototype});var e="[\\x20\\t\\r\\n\\f]",f=(b.expr.filter.CLASS,function(a,b){var c,d,e,f=a.split("."),g=b.split("."),h=Math.max(f.length,g.length),i=0;for(c=0;h>c;c++){if(d=f[c]?parseInt(f[c]):0,e=g[c]?parseInt(g[c]):0,d>e){i=1;break}if(e>d){i=-1;break}}return i});b.expr.filter.CLASS=function(a,c){if(f(b.fn.jquery,"1.8")<0){var d=b.wijraphael&&b.wijraphael.isSVGElem(a)?a.className?a.className.baseVal:a.getAttribute("class"):a.className;return(" "+d+" ").indexOf(c)>-1}var g=new RegExp("(^|"+e+")"+a+"("+e+"|$)");return function(a){var c=b.wijraphael&&b.wijraphael.isSVGElem(a)?a.className?a.className.baseVal:a.getAttribute("class"):a.className;return g.test(c)}},f(b.fn.jquery,"1.8")<0&&(b.expr.preFilter.CLASS=function(a,c,d,e,f,g){var h,i=0,j=null,k=null;if(a=" "+a[1].replace(/\\/g,"")+" ",g)return a;for(i=0,j={};j;i++){if(j=c[i],!j)try{j=c.item(i)}catch(l){}j&&(k=b.wijraphael&&b.wijraphael.isSVGElem(j)?(j.className?j.className.baseVal:"")||j.getAttribute("class"):j.className,h=k&&(" "+k+" ").indexOf(a)>-1,f^h?d||e.push(j):d&&(c[i]=!1))}return!1}),Raphael.fn.tri=function(a,b,c){var d=a,e=b-c,f=Math.cos(30*Math.PI/180)*c,g=Math.tan(60*Math.PI/180)*f,h=a+f,i=b+g,j=a-f,k=b+g,l=["M",d.toString(),e.toString(),"L",h.toString(),i.toString(),"L",j.toString(),k.toString(),"z"];return this.path(l.join(" "))},Raphael.fn.invertedTri=function(a,b,c){var d=a,e=b+c,f=Math.cos(30*Math.PI/180)*c,g=Math.tan(60*Math.PI/180)*f,h=a+f,i=b-g,j=a-f,k=b-g,l=["M",d.toString(),e.toString(),"L",h.toString(),i.toString(),"L",j.toString(),k.toString(),"z"];return this.path(l.join(" "))},Raphael.fn.box=function(a,b,c){var d=Math.cos(45*Math.PI/180)*c,e=["M",a-d,b-d,"L",a+d,b-d,"L",a+d,b+d,"L",a-d,b+d,"z"];return this.path(e.join(" "))},Raphael.fn.diamond=function(a,b,c){var d=["M",a,b-c,"L",a+c,b,"L",a,b+c,"L",a-c,b,"z"];return this.path(d.join(" "))},Raphael.fn.cross=function(a,b,c){var d=Math.cos(45*Math.PI/180)*c,e=["M",a-d,b-d,"L",a+d,b+d,"M",a-d,b+d,"L",a+d,b-d];return this.path(e.join(" "))},Raphael.fn.paintMarker=function(a,b,c,d){var e=this,f=null;switch(a||(a="circle"),a){case"circle":f=e.circle(b,c,d);break;case"tri":f=e.tri(b,c,d);break;case"invertedTri":f=e.invertedTri(b,c,d);break;case"box":f=e.box(b,c,d);break;case"diamond":f=e.diamond(b,c,d);break;case"cross":f=e.cross(b,c,d)}return f},Raphael.fn.htmlText=function(a,c,d,e,f,g){var h=function(a,b,c){var d=/<(b|strong)>/,e=/<(i|em)>/,f=/href=[\"\']([^\"\']+)[\"\']/,g=/<a/;c&&a.attr(c),d.test(b)&&a.attr("font-weight","bold"),e.test(b)&&a.attr("font-style","italic"),g.test(b)&&b.match(f)[1]&&a.attr("href",b.match(f)[1])},i=d.toString().split(/<br\s?\/>|\\r/i),j=this,k=j.set(),l=0,m=0;return f=f||3,g=g||5,b.each(i,function(a,c){var d=0,i=c.split("|||");c=c.replace(/<([A-Za-z]+(.|\n)*?)>/g,"|||<$1>").replace(/<\/([A-Za-z]*)>/g,"</$1>|||"),b.each(i,function(a,c){var g,i=null,n=null,o=0,p=0;""!==c&&(i=c,i=b.trim(i.replace(/<(.|\n)*?>/g,"")),g=j.text(0,0,i),h(g,c,e),n=g.wijGetBBox(),o=n.width/2+l,p=-n.height/2+m,l=l+n.width+f,g.translate(o,p),k.push(g),d<n.height&&(d=n.height))}),m+=d+g,l=d=0}),m=0,k.transform(Raphael.format("...t{0},{1}",a-k.getBBox().x,c-k.getBBox().y)),k},Raphael.fn.line=function(a,b,c,d){return this.path(["M",a.toString(),b.toString(),"L",c.toString(),d.toString()])},Raphael.fn.roundRect=function(a,c,d,e,f,g,h,i){var j=[],k=[-1,1,1,1,1,-1,-1,-1],l=["v","h","v","h"],m=null,n=null;return b.each([f,g,h,i],function(a,b){j="number"==typeof b?j.concat([{"x":b,"y":b}]):"object"==typeof b?j.concat(b):j.concat([{"x":0,"y":0}])}),m=["M",a+j[0].x,c],n=[e-j[0].y-j[1].y,d-j[1].x-j[2].x,j[2].y+j[3].y-e,j[3].x+j[0].x-d],b.each(j,function(a,b){b.x&&b.y&&(m=m.concat("a",b.x,b.y,0,0,0,k[2*a]*b.x,k[2*a+1]*b.y)),m=m.concat(l[a],n[a])}),m.push("z"),this.path(m)},Raphael.fn.wrapText=function(a,c,d,e,f,g){function h(a,b,c){for(var d=null,e=null,f=a.toString().split(" "),g=[],h=[],j="";f.length;)j+=" "+f[0],d=i.text(-1e3,-1e3,j),d.attr(c),e=d.wijGetBBox(),e.width>b?(h.length&&(g.push(h),j=f[0]),h=[f.shift()]):h.push(f.shift()),0===f.length&&g.push(h),d.wijRemove(),d=null;return g}var i=this,j=g.rotation,k=j?b.extend(!0,{},g,{"rotation":0}):g,l=c,m=i.set(),n=null,o=null,p=[];return"undefined"==typeof d&&(d=""),b.each(h(d,e,k),function(b,c){var d=c.join(" "),g=f||"near",h=i.text(a,l,d),o=0,q=0;switch(h.wijAttr(k,null),n=h.wijGetBBox(),g){case"near":o=e-n.width/2;break;case"center":o+=e/2;break;case"far":o+=n.width/2}j?(q+=n.height/2/Math.abs(Math.sin(j)),l+=n.height/Math.abs(Math.sin(j))):(q+=n.height/2,l+=n.height),n.x+=o,n.y+=q,j?h.attr({"x":h.attr("x")+o,"y":h.attr("y")+q}):h.transform(Raphael.format("...T{0},{1}",o,q)),m.push(h),p.push(n)}),j&&(n=m.wijGetBBox(),m.length>1?(b.each(m,function(a,b){b.attr({"y":b.attr("y")-n.height/2}),p[a].y-=n.height/2}),o={"x":n.x+n.width/2,"y":n.y+n.height/2},b.each(m,function(a,c){var d=Math,e=p[a],f={"x":e.x+e.width/2,"y":e.y+e.height/2},g=d.sqrt(d.pow(f.x-o.x,2)+d.pow(f.y-o.y,2)),h=0,i=null,k=null;return c.attr({"rotation":j}),0===g?!0:(i=c.wijGetBBox(),h=Raphael.deg(d.asin(d.abs(f.y-o.y)/g)),f.y>o.y?f.x>o.x?h-=360:h=-1*(h+180):f.x>o.x?h*=-1:h=-1*(180-h),k=b.wijraphael.getPositionByAngle(o.x,o.y,g,-1*(j+h)),void c.attr({"y":c.attr("y")+k.y-i.y-i.height/2}))})):m[0].transform(Raphael.format("...R{0}",j))),m},Raphael.fn.getSVG=function(){function a(a,c){var d="<"+a+" ",e=null,f=!1;return b.each(c,function(a,b){return"text"===a||"opacity"===a||"transform"===a||"path"===a||"w"===a||"h"===a||"translation"===a?!0:void(b&&("stroke"===a&&0===b&&(b="none"),d+=a+"='"+b+"' "))}),c.opacity&&(e=c.opacity,d+="opacity='"+e+"' style='opacity:"+e+";",f=!0),c.transform&&c.transform.length>0&&(e=c.transform,f?d+="transform:"+e:(d+="style='transform:"+e,f=!0)),f&&(d+="'"),c.text?(e=c.text,d+="><tspan>"+e+"</tspan>"):d+=">",d+="</"+a+">"}var c,d,e,f,g=this,h='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+g.canvas.offsetWidth+'" height="'+g.canvas.offsetHeight+'"><desc>Created with Raphael</desc><defs></defs>',i="",j=0,k=0,l=0,m=0;
for(c=g.bottom;c;c=c.next)if(c&&c.type)switch(c.type){case"path":for(j=0,k=c.attrs.path.length;k>j;j++)for(e=c.attrs.path[j],l=0,m=e.length;m>l;l++)f=e[l],i+=1>l?f:l===m-1?f:f+",";i&&i.length>0&&(c.attrs.d=i.replace(/,/g," "));break;case"text":c.attrs["text-anchor"]||(c.attrs["text-anchor"]="middle");break;case"image":d=c.transformations,c.attrs.transform=d?d.join(" "):"";break;case"ellipse":case"rect":h+=a(c.type,c.attrs)}return h+="</svg>"},Raphael.fn.group=function(){function a(){var a,d=c.set(),e=c.raphael.vml?document.createElement("group"):document.createElementNS("http://www.w3.org/2000/svg","g");return c.canvas.appendChild(e),a={"type":"group","node":e,"paper":c,"attrs":{},"_":{},"id":Raphael.createUUID(),"push":function(a){function c(a){var b;if("set"===a.type)for(b=0;b<a.length;b++)c(a[b]);else e.appendChild(a.node),d.push(a)}return arguments.length>1?b.each(arguments,function(a,b){c(b)}):c(a),this},"getBBox":function(){return d.getBBox()}},b.each(["attr","stop","animate","wijAnimate","remove","wijRemove"],function(b,c){a[c]=function(){return Raphael.el[c]?Raphael.el[c].apply(this,arguments):void 0}}),a}var c=this;return a()},Raphael.el.wijRemove=function(){var a,c=this;c.removed||c.node.parentNode&&(a=b(c.node),c.stop().remove(),a.remove())},Raphael.el.wijGetBBox=function(){return this.getBBox()},Raphael.el.wijAnimate=function(a,c,d,e){if(a&&!b.isEmptyObject(a)){var f=this.shadow,g=0,h={"easeInCubic":">","easeOutCubic":"<","easeInOutCubic":"<>","easeInBack":"backIn","easeOutBack":"backOut","easeOutElastic":"elastic","easeOutBounce":"bounce"};h[d]&&(d=h[d]),this.animate(a,c,d,e),h=null,f&&f.offset&&(g=f.offset,a.x&&(a.x+=g),a.y&&(a.y+=g),this.shadow.animate(a,c,d,e))}},Raphael.el.wijAttr=function(a,c){if(b.isPlainObject(a)?b.each(a,function(b,c){i(b,c,a)}):"string"==typeof a&&(a=i(a,c)),this.attr(a,c),this.shadow)if("object"==typeof a){var d=b.extend(!0,{},a);d.fill&&delete d.fill,d.stroke&&delete d.stroke,d["stroke-width"]&&delete d["stroke-width"],this.shadow.attr(d,c)}else if("string"==typeof a)switch(a){case"clip-rect":case"cx":case"cy":case"fill-opacity":case"font":case"font-family":case"font-size":case"font-weight":case"height":case"opacity":case"path":case"r":case"rotation":case"rx":case"ry":case"scale":case"stroke-dasharray":case"stroke-linecap":case"stroke-linejoin":case"stroke-miterlimit":case"stroke-opacity":case"stroke-width":case"translation":case"width":this.shadow.attr(a,c);break;case"x":this.shadow.attr(a,c),this.shadow.attr("transform","...t1,0");break;case"y":this.shadow.attr(a,c),this.shadow.attr("transform","...t0,1")}},Raphael.st.wijRemove=function(){b.each(this,function(a,b){b.wijRemove&&!b.removed&&b.wijRemove()})},Raphael.st.wijAttr=function(a,c){return b.each(this.items,function(b,d){d.wijAttr(a,c)}),this},Raphael.st.wijAnimate=function(a,b,c,d){var e=0,f=0,g=null;for(e=0,f=this.items.length;f>e;e++)g=this.items[e],g.removed||g.wijAnimate(a,b,c,d);return this},Raphael.st.wijGetBBox=function(){var a,b,c=[],d=[],e=[],f=[],g=Math.max,h=Math.min,i="push",j="apply",k=null,l=0;for(l=this.items.length-1;l>=0;l--)k=this.items[l].wijGetBBox(),c[i](k.x),d[i](k.y),e[i](k.x+k.width),f[i](k.y+k.height);return a=h[j](0,c),b=h[j](0,d),{"x":a,"y":b,"x2":void 0,"y2":void 0,"width":g[j](0,e)-a,"height":g[j](0,f)-b}};var g=Raphael.el.attr,h=function(a,c){if("width"===a||"height"===a||"r"===a){if(!isNaN(c)&&0>c)return 0}else"clip-rect"===a&&b.isArray(c)&&b.each(c,function(a,b){!isNaN(b)&&0>b&&(c[a]=0)});return c},i=function(a,b,c){var d=a.toLowerCase().replace(/^(font|stroke|clip|arrow|text|fill)(\w+)$/,"$1-$2");return c&&d!==a&&(delete c[a],c[d]=b),d};Raphael.el.attr=function(a,c){return b.isPlainObject(a)?b.each(a,function(b,c){a[b]=h(b,c)}):c=h(a,c),g.apply(this,arguments)}}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){var c=jQuery,d=function(){function a(){}return a.strPolynom="polynom",a.strExponent="exponent",a.strLogarithmic="logarithmic",a.strPower="power",a.strFourier="fourier",a.strMinX="minX",a.strMinY="minY",a.strMaxX="maxX",a.strMaxY="maxY",a.strAverageX="averageX",a.strAverageY="averageY",a}();b.TrendlineFitType=d;var e=function(){function a(){}return a.strTrendline="trendLine",a}();b.ChartConsts=e;var f=function(){function a(){}return a.getDiffAttrs=function(a,b){var d={};return c.each(b,function(c,e){return"undefined"==typeof a?!0:void("undefined"==typeof a[c]?d[c]=b[c]:a[c]!==b[c]&&(d[c]=b[c]))}),d},a.paintShadow=function(a,b,d){if(!a.removed&&0!==c(a.node).parent().length){var e=a.clone(),f=b||1,g=d||"#cccccc";e.insertBefore(a),e.attr({"transform":Raphael.format("...T{0},{1}",f,f),"stroke":g,"fill":"none","stroke-width":f}),e.toBack(),e.offset=f,a.shadow=e}},a.getScaling=function(a,b,c,d){var e=b-c;return 0===e&&(e=1),a&&(e=-e),d/e},a.getTranslation=function(a,b,c,d,e){var f=0;return a?(f=b.y,f-=e*c):(f=b.x,f-=e*d),f},a.getXSortedPoints=function(a){function b(a,b){return a-b}var d=a.data.x,e=[].concat(d),f=[].concat(a.data.y),g=[],h=d;if(void 0!==d&&0!==d.length)return"number"==typeof d[0]&&(h=[].concat(d).sort(b)),c.each(h,function(a,b){c.each(e,function(c,d){return b===d?("number"!=typeof d&&(d=a),g.push({"x":d,"y":f[c]}),e.splice(c,1),f.splice(c,1),!1):void 0})}),g},a.sector=function(a,b,d,e,f){var g,h,i,j,k=c.wijraphael.getPositionByAngle(a,b,d,e),l=c.wijraphael.getPositionByAngle(a,b,d,f);return f>e?(i=f-e,j=i>180,j?(g=1,h=0):(g=+j,h=+j)):(i=e-f,j=i>180,j?(g=1,h=1):(g=+j,h=+!j)),["M",a,b,"L",k.x,k.y,"A",d,d,0,g,h,l.x,l.y,"z"]},a.donut=function(a,b,d,e,f,g){var h,i,j,k,l,m,n=c.wijraphael.getPositionByAngle(a,b,d,f),o=c.wijraphael.getPositionByAngle(a,b,d,g),p=c.wijraphael.getPositionByAngle(a,b,e,f),q=c.wijraphael.getPositionByAngle(a,b,e,g);return g>f?(l=g-f,m=l>180,m?(h=1,i=0,j=1,k=1):(h=0,i=0,j=0,k=1)):(l=f-g,m=l>180,m?(h=1,i=1,j=1,k=0):(h=0,i=1,j=0,k=0)),["M",n.x,n.y,"A",d,d,0,h,i,o.x,o.y,"L",q.x,q.y,"A",e,e,0,j,k,p.x,p.y,"L",n.x,n.y,"z"]},a.isDate=function(a){return a?"object"==typeof a&&a.constructor===Date:!1},a.getNumberValues=function(b){var d,e=[],f=a.getFirstValidListValue(b);if("number"==typeof f)return b;d=a.isDate(f);for(var g=0;g<b.length;g++)d?e.push(c.toOADate(b[g])):e.push(g);return e},a.getFirstValidListValue=function(a){var b;return c.each(a,function(a,c){return null===c?!0:"undefined"==typeof c?!0:"number"==typeof c&&isNaN(c)?!0:(b=c,!1)}),b},a.getLastValidListValue=function(b){var c=[].concat(b).reverse();return a.getFirstValidListValue(c)},a.isHolefunction=function(a,b){return null===a?!0:"undefined"==typeof a?!0:"number"==typeof a&&isNaN(a)?!0:null===b?!1:"undefined"!=typeof a&&a-b===0?!0:!1},a.toHexColor=function(a){if({"hs":1,"rg":1}.hasOwnProperty(a.toLowerCase().substring(0,2))||"#"===a.substring(0,1))return a;try{var b,c,d,e=new ActiveXObject("htmlfile");return e.write("<body>"),e.close(),b=e.body,c=b.createTextRange(),b.style.color=a,d=c.queryCommandValue("ForeColor"),d=(255&d)<<16|65280&d|(16711680&d)>>>16,d=d.toString(16),"#000000".slice(0,7-d.length)+d}catch(f){return a}},a}();b.ChartUtil=f;var g=function(){function a(){}return a.roundTime=function(a,b,d){var e,f,g,h,i=this,j=b,k=c.fromOADate(a);return j>0?(e={"year":k.getFullYear(),"month":k.getMonth(),"day":k.getDate(),"hour":k.getHours(),"minute":k.getMinutes(),"second":k.getSeconds()},j<i.tmInc.minute?(e.second=i.tround(e.second,j,d),i.getTimeAsDouble(e)):(e.second=0,j<i.tmInc.hour?(j/=i.tmInc.minute,e.minute=i.tround(e.minute,j,d),i.getTimeAsDouble(e)):(e.minute=0,j<i.tmInc.day?(j/=i.tmInc.hour,e.hour=i.tround(e.hour,j,d),i.getTimeAsDouble(e)):(e.hour=0,j<i.tmInc.month?(j/=i.tmInc.day,e.day=i.tround(e.day,j,d),i.getTimeAsDouble(e)):(e.day=1,j<i.tmInc.year?(j/=i.tmInc.month,e.month=i.tround(e.month,j,d),i.getTimeAsDouble(e)):(e.month=0,j/=i.tmInc.year,e.year=i.tround(e.year,j,d),i.getTimeAsDouble(e))))))):(f=k,g=f-j,h=parseInt((g/b).toString(),10)*b,d&&h!==g&&(h+=b),f=j+h)},a.tround=function(a,b,c){var d=parseInt((a/b*b).toString(),10);return c&&d!==a&&(d+=parseInt(b,10)),d},a.getTimeAsDouble=function(a){var b=0,d=0,e=null;return a.day<1?(d=-1-a.day,a.day=1):a.day>28&&(d=a.day-28,a.day=28),a.month<0?(b=-1-a.day,a.month=0):a.month>11&&(b=a.month-11,a.month=11),e=new Date(a.year,a.month,a.day,a.hour,a.minute,a.second),e.setDate(e.getDate()+d),e.setMonth(e.getMonth()+b),c.toOADate(e)},a.getTimeDefaultFormat=function(a,b){var c=this,d=a-b,e="d";return d>2*c.tmInc.year?e="yyyy":d>c.tmInc.year?e="MMM yy":d>3*c.tmInc.month?e="MMM":d>2*c.tmInc.week?e="MMM d":d>2*c.tmInc.day?e="ddd d":d>c.tmInc.day?e="ddd H:mm":d>c.tmInc.hour?e="H:mm":d>=1e3&&(e="H:mm:ss"),e},a.niceTimeUnit=function(a,b){var c=this,d=a;return d=c.niceTimeSpan(d,b)},a.niceTimeSpan=function(a,b){var c=this,d=c.manualTimeInc(b),e=0,f=0;if(e=Math.ceil(a),0===e)return c.timeSpanFromTmInc(d);if(f=1,d<c.tmInc.minute){if(e<c.tmInc.minute&&(f=c.getNiceInc([1,2,5,10,15,30],e,d),0!==f))return f;d=c.tmInc.minute}if(d<c.tmInc.hour){if(e<c.tmInc.hour&&(f=c.getNiceInc([1,2,5,10,15,30],e,d),0!==f))return f;d=c.tmInc.hour}if(d<c.tmInc.day){if(e<c.tmInc.day&&(f=c.getNiceInc([1,3,6,12],e,d),0!==f))return f;d=c.tmInc.day}if(d<c.tmInc.month){if(e<c.tmInc.month&&(f=c.getNiceInc([1,2,7,14],e,d),0!==f))return f;d=c.tmInc.month}if(d<c.tmInc.year){if(e<c.tmInc.year&&(f=c.getNiceInc([1,2,3,4,6],e,d),0!==f))return f;d=c.tmInc.year}return f=100*c.tmInc.year,f>e&&(f=c.getNiceInc([1,2,5,10,20,50],e,d),0===f&&(f=100*c.tmInc.year)),f},a.getNiceInc=function(a,b,c){var d=0,e=0,f=a.length;for(d=0;f>d;d++)if(e=a[d]*c,e>=b)return e;return 0},a.timeSpanFromTmInc=function(a){var b=1e3,c=a,d=1;if(a!==this.tmInc.maxtime)if(a>this.tmInc.tickf1)b=a;else{for(a+=7;c>0;)d*=10,c--;b=d}return b},a.manualTimeInc=function(a){var b=this,c=b.tmInc.second;return a&&0!==a.length?(a.indexOf("s")>=0?c=b.tmInc.second:a.indexOf("m")>=0?c=b.tmInc.minute:a.indexOf("h")>=0||a.indexOf("H")>=0?c=b.tmInc.hour:a.indexOf("d")>=0?c=b.tmInc.day:a.indexOf("M")>=0?c=b.tmInc.month:a.indexOf("y")>=0&&(c=b.tmInc.year),c):c},a.niceTickNumber=function(a){if(0===parseFloat(a))return a;0>a&&(a=-a);var b=Math.log(a)/Math.log(10),c=parseInt(this.signedFloor(b).toString(),10),d=a/Math.pow(10,c),e=10;return 1>=d?e=1:2>=d?e=2:5>=d&&(e=5),e*Math.pow(10,c)},a.niceNumber=function(a,b,c){if(0===parseFloat(a))return a;0>a&&(a=-a);var d=a/Math.pow(10,b),e=10;return c?1.5>d?e=1:3>d?e=2:7>d&&(e=5):1>=d?e=1:2>=d?e=2:5>=d&&(e=5),e*Math.pow(10,b)},a.nicePrecision=function(a){if(0>=a||"number"!=typeof a)return 0;var b=Math.log(a)/Math.log(10),c=parseInt(this.signedFloor(b).toString(),10),d=a/Math.pow(10,c);return 3>d&&(c=-c+1),c},a.precCeil=function(a,b){var c=Math.pow(10,a),d=b/c;return d=Math.ceil(d),d*c},a.precFloor=function(a,b){var c=Math.pow(10,a),d=b/c;return d=Math.floor(d),d*c},a.signedCeiling=function(a){return 0>a?Math.floor(a):Math.ceil(a)},a.signedFloor=function(a){return 0>a?Math.ceil(a):Math.floor(a)},a.powerTransform=function(a,b,c,d,e){for(var f,g=c[0]<0?-1:1,h=0;a>h;h++){if(b[h]<=0)throw"Incompatible data: x values should be positive.";if(f=g*c[h],0>=f)throw"Incompatible data: y values must all have the same sign.";d[h]=Math.log(b[h]),e[h]=Math.log(f)}return g},a.expoTransform=function(a,b,c,d,e){for(var f,g=c[0]<0?-1:1,h=0;a>h;h++)d[h]=b[h];for(var h=0;a>h;h++){if(f=g*c[h],0>=f)throw"Incompatible data: for expo fit all Y values must have the same sign";e[h]=Math.log(f)}return g},a.logTransform=function(a,b,c,d,e){for(var f,g=b[0]<0?-1:1,h=0;a>h;h++)e[h]=c[h];for(var h=0;a>h;h++){if(f=g*b[h],0>=f)throw"Incompatible data: for log fit all Y values must have the same sign";d[h]=Math.log(f)}return g},a.polyCreateBasisFunctions=function(a,b,c,d,e){for(var f=0;a>f;f++){e?(d[f][0]=c[f],b>1&&(d[f][1]=c[f]*c[f])):(d[f][0]=1,d[f][1]=c[f]);for(var g=2;b>g;g++)d[f][g]=c[f]*d[f][g-1]}},a.powerCreateBasisFunctions=function(a,b,c){for(var d=0;a>d;d++)c[d][0]=1,c[d][1]=b[d]},a.expoCreateBasisFunctions=function(a,b,c){for(var d=0;a>d;d++)c[d][0]=1,c[d][1]=b[d]},a.logCreateBasisFunctions=function(a,b,c){for(var d=0;a>d;d++)c[d][0]=b[d],c[d][1]=1},a.fourierCreateBasisFunctions=function(a,b,c,d){for(var e=0;a>e;e++){(null===d[e]||void 0===d[e])&&(d[e]=new Array),d[e][0]=1,b>1&&(d[e][1]=Math.cos(c[e])),b>2&&(d[e][2]=Math.sin(c[e]));for(var f=3;b>f;f++){var g=(f+1)/2;f%2==1?d[e][f]=Math.cos(g*c[e]):d[e][f]=Math.sin(g*c[e])}}},a.createBasis=function(b,c,e,f,g,h,i,j){if(2>b)throw"Incompatible data: Less than 2 data points.";if(1>f)throw"Incompatible data: Less than 1 coefficient in the fit";if(f>b)throw"Incompatible data: Number of data points less than number of terms";for(var k=0;f>k;k++)g[k]=0;switch(i){case d.strPolynom:a.polyCreateBasisFunctions(b,f,c,h,j);break;case d.strPower:a.powerCreateBasisFunctions(b,c,h);break;case d.strExponent:a.expoCreateBasisFunctions(b,c,h);break;case d.strLogarithmic:a.logCreateBasisFunctions(b,c,h);break;case d.strFourier:a.fourierCreateBasisFunctions(b,f,c,h)}},a.solveGauss=function(a,b,c){var d,e,f,g,h,i=a.length,j=!0;if(b.length<i||a[0].length<i+1)throw"Dimension of matrix is not correct.";for(d=0;i>d;d++){for(f=d,g=Math.abs(a[d][d]),e=d+1;i>e;e++)g<Math.abs(a[e][d])&&(g=Math.abs(a[e][d]),f=e);if(!(Math.abs(g)>c)){j=!1;break}for(e=d;i>=e;e++)h=a[d][e],a[d][e]=a[f][e],a[f][e]=h;for(f=d+1;i>f;f++)for(h=a[f][d]/a[d][d],a[f][d]=0,e=d+1;i>=e;e++)a[f][e]-=h*a[d][e]}if(j)for(d=i-1;d>=0;d--){for(b[d]=a[d][i],e=d+1;i>e;e++)b[d]-=a[d][e]*b[e];b[d]=b[d]/a[d][d]}return j},a.normalizeAndSolveGauss=function(b,c,d,e,f){for(var g=new Array(c),h=0;c>h;h++)g[h]=a.createArray(c+1,0);if(a.computeNormalEquations(b,c,d,e,g),!a.solveGauss(g,f,0))throw"Incompatible data: No solution"},a.computeNormalEquations=function(a,b,c,d,e){for(var f,g=0;b>g;g++){f=0;for(var h=0;a>h;h++)f+=d[h]*c[h][g];e[g][b]=f;for(var i=g;b>i;i++){f=0;for(var h=0;a>h;h++)f+=c[h][i]*c[h][g];e[i][g]=f,e[g][i]=f}}},a.solveLeastSquares=function(b,c,e,f,g,h,i){var j,k,l=0,m=new Array(b);if(h==d.strExponent||h==d.strLogarithmic||h==d.strPower)switch(f=2,j=a.createArray(b,0),k=a.createArray(b,0),h){case d.strPower:l=a.powerTransform(b,c,e,j,k);break;case d.strExponent:l=a.expoTransform(b,c,e,j,k);break;case d.strLogarithmic:l=a.logTransform(b,c,e,j,k)}else j=c,k=e;i&&h==d.strPolynom&&(l=g[0],f--);for(var n=0;b>n;n++)m[n]=a.createArray(f,0);switch(a.createBasis(b,j,k,f,g,m,h,i),a.normalizeAndSolveGauss(b,f,m,k,g),h){case d.strPower:g[0]=l*Math.exp(g[0]);break;case d.strExponent:g[0]=l*Math.exp(g[0]);break;case d.strLogarithmic:g[1]=l*Math.exp(g[1]/g[0]);break;case d.strPolynom:if(i){for(var n=g.length-1;n>0;n--)g[n]=g[n-1];g[0]=l}}},a.aproximate=function(a,b,c){var e=0;switch(a){case d.strPolynom:for(var f=1,g=0;g<b.length;g++)g>0&&(f*=c),e+=b[g]*f;break;case d.strPower:e=b[0]*Math.pow(c,b[1]);break;case d.strExponent:e=b[0]*Math.exp(c*b[1]);break;case d.strLogarithmic:e=b[0]*Math.log(c*b[1]);break;case d.strFourier:e=b[0];for(var g=1;g<b.length;g++){var h=(g+1)/2;e+=g%2==1?b[g]*Math.cos(h*c):b[g]*Math.sin(h*c)}}return e},a.processSimpleValues=function(a,b,c){for(var e=a.length,f=a[0],g=f,h=b[0],i=h,j=0,k=0,l=[],m=[],n=0;e>n;n++)f>a[n]&&(f=a[n]),g<a[n]&&(g=a[n]),h>b[n]&&(h=b[n]),i<b[n]&&(i=b[n]),j+=a[n],k+=b[n];switch(j=1*j/e,k=1*k/e,c){case d.strMinX:l=[].concat([f,f]),m=[].concat([h,i]);break;case d.strMaxX:l=[].concat([g,g]),m=[].concat([h,i]);break;case d.strMinY:l=[].concat([f,g]),m=[].concat([h,h]);break;case d.strMaxY:l=[].concat([f,g]),m=[].concat([i,i]);break;case d.strAverageX:l=[].concat([j,j]),m=[].concat([h,i]);break;case d.strAverageY:l=[].concat([f,g]),m=[].concat([k,k])}return{"x":l,"y":m}},a.getNumberSeriesData=function(a,b,d,e){var g=f.getNumberValues(a),h=f.getNumberValues(b),i=[],j=[];return c.each(b,function(a,b){if(a===g.length)return!1;if(f.isHolefunction(b,e)){if("excludeHole"===d)return!0;if(f.isHolefunction(e,void 0)||b!==e)return!0;if(void 0===g[a])return!1;i.push(g[a]),j.push(h[a])}else i.push(g[a]),j.push(h[a])}),{"x":i,"y":j}},a.createArray=function(a,b){for(var c=[],d=0;a>d;d++)c.push(b);return c},a.processValues=function(b,c,e,f,g,i,j,k,l,m,n){var o,p,q,r,s,t,u=[],v=[];if(null===k||void 0===k)k=2;else{if("number"!=typeof k)return;if(1>k)return}if(null===l||void 0===l)l=100;else{if("number"!=typeof l)return;if(1>l)return}if((null===e||void 0===e)&&(e=d.strPolynom),h.validateType(e)&&(t=a.getNumberSeriesData(b,c,m,n),t.x.length&&t.y.length)){if(e==d.strMinX||e==d.strMaxX||e==d.strMinY||e==d.strMaxY||e==d.strAverageX||e==d.strAverageY)return a.processSimpleValues(t.x,t.y,e);q=t.x.length;for(var w=0;q>w;w++)0==w?(o=t.x[w],p=o):(o>t.x[w]&&(o=t.x[w]),p<t.x[w]&&(p=t.x[w]));k=Math.min(k,q),s=a.createArray(k,0),a.solveLeastSquares(q,t.x,t.y,k,s,e,!1),!f&&i>o&&(o=i),!g&&p>j&&(p=j),r=(p-o)/(l-1);for(var w=0;l>w;w++){var x=o+r*w;u.push(x),v.push(a.aproximate(e,s,x))}return{"x":u,"y":v}}},a.tmInc={"tickf7":-7e3,"tickf6":-6e3,"tickf5":-5e3,"tickf4":-4e3,"tickf3":-3e3,"tickf2":-2e3,"tickf1":-1,"second":1e3,"minute":6e4,"hour":36e5,"day":864e5,"week":6048e5,"month28":24192e5,"month29":25056e5,"month30":2592e6,"month":26784e5,"year":31536e6,"maxtime":2147483647},a}();b.ChartDataUtil=g;var h=function(){function a(a,b){this.options=b,this.element=a}return a.prototype.render=function(){var b,d=this.element,e=this.options,f=e.wijCSS,g=e.bounds,h=e.widgetName,i=e.canvas,j=e.animation,k=e.seriesTransition,l=e.mouseDown,m=e.mouseUp,n=e.mouseOver,o=e.mouseOut,p=e.mouseMove,q=e.click,r=[],s=[],t=[],u=e.disabled,v=i.set(),w=e.aniPathsAttr,x=[],y=d.data("fields")||{},z=[],A=e.widget,B=e.extremeValue,C={"enable":!1,"left":-10,"top":-10,"right":10,"bottom":10};this.widget=A,this.renderTrendLineChart(e,x,w,s,t,v,r,z),!e.axis.x.autoMax&&e.axis.x.max<B.txx&&(C.enable=!0,C.right=0),!e.axis.x.autoMin&&e.axis.x.min>B.txn&&(C.enable=!0,C.left=0),!e.axis.y.autoMax&&e.axis.y.max<B.tyx&&(C.enable=!0,C.top=0),!e.axis.y.autoMin&&e.axis.y.min>B.tyn&&(C.enable=!0,C.bottom=0),j.enabled||k.enabled?a.playAnimation(j.duration,j.easing,k,v,g,s,w,C,e.axis,B):C.enable&&a.setClipRect(C,v,g),w.length=0,c.each(x,function(a,b){w.push(b)}),a.unbindLiveEvents(d,h,f),a.bindLiveEvents(d,h,l,m,n,o,p,q,u,f,!1),b={"trendLines":s,"trendLineShadows":t,"trendLineAnimationSet":v},y.chartElements||(y.chartElements={}),y.seriesEles=z,c.extend(!0,y.chartElements,b),d.data("fields",y)},a.setClipRect=function(a,b,c){var d=c.endX-c.startX-a.left+a.right,e=c.endY-c.startY-a.top+a.bottom;b.wijAttr("clip-rect",Raphael.format("{0} {1} {2} {3}",c.startX+a.left,c.startY+a.top,d,e))},a.playAnimation=function(b,c,d,e,f,g,h,i,j,k){i||(i={"enable":!1,"left":-10,"top":-10,"right":10,"bottom":10},!j.x.autoMax&&j.x.max<k.txx&&(i.enable=!0,i.right=0),!j.x.autoMin&&j.x.min>k.txn&&(i.enable=!0,i.left=0),!j.y.autoMax&&j.y.max<k.tyx&&(i.enable=!0,i.top=0),!j.y.autoMin&&j.y.min>k.tyn&&(i.enable=!0,i.bottom=0)),h&&h.length&&d.enabled&&(b=d.duration,c=d.easing),a.playHAnimation(b,c,e,f,g,i)},a.playHAnimation=function(a,b,d,e,f,g){c.each(f,function(a,b){b.tracker&&b.tracker.hide()});var h=g.enable,i=e.endX-e.startX-g.left+g.right,j=e.endY-e.startY-g.top+g.bottom;d.wijAttr("clip-rect",Raphael.format("{0} {1} 0 {2}",e.startX+g.left,e.startY+g.top,j)),d.wijAnimate({"clip-rect":Raphael.format("{0} {1} {2} {3}",e.startX+g.left,e.startY+g.top,i,j)},a,b,function(){if(this.tracker&&this.visible!==!1&&this.tracker.show(),Raphael.vml&&!h){var a=null,b=null,d=this.node;d&&d.clipRect&&(a=this.attrs,delete a["clip-rect"],d.clipRect=null,b=c(d).parent(),b.before(d),b.remove(),this.attr(a),a.src&&a.src.length&&this.attr({"src":a.src}),a.gradient&&a.gradient.length&&"none"===a.fill&&this.attr({"fill":a.gradient}))}})},a.validateType=function(a){var b=!1;return a?(c.each(d,function(c,d){return d===a?(b=!0,!1):void 0}),b):!0},a.renderSingleTrendLine=function(b,e,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x,y,z,A,B,C,D,E,F=i.x,G=!1,H=[],I=[];if(b.isValid&&b.innerData){if(z=c.extend(!0,{"display":"show","fitType":d.strPolynom,"order":2,"sampleCount":100,"visible":!0},b),A=c.extend(!0,{"stroke":"black","opacity":1,"fill":"none","stroke-linejoin":"round","stroke-linecap":"round"},e),void 0!==j){C=[].concat(z.data.x),D=[].concat(z.data.y);try{E=g.processValues(C,D,z.fitType,F.autoMin,F.autoMax,F.min,F.max,z.order,z.sampleCount,z.display,j)}catch(J){return}C=E.x,D=E.y}else C=[].concat(b.innerData.x),D=[].concat(b.innerData.y);return(k.length<=n||l.enabled&&!m.enabled)&&(G=!0),G&&D.length>0&&(x=f.getFirstValidListValue(w?C:D),y=f.getLastValidListValue(w?C:D)),c.each(D,function(b,c){H=a.renderPoint(o,I,H,G,x,y,C[b],c,i,b,w)}),a.renderPath(p,o,z,q,r,h,s,H,t,I,A,n,u,i),B=q[q.length-1],v.push({"path":B,"shadowPath":r[r.length-1],"isTrendline":!0}),B.tracker&&B.tracker.toFront(),B}},a.prototype.renderTrendLineChart=function(b,d,e,f,g,h,i,j){var k=b.wijCSS,l=b.bounds,m=b.canvas,n=b.axis,o=b.animation,p=b.hole,q=b.seriesTransition,r=b.seriesList,s=b.seriesStyles,t=b.seriesHoverStyles;c.each(r,function(b,c){a.renderSingleTrendLine(c,s[b],t[b],n,p,e,o,q,b,l,m,f,g,h,d,k,j)})},a.renderPath=function(b,d,g,h,i,j,k,l,m,n,o,p,q,r,s){var t,u,v,w,x,y,z,A=r.y.origin;z=d.endY,r&&r.y&&null!==A&&void 0!==A&&!isNaN(A)&&(z=a.calculatePoint(A,"y",r,d,s)),t=b.path(l.join(" ")),t.straight=n.join(" "),f.paintShadow(t,1,"#cccccc"),0===p&&(l.length>1?(u=l[1],v=l[l.length-2]):(u=d.startX,v=d.endX)),w=b.path(l.join(" ")),t.tracker=w,x=o["stroke-width"]?10+parseFloat(o["stroke-width"]):10,w.attr({"stroke-width":x,"stroke":"#C0C0C0","opacity":.01}),c.wijraphael.addClass(c(w.node),Raphael.format("{0} {1} {2}",q.canvasObject,q.trendlineElement,q.trendlineTracker)),c(w.node).data("owner",c(t.node)),y=c.extend(!0,{},o),y.fill&&delete y.fill,t.wijAttr(y),j.fill&&delete j.fill,m.push({"path":c.extend(!0,{},t.attr())}),h||(h=[]),h.push(t),t.shadow&&(i[p]=t.shadow),k.push(t),g.visible&&"hide"!==g.display||(t.hide(),t.tracker&&t.tracker.hide(),t.shadow&&t.shadow.hide(),t.visible=!1),g.index=p,g.type=e.strTrendline,g.path=t,g.lineStyle=o,g.lineHoverStyle=j,c.wijraphael.addClass(c(t.node),Raphael.format("{0} {1}",q.canvasObject,q.trendlineElement)),c(t.node).data("wijchartDataObj",g)},a.calculatePoint=function(a,b,c,d,e){var f,g=c[b].min,h=c[b].max;return e&&(b="x"===b?"y":"x"),"x"===b?(f=(d.endX-d.startX)/(h-g),d.startX+(a-g)*f):(f=(d.endY-d.startY)/(h-g),d.endY-(a-g)*f)},a.renderPoint=function(b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p=(l?b.endX:b.endY)-(l?b.startX:b.startY),q=l?j.y.min:j.x.min,r=l?j.x.min:j.y.min,s=l?j.y.max:j.x.max,t=l?j.x.max:j.y.max,u=p/(t-r),v=0;return v=a.calculatePoint(h,"x",j,b,l),m=a.calculatePoint(i,"y",j,b,l),l&&(n=v,v=m,m=n),e&&(o=f+(g-f)/(s-q)*((l?i:h)-q),o=(l?b.endX:b.endY)-(o-r)*u,c.push(k?"L":"M"),c.push(v),c.push(o)),d=d.concat([k?"L":"M",v,m])},a.bindLiveEvents=function(a,b,d,f,g,h,i,j,k,l,m){var n="",o={"element":a,"mousedown":function(b){if(!k){var e,f=c(b.target);f.data("owner")&&(f=f.data("owner")),e=f.data("wijchartDataObj"),d.call(a,b,e)}},"mouseup":function(b){if(!k){var d,e=c(b.target);e.data("owner")&&(e=e.data("owner")),d=e.data("wijchartDataObj"),f.call(a,b,d)}},"mouseover":function(b){if(!k){var d,f,h=c(b.target);h.data("owner")&&(h=h.data("owner")),d=h.data("wijchartDataObj"),!m&&d&&d.type===e.strTrendline&&(f=d.path,f&&!f.removed&&d.lineHoverStyle&&f.wijAttr(d.lineHoverStyle)),g.call(a,b,d)}},"mouseout":function(b){if(!k){var d,f,g=c(b.target);g.data("owner")&&(g=g.data("owner")),d=g.data("wijchartDataObj"),!m&&d&&d.type===e.strTrendline&&(f=d.path,f&&!f.removed&&d.lineStyle&&(d.lineStyle.fill&&delete d.lineStyle.fill,f.wijAttr(d.lineStyle))),h.call(a,b,d)}},"mousemove":function(b){if(!k){var d,e=c(b.target);e.data("owner")&&(e=e.data("owner")),d=e.data("wijchartDataObj"),i.call(a,b,d)}},"click":function(b){if(!k){var d,e=c(b.target);e.data("owner")&&(e=e.data("owner")),d=e.data("wijchartDataObj"),j.call(a,b,d)}}};c.support.isTouchEnabled&&c.support.isTouchEnabled()&&(n="wij"),a.on(n+"mousedown."+b,"."+l.trendlineElement,c.proxy(o.mousedown,o)).on(n+"mouseup."+b,"."+l.trendlineElement,c.proxy(o.mouseup,o)).on(n+"mouseover."+b,"."+l.trendlineElement,c.proxy(o.mouseover,o)).on(n+"mouseout."+b,"."+l.trendlineElement,c.proxy(o.mouseout,o)).on(n+"mousemove."+b,"."+l.trendlineElement,c.proxy(o.mousemove,o)).on(n+"click."+b,"."+l.trendlineElement,c.proxy(o.click,o))},a.unbindLiveEvents=function(a,b,c){a.off("."+b,"."+c.trendlineElement)},a.paintLegendIcon=function(a,b,d,e,f,g,h,i,j,k,l){var m,n;return n=g.path(Raphael.format("M{0},{1}L{2},{3}",a,b+e/2,a+d,b+e/2)),c(n.node).data("legendIndex",j).data("index",k),i.push(n),f&&(h&&h.height&&(m=h.height),n.attr(c.extend(!0,{},f,{"stroke-width":m}))),c.wijraphael.addClass(c(n.node),l),n},a.showSerieEles=function(a){a.path&&(a.path.show(),a.path.shadow&&a.path.shadow.show(),a.path.tracker&&a.path.tracker.show())},a.hideSerieEles=function(a){a.path&&(a.path.hide(),a.path.shadow&&a.path.shadow.hide(),a.path.tracker&&a.path.tracker.hide())},a.getSeriesChartType=function(a){return a?a.isTrendline?e.strTrendline:a.type:void 0},a}();b.TrendlineRender=h,Raphael.fn.closeBtn=function(a,b,c){var d=Math.cos(45*Math.PI/180)*c,e=this.set(),f=["M",a-d,b-d,"L",a+d,b+d,"M",a-d,b+d,"L",a+d,b-d],g=this.path(f.join(" ")),h=null;return g.attr({"cursor":"pointer"}),e.push(g),h=this.rect(a-c,b-c,2*c,2*c),h.attr({"fill":"white","fill-opacity":0,"cursor":"pointer","stroke":"none"}),e.push(h),e};var i=function(){function a(a,b,d){this.options={"content":"","contentStyle":{},"title":"","titleStyle":{},"style":{"fill":"white","fill-opacity":.5},"closeBehavior":"auto","mouseTrailing":!0,"triggers":"hover","animated":"fade","showAnimated":null,"hideAnimated":null,"duration":500,"showDuration":500,"hideDuration":500,"easing":null,"showEasing":null,"hideEasing":null,"showDelay":150,"hideDelay":150,"relativeTo":"mouse","compass":"east","offsetX":0,"offsetY":0,"showCallout":!0,"calloutFilled":!1,"calloutFilledStyle":{"fill":"black"},"calloutLength":12,"calloutOffset":0,"calloutAnimation":{"easing":null,"duration":500},"windowCollisionDetection":"flip","calloutSide":null,"width":null,"height":null,"beforeShowing":null},this.paper=a,this.targets=b,c.extend(this.options,d),this.init()}return a.prototype.init=function(){var a=this.options;c.browser.msie&&document.documentMode<=8&&(a.style.fill&&(this.fillColorForIE8=f.toHexColor(a.style.fill)),a.style.stroke&&(this.strokeColorForIE8=f.toHexColor(a.style.stroke))),this.calloutOffset=a.calloutOffset,this.offsetLength=0,this.gapLength=a.calloutLength/2,this.width=a.width,this.height=a.height,this.offset={"x":0,"y":0},this.toolTipShown=!1,this.targets&&this._bindLiveEvent(this.targets),this.selector&&this._bindLiveEventBySelector(this.selector),this.isContentHtml=!1,c(this.paper.canvas).wijtooltip&&(this.isContentHtml=a.isContentHtml),this._initializeHTMLToolTips()},a.prototype._initializeHTMLToolTips=function(){var a=this;if(this.isContentHtml){var b,d,e,f,g,h,i,j,k,l=this.options;this.toolTipTarget=c(this.paper.canvas),j=this._getHTMLTooltipPositionMY(l.compass),i="sticky"===l.closeBehavior?"sticky":"none",b=l.showAnimated||l.animated,d=l.showDuration||l.duration,e=l.showEasing||l.easing,f=l.hideAnimated||l.animated,g=l.hideDuration||l.duration,h=l.hideEasing||l.easing,k={"triggers":"custom","closeBehavior":i,"showCallout":l.showCallout,"position":{"my":j,"at":"center center"},"animation":null,"showDelay":l.showDelay,"hideDelay":l.hideDelay,"showAnimation":{"animated":b,"duration":d,"easing":e},"hideAnimation":{"animated":f,"duration":g,"easing":h},"shown":function(b,c){a._setHTMLToolTipMovingDuration(),a.toolTipShown=!0},"hidden":function(b,c){a._revoverHTMLToolTipShowingDuration(),a.toolTipShown=!1}},this.toolTipTarget.wijtooltip(k)}},a.prototype._setHTMLToolTipMovingDuration=function(){if(this.isContentHtml){var a,b=(this.options,this.toolTipTarget);this.toolTipShown||(a=b.wijtooltip("option","showAnimation"),a=c.extend(a,{"duration":250}),b.wijtooltip("option","showAnimation",a))}},a.prototype._revoverHTMLToolTipShowingDuration=function(){if(this.isContentHtml){var a,b=this.options,d=this.toolTipTarget;this.toolTipShown&&(a=d.wijtooltip("option","showAnimation"),a=c.extend(a,{"duration":b.showDuration||b.duration}),d.wijtooltip("option","showAnimation",a))}},a.prototype._getHTMLTooltipPositionMY=function(a){var b="center bottom";switch(a){case"north":b="center bottom";break;case"south":b="center top";break;case"east":b="left center";break;case"west":b="right center";break;case"eastnorth":b="bottom left";break;case"northeast":b="left bottom";break;case"westnorth":b="bottom right";break;case"northwest":b="right bottom";break;case"eastsouth":b="top left";break;case"southeast":b="left top";break;case"westsouth":b="top right";break;case"southwest":b="right top"}return b},a.prototype._getShowPoint=function(a,b){var c=a.getBBox(),d={"x":0,"y":0};switch(b.toLowerCase()){case"east":d.x=c.x+c.width,d.y=c.y+c.height/2;break;case"eastnorth":d.x=c.x+c.width,d.y=c.y;break;case"eastsouth":d.x=c.x+c.width,d.y=c.y+c.height;break;case"west":d.x=c.x,d.y=c.y+c.height/2;break;case"westnorth":d.x=c.x,d.y=c.y;break;case"westsouth":d.x=c.x,d.y=c.y+c.height;break;case"north":d.x=c.x+c.width/2,d.y=c.y;break;case"northeast":d.x=c.x+c.width,d.y=c.y;break;case"northwest":d.x=c.x,d.y=c.y;break;case"south":d.x=c.x+c.width/2,d.y=c.y+c.height;break;case"southeast":d.x=c.x+c.width,d.y=c.y+c.height;break;case"southwest":d.x=c.x,d.y=c.y+c.height}return d},a.prototype._clearIntentTimer=function(a){a&&(window.clearTimeout(a),a=null)},a.prototype._removeSVGTooltip=function(b){var c,d,e,f=this,g=this,h=this.elements,i=g.options;h&&((i.hideAnimated||i.animated)&&(c=i.hideAnimated,c||(c=i.animated),c&&a.animations[c]&&(e={"animated":c,"duration":i.hideDuration||i.duration,"easing":i.hideEasing||i.easing,"context":h,"show":!1},a.animations[c](e))),d=i.hideDuration||i.duration,b&&(d=b),window.setTimeout(function(){var a,b;if(f.content&&(f.content.wijRemove(),f.content=null),f.title&&(f.title.wijRemove(),f.title=null),f.container&&(f.container.wijRemove(),f.container=null),f.closeBtn){for(a=0,b=f.closeBtn.length;b>a;a++)f.closeBtn[a].unclick();f.closeBtn.wijRemove(),f.closeBtn=null}f.callout&&(f.callout.wijRemove(),f.callout=null),g.lastPoint=null,h=null},d))},a.prototype._removeHTMLTooltip=function(){var a=this.options;"sticky"!==a.closeBehavior&&this.toolTipTarget.wijtooltip("hide")},a.prototype._removeTooltip=function(a){this.isContentHtml?this._removeHTMLTooltip():this._removeSVGTooltip(a)},a.prototype._clearTimers=function(){this.intentShowTimer&&this._clearIntentTimer(this.intentShowTimer),this.intentHideTimer&&this._clearIntentTimer(this.intentHideTimer)},a.prototype._hide=function(a){var b=this;b._clearTimers(),b.options.hideDelay?b.intentHideTimer=window.setTimeout(function(){b._removeTooltip()},b.options.hideDelay):b._removeTooltip()},a.prototype._convertCompassToPosition=function(a){var b="",c={"x":0,"y":0};switch(a.toLowerCase()){case"east":b="right-middle",c.x=2,c.y=0;break;case"eastnorth":b="right-top",c.x=2,c.y=-2;break;case"eastsouth":b="right-bottom",c.x=2,c.y=2;break;case"west":b="left-middle",c.x=-2,c.y=0;break;case"westnorth":b="left-top",c.x=-2,c.y=-2;break;case"westsouth":b="left-bottom",c.x=-2,c.y=2;break;case"north":b="top-middle",c.x=0,c.y=-2;break;case"northeast":b="top-right",c.x=2,c.y=-2;break;case"northwest":b="top-left",c.x=-2,c.y=-2;break;case"south":b="bottom-middle",c.x=0,c.y=2;break;case"southeast":b="bottom-right",c.x=2,c.y=2;break;case"southwest":b="bottom-left",c.x=-2,c.y=2}return this.offset=c,b},a.prototype._getCalloutArr=function(a,b){var c=[],d=this.options,e=d.compass;switch(d.calloutSide&&(e=d.calloutSide),e.toLowerCase()){case"east":case"eastsouth":case"eastnorth":c=["M",a.x+b,a.y+b,"l",-b,-b,"l",b,-b,"Z"];break;case"west":case"westsouth":case"westnorth":c=["M",a.x-b,a.y-b,"l",b,b,"l",-b,b,"Z"];break;case"north":case"northeast":case"northwest":c=["M",a.x-b,a.y-b,"l",b,b,"l",b,-b,"Z"];break;case"south":case"southeast":case"southwest":c=["M",a.x-b,a.y+b,"l",b,-b,"l",b,b,"Z"]}return c},a.prototype._getFuncText=function(a,b){
if(c.isFunction(a)){var d,e,f=null,g={"target":null,"fmt":a};return b&&b.target&&(e=b.target,e.raphael&&e.raphaelid||(e=e.parentNode),e.raphael&&e.raphaelid?(d=this.paper.getById(e.raphaelid),g.target=d):g.target=b.target),f=c.proxy(g.fmt,g),f().toString()}return a},a.prototype._translateCallout=function(a){var b=this.options,c=this.width,d=this.height,e=this.gapLength,f=this.offsetLength,g=this.calloutOffset,h=this.tooltipElements.callout;if(b.calloutSide){var i=e||f;switch(b.calloutSide){case"south":case"north":a?h.animate({"translation":-c/2+i+g+",0"},a):h.translate(-c/2+i+g,0);break;case"east":case"west":a?h.animate({"translation":"0,"+(-d/2+i+g)},a):h.translate(0,-d/2+i+g)}}},a.replacer=function(a,b,c){var d=c,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;return b.replace(e,function(a,b,c,e,f){b=b||e,d&&("string"!==d[b]&&(d=d[b]),"function"==typeof d&&f&&(d=d()))}),d=(null===d||d===c?a:d).toString()},a.fill=function(b,c){var d=/\{([^\}]+)\}/g;return String(b).replace(d,function(b,d){return a.replacer(b,d,c)})},a.prototype._createPath=function(b,c,d){var e=c.split("-"),f=5,g=d.getBBox(),h=this.options,i=h.padding,j=this.gapLength,k=this.offsetLength,l=i&&!isNaN(i)?parseInt(i):0,m=Math.round(g.width+2*l),n=Math.round(g.height+2*l),o=Math.round(g.x-l)-f,p=Math.round(g.y-l)-f,q=0,r=0,s=0,t=0,u=null,v=null,w=null;switch(h.width&&(m=m>h.width?m:h.width),h.height&&(n=n>h.height?n:h.height),this.width=m,this.height=n,q=Math.min(n/4,m/4,j),k&&(k=Math.min(n/4,m/4,k)),k?(r=k,u={"top":"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{offset},0,-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z","bottom":"M{x},{y}l{left},0,{offset},0,{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z","right":"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom},0-{offset},0-{top}a{r},{r},0,0,1,{r}-{r}z","left":"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},0,{offset},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"}):u={"top":"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{gap},{gap}-{gap}-{gap}-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z","bottom":"M{x},{y}l{left},0,{gap}-{gap},{gap},{gap},{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z","right":"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom}-{gap}-{gap},{gap}-{gap},0-{top}a{r},{r},0,0,1,{r}-{r}z","left":"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},{gap},{gap}-{gap},{gap},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"},v=[{"x":o+f,"y":p,"w":m,"w4":m/4,"h4":n/4,"left":0,"right":m-2*q-2*r,"top":0,"bottom":n-2*q-2*r,"r":f,"h":n,"gap":q,"offset":2*r},{"x":o+f,"y":p,"w":m,"w4":m/4,"h4":n/4,"left":m/2-q-r,"right":m/2-q-r,"top":n/2-q-r,"bottom":n/2-q-r,"r":f,"h":n,"gap":q,"offset":2*r},{"x":o+f,"y":p,"w":m,"w4":m/4,"h4":n/4,"right":0,"left":m-2*q-2*r,"bottom":0,"top":n-2*q-2*r,"r":f,"h":n,"gap":q,"offset":2*r}]["middle"===e[1]?1:2*("left"===e[1]||"top"===e[1]?1:0)],w=this.paper.path(a.fill(u[e[0]],v)),e[0]){case"top":s=b.x-(o+f+v.left+q+k),t=b.y-(p+f+n+f+q+k);break;case"bottom":s=b.x-(o+f+v.left+q+k),t=b.y-(p-q-k);break;case"left":s=b.x-(o+f+m+f+q+k),t=b.y-(p+f+v.top+q+k);break;case"right":s=b.x-(o-q-r),t=b.y-(p+f+v.top+q+r)}return w.translate(s,t),d.transform(Raphael.format("...t{0},{1}",s,t)),w},a.prototype._isWindowCollision=function(a,b,d,e,f,g,h){var i=a.getBBox(),j=0,k=b.toLowerCase(),l=i.x+f,m=i.y+g,n=this.paper.width,o=this.paper.height,p=d,q=e,r=a.attr("stroke-width"),s=h===!0||"flip"===h;return Raphael.vml&&(n=c(this.paper.canvas).width(),o=c(this.paper.canvas).height()),0>l-r&&(s?-1===k.toLowerCase().indexOf("west")?l+i.width/2+i.width-d<=n&&(j++,k=k.toLowerCase()+"east",p=0-d):l+i.width+i.width-d<=n&&(j++,k=k.toLowerCase().replace("west","east"),p=0-d):(j++,p=0-l+r+d)),0>m-r&&(s?-1===k.toLowerCase().indexOf("north")?m+i.height/2+i.height-e<=o&&(j++,k=k.toLowerCase()+"south",q=0-e):m+i.height+i.height-e<=o&&(j++,k=k.toLowerCase().replace("north","south"),q=0-e):(j++,q=0-m+r+e)),l+i.width+r>n&&(s?-1===k.toLowerCase().indexOf("east")?l-i.width/2-d>=0&&(j++,k=k.toLowerCase()+"west",p=0-d):l-i.width-d>=0&&(j++,k=k.toLowerCase().replace("east","west"),p=0-d):(j++,p=n-(l+i.width+r)+d)),m+i.height+r>o&&(s?-1===k.toLowerCase().indexOf("south")?m-i.height/2-e>=0&&(j++,k=k.toLowerCase()+"north",q=0-e):m-i.height-e>=0&&(j++,k=k.toLowerCase().replace("south","north"),q=0-e):(j++,q=o-(m+i.height+r)+e)),j?{"compass":k,"offsetX":p,"offsetY":q}:!1},a.prototype._createHTMLTooltipEles=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n=this.options,o=this.toolTipTarget,p="",q="";i=this._getPointOffset(e),j={"x":0,"y":0},j.x=o.parent().offset().left,j.y=o.parent().offset().top,h={},h.x=a.x+j.x+i.x+f,h.y=a.y+j.y+i.y+g,k="",b&&b.length>0&&(l=b.replace(/(?:\r\n|\n|\r)/g,"<br>"),n.titleStyle&&(p="color:"+n.titleStyle.fill+";font-size:"+n.titleStyle["font-size"]),k+="<div style='"+p+"'>"+l+"</div>"),c&&c.length>0&&(m=c.replace(/(?:\r\n|\n|\r)/g,"<br>"),n.contentStyle&&(q="color:"+n.contentStyle.fill+";font-size:"+n.contentStyle["font-size"]+";font-family:"+n.contentStyle["font-family"]),k+="<div style='"+q+"'>"+m+"</div>"),o.wijtooltip("option","content",k),o.wijtooltip("showAt",h)},a.prototype._getPointOffset=function(a){var b=2,c={"x":0,"y":0};switch(a){case"north":c.x=0,c.y=-b;break;case"south":c.x=0,c.y=b;break;case"east":c.x=b,c.y=0;break;case"west":c.x=-b,c.y=0;case"northeast":case"eastnorth":c.x=b,c.y=-b;break;case"northwest":case"westnorth":c.x=-b,c.y=-b;break;case"southeast":case"eastsouth":c.x=b,c.y=b;break;case"southwest":case"westsouth":c.x=-b,c.y=b}return c},a.prototype._createSVGTooltipEles=function(b,d,e,f,g,h,i){var j,k,l,m,n=this,o=this.paper.set(),p=null,q=null,r=this.options,s=this.closeBtnLength,t=(this.calloutOffset,null),u=0,v=0,w=250,x=0,y=0,z={"x":b.x,"y":b.y},A=this.offset,B=null,C=null;if(c.wijraphael.clearRaphaelCache(),l=this._convertCompassToPosition(g),z.x+=h+A.x,z.y+=i+A.y,this.elements=this.paper.set(),this.title&&(c.each(this.title,function(a,b){c(b.node).unbind(".Rtooltip")}),this.title.wijRemove()),d&&d.length>0?(this.title=this.paper.htmlText(-1e3,-1e3,d,r.titleStyle),this.elements.push(this.title),j=this.title.getBBox()):j={"left":-1e3,"top":-1e3,"width":0,"height":0},this.content&&(c.each(this.content,function(a,b){c(b.node).unbind(".Rtooltip")}),this.content.wijRemove()),e&&e.length>0?(this.content=this.paper.htmlText(-1e3,-1e3,e,r.contentStyle),this.elements.push(this.content),k=this.content.getBBox()):k={"left":-1e3,"top":-1e3,"width":0,"height":0},this.closeBtn){for(x=0,y=this.closeBtn.length;y>x;x++)this.closeBtn[x].unclick();this.closeBtn.wijRemove()}if(this.content&&this.content.transform(Raphael.format("T0,{0}",j.height/2+k.height/2)),this.title&&this.title.transform(Raphael.format("T0,{0}",0)),"sticky"===r.closeBehavior&&(this.closeBtn=this.paper.closeBtn(-1e3,-1e3,s),this.elements.push(this.closeBtn),r.width&&r.width>j.width+2*s&&r.width>k.width+2*s?this.closeBtn.transform(Raphael.format("T{0},{1}",r.width-s,s)):j.width>=k.width-2*s?this.closeBtn.transform(Raphael.format("T{0},{1}",j.width+s,s)):this.closeBtn.transform(Raphael.format("T{0},{1}",k.width-s,s)),c.each(this.closeBtn,function(a,b){var c=n;b.click(function(a){c._hide(a)})})),this.title&&(o.push(this.title),r.relatedElement&&this.title.insertBefore(r.relatedElement)),this.content&&(o.push(this.content),r.relatedElement&&this.content.insertBefore(r.relatedElement)),this.closeBtn&&(o.push(this.closeBtn),r.relatedElement&&this.closeBtn.insertBefore(r.relatedElement)),r.showCallout||(this.gapLength=0),(r.calloutSide||r.calloutFilled)&&(this.gapLength=0,this.offsetLength=r.calloutLength/2,r.calloutSide&&(l=this._convertCompassToPosition(r.calloutSide))),r.calloutSide&&0===o.length&&(this.content=this.paper.htmlText(-1e3,-1e3," "),o.push(this.content),r.relatedElement&&this.content.insertBefore(r.relatedElement)),this.callout&&(c(this.callout.node).unbind(".Rtooltip"),this.callout.wijRemove()),this.container&&(c(this.container.node).unbind(".Rtooltip"),this.container.wijRemove()),this.lastPoint){if(r.showCallout&&(r.calloutSide||r.calloutFilled)&&(p=this._getCalloutArr(this.lastPoint,this.offsetLength),this.callout=this.paper.path(p.concat(" ")),r.relatedElement&&this.callout.insertBefore(r.relatedElement),r.calloutFilled&&this.callout.attr(r.calloutFilledStyle),r.calloutSide&&this._translateCallout(0)),this.container=this._createPath(this.lastPoint,l,o),r.relatedElement&&this.container.insertBefore(r.relatedElement),f&&(m=this._isWindowCollision(this.container,g,h,i,z.x-this.lastPoint.x,z.y-this.lastPoint.y,f)))return void this._createTooltipEles(b,d,e,!1,m.compass,m.offsetX,m.offsetY);this.elements.push(this.callout),this.elements.push(this.container),u=z.x-this.lastPoint.x,v=z.y-this.lastPoint.y,C=Raphael.format("...T{0},{1}",u,v),B=Raphael.animation({"transform":C},w),this.container&&(r.showAnimated||r.animated?this.container.animate(B):this.container.attr("transform",C)),this.title&&(r.showAnimated||r.animated?this.title.animate(B):this.title.attr("transform",C)),this.content&&(r.showAnimated||r.animated?this.content.animate(B):this.content.attr("transform",C)),this.closeBtn&&(r.showAnimated||r.animated?this.closeBtn.animate(B):this.closeBtn.attr("transform",C)),this.callout&&(r.showAnimated||r.animated?this.callout.animate(B):this.callout.attr("transform",C))}else{if(r.showCallout&&(r.calloutSide||r.calloutFilled)&&(p=this._getCalloutArr(z,this.offsetLength),this.callout=this.paper.path(p.concat(" ")),r.relatedElement&&this.callout.insertBefore(r.relatedElement),r.calloutFilled&&this.callout.attr(r.calloutFilledStyle),r.calloutSide&&this._translateCallout(0)),this.container=this._createPath(z,l,o),r.relatedElement&&this.container.insertBefore(r.relatedElement),f&&(m=this._isWindowCollision(this.container,g,h,i,0,0,f)))return void this._createTooltipEles(b,d,e,!1,m.compass,m.offsetX,m.offsetY);this.elements.push(this.callout),this.elements.push(this.container),(r.showAnimated||r.animated)&&(q=r.showAnimated,q||(q=r.animated),q&&a.animations[q]&&(t={"animated":q,"duration":r.showDuration||r.duration,"easing":r.showEasing||r.easing,"context":this.elements,"show":!0},a.animations[q](t)))}this.lastPoint=z,c.browser.msie&&document.documentMode<=8?this.container.attr(c.extend({},r.style,{"fill":this.fillColorForIE8,"stroke":this.strokeColorForIE8})):this.container.attr(r.style),r.relatedElement?(this.title&&this.title.insertBefore(r.relatedElement),this.content&&this.content.insertBefore(r.relatedElement),this.closeBtn&&this.closeBtn.insertBefore(r.relatedElement)):o.toFront()},a.prototype._createTooltipEles=function(a,b,c,d,e,f,g){this.isContentHtml?this._createHTMLTooltipEles(a,b,c,d,e,f,g):this._createSVGTooltipEles(a,b,c,d,e,f,g)},a.prototype._createTooltip=function(a,b){var d,e,f=null,g=null,h=null,i=null,j=this.options;c.isFunction(j.beforeShowing)&&(h=null,i={"target":null,"options":j,"fmt":j.beforeShowing},b&&b.target&&(e=b.target,e.raphael&&e.raphaelid||(e=e.parentNode),e.raphael&&e.raphaelid?(d=this.paper.getById(e.raphaelid),i.target=d):(d=b.target,i.target=d)),h=c.proxy(i.fmt,i),h()===!1)||(f=j.title,g=j.content,f=this._getFuncText(f,b),g=this._getFuncText(g,b),(f||g)&&this._createTooltipEles(a,f,g,j.windowCollisionDetection,j.compass,j.offsetX,j.offsetY))},a.prototype._showAt=function(a,b){var c=this.options,d=this;this._clearTimers(),c.showDelay?this.intentShowTimer=window.setTimeout(function(){d._createTooltip(a,b)},c.showDelay):this._createTooltip(a,b)},a.prototype._show=function(a){var b=c(this.paper.canvas.parentNode).offset(),d=b.left,e=b.top,f=this.options,g=f.relativeTo,h={"x":0,"y":0},i=null,j=a.target;switch(g){case"mouse":h.x=a.pageX-d,h.y=a.pageY-e;break;case"element":j.raphael&&j.raphaelid||(j=j.parentNode),j.raphael&&j.raphaelid&&(i=this.paper.getById(j.raphaelid),h=this._getShowPoint(i,f.compass))}this._showAt(h,a)},a.prototype._bindEvent=function(a){var b=this.options,d=this;switch(b.triggers){case"hover":c(a.node).bind("mouseover.Rtooltip",function(a){d._show(a)}).bind("mouseout.Rtooltip",function(a){"auto"===b.closeBehavior&&d._hide(a)}),b.mouseTrailing&&"mouse"===b.relativeTo&&c(a.node).bind("mousemove.Rtooltip",function(a){d._show(a)});break;case"click":c(a.node).bind("click.Rtooltip",function(a){d._show(a)});break;case"custom":}},a.prototype._bindLiveEvent=function(a){var b,c;if(a)if(a.length)for(b=0,c=a.length;c>b;b++)this._bindEvent(a[b]);else this._bindEvent(a)},a.prototype._bindLiveEventBySelector=function(a){var b=this.options,c=this;if(a)switch(b.triggers){case"hover":a.on("mouseover.Rtooltip",function(a){c._show(a)}).on("mouseout.Rtooltip",function(a){"auto"===b.closeBehavior&&c._hide(a)}),b.mouseTrailing&&"mouse"===b.relativeTo&&a.on("mousemove.Rtooltip",function(a){c._show(a)});break;case"click":a.on("click.Rtooltip",function(a){c._show(a)});break;case"custom":}},a.prototype._unbindLiveEvent=function(a,b){var d,e;if(a)if(a.length)for(d=0,e=a.length;e>d;d++)c(a[d].node).unbind(".Rtooltip");else c(a.node).unbind(".Rtooltip");b&&b.off("Rtooltip").off(".Rtooltip")},a.prototype._destroy=function(){this._unbindLiveEvent(this.targets,this.selector),this._removeTooltip(0),this.isContentHtml&&c(this.paper.canvas).wijtooltip("destroy")},a.prototype.hide=function(){this._hide()},a.prototype.showAt=function(a,b){this._showAt(a,b)},a.prototype.resetCalloutOffset=function(a){var b=this.options,c=b.calloutOffset,d=b.calloutSide,e=b.calloutAnimation,f=this.tooltipElements;f.callout&&("south"===d||"north"===d?f.callout.animate({"translation":a-c+",0"},e.duration,e.easing):("east"===d||"west"===d)&&f.callout.animate({"translation":"0,"+(a-c)},e.duration,e.easing)),b.calloutOffset=a},a.prototype.destroy=function(){this._destroy()},a.prototype.getOptions=function(){return this.options},a.prototype.setTargets=function(a){this.targets=a,this._bindLiveEvent(a)},a.prototype.setSelector=function(a){this.selector=a,this._bindLiveEventBySelector(a)},a.prototype.setOptions=function(a){c.extend(!0,this.options,a)},a.animations={"fade":function(a){var b=a.context;a.show?(b.attr({"opacity":0}),b.wijAnimate({"opacity":1},a.duration,a.easing)):b.wijAnimate({"opacity":0},a.duration,a.easing)}},a}();b.ChartTooltip=i,Raphael.fn.tooltip={"animations":i.animations};var j=function(){function a(a){this.labels=[],this.crossLabels={},this.bBox=a}return a.prototype.push=function(a){var b=a.wijGetBBox();this.labels.push({"ele":a,"x":b.x,"y":b.y,"width":b.width,"height":b.height,"overlaps":[],"bakBBox":b})},a.prototype.pushCross=function(a,b){var c,d;this.crossLabels[Raphael.format("{0}-{1}",a,b)]||this.crossLabels[Raphael.format("{0}-{1}",b,a)]||(c=this.labels[a],d=this.labels[b],this.crossLabels[Raphael.format("{0}-{1}",a,b)]={"label1":c,"label2":d,"dx":this._getAdjust(c,d,"h"),"dy":this._getAdjust(c,d,"v")})},a.prototype._detect=function(a,b){return(a.x+a.width>b.x&&a.x<b.x||b.x+b.width>a.x&&b.x<a.x)&&(a.y+a.height>b.y&&a.y<b.y||b.y+b.height>a.y&&b.y<a.y)},a.prototype._resetOverlaps=function(){this.crossLabels={}},a.prototype._detects=function(){for(var a,b,c=this.labels.length,d=0;c>d;d++)for(var e=d+1;c>e;e++)a=this.labels[d],b=this.labels[e],this._detect(a,b)&&this.pushCross(d,e)},a.prototype._getAdjust=function(a,b,c){var d={"dx":0,"needRevert":!1};return"h"===c?a.x<b.x?d.dx=a.x+a.width-b.x:(d.dx=b.x+b.width-a.x,d.needRevert=!0):a.y<b.y?d.dx=a.y+a.height-b.y:(d.dx=b.y+b.height-a.y,d.needRevert=!0),d},a.prototype._adjustlabel=function(a,b,c,d){"h"===d?(a.x-=c/2,b.x+=c/2,this.bBox&&(a.x<this.bBox.x?(a.x=this.bBox.x,b.x=b.x+(this.bBox.x-a.x)):b.x>this.bBox.x+this.bBox.width&&(b.x=this.bBox.x+this.bBox.width,a.x-=b.x-this.bBox.x+this.bBox.width))):(a.y-=c/2,b.y+=c/2,this.bBox&&(a.y<this.bBox.y?(a.y=this.bBox.y,b.y=b.y+(this.bBox.y-a.y)):b.y>this.bBox.y+this.bBox.height&&(b.y=this.bBox.y+this.bBox.height,a.y-=b.y-this.bBox.y+this.bBox.height)))},a.prototype._adjustInternal=function(){var a=this;c.each(this.crossLabels,function(b,c){var d=c.label1,e=c.label2,f=c.dx,g=c.dy;f.dx<g.dx?g.needRevert?a._adjustlabel(e,d,g.dx,"v"):a._adjustlabel(d,e,g.dx,"v"):f.needRevert?a._adjustlabel(e,d,f.dx,"h"):a._adjustlabel(d,e,f.dx,"h")})},a.prototype._adjustTheEdge=function(){var a=this;this.bBox&&c.each(this.labels,function(b,c){c.x<a.bBox.x?c.x=a.bBox.x:c.x+c.width>a.bBox.x+a.bBox.width&&(c.x=a.bBox.x+a.bBox.width-c.width),c.y<a.bBox.y?c.y=a.bBox.y:c.y+c.height>a.bBox.y+a.bBox.height&&(c.y=a.bBox.y+a.bBox.height-c.height)})},a.prototype._translateLabels=function(){c.each(this.labels,function(a,b){b.x!==b.bakBBox.x&&(b.ele.attr("x",b.x+b.width/2),b.bakBBox.x=b.x),b.y!==b.bakBBox.y&&(b.ele.attr("y",b.y+b.height/2),b.bakBBox.y=b.y)})},a.prototype.adjust=function(){for(var a=1e3;a>0&&(this._resetOverlaps(),this._adjustTheEdge(),this._detects(),!c.isEmptyObject(this.crossLabels));)a--,this._adjustInternal();this._translateLabels()},a}();b.AdjustLabel=j;var k=function(a){function b(){a.apply(this,arguments),this.innerState={}}return __extends(b,a),b.prototype._setOption=function(d,e){var f,g,h,i,j,k,l,m=this,n=m.options,o=null,p=0,q=0,r=n.axis.x.tickMajor.factor,s=n.axis.x.tickMinor.factor,t=b.prototype.options.axis;if("dataSource"===d)m.seriesTransition=!0,n.dataSource=e,m.seriesList&&(n.seriesList=c.arrayClone(m.seriesList)),m._init();else if("data"===d)m.seriesTransition=!0,n.data=e,m.seriesList&&(n.seriesList=c.arrayClone(m.seriesList)),m._init();else if("seriesList"===d){if(e||(e=[]),o=c.Event("beforeserieschange"),m._trigger("beforeSeriesChange",o,{"oldSeriesList":n.seriesList,"newSeriesList":e})===!1)return!1;n.seriesList=e,m.seriesList=c.arrayClone(e),m._trigger("seriesChanged",null,e),m.seriesTransition=!0,m._seriesListSeted(),m._init()}else c.isPlainObject(n[d])?("axis"===d&&(h=c.isArray(n.axis.y)?c.arrayClone([].concat(n.axis.y)):c.extend(!0,{},n.axis.y)),"axis"===d?(l=c.extend(!0,{},e),m._verifyAxisAutoMinMax(l),c.extend(!0,n.axis.x,l.x||{}),k=c.isArray(n.axis.y)||c.isArray(l.y)?{}:n.axis.y,c.isArray(l.y)?(c.each(l.y,function(a,b){l.y[a]=c.extend(!0,{},t.y,k,b)}),n.axis.y=l.y):n.axis.y=c.extend(!0,{},t.y,k,l.y)):c.extend(!0,n[d],e),"indicator"===d&&(this._unbindCanvasEvents(),this._bindCanvasEvents()),"axis"===d&&(i=n.axis.y,n.axis.x.tickMajor.factor<0&&(n.axis.x.tickMajor.factor=r),n.axis.x.tickMinor.factor<0&&(n.axis.x.tickMinor.factor=s),c.isArray(i)?(c.isArray(h)||(h=[h]),c.each(i,function(a,b){var c=h[a]||{};c.tickMajor&&c.tickMajor.factor&&b.tickMajor&&b.tickMajor.factor&&b.tickMajor.factor<0&&(b.tickMajor.factor=c.tickMajor.factor),c.tickMinor&&c.tickMinor.factor&&b.tickMinor&&b.tickMinor.factor&&b.tickMinor.factor<0&&(b.tickMinor.factor=c.tickMinor.factor)})):(c.isArray(h)?(f=h[0].tickMajor.factor,g=h[0].tickMinor.factor):(r=h.tickMajor.factor,s=h.tickMinor.factor),n.axis.y.tickMajor&&void 0!==n.axis.y.tickMajor.factor&&n.axis.y.tickMajor.factor<0&&(n.axis.y.tickMajor.factor=f),n.axis.y.tickMinor&&void 0!==n.axis.y.tickMinor.factor&&n.axis.y.tickMinor.factor<0&&(n.axis.y.tickMinor.factor=g)))):a.prototype._setOption.call(this,d,e);if("disabled"===d&&m._handleDisabledOption(e,m.chartElement),"autoResize"===d&&(m._unbindResizeEvent(),m._bindResizeEvent()),"seriesTransition"!==d&&"animation"!==d){if("hint"===d)return void m._resetTooltip();if(p=n.seriesList.length,("seriesList"===d||"seriesStyles"===d||"seriesHoverStyles"===d)&&("seriesList"!==d&&m._handleChartStyles(),m.styles={"style":[].concat(n.seriesStyles.slice(0,n.seriesStyles.length)),"hoverStyles":[].concat(n.seriesHoverStyles.slice(0,n.seriesHoverStyles.length))},m._initStyles()),"seriesList"===d||"seriesHoverStyles"===d)for(j=n.seriesHoverStyles.length,q=j;p>q;q++)n.seriesHoverStyles[q]=n.seriesHoverStyles[q%j];("height"===d||"width"===d)&&m.chartElement[d](e),("culture"===d||"cultureCalendar"===d)&&(m._innerCulture=null,m._resetCulture()),m.redraw()}},b.prototype._isTrendline=function(a){return a.isTrendline||a.type===e.strTrendline?!0:!1},b.prototype._preHandleSeriesData=function(){var a=this,b=a.options,d=b.seriesList,e=b.axis;c.each(d,function(b,d){var f,h,i,j=d.data,k=[],l=[];if(!a._isTrendline(d))return!0;if(j.xy&&c.isArray(j.xy)&&j.xy.length){for(f=j.xy.length;f>h;)k.push(j.xy[h++]),l.push(j.xy[h++]);j.x=k,j.y=l}else j.x||(k=[],c.each(l,function(a){k.push(a)}),j.x=k);try{i=g.processValues(j.x,j.y,d.fitType,e.x.autoMin,e.x.autoMax,e.x.min,e.x.max,d.order,d.sampleCount,d.display,void 0)}catch(m){i=void 0}void 0===i?d.isValid=!1:(d.isValid=!0,d.innerData=i)})},b.prototype._seriesListSeted=function(){},b.prototype._initStyles=function(){var a,b,c,d,e=this.options,f=e.seriesStyles,g=e.seriesHoverStyles;if(e.seriesList&&(b=e.seriesList.length||0),e.seriesStyles&&(a=e.seriesStyles.length||0),e.seriesHoverStyles&&(c=e.seriesHoverStyles.length||0),b>a&&a)for(d=a;b>d;d++)f[d]=f[d%a];if(b>c&&c)for(d=c;b>d;d++)g[d]=g[d%c]},b.prototype._verifyAxisAutoMinMax=function(a){var b=function(a){return null===a||"undefined"==typeof a};if(a.x&&(b(a.x.min)?a.x.autoMin=!0:a.x.autoMin=!1,b(a.x.max)?a.x.autoMax=!0:a.x.autoMax=!1),a.y)if(c.isArray(a.y))c.each(a.y,function(a,c){b(c.min)?c.autoMin=!0:c.autoMin=!1,b(c.max)?c.autoMax=!0:c.autoMax=!1});else{var d=a.y;b(d.min)?d.autoMin=!0:d.autoMin=!1,b(d.max)?d.autoMax=!0:d.autoMax=!1}},b.prototype._create=function(){var a,b=this,d=b.options,e=d.width||b.element.width(),f=d.height||b.element.height(),g=null;if(window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c)),b._verifyAxisAutoMinMax(d.axis),b.updating=0,b.innerState={},b.axisCompass={},b.element.is(":hidden")&&b.element.wijAddVisibilityObserver&&b.element.wijAddVisibilityObserver(function(){b.redraw(),b.element.wijRemoveVisibilityObserver&&b.element.wijRemoveVisibilityObserver()},"wijchart"),c.isFunction(window.wijmoASPNetParseOptions)&&window.wijmoASPNetParseOptions(d),b.styles={"style":[].concat(d.seriesStyles.slice(0,d.seriesStyles.length)),"hoverStyles":[].concat(d.seriesHoverStyles.slice(0,d.seriesHoverStyles.length))},d.hint&&"string"==typeof d.hint.content&&window[d.hint.content]&&(d.hint.content=window[d.hint.content]),d.hint&&"string"==typeof d.hint.title&&window[d.hint.title]&&(d.hint.title=window[d.hint.title]),b.headerEles=[],b.footerEles=[],b.legendEles=[],b.axisEles=[],b.legends=[],b.legendIcons=[],b.legendDots=[],b.chartLabelEles=[],b.seriesEles=[],b.element.length>0){b.element.is("table")?(b._parseTable(),g=c("<div></div>"),e&&g.css("width",e),f&&g.css("height",f),b.element.after(g),b.chartElement=g):b.chartElement=b.element,b.chartElement.addClass("ui-widget");try{a=Raphael(b.chartElement[0],e,f)}catch(h){var i=b.chartElement.css("display");g=c("<div></div>").insertBefore(b.chartElement).append(b.chartElement),b.chartElement.addClass("ui-helper-hidden-accessible").appendTo(c("body")),"none"===i&&b.chartElement.css("display","block"),a=Raphael(b.chartElement[0],e,f),b.chartElement.appendTo(g).unwrap().removeClass("ui-helper-hidden-accessible"),"none"===i&&b.chartElement.css("display","none")}b.canvas=a,0===f&&0!==d.height&&b.element.height(a.height),d.disabled&&b.disable(),a.customAttributes.rotation=function(a){this.transform("...R"+a)},a.customAttributes.scale=function(a){this.transform("...S"+a)},a.customAttributes.translation=function(a,b){this.transform(Raphael.format("...T{0},{1}",a,b))},b._bindLiveEvents()}},b.prototype._handleChartStyles=function(){this._extendArrayFromBase("seriesStyles"),this._extendArrayFromBase("seriesHoverStyles");var a=this.options,b=this._getDefFill();c.each(a.seriesStyles,function(a,c){c.fill||(c.fill=b[a])})},b.prototype._extendArrayFromBase=function(a){var d=c.extend(!0,{},b.prototype.options[a],this.options[a]),e=[];c.each(d,function(a,b){e.push(b)}),this.options[a]=e},b.prototype._getDefFill=function(){var a=["#00cc00","#0099cc","#0055cc","#2200cc","#8800cc","#d9007e","#ff0000","#ff6600","#ff9900","#ffcc00","#ffff00","#ace600"];return a},b.prototype._getCulture=function(a){return this._innerCulture||this._resetCulture(a),this._innerCulture},b.prototype._resetCulture=function(a){var b=c.wijGetCulture(a||this.options.culture,this.options.cultureCalendar);this._innerCulture=b},b.prototype._handleDisabledOption=function(a,b){var c=this;a?(c.disabledDiv||(c.disabledDiv=c._createDisabledDiv(b)),c.disabledDiv.appendTo("body")):c.disabledDiv&&(c.disabledDiv.remove(),c.disabledDiv=null)},b.prototype._createDisabledDiv=function(a){var b,d=this,e=d.options,f=a||d.element,g=f.offset(),h=e.width||f.outerWidth(),i=e.height||f.outerHeight();return b=c("<div></div>").css({"z-index":"99999","position":"absolute","width":h,"height":i,"left":g.left,"top":g.top}),Raphael.vml&&b.addClass(e.wijCSS.stateDisabled).css("background-color","#fff"),b},b.prototype._bindData=function(){var a=this,b=this,d=b.options,e=d.dataSource,f=d.seriesList,g=(d.data,{});c.each(f,function(b,c){var d=c.dataSource||e;(d&&c.data||"sharedPie"===c.type)&&a._bindSeriesData(d,c,g)})},b.prototype._bindSeriesData=function(a,b,c){var d=b.data,e=d.x,f=d.y,g=this.options.data;e&&e.bind?d.x=this._getBindData(a,e.bind):g&&g.x&&g.x.bind&&(void 0===c.sharedXList&&(c.sharedXList=this._getBindData(a,g.x.bind)),d.x=c.sharedXList),f&&f.bind&&(d.y=this._getBindData(a,f.bind))},b.prototype._getBindData=function(a,b){if(c.isArray(a)){var d=[];return c.each(a,function(a,c){c&&void 0!==c[b]&&d.push(c[b])}),d}return null},b.prototype._hanldSharedXData=function(){var a=this,b=a.options,d=b.seriesList,e=b.data;e&&c.each(d,function(a,b){var d=b.data;(void 0===d.x||null===d.x&&c.isArray(e.x))&&(d.x=e.x)})},b.prototype._init=function(){var a=this,b=a.options;a.rendered||(a.seriesList=c.arrayClone(b.seriesList)),a._bindData(),a._hanldSharedXData(),c.each(b.seriesList,function(a,d){var e,f=d.data;("undefined"==typeof f||null===f)&&(e=c.inArray(d,b.seriesList),b.seriesList.splice(e,1))}),a.rendered||a._paint()},b.prototype.destroy=function(){var b=this,d=b.options;b._unbindLiveEvents(),b._clearChartElement(),b.chartElement.removeClass("ui-widget"),c("."+d.wijCSS.canvasObject,b.chartElement[0]).off(b.widgetName).off("."+b.widgetName),b.element!==b.chartElement&&b.chartElement.remove(),b.element.empty(),b.styles&&(b.styles=null),b.disabledDiv&&(b.disabledDiv.remove(),b.disabledDiv=null),a.prototype.destroy.call(this)},b.prototype.getCanvas=function(){return this.canvas},b.prototype.exportChart=function(a,b,c,d){},b.prototype.addSeriesPoint=function(a,b,c){var d=this.options.seriesList,e=null,f=null;a>=d.length||(e=d[a],f=e.data||[],f.x.push(b.x),f.y.push(b.y),c&&(f.x.shift(),f.y.shift()),this._setOption("seriesList",d))},b.prototype.beginUpdate=function(){var a=this;a.updating++},b.prototype.endUpdate=function(){var a=this;a.updating--,a.redraw()},b.prototype.redraw=function(a){var b=this,c=b.options,d=0,e=0;b.updating>0||a&&b.rendered||(d=c.width||b.element.width(),e=c.height||b.element.height(),1>d||1>e||(b.canvas.setSize(d,e),b._paint()))},b.prototype._parseTable=function(){if(this.element.is("table")){var a=this,b=a.element,d=a.options,e=c("caption",b),f=c("thead th",b),g=[],h=c("tbody tr",b);e.length&&(d.header=c.extend({"visible":!0,"text":c.trim(c(e[0]).text())},d.header),e.length>1&&(d.footer=c.extend({"visibel":!0,"text":c.trim(c(e[1]).text())},d.footer))),d.legend=c.extend({"visible":!0},d.legend),a._getSeriesFromTR(f,h,g),a.options.seriesList=g}},b.prototype._getSeriesFromTR=function(a,b,d){var e=[],f=null,g=null;a.length&&a.each(function(){f=c.trim(c(this).text()),e.push(f)}),b.length&&b.each(function(){var a=c("th",c(this)),b=c.trim(a.text()),f=[],h=c("td",c(this));h.length&&h.each(function(a,b){var d=c(this);f.push(parseFloat(c.trim(d.text())))}),g={"label":b,"legendEntry":!0,"data":{"x":e,"y":f}},d.push(g)})},b.prototype._destroyRaphaelArray=function(a){if(a)for(var b,d,e=a.length,f=0;e&&e>f;f++)b=a[f],b&&b[0]&&(d=c(b.node),d.unbind().removeData(),b.wijRemove(),d.remove(),d=null),a[f]=null},b.prototype._clearChartElement=function(){var a=this,b=a.chartElement.data("fields");a._destroyRaphaelArray(a.headerEles),a._destroyRaphaelArray(a.footerEles),a._destroyRaphaelArray(a.legendEles),a._destroyRaphaelArray(a.legends),a._destroyRaphaelArray(a.legendIcons),a._destroyRaphaelArray(a.legendDots),a._destroyRaphaelArray(a.axisEles),a._destroyRaphaelArray(a.chartLabelEles),a.tooltip&&(a.tooltip.destroy(),a.tooltip=null),a.dataPoints=null,a.pointXs=null,b&&b.trackers&&(a._destroyRaphaelArray(b.trackers),b.trackers=null),a.headerEles=[],a.footerEles=[],a.legendEles=[],a.legends=[],a.legendIcons=[],a.legendDots=[],a.axisEles=[],a.chartLabelEles=[],b&&b.chartElements&&(c.each(b.chartElements,function(b,c){a._destroyRaphaelArray(c)}),b.chartElements=null),b&&b.seriesEles&&(b.seriesEles=null),a.seriesEles&&(a.seriesEles=[]),a.canvas.clear(),a.innerState=null,a.axisInfo=null,a.seriesGroup=null,a.lastAxisOffset=null,a.innerState={}},b.prototype._text=function(a,b,c){var d=this.canvas.text(a,b,c);return this.options.disableDefaultTextStyle&&(d.node.style.cssText=""),d},b.prototype._paint=function(){var a,b=this,c=b.options,d=b.element,e="none"===d.css("display")||"hidden"===d.css("visibility"),f=null;return e&&(a=d.css("left"),f=d.css("position"),d.css("left","-10000px"),d.css("position","absolute"),d.show()),d.is(":hidden")?void(e&&(d.css("left",a),d.css("position",f),d.hide())):(b._clearChartElement(),void(b._trigger("beforePaint")!==!1&&(b._initStyles(),b._preHandleSeriesData(),b.canvasBounds={"startX":0,"endX":c.width||d.width(),"startY":0,"endY":c.height||d.height()},b._paintHeader(),b._paintFooter(),b._paintLegend(),b._paintChartArea(),c.indicator&&c.indicator.visible&&this.pointXs&&(this.pointXs=this.pointXs.sort(function(a,b){return a-b})),b._paintTooltip(),b._trigger("painted"),b.rendered=!0,b.styles&&(c.seriesStyles=b.styles.style,c.seriesHoverStyles=b.styles.hoverStyles),e&&(d.css("left",a),d.css("position",f),d.hide()))))},b.prototype._paintIndicater=function(){},b.prototype._calculatePosition=function(a,b,c){var d={"x":0,"y":0},e=5,f=5,g=this.canvasBounds;switch(a){case"north":d.x=(g.endX-g.startX)/2,d.y=g.startY+c/2+f,g.startY=g.startY+2*f+c;break;case"south":d.x=(g.endX-g.startX)/2,d.y=g.endY-c/2-f,g.endY=g.endY-2*f-c;break;case"east":d.x=g.endX-b/2-e,d.y=(g.endY-g.startY)/2,g.endX=g.endX-2*e-b;break;case"west":d.x=g.startX+b/2+e,d.y=(g.endY-g.startY)/2,g.startX=g.startX+2*e+b}return d},b.prototype._paintHeader=function(){var a=2,b=this,d=b.options,e=d.header,f=null,g=null,h=null,i=null,j=null,k=null,l=0,m=null;e.text&&e.text.length>0&&e.visible&&(f=e.compass,g=b._text(0,0,e.text),c.wijraphael.addClass(c(g.node),d.wijCSS.headerText),l=b._getRotationByCompass(f),h=c.extend(!0,{},d.textStyle,e.textStyle),g.attr(h),g.transform("...R"+l),i=g.wijGetBBox(),j=b._calculatePosition(f,i.width,i.height),g.transform(Raphael.format("...T{0},{1}",j.x,j.y)),k=g.wijGetBBox(),m=b.canvas.rect(k.x-a,k.y-a,k.width+2*a,k.height+2*a),c.wijraphael.addClass(c(m.node),d.wijCSS.headerContainer),m.attr(e.style),m.toBack(),b.headerEles.push(g),b.headerEles.push(m))},b.prototype._paintFooter=function(){var a=2,b=this,d=b.options,e=d.footer,f=null,g=null,h=null,i=null,j=null,k=null,l=0,m=null;e.text&&e.text.length>0&&e.visible&&(f=e.compass,g=b._text(0,0,e.text),c.wijraphael.addClass(c(g.node),d.wijCSS.footerText),l=b._getRotationByCompass(f),h=c.extend(!0,{},d.textStyle,e.textStyle),g.attr(h),g.transform("...R"+l),i=g.wijGetBBox(),j=b._calculatePosition(f,i.width,i.height),g.transform(Raphael.format("...T{0},{1}",j.x,j.y)),
k=g.wijGetBBox(),m=b.canvas.rect(k.x-a,k.y-a,k.width+2*a,k.height+2*a),c.wijraphael.addClass(c(m.node),d.wijCSS.footerContainer),m.attr(e.style),m.toBack(),b.footerEles.push(g),b.footerEles.push(m))},b.prototype._getRotationByCompass=function(a){var b=0;return"east"===a?b=90:"west"===a&&(b=-90),b},b.prototype._paintLegendIcon=function(a,b,d,e,f,g,i,j,k,l){var m,n=this;return n._isTrendline(k)?m=h.paintLegendIcon(a,b,d,e,f,n.canvas,n.options.legend.size,n.legendIcons,g,i,j):(m=n.canvas.rect(a,b,d,e),c(m.node).data("legendIndex",g).data("index",i),n.legendIcons.push(m),f&&m.attr(f),c.wijraphael.addClass(c(m.node),j)),m},b.prototype._paintLegend=function(){if(this.options.legend.visible){var a,b,d,e,f,g,h,i,j,k=this,l=k.options,m=c.extend(!0,{"size":{"width":22,"height":10}},l.legend),n=2,o=l.seriesStyles,p=[].concat(l.seriesList),q=m.compass,r=m.orientation,s=k.canvasBounds,t=s.endX-s.startX,u=s.endY-s.startY,v=m.size.width,w=m.size.height,x=0,y=0,z=0,A=0,B=0,C=0,D=1,E=0,F=0,G=0,H=0,I=0,J=[],K=0,L=0,M=0,N=[];m.text&&m.text.length&&(a=k._text(0,0,m.text),c.wijraphael.addClass(c(a.node),l.wijCSS.legendTitle),b=c.extend(!0,{},l.textStyle,m.textStyle,m.titleStyle),a.wijAttr(b),k.legendEles.push(a)),m.reversed&&(p=p.reverse()),M=p.length,"wijcompositechart"===k.widgetName&&(M=0,c.each(p,function(a,b){"pie"===b.type?M+=b.data.length:"sharedPie"===b.type?b.sharedPieLegends&&(M+=b.sharedPieLegends.length):M++})),c.each(p,function(a,b){function d(a){var b,d,e,f=m.reversed?M-1-K:K,g=k._getLegendStyle(o[f]),h=c.extend(!0,{"fill":"none","opacity":1,"stroke":"black"},g),i=!1,j=a.type;a.legendEntry&&"exclude"!==a.display&&(d=c.extend(!0,{},l.textStyle,m.textStyle),m.textWidth?b=k.canvas.wrapText(0,0,a.label,m.textWidth,"far",d):(b=k._text(0,0,a.label),b.wijAttr(d)),c.wijraphael.addClass(c(b.node),l.wijCSS.legendText+" "+l.wijCSS.legend),k.legends.push(b),e=h,0!==parseInt(h["stroke-width"])&&(e=c.extend(e,{"stroke-width":1})),J.push(e),N.push(a),i="wijcompositechart"===k.widgetName?"line"===j||"spline"===j||"bezier"===j||"area"===j:"wijlinechart"===k.widgetName,m.textWidth?c.each(b,function(b,d){a.visible!==!1||i&&(!i||a.markers&&a.markers.visible)||(c(d.node).data("hidden",!0).data("textOpacity",d.attr("opacity")||1),d.attr("opacity",.3)),c.wijraphael.addClass(c(d.node),l.wijCSS.legendText+" "+l.wijCSS.legend),c(d.node).data("legendIndex",L).data("index",K)}):(a.visible!==!1||i&&(!i||a.markers&&a.markers.visible)||(c(b.node).data("hidden",!0).data("textOpacity",b.attr("opacity")||1),b.attr("opacity",.3)),c.wijraphael.addClass(c(b.node),l.wijCSS.legendText+" "+l.wijCSS.legend),c(b.node).data("legendIndex",L).data("index",K)),L++),K++}b=c.extend(!0,{"legendEntry":!0,"display":"show"},b),"pie"===b.type&&b.legendEntry?c.each(b.data,function(a,e){e=c.extend({"legendEntry":b.legendEntry},e),d(e)}):"sharedPie"===b.type?b.sharedPieLegends&&c.each(b.sharedPieLegends,function(a,e){e=c.extend({"legendEntry":b.legendEntry},e),d(e)}):k._isPieChart()?d(b):k._checkSeriesDataEmpty(b)||d(b)}),d=k.legends.length,e=m.textMargin,a&&(f=a.wijGetBBox(),x=f.height,y=f.width),c.each(k.legends,function(a,b){var c=b.wijGetBBox();c.width>z&&(z=c.width),c.height>A&&(A=c.height)}),"east"===q||"west"===q?"horizontal"===r?(B=d*(z+v+n)+d*(e.left+e.right),B>t/2?(D=Math.floor(t/2/z),1>D&&(D=1)):D=d):"vertical"===r&&(C=A*d+x+d*(e.top+e.bottom),D=C>u?Math.ceil(C/u):1):("south"===q||"north"===q)&&("horizontal"===r?(B=(z+v+n)*d+d*(e.left+e.right),B>t?(D=Math.floor(d/B*t),1>D&&(D=1)):D=d):"vertical"===r&&(C=A*d+x+d*(e.top+e.bottom),C>u/2?(E=Math.floor(u-x)/2/A,D=Math.ceil(d/E)):D=1)),0===D&&(D=1),F=D*(z+v+n)+D*(e.left+e.right),G=A*Math.ceil(d/D)+x+Math.ceil(d/D)*(e.top+e.bottom),F=F>y?F:y,g=k._calculatePosition(q,F,G),h=g.x-F/2,i=g.y-G/2,j=k.canvas.rect(h-n,i-n,F+2*n,G+2*n),c.wijraphael.addClass(c(j.node),l.wijCSS.legendContainer),j.attr(m.style),j.toBack(),k.legendEles.push(j),a&&a.transform(Raphael.format("...T{0},{1}",h+F/2,i+x/2)),H=x,c.each(k.legends,function(a,b){f=J[a];var d,f,g,j=b.wijGetBBox(),o=f["stroke-width"]||0,p=h+I*(v+2*o+z+n)+(I+1)*e.left+I*e.right,q=i+H+j.height/2+e.top+A/2-j.height/2,r=q-w/2-o,s=b;m.textWidth&&(s=b[0]),d=k._paintLegendIcon(p,r,v,w,f,c(s.node).data("legendIndex"),c(s.node).data("index"),l.wijCSS.legendIcon+" "+l.wijCSS.legend,N[c(s.node).data("legendIndex")],s),c(s.node).data("hidden")===!0&&(c(s.node).data("iconOpacity",d.attr("opacity")||1),d.attr("opacity",.3)),"start"===m.textStyle["text-anchor"]&&(p-=j.width/2),m.textWidth?b.transform(Raphael.format("...T{0},{1}",p+v+n,q-j.height/2)):b.transform(Raphael.format("...T{0},{1}",p+v+n+j.width/2,q)),Raphael.vml&&(g=k.canvas.rect(p+v+n,q-j.height/2,j.width,j.height).attr({"stroke":"none","fill":"#000000","opacity":.01}),c.wijraphael.addClass(c(g.node),l.wijCSS.legendTextCover+" "+l.wijCSS.legend),c(g.node).data("legendIndex",c(s.node).data("legendIndex")),c(g.node).data("index",c(s.node).data("index")),k.legendEles.push(g)),b.toFront(),I++,I===D&&(I=0,H+=A+e.top+e.bottom)})}},b.prototype._getLegendStyle=function(a){return a},b.prototype._hasAxes=function(){return"wijpiechart"===this.widgetName?!1:!0},b.prototype._applyAxisText=function(a,b){var d=this,e=a.text,f=null,g=null,h=null,i=0,j=0,k=b.bounds||d.canvasBounds;if(null!==e&&void 0!==e&&e.length>0){switch(g=d._text(-100,-100,e),h=c.extend(!0,{},d.options.textStyle,a.textStyle),g.attr(h),f=g.wijGetBBox(),h["margin-left"]&&(j+=parseFloat(h["margin-left"])),h["margin-top"]&&(i+=parseFloat(h["margin-top"])),h["margin-right"]&&(j+=parseFloat(h["margin-right"])),h["margin-bottom"]&&(i+=parseFloat(h["margin-bottom"])),a.compass){case"north":k.startY+=f.height+i;break;case"south":k.endY-=f.height+i;break;case"east":k.endX-=f.height+j;break;case"west":k.startX+=f.height+j}g.wijRemove(),g=null}return f},b.prototype._isSeriesListDataEmpty=function(){var a=this,b=this,d=b.options.seriesList,e=!0;return c.each(d,function(b,c){return a._checkSeriesDataEmpty(c)?void 0:(e=!1,!1)}),e},b.prototype._checkEmptyData=function(a){return a&&c.isArray(a)?!1:!0},b.prototype._checkSeriesDataEmpty=function(a){var b=this._checkEmptyData,c=a.data;return!c||(b(c.x)||b(c.y))&&b(c.xy)?!0:!this._isTrendline(a)||a.isValid&&a.innerData?!1:!0},b.prototype._setTooltipContent=function(a){var b,d,e,f,g=this,h=g.tooltip,i={},j=g.options.hint,k=c.isFunction;h&&(b=[],c.each(a,function(a,d){var e=d.valX,f=d.valY;e&&f?b.push(c.extend({},d,{"x":e,"y":f})):b.push(d)}),f=h.getOptions(),d=j.title,e=j.content,k(d)&&(i.title=function(){return d.call(b)}),k(e)&&(i.content=function(){return e.call(b)}),h.setOptions(i))},b.prototype._setTooltip=function(){var a,b=this,c=b.options,d=b.tooltip;d&&(a={"closeBehavior":"none","style":{"stroke":c.indicator.style.stroke},"animated":!1,"showDelay":0,"hideDelay":0,"windowCollisionDetection":"fit","beforeShowing":function(a,c){return this.target&&b.indicatorLine?!1:void 0}},c.horizontal&&(a.compass="east"),d.setOptions(a))},b.prototype._resetTooltip=function(){var a=this,b=a.options,d=b.hint,e=d.title,f=d.content,g=a.tooltip,h=c.isFunction,i=c.extend(!0,{},this.options.hint);g&&(i.animated=d.animated,i.showDelay=d.showDelay,i.hideDelay=d.hideDelay,i.title=d.title,i.content=d.content,i.closeBehavior=d.closeBehavior||"auto",i.windowCollisionDetection="fit",h(e)&&(i.title=function(){return a._getTooltipText(e,this.target)}),h(f)&&(i.content=function(){return a._getTooltipText(f,this.target)}),i.beforeShowing=function(){a._onBeforeTooltipShowing(this)},g.setOptions(i))},b.prototype._fotmatTooltip=function(a){var b=this;return b._isDate(a)?Globalize.format(a,"f",b._getCulture()):isNaN(a)?a:Globalize.format(parseFloat(a),"n",b._getCulture())},b.prototype._setDefaultTooltipText=function(a){var b=a.label;return a.lineSeries&&a.lineSeries.label&&(b=a.lineSeries.label),b+":"+this._fotmatTooltip(a.y)},b.prototype._paintTooltip=function(){var a,b,d=this,e=d.options,f=e.hint,g=!e.disabled&&f.enable,h=f,j=c.isFunction;g&&!d.tooltip&&(h=c.extend(!0,{},f,{}),a=f.title,b=f.content,b||(b=f.content=function(){if(c.isArray(this)){var a="";return c.each(this,function(b,c){a+=d._setDefaultTooltipText(c)+"\n"}),a}return d._setDefaultTooltipText(this)}),j(a)&&(h.title=function(){return d._getTooltipText(a,this.target)}),j(b)&&(h.content=function(){return d._getTooltipText(b,this.target)}),h.beforeShowing=function(){d._onBeforeTooltipShowing(this)},d.tooltip=new i(d.canvas,null,h))},b.prototype._getTooltipText=function(a,b){var d=c(b.node).data("wijchartDataObj"),e={"data":d,"label":d.label,"x":d.x,"y":d.y,"target":b,"fmt":a};return c.proxy(a,e)()},b.prototype._onBeforeTooltipShowing=function(a){var b=a.target,c=this.options.hint.style;b&&(a.options.style.stroke=c.stroke||b.attrs.stroke||b.attrs.fill)},b.prototype._paintChartArea=function(){var a,b,d,e,f,g,h,i,j=this,k=j.options,m=k.axis,n=2,o=null,p=null,q={},r=5,s=0,t=0,u=c.isArray(m.y),v=0;if(j._applyMargins(),j.isMultiYAxis=u,!j._isSeriesListDataEmpty())if(u&&c.each(m.y,function(a,b){m.y[a]=c.extend(!0,(new l).axis.y,b)}),j._hasAxes()){if(j.innerState.axisInfo)j.axisInfo=j.innerState.axisInfo,j.canvasBounds=j.innerState.canvasBounds;else{for(o=j._applyAxisText(m.x,{}),g={"id":"x","tprec":0,"isTime":!1,"height":0,"offset":0,"vOffset":0,"max":0,"min":0,"originalMax":0,"originalMin":0,"majorTickRect":null,"minorTickRect":null,"annoFormatString":null,"textBounds":o,"axisTextOffset":n,"autoMax":!0,"autoMin":!0,"autoMajor":!0,"autoMinor":!0,"annoMethod":m.x.annoMethod,"valueLabels":m.x.valueLabels||[],"bounds":null},i=new Array,j.axisInfo={"x":g,"y":i},j.axisCompass[m.x.compass]=!0,u?c.each(m.y,function(a,b){p=j._applyAxisText(b,{}),h={"id":"y"+a,"height":0,"tprec":0,"isTime":!1,"offset":0,"vOffset":0,"max":0,"min":0,"originalMax":0,"originalMin":0,"majorTickRect":null,"minorTickRect":null,"annoFormatString":null,"textBounds":p,"axisTextOffset":n,"autoMax":!0,"autoMin":!0,"autoMajor":!0,"autoMinor":!0,"annoMethod":b.annoMethod,"valueLabels":b.valueLabels||[],"bounds":null},j.axisInfo.y[a.toString()]=h,j.axisCompass[b.compass]||(j.axisCompass[b.compass]=!0)}):(p=j._applyAxisText(m.y,{}),j.axisInfo.y[0]={"id":"y","tprec":0,"isTime":!1,"offset":0,"vOffset":0,"max":0,"min":0,"originalMax":0,"originalMin":0,"majorTickRect":null,"minorTickRect":null,"annoFormatString":null,"textBounds":p,"axisTextOffset":n,"autoMax":!0,"autoMin":!0,"autoMajor":!0,"autoMinor":!0,"annoMethod":m.y.annoMethod,"valueLabels":m.y.valueLabels||[]},j.axisCompass[m.y.compass]||(j.axisCompass[m.y.compass]=!0)),j._getSeriesGroup(u),q=j._getDataExtreme(u),j.extremeValue=q,m.x.autoMin&&j.axisInfo.x.autoMin?(m.x.min=q.txn,e=m.x.origin,null!==e&&"undefined"!=typeof e&&!j.axisInfo.x.isTime&&e<m.x.min&&(m.x.min=e)):m.x.min&&j._isDate(m.x.min)&&(m.x.min=c.toOADate(m.x.min)),m.x.autoMax&&j.axisInfo.x.autoMax?m.x.max=q.txx:m.x.max&&j._isDate(m.x.max)&&(m.x.max=c.toOADate(m.x.max)),c.each(q.y,function(a,b){v++}),a=0;a<(m.y.length||1);a++){b=m.y[a]||m.y,d=a.toString(),b.autoMin&&j.axisInfo.y[d].autoMin&&q.y[d]?(b.min=q.y[d].tyn,f=b.origin,null!==f&&"undefined"!=typeof f&&!j.axisInfo.y[d].isTime&&f<b.min&&(b.min=f)):b.min&&j._isDate(b.min)&&(b.min=c.toOADate(b.min)),b.autoMax&&j.axisInfo.y[d].autoMax&&q.y[d]?b.max=q.y[d].tyx||0:b.max&&j._isDate(b.max)&&(b.max=c.toOADate(b.max));do{if(t=j._autoPosition(j.axisInfo,m,"y",d),s=j._autoPosition(j.axisInfo,m,"x",d),t===j.axisInfo.y[d].offset&&s===j.axisInfo.x.offset){r=0;break}isNaN(s)||isNaN(t)||(t!==j.axisInfo.y[d].offset&&0!==t&&(j.axisInfo.y[d].offset=t,j.axisInfo.y[d].vOffset=s),s!==j.axisInfo.x.offset&&0!==s&&(j.axisInfo.x.offset=s,j.axisInfo.x.vOffset=t)),r--}while(r>0)}j._adjustPlotArea(m.x,j.axisInfo.x),j._adjustPlotArea(m.y,j.axisInfo.y,!0),j.innerState.axisInfo=j.axisInfo,j.innerState.canvasBounds=j.canvasBounds}j._paintAxes(),j._paintPlotArea()}else j._paintPlotArea()},b.prototype._getSeriesGroup=function(a){var b=this,d=b.options,e={};c.each(d.seriesList,function(b,c){c.yAxis&&a?e[c.yAxis.toString()]?e[c.yAxis.toString()].push(c):e[c.yAxis.toString()]=[c]:e[0]?e[0].push(c):e[0]=[c]}),b.seriesGroup=e},b.prototype._adjustPlotArea=function(a,b,d){var e,f=this.canvasBounds,g={"east":Number.MIN_VALUE,"west":Number.MIN_VALUE,"south":Number.MIN_VALUE,"north":Number.MIN_VALUE};if(d)c.each(b,function(a,b){e=a}),c.each(b,function(b,c){var d=a[b]||a,e=d.compass;switch(d.max=c.max,d.min=c.min,e){case"north":g.north=Math.max(c.offset,g.north);break;case"south":g.south=Math.max(c.offset,g.south);break;case"east":g.east=Math.max(c.offset,g.east);break;case"west":g.west=Math.max(c.offset,g.west)}}),g.north!==Number.MIN_VALUE&&(f.startY+=g.north),g.south!==Number.MIN_VALUE&&(f.endY-=g.south),g.east!==Number.MIN_VALUE&&(f.endX-=g.east),g.west!==Number.MIN_VALUE&&(f.startX+=g.west);else switch(a.max=b.max,a.min=b.min,a.compass){case"north":f.startY+=b.offset;break;case"south":f.endY-=b.offset;break;case"east":f.endX-=b.offset;break;case"west":f.startX+=b.offset}},b.prototype._autoPosition=function(a,b,c,d){return this._autoPositionCartesianAxis(a,b,c,d)},b.prototype._autoPositionCartesianAxis=function(a,b,d,e){var f,g,h,i,j,k,l,m,n,o,p=this,q=null,r=p.lastAxisOffset||{};switch("y"===d?(f=a.y[e],g=b.y[e]||b.y,i=b.x,h=a.x):(f=a.x,g=b.x,h=a.y[e],i=b.y[e]||b.y),j=g.compass,k=i.origin,l=h.max,m=h.min,null!==k&&p._isDate(k)&&(k=c.toOADate(k)),p._calculateParameters(f,g),q=p._getMaxExtents(f,g),j){case"north":case"south":n=q.height,f.maxExtent=n;break;case"east":case"west":n=q.width,f.maxExtent=n}return"y"===d&&r[j]&&(c.each(r[j],function(a,b){a!==e&&(o=b)}),o&&!f.isPartAxis&&(f.preStartOffset=o,n+=o)),"y"===d&&(void 0===r[j]&&(r[j]={}),r[j][e]=n+p._getAxisLabelBox(g).width,p.lastAxisOffset=r),n},b.prototype._getAxisLabelBox=function(a){var b,d,e=this,f=e.options,g=a.text,h=0,i=0,j=0,k=0,l=e._isVertical(a.compass),m=c.extend(!0,{},f.textStyle,a.textStyle);return m["margin-top"]&&(h=parseFloat(m["margin-top"])),m["margin-left"]&&(j=parseFloat(m["margin-left"])),m["margin-right"]&&(i=parseFloat(m["margin-right"])),m["margin-bottom"]&&(k=parseFloat(m["margin-bottom"])),b=e._text(0,0,g),b.attr(m),l&&b.transform("...R-90"),d=b.wijGetBBox(),b.wijRemove(),b=null,{"width":d.width+j+i,"height":d.height+k+h}},b.prototype._getMaxExtents=function(a,b,d){var e,f,g,h=this,i=h.options,j=null,k={"width":0,"height":0},l=a.min,m=a.max,n=a.isTime,o=b.annoFormatString,p=i.is100Percent,q=0,r=b.compass,s=b.labels,t=!1,u=a.bounds||h.canvasBounds;return a.majorTickRect=h._getTickRect(a,b,!0,!0,d),a.minorTickRect=h._getTickRect(a,b,!1,!0,d),j=h._getMajorTickValues(a,b),"x"===a.id&&(j=this._adjustTickValuesForCandlestickChart(j)),b.textVisible?(o&&0!==o.length||(o=a.annoFormatString),e=c.extend(!0,{},i.textStyle,b.textStyle,s.style),g=e.transform,t=g&&/r/i.test(g),e=c.extend(!0,e,a.textStyle),f=u.endX-u.startX-a.vOffset-a.axisTextOffset,j&&j.length&&(f/=j.length-1,c.each(j,function(b,d){var g,i,j;if(l>d||d>m)return!0;if("valueLabels"===a.annoMethod){if(0>d)return!0;if(q>=a.valueLabels.length)return!1;d=a.valueLabels[q],d.text?d=d.text:"undefined"!=typeof d.value&&(d=d.value,o&&o.length&&(d=Globalize.format(d,o,h._getCulture())))}else"values"===a.annoMethod&&("x"===a.id&&(d=h._getXTickText(d)),o&&o.length?(n&&(d=c.fromOADate(d)),d=Globalize.format(d,o,h._getCulture())):p&&"y"===a.id&&(d=Globalize.format(d,"p0",h._getCulture())));g=s.width?h.canvas.wrapText(-100,-100,d,s.width,s.textAlign,e):h._text(-100,-100,d).attr(e),i=g.wijGetBBox(),h._isVertical(r)||t||"valueLabels"!==a.annoMethod||i.width>f&&(g.attr({"transform":"r-45"}),i=g.wijGetBBox(),0===b&&(e.transform="r-45",a.textStyle={"transform":"r-45"},j=g.clone(),j.attr({"transform":"r0"}),i=j.wijGetBBox(),Math.sqrt(2)*i.height>f&&(g.attr({"transform":"r-90"}),e.transform="r-90",a.textStyle={"transform":"r-90"}),j.wijRemove(),j=null,i=g.wijGetBBox())),g.wijRemove(),g=null,i.width>k.width&&(k.width=i.width),i.height>k.height&&(k.height=i.height),q++})),k.width<s.width&&(k.width=s.width),a.labelWidth=k.width,k):k},b.prototype._getMajorTickValues=function(a,b){var d,e,f=[],g=b.autoMajor,h=b.unitMajor,i=a.valueLabels;return i&&i.length>0&&c.each(i,function(a,b){return"undefined"!=typeof b.text||"undefined"!=typeof b.value?!1:void("string"==typeof b?i[a]={"text":b,"gridLine":!1}:i[a]={"value":b,"gridLine":!1})}),"valueLabels"===a.annoMethod&&i&&i.length>0&&"undefined"!=typeof i[0].value?f=this._getSortedDataValues(a,b):("x"===a.id?(d=g?a.max:a.originalMax,e=g?a.min:a.originalMin):(d=a.max,e=a.min),f=this._getTickValues(d,e,h,a.tprec,!a.isTime,g))},b.prototype._getSortedDataValues=function(a,b){var d=this,e=[],f=a.valueLabels;return c.each(f,function(a,b){var f=b.value;d._isDate(f)?e.push(c.toOADate(f)):"number"==typeof f?e.push(f):e.push(a)}),e},b.prototype._getMinorTickValues=function(a,b){var c,d,e=[],f=b.autoMinor,g=b.unitMinor;return"x"===a.id?(c=f?a.max:a.originalMax,d=f?a.min:a.originalMin):(c=a.max,d=a.min),e=this._getTickValues(c,d,g,a.tprec,!a.isTime,f)},b.prototype._getTickValues=function(a,b,d,e,f,h){var i=[],j=b,k=0,l=0,m=0,n=0,o=0,p=0;try{if(0===d)i=[a,b];else for(h?(0>e+1?e=-1:e+1>15&&(e=14),p=c.round(g.signedCeiling(b/d)*d,e+1),a>p&&(b=p),m=parseInt(c.round(a/d,5).toString(),10),n=parseInt(c.round(b/d,5).toString(),10),o=parseInt((m-n+1).toString(),10),o>1&&(l=n*d,b>l&&(o--,b+=d),l=b+(o-1)*d,l>a&&o--),1>o&&(o=2,b=j,d=a-b)):(o=parseInt(((a-b)/d+1).toString(),10),o>1&&(l=b+(o-1)*d,l>a&&o--),1>o&&(o=2,d=a-b)),k=0;o>k;k++)f&&h?i[k]=c.round(b+k*d,e+1):i[k]=b+k*d}catch(q){}return i},b.prototype._getTickRect=function(a,b,c,d,e){var f=b.compass,g=0,h=null,i=3,j=2,k=2,l=b.tickMajor.factor,m=b.tickMinor.factor,n={"x":0,"y":0,"width":0,"height":0};return c?(h=b.tickMajor.position,l=l>0?l:1,g=i*l):(h=b.tickMinor.position,m=m>0?m:1,g=j*m),("none"===h||"inside"===h&&d)&&(g=0),"east"===f||"west"===f?(n={"x":0,"y":-1,"width":g*k,"height":k},"east"===f&&("outside"===h||"cross"===h&&d)||"west"===f&&"inside"===h?n.width+=2:d||("cross"===h&&(n.width<<=1),n.width+=2)):(n={"x":-1,"y":0,"width":k,"height":g*k},"south"===f&&("outside"===h||"corss"===h&&d)||"north"===f&&"inside"===h?n.height+=2:d||("cross"===h&&(n.height<<=1),n.height+=2)),n},b.prototype._applyMargins=function(){var a=this,b=a.options,c=a.canvasBounds;c.startX+=b.marginLeft,c.endX-=b.marginRight,c.startY+=b.marginTop,c.endY-=b.marginBottom},b.prototype._paintAxes=function(){var a,b=this,d=b.options.axis,e=b.axisInfo,f=d.x,g=d.y,h=e.x,i=e.y;a=b._paintAxis(f,h),c.each(i,function(c,d){var e=g[c]||g;null!==e.origin&&b._translateAxisIfNeeded(a,f.compass,e.origin,e.compass,d.max,d.min)}),c.each(i,function(c,d){var e=g[c]||g;a=b._paintAxis(e,d),null!==f.origin&&b._translateAxisIfNeeded(a,e.compass,f.origin,f.compass,h.max,h.min)})},b.prototype._translateAxisIfNeeded=function(a,b,d,e,f,g){var h,i=this,j="west"===e||"east"===e,k=i.canvasBounds,l=d;i._isDate(l)&&(l=c.toOADate(l)),j?(h="south"===b?(g-l)/(f-g)*(k.endY-k.startY):(f-l)/(f-g)*(k.endY-k.startY),c.each(a,function(a,b){b.transform(Raphael.format("...T{0},{1}",0,h))})):(h="west"===b?(l-g)/(f-g)*(k.endX-k.startX):(l-f)/(f-g)*(k.endX-k.startX),c.each(a,function(a,b){b.transform(Raphael.format("...T{0},{1}",h,0))}))},b.prototype._paintAxis=function(a,b){var d=this,e=d.options,f=b.bounds||d.canvasBounds,g={"x":0,"y":0},h={"x":0,"y":0},i=a.compass,j=2,k=!0,l=null,m=[],n=[],o=[],p=b.max,q=b.min,r=a.unitMajor,s=a.unitMinor,t=a.tickMajor.position,u=a.tickMinor.position,v=b.maxExtent,w=a.tickMajor.style,x=a.tickMinor.style,y=b.majorTickRect,z=b.minorTickRect,A=b.axisTextOffset,B=a.gridMajor,C=a.gridMinor,D=a.labels,E=0,F=[],G=0,H=a.annoFormatString,I=null,J=[];switch(y=d._getTickRect(b,a,!0,!1),z=d._getTickRect(b,a,!1,!1),H&&0!==H.length||(H=b.annoFormatString),m=d._getMajorTickValues(b,a),n=d._getMinorTickValues(b,a),o=d._resetMinorTickValues(n,m),"x"===b.id&&(m=this._adjustTickValuesForCandlestickChart(m)),i){case"south":g.x=f.startX,g.y=f.endY,h.x=f.endX,h.y=f.endY,k=!1;break;case"north":g.x=f.startX,g.y=f.startY-j,h.x=f.endX,h.y=f.startY-j,k=!1;break;case"east":g.x=f.endX-j,g.y=f.endY,h.x=f.endX-j,h.y=f.startY+d._getOffsetOfAxis(a),b.preStartOffset&&(g.x+=b.preStartOffset,h.x+=b.preStartOffset);break;case"west":g.x=f.startX,g.y=f.endY,h.x=f.startX,h.y=f.startY+d._getOffsetOfAxis(a),b.preStartOffset&&(g.x-=b.preStartOffset,h.x-=b.preStartOffset)}return a.visible&&(l=d.canvas.line(g.x,g.y,h.x,h.y).attr(a.style),c.wijraphael.addClass(c(l.node),e.wijCSS.axis),d.axisEles.push(l),J.push(l)),c.each(m,function(f,j){var k,l,m=j,n=b.isTime,o=e.is100Percent,s=!1,u={};if(q>j||j>p)return G++,!0;if("valueLabels"===b.annoMethod){if(G>=b.valueLabels.length)return!1;m=b.valueLabels[G],s=m.gridLine,u=m.gridLineStyle,m.text?m=m.text:"undefined"!=typeof m.value&&(m=m.value,H&&H.length&&(m=Globalize.format(m,H,d._getCulture())))}else"values"===b.annoMethod&&("x"===b.id&&(m=d._getXTickText(m)),H&&H.length?(n&&(m=c.fromOADate(j)),m=Globalize.format(m,H,d._getCulture())):o&&"y"===b.id&&(m=Globalize.format(j,"p0",d._getCulture())));I=c.extend(!0,{},e.textStyle,a.textStyle,D.style,b.textStyle),k=d._paintMajorMinor(a.origin,p,q,j,t,r,y,i,g,h,v,A,w,m,B,a.textVisible,I,D.textAlign,D.width?b.labelWidth:null,s,u),k&&(k.elements&&(J=J.concat(k.elements)),l=k.textInfo),l&&(F.push(l),E<l.len&&(E=l.len)),G++}),D.width||c.each(F,function(a,b){var c=b.text,d=(b.len-E)/2;d="near"===D.textAlign?-1*d:d,k?c.transform(Raphael.format("...T{0},{1}",d,0)):c.transform(Raphael.format("...T{0},{1}",0,d))}),c.each(o,function(c,e){var f;e>q&&p>e&&(f=d._paintMajorMinor(a.origin,p,q,e,u,s,z,i,g,h,v,A,x,null,C,a.textVisible,I,D.textAlign,D.width?b.labelWidth:null),f&&f.elements&&(J=J.concat(f.elements)))}),a.text&&a.text.length>0&&J.push(d._paintAxisText(a,b)),b.isPartAxis&&!b.isLastAxis&&J.push(d.canvas.path(["M",g.x.toString(),(g.y+b.vOffset/2).toString(),"H",(g.x+2*b.maxExtent).toString()].join())),J},b.prototype._paintAxisText=function(a,b){if(a.text&&0!==a.text.length){var d=this,e=d.options,f=a.text,g=a.compass,h=a.alignment,i=b.bounds||d.canvasBounds,j=i.startX,k=i.startY,l=i.endX,m=i.endY,n=j,o=k,p=b.textBounds,q=d._isVertical(g),r=b.axisTextOffset,s=b.majorTickRect,t=a.tickMajor.position,u=q?s.width:s.height,v=null,w=null,x=0,y=0,z=0,A=0;if(v=c.extend(!0,{},d.options.textStyle,a.textStyle),v["margin-top"]&&(x=parseFloat(v["margin-top"])),v["margin-left"]&&(y=parseFloat(v["margin-left"])),v["margin-right"]&&(z=parseFloat(v["margin-right"])),v["margin-bottom"]&&(A=parseFloat(v["margin-bottom"])),"cross"===t?u/=2:"inside"===t&&(u=0),q){switch(h){case"near":o=m-p.width/2;break;case"center":o=(k+m)/2;break;case"far":o=k+p.width/2}n="west"===g?j-(b.offset+r+u+p.height/2+z):l+b.offset+r+u+p.height/2+y}else{switch(h){case"near":n=j+p.width/2;break;case"center":n=(j+l)/2;break;case"far":n=l-p.width/2}o="north"===g?k-(b.offset+r+u+p.height/2+A):m+b.offset+r+u+p.height/2+x}return w=d._text(n,o,f),c.wijraphael.addClass(c(w.node),e.wijCSS.axisText),d.axisEles.push(w),w.attr(v),q&&w.transform("...R-90"),w}},b.prototype._resetMinorTickValues=function(a,b){var c=0,d=0,e=null,f=null;for(c=a.length-1;c>=0;c--)for(e=a[c],d=b.length-1;d>=0;d--)f=b[d],e===f&&a.splice(c,1);return a},b.prototype._getXTickText=function(a){return a},b.prototype._adjustTickValuesForCandlestickChart=function(a){return a},b.prototype._paintMajorMinor=function(a,b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=this,x=j.x,y=j.y,z=w.options,A=-1,B=-1,C=!0,D=w.canvasBounds,E=null,F=null,G=[],H=[],I=null,J={"stroke-width":2},K={"text":null,"len":0},L=null,M={},N=[],O=w.axisCompass;switch(i){case"south":"inside"===f?y-=h.height:"cross"===f&&(y-=h.height/2),B=t?y+m+h.height:y+m+h.height+l/2,C=!1;break;case"west":"outside"===f?x-=h.width:"cross"===f&&(x-=h.width/2),A=t?x-(m+l):x-(m+l/2);break;case"north":"outside"===f?y-=h.height:"cross"===f&&(y-=h.height/2),B=t?y-(m+l):y-(m+l/2),C=!1;break;case"east":"inside"===f?x-=h.width:"cross"===f&&(x-=h.width/2),A=t?x+m+h.width:x+m+h.width+l/2}return C?(y+=(e-d)/(b-d)*(k.y-j.y),H=["M",D.startX,y,"H",D.endX],p.visible&&((y===D.startY&&O.north||y===D.endY&&O.south)&&a===e||(I=w.canvas.path(H.join(" ")),c.wijraphael.addClass(c(I.node),z.wijCSS.axisGridLine),I.attr(p.style),w.axisEles.push(I))),u&&((y===D.startY&&O.north||y===D.endY&&O.south)&&a===e||(I=w.canvas.path(H.join(" ")),c.wijraphael.addClass(c(I.node),z.wijCSS.axisGridLine),I.attr(c.extend(!0,{},p.style,v)),w.axisEles.push(I))),B=y,"none"!==f&&(G=["M",x,y,"h",h.width],n["stroke-width"]=h.height)):(x+=(e-d)/(b-d)*(k.x-j.x),H=["M",x,D.startY,"V",D.endY],p.visible&&((x===D.startX&&O.west||x===D.endX&&O.east)&&a===e||(I=w.canvas.path(H.join(" ")),c.wijraphael.addClass(c(I.node),z.wijCSS.axisGridLine),I.attr(p.style),w.axisEles.push(I))),u&&((x===D.startX&&O.west||x===D.endX&&O.east)&&a===e||(I=w.canvas.path(H.join(" ")),c.wijraphael.addClass(c(I.node),z.wijCSS.axisGridLine),I.attr(c.extend(!0,{},p.style,v)),w.axisEles.push(I))),A=t?x-t/2:x,"none"!==f&&(G=["M",x,y,"v",h.height],n["stroke-width"]=h.width)),"none"!==f&&(F=w.canvas.path(G.join(" ")),c.wijraphael.addClass(c(F.node),z.wijCSS.axisTick),J=c.extend(J,n),F.attr(J),w.axisEles.push(F),N.push(F)),null!==o&&q&&(t?(K=w.canvas.wrapText(A,B,o.toString(),t,s,r),c.wijraphael.addClass(c(K.node),z.wijCSS.axisLabel)):(K=w._text(A,B,o.toString()),c.wijraphael.addClass(c(K.node),z.wijCSS.axisLabel),K.attr(r)),w.axisEles.push(K),N.push(K),q||K.hide(),"center"!==s&&(L=K.getBBox(),E={"text":K,"len":C?L.width:L.height})),M={"textInfo":E,"elements":N}},b.prototype._paintPlotArea=function(){},b.prototype._paintChartLabels=function(){var a=this,b=a.options.chartLabels;b&&b.length&&c.each(b,function(b,d){var e;if(d=c.extend(!0,{"compass":"east","attachMethod":"coordinate","attachMethodData":{"seriesIndex":-1,"pointIndex":-1,"x":-1,"y":-1},"offset":0,"visible":!1,"text":"","connected":!1},d),d.visible){if(e=a._getChartLabelPointPosition(d),"number"!=typeof e.x||"number"!=typeof e.y)return!1;a._setChartLabel(d,e)}})},b.prototype._getChartLabelPointPosition=function(a){},b.prototype._setChartLabel=function(a,b,d,e){var f=this,g=a.compass,h=f.options,i=c.extend(!0,{},h.textStyle,h.chartLabelStyle),j=f._text(0,0,a.text).attr(i),k=a.offset,l=0,m=0,n=null,o=null;c.wijraphael.addClass(c(j.node),h.wijCSS.labelText),f.chartLabelEles.push(j),n=f._getCompassTextPosition(g,j.wijGetBBox(),k,b,d),k&&a.connected&&(o=f.canvas.path("M"+b.x+" "+b.y+"L"+n.endPoint.x+" "+n.endPoint.y),c.wijraphael.addClass(c(o.node),h.wijCSS.labelConnect),o.attr(e),f.chartLabelEles.push(o)),l=n.endPoint.x+n.offsetX,m=n.endPoint.y+n.offsetY,j.transform(Raphael.format("...T{0},{1}",l,m)).toFront()},b.prototype._getCompassTextPosition=function(a,b,d,e,f){var g=0,h=0,i={"x":0,"y":0};switch(a.toLowerCase()){case"east":f=0;break;case"west":f=180;break;case"north":f=90;break;case"south":f=270;break;case"northeast":f=45;break;case"northwest":f=135;break;case"southeast":f=315;break;case"southwest":f=225}return f>=0&&22.5>f||f>337.5&&360>f?g=b.width/2:f>=22.5&&67.5>f?(g=b.width/2,h=-1*b.height/2):f>=67.5&&112.5>f?h=-1*b.height/2:f>=112.5&&157.5>f?(g=-1*b.width/2,h=-1*b.height/2):f>=157.5&&202.5>f?g=-1*b.width/2:f>=202.5&&247.5>f?(g=-1*b.width/2,h=b.height/2):f>=247.5&&292.5>f?h=b.height/2:(g=b.width/2,h=b.height/2),i=c.wijraphael.getPositionByAngle(e.x,e.y,d,f),{"endPoint":i,"offsetX":g,"offsetY":h}},b.prototype._isTouchEnabled=function(){return c.support.isTouchEnabled&&c.support.isTouchEnabled()},b.prototype._mouseDown=function(a,b){this._trigger("mouseDown",a,b)},b.prototype._mouseUp=function(a,b){this._trigger("mouseUp",a,b)},b.prototype._mouseOver=function(a,b){this._trigger("mouseOver",a,b)},b.prototype._mouseOut=function(a,b){this._trigger("mouseOut",a,b)},b.prototype._mouseMove=function(a,b){this._trigger("mouseMove",a,b)},b.prototype._click=function(a,b){this._trigger("click",a,b)},b.prototype._mouseMoveInsidePlotArea=function(a,b){var d,e,f=this,g=f.options,h=g.indicator,i=(f.canvas,[]),j=g.horizontal;h&&h.visible&&this.isPlotAreaMouseDown&&(d=j?this._calculatePositionByX(b.top):this._calculatePositionByX(b.left),d&&this.indicatorLine&&d.x!==this.lastIndicatorPosition&&(c.each(d.data,function(a,b){b.visible&&i.push(b)}),i.length>0&&(e=f.canvasBounds,j?this.indicatorLine.transform("T0 "+d.x):this.indicatorLine.transform("T"+d.x+" 0"),this._setTooltipContent(i),j?this.tooltip.showAt({"x":e.endX,"y":d.x}):this.tooltip.showAt({"x":d.x,"y":e.startY}),this.lastIndicatorPosition=d.x,f._indicatorLineShowing(i),this.lastIndicatorObjects=i)))},b.prototype._calculatePositionByX=function(a){var b,c=this,d=c.pointXs,e=c.dataPoints;return d&&d.length>0&&(b=this._calculatePositionByXInternal(a,d)),e?{"x":b,"data":e[b.toString()]}:null},b.prototype._calculatePositionByXInternal=function(a,b){var c,d,e=b.length;return 1===e?b[0]:2===e?Math.abs(a-b[0])>Math.abs(a-b[1])?b[1]:b[0]:(c=parseInt((e/2).toString()),d=a>b[c]?b.slice(c):b.slice(0,c+1),this._calculatePositionByXInternal(a,d))},b.prototype._mouseMoveOutsidePlotArea=function(a,b){this.indicatorLine&&(this.indicatorLine.wijRemove(),this.indicatorLine=null,this.tooltip&&this.tooltip.hide(),this._resetTooltip())},b.prototype._mouseDownInsidePlotArea=function(a,b){this.isPlotAreaMouseDown=!0;var d,e,f,g=this,h=g.options,i=h.indicator,j=g.canvas,k=[],l=h.horizontal;i&&i.visible&&this.isPlotAreaMouseDown&&(g._setTooltip(),d=l?this._calculatePositionByX(b.top):this._calculatePositionByX(b.left),d&&(c.each(d.data,function(a,b){b.visible&&k.push(b)}),k.length>0&&(e=g.canvasBounds,f=l?["M",e.startX,0,"H",e.endX]:["M",0,e.startY,"V",e.endY],this.indicatorLine&&this.indicatorLine.wijRemove(),this.indicatorLine=j.path(f),this.indicatorLine.attr(i.style),l?this.indicatorLine.transform("T0 "+d.x):this.indicatorLine.transform("T"+d.x+" 0"),this._setTooltipContent(k),l?this.tooltip.showAt({"x":e.endX,"y":d.x}):this.tooltip.showAt({"x":d.x,"y":e.startY}),this.lastIndicatorPosition=d.x,g._indicatorLineShowing(k),this.lastIndicatorObjects=k)),a.preventDefault())},b.prototype._indicatorLineShowing=function(a){this.lastIndicatorObjects&&this._removeIndicatorStyles(this.lastIndicatorObjects)},b.prototype._removeIndicatorStyles=function(a){},b.prototype._mouseUpInsidePlotArea=function(a,b){this.isPlotAreaMouseDown=!1,this.indicatorLine&&(this.indicatorLine.wijRemove(),this.indicatorLine=null,this.tooltip&&this.tooltip.hide(),this._resetTooltip()),this.lastIndicatorObjects&&(this._removeIndicatorStyles(this.lastIndicatorObjects),this.lastIndicatorObjects=null)},b.prototype._bindLiveEvents=function(){this._bindLegendEvents(),this._bindCanvasEvents(),this._bindResizeEvent()},b.prototype._bindResizeEvent=function(){var a=this;this.resizeIntent=250,this.options.autoResize&&this.chartElement.on("resize."+this.widgetName,function(){clearTimeout(a.resizeTimer),a.resizeTimer=setTimeout(function(){a.redraw()},a.resizeIntent)})},b.prototype._unbindResizeEvent=function(){this.chartElement.off("resize."+this.widgetName)},b.prototype._bindCanvasEvents=function(){var a=this,b=a.chartElement,d="",e="."+this.widgetName;c.support.isTouchEnabled&&c.support.isTouchEnabled()&&(window.navigator.pointerEnabled?b.css("touch-action","none"):window.navigator.msPointerEnabled&&b.css("-ms-touch-action","none")),c.support.isTouchEnabled&&c.support.isTouchEnabled()&&(d="wij"),b.bind(d+"mousemove"+e,function(c){var d=b.offset(),e=a.canvasBounds,f={"left":("CSS1Compat"===document.compatMode?c.pageX:c.clientX)-d.left,"top":("CSS1Compat"===document.compatMode?c.pageY:c.clientY)-d.top},g=a.options.disabled;g||f.left>=e.startX&&f.left<=e.endX&&f.top>=e.startY&&f.top<=e.endY&&a._mouseMoveInsidePlotArea(c,f)}),b.bind(d+"mouseout"+e,function(c){var d=b.offset(),e=a.canvasBounds,f={"left":("CSS1Compat"===document.compatMode?c.pageX:c.clientX)-d.left,"top":("CSS1Compat"===document.compatMode?c.pageY:c.clientY)-d.top},g=a.options.disabled;g||f.left>=e.startX&&f.left<=e.endX&&f.top>=e.startY&&f.top<=e.endY||a._mouseMoveOutsidePlotArea(c,f)}),a.options.indicator&&a.options.indicator.visible&&b.bind(d+"mousedown"+e,function(c){var d=b.offset(),e=a.canvasBounds,f={"left":("CSS1Compat"===document.compatMode?c.pageX:c.clientX)-d.left,
"top":("CSS1Compat"===document.compatMode?c.pageY:c.clientY)-d.top},g=a.options.disabled;g||f.left>=e.startX&&f.left<=e.endX&&f.top>=e.startY&&f.top<=e.endY&&a._mouseDownInsidePlotArea(c,f)}).bind(d+"mouseup"+e,function(c){var d=b.offset(),e=a.canvasBounds,f={"left":("CSS1Compat"===document.compatMode?c.pageX:c.clientX)-d.left,"top":("CSS1Compat"===document.compatMode?c.pageY:c.clientY)-d.top},g=a.options.disabled;g||f.left>=e.startX&&f.left<=e.endX&&f.top>=e.startY&&f.top<=e.endY&&a._mouseUpInsidePlotArea(c,f)})},b.prototype._unbindCanvasEvents=function(){c.support.isTouchEnabled&&c.support.isTouchEnabled()&&(window.navigator.pointerEnabled?this.element.css("touch-action",""):window.navigator.msPointerEnabled&&this.element.css("-ms-touch-action","")),this.element.unbind("."+this.widgetName)},b.prototype._bindLegendEvents=function(){var a=this,b=a.chartElement;b.delegate("."+a.options.wijCSS.legend,"click.wijchartcore",function(b){if(!a.options.disabled){var d=c(b.target);d[0].tagName&&"tspan"===d[0].tagName&&(d=d.parent()),a._legendClick(d)}})},b.prototype._legendClick=function(a){if("undefined"!=typeof a.data("index")){var b,d,e=this,f=e.options.legend,g=a.data("index"),h=a.data("legendIndex"),i=e.chartElement.data("fields"),j=e.seriesEles,k=e.legendIcons[h],l=e.legends[h],m=c(f.textWidth?l[0].node:l.node),n=g;i&&i.seriesEles&&(j=i.seriesEles),e.legendDots&&e.legendDots.length>g&&(d=e.legendDots[g]),f.reversed&&(n=e.legends.length-1-g),b=j[n],e.legends.length&&(m.data("hidden")?(b&&e._showSerieEles(b),l.attr("opacity",m.data("textOpacity")),k.attr("opacity",m.data("iconOpacity")),d&&d.attr("opacity",m.data("dotOpacity")),m.data("hidden",!1)):(b&&e._hideSerieEles(b),m.data("textOpacity")||(f.textWidth?m.data("textOpacity",l[0].attr("opacity")||1):m.data("textOpacity",l.attr("opacity")||1)),m.data("iconOpacity")||m.data("iconOpacity",k.attr("opacity")||1),d&&!m.data("dotOpacity")&&m.data("dotOpacity",k.attr("opacity")||1),l.attr("opacity","0.3"),k.attr("opacity","0.3"),d&&d.attr("opacity","0.3"),m.data("hidden",!0)))}},b.prototype._showSerieEles=function(a){},b.prototype._hideSerieEles=function(a){},b.prototype._unbindLiveEvents=function(){var a=this,b=a.options,c=this.chartElement;a.widgetName;c.undelegate("."+b.wijCSS.legend,".wijchartcore").undelegate("."+b.wijCSS.legend,"wijchartcore"),this._unbindCanvasEvents(),this._unbindResizeEvent()},b.prototype._isBarChart=function(){return!1},b.prototype._isPieChart=function(){},b.prototype._validateSeriesData=function(a){return!1},b.prototype._getOffsetOfAxis=function(a){return 0},b.prototype._calculateParameters=function(a,b){var c=this,d=b.max,e=b.min,f=b.autoMax&&a.autoMax,h=b.autoMin&&a.autoMin,i=b.autoMajor&&a.autoMajor,j=b.autoMinor&&a.autoMinor,k=null,l=null,m="valueLabels"===a.annoMethod,n=0,o=0,p=0,q=0,r=0,s=a.isTime,t=c.options.adjustMinValue;f&&d!==Number.MIN_VALUE&&"x"!==a.id&&c._isBarChart()&&0>d&&.5*(d-e)>-d&&(d=0),h&&e!==Number.MAX_VALUE&&"x"!==a.id&&c._isBarChart()&&e>0&&.5*(d-e)>e&&(e=0),d===e&&(0!==e&&(e-=1),d+=1),q=d-e,s&&(k=b.annoFormatString,k&&0!==k.length||(k=g.getTimeDefaultFormat(d,e),a.annoFormatString=k),r=g.niceTimeUnit(0,k)),l=g.nicePrecision(q),a.tprec=l,f&&(s?(o=g.roundTime(d,r,!0),d=d>o?o+r:o):(o=g.precCeil(-l,d),"number"==typeof o&&(d=o))),h&&(s?(p=g.roundTime(e,r,!1),e=p>e?p-r:p):(p=g.precFloor(-l,e),"number"==typeof p&&(e=p))),a.max=d,a.min=e,a.originalMax=d,a.originalMin=e,a.annoFormatString=k,a.tinc=r,(i||j)&&(q=d-e,c._calculateMajorMinor(b,a),n=b.unitMajor,!f||0===n||s||m||(q=d-parseInt((d/n).toString(),10)*n,0!==q&&(d+=n-q,d=g.precCeil(-l,d))),!h||0===n||s||m||(q=e-parseInt((e/n).toString(),10)*n,0!==q&&(0>q&&(q+=n),e-=Math.abs(q),e=g.precFloor(-l,e))),h&&0!==n&&!m&&("undefined"==typeof t||t===!1)&&h&&e===b.min&&e-n>=0&&"y"===a.id&&(e-=n)),a.max=d,a.min=e,a.originalMax=d,a.originalMin=e},b.prototype._supportStacked=function(){return!1},b.prototype._getDataExtreme=function(a){var b,c={"txx":0,"txn":0,"tyx":0,"tyn":0};return b=this._getDataExtremes(c,a),b?(b.txn>b.txx&&(b.txn=0,b.txx=1),b):(c.txn>c.txx&&(c.txn=0,c.txx=1),c)},b.prototype._getDataExtremes=function(a,b){var d,e=this,g=e.options,h=g.seriesList,i=g.stacked&&e._supportStacked(),j=g.is100Percent,k=g.axis,l=e.axisInfo,m=[],n=[],o=[],p=[],q={"y":{}},r=k.x.valueLabels,s=l.x.annoMethod,t=(l.y.annoMethod,0);return h&&0!==h.length?(c.each(h,function(a,b){var d,e=b.data,f=[],g=[],h=0;if(e.xy&&c.isArray(e.xy)){for(d=e.xy.length;d>h;)f.push(e.xy[h]),g.push(e.xy[h+1]),h+=2;e.x=f,e.y=g}}),e.seriesGroup&&c.each(e.seriesGroup,function(b,g){var h=[],r=[],s=parseInt(b,10);if(c.each(g,function(b,d){var f,g,j,k,l,p,q=0,s=0;if("pie"===d.type||"sharedPie"===d.type)return!0;if(d=c.extend(!0,{"display":"show"},d),"exclude"===d.display)return!0;if(p=e._isTrendline(d)){if(!d.isValid||!d.innerData)return!0;n=d.innerData.x,r=d.innerData.y}else{if(f=d.data,g=[].concat(f.xy),j=g.length,m=[].concat(f.x),h=[].concat(f.y),f.xy&&j)for(m=[],h=[];j>s;)m[q]=g[s],h[q]=g[s+1],s+=2,q++,f.x=m,f.y=h;else f.x||(m=[],c.each(h,function(a){m.push(a)}),f.x=m);i&&b>0&&c.each(h,function(a){h[a]+=o[a]}),o=h}k=e._getMinMaxValue(p?n:m),l=e._getMinMaxValue(p?r:h),0===b?(a.tyx=l.max,a.tyn=l.min):(a.tyx<l.max&&(a.tyx=l.max),a.tyn>l.min&&(a.tyn=l.min)),0===t?(a.txx=k.max,a.txn=k.min):(a.txx<k.max&&(a.txx=k.max),a.txn>k.min&&(a.txn=k.min)),t++}),j&&(a.tyx=1,a.tyn=0),q.y[b]={"tyx":a.tyx,"tyn":a.tyn},q.txx=a.txx,q.txn=a.txn,a.tyx=0,a.tyn=0,h.length)if(d=f.getFirstValidListValue(h),e._isDate(d))l.y[b].isTime=!0;else{if("undefined"==typeof d)return!0;"number"!=typeof d&&(c.each(h,function(a,b){var c=k.y.annoFormatString,d=b;d=c&&c.length>0?Globalize.format(d,c,e._getCulture()):d.toString(),p.push({"text":d,"value":b,"gridLine":!1})}),l.y[b].annoMethod="valueLabels",k.y[s].valueLabels||0!==k.y[s].valueLabels.length?l.y[b].valueLabels=k.y[s].valueLabels:l.y[b].valueLabels=p,k.x.max=h.length-1,k.x.min=0,k.y[s].unitMajor=1,k.x.unitMinor=.5,l.y[b].autoMax=!1,l.y[b].autoMin=!1,l.y[b].autoMajor=!1,l.y[b].autoMinor=!1)}}),m.length&&(d=f.getFirstValidListValue(m),"valueLabels"===s&&r&&r.length>0&&(l.x.valueLabels=r),e._isDate(d)?l.x.isTime=!0:"number"!=typeof d&&(c.each(m,function(a,b){var d,f,g={};"valueLabels"===s&&r&&r.length&&a<r.length&&(d=r[a],f=typeof d,"string"===f?d={"text":d}:("number"===f||e._isDate(d))&&(d={"value":d})),g=c.extend({"text":b,"value":a,"gridLine":!1},d),p.push(g)}),k.x.max=m.length-1,k.x.min=0,k.x.unitMajor=1,k.x.unitMinor=.5,l.x.annoMethod="valueLabels",l.x.valueLabels=p,l.x.autoMax=!1,l.x.autoMin=!1,l.x.autoMajor=!1,l.x.autoMinor=!1)),q):a},b.prototype._isVertical=function(a){return"west"===a||"east"===a},b.prototype._isDate=function(a){return a?"object"==typeof a&&a.constructor===Date:!1},b.prototype._getMinMaxValue=function(a){var b,d=this,e={"min":0,"max":0},g=0;if(!a.length)return e;if(b=f.getFirstValidListValue(a),"number"!=typeof b){if(!d._isDate(b))return e.min=0,e.max=a.length-1,e;e.min=b,e.max=b}else e.min=b,e.max=b;for(g=0;g<a.length;g++)null!==a[g]&&"undefined"!=typeof a[g]&&("number"==typeof a[g]&&isNaN(a[g])||(a[g]<e.min?e.min=a[g]:a[g]>e.max&&(e.max=a[g])));return d._isDate(e.min)&&(e.min=c.toOADate(e.min),e.max=c.toOADate(e.max)),e},b.prototype._getTickTextForCalculateUnit=function(a,b,d){var e=b.isTime,f=b.annoFormatString;return e?Globalize.format(c.fromOADate(a),f,this._getCulture()):c.round(a,d).toString()},b.prototype._calculateMajorMinor=function(a,b){var d=this,e=d.options,f=b.bounds||d.canvasBounds,h=a.autoMajor,i=a.autoMinor,j=b.max,k=b.min,l=b.isTime,m=b.tinc,n=(b.annoFormatString,null),o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=j-k,x=0,y=0,z=0,A=0;h&&(v=c.extend(!0,{},e.textStyle,a.textStyle,a.labels.style),l||(t=g.nicePrecision(w),u=t+1,(0>u||u>15)&&(u=0)),n=this._getTickTextForCalculateUnit(j,b,t),o=this._getTickTextForCalculateUnit(k,b,t),r=d._text(-1e3,-1e3,n).attr(v),s=d._text(-1e3,-1e3,o).attr(v),p=r.wijGetBBox(),q=s.wijGetBBox(),r.wijRemove(),r=null,s.wijRemove(),s=null,p.width<q.width&&(p.width=q.width),p.height<q.height&&(p.height=q.height),d._isVertical(a.compass)?(y=f.endY-f.startY-b.vOffset-b.axisTextOffset,A=y/p.height,z=Number.POSITIVE_INFINITY===A?0:parseInt(A.toString(),10)):(x=f.endX-f.startX-b.vOffset-b.axisTextOffset,A=x/p.width,z=Number.POSITIVE_INFINITY===A?0:parseInt(A.toString(),10)),A=w,z>0&&(w/=z,l?A=m>w?m:g.niceTimeUnit(w,b.annoFormatString):(b.tprec=g.nicePrecision(w),A=g.niceNumber(2*w,-t,!0),w>A&&(A=g.niceNumber(w,-t+1,!1)),w>A&&(A=g.niceTickNumber(w)))),a.unitMajor=A),i&&a.unitMajor&&!isNaN(a.unitMajor)&&(a.unitMinor=a.unitMajor/2)},b}(a.wijmoWidget);b.wijchartcore=k;var l=function(){function a(){this.width=null,this.height=null,this.wijCSS=new m,this.culture="",this.cultureCalendar="",this.autoResize=!0,this.seriesList=[],this.seriesStyles=[{"stroke":"#00cc00","opacity":.9,"stroke-width":1},{"stroke":"#0099cc","opacity":.9,"stroke-width":1},{"stroke":"#0055cc","opacity":.9,"stroke-width":1},{"stroke":"#2200cc","opacity":.9,"stroke-width":1},{"stroke":"#8800cc","opacity":.9,"stroke-width":1},{"stroke":"#d9007e","opacity":.9,"stroke-width":1},{"stroke":"#ff0000","opacity":.9,"stroke-width":1},{"stroke":"#ff6600","opacity":.9,"stroke-width":1},{"stroke":"#ff9900","opacity":.9,"stroke-width":1},{"stroke":"#ffcc00","opacity":.9,"stroke-width":1},{"stroke":"#ffff00","opacity":.9,"stroke-width":1},{"stroke":"#ace600","opacity":.9,"stroke-width":1}],this.seriesHoverStyles=[{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5},{"opacity":1,"stroke-width":1.5}],this.marginTop=25,this.marginRight=25,this.marginBottom=25,this.marginLeft=25,this.textStyle={"fill":"#888","font-size":10,"stroke":"none"},this.header={"text":"","style":{"fill":"none","stroke":"none"},"textStyle":{"font-size":18,"fill":"#666","stroke":"none"},"compass":"north","visible":!0},this.footer={"text":"","style":{"fill":"#fff","stroke":"none"},"textStyle":{"fill":"#000","stroke":"none"},"compass":"south","visible":!1},this.legend={"text":"","textMargin":{"left":2,"top":2,"right":2,"bottom":2},"style":{"fill":"none","stroke":"none"},"textWidth":null,"textStyle":{"fill":"#333","stroke":"none"},"titleStyle":{"font-weight":"bold","fill":"#000","stroke":"none"},"compass":"east","orientation":"vertical","visible":!0,"reversed":!1,"size":{}},this.axis={"x":{"alignment":"center","style":{"stroke":"#999999","stroke-width":.5},"visible":!0,"textVisible":!0,"text":"","textStyle":{"fill":"#888","font-size":15,"font-weight":"bold"},"labels":{"style":{"fill":"#333","font-size":11},"textAlign":"near","width":null},"compass":"south","autoMin":!0,"autoMax":!0,"min":null,"max":null,"origin":null,"autoMajor":!0,"autoMinor":!0,"unitMajor":null,"unitMinor":null,"gridMajor":{"visible":!1,"style":{"stroke":"#CACACA","stroke-dasharray":"- "}},"gridMinor":{"visible":!1,"style":{"stroke":"#CACACA","stroke-dasharray":"- "}},"tickMajor":{"position":"none","style":{"fill":"black"},"factor":1},"tickMinor":{"position":"none","style":{"fill":"black"},"factor":1},"annoMethod":"values","annoFormatString":"","valueLabels":[]},"y":{"alignment":"center","style":{"stroke":"#999999","stroke-width":.5},"visible":!1,"textVisible":!0,"text":"","textStyle":{"fill":"#888","font-size":15,"font-weight":"bold"},"labels":{"style":{"fill":"#333","font-size":11},"textAlign":"center","width":null},"compass":"west","autoMin":!0,"autoMax":!0,"min":null,"max":null,"origin":null,"autoMajor":!0,"autoMinor":!0,"unitMajor":null,"unitMinor":null,"gridMajor":{"visible":!0,"style":{"stroke":"#999999","stroke-width":.5,"stroke-dasharray":"none"}},"gridMinor":{"visible":!1,"style":{"stroke":"#CACACA","stroke-dasharray":"- "}},"tickMajor":{"position":"none","style":{"fill":"black"},"factor":1},"tickMinor":{"position":"none","style":{"fill":"black"},"factor":1},"annoMethod":"values","annoFormatString":"","valueLabels":[]}},this.hint={"enable":!0,"content":null,"contentStyle":{"fill":"#d1d1d1","font-size":16},"title":null,"titleStyle":{"fill":"#d1d1d1","font-size":16},"style":{"fill":"#000000","stroke-width":2},"animated":"fade","showAnimated":"fade","hideAnimated":"fade","duration":120,"showDuration":120,"hideDuration":120,"easing":"","showEasing":"","hideEasing":"","showDelay":0,"hideDelay":150,"compass":"north","offsetX":0,"offsetY":0,"showCallout":!0,"calloutFilled":!1,"calloutFilledStyle":{"fill":"#000"},"beforeShowing":null,"closeBehavior":"auto","relativeTo":"mouse","isContentHtml":!1},this.indicator={"visible":!1,"style":{"stroke":"#000000"}},this.showChartLabels=!0,this.chartLabelStyle={},this.chartLabelFormatString="",this.disableDefaultTextStyle=!1,this.shadow=!0,this.dataSource=null,this.data=null,this.beforeSeriesChange=null,this.seriesChanged=null,this.beforePaint=null,this.painted=null,this.seriesTransition={"enabled":!0,"duration":400,"easing":">"}}return a}();b.wijchartcore_options=l;var m=function(a){function b(){a.apply(this,arguments),this.headerText="wijchart-header-text",this.headerContainer="wijchart-header-container",this.footerText="wijchart-footer-text",this.footerContainer="wijchart-footer-container",this.legendTitle="wijchart-legend-title",this.legendText="wijchart-legend-text",this.legend="wijchart-legend",this.legendDot="chart-legend-dot",this.legendIcon="wijchart-legend-icon",this.legendContainer="wijchart-legend-container",this.legendTextCover="wijchart-legend-textCover",this.axis="wijchart-axis",this.axisText="wijchart-axis-text",this.axisGridLine="wijchart-axis-gridline",this.axisTick="wijchart-axis-tick",this.axisLabel="wijchart-axis-label",this.labelText="wijchart-label-text",this.labelConnect="wijchart-label-connect",this.canvasObject="wijchart-canvas-object",this.stateDisabled="ui-state-disabled",this.trendlineElement="trendlineElement",this.trendlineTracker="trendlinetracker"}return __extends(b,a),b}(a.wijmo_css);b.wijchartcore_css=m,k.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new l)}(a.chart||(a.chart={}));a.chart}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){var c=function(a){function c(){a.apply(this,arguments)}return __extends(c,a),c.prototype._create=function(){var b,c=this,d=c.options,e=c._getDefFill();d.horizontal&&(b=d.axis.y.compass||"south",d.axis.y.compass=d.axis.x.compass||"west",d.axis.x.compass=b),$.extend(!0,{"compass":"east"},d.hint),c._handleChartStyles(),e=null,a.prototype._create.call(this),c.chartElement.addClass(d.wijCSS.barChart)},c.prototype._setOption=function(b,c){if("horizontal"===b){var d=this.options.axis;d.x.compass=c?"west":"south",d.y.compass=c?"south":"west"}a.prototype._setOption.call(this,b,c)},c.prototype.destroy=function(){var b=this,c=b.options,d=b.chartElement,e=d.data("fields"),f=e&&e.bars;d.removeClass(c.wijCSS.barChart),a.prototype.destroy.call(this),f&&f.length&&$.each(f,function(a,b){b=null}),d.data("fields",null)},c.prototype._clearChartElement=function(){var b=this,c=b.options,d=b.chartElement.data("fields");a.prototype._clearChartElement.call(this),b.element.removeData("plotInfos"),c.seriesTransition.enabled||d&&d.aniBarsAttr&&(d.aniBarsAttr=null)},c.prototype._isBarChart=function(){return!0},c.prototype.getBar=function(a){var b=this.chartElement,c=b.data("fields");return c.chartElements.bars[a]},c.prototype._paintTooltip=function(){var b=this,c=b.chartElement,d=c.data("fields");a.prototype._paintTooltip.call(this),b.tooltip&&d&&d.trackers&&d.trackers.length&&(b.tooltip.setTargets(d.trackers),b.tooltip.setOptions({"relatedElement":d.trackers[0]}))},c.prototype._getTooltipText=function(a,b){var c,d,e=$(b.node);return e.data("owner")&&(e=e.data("owner")),c=e.data("wijchartDataObj"),d={"data":c,"value":c.value,"label":c.label,"total":c.total,"target":b,"fmt":a,"x":c.x,"y":c.y},$.proxy(a,d)()},c.prototype._preHandleSeriesData=function(){a.prototype._preHandleSeriesData.call(this);var b=this,c=b.options,d=c.seriesList;$.each(d,function(a,c){var d=c.data;d.y&&$.each(d.y,function(a,c){try{b._isDate(c)||(d.y[a]=parseFloat(c))}catch(e){d.y[a]=1}})})},c.prototype._paintPlotArea=function(){var a=this,b=a.options;this.barchartRender=new g(this.chartElement,{"canvas":a.canvas,"bounds":a.canvasBounds,"tooltip":a.tooltip,"widgetName":a.widgetName,"horizontal":b.horizontal,"stacked":b.stacked,"axis":b.axis,"seriesList":b.seriesList,"seriesStyles":b.seriesStyles,"seriesHoverStyles":b.seriesHoverStyles,"seriesTransition":b.seriesTransition,"showChartLabels":b.showChartLabels,"textStyle":b.textStyle,"chartLabelStyle":b.chartLabelStyle,"chartLabelFormatString":b.chartLabelFormatString,"shadow":b.shadow,"disabled":b.disabled,"clusterOverlap":b.clusterOverlap,"clusterWidth":b.clusterWidth,"clusterSpacing":b.clusterSpacing,"is100Percent":b.is100Percent,"clusterRadius":b.clusterRadius,"animation":b.animation,"culture":a._getCulture(),"isYTime":a.axisInfo.y[0].isTime,"isXTime":a.axisInfo.x.isTime,"mouseDown":$.proxy(a._mouseDown,a),"mouseUp":$.proxy(a._mouseUp,a),"mouseOver":$.proxy(a._mouseOver,a),"mouseOut":$.proxy(a._mouseOut,a),"mouseMove":$.proxy(a._mouseMove,a),"click":$.proxy(a._click,a),"wijCSS":b.wijCSS,"widget":this}),this.barchartRender.render()},c.prototype._showSerieEles=function(a){var c=this.options.stacked;return a.isTrendline?void b.TrendlineRender.showSerieEles(a):($.each(a,function(a,b){b&&b.bar&&(b.bar.show(),b.bar.shadow&&b.bar.shadow.show(),b.bar.tracker&&b.bar.tracker.show(),$(b.bar.node).data("wijchartDataObj")&&($(b.bar.node).data("wijchartDataObj").visible=!0)),b&&b.dcl&&b.dcl.show(),b&&b.animatedBar&&!b.animatedBar.removed&&b.animatedBar.show()}),void(c&&this.stackedSeriesObjs&&this._handleStackedVisible(a.length)))},c.prototype._hideSerieEles=function(a){var c=this.options.stacked;a.length;return a.isTrendline?void b.TrendlineRender.hideSerieEles(a):($.each(a,function(a,b){b&&b.bar&&(b.bar.hide(),b.bar.shadow&&b.bar.shadow.hide(),b.bar.tracker&&b.bar.tracker.hide(),$(b.bar.node).data("wijchartDataObj")&&($(b.bar.node).data("wijchartDataObj").visible=!1)),b&&b.dcl&&b.dcl.hide(),b&&b.animatedBar&&!b.animatedBar.removed&&b.animatedBar.hide()}),void(c&&this.stackedSeriesObjs&&this._handleStackedVisible(a.length)))},c.prototype._handleStackedVisible=function(a){function b(a){return $(a.bar.node).data("wijchartDataObj").visible!==!1}function c(a,b,c){a&&(a.bar&&(a.bar.attr("x",b),a.bar.attr("width",c)),a.bar.shadow&&(a.bar.shadow.attr("x",b),a.bar.shadow.attr("width",c)),a.bar.tracker&&(a.bar.tracker.attr("x",b),a.bar.tracker.attr("width",c)))}function d(a,b,c){a&&(a.bar&&(a.bar.attr("y",b),a.bar.attr("height",c)),a.bar.shadow&&(a.bar.shadow.attr("y",b),a.bar.shadow.attr("height",c)),a.bar.tracker&&(a.bar.tracker.attr("y",b),a.bar.tracker.attr("height",c)))}function e(a){if(a){var b=a.rect.x,c=a.rect.width;a.bar&&(a.bar.attr("x",b),a.bar.attr("width",c)),a.bar.shadow&&(a.bar.shadow.attr("x",b),a.bar.shadow.attr("width",c)),a.bar.tracker&&(a.bar.tracker.attr("x",b),a.bar.tracker.attr("width",c))}}function f(a){if(a){var b=a.rect.y,c=a.rect.height;a.bar&&(a.bar.attr("y",b),a.bar.attr("height",c)),a.bar.shadow&&(a.bar.shadow.attr("y",b),a.bar.shadow.attr("height",c)),a.bar.tracker&&(a.bar.tracker.attr("y",b),a.bar.tracker.attr("height",c))}}var g=this;if(this.stackedSeriesObjs){$.each(this.stackedSeriesObjs,function(a,b){g.options.horizontal?e(b):f(b)});for(var h=[],i=this.stackedSeriesCount,j=0;i>j;j++)h.push(b(this.stackedSeriesObjs[j+"0"]));for(var k=[],l=-1,j=h.length-1;j>=0;j--)h[j]&&(l-j>1&&k.push({"start":l,"end":j+1}),l=j);l>0&&k.push({"start":l,"end":0}),$.each(k,function(b,e){for(var f,h,i,j,k=e.start,l=e.end,m=0;a>m;m++)f=g.stackedSeriesObjs[k+""+m],h=g.stackedSeriesObjs[l+""+m],g.options.horizontal?(i=h.rect.x,j=f.rect.width+f.rect.x-h.rect.x,c(f,i,j)):(i=f.rect.y,j=h.rect.height+h.rect.y-f.rect.y,d(f,i,j))})}},c.prototype._indicatorLineShowing=function(b){a.prototype._indicatorLineShowing.call(this,b),$.each(b,function(a,b){b.bar&&b.bar.attr(b.hoverStyle)})},c.prototype._removeIndicatorStyles=function(a){$.each(a,function(a,b){b.bar&&b.bar.attr(b.style)})},c.prototype._supportStacked=function(){return!0},c.prototype._calculateParameters=function(b,c){if(a.prototype._calculateParameters.call(this,b,c),"x"===b.id){var d=c.unitMinor,e=this._getBarAdjustment(b);0===e?e=d:e>d&&0!==d&&(e=Math.floor(e/d)*d),b.min-=e,b.max+=e,this._calculateMajorMinor(c,b)}},c.prototype._getBarAdjustment=function(a){var b=0,c=this.options,d=a.max,e=a.min,f=c.seriesList,g=0,h=0;for(g=0;g<f.length&&f[g].data.x;g++)h=f[g].data.x.length,h>b&&(b=h);return b>1?(d-e)/b*c.clusterWidth*.0125:1===b?(0===e&&1===d&&(e=-1,a.min=e),.0125*(d-e)):0},c}(b.wijchartcore);b.wijbarchart=c;var d=function(a){function b(){a.apply(this,arguments),this.barChart="wijmo-wijbarchart",this.barLabel="wijbarchart-label",this.barElement="wijbarchart",this.barTracker="bartracker"}return __extends(b,a),b}(b.wijchartcore_css);b.wijbarchart_css=d;var e=function(b){function c(){b.apply(this,arguments),this.initSelector=":jqmData(role='wijbarchart')",this.wijCSS=new a.chart.wijbarchart_css,this.horizontal=!0,this.stacked=!1,this.is100Percent=!1,this.clusterOverlap=0,this.clusterWidth=85,this.clusterRadius=0,this.clusterSpacing=0,this.animation={"enabled":!0,"duration":400,"easing":">"},this.seriesTransition={"enabled":!0,"duration":400,"easing":">"},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(c,b),c}(b.wijchartcore_options);c.prototype.options=$.extend(!0,{},b.wijchartcore.prototype.options,new e),c.prototype.widgetEventPrefix="wijbarchart",$.wijmo.registerWidget("wijbarchart",c.prototype);var f=function(){function a(a){this.x=a,this.paSpec=[]}return a.prototype.stackValues=function(){var a,b=this,c=b.paSpec.length;c>1&&(a=b.paSpec[0],$.each(b.paSpec,function(b,c){return 0===b?!0:(c.y+=a.y,void(a=c))}))},a}(),g=function(){function a(a,b){this.options=b,this.element=a,this._init()}return a.prototype._init=function(){var a=this.options,c=a.horizontal,d=a.axis.x,e=a.bounds;this.startLocation={"x":e.startX,"y":e.startY},this.width=e.endX-this.startLocation.x,this.height=e.endY-this.startLocation.y,this.nSeries=a.seriesList.length,this.seriesList=$.arrayClone(a.seriesList),this.seriesStyles=[].concat(a.seriesStyles.slice(0,this.nSeries)),this.seriesHoverStyles=[].concat(a.seriesHoverStyles.slice(0,this.nSeries)),this.xscale=b.ChartUtil.getScaling(c,d.max,d.min,c?this.height:this.width),this.xlate=b.ChartUtil.getTranslation(c,this.startLocation,d.max,d.min,this.xscale),this.fields=this.element.data("fields")||{},this.chartElements=this.fields.chartElements||{},this.aniBarsAttr=this.fields.aniBarsAttr,this.canvas=a.canvas,this.animationSet=this.canvas.set(),this.fieldsAniPathAttr=[],this.paths=[],this.aniPathsAttr=[]},a.prototype._paintShadow=function(a,c,d){this.options.shadow&&b.ChartUtil.paintShadow(a,c,d)},a.prototype.getMinDX=function(a){var b,c,d=Number.MAX_VALUE,e=a.length;for(1==e&&(d=Math.min(a[0].x-this.options.axis.x.min,this.options.axis.x.max-a[0].x)),b=1;e>b;b++)c=a[b].x-a[b-1].x,d>c&&c>0&&(d=c);return d===Number.MAX_VALUE?2:d},a.prototype.stackValues=function(a){return $.each(a,function(a,b){b.stackValues()}),a},a.prototype.barPointList=function(a,c,d,e){function g(a,b){var c=k(b),d=(b.length,null),e=0,g=0,i=0,j=!0,l=0,m=!1;c&&(e=c.length),h&&(i=h.length),void 0!==c&&$.each(c,function(b,c){for(j?(j=!1,l=c.x):(m=l===c.x?!0:!1,l=c.x);i>g&&h[g].x<c.x;)g++;i>g?h[g].x!==c.x?(d=new f(c.x),h.splice(g,0,d),i=h.length):d=h[g]:(d=new f(c.x),h.push(d),i=h.length),d.paSpec.push({"y":c.y,"sIdx":a,"pIdx":b,"dupl":m})})}var h=[],i=[],j=this,k=(j.options.canvas.set(),b.ChartUtil.getXSortedPoints);return $.each(a,function(a,f){var h;f.isTrendline?(h=[],b.TrendlineRender.renderSingleTrendLine(f,j.seriesStyles[a],j.seriesHoverStyles[a],j.options.axis,null,j.fieldsAniPathAttr,j.options.animation,j.options.seriesTransition,a,j.options.bounds,j.canvas,j.paths,i,j.animationSet,j.aniPathsAttr,j.options.wijCSS,h,e),h.length&&(c[a]=h[0],d.push(h[0].path))):g(a,f)}),h},a.prototype.adjustToLimits=function(a,b,c){return b>a?b:a>c?c:a},a.prototype.transformPoints=function(a,b,c,d,e,f){return $.each(f,function(f,g){var h=g.x,i=g.y,j=0;g.x=b*h+d,g.y=c*i+e,a&&(j=g.x,g.x=g.y,g.y=j)}),f},a.prototype.paintDefaultChartLabel=function(a,b,c,d){var e,f,g=this.options,h=g.horizontal,i=(g.canvas,g.wijCSS),j=g.culture,k=$.extend(!0,{},g.textStyle,g.chartLabelStyle),l=h?{"x":a.x+a.width,"y":a.y+a.height/2}:{"x":a.x+a.width/2,"y":a.y},m=g.chartLabelFormatString,n=this.options.widget,o=b;return d&&(k=$.extend(!0,k,d)),c&&(o=$.fromOADate(b)),m&&m.length?o=Globalize.format(o,g.chartLabelFormatString,j):c||(o=$.round(o,2)),f=n._text.call(n,l.x,l.y,o).attr(k),$.wijraphael.addClass($(f.node),i.barLabel),e=f.getBBox(),h?f.attr({"x":l.x+e.width/2}):f.attr({"y":l.y-e.height/2}),f},a.prototype.paintBar=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q,r,s,t,u,v,w,x,y=this.options,z=y.stacked,A=y.horizontal,B=y.is100Percent,C=d.min,D=d.max,E=e.min,F=e.max,G=d.scale,H=d.late,I=e.scale,J=e.late,K=null,L=f,M=f["stroke-width"],N=f.stroke,O=-1;return null!==o.origin&&(O=I*o.origin+J),z?B?(l>0&&(a.height=b/l),(k||0===k)&&(a.y=k/l,a.height-=a.y)):(a.height=b,(k||0===k)&&(a.height-=k,a.y=k)):(k||0===k)&&(a.x+=a.width*(1-j),a.height=b),q=[{"x":a.x,"y":a.y},{"x":a.x+a.width,"y":a.y+a.height}],r=(C<=q[0].x&&q[0].x<=D||C<=q[1].x&&q[1].x<=D)&&(E<=q[0].y&&q[0].y<=F||E<=q[1].y&&q[1].y<=F),q[0].x=this.adjustToLimits(q[0].x,C,D),q[0].y=this.adjustToLimits(q[0].y,E,F),q[1].x=this.adjustToLimits(q[1].x,C,D),q[1].y=this.adjustToLimits(q[1].y,E,F),q=this.transformPoints(A,G,I,H,J,q),q[0].x>q[1].x&&(p=q[0].x,q[0].x=q[1].x,q[1].x=p),q[0].y>q[1].y&&(p=q[0].y,q[0].y=q[1].y,q[1].y=p),s={"x":q[0].x,"y":q[0].y,"width":q[1].x-q[0].x,"height":q[1].y-q[0].y},r&&!z&&(0===s.width&&(s.width=1),0===s.height&&(s.height=1,s.y-=1)),y.showChartLabels&&(K=this.paintDefaultChartLabel(s,b,m,n)),t=f.r?f.r:y.clusterRadius,t&&(L=$.extend(!0,{},f,{"r":0})),"none"!==N&&M&&(M=parseInt(M,10)),(!M||isNaN(M))&&(M=0),v=s.width,w=s.height,M>1&&(M--,v=s.width-M,w=s.height-M/2,s.x+=M/2),0>v&&(v=0),0>w&&(w=0),g?(-1===O&&(O=A?i.x+M/2:i.y+c-M/2),t?(A?(u=b>o.origin?this.canvas.roundRect(s.x,s.y,v,w,0,0,t,t).hide():this.canvas.roundRect(s.x,s.y,v,w,t,t,0,0).hide(),x=this.canvas.rect(O,s.y,s.width,s.height)):(u=b>o.origin?this.canvas.roundRect(s.x,s.y,v,w,t,0,0,t).hide():this.canvas.roundRect(s.x,s.y,v,w,0,t,t,0).hide(),x=this.canvas.rect(s.x,O,s.width,s.height)),this._paintShadow(x,h),x.wijAttr(L),x.bar=u):(u=A?this.canvas.rect(O,s.y,s.width,w):this.canvas.rect(s.x,O,v,s.height),x=u),K&&(K.attr({"opacity":0}),x.chartLabel=K),x.left=s.x,x.top=s.y,x.width=v,x.height=w,x.r=t):u=t?A?b>o.origin?this.canvas.roundRect(s.x,s.y,v,w,0,0,t,t):this.canvas.roundRect(s.x,s.y,v,w,t,t,0,0):b>o.origin?this.canvas.roundRect(s.x,s.y,v,w,t,0,0,t):this.canvas.roundRect(s.x,s.y,v,w,0,t,t,0):this.canvas.rect(s.x,s.y,v,w),this._paintShadow(u,h),g&&t&&u.shadow&&u.shadow.hide(),u.wijAttr(f),{"rect":s,"dcl":K,"animatedBar":x,"bar":u}},a.prototype.paintClusters=function(a,c,d,e,f,g,h,i,j,k){var l,m,n,o,p=this,q=p.options,r=q.clusterOverlap/100,s=q.clusterWidth/100,t=1,u=q.clusterSpacing+t,v=a.length,w=q.canvas,x=q.stacked,y=q.horizontal,z=q.axis.y,A=q.widget,B=q.wijCSS,C=q.animation&&q.animation.enabled,D=[],E=[],F=[],G=[],H=[],I=[],J=w.set(),K=[],L=0;return j||k?($.each(a,function(a,b){var c=$.extend(!0,{},b);c.data&&c.data.y&&c.data.y.length&&j&&$.each(c.data.y,function(a,b){c.data.y[a]=$.toOADate(b)}),c.data&&c.data.x&&c.data.x.length&&k&&$.each(c.data.x,function(a,b){c.data.x[a]=$.toOADate(b)}),H.push(c)}),l=p.barPointList(H,I,K,y)):l=p.barPointList(a,I,K,y),x&&(l=p.stackValues(l)),m=p.getMinDX(l)*s,$.each(c,function(a,b){b["stroke-width"]&&!isNaN(b["stroke-width"])&&(L=0!==L?Math.min(parseFloat(b["stroke-width"]),L):parseFloat(b["stroke-width"]))}),v-=K.length,v>1&&!x&&(r-=l.length*(v-1)*(u+2*L)/(y?h:g),m/=v*(1-r)+r),$.each(l,function(k,l){var s,u,v,w,H=l.paSpec,K=H.length;s=x?m:m*(K*(1-r)+r),u={"x":l.x-s/2,"y":0,"width":m,"height":H[0].y},$.each(H,function(k,l){if(void 0===u.height)return!0;var m,s=l.sIdx,x=l.pIdx,K=c[s],L=a[s],M=L.yAxis||0,N=z[M]||z,O=f[M]||f;G[s]||(G[s]=[]),I[s]||(I[s]=[]),p.yscale=b.ChartUtil.getScaling(!y,N.max,N.min,y?g:h),p.ylate=b.ChartUtil.getTranslation(!y,i,N.max,N.min,p.yscale),O.late=p.ylate,O.scale=p.yscale,w=p.paintBar(u,l.y,h,e,O,K,C,t,i,r,k>0?H[k-1].y:null,H[H.length-1].y,j,L.textStyle,N),v=w.bar,m=v.clone().attr({"opacity":.01,"fill":"white","stroke-width":0,"fill-opacity":.01}),L.visible===!1&&(v.hide(),w.dcl&&w.dcl.hide(),m.hide(),v.shadow&&v.shadow.hide()),$.wijraphael.addClass($(v.node),B.canvasObject+" "+B.barElement),o=$.extend(!1,{"index":x,"bar":v,"type":"bar","style":K,"hoverStyle":d[s],"x":L.data.x[x],"y":L.data.y[x],"visible":!0},L),$(v.node).data("wijchartDataObj",o),A.dataPoints=A.dataPoints||{},A.pointXs=A.pointXs||[],n=q.horizontal?$.round(w.rect.y+w.rect.height/2,2):$.round(w.rect.x+w.rect.width/2,2),A.dataPoints[n.toString()]||(A.dataPoints[n.toString()]=[],A.pointXs.push(n)),A.dataPoints[n.toString()].push(o),$(m.node).data("owner",$(v.node)),$.wijraphael.addClass($(m.node),B.barElement+" "+B.barTracker),w.bar.tracker=m,J.push(m),E.push(v),w.animatedBar&&F.push(w.animatedBar),w.dcl&&D.push(w.dcl),G[s][x]=w.rect,I[s][x]=w,v=null,m=null})}),$.each(D,function(a,b){b.toFront()}),J.toFront(),{"bars":E,"animatedBars":F,"rects":G,"chartLabels":D,"seriesEles":I,"trackers":J,"trendLines":K}},a.prototype.processStackedElement=function(a){var b={},c=0;$.each(a,function(a,d){return $.isArray(d)?d.isTrendline?!0:($.each(d,function(a,d){d.sIndex=c,d.stackIndex=a,b[c+""+a]=d}),void(c+=1)):!0}),this.options.widget.stackedSeriesObjs=b,this.options.widget.stackedSeriesCount=c},a.prototype.playAnimation=function(a){var c,d,e,f=this,g=f.options,h=g.animation,i=h&&h.enabled,j=g.horizontal,k=f.fields.trendLines,l=g.seriesTransition,m=[],n=g.chartLabelStyle,o={"txx":g.widget.extremeValue.txx,"txn":g.widget.extremeValue.txn,"tyx":g.widget.extremeValue.y[0].tyx,"tyn":g.widget.extremeValue.y[0].tyn};i&&(c=h.duration||2e3,d=h.easing||"linear",a&&$.each(a,function(a,g){var h;j?(g.wijAttr({"width":0}),h={"width":g.width,"x":g.left}):(g.wijAttr({"height":0}),h={"height":g.height,"y":g.top}),f.aniBarsAttr&&l.enabled&&f.aniBarsAttr.length>a&&(e=b.ChartUtil.getDiffAttrs(f.aniBarsAttr[a],g.attr()),j?(e.x=f.aniBarsAttr[a].x,e.width=f.aniBarsAttr[a].width):(e.y=f.aniBarsAttr[a].y,e.height=f.aniBarsAttr[a].height),e.path&&delete e.path,g.attr(e),c=l.duration,d=l.easing),m.push($.extend(!0,{},g.attr(),h)),g.tracker&&g.tracker.hide(),g.stop().wijAnimate(h,c,d,function(){var a=this,b=a.r,c=a;a.chartLabel&&(n&&n.opacity?a.chartLabel.wijAnimate({"opacity":n.opacity},250):a.chartLabel.wijAnimate({"opacity":1},250)),a.tracker&&(a.tracker.show(),a.tracker.attr({"width":a.width,"height":a.height,"x":a.attr("x"),"y":a.attr("y")})),b&&(c=a.bar,c.show(),c.shadow&&c.shadow.show(),a.shadow&&(a.shadow.wijRemove(),a.shadow=null),a.wijRemove(),a=null)})}),k&&k.length&&b.TrendlineRender.playAnimation(c,d,l,f.animationSet,g.bounds,f.paths,f.fieldsAniPathAttr,null,g.axis,o),f.aniBarsAttr=m)},a.prototype.bindLiveEvents=function(){var a=this.options,c=a.wijCSS,d=a.widgetName,e=a.disabled,f=a.mouseDown,g=a.mouseUp,h=a.mouseOver,i=a.mouseOut,j=a.mouseMove,k=a.click,l=this.element,m=$.isFunction,n="";$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(n="wij"),$("."+c.barElement,l[0]).on(n+"mousedown."+d,function(a){if(!e&&m(f)){var b,c=$(a.target);c.data("owner")&&(c=c.data("owner")),b=c.data("wijchartDataObj"),f.call(l,a,b),b=null}}).on(n+"mouseup."+d,function(a){
if(!e&&m(g)){var b,c=$(a.target);c.data("owner")&&(c=c.data("owner")),b=c.data("wijchartDataObj"),g.call(l,a,b),b=null}}).on(n+"mouseover."+d,function(a){if(!e&&m(h)){var b,c,d=$(a.target);d.data("owner")&&(d=d.data("owner")),b=d.data("wijchartDataObj"),c=b.bar,b.hoverStyle?(b.initTransform=c.matrix.toTransformString(),c.wijAttr(b.hoverStyle)):c&&c.wijAttr({"opacity":"0.8"}),h.call(l,a,b),b=null}}).on(n+"mouseout."+d,function(a){if(!e){var b,c,d=$(a.target);d.data("owner")&&(d=d.data("owner")),b=d.data("wijchartDataObj"),c=b.bar,b.hoverStyle?(c.transform(""),c.shadow&&c.shadow.transform(""),c.wijAttr(b.style)):c&&c.wijAttr({"opacity":"1"}),m(i)&&i.call(l,a,b),b=null}}).on(n+"mousemove."+d,function(a){if(!e){var b,c,d=$(a.target);d.data("owner")&&(d=d.data("owner")),b=d.data("wijchartDataObj"),c=b.bar,m(j)&&j.call(l,a,b),b=null}}).on(n+"click."+d,function(a){if(!e){if(m(k)){var b,c=$(a.target);c.data("owner")&&(c=c.data("owner")),b=c.data("wijchartDataObj"),k.call(l,a,b)}return $.support.isTouchEnabled&&$.support.isTouchEnabled()?(a.preventDefault(),a.stopPropagation(),!1):void 0}}),b.TrendlineRender.bindLiveEvents(l,d,f,g,h,i,j,k,e,c,!1)},a.prototype.unbindLiveEvents=function(){var a=this.options,c=a.widgetName,d=a.wijCSS,e=this.element;$("."+d.barElement,e[0]).off(c).off("."+c),b.TrendlineRender.unbindLiveEvents(e,c,d)},a.prototype.render=function(){var a,b=this.options,c=b.horizontal,d=b.stacked,e=this.seriesList,f=this.seriesStyles,g=this.seriesHoverStyles,h=b.axis.x,i=b.axis.y,j=b.isYTime,k=b.isXTime;this.unbindLiveEvents(),c&&!d&&(e.reverse(),f.reverse(),g.reverse()),0!==this.nSeries&&(a=this.paintClusters(e,f,g,{"min":h.min,"max":h.max,"late":this.xlate,"scale":this.xscale},i,this.width,this.height,this.startLocation,j,k),this.element.data("plotInfos",{"xscale":this.xscale,"xlate":this.xlate,"yscale":this.yscale,"ylate":this.ylate,"rects":a.rects}),this.fields.trendLines=a.trendLines,this.playAnimation(a.animatedBars),this.chartElements.bars=a.bars,this.chartElements.animatedBars=a.animatedBars,this.chartElements.chartLabels=a.chartLabels,this.fields.seriesEles=a.seriesEles,this.fields.trackers=a.trackers,this.fields.chartElements||(this.fields.chartElements={}),c&&!d&&this.fields.seriesEles.reverse(),d&&this.processStackedElement(this.fields.seriesEles),$.extend(!0,this.fields.chartElements,this.chartElements),this.fields.aniBarsAttr=this.aniBarsAttr,this.element.data("fields",this.fields),this.bindLiveEvents())},a}();b.BarChartRender=g}(a.chart||(a.chart={}));a.chart}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){var c=function(a){function c(){a.apply(this,arguments)}return __extends(c,a),c.prototype._create=function(){var b=this.options;this._handleChartStyles(),a.prototype._create.call(this),this.chartElement.addClass(b.wijCSS.lineChart),"area"===b.type&&this.chartElement.addClass(b.wijCSS.areaChart)},c.prototype.destroy=function(){var b=this.options;this.chartElement.removeClass(b.wijCSS.lineChart),"area"===b.type&&this.chartElement.removeClass(b.wijCSS.areaChart),a.prototype.destroy.call(this),this.aniPathsAttr&&this.aniPathsAttr.length&&($.each(this.aniPathsAttr,function(a,b){b=null}),this.aniPathsAttr=null)},c.prototype.getLinePath=function(a){var b,c,d=this.chartElement.data("fields");return d&&d.chartElements&&(b=d.chartElements,b.paths&&b.paths.length)?b.paths[a]:c},c.prototype.getLineMarkers=function(a){var b,c,d=this.options,e=this.chartElement.data("fields");return d.seriesList&&d.seriesList[a].markers&&d.seriesList[a].markers.visible&&e&&e.chartElements&&(b=e.chartElements,b.markersSet&&b.markersSet.length)?b.markersSet[a]:c},c.prototype._showSerieEles=function(a){var b,c=this.options;a.markers&&$.each(a.markers,function(a,b){var c=$(b.node).data("wijchartDataObj");return c&&c.lineSeries&&c.lineSeries.markers&&!c.lineSeries.markers.visible?!0:void b.show()}),a.dcl&&$.each(a.dcl,function(a,b){c.showChartLabels&&b.show()}),a.path&&(b=$(a.path.node).data("wijchartDataObj"),!b.visible&&b.markers&&b.markers.visible||(a.path.show(),a.path.shadow&&a.path.shadow.show(),a.path.area&&a.path.area.show(),a.path.tracker&&a.path.tracker.show()),$(a.path.node).data("wijchartDataObj")&&$(a.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(a.path.node).data("wijchartDataObj").virtualMarkers,function(a,b){b.visible=!0}))},c.prototype._hideSerieEles=function(a){a.markers&&$.each(a.markers,function(a,b){b.hide()}),a.dcl&&$.each(a.dcl,function(a,b){b.hide()}),a.path&&(a.path.hide(),a.path.shadow&&a.path.shadow.hide(),a.path.area&&a.path.area.hide(),a.path.tracker&&a.path.tracker.hide(),$(a.path.node).data("wijchartDataObj")&&$(a.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(a.path.node).data("wijchartDataObj").virtualMarkers,function(a,b){b.visible=!1}))},c.prototype._supportStacked=function(){return!0},c.prototype._indicatorLineShowing=function(b){a.prototype._indicatorLineShowing.call(this,b),$.each(b,function(a,b){b.marker&&b.marker.attr(b.markerHoverStyle)})},c.prototype._removeIndicatorStyles=function(a){$.each(a,function(a,b){b.marker&&(b.marker.attr(b.markerStyle),b.marker.transform("s1"))})},c.prototype._mouseDownInsidePlotArea=function(b,c){a.prototype._mouseDownInsidePlotArea.call(this,b,c),this._clearHoverState(!0)},c.prototype._mouseDown=function(b,c){a.prototype._mouseDown.call(this,b,c)},c.prototype._mouseUp=function(b,c){a.prototype._mouseUp.call(this,b,c)},c.prototype._mouseOver=function(c,d){!d||"line"!==d.type&&"marker"!==d.type&&d.type!==b.ChartConsts.strTrendline||this.indicatorLine||(a.prototype._mouseOver.call(this,c,d),"marker"===d.type&&(d=d.lineSeries),d.path.removed||(this.hoverLine!==d||null===this.hoverLine)&&(this.isNewLine=!0,this.hoverLine&&(this.hoverLine.path.removed||("line"!==this.options.type&&d.type!==b.ChartConsts.strTrendline||!this.hoverLine.lineStyle.fill||delete this.hoverLine.lineStyle.fill,this.hoverLine.path.wijAttr(this.hoverLine.lineStyle),this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1")))),d.lineHoverStyle&&d.path.wijAttr(d.lineHoverStyle),this.hoverLine=d,this.hoverPoint=null,this.hoverVirtualPoint=null))},c.prototype._mouseOut=function(b,c){a.prototype._mouseOut.call(this,b,c)},c.prototype._mouseMove=function(b,c){a.prototype._mouseMove.call(this,b,c)},c.prototype._click=function(b,c){a.prototype._click.call(this,b,c)},c.prototype._mouseMoveInsidePlotArea=function(c,d){var e,f,g,h,i,j,k=this,l=this.tooltip,m=this.options.hint,n=0,o=null,p=null,q=null,r=m.title,s=m.content,t=$.isFunction(r),u=$.isFunction(s),v=0;if(l&&(q=l.getOptions()),this.hoverLine&&!this.indicatorLine&&(this.isNewLine&&(m.enable&&l&&l.hide(),this.isNewLine=!1),this.hoverLine.type!==b.ChartConsts.strTrendline)){if(e=this.hoverLine.lineMarkers,f=this.hoverLine.virtualMarkers,n=-1,g={"x":0,"y":0},e&&e.length){if($.each(e,function(a,b){if(b.removed)return!0;var c=b.wijGetBBox(),e=c.x+c.width/2,f=Math.abs(e-d.left);(0===a||v>f)&&(v=f,n=a,g={"x":e,"y":c.y+c.height/2})}),this.hoverPoint&&this.hoverPoint.index===n)return;if(n>-1){if(e[n].removed)return;h=$(e[n].node).data("wijchartDataObj"),h&&(this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.removed||(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1"))),h.isSymbol||h.marker.removed||h.marker.wijAttr(h.markerHoverStyle)),this.hoverPoint=h,this.hoverVirtualPoint=f[n]}}else{if($.each(f,function(a,b){var c=Math.abs(b.x-d.left);(0===a||v>c)&&(v=c,n=a,g={"x":b.x,"y":b.y})}),this.hoverVirtualPoint&&this.hoverVirtualPoint.index===n)return;n>-1&&(this.hoverPoint=null,this.hoverVirtualPoint=f[n])}l&&(p=this.hoverVirtualPoint,i=p.valX,j=p.valY,(t||u)&&(t&&(q.title=function(){var a={"pointIndex":n,"lineIndex":k.hoverLine.index,"x":i,"y":j,"label":k.hoverLine.label,"data":p,"fmt":r},b=$.proxy(a.fmt,a),c=b();return c}),u&&(q.content=function(){var a={"pointIndex":n,"lineIndex":k.hoverLine.index,"x":i,"y":j,"label":k.hoverLine.label,"data":p,"fmt":s},b=$.proxy(a.fmt,a),c=b();return c})),o=$.extend({"stroke":this.hoverLine.path.attr("stroke")},m.style),q.style.stroke=o.stroke,l.showAt(g))}a.prototype._mouseMoveInsidePlotArea.call(this,c,d)},c.prototype._mouseMoveOutsidePlotArea=function(b,c){this._clearHoverState(!1),a.prototype._mouseMoveOutsidePlotArea.call(this,b,c)},c.prototype._clearHoverState=function(a){var c=this.tooltip,d=this.options.hint;d.enable&&c&&!a&&c.hide(),this.hoverLine&&(this.hoverLine.path.removed||("line"!==this.options.type&&this.hoverLine.type!==b.ChartConsts.strTrendline||!this.hoverLine.lineStyle.fill||delete this.hoverLine.lineStyle.fill,this.hoverLine.path.wijAttr(this.hoverLine.lineStyle),this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1")))),this.hoverLine=null,this.hoverPoint=null,this.hoverVirtualPoint=null},c.prototype._paintLegendIcon=function(b,c,d,e,f,g,h,i,j,k){var l,m,n,o=this;if(j.isTrendline)return a.prototype._paintLegendIcon.call(this,b,c,d,e,f,g,h,i,j,k);if(l=this.options,m=o.canvas.path(Raphael.format("M{0},{1}L{2},{3}",b,c+e/2,b+d,c+e/2)),$(m.node).data("legendIndex",g).data("index",h),o.legendIcons.push(m),f){var p=l.legend.size.height;m.attr($.extend(!0,{},f,{"stroke-width":p}))}$.wijraphael.addClass($(m.node),i);var q=j.markerStyle;if(q=$.extend({"fill":f.stroke,"stroke":f.stroke,"opacity":1},q),f["stroke-dasharray"]&&m.attr({"stroke-width":1,"stroke-dasharray":f["stroke-dasharray"]}),j.markers&&j.markers.visible){var r=j.markers.type;r||(r="circle"),n=this.canvas.paintMarker(r,b+d/2,c+e/2,3),$.wijraphael.addClass($(n.node),Raphael.format("{0} {1} {2}",l.wijCSS.legend,l.wijCSS.legendDot,l.wijCSS.canvasObject)),n.attr(q),$(n.node).data("index",h).data("legendIndex",g),this.legendDots.push(n)}return m},c.prototype._paintLegend=function(){var b=this.options;b.seriesList,b.seriesStyles;$.extend(!0,b,{"legend":{"size":{"width":30,"height":3}}}),a.prototype._paintLegend.call(this)},c.prototype._paintPlotArea=function(){var a=this.options;this.aniPathsAttr||(this.aniPathsAttr=[]),this.linechartRender=new f(this.chartElement,{"bounds":this.canvasBounds,"widgetName":this.widgetName,"canvas":this.canvas,"tooltip":this.tooltip,"wijCSS":a.wijCSS,"stacked":a.stacked,"hole":a.hole,"type":a.type,"axis":a.axis,"animation":a.animation,"seriesTransition":a.seriesTransition,"seriesList":a.seriesList,"seriesStyles":a.seriesStyles,"seriesHoverStyles":a.seriesHoverStyles,"showChartLabels":a.showChartLabels,"chartLabelStyle":a.chartLabelStyle,"chartLabelFormatString":a.chartLabelFormatString,"isXTime":this.axisInfo.x.isTime,"isYTime":this.axisInfo.y[0].isTime,"disabled":a.disabled,"culture":this._getCulture(),"hint":a.hint,"aniPathsAttr":this.aniPathsAttr,"chartLabelEles":this.chartLabelEles,"mouseDown":$.proxy(this._mouseDown,this),"mouseUp":$.proxy(this._mouseUp,this),"mouseOver":$.proxy(this._mouseOver,this),"mouseOut":$.proxy(this._mouseOut,this),"mouseMove":$.proxy(this._mouseMove,this),"click":$.proxy(this._click,this),"widget":this,"extremeValue":{"txx":this.extremeValue.txx,"txn":this.extremeValue.txn,"tyx":this.extremeValue.y[0].tyx,"tyn":this.extremeValue.y[0].tyn}}),this.linechartRender.render()},c.prototype._clearChartElement=function(){a.prototype._clearChartElement.call(this),this.hoverLine=null,this.hoverPoint=null,this.hoverVirtualPoint=null},c}(b.wijchartcore);b.wijlinechart=c;var d=function(a){function b(){a.apply(this,arguments),this.lineChart="wijmo-wijlinechart",this.areaChart="wijmo-wijareachart",this.lineLabel="wijlinechart-label",this.lineElement="wijlinechart",this.areaElement="wijlinechart-area",this.lineTracker="linetracker",this.canvasMarker="wijchart-canvas-marker"}return __extends(b,a),b}(b.wijchartcore_css);b.wijlinechart_css=d;var e=function(b){function c(){b.apply(this,arguments),this.initSelector=":jqmData(role='wijlinechart')",this.wijCSS=new a.chart.wijlinechart_css,this.stacked=!1,this.hole=null,this.type="line",this.animation={"enabled":!0,"direction":"horizontal","duration":2e3,"easing":"easeInCubic"},this.seriesTransition={"enabled":!0,"duration":2e3,"easing":"easeInCubic"},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(c,b),c}(b.wijchartcore_options);c.prototype.options=$.extend(!0,{},b.wijchartcore.prototype.options,new e),$.wijmo.registerWidget("wijlinechart",c.prototype);var f=function(){function a(a,b){this.options=b,this.element=a}return a.prototype.render=function(){var a,b=this.element,c=this.options,d=c.wijCSS,e=c.bounds,f=c.widgetName,g=c.canvas,h=c.animation,i=c.seriesTransition,j=c.hint,k=c.tooltip,l=c.mouseDown,m=c.mouseUp,n=c.mouseOver,o=c.mouseOut,p=c.mouseMove,q=c.click,r=[],s=[],t=[],u=[],v=[],w=c.disabled,x=g.set(),y=c.aniPathsAttr,z=[],A=b.data("fields")||{},B=[],C=c.culture,D=c.widget,E=c.extremeValue,F={"enable":!1,"left":-10,"top":-10,"right":10,"bottom":10};this.widget=D,this.renderLineChart(c,z,y,u,v,r,x,s,t,B,C),!c.axis.x.autoMax&&c.axis.x.max<E.txx&&(F.enable=!0,F.right=0),!c.axis.x.autoMin&&c.axis.x.min>E.txn&&(F.enable=!0,F.left=0),!c.axis.y.autoMax&&c.axis.y.max<E.tyx&&(F.enable=!0,F.top=0),!c.axis.y.autoMin&&c.axis.y.min>E.tyn&&(F.enable=!0,F.bottom=0),h.enabled||i.enabled?this.playAnimation(h,i,x,e,u,y,F):F.enable&&this.setClipRect(F,x,e),y.length=0,$.each(z,function(a,b){y.push(b)}),this.unbindLiveEvents(b,f,d),this.bindLiveEvents(b,g,e,f,l,m,n,o,p,q,w,j,t,k,d),a={"paths":u,"shadowPaths":v,"markersSet":r,"animationSet":x,"symbols":s},A.chartElements||(A.chartElements={}),A.seriesEles=B,$.extend(!0,A.chartElements,a),b.data("fields",A)},a.prototype.setClipRect=function(a,b,c){var d=c.endX-c.startX-a.left+a.right,e=c.endY-c.startY-a.top+a.bottom;b.wijAttr("clip-rect",Raphael.format("{0} {1} {2} {3}",c.startX+a.left,c.startY+a.top,d,e))},a.prototype.playAnimation=function(a,b,c,d,e,f,g){var h=this,i=a.duration,j=a.easing;"horizontal"===a.direction?(f&&f.length&&b.enabled&&(i=b.duration,j=b.easing),this.playHAnimation(i,j,c,d,e,g)):(g.enable&&this.setClipRect(g,c,d),$.each(e,function(a,c){return"undefined"==typeof c||null===c?!0:void(f&&f.length>a&&b.enabled?(i=b.duration,j=b.easing,h.playVAnimation(c,f,a,i,j)):c.straight&&h.playVStraightAnimation(c,i,j))}))},a.prototype.playVAnimation=function(a,c,d,e,f){var g,h;a.shadow&&a.shadow.hide(),a.tracker&&a.tracker.hide(),g=c[d],g&&g.path&&(h=b.ChartUtil.getDiffAttrs(g.path,a.attr())),$.isEmptyObject(h)||(a.attr(g.path),a.wijAnimate(h,e,f,function(){a.shadow&&a.visible!==!1&&a.shadow.show(),a.tracker&&a.visible!==!1&&a.tracker.show()})),$.each(a.markers,function(a,c){var d=b.ChartUtil.getDiffAttrs(g.markers[a],c.attr());$.isEmptyObject(d)||(c.attr(g.markers[a]),c.wijAnimate(d,e,f))}),a.labels&&$.each(a.labels,function(a,c){var d=b.ChartUtil.getDiffAttrs(g.labels[a],c.attr()),h=g.labels[a];h&&h.text&&delete h.text,$.isEmptyObject(d)||(c.attr(h),c.wijAnimate(d,e,f))}),a.area&&(h=b.ChartUtil.getDiffAttrs(g.area,a.area.attr()),$.isEmptyObject(h)||(a.area.attr(g.area),a.area.wijAnimate(h,e,f)))},a.prototype.playVStraightAnimation=function(a,b,c){var d,e,f;a.shadow&&a.shadow.hide(),a.tracker&&a.tracker.hide(),d=a.straight,e=a.attr().path,a.attr({"path":d}),a.wijAnimate({"path":e},b,c,function(){a.shadow&&a.visible!==!1&&a.shadow.show(),a.tracker&&a.visible!==!1&&a.tracker.show()}),$.each(a.markers,function(a,d){if(d.straight){var e=d.attr().cy;d.attr({"cy":d.straight}),d.wijAnimate({"cy":e},b,c)}}),a.area&&(f=a.area,d=f.straight,e=f.attr().path,f.attr({"path":d}),f.wijAnimate({"path":e},b,c))},a.prototype.playHAnimation=function(a,b,c,d,e,f){$.each(e,function(a,b){b.tracker&&b.tracker.hide()});var g=f.enable,h=d.endX-d.startX-f.left+f.right,i=d.endY-d.startY-f.top+f.bottom;c.wijAttr("clip-rect",Raphael.format("{0} {1} 0 {2}",d.startX+f.left,d.startY+f.top,i)),c.wijAnimate({"clip-rect":Raphael.format("{0} {1} {2} {3}",d.startX+f.left,d.startY+f.top,h,i)},a,b,function(){if(this.tracker&&this.visible!==!1&&this.tracker.show(),Raphael.vml&&!g){var a=null,b=null,c=this.node;c&&c.clipRect&&(a=this.attrs,delete a["clip-rect"],c.clipRect=null,b=$(c).parent(),b.before(c),b.remove(),this.attr(a),a.src&&a.src.length&&this.attr({"src":a.src}),a.gradient&&a.gradient.length&&"none"===a.fill&&this.attr({"fill":a.gradient}))}})},a.prototype.renderLineChart=function(a,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q,r,s,t,u,v,w,x=this,y=a.wijCSS,z=a.bounds,A=a.canvas,B=a.stacked,C=a.hole,D=a.type,E=a.axis,F=a.animation,G=a.seriesTransition,H=!1,I=a.seriesList,J=a.seriesStyles,K=a.seriesHoverStyles,L=a.showChartLabels,M=a.chartLabelStyle,N=a.chartLabelFormatString,O=a.isXTime,P=a.isYTime,Q=a.chartLabelEles,R=[],S=[];$.each(I,function(a,T){var U,V,W,X,Y,Z,_=[],aa=[],ba=[],ca=[];return"exclude"===T.display?!0:(Z=J[a],W=K[a],T.isTrendline?(b.TrendlineRender.renderSingleTrendLine(T,Z,W,E,C,d,F,G,a,z,A,e,f,h,c,y,k),!0):(T=$.extend(!0,{"display":"show","fitType":"line","markers":{"visible":!1,"type":"circle"},"visible":!0},T),U=T.data,V=$.extend({"stroke":"black","opacity":1,"fill":"none","stroke-linejoin":"round","stroke-linecap":"round"},Z),X=T.markerStyle,X=$.extend({"fill":V.stroke,"stroke":V.stroke,"opacity":1,"width":3},X),Y=$.extend(!0,{},W,{"transform":"s1.5","stroke-width":1},I.markerHoverStyle),q=[].concat(U.x),r=[].concat(U.y),u=A.set(),t=[],p=T.fitType,v=!1,T.markers.symbol&&T.markers.symbol.length&&(v=!0),m=A.set(),(!d||d.length<=a||F.enabled&&!G.enabled)&&(H=!0),H&&r.length>0&&(n=b.ChartUtil.getFirstValidListValue(r),P&&(n=$.toOADate(n)),o=b.ChartUtil.getLastValidListValue(r),P&&(o=$.toOADate(o))),w=x.processYValues(r,T.display,C,B,R),$.each(r,function(a,b){if(s=q[a],O&&(s=$.toOADate(s)),b=r[a],w[a].isHole){if("excludeHole"===T.display)return!0;if(!w[a].isValue)return!0}return P&&(b=$.toOADate(b)),void 0===s?!1:void(t=x.renderPoint(z,A,ba,t,u,_,h,m,aa,Q,N,H,n,o,s,b,U.y[a],E,p,O,P,a,X,Y,T,v,L,i,q,r,w,T.display,B,ca,l,y))}),x.renderPath(A,z,T,e,f,j,W,X,Y,u,g,h,t,c,ba,V,M,_,aa,m,a,D,S,B,ca,y),void k.push({"markers":u,"path":e[e.length-1],"shadowPath":f[f.length-1],"dcl":m})))}),$.each($.merge([],e).reverse(),function(a,b){b.toFront(),b.area&&b.area.toFront()}),$.each(e,function(a,b){b.tracker&&b.tracker.toFront()}),$.each(e,function(a,b){b.markers&&b.markers.toFront()})},a.prototype.renderPath=function(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){var B,C,D,E,F,G,H,I,J,K,L,M,N,O=this.options.axis.y.origin;N=c.endY,this.options.axis&&this.options.axis.y&&null!==O&&void 0!==O&&!isNaN(O)&&(N=this._calculatePoint(O,"y")),B=a.path(n.join(" ")),B.straight=p.join(" "),b.ChartUtil.paintShadow(B,1,"#cccccc"),0===v&&(x.length=0,n.length>1?(G=n[1],H=n[n.length-2]):(G=c.startX,H=c.endX),$.merge(x,["L",G,N,"L",H,N])),I=a.path(n.join(" ")),B.tracker=I,J=q["stroke-width"]?10+parseFloat(q["stroke-width"]):10,I.attr({"stroke-width":J,"stroke":"#C0C0C0","opacity":.01}),$.wijraphael.addClass($(I.node),Raphael.format("{0} {1} {2}",A.canvasObject,A.lineElement,A.lineTracker)),$(I.node).data("owner",$(B.node)),"area"===w?(q.fill&&"none"!==q.fill?(C=q.fill,delete q.fill):C=q.stroke,D=.5,E=1,q["fill-opacity"]&&"none"!==q["fill-opacity"]&&(D=q["fill-opacity"]),q.opacity&&"none"!==q.opacity&&(E=q.opacity),B.wijAttr(q),G=n.length>1?n[1]:c.startX,y?(n.push("V"),n.push(N),n.push("H"),n.push(G),n.push("Z")):(L=Raphael.parsePathString(B.attr("path")),L&&L.length>0&&(n=[],$.each(L,function(a,b){$.each(b,function(a,b){n.push(b)}),"M"===b[0]&&(G=b[1]),a<L.length-1&&"M"===L[a+1][0]&&(n.push("V"),n.push(N),n.push("H"),n.push(G),n.push("Z")),a===L.length-1&&(n.push("V"),n.push(N),n.push("H"),n.push(G),n.push("Z"))}))),F=a.path(n.join(" ")),$.wijraphael.addClass($(F.node),A.areaElement),F.wijAttr({"fill":C,"opacity":E,"fill-opacity":D,"stroke":"none"}),p.push("V"),p.push(N),p.push("H"),p.push(G),p.push("Z"),F.straight=p.join(" "),B.area=F,m.push(F),o.push({"path":$.extend(!0,{},B.attr()),"area":$.extend(!0,{},F.attr()),"markers":s,"labels":t})):(M=$.extend(!0,{},q),M.fill&&delete M.fill,B.wijAttr(M),h.fill&&delete h.fill,o.push({"path":$.extend(!0,{},B.attr()),"markers":s,"labels":t})),B.markers=k,e.push(B),B.shadow&&(f[v]=B.shadow),m.push(B),g[v]={"lineStyle":q,"lineHoverStyle":h,"markerStyle":i,"markerHoverStyle":j},d.markers.visible&&"hide"!==d.display||k.hide(),d.visible&&"hide"!==d.display||(B.hide(),B.tracker&&B.tracker.hide(),B.shadow&&B.shadow.hide(),B.area&&B.area.hide(),B.visible=!1),d.markers.style&&k.attr(d.markers.style),k.toFront(),u.length&&(K=$.extend(!0,{},r),d.textStyle&&(K=$.extend(!0,K,d.textStyle)),u.attr(K),u.toFront(),B.labels=u),l[v]=k,d.index=v,d.type="line",d.path=B,d.lineMarkers=k,d.lineStyle=q,d.lineHoverStyle=h,d.virtualMarkers=z,$.wijraphael.addClass($(B.node),Raphael.format("{0} {1}",A.canvasObject,A.lineElement)),$(B.node).data("wijchartDataObj",d)},a.prototype._calculatePoint=function(a,b){var c,d=this.options.axis,e=$.isArray(d[b])?d[b][0]:d[b],f=this.options.bounds,g=e.min,h=e.max;return"x"===b?(c=(f.endX-f.startX)/(h-g),f.startX+(a-g)*c):(c=(f.endY-f.startY)/(h-g),f.endY-(a-g)*c)},a.prototype.renderPoint=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J){var K,L,M,N,O,P,Q,R,S=(a.endX-a.startX,a.endY-a.startY),T=r.x.min,U=r.y.min,V=r.x.max,W=r.y.max,X=S/(W-U),Y=0,Z=y.markers.visible,_=this.widget;return M=isNaN(o)||"string"==typeof o?v:o,Y=this._calculatePoint(M,"x"),N=this._calculatePoint(p,"y"),E[v].x=Y,E[v].y=N,l&&(O=m+(n-m)/(V-T)*(M-T),O=a.endY-(O-U)*X,c.push(E[v].idx?"L":"M"),c.push(Y),c.push(O)),E[v].isHole?d:(d=this.getPathArrByFitType(d,s,v,D.length,a,C,D,Y,N,t,u,o,p,E,F,G),A&&(Q=this.renderChartLabel(b,u,p,k,Y,N,I,J),j.push(Q),h.push(Q),i.push($.extend(!0,{},Q.attr()))),Z&&(K=this.renderMarker(b,B,z,y.markers,v,Y,N,w,J),L=K.dot,l&&(L.straight=O)),P={},P.valX=C[v],P.valY=q,P.index=v,P.type="marker",P.lineSeries=y,P.x=Y,P.y=N,P.markerStyle=w,P.markerHoverStyle=x,P.visible=!0,Z&&(P.marker=L,P.isSymbol=K.isSymbol,$(L.node).data("wijchartDataObj",P),e.push(L),f.push($.extend(!0,{},L.attr())),g.push(L)),_.dataPoints=_.dataPoints||{},_.pointXs=_.pointXs||[],R=$.round(Y,2),_.dataPoints[R.toString()]||(_.dataPoints[R.toString()]=[],_.pointXs.push(R)),_.dataPoints[R.toString()].push(P),H.push(P),d)},a.prototype.processYValues=function(a,c,d,e,f){var g=[],h=0,i=0;return $.each(a,function(j,k){h||(i=j);var l={"isHole":!1,"isValue":!0,"idx":h,"firstYIdx":i,"x":0,"y":0};h++,b.ChartUtil.isHolefunction(k,d)&&(e?a[j]=0:(l.isHole=!0,"excludeHole"===c?(h--,l.idx=0):(h=0,l.idx=0),b.ChartUtil.isHolefunction(d,void 0)||k!==d?l.isValue=!1:l.isValue=!0)),g.push(l),e&&j<f.length&&(a[j]+=f[j])}),f.length=0,$.merge(f,a),g},a.prototype.renderMarker=function(a,b,c,d,e,f,g,h,i){var j,k,l,m=null,n=!1;return c&&(j=d.symbol,$.each(j,function(c,d){return d.index===e?(m=a.image(d.url,f-d.width/2,g-d.height/2,d.width,d.height),b.push(m),n=!0,!1):void 0})),null===m&&(k=d.type,l=h.width,m=a.paintMarker(k,f,g,l),d.visible&&m.attr(h)),$.wijraphael.addClass($(m.node),Raphael.format("{0} {1} {2}",i.canvasObject,i.lineElement,i.canvasMarker)),{"dot":m,"isSymbol":n}},a.prototype.renderChartLabel=function(a,b,c,d,e,f,g,h){var i,j,k,l=this.options.widget;return i=b?$.fromOADate(c):c,d&&d.length&&(i=Globalize.format(i,d,g)),j=l._text.call(l,e,f,i),$.wijraphael.addClass($(j.node),h.lineLabel),k=j.wijGetBBox(),j.transform(Raphael.format("...T{0},{1}",0,-k.height)),j},a.prototype.getAnchors=function(a,b,c,d,e,f){var g=(c-a)/2,h=(e-c)/2,i=Math.atan((c-a)/Math.abs(d-b)),j=Math.atan((e-c)/Math.abs(d-f)),k=0,l=0,m=0,n=0,o=0;return i=d>b?Math.PI-i:i,j=d>f?Math.PI-j:j,k=Math.PI/2-(i+j)%(2*Math.PI)/2,l=g*Math.sin(k+i),m=g*Math.cos(k+i),n=h*Math.sin(k+j),o=h*Math.cos(k+j),{"x1":c-l,"y1":d+m,"x2":c+n,"y2":d+o}},a.prototype.getPathArrByFitType=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q,r=null,s=0,t=0,u=0,v=0,w=null,x=null,y=n[c],z=!1,A=y.idx,B=c-1,C=c+1;if("excludeHole"!==o||p)d-1>c&&(z=n[C].isHole),c>0&&d-1>c&&(u=n[B].x,s=n[B].y);else if(c>0&&d-1>c){for(C=-1,B=-1,q=c+1;d>q;q++)if(z=!0,!n[q].isHole){C=q,z=!1;break}for(q=c-1;q>=0;q--)if(!n[q].isHole){B=q;break}B>-1&&(u=n[B].x,s=n[B].y)}return p&&(b="line"),"line"===b?a=a.concat([A?"L":"M",h,i]):"spline"===b?A?A&&d-1>c&&!z?(r=g[C],k&&(r=$.toOADate(r)),t=this._calculatePoint(r,"y"),isNaN(l)||"string"==typeof l?v=this._calculatePoint(C,"x"):(w=f[C],j&&(w=$.toOADate(w)),v=this._calculatePoint(w,"x")),x=this.getAnchors(u,s,h,i,v,t),a=a.concat([x.x1,x.y1,h,i,x.x2,x.y2])):a=a.concat([h,i,h,i]):a=c===d-1?a.concat(["M",h,i]):z?a.concat(["M",h,i]):a.concat(["M",h,i,"C",h,i]):"bezier"===b&&(a=A?d-1>c&&n[c+1].isHole&&A%2===1||c===d-1&&A%2===1?a.concat(["Q",h,i,h,i]):A%2===0?a.concat([h,i]):a.concat(["Q",h,i]):a.concat(["M",h,i])),a},a.prototype.bindLiveEvents=function(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q="",r={"element":a,"mousedown":function(b){if(!l){var c,d=$(b.target),e=null;d.data("owner")&&(d=d.data("owner")),c=d.data("wijchartDataObj"),d.hasClass(p.canvasMarker)?(e=c.lineSeries,e.markers.visible?f.call(a,b,c):f.call(a,b,e)):f.call(a,b,c)}},"mouseup":function(b){if(!l){var c,d=$(b.target),e=null;d.data("owner")&&(d=d.data("owner")),c=d.data("wijchartDataObj"),d.hasClass(p.canvasMarker)?(e=c.lineSeries,e.markers.visible?g.call(a,b,c):g.call(a,b,e)):g.call(a,b,c)}},"mouseover":function(b){if(!l){var c,d=$(b.target),e=null;d.data("owner")&&(d=d.data("owner")),c=d.data("wijchartDataObj"),d.hasClass(p.canvasMarker)?(e=c.lineSeries,e.markers.visible?h.call(a,b,c):h.call(a,b,e)):h.call(a,b,c)}},"mouseout":function(b){if(!l){var c,d=$(b.target),e=null;d.data("owner")&&(d=d.data("owner")),c=d.data("wijchartDataObj"),d.hasClass(p.canvasMarker)?(e=c.lineSeries,e.markers.visible?i.call(a,b,c):i.call(a,b,e)):i.call(a,b,c)}},"mousemove":function(b){if(!l){var c,d=$(b.target),e=null;d.data("owner")&&(d=d.data("owner")),c=d.data("wijchartDataObj"),d.hasClass(p.canvasMarker)?(e=c.lineSeries,e.markers.visible?j.call(a,b,c):j.call(a,b,e)):j.call(a,b,c)}},"click":function(b){if(!l){var c,d=$(b.target),e=null;d.data("owner")&&(d=d.data("owner")),c=d.data("wijchartDataObj"),d.hasClass(p.canvasMarker)?(e=c.lineSeries,e.markers.visible?k.call(a,b,c):k.call(a,b,e)):k.call(a,b,c)}}};$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(q="wij"),a.on(q+"mousedown."+e,"."+p.lineElement,$.proxy(r.mousedown,r)).on(q+"mouseup."+e,"."+p.lineElement,$.proxy(r.mouseup,r)).on(q+"mouseover."+e,"."+p.lineElement,$.proxy(r.mouseover,r)).on(q+"mouseout."+e,"."+p.lineElement,$.proxy(r.mouseout,r)).on(q+"mousemove."+e,"."+p.lineElement,$.proxy(r.mousemove,r)).on(q+"click."+e,"."+p.lineElement,$.proxy(r.click,r)),b.TrendlineRender.bindLiveEvents(a,e,f,g,h,i,j,k,l,p,!0)},a.prototype.unbindLiveEvents=function(a,c,d){a.off("."+c,"."+d.lineElement),b.TrendlineRender.unbindLiveEvents(a,c,d)},a}();b.LineChartRender=f}(a.chart||(a.chart={}));a.chart}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){var c=180,d=360,e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._create=function(){this._handleChartStyles(),a.prototype._create.call(this),this.chartElement.addClass(this.options.wijCSS.pieChart)},b.prototype.destroy=function(){var b=this.options.wijCSS,c=this.chartElement,d=c.data("fields"),e=d&&d.sectors,f=d&&d.labels;c.removeClass(b.pieChart),a.prototype.destroy.call(this),e&&e.length&&$.each(e,function(a,b){b=null}),f&&f.length&&$.each(f,function(a,b){b=null}),c.data("fields",null)},b.prototype._isPieChart=function(){return!0},b.prototype.getSector=function(a){var b=this.chartElement.data("fields");return b&&b.chartElements?b.chartElements.sectors[a]:null},b.prototype._bindData=function(){var a,b,c,d=this.options,e=d.dataSource,f=d.data,g=[];e&&f&&(a=f.label,b=f.value,c=f.offset,a&&a.bind&&(a=this._getBindData(e,a.bind)),b&&b.bind&&(b=this._getBindData(e,b.bind)),c&&c.bind&&(c=this._getBindData(e,c.bind)),a&&$.isArray(a)&&a.length&&b&&$.isArray(b)&&b.length&&($.each(b,function(d,e){var f,h=0;d>=0&&d<a.length&&(f=a[d]),c&&$.isArray(b)&&c.length&&d>=0&&d<c.length&&(h="undefined"==typeof c[d]?0:c[d]),g.push({"data":e,"label":f,"offset":h,"legendEntry":!0})}),d.seriesList=g))},b.prototype._hanldSharedXData=function(){},b.prototype._checkSeriesDataEmpty=function(a){return isNaN(a.data)},b.prototype._getSeriesFromTR=function(a,b,c){var d=null,e=null,f=null,g=null,h=null;b.length&&b.each(function(){e=$("th",$(this)),d=$.trim(e.text()),f=$("td",$(this)),f.length&&(g=parseFloat($.trim($(f[0]).text()))),h={"label":d,"legendEntry":!0,"data":g},c.push(h)})},b.prototype._showSerieEles=function(a){var b=this.options.showChartLabels;a.sector&&(a.sector.show(),a.sector.shadow&&a.sector.shadow.show(),a.sector.tracker&&a.sector.tracker.show()),a.label&&b&&(a.label.show(),a.label.connector&&a.label.connector.show(),$(a.label.node).data("legendHide",!1))},b.prototype._hideSerieEles=function(a){a.sector&&(a.sector.hide(),a.sector.shadow&&a.sector.shadow.hide(),a.sector.tracker&&a.sector.tracker.hide()),a.label&&(a.label.hide(),a.label.connector&&a.label.connector.hide(),$(a.label.node).data("legendHide",!0))},b.prototype._hasAxes=function(){return!1},b.prototype._mouseMoveInsidePlotArea=function(b,e){if(a.prototype._mouseMoveInsidePlotArea.call(this,b,e),this.isTapAndHold){var f=this.previousAngle,g=0,h="",i=this.chartElement,j=this.tapTarget?this.tapTarget.data("wijchartDataObj"):{},k=j.pieID||"",l=i.data("fields").chartElements["sectors"+k],m=this.canvasBounds,n=(m.startX+m.endX)/2,o=(m.startY+m.endY)/2,p=Raphael.angle(e.left,e.top,n,o);f&&(g=Math.round(p-f),Math.abs(p-f)>c&&(p>f?g-=d:g+=d),g&&(h=Raphael.format("...r{0},{1},{2}",g,n,o),$.each(l,function(a,b){b.transform(h)}),this.tooltip&&this._setTouchTooltip(null))),this.previousAngle=p}},b.prototype._mouseMoveOutsidePlotArea=function(b,c){a.prototype._mouseMoveOutsidePlotArea.call(this,b,c),this.isTapAndHold&&this._rotateToSectorCenter(null)},b.prototype._rotateToSectorCenter=function(a){var b,e,f,g=this,h=this.options.animation,i=this.chartElement,j=this.tapTarget?this.tapTarget.data("wijchartDataObj"):{},k=j.pieID||"",l=i.data("fields").chartElements["sectors"+k],m=i.data("fields").chartElements["labels"+k],n=this.canvasBounds,o=(n.startX+n.endX)/2,p=(n.startY+n.endY)/2,q=this;this._hideSectorElements(l,m),this.tooltip&&(e=this._getTouchttSector(a)),this.touchttSector&&this.touchttSector===e&&Math.abs(this.targetCenterAngle)>=.01?(f=this.targetCenterAngle>c?this.targetCenterAngle-d:this.targetCenterAngle<-c?this.targetCenterAngle+d:this.targetCenterAngle,b=Raphael.animation({"transform":Raphael.format("...r{0},{1},{2}",f,o,p)},h.duration,h.easing,function(){q._rotateCallback(this,m)}),$.each(l,function(a,c){c.animate(b)})):$.each(l,function(a,b){g._rotateCallback(b,m)}),this.previousAngle=null,this.isTapAndHold=!1,this.tapTarget=null},b.prototype._rotateCallback=function(a,b){var c,e,f=this.canvasBounds,g=(f.startX+f.endX)/2,h=(f.startY+f.endY)/2,i=a.index,j=0,k=a.attr("transform");if($.each(k,function(a,b){return"r"!==b[0]?!0:void(b.length>=4&&(j+=b[1]))}),c=Raphael.format("r{0},{1},{2}",j,g,h),g>0&&(j%=d,c=Raphael.format("r{0},{1},{2}",j,g,h),a.attr("transform",c)),a.tracker&&(a.tracker.attr("transform",c),a.tracker.show()),a.shadow&&(a.shadow.attr("transform",c),a.shadow.show()),b&&b.length&&b.length>i){if(e=b[i],e.attr("transform",Raphael.format("r{0},{1},{2}r{3}",j,g,h,0-j)),e.connector&&e.connector.attr("transform",c),$(e.node).data("legendHide"))return;e.show(),e.connector&&e.connector.show()}},b.prototype._getTouchttSector=function(a){var b,e=this,f=this.chartElement,g=this.tapTarget?this.tapTarget.data("wijchartDataObj"):{},h=g.pieID||"",i=f.data("fields").chartElements["sectors"+h],j=this.tooltip.getOptions(),k=j.compass,l=90;
switch(k){case"east":l=0;break;case"south":l=270;break;case"west":l=c;break;case"north":default:l=90}return $.each(i,function(c,f){var g=f.attr("transform"),h=0,i=f.angles;if($.each(g,function(a,b){return"r"!==b[0]?!0:void(b.length>=4&&(h+=b[1]))}),h%=d,0>h&&(h=d+h),h=(l+h)%d,a){if(f===a)return e.targetCenterAngle=(i.start+i.end)/2-h,b=a,!1}else if(i.start<=h&&i.end>=h)return e.targetCenterAngle=(i.start+i.end)/2-h,b=f,!1}),b},b.prototype._setTouchTooltip=function(a){var b,c,d=this.tooltip.getOptions(),e=d.compass,f=this._getTouchttSector(a),g=this.options.hint,h=g.title,i=g.content,j=$.isFunction(h),k=$.isFunction(i);!f||this.touchttSector&&this.touchttSector===f||(b=$(f.node).data("wijchartDataObj"),c={"data":b,"value":b.value,"label":b.label,"total":b.total,"y":b.value},(j||k)&&(j&&(d.title=function(){c.fmt=h;var a=$.proxy(c.fmt,c),b=a();return b}),k&&(d.content=function(){c.fmt=i;var a=$.proxy(c.fmt,c),b=a();return b})),this._showTouchTooltip(e),this.touchttSector=f)},b.prototype._showTouchTooltip=function(a){var b=this.chartElement,c=this.canvasBounds,d={"x":0,"y":0};switch(a){case"east":d={"x":b.width(),"y":(c.startY+c.endY)/2};break;case"south":d={"x":(c.startX+c.endX)/2,"y":b.height()};break;case"west":d={"x":0,"y":(c.startY+c.endY)/2};break;case"north":default:d={"x":(c.startX+c.endX)/2,"y":0}}this.tooltip.showAt(d)},b.prototype._isTouchBehaviorEnabled=function(){return this.options.enableTouchBehavior&&this._isTouchEnabled()},b.prototype._mouseDown=function(b,c){var d,e,f,g=$(b.target),h=this.chartElement;a.prototype._mouseDown.call(this,b,c),this._isTouchBehaviorEnabled()&&(this.isTapAndHold=!0,g.data("owner")&&(g=g.data("owner")),this.tapTarget=g,d=c.pieID||"",e=h.data("fields").chartElements["sectors"+d],f=h.data("fields").chartElements["labels"+d],this._hideSectorElements(e,f))},b.prototype._hideSectorElements=function(a,b){$.each(a,function(a,c){if(c.stop(),c.tracker&&c.tracker.hide(),c.shadow&&c.shadow.hide(),b&&b.length){var d=b[a];d.hide(),d.connector&&d.connector.hide()}})},b.prototype._mouseUp=function(b,c){a.prototype._mouseUp.call(this,b,c),this._isTouchBehaviorEnabled()&&this.isTapAndHold&&this._rotateToSectorCenter(null)},b.prototype._mouseOver=function(b,c){a.prototype._mouseOver.call(this,b,c)},b.prototype._mouseOut=function(b,c){a.prototype._mouseOut.call(this,b,c)},b.prototype._mouseMove=function(b,c){a.prototype._mouseMove.call(this,b,c)},b.prototype._click=function(b,c){var d,e,f,g=this.chartElement;a.prototype._click.call(this,b,c),this._isTouchBehaviorEnabled()&&this.tooltip&&(d=c.pieID||"",e=g.data("fields").chartElements["sectors"+d],e.length&&e.length>c.index&&(f=e[c.index],this._setTouchTooltip(f),this._rotateToSectorCenter(f)))},b.prototype._paintTooltip=function(){var b=this.options.wijCSS,c=this.chartElement,d=c.data("fields");a.prototype._paintTooltip.call(this),this.tooltip&&d&&(this._isTouchBehaviorEnabled()?(this.tooltip.setOptions({"closeBehavior":"none","mouseTrailing":!1,"animated":null,"showAnimated":null,"windowCollisionDetection":"fit"}),this._setTouchTooltip(null),this._rotateToSectorCenter(null)):d.trackers&&d.trackers.length&&(this.tooltip.setSelector($("."+b.canvasObject,c[0])),this.tooltip.setOptions({"relatedElement":d.trackers[0]})))},b.prototype._paintPlotArea=function(){var a=this.options,b=this.canvasBounds,c=b.endX-b.startX,d=b.endY-b.startY,e=a.radius;e?(2*e>c&&(e=c/2),2*e>d&&(e=d/2)):e=Math.min(c,d)/2,b.startX+=c/2-e,b.endX=b.startX+2*e,b.startY+=d/2-e,b.endY=b.startY+2*e,this.chartElement.data("fields")&&(this.chartElement.data("fields").seriesEles=null),this.piechartRender=new i(this.chartElement,{"canvas":this.canvas,"tooltip":this.tooltip,"bounds":b,"wijCSS":a.wijCSS,"radius":e,"startAngle":a.startAngle,"widgetName":this.widgetName,"innerRadius":a.innerRadius,"seriesList":a.seriesList,"seriesStyles":a.seriesStyles,"seriesHoverStyles":a.seriesHoverStyles,"seriesTransition":a.seriesTransition,"showChartLabels":a.showChartLabels,"disabled":a.disabled,"textStyle":a.textStyle,"chartLabelStyle":a.chartLabelStyle,"chartLabelFormatString":a.chartLabelFormatString,"chartLabelFormatter":a.chartLabelFormatter,"labels":a.labels,"shadow":a.shadow,"animation":a.animation,"culture":this._getCulture(),"mouseDown":$.proxy(this._mouseDown,this),"mouseUp":$.proxy(this._mouseUp,this),"mouseOver":$.proxy(this._mouseOver,this),"mouseOut":$.proxy(this._mouseOut,this),"mouseMove":$.proxy(this._mouseMove,this),"click":$.proxy(this._click,this),"widget":this,"enableTouchBehavior":a.enableTouchBehavior,"availableWidth":c,"availableHeight":d,"direction":a.direction,"isTouchBehaviorEnable":this._isTouchBehaviorEnabled()}),this.piechartRender.render(!a.radius)},b.prototype._getTooltipText=function(a,b){var c,d,e=$(b.node);return e.data("owner")&&(e=e.data("owner")),c=e.data("wijchartDataObj"),d={"data":c,"value":c.value,"label":c.label,"total":c.total,"target":b,"y":c.value,"fmt":a},$.proxy(a,d)()},b}(b.wijchartcore);b.wijpiechart=e;var f=function(){function a(){}return a.clockwise="clockwise",a.counterClockwise="counterClockwise",a}(),g=function(a){function b(){a.apply(this,arguments),this.pieChart="wijmo-wijpiechart",this.pieLabel="wijpiechart-label",this.pieElement="wijpiechart",this.pieTracker="pietracker"}return __extends(b,a),b}(b.wijchartcore_css);b.wijpiechart_css=g;var h=function(b){function c(){b.apply(this,arguments),this.initSelector=":jqmData(role='wijpiechart')",this.wijCSS=new a.chart.wijpiechart_css,this.startAngle=0,this.radius=null,this.innerRadius=0,this.chartLabelFormatter=null,this.labels={"style":{},"formatString":"","formatter":null,"connectorStyle":{},"position":"inside","offset":10},this.animation={"enabled":!0,"duration":400,"easing":"easeInCubic","offset":10},this.seriesTransition={"enabled":!0,"duration":1e3,"easing":"bounce"},this.seriesList=[],this.enableTouchBehavior=!0,this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null,this.direction=f.counterClockwise}return __extends(c,b),c}(b.wijchartcore_options);e.prototype.options=$.extend(!0,{},b.wijchartcore.prototype.options,new h),$.wijmo.registerWidget("wijpiechart",e.prototype);var i=function(){function a(a,b){this.options=b,this.element=a}return a.prototype.render=function(a){var c,e,g,h=this.element,i=this.options,j=function(a,c,d){i.shadow&&b.ChartUtil.paintShadow(a,c,d)},k=b.ChartUtil.getDiffAttrs,l=i.canvas,m=$.wijraphael.getPositionByAngle,n=i.seriesList,o=i.seriesStyles,p=i.seriesHoverStyles,q=o.length,r=i.textStyle,s=i.labels||{"style":{},"formatString":"","formatter":null,"connectorStyle":{},"position":"inside","offset":10},t=$.extend(!0,{},r,i.chartLabelStyle,s.style),u=s.formatString||i.chartLabelFormatString,v=s.formatter||i.chartLabelFormatter,w=i.culture,x=i.bounds,y=x.startX,z=x.startY,A=i.radius,B=i.showChartLabels,C=(i.animation,i.seriesTransition),D=i.innerRadius,E=h.data("fields")||{},F=E.chartElements||{},G=E.aniSectorAttrs,H=E.aniLabelAttrs,I=0,J=i.startAngle||0,K=i.wijCSS,L=[],M=[],N=[],O=[],P=[],Q=[],R=l.set(),S=this.options.widget,T=J,U=i.availableWidth,V=i.availableHeight,W=i.radius,X=i.direction;l.customAttributes.segment=function(a,c,e,f,g,h){var i=null,j=.01;return f-e>d-j?f-=j:j>f-e&&(f+=j),i=h?b.ChartUtil.donut(a,c,g,h,e,f):b.ChartUtil.sector(a,c,g,e,f),{"path":i}},$.each(n,function(a,b){b&&"number"==typeof b.data&&(I+=Math.abs(b.data))}),a&&B&&"outside"===s.position&&($.each(n,function(a,b){var c,e,f,h,i,j,k=A,l=0,n=0,o=d*Math.abs(b.data)/I,p=o/2+T;return b=$.extend(!0,{"offset":0},b),e=$.extend(!0,{},e,t),b.textStyle&&(e=$.extend(!0,e,b.textStyle)),f=b.label,u&&u.length>0&&(f=Globalize.format(f,u,w)),v&&$.isFunction(v)&&(h={"index":a,"value":b.data,"y":b.data,"total":I,"chartLabel":f,"chartLabelFormatter":v},f=$.proxy(v,h)()),H&&C.enabled&&a<H.length?(g=H[a],g.text=f,i=S._text.call(S,0,0,"").attr(g)):i=S._text.call(S,0,0,f).attr(e),j=i.wijGetBBox(),c=m(0,0,b.offset+s.offset+A,p),l=j.width+Math.abs(c.x),n=j.height/2+Math.abs(c.y),l>U/2&&(A=k-(l-U/2)/Math.abs(Math.cos(Raphael.rad(p)))),n>V/2&&(A=Math.min(A,k-(V/2-n)/Math.abs(Math.sin(Raphael.rad(p))))),T+=o,i.remove(),D>A?(A=D,!1):void 0}),A!=W&&(i.bounds.startX=i.bounds.startX+W-A,i.bounds.endX=i.bounds.startX+2*A,i.bounds.startY=i.bounds.startY+W-A,i.bounds.endY=i.bounds.startY+2*A,y=x.startX,z=x.startY)),$.each(n,function(a,b){var h,i,n,r,x,E,F,T,U,V,W,Y,Z=$.extend({"opacity":1,"stroke":"gray","stroke-width":1},o[a%q]),_=d*Math.abs(b.data)/I,aa=y+A,ba=z+A,ca=s.position,da=s.connectorStyle,ea=s.offset,fa=!1;c=b.pieID;var ga,ha,ia=X==f.clockwise;ia?(ga=J-_,ha=J-_/2):(ga=J+_,ha=J+_/2),b=$.extend(!0,{"offset":0},b),b.offset&&(h=m(aa,ba,b.offset,ha),aa=h.x,ba=h.y),e=[aa,ba,J,ga,A,D],G&&C.enabled?(Z.segment=e,a<G.length?g=G[a]:(g=$.extend(!0,{},Z),g.segment=[aa,ba,0,d,A,D]),i=l.path().attr(g),Z=k(g,Z),i.removed||i.wijAnimate(Z,C.duration,C.easing,function(){j(i,1,"#cccccc"),!F||F.removed||i.removed||F.attr({"path":i.attr("path")}),delete Z.segment})):(i=l.path().attr({"segment":e}),j(i,1,"#ccccc"),i.wijAttr(Z)),i.angles={"start":J,"end":ga},i.index=a,i.getOffset=function(a){var b=m(aa,ba,a,(i.angles.start+i.angles.end)/2);return{"x":b.x-aa,"y":b.y-ba}},i.center={"x":aa,"y":ba},i.radius=A,D&&(i.innerRadius=D),F=i.clone(),Raphael.vml?F.attr({"opacity":.01,"fill":"white","stroke-width":0,"fill-opacity":.01}):F.attr({"opacity":.01,"fill":"white","fill-opacity":.01}),$.wijraphael.addClass($(F.node),Raphael.format("{0} {1} {2} wijchart-tracker"+a,K.canvasObject,K.pieElement,K.pieTracker)),$(F.node).data("owner",$(i.node)),i.tracker=F,R.push(F),$.wijraphael.addClass($(i.node),Raphael.format("{0} {1} wijmo-wijpiechart-series-"+a,K.canvasObject,K.pieElement)),$(i.node).data("wijchartDataObj",b),B&&("outside"===ca?(E=m(aa,ba,A,ha),r=m(aa,ba,A+ea,ha)):r=m(aa,ba,b.offset+2*A/3,ha),x=$.extend(!0,{},x,t),b.textStyle&&(x=$.extend(!0,x,b.textStyle)),T=b.label,u&&u.length>0&&(T=Globalize.format(T,u,w)),v&&$.isFunction(v)&&(U={"index":a,"value":b.data,"y":b.data,"total":I,"chartLabel":T,"chartLabelFormatter":v},T=$.proxy(v,U)()),H&&C.enabled&&a<H.length?(fa=!0,g=H[a],g.text=T,n=S._text.call(S,0,0,"").attr(g),x=k(g,x),x.x=r.x,x.y=r.y,n.wijAnimate(x,C.duration,C.easing,function(){Y&&Y.show()})):n=S._text.call(S,r.x,r.y,T).attr(x),"outside"===ca&&(V=ha%d,W=n.wijGetBBox(),V>=90&&270>=V?n.transform(Raphael.format("T{0},{1}",-W.width/2,0)):n.transform(Raphael.format("T{0},{1}",W.width/2,0)),Y=l.path(Raphael.format("M{0} {1}L{2} {3}",E.x,E.y,r.x,r.y)).attr(da),fa&&Y.hide(),n.connector=Y),$.wijraphael.addClass($(n.node),Raphael.format("{0} {1} {2}",K.canvasObject,K.pieElement,K.pieLabel)),$(n.node).data("wijchartDataObj",b),P.push(n),O.push(n),M[a]=n.attr()),Q.push({"label":O[a],"sector":i}),b.visible===!1&&(i.hide(),O[a]&&O[a].hide(),Y&&Y.hide(),i.shadow&&i.shadow.hide(),F.hide()),L[a]=i.attr(),N.push(i),P.push(i),b.style=Z,b.hoverStyle=p[a],b.index=a,b.value=b.data,b.y=b.data,b.total=I,b.type="pie",J=ga}),O&&O.length&&$.each(O,function(a,b){b.toFront()}),F.sectors=N,c&&(F["sectors"+c]=N,F["labels"+c]=O),F.labels=O,E.chartElements||(E.chartElements={}),R.toFront(),$.extend(!0,E.chartElements,F),E.aniSectorAttrs=L,E.aniLabelAttrs=M,E.seriesEles=Q,E.trackers=R,h.data("fields",E),this.unbindLiveEvents(),this.bindLiveEvents()},a.prototype.bindLiveEvents=function(){var a=this.options,b=a.widget._isTouchEnabled(),c=a.isTouchBehaviorEnable,d=this.element,e=a.tooltip,f={"x":0,"y":0},g="",h="",i=$.isFunction,j=a.disabled,k=a.animation;b&&(g="wij"),c&&(h="wij"),e&&e.setTargets(this.tooltipTars),d.on(g+"mousedown."+a.widgetName,"."+a.wijCSS.pieElement,function(b){if(!j){var c,e=a.mouseDown,f=$(b.target);f.data("owner")&&(f=f.data("owner")),c=f.data("wijchartDataObj"),c&&i(e)&&e.call(d,b,c)}}).on(g+"mouseup."+a.widgetName,"."+a.wijCSS.pieElement,function(b){if(!j){var c,e=a.mouseUp,f=$(b.target);f.data("owner")&&(f=f.data("owner")),c=f.data("wijchartDataObj"),c&&i(e)&&e.call(d,b,c)}}).on(h+"mouseover."+a.widgetName,"."+a.wijCSS.pieElement,function(b){if(!j){var e,g,h,l,m,n,o,p=a.mouseOver,q=$(b.target),r=k&&k.enabled;if(q.data("owner")&&(q=q.data("owner")),e=q.data("wijchartDataObj"),e&&(g=e.pieID||"",h=e.index,l=d.data("fields").chartElements["sectors"+g][h],m=l.showAnimationTimer,n=l.hideAnimationTimer,o=l.explodeAnimationShowing,i(p)&&p.call(d,b,e),!c&&!l.removed&&(l.wijAttr(e.hoverStyle),r))){if(n&&(window.clearTimeout(n),n=null,l.hideAnimationTimer=n),m&&(window.clearTimeout(m),m=null,l.showAnimationTimer=null),o)return;m=window.setTimeout(function(){var a=k.duration,b=k.easing;l.removed||(f=l.getOffset(k.offset||10),l.offset=f,l.shadow&&!l.shadow.removed&&l.shadow.hide(),l.wijAnimate({"transform":Raphael.format("t{0},{1}",f.x,f.y)},a,b),l.tracker&&!l.tracker.removed&&l.tracker.wijAnimate({"transform":Raphael.format("t{0},{1}",f.x,f.y)},a,b),o=!0,l.explodeAnimationShowing=o)},150),l.showAnimationTimer=m}}}).on(h+"mouseout."+a.widgetName,"."+a.wijCSS.pieElement,function(b){if(!j){var e,g,h,l,m,n,o,p=a.mouseOut,q=$(b.target),r=k&&k.enabled;if(q.data("owner")&&(q=q.data("owner")),e=q.data("wijchartDataObj"),e&&(g=e.pieID||"",h=e.index,l=d.data("fields").chartElements["sectors"+g][h],m=l.showAnimationTimer,n=l.hideAnimationTimer,o=l.explodeAnimationShowing,i(p)&&p.call(d,b,e),!c&&!l.removed&&(e.style.segment&&delete e.style.segment,l.wijAttr(e.style),r))){if(n&&(window.clearTimeout(n),n=null,l.hideAnimationTimer=n),m&&(window.clearTimeout(m),m=null,l.showAnimationTimer=m),!o)return;n=window.setTimeout(function(){var a=k.duration,b=k.easing;f=l.offset,l.shadow&&!l.shadow.removed&&l.shadow.show(),l.removed||l.wijAnimate({"transform":"t0,0"},a,b),l.tracker&&!l.tracker.removed&&l.tracker.wijAnimate({"transform":"t0,0"},a,b),l.shadow&&!l.shadow.removed&&l.shadow.wijAnimate({"transform":"t0,0"},a,b),f={"x":0,"y":0},o=!1,l.explodeAnimationShowing=o},150),l.hideAnimationTimer=n}}}).on(g+"mousemove."+a.widgetName,"."+a.wijCSS.pieElement,function(b){if(!j){var c,e=a.mouseMove,f=$(b.target);f.data("owner")&&(f=f.data("owner")),c=f.data("wijchartDataObj"),c&&i(e)&&e.call(d,b,c)}}).on(g+"click."+a.widgetName,"."+a.wijCSS.pieElement,function(b){if(!j&&(!window.navigator.userAgent.match(/iPhone|iPad|iPod/i)||!c||$.wijraphael.hasClass(b.target,a.wijCSS.pieTracker))){var e,f=a.click,g=$(b.target);g.data("owner")&&(g=g.data("owner")),e=g.data("wijchartDataObj"),e&&i(f)&&f.call(d,b,e)}})},a.prototype.unbindLiveEvents=function(){var a=this.element,b=this.options;a.off("."+b.widgetName,"."+b.wijCSS.pieElement)},a}();b.PieChartRender=i}(a.chart||(a.chart={}));a.chart}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){var c="wijcandlestickchart",d="ohlc",e="candlestick",f="hl",g="stroke-width",h=function(){function a(a){this.init(a)}return a.prototype.init=function(a){var b,c,d=[],e={};if($.each(a,function(a,b){var c=$.toOADate(b);-1===$.inArray(c,d)&&d.push(c)}),this.count=b=d.length,this.times=d=d.sort(),this.timeDic=e,2>b)return this.max=d[0]||0,this.min=d[0]||0,this.unit=864e5,void(1===b&&(e[d[0]]=0));for(c=0;b>c;c++)e[d[c]]=c;this._calculateUnit(),this.max=d[this.count-1],this.min=d[0]},a.prototype._calculateUnit=function(){for(var a=Number.MAX_VALUE,b=1;b<this.count;b++)a=Math.min(a,this.times[b]-this.times[b-1]);this.unit=a},a.prototype.getOATime=function(a){var b,c=this.count,d=this.times;return 0>a?this.min+a*this.unit:a>c-1?this.max+(a-c+1)*this.unit:(b=parseInt(a),d[b]+(a-b)*this.unit)},a.prototype.getTime=function(a){return $.fromOADate(this.getOATime(a))},a.prototype.getTimeIndex=function(a){var b,c=$.toOADate(a);return c>this.max?this.count-1+(c-this.max)/this.unit:c<this.min?(c-this.min)/this.unit:this.timeDic&&null!=this.timeDic[c]?this.timeDic[c]:($.each(this.times,function(a,d){return d>c?(b=a-1,!1):void 0}),b+(c-this.times[b])/this.unit)},a.prototype.getCount=function(){return this.times.length},a.prototype.dispose=function(){this.times=null,this.timeDic=null},a}();b.datetimeUtil=h;var i=function(a){function c(){a.apply(this,arguments)}return __extends(c,a),c.prototype._paintChartArea=function(){var b=this.options;this._isSeriesListDataEmpty()||($.each(b.seriesList,function(a,b){var c=b.data;b.isTrendline||(c.y=[].concat(c.high).concat(c.low))}),a.prototype._paintChartArea.call(this),$.each(b.seriesList,function(a,b){b.isTrendline||delete b.data.y}))},c.prototype._checkSeriesDataEmpty=function(a){var b=this.options.type,c=a.data,f=this._checkEmptyData;return!c||f(c.x)?!0:a.isTrendline?a.isValid&&a.innerData?f(c.y):!0:f(c.high)||f(c.low)?!0:b!==d&&b!==e||!f(c.open)&&!f(c.close)?!1:!0},c.prototype._getLegendStyle=function(a){var b=a.highLow;return b?(b=$.extend({},b),delete b.width,delete b.height,b.stroke||(b.stroke=b.fill),b):a},c.prototype._showHideSeries=function(a,b){var c=["highLow","open","close","path","high","low","openClose"];$.each(a,function(a,d){$.each(c,function(a,c){d[c]&&d[c][b]()}),d.path&&$(d.path.node).data("wijchartDataObj")&&($(d.path.node).data("wijchartDataObj").visible="show"===b)})},c.prototype._showSerieEles=function(a){return a.isTrendline?void b.TrendlineRender.showSerieEles(a):void this._showHideSeries(a,"show")},c.prototype._hideSerieEles=function(a){return a.isTrendline?void b.TrendlineRender.hideSerieEles(a):void this._showHideSeries(a,"hide")},c.prototype._paintPlotArea=function(){var a=this.options,b=new j(this.chartElement,{"canvas":this.canvas,"bounds":this.canvasBounds,"tooltip":this.tooltip,"widgetName":this.widgetName,"axis":a.axis,"seriesList":a.seriesList,"seriesStyles":a.seriesStyles,"seriesHoverStyles":a.seriesHoverStyles,"seriesTransition":a.seriesTransition,"showChartLabels":a.showChartLabels,"textStyle":a.textStyle,"chartLabelStyle":a.chartLabelStyle,"chartLabelFormatString":a.chartLabelFormatString,"shadow":a.shadow,"disabled":a.disabled,"animation":a.animation,"culture":this._getCulture(),"type":a.type,"wijCSS":a.wijCSS,"mouseDown":$.proxy(this._mouseDown,this),"mouseUp":$.proxy(this._mouseUp,this),"mouseOver":$.proxy(this._mouseOver,this),"mouseOut":$.proxy(this._mouseOut,this),"mouseMove":$.proxy(this._mouseMove,this),"click":$.proxy(this._click,this),"timeUtil":this.timeUtil,"candlestickFormatter":a.candlestickFormatter,"widget":this});b.render()},c.prototype._paintTooltip=function(){var b,c=this.chartElement.data("fields");a.prototype._paintTooltip.call(this),this.tooltip&&c&&c.trackers&&(b=c.trackers,this.tooltip.setTargets(b),this.tooltip.setOptions({"relatedElement":b[0]}))},c.prototype._getTooltipText=function(a,b){var c=$(b.node).data("wijchartDataObj"),d={"data":c,"label":c.label,"x":c.x,"high":c.high,"low":c.low,"open":c.open,"close":c.close,"target":b,"fmt":a};return $.proxy(a,d)()},c.prototype._setDefaultTooltipText=function(a){var b,c=this.options.type;return b=a.label+" - "+Globalize.format(a.x,"d")+"\n High:"+a.high+"\n Low:"+a.low,c!==f&&(b+="\n Open:"+a.open+"\n Close:"+a.close),b},c.prototype._getStyles=function(a,c,e,h){function i(a,b,c,e,h){var i={},j=[];if(null!==c&&void 0!==c)return j=a===f?["highLow"]:a===d?["open","close","highLow"]:["fallingClose","risingClose","unchangeClose","highLow"],$.each(j,function(a,d){h&&(b[d]=$.extend(!0,{},b,b[d])),i[d]=$.extend(!0,{},c,b[d]),!e||"risingClose"!=d||b[d]&&b[d].fill||(i[d].fill=null),"fallingClose"!==d||b[d]&&b[d][g]||(i[d][g]=0),("open"===d||"close"===d||"highLow"===d)&&(b[d]&&b[d].stroke||(i[d].stroke=i[d].fill))}),i}var j,k="seriesStyles"===e,l=b.wijchartcore.prototype._getDefFill(),m=c.length,n=0,o=[],p=0;for(n=Math.max(b.wijchartcore.prototype.options[e].length,k?l.length:0,m),j=$.extend(!0,new Array(n),b.wijchartcore.prototype.options[e]),p=0;n>p;p++)p>=m&&(c[p]={}),k&&p<l.length&&(j[p]||(j[p]={}),j[p].fill=l[p]),o.push(i(a,c[p],j[p],k,h));return o},c.prototype._handleChartStyles=function(){var a=this.options;a.seriesStyles=this._getStyles(a.type,a.seriesStyles,"seriesStyles",!1),a.seriesHoverStyles=this._getStyles(a.type,a.seriesHoverStyles,"seriesHoverStyles",!1)},c.prototype._create=function(){this._handleChartStyles(),this.bindXData=!1,this._handleXData(),a.prototype._create.call(this),this.chartElement.addClass(this.options.wijCSS.wijCandlestickChart)},c.prototype._setOption=function(b,c){"axis"===b?this._handleMaxMinInAxis(c):"type"===b&&(this.options.type=c,this._handleChartStyles()),a.prototype._setOption.call(this,b,c)},c.prototype._seriesListSeted=function(){this.timeUtil.dispose(),this.timeUtil=null,this._handleXData()},c.prototype._handleMaxMinInAxis=function(a){var b,c=this,d=this.options.axis,e=function(a){return c._isDate(a)?c.timeUtil.getTimeIndex(a):c.timeUtil.getTimeIndex($.fromOADate(a))};a&&a.x&&(b=a.x,$.each(["max","min"],function(a,c){d&&d.x&&d.x[c]===b[c]||(b[c]=e(b[c]))}))},c.prototype._handleXData=function(){var a=this,b=this.options,c=b.seriesList=$.arrayClone(b.seriesList),d=[],e=!1,f=function(a){return a.data&&a.data.x},g=function(b){var c=b.data.x;$.each(c,function(b,d){a._isDate(d)||(c[b]=a.timeUtil.getTime(d))})};(!this.timeUtil||this.bindXData)&&(this.bindXData=!1,$.each(c,function(a,b){f(b)&&$.isArray(b.data.x)&&(d=d.concat(b.data.x))}),this.timeUtil&&($.each(d,function(b,c){return a._isDate(c)?(e=!0,!1):void 0}),e&&(d=[],$.each(c,function(a,b){f(b)&&(g(b),d=d.concat(b.data.x))}),this.timeUtil.dispose(),this.timeUtil=null)),this.timeUtil||(this.timeUtil=new h(d)),$.each(c,function(b,c){f(c)&&$.isArray(c.data.x)&&(c.data.x=$.map(c.data.x,function(b,c){return a.timeUtil.getTimeIndex(b)}))}))},c.prototype._bindData=function(){a.prototype._bindData.call(this),this._handleXData()},c.prototype._bindSeriesData=function(b,c,d){var e=this,f=c.data;a.prototype._bindSeriesData.call(this,b,c,d),f.x&&$.isArray(f.x)&&(this.bindXData=!0),$.each(["high","low","open","close"],function(a,c){var d=f[c];d&&d.bind&&(f[c]=e._getBindData(b,d.bind))})},c.prototype.destroy=function(){var b=this.chartElement;b.removeClass(this.options.wijCSS.wijCandlestickChart),a.prototype.destroy.call(this),this.timeUtil&&this.timeUtil.dispose(),b.data("fields",null)},c.prototype.getCandlestick=function(a){var b=this.chartElement.data("fields");return b&&b.chartElements&&b.chartElements.candlestickEles?b.chartElements.candlestickEles[a]||null:null},c.prototype._clearChartElement=function(){var b,c,d=(this.options,this.chartElement.data("fields"));d&&d.chartElements&&(b=d.chartElements,c=b.candlestickEles,$.each(c,function(a,b){$.each(b,function(a,c){c&&c[0]&&c.wijRemove(),b[a]=null}),c[a]=null}),b.candlestickEles=null,b.group&&b.group.wijRemove(),b.group=null,d.trackers&&d.trackers.wijRemove(),d.trackers=null),a.prototype._clearChartElement.call(this)},c.prototype._calculateParameters=function(b,c){if(a.prototype._calculateParameters.call(this,b,c),"x"===b.id){var d=c.unitMinor,e=c.autoMin,f=c.autoMax,g=this._getCandlestickAdjustment(b,d);e&&(b.min-=g),f&&(b.max+=g),this._calculateMajorMinor(c,b)}},c.prototype._calculateMajorMinor=function(c,d){"x"===d.id&&(c.annoFormatString&&0!==c.annoFormatString.length?d.annoFormatString=c.annoFormatString:d.annoFormatString=b.ChartDataUtil.getTimeDefaultFormat(this.timeUtil.getOATime(d.max),this.timeUtil.getOATime(d.min))),a.prototype._calculateMajorMinor.call(this,c,d)},c.prototype._getCandlestickAdjustment=function(a,b){var c,d=0;return $.each(this.options.seriesList,function(a,b){b.data&&b.data.x&&$.isArray(b.data.x)&&(d=Math.max(b.data.x.length,d))}),c=(a.max-a.min)/d,0===c?c=b:c>b&&0!==b&&(c=Math.floor(c/b)*b),c},c.prototype._getXTickText=function(a){return 0===this.timeUtil.getCount()?"":this.timeUtil.getTime(a)},c.prototype._adjustTickValuesForCandlestickChart=function(b){var c=this,d="valueLabels"===this.options.axis.x.annoMethod,e=[];return d&&b&&$.isArray(b)?($.each(b,function(a,b){e[a]=c.timeUtil.getTimeIndex($.fromOADate(b))}),e):a.prototype._adjustTickValuesForCandlestickChart.call(this,b)},c.prototype._getTickTextForCalculateUnit=function(b,c,d){return"x"===c.id?Globalize.format(this._getXTickText(b),c.annoFormatString,this._getCulture()):a.prototype._getTickTextForCalculateUnit.call(this,b,c,d)},c}(b.wijchartcore);b.wijcandlestickchart=i;var j=function(){function a(a,b){this.element=a,this.options=b,this.bounds=b.bounds,this.width=this.bounds.endX-this.bounds.startX,this.height=this.bounds.endY-this.bounds.startY,this.type=b.type,this.timeUtil=b.timeUtil,this.trackers=b.canvas.set(),this.isHover=!1,this.animationSet=b.canvas.set(),this.fieldsAniPathAttr=[],this.paths=[],this.aniPathsAttr=[]}return a.prototype._paintCandlestickElements=function(a,b,c){var d,e,g,h,i,j,k=a.data,l=Math.min(k.x.length,k.high.length,k.low.length),m=this.options.wijCSS,n=$.extend({"candlestickType":this.type,"visible":!0},a),o=[],p=this.options.widget;for(n.type="candlestick",k.open&&k.close&&(l=Math.min(l,k.open.length,k.close.length)),d=this.width/l,e=0;l>e;e++)g=this._paintCandlestickGraphic(k,e,d,b,c),i=$.extend({},n),g.path&&(h=$(g.path.node),$.wijraphael.addClass(h,m.canvasObject+" "+m.candlestickChart+" "+m.candlestickChartTracker),h.css("opacity",0),this.type!==f&&$.extend(i,{"open":k.open[e],"close":k.close[e]}),$.extend(i,{"high":k.high[e],"low":k.low[e],"index":e,"x":this.timeUtil.getTime(k.x[e]),"candlestickEles":g,"style":b,"hoverStyle":c}),h.data("wijchartDataObj",i)),a.visible===!1&&$.each(g,function(a,b){b&&b.hide&&b.hide()}),o.push(g),p.dataPoints=p.dataPoints||{},p.pointXs=p.pointXs||[],j=g.x,p.dataPoints[j.toString()]||(p.dataPoints[j.toString()]=[],p.pointXs.push(j)),p.dataPoints[j.toString()].push(i);return o},a.prototype._unbindLiveEvents=function(){var a=this.options.widgetName;this.element.off("."+a,".wijcandlestickchart"),b.TrendlineRender.unbindLiveEvents(this.element,a,this.options.wijCSS)},a.prototype._bindLiveEvents=function(){function a(a){var b=$(a.target);return b.data("wijchartDataObj")}function c(a,b,c){var d={"mouseover":e.mouseOver,"mouseout":e.mouseOut,"mousedown":e.mouseDown,"mouseup":e.mouseUp,"mousemove":e.mouseMove,"click":e.click};return $.isFunction(d[a])?d[a].call(g,b,c):void 0}var d=this,e=this.options,f="",g=this.element;$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(f="wij"),$.each(["mouseover","mouseout","mousedown","mouseup","mousemove","click"],function(b,g){d.element.on(f+g+"."+e.widgetName,".wijcandlestickchart",function(b){if(!e.disabled){var f=a(b);c(g,b,f)!==!1&&("mouseover"===g||"mouseout"===g)&&d["_"+g](f),f=null}})}),b.TrendlineRender.bindLiveEvents(g,e.widgetName,e.mouseDown,e.mouseUp,e.mouseOver,e.mouseOut,e.mouseMove,e.click,e.disabled,e.wijCSS,!1)},a.prototype._setCandlestickStyleForHover=function(a,b,c,d){var e=function(a,b){a&&b&&a.attr(b)};e(a.highLow,b.highLow),e(a.open,b.open),e(a.close,b.close),e(a.high,b.highLow),e(a.low,b.highLow),void 0!==c&&void 0!==d&&(c>d?e(a.openClose,b.fallingClose):d>c?e(a.openClose,b.risingClose):e(a.openClose,b.unchangeClose))},a.prototype._mouseover=function(a){a.hoverStyle&&(this.isHover=!0,this._setCandlestickStyleForHover(a.candlestickEles,a.hoverStyle,a.open,a.close))},a.prototype._mouseout=function(a){var b=a.style;this.isHover&&(this._setCandlestickStyleForHover(a.candlestickEles,b,a.open,a.close),this._formatCandlestick({"high":a.high,"low":a.low,"open":a.open,"close":a.close,"hlStyle":b.highLow,"oStyle":b.open,"cStyle":b.close,"index":a.index,"eles":a.candlestickEles,"fallingCloseStyle":b.fallingClose,"risingCloseStyle":b.risingClose,"unchangeCloseStyle":b.unchangeClose}),this.isHover=!1)},a.prototype._paintCandlestickGraphic=function(a,b,c,h,i){function j(a){return a?{"fill":a.fill,"stroke":a.stroke}:null}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=this.options,F=a.x[b],G=a.high[b],H=a.low[b],I=a.open?a.open[b]:0,J=a.close?a.close[b]:0,K=(this.bounds.startX,this.bounds.endY),L=this.type!==f,M=E.axis,N=M.x,O=M.y,P=N.min,Q=O.min,R=N.max,S=O.max,T=0,U=0,V=this.width/(R-P),W=this.height/(S-Q);return m=h.open,l=h.close,k=h.highLow,y=h.fallingClose,z=h.risingClose,A=h.unchangeClose,n=k[g]||0,s=(F-P)*V+this.bounds.startX,t=K-(G-Q)*W,u=s,v=K-(H-Q)*W,L&&(this.type===d?(T=m[g]||0,U=l[g]||0):(I>J?(T=U=y[g]||0,C=y.width||0,B=j(y),D=y):I===J?(T=U=A[g]||0,C=A.width||0,B=j(A),D=A):(T=U=z[g]||0,C=z.width||0,B=j(z),D=z),k=$.extend({},B,k),c-=(T+U)/2,2>c&&(c=2)),x=c/2*.8,this.type===e&&(x=Math.min(C/2,x)),1>x&&(x=1),o=s-x,p=K-(I-Q)*W,q=s+x,r=K-(J-Q)*W,p=Math.max(p,t+T/2),p=Math.min(p,v-T/2),r=Math.max(r,t+U/2),r=Math.min(r,v-U/2)),this.type===d?(w=this._paintOHLC({"h":{"x":s,"y":t},"l":{"x":u,"y":v},"o":{"x":o,"y":p},"c":{"x":q,"y":r}}),w.open.attr(m),w.close.attr(l)):this.type===f?w=this._paintHL({"h":{"x":s,"y":t},"l":{"x":u,"y":v}}):(w=this._paintCandlestick({"h":{"x":s,"y":t},"l":{"x":u,"y":v},"o":{"x":o,"y":p},"c":{"x":q,"y":r}}),w.high.attr(k),w.low.attr(k),w.openClose.attr(D)),w.highLow&&w.highLow.attr(k),this._formatCandlestick({"high":G,"low":H,"open":I,"close":J,"hlStyle":k,"oStyle":m,"cStyle":l,"index":b,"eles":w,"fallingCloseStyle":y,"risingCloseStyle":z,"unchangeCloseStyle":A}),w.path.attr({"stroke-width":Math.max(C||1,U||1,n||1,T||1),"fill":"#000"}),this.trackers.push(w.path),w.x=$.round(s),h.highLow=k,w},a.prototype._formatCandlestick=function(a){var b,c,f=this.options.candlestickFormatter,g=(a.index,a.high),h=a.low,i=a.open,j=a.close,k=a.hlStyle,l=a.oStyle,m=a.cStyle,n=a.fallingCloseStyle,o=a.risingCloseStyle,p=a.unchangeCloseStyle,q=this.type;f&&(b={"high":g,"low":h},c={"highLow":k},q===d?($.extend(b,{"open":i,"close":j}),$.extend(c,{"open":l,"close":m})):q===e&&($.extend(b,{"open":i,"close":j}),$.extend(c,{"fallingClose":n,"risingClose":o,"unchangeClose":p})),f.call(this,{"data":b,"eles":a.eles,"style":c}))},a.prototype._paintTracker=function(a,b){var c,d,e,f,g=[],h=[];return $.each(a,function(a,b){g.push(b.x),h.push(b.y)}),c=Math.max.apply(null,g),d=Math.min.apply(null,g),e=Math.max.apply(null,h),f=Math.min.apply(null,h),b.rect(d,f,c-d,e-f)},a.prototype._paintOHLC=function(a){var b,c,d,e,f=a.h,g=a.l,h=a.o,i=a.c,j=this.options.canvas,k=["M",f.x,",",f.y,"V",g.y],l=["M",h.x,",",h.y,"H",f.x],m=["M",f.x,",",i.y,"H",i.x];return b=j.path(k.join("")),c=j.path(l.join("")),d=j.path(m.join("")),e=this._paintTracker(a,j),this._setTrackerForCandlestickEle([b,c,d],e),this.group.push(c,d,b),{"highLow":b,"open":c,"close":d,"path":e}},a.prototype._setTrackerForCandlestickEle=function(a,b){$.each(a,function(a,c){c.node.tracker=b})},a.prototype._paintHL=function(a){var b,c,d=a.h,e=a.l,f=this.options.canvas;return b=f.path(["M",d.x,",",d.y,"V",e.y].join("")),c=b.clone(),this._setTrackerForCandlestickEle([b],c),this.group.push(b),{"highLow":b,"path":c}},a.prototype._paintCandlestick=function(a){var b,c,d,e,f,g,h,i,j,k=a.h,l=a.l,m=a.o,n=a.c,o=this.options.canvas;return n.y<m.y?(e=n.y,f=m.y):(e=m.y,f=n.y),g=["M",k.x,",",k.y,"V",e],h=["M",l.x,",",l.y,"V",f],i=["M",m.x,",",e,"H",n.x,"V",f,"H",m.x,"V",e,"Z"],c=o.path(g.join("")),d=o.path(h.join("")),b=o.path(i.join("")),j=this._paintTracker(a,o),this.group.push(c,d,b),this._setTrackerForCandlestickEle([c,d,b],j),{"high":c,"low":d,"openClose":b,"path":j}},a.prototype._handleStyle=function(a,b){return a?(b!==!0&&$.each(["width","height"],function(b,c){a[c]&&(a["stroke-width"]=a[c],delete a[c])}),a):void 0},a.prototype._extendStyles=function(a){var b=$.extend(!0,{},a);return b&&(b.highLow=this._handleStyle(b.highLow),b.close=this._handleStyle(b.close),b.open=this._handleStyle(b.open),b.fallingClose=this._handleStyle(b.fallingClose,!0),b.risingClose=this._handleStyle(b.risingClose,!0),b.unchangeClose=this._handleStyle(b.unchangeClose,!0)),b},a.prototype._paintCandlesticks=function(){var a,c=[],d=this,e=d.options,f=e.seriesList,g=e.seriesStyles,h=e.seriesHoverStyles,i=d.element.data("fields")||{},j=i.chartElements||{},k=j.candlestickEles||[],l=e.animation,m=e.seriesTransition,n=e.wijCSS,o=[],p=[],q=e.canvas;$.each(f,function(f,i){var j=d._extendStyles(g[f]),r=d._extendStyles(h[f]);i.isTrendline?b.TrendlineRender.renderSingleTrendLine(i,j.highLow,r.highLow,e.axis,void 0,d.fieldsAniPathAttr,l,m,f,d.bounds,q,o,p,d.animationSet,d.aniPathsAttr,n,c):(a=d._paintCandlestickElements(i,j,r),
k=k.concat(a),c.push(a))}),i.seriesEles=c,i.trackers=d.trackers,j.candlestickEles=k,j.group=d.group,i.trendLines=o,i.chartElements=j,d.fields=i,d.trackers.toFront()},a.prototype._playAnimation=function(){var a,c,d=this.options.animation,e=d&&d.enabled,f=this.fields.trendLines,g={"txx":this.options.widget.extremeValue.txx,"txn":this.options.widget.extremeValue.txn,"tyx":this.options.widget.extremeValue.y[0].tyx,"tyn":this.options.widget.extremeValue.y[0].tyn};e&&(a=d.duration||400,c=d.easing,this.group.attr("clip-rect",[this.bounds.startX,this.bounds.startY,0,this.height].join(",")),this.group.wijAnimate({"clip-rect":[this.bounds.startX,this.bounds.startY,this.width,this.height].join(",")},a,c),f&&f.length&&b.TrendlineRender.playAnimation(a,c,this.options.seriesTransition,this.animationSet,this.bounds,this.paths,this.fieldsAniPathAttr,null,this.options.axis,g))},a.prototype.render=function(){this.group=this.options.canvas.group(),this._paintCandlesticks(),this.element.data("fields",this.fields),this._unbindLiveEvents(),this._bindLiveEvents(),this._playAnimation()},a}();b.CandlestickChartRender=j;var k=function(a){function b(){a.apply(this,arguments),this.wijCandlestickChart="wijmo-wijcandlestickchart",this.candlestickChart="wijcandlestickchart",this.candlestickChartTracker="candlesticktracker"}return __extends(b,a),b}(b.wijchartcore_css);b.wijcandlestickchart_css=k;var l=function(b){function c(){b.apply(this,arguments),this.type=e,this.animation={"enabled":!0,"duration":400,"easing":">"},this.wijCSS=new a.chart.wijcandlestickchart_css,this.candlestickFormatter=null,this.showChartLabels=!0,this.chartLabelStyle={},this.chartLabelFormatString="",this.hint={"contentStyle":{"font-size":12}},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(c,b),c}(b.wijchartcore_options);i.prototype.options=$.extend(!0,{},b.wijchartcore.prototype.options,new l),i.prototype.widgetEventPrefix=c,$.wijmo.registerWidget(c,i.prototype)}(a.chart||(a.chart={}));a.chart}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d="wijtreenode",e=function(a,b){var d="",f=c.wijmo.wijtreenode.prototype.options;return c.each(a,function(a,g){if(!c.isPlainObject(g))return!0;var h=g.navigateUrl||"#",i=g.nodes&&g.nodes.length>0,j=null===g.expanded||void 0===g.expanded?f.expanded:g.expanded,k=null===g.wijCSS||void 0===g.wijCSS?f.wijCSS:g.wijCSS,l="<li class='"+(i?"wijmo-wijtree-parent":"wijmo-wijtree-item")+"'><div class='wijmo-wijtree-node "+k.stateDefault+(i?" wijmo-wijtree-header ":"")+(b&&i?j?"wijmo-state-expanded":"wijmo-state-collapsed":"")+"' role='treeitem' aria-expanded='false' aria-checked='false' aria-selected='false'><span class='wijmo-wijtree-inner "+k.helperClearFix+" "+k.cornerAll+"'>";i&&(l+="<span class='wijmo-wijtree-hitarea "+(b?k.icon+" "+(j?k.iconArrowRightDown:k.iconArrowRight):"")+"'></span>"),l+="<span class='wijmo-wijtree-nodeimage'></span><a href='"+h+"'>","string"==typeof g.text&&g.text&&(l+="<span>"+g.text+"</span>"),l+="</a></span></div>",i&&(l+="<ul class='wijmo-wijtree-list wijmo-wijtree-child "+k.helperReset+"'",b&&!j&&(l+=" style='display: none' "),l+=">",l+=e(g.nodes,b),l+="</ul>"),l+="</li> ",d+=l}),d},f=function(a,b,d,e,f){return c.fn[e]&&(a.data("owner",d),b&&c.isPlainObject(b)?(c.extend(b,{"treeClass":f}),a[e](b)):a[e]({"treeClass":f})),a},g=function(a,b,d,e,g){return c.fn[e]?(f(a,b,d,e,g),a.data(a.data("widgetName"))):void 0},h=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._create=function(){window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c)),this._useDOMInit=!0,this._initState(),this._createTree(),this._attachEvent(),this._attachNodeEvent()},b.prototype._setOption=function(b,c){var d,e=this,f=!1;e.options;switch(b){case"allowDrag":e._setAllowDrag(c);break;case"allowDrop":e._setAllowDrop(c);break;case"showCheckBoxes":e._setCheckBoxes(c);break;case"showExpandCollapse":e.options.showExpandCollapse!==c&&(f=!0);break;case"disabled":d=e.element.find(":wijmo-wijtreecheck"),d.length&&d.wijtreecheck("option","disabled",c),e._setAllowDrag(!c)}a.prototype._setOption.call(this,b,c),"nodes"===b&&(c&&c.length&&(e._useDOMInit=!1),e._createChildNodes()),f===!0&&e._setHitArea(c)},b.prototype._initState=function(){var a=this,b=a.options;a._selectedNodes=[],a._checkedNodes=[],b.nodes||(b.nodes=[]),b.nodes&&b.nodes.length&&(a._useDOMInit=!1),a._insertPosition="unKnown",a.nodeWidgetName="wijtreenode"},b.prototype._createTree=function(){var a=this,b=a.options,d=["wijmo-wijtree",b.wijCSS.widget,b.wijCSS.content,b.wijCSS.helperClearFix,b.wijCSS.cornerAll].join(" ");a.element.is("ul")?(a.$nodes=a.element,a.element.wrap("<div></div>"),a.widgetDom=a.element.parent()):a.element.is("div")&&(a.widgetDom=a.element,a.$nodes=a.widgetDom.children("ul").eq(0)),a.$nodes.length&&(a.widgetDom.addClass(d).attr({"role":"tree","aria-multiselectable":!0}),a.$nodes.addClass("wijmo-wijtree-list "+b.wijCSS.helperReset+(b.showExpandCollapse?"":" wijmo-wijtree-allexpanded")),a._createChildNodes(),a.widgetDom.append(c("<div>").css("clear","both"))),b.disabled&&a.disable()},b.prototype._createChildNodes=function(){var a,b=this,d={"nIndex":void 0},f=[],h=b.$nodes,i=b.options.nodes;h.detach(),!b._useDOMInit||i.length?(h.empty(),a=e(i,b.options.showExpandCollapse),h.html(a),b.htmlGenerated=!0,a=h.children("li"),a.each(function(a,e){var h,i=c(e);d.nIndex=a,h=g(i,d,b,b.nodeWidgetName,b.widgetFullName),f.push(h)}),b.htmlGenerated=!1):(a=h.children("li"),a.each(function(a,e){var h,j=c(e);h=g(j,d,b,b.nodeWidgetName,b.widgetFullName),f.push(h),!c.browser.safari&&h.$navigateUrl&&h.$navigateUrl.length&&h.$navigateUrl.is("a")&&h.$navigateUrl.addClass("wijmo-wijtree-link"),i.push(h.options)})),this.widgetDom.append(h),b._hasChildren=f.length>0,b._setField("nodes",f),b.nodes=f},b.prototype._createNodeWidget=function(a,b){return f(a,b,this,this.nodeWidgetName,this.widgetFullName)},b.prototype._attachEvent=function(){var a=this;a.element.bind(c.browser.msie?"focusin.":"focus."+a.widgetName,c.proxy(a._onFocus,a)).bind("mouseover."+this.widgetName,c.proxy(a._onMouseOver,a)),a.options.allowDrop&&a._attachDroppable()},b.prototype._attachDroppable=function(){var a=this,b=a.options,d={"accept":"li","scope":"tree","drop":void 0},e=function(c){b.showCheckBoxes&&b.allowTriState&&!c.element.is(":"+a.widgetFullName)&&c._getField("nodes").length>0&&c._getField("nodes")[0]._setParentCheckState()},f=b.droppable;c.extend(d,f),d.drop=function(d,g){var h,i,j,k,l,m,n,o=g.draggable,p=a._getNodeWidget(o),q=-1;return a._trigger("nodeBeforeDropped",d,g)===!1||!p||b.disabled?void(a._isDragging=!1):(h=p._dropTarget,i=p._insertPosition,void(h&&"unKnown"!==i&&(j=p._getOwner(),j&&(n=o.index()),p._tree._isDragging=!1,"end"===i?(q=h._getField("nodes").length,k=h):("before"===i||"after"===i)&&(k=h._getOwner(),l=k._getField("nodes"),m=c.inArray(h,l),-1!==m&&(q="before"===i?m:m+1)),f&&c.isFunction(f.drop)?(g.oldParent=j.element,g.newParent=k.element,g.oldIndex=n,g.newIndex=q,f.drop.call(a.element,d,g)):(j&&j.remove(o),-1!==q&&(("before"===i||"after"===i)&&m!=c.inArray(h,l)&&q--,a.$nodes.children("li").length?k.add(o,q):a.add(o,q))),c("a",o).eq(0).blur(),p.options.selected&&p._setSelected(!1),e(j),e(k),c.extend(g,{"sourceParent":j?j.element:null,"sIndex":n,"targetParent":k.element,"tIndex":q,"widget":p}),a._trigger("nodeDropped",d,g))))},c.fn.droppable&&a.widgetDom.droppable(d)},b.prototype._attachNodeEvent=function(){this.element.bind("click."+this.widgetName,c.proxy(this._onClick,this)).bind("mouseout."+this.widgetName,c.proxy(this._onMouseOut,this)).bind("keydown."+this.widgetName,c.proxy(this._onKeyDown,this))},b.prototype._onClick=function(a){this._callEvent(a,"_onClick"),c.browser.webkit&&this.widgetDom.focus()},b.prototype._onFocus=function(a){this._callEvent(a,"_onFocus")},b.prototype._onKeyDown=function(a){this._callEvent(a,"_onKeyDown")},b.prototype._onMouseOut=function(a){this._callEvent(a,"_onMouseOut")},b.prototype._onMouseOver=function(a){this._callEvent(a,"_onMouseOver")},b.prototype._callEvent=function(a,b){var c,d=a.target;if(d){if(c=this._getNodeWidgetByDom(d),null===c)return;c[b](a)}},b.prototype._nodeSelector=function(){return":wijmo-wijtreenode"},b.prototype.getSelectedNodes=function(){return this._selectedNodes},b.prototype.getCheckedNodes=function(){var a=this,b=[],d=a.nodeWidgetName;return c(a._nodeSelector(),a.element).each(function(a,e){c(e)[d]("option","checked")&&"indeterminate"!==c(e)[d]("option","checkState")&&b.push(c(e))}),b},b.prototype.destroy=function(){var b=this,d=b.$nodes,e=b.options,f=["wijmo-wijtree",e.wijCSS.widget,e.wijCSS.content,e.wijCSS.helperClearFix,e.wijCSS.cornerAll].join(" ");b.widgetDom.removeClass(f).removeAttr("role").removeAttr("aria-multiselectable"),b.widgetDom.data("ui-droppable")&&b.widgetDom.droppable("destroy"),b.element.unbind("."+b.widgetName),b.widgetDom.children("div[style]:last").remove(),d.removeData("nodes").removeClass("wijmo-wijtree-list "+e.wijCSS.helperReset),d.children("li").each(function(a,d){var e=b._getNodeWidget(c(d));e&&e.destroy()}),c.wijmo.wijtree.prototype.options.nodes=null,a.prototype.destroy.call(this)},b.prototype.add=function(a,b){var d,e,f,g,h,i,j=null,k={},l=this;if(h=c.browser.safari?"<li><a href='{0}'>{1}</a></li>":"<li><a href='{0}' class='wijmo-wijtree-link'>{1}</a></li>","string"==typeof a?(d=c(h.replace(/\{0\}/,"#").replace(/\{1\}/,a)),l._createNodeWidget(d,k),j=d.data(d.data("widgetName"))):a.jquery?(a.data("widgetName")||l._createNodeWidget(a,k),j=a.data(a.data("widgetName")),j._setField("owner",l)):a.nodeType?(d=c(a),l._createNodeWidget(d,k),j=d.data(d.data("widgetName"))):c.isPlainObject(a)&&(d=c(h.replace(/\{0\}/,a.url?a.url:"#").replace(/\{1\}/,a.text)),l._createNodeWidget(d,a),j=d.data(d.data("widgetName"))),null!==j){for(e=l._getField("nodes"),(!b||b>e.length)&&0!==b&&(b=e.length),i=j._getField("nodes"),j._tree=l,f=0;f<i.length;f++)i[f]._tree=l;g=e.length,g>0&&g!==b?j.element.get(0)!==e[b].element.get(0)&&j.element.insertBefore(e[b].element):l.$nodes.append(j.element),l._changeCollection(b,j),j._initNodeClass()}},b.prototype.remove=function(a){var b,c,d=-1;a&&a.jquery?d=a.index():"number"==typeof a&&(d=a),c=this._getField("nodes"),0>d||d>=c.length||(b=c[d],b.element.detach(),this._changeCollection(d))},b.prototype._changeCollection=function(a,b){var c=this._getField("nodes"),d=this.options.nodes;b?(c.splice(a,0,b),d.splice(a,0,b.options)):(c.splice(a,1),d.splice(a,1))},b.prototype.getNodes=function(){return this.nodes},b.prototype.findNodeByText=function(a){var b=c(".wijmo-wijtree-node a>span",this.$nodes).filter(function(){return c(this).text()===a});return b.length?this._getNodeWidgetByDom(b.get(0)):null},b.prototype._setAllowDrag=function(a){var b,d=this,e=d._nodeSelector(),f="wijmo-"+d.nodeWidgetName;c.fn.draggable&&(a?(b=d.element.find(e),b.each(function(){var a=c(this).data(f);(c(this).data("ui-draggable")||a.$navigateUrl.data("events"))&&a.$navigateUrl.data("events").mousedown||a.$navigateUrl.one("mousedown",a,a._onMouseDown)})):(b=d.element.find(e+":ui-draggable"),b.draggable("destroy")))},b.prototype._setAllowDrop=function(a){c.fn.droppable&&(a?this.widgetDom.data("ui-droppable")||this._attachDroppable():this.widgetDom.droppable&&this.widgetDom.droppable("destroy"))},b.prototype._setCheckBoxes=function(a){var b=this;b.$nodes.children("li").each(function(d,e){var f=b._getNodeWidget(c(e));null!==f&&f._setCheckBoxes(a)})},b.prototype._setHitArea=function(a){var b=this;b.$nodes[a?"addClass":"removeClass"]("wijmo-wijtree-allexpanded"),b.$nodes.children("li").each(function(d,e){var f=b._getNodeWidget(c(e));null!==f&&f._setHitArea(a)})},b.prototype._getNodeWidget=function(a){if(a.is(this._nodeSelector())){var b=a.data(a.data("widgetName"));return b}return null},b.prototype._getNodeWidgetByDom=function(a){var b=this._getNodeByDom(a);return this._getNodeWidget(b)},b.prototype._getNodeByDom=function(a){return c(a).closest(this._nodeSelector())},b.prototype._refreshNodesClass=function(){var a,b=this._getField("nodes");for(a=0;a<b.length;a++)b[a]._initNodeClass()},b.prototype._getField=function(a){return this.element.data(a)},b.prototype._setField=function(a,b){return this.element.data(a,b)},b}(a.wijmoWidget);b.wijtree=h;var i=function(b){function h(){b.apply(this,arguments)}return __extends(h,b),h.prototype._setOption=function(a,d){var e,f=this;switch(a){case"accessKey":null!==f.$navigateUrl&&f.$navigateUrl.attr("accesskey",d);break;case"checked":f._checkState=d?"checked":"unChecked",f._setChecked(d);break;case"collapsedIconClass":case"expandedIconClass":case"itemIconClass":f.options[a]=d,f._initNodeImg();break;case"expanded":f._setExpanded(d);break;case"selected":f._setSelected(d);break;case"text":f._setText(d);break;case"toolTip":f._setToolTip(d);break;case"navigateUrl":f._setNavigateUrlHref(d);break;case"disabled":if(f._isClosestDisabled()&&d===!0)return;e=f.element.find(":wijmo-wijtreecheck"),e.length&&e.wijtreecheck("option","disabled",d)}"nodes"===a?(f.options.nodes.length=0,c.each(d,function(a,b){f.options.nodes.push(b)}),f.options.nodes.concat(),f._hasChildren=f._getChildren(),f._createChildNodes(f.element),f._initNodeClass()):b.prototype._setOption.call(this,a,d)},h.prototype._initState=function(){this._tree=null,this._dropTarget=null,this._checkState="unChecked",this._value=this._text="",this._insertPosition="unKnown",this._hasNodes=!1},h.prototype._create=function(){var a=this,b=a.options;a._initState(),a.element.data("widgetName","wijmo-wijtreenode"),a._createTreeNode(),a._initNode(),b.selected&&a._tree._selectedNodes.push(a),b.checked&&(a._checkState="checked",a.$checkBox&&("indeterminate"===b.checkState?a.$checkBox.wijtreecheck("option","checkState","triState"):a.$checkBox.wijtreecheck("option","checkState","check")))},h.prototype._createTreeNode=function(){var a,b,d=this.element,e=this,f=e.options;null===e._tree&&(e._tree=e._getTree()),isNaN(f.nIndex)?f.nodes||(f.nodes=[]):(b=e._getOwner().options,a=b.nodes[f.nIndex],a&&!a.nodes&&(a.nodes=[]),c.extend(f,a),b.nodes[f.nIndex]=f),e.$nodeBody=null,e.$checkBox=null,e.$hitArea=null,e.$nodes=null,e.$subnodes=null,e._isHtmlGenerated()?(e.$nodeBody=d.children(".wijmo-wijtree-node"),e.$inner=e.$nodeBody.children(".wijmo-wijtree-inner"),e.$nodeImage=e.$inner.children(".wijmo-wijtree-nodeimage"),e._tree.options.showCheckBoxes===!0&&(e.$checkBox=c("<div>"),e.$checkBox.insertAfter(e.$nodeImage),e.$checkBox.wijtreecheck()),e.$navigateUrl=e.$inner.children("a"),e.$text=e.$navigateUrl.children("span").eq(0),c.browser.safari||e.$navigateUrl.addClass("wijmo-wijtree-link")):(e.$nodeImage=c("<span>"),e.$nodeBody=c("<div>").attr({"role":"treeitem","aria-expanded":!1,"aria-checked":!1,"aria-selected":!1}),e._tree.options.showCheckBoxes===!0&&(e.$checkBox=c("<div>")),e.$navigateUrl=d.children("a"),0===e.$navigateUrl.length&&(e.$navigateUrl=d.children("div"),e.$navigateUrl.addClass("wijmo-wijtree-template"),e._isTemplate=!0),0===e.$navigateUrl.length&&(e.$navigateUrl=c("<a href='#'></a>")),e._isTemplate||(e.$text=e.$navigateUrl.children("span").eq(0),0===e.$text.length&&(e.$navigateUrl.wrapInner("<span></span>"),e.$text=e.$navigateUrl.children("span").eq(0))),e.$inner=c("<span></span>").addClass(f.wijCSS.helperClearFix+" wijmo-wijtree-inner "+f.wijCSS.cornerAll),e.$inner.append(e.$nodeImage),null!==e.$checkBox&&(e.$inner.append(e.$checkBox),e.$checkBox.wijtreecheck()),e.$inner.append(e.$navigateUrl),e.$nodeBody.append(e.$inner),d.prepend(e.$nodeBody)),e._hasChildren=e._getChildren(),e._createChildNodes(d)},h.prototype._createChildNodes=function(a){var b=this,d=[],e=b.options;b._hasChildren?(null===b.$nodes&&(b.$nodes=a.children("ul").eq(0)),b._isHtmlGenerated()?b.$hitArea=b.$inner.children(".wijmo-wijtree-hitarea"):(a.addClass("wijmo-wijtree-parent"),b.$nodeBody.addClass("wijmo-wijtree-node wijmo-wijtree-header "+e.wijCSS.stateDefault),b.$hitArea=c("<span>"),b.$inner.prepend(b.$hitArea),b.$nodes.addClass("wijmo-wijtree-list wijmo-wijtree-child "+e.wijCSS.helperReset)),d=b._createChildNode()):b._isHtmlGenerated()||(a.addClass("wijmo-wijtree-item"),b.$nodeBody.addClass("wijmo-wijtree-node "+e.wijCSS.stateDefault)),b._setField("nodes",d)},h.prototype._isHtmlGenerated=function(){return this.htmlGenerated?!0:this._tree&&this._tree.htmlGenerated?!0:!1},h.prototype._createChildNode=function(){var a,b=this,f=b.options,h=[],i={"nIndex":void 0,"treeClass":f.treeClass,"cfli":void 0,"nodes":void 0};return f.nodes&&f.nodes.length?b._isHtmlGenerated()?(null===b.$subnodes&&b._updateSubNodes(),c.each(b.$subnodes,function(a,c){var e;i.nIndex=a,e=g(c,i,b,d,b.options.treeClass),e._index=a,h.push(e)})):(b.$nodes&&b.$nodes.length?b.$nodes.empty():b.$nodes=c("<ul>").appendTo(b.element),b.$nodes.html(e(f.nodes,b._tree.options.showExpandCollapse)),b.$subnodes=[],b.htmlGenerated=!0,a=b.$nodes.children("li"),a.each(function(a,e){var f,j=c(e);b.$subnodes.push(j),i.nIndex=a,f=g(j,i,b,d,b.options.treeClass),f._index=a,h.push(f)}),b.htmlGenerated=!1):(f.nodes||(f.nodes=[]),null===b.$subnodes&&b._updateSubNodes(),c.each(b.$subnodes,function(a,e){var f;i.cfli=!0,i.nIndex=a,i.nodes=[],f=g(e,i,b,d,b.options.treeClass),c.browser.safari||e.children(".wijmo-wijtree-node").find(".wijmo-wijtree-inner a").addClass("wijmo-wijtree-link"),f._index=a,h.push(f)})),h},h.prototype._initNode=function(){var a=this,b=a.options;a._initialized||(a._initialized=!0,a._initNavigateUrl(),!a._isTemplate&&a.$text&&(a._text=a.$text.html(),b.text=a._text),a._hasChildren=a._getChildren(),a._initNodesUL(),a._initNodeClass(),a._initNodeImg(),a._initCheckBox(),a.$navigateUrl.one("mousedown",a,a._onMouseDown))},h.prototype._initNodeClass=function(){var a,b=this,d=b.options,e="wijmo-wijtree-item",f=d.wijCSS.icon+" "+(d.expanded?d.wijCSS.iconArrowRightDown:d.wijCSS.iconArrowRight);b._tree.options.showExpandCollapse&&(b._hasChildren||d.hasChildren?(b._isHtmlGenerated()||(b.$nodeBody.removeClass("wijmo-state-expanded wijmo-state-collapsed"),d.expanded?b.$nodeBody.addClass("wijmo-state-expanded"):b.$nodeBody.addClass("wijmo-state-collapsed"),null!==b.$hitArea&&(b.$hitArea.removeClass([d.wijCSS.icon,d.wijCSS.iconArrowRightDown,d.wijCSS.iconArrowRight].join(" ")),b.$hitArea.addClass(f))),null===b.$hitArea&&(b.$hitArea=c("<span>").addClass(f).prependTo(b.$inner),b.element.removeClass(e).addClass("wijmo-wijtree-parent")),b._hasChildren&&b.$nodes&&b.$nodes.length&&(a=d.expanded?"":"none",b.$nodes.css({"display":a}))):b.$hitArea&&b.$hitArea.length&&(b.$hitArea.remove(),b.$hitArea=null,b.element.removeClass("wijmo-wijtree-parent").addClass(e))),!b._hasChildren&&b.$nodes&&b.$nodes.length&&b.$nodes.css({"display":"none"}),d.selected&&b.$inner&&b.$inner.addClass(d.wijCSS.stateActive)},h.prototype._initCheckBox=function(){var a=this,b=a.options;if(a.$checkBox&&b.checkState)switch(b.checkState){case"checked":a.$checkBox.wijtreecheck("option","checkState","check");break;case"indeterminate":a.$checkBox.wijtreecheck("option","checkState","triState");break;case"unChecked":a.$checkBox.wijtreecheck("option","checkState","unCheck");break;default:a.$checkBox.wijtreecheck("option","checkState","unCheck")}},h.prototype._initNodesUL=function(){var a=this;!a._isHtmlGenerated()&&a._tree.options.showExpandCollapse&&a._hasChildren&&a.$nodes&&a.$nodes.length&&a.$nodes[a._expanded?"show":"hide"]()},h.prototype._initNavigateUrl=function(){var a,b=this;b.$navigateUrl.bind("blur."+b.widgetName,b,b._onBlur),b._isHtmlGenerated()||(a=b.$navigateUrl.attr("href"),this._isTemplate||a&&0!=a.length||b._setNavigateUrlHref("#"))},h.prototype._applyIconClass=function(a,b){var c=a.attr("expandediconclass");c&&(b.expandedIconClass=c,a.removeAttr("expandediconclass")),c=a.attr("collapsediconclass"),c&&(b.collapsedIconClass=c,a.removeAttr("collapsediconclass")),c=a.attr("itemiconclass"),c&&(b.itemIconClass=c,a.removeAttr("itemiconclass"))},h.prototype._initNodeImg=function(){var a=this,b=a.options,d=a.element;null!==a.$nodeImage&&a.$nodeImage.length||(a.$nodeImage=c("<span>")),a._applyIconClass(d,b),""!==b.collapsedIconClass&&""!==b.expandedIconClass?(a.$nodeImage.removeClass().addClass(b.wijCSS.icon).addClass(b.expanded?b.expandedIconClass:b.collapsedIconClass),a._tree.options.showExpandCollapse||a.$nodeImage.addClass(b.expandedIconClass),a.$nodeImage.insertBefore(a.$checkBox)):""!==b.itemIconClass&&(a.$nodeImage.removeClass().addClass(b.wijCSS.icon),a.$nodeImage.addClass(b.itemIconClass),a.$nodeImage.insertBefore(a.$checkBox))},h.prototype._setNavigateUrlHref=function(a){this.$navigateUrl&&((""===a||"undefined"==typeof a||null===a)&&(a="#"),this.$navigateUrl.attr("href",a))},h.prototype._editNode=function(){this._tree._editMode=!0,this.$navigateUrl.hide(),this.$editArea||(this.$editArea=c('<input type="text">').wijtextbox()),this.$editArea.val(this.$text.html()),this.$editArea.insertBefore(this.$navigateUrl),this.$editArea.bind("blur",this,this._editionComplete),this.$editArea.focus()},h.prototype._editionComplete=function(a){var b,c=a.data;c._tree._editMode=!1,c.$editArea&&(b=c.$editArea.val(),c.$editArea.remove()),c.$navigateUrl.show(),c.$editArea=null,c._changeText(b)},h.prototype._changeText=function(a){var b=this,c=b.options;null!==b.$text&&""!==a&&(b.$text.text(a),c.text=a,b._tree._trigger("nodeTextChanged",null,b))},h.prototype._expandCollapseItem=function(){var a=this,b=a.options;a._tree.options.disabled||a._isClosestDisabled()||(a._hasChildren||b.hasChildren)&&a._setExpanded(!b.expanded)},h.prototype._expandNode=function(a){var b=this,c=b._tree.options,d=a?"nodeExpanding":"nodeCollapsing";b._tree._trigger(d,null,{"node":this,"params":this.options.params})!==!1&&(b.$nodeBody.attr("aria-expanded",a),b._expanded=a,b.options.expanded=a,c.disabled||b._isClosestDisabled()||(a?c.expandDelay>0?("undefined"!=typeof b._expandTimer&&(b._expandTimer=window.clearTimeout(b._expandTimer)),b._expandTimer=window.setTimeout(function(){b._expandNodeVisually()},c.expandDelay)):b._expandNodeVisually():c.collapseDelay>0?(b._collapseTimer=window.clearTimeout(b._collapseTimer),b._collapseTimer=window.setTimeout(function(){b._collapseNodeVisually()},c.collapseDelay)):b._collapseNodeVisually()))},h.prototype._expandNodeVisually=function(){var a,b=this,d=b.options;b._tree.options.autoCollapse&&(a=b.element.siblings(":"+this.widgetFullName),c.each(a,function(c){var d=b._getNodeWidget(a[c]);d.options.expanded&&d._setExpanded(!1)})),""!==d.collapsedIconClass&&""!==d.expandedIconClass&&b.$nodeImage.removeClass(d.collapsedIconClass).addClass(d.expandedIconClass),b._internalSetNodeClass(!0),b._show()},h.prototype._collapseNodeVisually=function(){var a=this;""!==a.options.collapsedIconClass&&""!==a.options.expandedIconClass&&a.$nodeImage.removeClass(a.options.expandedIconClass).addClass(a.options.collapsedIconClass),a._internalSetNodeClass(!1),a._hide()},h.prototype._internalSetNodeClass=function(a){var b=this.options.wijCSS,c=[b.icon,b.iconArrowRightDown,b.iconArrowRight].join(" ");this.$hitArea&&(this.$hitArea.removeClass(c).addClass(b.icon).addClass(a?b.iconArrowRightDown:b.iconArrowRight),this.$nodeBody.removeClass("wijmo-state-expanded").removeClass("wijmo-state-collapsed"),a?this.$nodeBody.addClass("wijmo-state-expanded"):this.$nodeBody.addClass("wijmo-state-collapsed"))},h.prototype._show=function(){this._animation(!0)},h.prototype._hide=function(){this._animation(!1)},h.prototype._animation=function(a){function b(a){a.css(f)!==e&&a.css(f,e)}var d,e,f,g=this,h=g.$nodes,i=a?"expandAnimation":"collapseAnimation",j=a?"nodeExpanded":"nodeCollapsed",k=g._tree.options[i];h&&h.length&&(k?(f=c.browser.msie&&parseInt(c.browser.version)<9?"filter":"opacity",e=h.css(f),d=k.animated||k.effect,c.effects&&d?h[a?"show":"hide"](d,{"easing":k.easing},k.duration,function(){b(h),g._tree._trigger(j,null,g)}):h[a?"show":"hide"](k.duration,function(){b(h),g._tree._trigger(j,null,g)})):(h[a?"show":"hide"](),g._tree._trigger(j,null,g)))},h.prototype._getBounds=function(a){var b=a.height(),c=a.width(),d=a.offset().top,e=a.offset().left;return{"h":b,"w":c,"t":d,"l":e}},h.prototype._isMouseInsideRect=function(a,b){return a.x<b.l||a.x>=b.l+b.w?!1:a.y<=b.t+1||a.y>=b.t+b.h?!1:!0},h.prototype._getNodeByMouseOn=function(a){return c("li").each(function(){var b=this._getBounds(c(this));return a.y>b.t&&a.y<b.t+b.h&&a.x>b.l&&a.x<b.l+b.w?c(this):void 0}),null},h.prototype._drowTemplate=function(a,b,c){var d="unKnown",e=c.is(".wijmo-wijtree-node")?c:c.children(".wijmo-wijtree-node"),f=this._getBounds(e);return b.width(e.width()),a.y>f.t&&a.y<f.t+f.h/2?(b.offset({"left":f.l,"top":f.t}),d="before"):a.y>f.t+f.h/2&&a.y<f.t+f.h&&(b.offset({"left":f.l,"top":f.t+f.h}),d="after"),d},h.prototype._beginDrag=function(a){var b,d=this,e=d.element,f=d._tree.options,g=f.draggable,h={"cursor":"point","cursorAt":{"top":15,"left":-25},"helper":function(){return c("<div>"+d.$navigateUrl.html()+"</div>").addClass(f.wijCSS.header).addClass(f.wijCSS.cornerAll)},"distance":c.browser.msie?1:10,"handle":d.$navigateUrl,"scope":"tree","stop":void 0,"start":void 0,"drag":void 0},i=c("<div>").addClass("wijmo-wijtree-insertion").addClass(f.wijCSS.stateDefault);"string"==typeof f.dropVisual?(b=c(f.dropVisual),i=b.length?b:i):c.isFunction(f.dropVisual)&&(b=c(f.dropVisual.call()),i=b.length?b:i),i.hide(),c.extend(h,g),h.start=function(a,b){d._tree._isDragging=!0,d._tree.widgetDom.prepend(i),d._tree._trigger("nodeDragStarted",a,d),g&&c.isFunction(g.start)?g.start.call(d.element,a,b):e.hide()},h.drag=function(a,b){var e,f=a.srcElement||a.originalEvent.target,h=c(f),j={"x":a.pageX,"y":a.pageY};i&&i.hide(),h&&(e=d._getNodeWidget(h),e&&!e._tree.options.disabled?(h.closest(".wijmo-wijtree-inner",d.element).length?d._insertPosition="end":(i.show(),d._insertPosition=d._drowTemplate(j,i,e.element)),e!=d&&(d._dropTarget=e)):h.is(":"+d.options.treeClass)&&(d._dropTarget=h.data(d.options.treeClass),d._insertPosition="end")),d._tree._trigger("nodeDragging",a,d),g&&c.isFunction(g.drag)&&g.drag.call(d.element,a,b)},h.stop=function(a,b){i.remove(),d._dropTarget=null,d._insertPosition="unKnown",d._tree._isDragging=!1,g&&c.isFunction(g.stop)?g.stop.call(d.element,a,b):(e.show(),d._resetDrag())},c.fn.draggable&&(e.draggable(h).trigger(a),c.browser.mozilla&&d._setFocused(!0))},h.prototype._resetDrag=function(){var a,b,c=this;for(!c._tree.options.allowDrag&&c.element.data("ui-draggable")&&c.element.draggable("destroy"),a=c._getField("nodes"),b=0;b<a.length;b++)a[b]._resetDrag()},h.prototype._checkClick=function(){var a=this,b=a.options;if(!a._tree.options.disabled&&!a._isClosestDisabled()){if(a._tree._trigger("nodeCheckChanging",null,a)===!1)return;b.checked&&"indeterminate"===a._checkState?(a._checkState="checked",a._checkItem()):(a._checkState=b.checked?"unChecked":"checked",a._setChecked(!b.checked)),a._tree._trigger("nodeCheckChanged",null,a)}},h.prototype._checkItem=function(){var a=this,b=!1,c=a._tree;null!==c&&c.options.showCheckBoxes&&(c.options.autoCheckNodes&&"indeterminate"!==a._checkState&&(b=!0,a._changeCheckState(a.options.checked)),c.options.allowTriState&&a._setParentCheckState(),a[a.options.checked?"_checkNode":"_unCheckNode"](b))},h.prototype._checkNode=function(a){var b,c=this,d=c.options,e=this._getField("nodes");if("checked"===c._checkState?(c.$checkBox.wijtreecheck("option","checkState","check"),d.checkState="checked"):"indeterminate"===c._checkState&&(c.$checkBox.wijtreecheck("option","checkState","triState"),d.checkState="indeterminate"),a)for(b=0;b<e.length;b++)e[b]._checkNode(!0)},h.prototype._unCheckNode=function(a){var b,c=this._getField("nodes"),d=this.options;if(this.$checkBox.wijtreecheck("option","checkState","unCheck"),d.checkState="unChecked",a)for(b=0;b<c.length;b++)c[b]._unCheckNode(!0)},h.prototype._changeCheckState=function(a){var b=this._getField("nodes");c.each(b,function(b,c){c.options.checked=a,c.$nodeBody.attr("aria-checked",a),c._checkState=a?"checked":"unChecked",c._changeCheckState(a)})},h.prototype._setParentCheckState=function(){var a,b,c=this._getOwner(),d=!0,e=!1,f=!1,g=this;if(!c.element.is(":"+g.options.treeClass)){for(a=c._getField("nodes"),b=0;b<a.length&&("indeterminate"===a[b]._checkState&&(f=!0),a[b].options.checked?e=!0:d=!1,d||!e);b++);f?(c._checkState="indeterminate",c._setChecked(!0)):e?(d?(c._checkState="checked",c._checkNode(!1)):c._checkState="indeterminate",c._setChecked(!0)):(c._checkState="unChecked",c._setChecked(!1),c._unCheckNode(!1)),c._setParentCheckState()}},h.prototype._onKeyDown=function(a){var b=c(a.target),d=this;b.closest(".wijmo-wijtree-inner",d.element).length>0&&d._keyAction(a)},h.prototype._onClick=function(a){var b=c(a.target),d=this;b.closest(".wijmo-checkbox",d.element).length>0?(d._checkClick(),a.preventDefault(),a.stopPropagation()):d.$hitArea&&d.$hitArea[0]===b[0]?(d._expandCollapseItem(),a.preventDefault(),a.stopPropagation()):b.closest(".wijmo-wijtree-inner",d.element).length>0&&d._click(a)},h.prototype._onMouseDown=function(a){var b=c(a.target),d=a.data;!d._tree.options.disabled&&d._tree.options.allowDrag&&b.closest(".wijmo-wijtree-node",d.element).length>0&&d._beginDrag(a)},h.prototype._onMouseOver=function(a){var b=c(a.target),d=this,e=c(a.relatedTarget);b.closest(".wijmo-wijtree-inner",d.element).length>0&&(this._tree._overNode!==d||e.is(":"+this.widgetFullName))&&(d._mouseOver(a),this._tree._overNode=d),d._mouseOverHitArea(a)},h.prototype._onMouseOut=function(a){var b=c(a.target),d=this,e=c(a.relatedTarget),f=this._getNodeWidget(e);b.closest(".wijmo-wijtree-inner",d.element).length>0&&(this._tree._overNode!==f||e.is(":"+this.widgetFullName)||e.is(".wijmo-wijtree-list")||e.is(".ui-effects-wrapper"))&&(d._mouseOut(a),f||(this._tree._overNode=null)),d._mouseOutHitArea(a)},h.prototype._onFocus=function(a){var b=c(a.target),d=this,e=d.options.wijCSS;!(b.closest(".wijmo-wijtree-inner",d.element).length>0)||d._tree.options.disabled||d._isClosestDisabled()||b.hasAllClasses(e.iconArrowRightDown)||b.hasAllClasses(e.iconArrowRight)||b.closest(".wijmo-checkbox",d.element).length||(d._tree._focusNode&&d._tree._focusNode.$navigateUrl.blur(),d._focused=!0,d._tree._focusNode=this,d.$inner.addClass(e.stateFocus),d._tree._trigger("nodeFocus",a,d))},h.prototype._onBlur=function(a){var b=c(a.target),d=a.data,e=d.options.wijCSS;d._tree.options.disabled||d._isClosestDisabled()||(d._focused=!1,b.closest(".wijmo-wijtree-inner",d.element).length>0&&d.$inner.removeClass(e.stateFocus),d._tree._trigger("nodeBlur",a,d))},h.prototype._click=function(a){var b=this,d=b.options,e=b._tree,f=b.$navigateUrl.attr("href");if(e.options.disabled||b._isClosestDisabled())b._setNavigateUrlHref("");else{if(!/^[#,\s]*$/.test(f)){if(!c.browser.msie||!/^7\.[\d]*/.test(c.browser.version))return;if(f.indexOf(window.location.href)<0)return}b._isClick=!0,e._ctrlKey=a.ctrlKey,d.selected&&e._ctrlKey?b._setSelected(!1):d.selected&&!b._tree._editMode&&e.options.allowEdit&&!b._isTemplate?b._editNode():b._setSelected(!d.selected),b._isTemplate||(a.preventDefault(),a.stopPropagation())}},h.prototype._selectNode=function(a,b){var d,e,f=this,g=f.options;f._tree.options.disabled||f._isClosestDisabled()||f._tree._isDragging||(d=f._tree._ctrlKey,d?(e=c.inArray(f,f._tree._selectedNodes),-1===e||a||(f._tree._selectedNodes.splice(e,1),f.$inner.removeClass(g.wijCSS.stateActive))):(c.each(f._tree._selectedNodes,function(a,b){b.$inner.removeClass(g.wijCSS.stateActive),b.options.selected=!1,b.$nodeBody.attr("aria-selected",!1)}),f._tree._selectedNodes=[]),a?(e=c.inArray(f,f._tree._selectedNodes),-1===e&&this._tree._selectedNodes.push(f),f.$inner.addClass(g.wijCSS.stateActive)):f.$inner.removeClass(g.wijCSS.stateActive),f._isClick&&f._tree._trigger("nodeClick",b,f),f._isClick=!1,f._tree._ctrlKey=!1,f._tree._trigger("selectedNodeChanged",b,f))},h.prototype._keyAction=function(b){var c=b.target,d=this,e=!1,f=a.getKeyCodeEnum();
if(!d._tree.options.disabled&&!d._isClosestDisabled()&&c){if(d._tree._editMode&&b.keyCode!==f.ENTER)return;switch(b.keyCode){case f.UP:d._moveUp();break;case f.DOWN:d._moveDown();break;case f.RIGHT:d._tree.options.showExpandCollapse&&d._moveRight();break;case f.LEFT:d._tree.options.showExpandCollapse&&d._moveLeft();break;case 83:!d._tree._editMode&&d._tree.options.allowSorting&&d.sortNodes();break;case 113:d._tree.options.allowEdit&&d._editNode();break;case 109:d._tree.options.showExpandCollapse&&this._expanded&&d._setExpanded(!1);break;case 107:d._tree.options.showExpandCollapse&&!this._expanded&&d._setExpanded(!0);break;case f.ENTER:d._tree._editMode&&(b.data=d,d._editionComplete(b),d._setFocused(!0),e=!0,b.preventDefault());break;case f.SPACE:d._tree.options.showCheckBoxes&&(d._checkState=d.options.checked?"unChecked":"checked",d._setChecked(!d.options.checked))}d._customKeyDown(b.keyCode,e),d._isTemplate||b.keyCode===f.ENTER||(b.preventDefault(),b.stopPropagation())}},h.prototype._customKeyDown=function(a,b){},h.prototype._prevNode=function(a){var b=a.element;return b.prev().length>0?b.prev().data(b.data("widgetName")):void 0},h.prototype._nextNode=function(a){var b=a.element;return b.next().length>0?b.next().data(b.data("widgetName")):void 0},h.prototype._getNextExpandedNode=function(a){var b,c=a,d=a._getField("nodes");return a._expanded&&d.length>0&&(b=d[d.length-1],null!==b&&(c=this._getNextExpandedNode(b))),c},h.prototype._getNextNode=function(a){var b=null,c=this;return a.element.is(":"+c.options.treeClass)?null:(b=c._nextNode(a),b?b:c._getNextNode(a._getOwner()))},h.prototype._moveUp=function(){var a=this._getCurrentLevel(),b=this._prevNode(this);b?this._getNextExpandedNode(b)._setFocused(!0):a>0&&this._getOwner()._setFocused(!0)},h.prototype._moveDown=function(){var a,b,c,d=this._getField("nodes");this._expanded&&d.length>0?d[0]._setFocused(!0):(a=this._nextNode(this),a?a._setFocused(!0):(b=this._getOwner(),c=this._getNextNode(b),c&&c._setFocused(!0)))},h.prototype._moveLeft=function(){var a=this._getOwner();this._expanded?this._setExpanded(!1):null===a||a.element.is(":"+this.options.treeClass)||a._setFocused(!0)},h.prototype._moveRight=function(){if(this._hasChildren)if(this._expanded){var a=this._getField("nodes")[0];null!==a&&a._setFocused(!0)}else this._setExpanded(!0)},h.prototype._mouseOver=function(a){var b=this,c=b._tree;c.options.disabled||b._isClosestDisabled()||c._editMode||(b._mouseOverNode(),c._isDragging||c._trigger("nodeMouseOver",a,b))},h.prototype._mouseOut=function(a){var b=this,c=b._tree;c.options.disabled||b._isClosestDisabled()||c._editMode||(b._mouseOutNode(),c._isDragging||c._trigger("nodeMouseOut",a,b))},h.prototype._mouseOverNode=function(){null===this.$inner||this._isOverNode||(this.$inner.addClass(this.options.wijCSS.stateHover),this._isOverNode=!0)},h.prototype._mouseOutNode=function(){null!==this.$inner&&this._isOverNode&&(this.$inner.removeClass(this.options.wijCSS.stateHover),this._isOverNode=!1)},h.prototype._mouseOverHitArea=function(a){var b,c,d=this,e=d._tree;e.options.disabled||d._isClosestDisabled()||e.options.expandCollapseHoverUsed&&d._hasChildren&&!d._isOverHitArea&&(b=d._getBounds(d.element),c={"x":a.pageX,"y":a.pageY},d._isMouseInsideRect(c,b)&&(d._isOverHitArea=!0,d._setExpanded(!0)))},h.prototype._mouseOutHitArea=function(a){var b,c={"x":a.pageX,"y":a.pageY},d=this,e=d._tree;e.options.disabled||d._isClosestDisabled()||e.options.expandCollapseHoverUsed&&(d._hasChildren&&d._isOverHitArea?(b=d._getBounds(d.element),d._isMouseInsideRect(c,b)||(d._isOverHitArea=!1,d._setExpanded(!1))):d._getOwner().element.is(":"+d.widgetFullName)&&(b=d._getBounds(d._getOwner().element),d._isMouseInsideRect(c,b)||(d._getOwner()._isOverHitArea=!1,d._getOwner()._setExpanded(!1))))},h.prototype.destroy=function(){var a,b=this,d=b.options;b.element.data("ui-draggable")&&b.element.draggable("destroy"),b.$hitArea&&b.$hitArea.remove(),b.$checkBox&&b.$checkBox.remove(),b.$nodeImage&&b.$nodeImage.remove(),b.$navigateUrl.unwrap().unwrap().removeClass(d.wijCSS.stateDefault).removeClass(d.wijCSS.stateActive).unbind("mousedown").unbind("blur"),a=this.element.find("ul:first").show(),a.removeClass(),a.children("li").each(function(){var a=b._getNodeWidget(c(this));a.destroy()}),b.element.removeData("nodes").removeData("owner").removeData("widgetName").removeClass(),c.Widget.prototype.destroy.apply(this)},h.prototype.add=function(a,b){var d,e,f,g,h,i,j,k,l=null,m=this;if(h=c.browser.safari?"<li><a href='{0}'>{1}</a></li>":"<li><a href='{0}' class='wijmo-wijtree-link'>{1}</a></li>","string"==typeof a?(d=c(h.replace(/\{0\}/,"#").replace(/\{1\}/,a)),m._createNodeWidget(d),l=d.data(d.data("widgetName"))):a.jquery?(a.data("widgetName")||m._createNodeWidget(a),l=a.data(a.data("widgetName"))):a.nodeType?(d=c(a),m._createNodeWidget(d),l=d.data(d.data("widgetName"))):c.isPlainObject(a)&&(d=c(h.replace(/\{0\}/,a.url?a.url:"#").replace(/\{1\}/,a.text)),m._createNodeWidget(d,a),l=d.data(d.data("widgetName"))),null!==l){for(c.browser.safari||(j=m.element.children(".wijmo-wijtree-node").find(".wijmo-wijtree-inner .wijmo-wijtree-link"),j&&j.length>0&&j.removeClass("wijmo-wijtree-link"),k=m.element.children(".wijmo-wijtree-node").find(".wijmo-wijtree-inner .wijmo-checkbox"),k&&k.length>0&&k.removeClass("wijmo-checkbox")),e=m._getField("nodes"),(!b||b>e.length)&&0!==b&&(b=e.length),c.mobile&&l.element.find("a").addClass("ui-link"),f=l._getField("nodes"),l._tree=m._tree,g=0;g<f.length;g++)f[g]._tree=m._tree;l._setField("owner",m),i=e.length,m.$nodes&&m.$nodes.length||(m.$nodes=c("<ul></ul>").addClass("wijmo-wijtree-list").addClass(m.options.wijCSS.helperReset).addClass("wijmo-wijtree-child"),m.element.append(m.$nodes)),i>0&&i!==b?l.element.get(0)!==e[b].element.get(0)&&l.element.insertBefore(e[b].element):m.$nodes.append(l.element),m.$subnodes=null,m._changeCollection(b,l),m._collectionChanged(),l._initNodeClass(),c.browser.safari||setTimeout(function(){j&&j.length>0&&j.addClass("wijmo-wijtree-link"),k&&k.length>0&&k.addClass("wijmo-checkbox")},0)}},h.prototype.remove=function(a){var b,c=-1,d=this,e=this._getField("nodes");a.jquery?c=a.index():"number"==typeof a&&(c=a),0>c||c>=e.length||(b=e[c],b.element.detach(),d.$subnodes=null,d._changeCollection(c),d._collectionChanged())},h.prototype.getNodes=function(){return this._getField("nodes")},h.prototype._changeCollection=function(a,b){var c=this._getField("nodes"),d=this.options.nodes;b?(c.splice(a,0,b),d.splice(a,0,b.options)):(c.splice(a,1),d.splice(a,1))},h.prototype.sortNodes=function(){var a=this._getField("nodes");this._sort(),c.each(a,function(a,b){b._index=a,b._insertBefore(a)}),this._refreshNodesClass()},h.prototype.check=function(a){this._setOption("checked",a)},h.prototype.select=function(a){this._setOption("selected",a)},h.prototype.getOwner=function(){var a=this._getOwner();return a&&a.element.is("li")?a:null},h.prototype.expand=function(){this._setOption("expanded",!0)},h.prototype.collapse=function(){this._setOption("expanded",!1)},h.prototype._insertBefore=function(a){var b=this.element.parent().children("li");this.element.index()!==a&&this.element.insertBefore(b.eq(a))},h.prototype._sort=function(){var a=this._getField("nodes");this._isSorted?this._isDecsSort?(a.sort(this._compare2NodeTextDesc),this._isDecsSort=!1):(a.sort(this._compare2NodeTextAcs),this._isDecsSort=!0):(a.sort(this._compare2NodeTextAcs),this._isSorted=!0,this._isDecsSort=!0)},h.prototype._compare2NodeTextAcs=function(a,b){return null!==a&&null!==b?a._text.localeCompare(b._text):void 0},h.prototype._compare2NodeTextDesc=function(a,b){return null!==a&&null!==b?-1*a._text.localeCompare(b._text):void 0},h.prototype._collectionChanged=function(){this._hasChildren=this._getChildren(),this._initNodeClass()},h.prototype._refreshNodesClass=function(){var a,b=this._getField("nodes");for(a=0;a<b.length;a++)b[a]._initNodeClass()},h.prototype._setChecked=function(a){var b=this;(b.options.checked!==a||"indeterminate"===b._checkState)&&(b.options.checked=a,b.$nodeBody.attr("aria-checked",a),this._checkItem())},h.prototype._isClosestDisabled=function(){var a=this;return a.element.closest(".wijmo-wijtree-disabled,.wijmo-wijtreenode-disabled",a._tree.element).length?!0:!1},h.prototype._setExpanded=function(a){var b=this,c=b.options;b._expanded!==a&&(b._hasChildren||c.hasChildren)&&b._expandNode(a)},h.prototype._setFocused=function(a){a?(this.$navigateUrl.focus(),this._setFocusNode()):this.$navigateUrl.blur()},h.prototype._setFocusNode=function(){this._tree._focusNode&&c.browser.webkit&&this._tree._focusNode.$navigateUrl.blur(),this._focused=!0,this._tree._focusNode=this,this.$inner.addClass(this.options.wijCSS.stateFocus),this._tree._trigger("nodeFocus",null,this)},h.prototype._setToolTip=function(a){a.length?this.element.attr("title",a):this.element.removeAttr("title")},h.prototype._setText=function(a){this._text!==a&&a.length&&(this._text=a,this._changeText(a))},h.prototype._setSelected=function(a){var b=this,c=b.options;c.selected!==a&&(c.selected=a,b.$nodeBody.attr("aria-selected",a),b._selectNode(a),b._setFocused(a))},h.prototype._setCheckBoxes=function(a){var b=this;b.$checkBox?b.$checkBox[a?"show":"hide"]():a&&(b.$checkBox=c("<div>"),b.$checkBox.insertBefore(b.$navigateUrl),b.$checkBox.wijtreecheck()),b.$nodes&&b.$nodes.length&&b.$nodes.children("li").each(function(d,e){var f=b._getNodeWidget(c(e));null!==f&&f._setCheckBoxes(a)})},h.prototype._setHitArea=function(a){var b=this;b._hasChildren&&(a?(b._initNodeClass(),b.$hitArea&&b.$hitArea.show()):(b._expanded=!0,b.options.expanded=!0,b.$nodeBody.attr("aria-expanded",!0),b.$nodes&&b.$nodes.length&&b.$nodes.show(),b._initNodeClass(),b.$hitArea&&b.$hitArea.hide())),b.$nodes&&b.$nodes.length&&b.$nodes.children("li").each(function(d,e){var f=b._getNodeWidget(c(e));null!==f&&f._setHitArea(a)})},h.prototype._getOwner=function(){return this._getField("owner")},h.prototype._getTree=function(){var a=this._getOwner();return a?a._tree?a._tree:a:null},h.prototype._getInitElement=function(){var a=c("<li>"),b=this,d=c("<ul>"),e=b._getField("nodes");return a.append(b.$navigateUrl.clone()),e.length&&(a.append(d),c.each(e,function(a,b){var c=b._getInitElement();d.append(c)})),a},h.prototype._updateSubNodes=function(){var a,b;if(this.$subnodes=[],null!==this.$nodes&&this.$nodes.length)for(a=this.$nodes.children("li"),b=0;b<a.length;b++)this.$subnodes.push(c(a[b]))},h.prototype._getChildren=function(){return this.options.nodes&&this.options.nodes.length>0?!0:this._isHtmlGenerated()?!1:(null===this.$nodes&&(this.$nodes=this.element.children("ul").eq(0)),0==this.$nodes.length?!1:(null===this.$subnodes&&this._updateSubNodes(),this.$subnodes.length>0))},h.prototype._getNodeWidget=function(a){var b,c=this._getNodeByDom(a);return c.length>0?b=c.data(c.data("widgetName")):null},h.prototype._createNodeWidget=function(a,b){return f(a,b,this,d,this.options.treeClass)},h.prototype._getNodeByDom=function(a){return c(a).closest(":"+this.widgetFullName)},h.prototype._getCurrentLevel=function(){return this.element.parentsUntil(":"+this.options.treeClass).length-1},h.prototype._getField=function(a){return this.element.data(a)},h.prototype._setField=function(a,b){return this.element.data(a,b)},h}(a.wijmoWidget);b.wijtreenode=i;var j="",k="",l=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._initCSS=function(a){var b=a.wijCSS;j=b.icon+" "+b.iconCheck,k=b.icon+" "+b.iconStop},b.prototype._create=function(){var a=this,b=this.options,d=b.wijCSS;a._initCSS(b),a.element.is("div")&&(a.element.addClass("wijmo-checkbox").addClass(d.widget).attr("role","checkbox"),a.$icon=c("<span>"),a.$icon.addClass("wijmo-checkbox-icon"),"check"===b.checkState?a.$icon.addClass(j):"triState"===b.checkState&&a.$icon.addClass(k),a.$body=c("<div></div>").addClass(["wijmo-checkbox-box",d.widget,d.cornerAll,d.stateDefault].join(" ")).css({"position":"relative"}).append(a.$icon),a.element.append(a.$body),a.element.bind("mouseover.wijtreecheck",function(){a.options.disabled||a.$body.addClass(d.stateHover)}).bind("mouseout.wijtreecheck",function(){a.options.disabled||a.$body.removeClass(d.stateHover).not(d.stateFocus).addClass(d.stateDefault)}))},b.prototype._setOption=function(a,b){var d=this,e=d.options.wijCSS;"checkState"===a&&("unCheck"===b?(d.$body.removeClass(e.stateActive),d.$icon.removeClass(j).removeClass(k).removeClass(e.stateActive)):"check"===b?(d.$body.addClass(e.stateActive),d.$icon.removeClass(k).addClass(j)):"triState"===b&&(d.$body.addClass(e.stateActive),d.$icon.removeClass(j).addClass(k))),c.Widget.prototype._setOption.apply(d,arguments)},b.prototype.destory=function(){this.element.children().remove(),this.element.removeClass("wijmo-checkbox").removeClass(this.options.wijCSS.widget),c.Widget.prototype.destroy.apply(this)},b}(a.wijmoWidget);b.wijtreecheck=l,l.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,{"wijMobileCSS":{"header":"ui-header ui-bar-a","content":"ui-body-b","stateHover":"ui-btn-down-b","stateActive":"ui-btn-down-b"},"checkState":"unCheck"});var m=function(){function a(){this.wijMobileCSS={"header":"ui-header ui-bar-a","content":"ui-body-b","stateDefault":"ui-btn ui-btn-b","stateHover":"ui-btn-down-c","stateActive":"ui-btn-down-b"},this.treeClass="wijmo-wijtree",this.initSelector=":jqmData(role='wijtreenode')",this.accessKey="",this.checked=!1,this.collapsedIconClass="",this.expanded=!1,this.expandedIconClass="",this.itemIconClass="",this.navigateUrl="",this.selected=!1,this.text="",this.toolTip="",this.hasChildren=!1,this.params={},this.nodes=null}return a}(),n=function(){function a(){this.wijMobileCSS={"header":"ui-header ui-bar-a","content":"ui-body-b","stateDefault":"ui-btn ui-btn-b","stateHover":"ui-btn-down-b","stateActive":"ui-btn-down-c"},this.allowDrag=!1,this.allowDrop=!1,this.allowEdit=!1,this.allowSorting=!0,this.allowTriState=!0,this.autoCheckNodes=!0,this.autoCollapse=!1,this.disabled=!1,this.expandCollapseHoverUsed=!1,this.showCheckBoxes=!1,this.showExpandCollapse=!0,this.expandAnimation={"effect":"blind","easing":"linear","duration":200},this.expandDelay=0,this.collapseAnimation={"effect":"blind","easing":"linear","duration":200},this.collapseDelay=0,this.draggable=null,this.droppable=null,this.dropVisual=null,this.nodes=null,this.nodeBlur=null,this.nodeFocus=null,this.nodeClick=null,this.nodeCheckChanging=null,this.nodeCheckChanged=null,this.nodeCollapsed=null,this.nodeExpanded=null,this.nodeDragging=null,this.nodeDragStarted=null,this.nodeBeforeDropped=null,this.nodeDropped=null,this.nodeMouseOver=null,this.nodeMouseOut=null,this.nodeTextChanged=null,this.selectedNodeChanged=null,this.nodeExpanding=null,this.nodeCollapsing=null}return a}();i.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new m),h.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new n),c.wijmo.registerWidget("wijtree",h.prototype),c.wijmo.registerWidget("wijtreenode",i.prototype),c.wijmo.registerWidget("wijtreecheck",l.prototype)}(a.tree||(a.tree={}));a.tree}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c,d,e=jQuery,f="wijmo-wijupload",g="wijmo-wijupload-fileRow",h="."+g,i="wijmo-wijupload-filesList",j="wijmo-wijupload-commandRow",k="wijmo-wijupload-uploadAll",l="wijmo-wijupload-cancelAll",m="wijmo-wijupload-buttonContainer",n="wijmo-wijupload-upload",o="."+n,p="wijmo-wijupload-cancel",q="."+p,r="wijmo-wijupload-file",s="wijmo-wijupload-progress",t="wijmo-wijupload-loading",u=function(a){return a.indexOf("\\")>-1&&(a=a.substring(a.lastIndexOf("\\")+1)),a},v=function(a){var b=a.files,c="";return b?(e.each(b,function(a,b){c+=u(b.name)+"; "}),c.length&&(c=c.substring(0,c.lastIndexOf(";")))):c=u(a.value),c},w=function(a){var b=a.files,c=0;return b&&b.length>0&&e.each(b,function(a,b){b.size&&(c+=b.size)}),c};c=function(a,b,c){var d,f=e("input",b),g=function(a){a&&(a.abort(),a=null)},h=function(a){a&&(a=null)},i=function(){var a=this,d=f.get(0),i=d.files,j=[],k=0,l=0,m=function(b,c){var d=new XMLHttpRequest;return d.open("POST",c,!0),d.setRequestHeader("Wijmo-RequestType","XMLHttpRequest"),d.setRequestHeader("Cache-Control","no-cache"),d.setRequestHeader("Wijmo-FileName",encodeURI(b)),d.setRequestHeader("Content-Type","application/octet-stream"),d.upload.onprogress=function(b){if(b.lengthComputable){var c;e.isFunction(a.onProgress)&&(c={"supportProgress":!0,"loaded":l+b.loaded,"total":w(f[0]),"fileName":u(a.currentFile.name),"fileNameList":v(f[0]).split("; ")},a.onProgress(c))}},d.onreadystatechange=function(b){if(4===this.readyState){var c,d=this.responseText;l+=i[k].size,k++,i.length>k?n(i[k]):e.isFunction(a.onComplete)&&(c={"e":b,"response":d,"supportProgress":!0},a.onComplete(c))}},j.push(d),d},n=function(b){var d=u(b.name),e=m(d,c);a.handleRequest(e,b),a.currentFile=b,e.send(b)};a.fileRow=b,a.inputFile=f,a.upload=function(){n(i[k])},a.cancel=function(){e.each(j,function(a,b){g(b)}),e.isFunction(a.onCancel)&&a.onCancel()},a.destroy=function(){e.each(j,function(a,b){h(b)})},a.updateAction=function(a){c=a},a.handleRequest=null,a.onCancel=null,a.onComplete=null,a.onProgress=null};return d=new i},d=function(a,b,c){var d,f,g=e("input",b),h=g.attr("id"),i="wijUploadForm_"+a,j=e("#"+i),k="wijUploadIfm_"+h,l=!0,m=e('<iframe id="'+k+'" name="'+k+'">'),n=function(a,b){j.empty(),j.attr("target",a.attr("name")),b&&(b.parent().append(b.clone()),j.append(b)),j.submit()},o=function(a){a.attr("src","javascript".concat(":false;"))},p=function(a,b){b&&j&&(j.remove(),j=null),a&&(a.remove(),a=null)};return 0===j.length&&(j=e('<form method="post" enctype="multipart/form-data"></form>'),j.attr("action",c).attr("id",i).attr("name",i).appendTo("body")),m.css("position","absolute").css("top","-1000px").css("left","-1000px"),m.appendTo("body"),f=function(){var a=this;a.fileRow=b,a.iframe=m,a.inputFile=g,a.upload=function(){var b;n(m,g),e.isFunction(a.onProgress)&&(b={"supportProgress":!1,"loaded":1,"total":1},a.onProgress(b))},a.doPost=function(){n(m)},a.cancel=function(){o(m),e.isFunction(a.onCancel)&&a.onCancel()},a.updateAction=function(a){c=a,j.attr("action",a)},a.destroy=function(a){p(m,a)},a.onCancel=null,a.onComplete=null,a.onProgress=null,m.bind("load",function(b){if(!e.browser.safari&&l&&!a.autoSubmit)return void(l=!1);if(m.attr("src")!=="javascript".concat(":false;")){var c,d,f,g=b.target;try{d=g.contentDocument?g.contentDocument:window.frames[0].document,c=d.XMLDocument?d.XMLDocument:d.body?d.body.innerHTML:d,e.isFunction(a.onComplete)&&(f={"e":b,"response":c,"supportProgress":!1},a.onComplete(f))}catch(h){c=""}finally{}}})},d=new f};var x=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._swfAppendAddtionalData=function(a){a.queueData={"files":{},"filesSelected":0,"filesQueued":0,"filesReplaced":0,"filesCancelled":0,"filesErrored":0,"uploadsSuccessful":0,"uploadsErrored":0,"averageSpeed":0,"queueLength":0,"queueSize":0,"uploadSize":0,"queueBytesUploaded":0,"uploadQueue":[],"errorMsg":""},a.widget=this},b.prototype._swfGetHandlers=function(){var a=this,b=a.element;return{"onSelect":function(b){return a._trigger("change",null,b)===!1?!1:(a._createFileRow(b),this.queueData.queueSize+=b.size,void(this.queueData.files[b.id]=b))},"onSelectError":function(a,b){b==SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT?alert("File size exceeds the limitation!"):b==SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED&&alert("Too many files!")},"onDialogOpen":function(){this.queueData.filesReplaced=0,this.queueData.filesCancelled=0},"onDialogClose":function(b,c,d){var e=this.settings;this.queueData.filesErrored=b-c,this.queueData.filesSelected=b,this.queueData.filesQueued=c-this.queueData.filesCancelled,this.queueData.queueLength=d,a.isStartUpload=!1,a.options.autoSubmit&&(a.uploadAll=!0,a._swfUploadFile()),e.onDialogClose&&e.onDialogClose.call(this,this.queueData)},"onUploadStart":function(b){if(this.bytesLoaded=0,0==this.queueData.uploadQueue.length&&(this.queueData.uploadSize=b.size),!a.isStartUpload&&a.uploadAll){if(a._trigger("totalUpload",null,null)===!1)return this.cancelUpload(),!1;a.isStartUpload=!0}return a._trigger("upload",null,b)===!1?(this.cancelUpload(b.id),!1):void 0},"onUploadProgress":function(c,d,f){var g,h,i=e("#"+c.id,b),j=Math.round(d/f*100),k=e("."+s,i),l={"sender":c.name,"loaded":d,"total":f},m=this.queueData;k.html(j+"%"),a._trigger("progress",null,l),g=m.queueBytesUploaded+d,h=m.queueSize,a._updateSwfProgress(g,h),a._trigger("totalProgress",null,{"loaded":g,"total":h})},"onUploadError":function(a,c,d){var f=this.settings,g=e("#"+a.id,b),h=e("."+s,g),i="Error";switch(c){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:i="HTTP Error ("+d+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:i="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:i="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:i="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+d+")."),i="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:i="Failed";break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:i="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:i="Cancelled",this.queueData.queueSize-=a.size,this.queueData.queueLength-=1,(a.status==SWFUpload.FILE_STATUS.IN_PROGRESS||e.inArray(a.id,this.queueData.uploadQueue)>=0)&&(this.queueData.uploadSize-=a.size),f.onCancel&&f.onCancel.call(this,a),delete this.queueData.files[a.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:i="Stopped"}h.text(i);var j=this.getStats();this.queueData.uploadsErrored=j.upload_errors},"onUploadSuccess":function(c,d,f){var g=this.getStats();this.queueData.uploadsSuccessful=g.successful_uploads,this.queueData.queueBytesUploaded+=c.size,this.queueData.response=f;var h=e("#"+c.id,b),i=this;i.queueData.queueLength-=1,h.fadeOut(1500,function(){h.remove(),a.options.showUploadedFiles&&a._createUploadedFiles(c.name),i.queueData.queueLength||a.commandRow.hide()}),a._trigger("complete",null,{"response":f})},"onUploadComplete":function(b,c,d){var e=this;!e.queueData.queueLength&&a.uploadAll&&(a._cleanSwfProgress(),a._trigger("totalComplete",null,e.queueData)),a.uploadAll&&a._swfUploadFile()}}},b.prototype._cleanSwfProgress=function(){},b.prototype._updateSwfProgress=function(a,b){},b.prototype._initSwfUploadOptions=function(a,b){var c,d=this,f=d.element,g=d._swfGetHandlers(),h=d.options,i=d.options.swfUploadOptions,j=f.attr("id"),k=j+"_SWFUpload";return e("<input type='file' id='"+k+"'>").appendTo(f),c=e.extend({"id":k,"swf":"SWFUpload.swf","auto":!1,"buttonClass":"","buttonCursor":"hand","buttonImage":null,"checkExisting":!1,"debug":!1,"fileObjName":"Filedata","fileSizeLimit":h.maximumFileSize?h.maximumFileSize:0,"fileTypeDesc":"All Files","fileTypeExts":h.accept?h.accept:"*.*","height":b,"itemTemplate":!1,"method":"post","multi":h.multiple,"formData":{},"preventCaching":!0,"progressData":"percentage","queueID":!1,"queueSizeLimit":h.maximumFiles?h.maximumFiles:999,"removeCompleted":!0,"removeTimeout":3,"requeueErrors":!1,"successTimeout":30,"uploadLimit":0,"width":a,"uploader":h.action,"overrideEvents":[]},i),{"assume_success_timeout":c.successTimeout,"button_placeholder_id":c.id,"button_width":c.width,"button_height":c.height,"button_text":null,"button_text_style":null,"button_text_top_padding":0,"button_text_left_padding":0,"button_action":h.multiple?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE,"button_disabled":!1,"button_cursor":"arrow"==c.buttonCursor?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND,"button_window_mode":SWFUpload.WINDOW_MODE.TRANSPARENT,"debug":c.debug,"requeue_on_error":c.requeueErrors,"file_post_name":c.fileObjName,"file_size_limit":c.fileSizeLimit,"file_types":c.fileTypeExts,"file_types_description":c.fileTypeDesc,"file_queue_limit":c.queueSizeLimit,"file_upload_limit":c.uploadLimit,"flash_url":c.swf,"prevent_swf_caching":c.preventCaching,"post_params":c.formData,"upload_url":c.uploader,"use_query_string":"get"==c.method,"file_dialog_complete_handler":g.onDialogClose,"file_dialog_start_handler":g.onDialogOpen,"file_queued_handler":g.onSelect,"file_queue_error_handler":g.onSelectError,"swfupload_loaded_handler":c.onSWFReady,"upload_complete_handler":g.onUploadComplete,"upload_error_handler":g.onUploadError,"upload_progress_handler":g.onUploadProgress,"upload_start_handler":g.onUploadStart,"upload_success_handler":g.onUploadSuccess}},b.prototype._createSWFUpload=function(){var a,b,c=this,d=(c.element,c.addBtn),f=c.options.swfUploadOptions,g=d.width(),h=d.height(),i=swfobject.getFlashPlayerVersion(),j=i.major>=9;j?(a=c._initSwfUploadOptions(g,h),b=new SWFUpload(a),c.swfupload=b,e("#"+b.movieName).css({"position":"absolute","z-index":100,"top":0,"left":0,"width":g,"height":h}),c._swfAppendAddtionalData(b)):(alert("Please install flash player."),f&&f.onFallback&&f.onFallback.call())},b.prototype._create=function(){var a=this,b=a.options,c=(new Date).getTime(),d=a.supportXhr();window.wijmoApplyWijTouchUtilEvents&&(e=window.wijmoApplyWijTouchUtilEvents(e)),a.filesLen=0,a.totalUploadFiles=0,a.useXhr=d,a.id=c,a._createContainers(),a._createUploadButton(),b.enableSWFUploadOnIE&&e.browser.msie||b.enableSWFUpload?a._createSWFUpload():a._createFileInput(),a._bindEvents(),b.disabled&&a.disable(),a.element.is(":hidden")&&a.element.wijAddVisibilityObserver&&a.element.wijAddVisibilityObserver(function(){a._applyInputPosition(),a.element.wijRemoveVisibilityObserver&&a.element.wijRemoveVisibilityObserver()},"wijupload")},b.prototype._setOption=function(a,b){var c=this;e.Widget.prototype._setOption.apply(this,arguments),"disabled"===a?c._handleDisabledOption(b,c.upload):"accept"===a&&c.input&&c.input.attr("accept",b)},b.prototype._handleDisabledOption=function(a,b){var c=this;a?(c.disabledDiv||(c.disabledDiv=c._createDisabledDiv(b)),c.disabledDiv.appendTo("body")):c.disabledDiv&&(c.disabledDiv.remove(),c.disabledDiv=null)},b.prototype._createDisabledDiv=function(a){var b,c=this,d=a?a:c.upload,f=d.offset(),g=d.outerWidth(),h=d.outerHeight();return b=e("<div></div>").addClass(c.options.wijCSS.stateDisabled).css({"z-index":"99999","position":"absolute","width":g,"height":h,"left":f.left,"top":f.top}),e.browser.msie&&(b.css("background-color","white"),parseInt(e.browser.version)>=9&&b.css("opacity","0.1")),b},b.prototype.destroy=function(){var b=this;b.upload.removeClass(f),b.upload.undelegate(b.widgetName).undelegate("."+b.widgetName),b.input.remove(),b.addBtn.remove(),b.filesList.remove(),b.commandRow.remove(),b.isCreateByInput===!0&&b.element.css({"display":""}).unwrap(),b.uploaders&&(e.each(b.uploaders,function(a,b){b.destroy&&b.destroy(!0),b=null}),b.uploaders=null),b.disabledDiv&&(b.disabledDiv.remove(),b.disabledDiv=null),a.prototype.destroy.call(this)},b.prototype.widget=function(){return this.upload},b.prototype.supportXhr=function(){var a=!1;return a="undefined"==typeof(new XMLHttpRequest).upload?!1:!0},b.prototype._createContainers=function(){var a,b,c=this,d=c.element;if(d.is(":input")&&"file"===d.attr("type"))c.isCreateByInput=!0,c.maxDisplay=d.attr("multiple")||c.options.multiple?0:1,c.upload=d.css({"display":"none"}).wrap("<div>").parent();else{if(!c.element.is("div"))throw'The initial markup must be "DIV", "INPUT[type=file]"';c.maxDisplay=c.options.multiple?0:1,c.upload=d}c.upload.addClass(f),a=e("<ul>").addClass(i).appendTo(c.upload),b=e("<div>").addClass(j).appendTo(c.upload),c.filesList=a,b.hide(),c.commandRow=b,c._createCommandRow(b)},b.prototype._createCommandRow=function(a){var b=this,c=b.options,d=e("<a>").attr("href","#").text("uploadAll").addClass(k).button({"icons":{"primary":c.wijCSS.iconCircleArrowN},"label":b._getLocalization("uploadAll","Upload All")}).button("widget").addClass(c.wijCSS.stateDefault),f=e("<a>").attr("href","#").text("cancelAll").addClass(l).button({"icons":{"primary":c.wijCSS.iconCancel},"label":b._getLocalization("cancelAll","Cancel All")}).button("widget").addClass(c.wijCSS.stateDefault);a.append(d).append(f)},b.prototype._getLocalization=function(a,b){var c=this.options.localization;return c&&c[a]||b},b.prototype._createUploadButton=function(){var a=this,b=a.options,c=e("<a>").attr("href","javascript:void(0);").button({"label":a._getLocalization("uploadFiles","Upload files")}).button("widget").addClass(b.wijCSS.stateDefault);c.mousemove(function(b){var d=c.data("ui-button").options.disabled;if(a.input){var e=b.pageX,f=b.pageY;d||a.input.offset({"left":e+10-a.input.width(),"top":f+10-a.input.height()})}}),a.addBtn=c,a.upload.prepend(c)},b.prototype._applyInputPosition=function(){var a=this,b=a.addBtn,c=b.offset(),d=a.cuurentInput;d.offset({"left":c.left+b.width()-d.width(),"top":c.top}).height(b.height())},b.prototype._createFileInput=function(){var a=this,b=a.addBtn,c=b.offset(),d=a.element.attr("accept")||a.options.accept,f="wijUpload_"+a.id+"_input"+a.filesLen,g=e("<input>").attr("type","file").prependTo(a.upload),h=a.options.maximumFiles||a.maxDisplay;1!==h&&0===a.maxDisplay&&g.attr("multiple","multiple"),d&&g.attr("accept",d),a.cuurentInput=g,a.filesLen++,g.attr("id",f).attr("name",f).css("position","absolute").offset({"left":c.left+b.width()-g.width(),"top":c.top}).css("z-index","9999").css("opacity",0).height(b.height()).css("cursor","pointer"),a.input=g,g.bind("change",function(b){var c,d;return a._trigger("change",b,e(this))===!1?!1:(a._createFileInput(),c=a._createFileRow(e(this)),a._setAddBtnState(),a.options.autoSubmit&&(d=e(o,c),d&&d.click()),void g.unbind("change"))}),a.uploadAll=!1},b.prototype._createUploadedFiles=function(a){},b.prototype._setAddBtnState=function(){var a,b=this,c=b.options.maximumFiles||b.maxDisplay,d=b.addBtn;c&&d&&(b.maskDiv||(b.maskDiv=e("<div></div>").css("position","absolute").css("z-index","9999").width(d.outerWidth()).height(d.outerHeight()).appendTo(b.upload).offset(d.offset())),a=e("li",b.filesList),a.length>=c?(d.button({"disabled":!0}),b.maskDiv.show(),b.input&&b.input.css("left","-1000px")):(d.button({"disabled":!1}),b.maskDiv.hide()))},b.prototype._createFileRow=function(a){var b,c,d,f=this,i=f.options,j=e("<li>"),k="",l=e("<span>").addClass(m),o=e("<a>").attr("href","#").text("upload").addClass(n).button({"text":!1,"icons":{"primary":i.wijCSS.iconCircleArrowN},"label":f._getLocalization("upload","upload")}).button("widget").addClass(i.wijCSS.stateDefault),q=e("<a>").attr("href","#").text("cancel").addClass(p).button({"text":!1,"icons":{"primary":i.wijCSS.iconCancel},"label":f._getLocalization("cancel","cancel")}).button("widget").addClass(i.wijCSS.stateDefault);return j.addClass(g).addClass(i.wijCSS.content).addClass(i.wijCSS.cornerAll),i.enableSWFUploadOnIE&&e.browser.msie||i.enableSWFUpload?(k=a.name,j.attr("id",a.id).data("file",a)):(j.append(a),a.hide(),k=v(a[0])),b=e("<span>"+k+"</span>").addClass(r).addClass(i.wijCSS.stateHighlight).addClass(i.wijCSS.cornerAll),j.append(b),j.append(l),c=e("<span />").addClass(s),l.append(c),l.append(o).append(q),j.appendTo(f.filesList),d=e(h,f.upload),d.length&&(f.commandRow.show(),i.enableSWFUploadOnIE&&e.browser.msie||i.enableSWFUpload||f._createUploader(j),f._resetProgressAll()),j},b.prototype._createUploader=function(a){var b,f=this,g=e("input",a),h=f.options.action,i=f.options.handleRequest;f.useXhr?(b=c(f.id,a,h),b.handleRequest=function(a,b){e.isFunction(i)&&i.call(f,a,b)}):b=d(f.id,a,h),b.onCancel=function(){var a=this;f._trigger("cancel",null,a.inputFile),0===f.totalUploadFiles&&f.uploadAll&&f._trigger("totalComplete")},f._wijUpload()&&(b.onProgress=function(a){var b=e("."+s,this.fileRow),c={"sender":a.fileName,"loaded":a.loaded,"total":a.total,"fileNameList":void 0},d=this.inputFile.attr("id");a.supportProgress?(b.html(Math.round(1e3*a.loaded/a.total)/10+"%"),a.fileNameList&&(c.fileNameList=a.fileNameList),
f._trigger("progress",null,c),f._progressTotal(d,a.loaded)):b.addClass(t)},b.onComplete=function(a){var b=this,c=b.inputFile.attr("id"),d=f.uploaders[c],g=w(b.inputFile[0]),h=e("."+s,b.fileRow);f._trigger("complete",a.e,e.extend(!0,b.inputFile,a)),h.removeClass(t),h.html("100%"),f._removeFileRow(b.fileRow,d,!0),f._progressTotal(c,g),f.totalUploadFiles--,0===f.totalUploadFiles&&(f.uploadAll||f.options.autoSubmit)&&f._trigger("totalComplete",a.e,a)}),"undefined"==typeof f.uploaders&&(f.uploaders={}),f.uploaders[g.attr("id")]=b},b.prototype._progressTotal=function(a,b){var c,d,e=this,f=e.progressAll;e.uploadAll&&(f&&f.loadedSize&&(f.loadedSize[a]=b,c=e._getLoadedSize(f.loadedSize),d=f.totalSize),e._trigger("totalProgress",null,{"loaded":c,"total":d}))},b.prototype._getLoadedSize=function(a){var b=0;return e.each(a,function(a,c){b+=c}),b},b.prototype._getTotalSize=function(){var a=this,b=0;return a.uploaders&&e.each(a.uploaders,function(a,c){b+=w(c.inputFile[0])}),b},b.prototype._resetProgressAll=function(){this.progressAll={"totalSize":0,"loadedSize":{}}},b.prototype._wijUpload=function(){return!0},b.prototype._wijcancel=function(a){},b.prototype._upload=function(a,b){},b.prototype._swfUploadFile=function(a){this.swfupload.startUpload(a)},b.prototype._bindEvents=function(){var a=this,b=a.options,c=a.progressAll;a.upload.delegate(q,"click."+a.widgetName,function(d){var f,g,i=e(this),j=i.parents(h);if(d.preventDefault(),b.enableSWFUploadOnIE&&e.browser.msie||b.enableSWFUpload){var k=j.data("file");a.swfupload.cancelUpload(k.id),j.fadeOut(1500,function(){j.remove(),0==a.swfupload.queueData.queueLength&&a.commandRow.hide()})}else f=e("input",j[0]),g=a.uploaders[f.attr("id")],a._wijcancel(f),a._wijUpload()&&g&&g.cancel(),c&&(c.totalSize-=w(f[0]),c.loadedSize[f.val()]&&delete c.loadedSize[f.val()]),a._removeFileRow(j,g,!1)}),a.upload.delegate(o,"click."+a.widgetName,function(c){var d,f,g=e(this),i=g.parents(h);if(c.preventDefault(),b.enableSWFUploadOnIE&&e.browser.msie||b.enableSWFUpload){var j=i.data("file");a.uploadAll=!1,a._wijUpload()?a._swfUploadFile(j.id):a._upload(j.id,!0)}else{if(d=e("input",i[0]),f=a.uploaders[d.attr("id")],a._trigger("upload",c,d)===!1)return!1;if(a.options.autoSubmit&&(f.autoSubmit=!0,a._trigger("totalUpload",c,null)===!1))return!1;a.totalUploadFiles++,a._upload(i),f&&a._wijUpload()&&f.upload()}}),a.upload.delegate("."+k,"click."+a.widgetName,function(c){if(c.preventDefault(),b.enableSWFUploadOnIE&&e.browser.msie||b.enableSWFUpload)a.uploadAll=!0,a._wijUpload()?a._swfUploadFile():a._upload(!0,!0);else{if(a.uploadAll=!0,a.progressAll||a._resetProgressAll(),a._trigger("totalUpload",c,null)===!1)return!1;a.progressAll.totalSize=a._getTotalSize(),a._wijuploadAll(e(o,a.filesList[0])),a._wijUpload()&&e(o,a.filesList[0]).each(function(a,b){return e(b).click(),a})}}),a.upload.delegate("."+l,"click."+a.widgetName,function(c){c.preventDefault(),b.enableSWFUploadOnIE&&e.browser.msie||b.enableSWFUpload?(e.each(a.swfupload.queueData.files,function(b,c){a.swfupload.cancelUpload(b)}),e(h,a.element).fadeOut(1500,function(){e(this).remove(),a.commandRow.hide()})):(a._resetProgressAll(),e(q,a.filesList[0]).each(function(a,b){e(b).click()}))})},b.prototype._wijuploadAll=function(a){},b.prototype._wijFileRowRemoved=function(a,b,c){this._setAddBtnState()},b.prototype._removeFileRow=function(a,b,c){var d,f,g=this;b&&(d=b.inputFile.attr("id")),a.fadeOut(1500,function(){a.remove(),g._wijFileRowRemoved(a,b.inputFile,c),g.uploaders[d]&&delete g.uploaders[d],f=e(h,g.upload),f.length?(g.commandRow.show(),b&&b.destroy&&b.destroy()):(g.commandRow.hide(),g.totalUploadFiles=0,g._resetProgressAll(),b&&b.destroy&&b.destroy(!0))})},b.prototype._getFileName=function(a){return u(a)},b.prototype._getFileNameByInput=function(a){return v(a)},b.prototype._getFileSize=function(a){return w(a)},b}(a.wijmoWidget);b.wijupload=x;var y=function(){function a(){this.wijCSS={"iconCircleArrowN":"ui-icon-circle-arrow-n","iconCancel":"ui-icon-cancel"},this.action="",this.autoSubmit=!1,this.change=null,this.upload=null,this.totalUpload=null,this.progress=null,this.totalProgress=null,this.complete=null,this.totalComplete=null,this.maximumFiles=0,this.multiple=!0,this.accept="",this.enableSWFUploadOnIE=!1,this.enableSWFUpload=!1,this.swfUploadOptions={},this.localization={},this.handleRequest=null}return a}();x.prototype.options=e.extend(!0,{},a.wijmoWidget.prototype.options,new y),e.wijmo.registerWidget("wijupload",x.prototype)}(a.upload||(a.upload={}));a.upload}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._create=function(){var a=this;this.element.is(":hidden")&&this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){a.element.wijRemoveVisibilityObserver&&a.element.wijRemoveVisibilityObserver(),a._pageLize(!1)},"wijwizard"),this._pageLize(!0)},b.prototype._init=function(){var a=this.options,b=a.disabled;a.disabledState?(this.disable(),a.disabled=b):a.autoPlay&&this.play()},b.prototype._setOption=function(b,c){switch(a.prototype._setOption.call(this,b,c),b){case"activeIndex":this.show(c);break;case"navButtons":case"backBtnText":case"nextBtnText":this._createButtons();break;case"autoPlay":c===!0?this.play():this.stop();default:this._pageLize(!1)}},b.prototype.destroy=function(){var a=this.options;return this.abort(),this.stop(),this._removeScroller(),this._removeButtons(),this.element.unbind(".wijwizard").removeClass(a.wijCSS.wijwizard).removeClass(a.wijCSS.widget).removeClass(a.wijCSS.helperClearFix).removeData("wijwizard"),this.list&&this.list.removeClass(a.wijCSS.widget).removeClass(a.wijCSS.helperReset).removeClass(a.wijCSS.wijwizardSteps).removeClass(a.wijCSS.helperClearFix).removeAttr("role"),this.lis&&(this.lis.removeClass(a.wijCSS.header).removeClass(a.wijCSS.cornerAll).removeClass(a.wijCSS.priorityPrimary).removeClass(a.wijCSS.prioritySecondary).removeAttr("role"),c.each(this.lis,function(){c.data(this,"destroy.wijwizard")?c(this).remove():c(this).removeAttr("aria-selected")})),c.each(this.panels,function(){var b=c(this).unbind(".wijwizard");c.each(["load","cache"],function(a,c){b.removeData(c+".wijwizard")}),c.data(this,"destroy.wijwizard")?b.remove():b.removeClass(a.wijCSS.stateDefault).removeClass(a.wijCSS.wijwizardActived).removeClass(a.wijCSS.stateActive).removeClass(a.wijCSS.stateHover).removeClass(a.wijCSS.stateFocus).removeClass(a.wijCSS.stateDisabled).removeClass(a.wijCSS.wijwizardPanel).removeClass(a.wijCSS.content).removeClass(a.wijCSS.wijwizardHide).css({"position":"","left":"","top":""}).removeAttr("aria-hidden")}),this.container.replaceWith(this.container.contents()),a.cookie&&this._cookie(null,a.cookie),this},b.prototype._pageLize=function(a){var b=this.options,d=/^#.+/;this.list=this.element.children("ol,ul").eq(0),this.list&&0===this.list.length&&(this.list=this.element.find("."+b.wijCSS.wijwizardSteps).eq(0),this.list&&0===this.list.length&&(this.list=null)),this.list&&(this.lis=c("li",this.list)),a?(this.panels=c("> div",this.element),c.each(this.panels,function(a,b){var e=c(b).attr("src");e&&!d.test(e)&&c.data(b,"load.wijwizard",e.replace(/#.*$/,""))}),this.element.addClass(b.wijCSS.wijwizard).addClass(b.wijCSS.widget).addClass(b.wijCSS.helperClearFix),this.list&&(this.list.addClass(b.wijCSS.widget).addClass(b.wijCSS.helperReset).addClass(b.wijCSS.wijwizardSteps).addClass(b.wijCSS.helperClearFix).attr("role","tablist"),this.lis.addClass(b.wijCSS.header).addClass(b.wijCSS.cornerAll).attr("role","tab")),this.container=c("<div/>"),this.container.addClass(b.wijCSS.wijwizardContent).addClass(b.wijCSS.widget).addClass(b.wijCSS.content).addClass(b.wijCSS.cornerAll),this.container.append(this.panels),this.container.appendTo(this.element),this.panels.addClass(b.wijCSS.wijwizardPanel).addClass(b.wijCSS.content).attr("role","tabpanel"),void 0===b.activeIndex?("number"!=typeof b.activeIndex&&b.cookie&&(b.activeIndex=parseInt(this._cookie(void 0,void 0),10)),"number"!=typeof b.activeIndex&&this.panels.filter("."+b.wijCSS.wijwizardActived).length&&(b.activeIndex=this.panels.index(this.panels.filter("."+b.wijCSS.wijwizardActived))),b.activeIndex=b.activeIndex||(this.panels.length?0:-1)):null===b.activeIndex&&(b.activeIndex=-1),b.activeIndex=b.activeIndex>=0&&this.panels[b.activeIndex]||b.activeIndex<0?b.activeIndex:0,this.panels.addClass(b.wijCSS.wijwizardHide).attr("aria-hidden",!0),b.activeIndex>=0&&this.panels.length&&(this.panels.eq(b.activeIndex).removeClass(b.wijCSS.wijwizardHide).addClass(b.wijCSS.wijwizardActived).attr("aria-hidden",!1),this.load(b.activeIndex)),this._createButtons()):(this.panels=c("> div",this.container),b.activeIndex=this.panels.index(this.panels.filter("."+b.wijCSS.wijwizardActived))),this._addScrollForContent(),this._refreshStep(),this._initScroller(),b.cookie&&this._cookie(b.activeIndex,b.cookie),b.cache===!1&&this.panels.removeData("cache.wijwizard"),(void 0===b.showOption||null===b.showOption)&&(b.showOption={}),this._normalizeBlindOption(b.showOption),(void 0===b.hideOption||null===b.hideOption)&&(b.hideOption={}),this._normalizeBlindOption(b.hideOption),this.panels.unbind(".wijwizard")},b.prototype._removeButtons=function(){this.buttons&&(this.buttons.remove(),this.buttons=void 0)},b.prototype._createButtons=function(){var a,b,d,e=this,f=this,g=this.options,h=g.backBtnText,i=g.nextBtnText;this._removeButtons(),"none"!==g.navButtons&&(this.buttons||(a=g.navButtons,"auto"===a&&(a=this.list?"common":"edge"),this.buttons=c("<div/>"),this.buttons.addClass(g.wijCSS.wijwizardButtons),b=function(a,b){g.disabled||b.is(":not(."+g.wijCSS.stateDisabled+")")&&b.addClass(a)},d=function(a,b){g.disabled||b.removeClass(a)},"common"===a?(this.backBtn=c("<a href='#'><span class='"+g.wijCSS.buttonText+"'>"+h+"</span></a>").addClass(g.wijCSS.widget).addClass(g.wijCSS.stateDefault).addClass(g.wijCSS.cornerAll).addClass(g.wijCSS.button).addClass(g.wijCSS.buttonTextOnly).appendTo(this.buttons).bind({"click":function(){return e.back(),!1},"mouseover":function(){b(g.wijCSS.stateHover,c(this))},"mouseout":function(){d(g.wijCSS.stateHover,c(this))},"mousedown":function(){b(g.wijCSS.stateActive,c(this))},"mouseup":function(){d(g.wijCSS.stateActive,c(this))}}).attr("role","button"),this.nextBtn=c("<a href='#'><span class='"+g.wijCSS.buttonText+"'>"+i+"</span></a>").addClass(g.wijCSS.widget).addClass(g.wijCSS.stateDefault).addClass(g.wijCSS.cornerAll).addClass(g.wijCSS.button).addClass(g.wijCSS.buttonTextOnly).appendTo(this.buttons).bind({"click":function(){return f.next(),!1},"mouseover":function(){b(g.wijCSS.stateHover,c(this))},"mouseout":function(){d(g.wijCSS.stateHover,c(this))},"mousedown":function(){b(g.wijCSS.stateActive,c(this))},"mouseup":function(){d(g.wijCSS.stateActive,c(this))}}).attr("role","button")):(this.backBtn=c("<a href='#'/>").addClass(g.wijCSS.wijwizardPrev).addClass(g.wijCSS.stateDefault).addClass(g.wijCSS.cornerRight).append("<span class='"+g.wijCSS.icon+" "+g.wijCSS.iconArrowLeft+"'></span>").appendTo(this.buttons).bind({"click":function(){return f.back(),!1},"mouseover":function(){b(g.wijCSS.stateHover,c(this))},"mouseout":function(){d(g.wijCSS.stateHover,c(this))},"mousedown":function(){b(g.wijCSS.stateActive,c(this))},"mouseup":function(){d(g.wijCSS.stateActive,c(this))}}).attr("role","button"),this.nextBtn=c("<a href='#'/>").addClass(g.wijCSS.wijwizardNext).addClass(g.wijCSS.stateDefault).addClass(g.wijCSS.cornerLeft).append("<span class='"+g.wijCSS.icon+" "+g.wijCSS.iconArrowRight+"'></span>").appendTo(this.buttons).bind({"click":function(){return f.next(),!1},"mouseover":function(){b(g.wijCSS.stateHover,c(this))},"mouseout":function(){d(g.wijCSS.stateHover,c(this))},"mousedown":function(){b(g.wijCSS.stateActive,c(this))},"mouseup":function(){d(g.wijCSS.stateActive,c(this))}}).attr("role","button")),this.buttons.appendTo(this.element)))},b.prototype._refreshStep=function(){var a=this.options;this.lis&&(this.lis.removeClass(a.wijCSS.priorityPrimary).addClass(a.wijCSS.prioritySecondary).attr("aria-selected",!1),a.activeIndex>=0&&a.activeIndex<=this.lis.length-1&&(this.lis&&this.lis.eq(a.activeIndex).removeClass(a.wijCSS.prioritySecondary).addClass(a.wijCSS.priorityPrimary).attr("aria-selected",!0),this.scrollWrap&&this.scrollWrap.wijsuperpanel("scrollChildIntoView",this.lis.eq(a.activeIndex)))),this.buttons&&!a.loop&&(this.backBtn[a.activeIndex<=0?"addClass":"removeClass"](a.wijCSS.stateDisabled).attr("aria-disabled",0===a.activeIndex),this.nextBtn[a.activeIndex>=this.panels.length-1?"addClass":"removeClass"](a.wijCSS.stateDisabled).attr("aria-disabled",a.activeIndex>=this.panels.length-1))},b.prototype._initScroller=function(){if(this.lis&&this.element.is(":visible")){var a=0;c.each(this.lis,function(){a+=c(this).outerWidth(!0)}),this.element.innerWidth()<a?(void 0===this.scrollWrap&&(this.list.wrap("<div class='scrollWrap'></div>"),this.scrollWrap=this.list.parent(),c.effects&&c.effects.save?c.effects.save(this.list,["width","height","overflow"]):c.save&&c.save(this.list,["width","height","overflow"])),this.list.width(a+8),this.scrollWrap.height(this.list.outerHeight(!0)),this.scrollWrap.wijsuperpanel({"allowResize":!1,"hScroller":{"scrollBarVisibility":"hidden"},"vScroller":{"scrollBarVisibility":"hidden"}})):this._removeScroller()}},b.prototype._removeScroller=function(){this.scrollWrap&&(this.scrollWrap.wijsuperpanel("destroy").replaceWith(this.scrollWrap.contents()),this.scrollWrap=void 0,c.effects&&c.effects.restore?c.effects.restore(this.list,["width","height","overflow"]):c.restore&&c.restore(this.list,["width","height","overflow"]))},b.prototype._cookie=function(a,b){var d=this.cookie||(this.cookie=this.options.cookie.name);return c.cookie.apply(null,[d].concat(c.makeArray(arguments)))},b.prototype._normalizeBlindOption=function(a){if(void 0===a.blind&&(a.blind=!1),void 0===a.fade&&(a.fade=!1),void 0===a.duration&&(a.duration=200),"string"==typeof a.duration)try{a.duration=parseInt(a.duration,10)}catch(b){a.duration=200}},b.prototype._ui=function(a){return{"panel":a,"index":this.panels.index(a)}},b.prototype._removeSpinner=function(){this.element.removeClass(this.options.wijCSS.tabsLoading);var a=this.element.data("spinner.wijwizard");a&&(this.element.removeData("spinner.wijwizard"),a.remove())},b.prototype._showPanel=function(a){var b,d=this,e=this.options,f=c(a);f.addClass(e.wijCSS.wijwizardActived),(e.showOption.blind||e.showOption.fade)&&e.showOption.duration>0?(b={"duration":e.showOption.duration},e.showOption.blind&&(b.height="toggle"),e.showOption.fade&&(b.opacity="toggle"),f.hide().removeClass(e.wijCSS.wijwizardHide).animate(b,e.showOption.duration||"normal","linear",function(){d._resetStyle(f),f.wijTriggerVisibility&&f.wijTriggerVisibility(),d._trigger("show",null,d._ui(f[0])),d._removeSpinner(),f.attr("aria-hidden",!1),d._trigger("activeIndexChanged",null,d._ui(f[0]))})):(f.removeClass(e.wijCSS.wijwizardHide).attr("aria-hidden",!1),f.wijTriggerVisibility&&f.wijTriggerVisibility(),this._trigger("show",null,this._ui(f[0])),this._removeSpinner(),this._trigger("activeIndexChanged",null,this._ui(f[0])))},b.prototype._hidePanel=function(a){var b,d=this,e=this.options,f=c(a);f.removeClass(e.wijCSS.wijwizardActived),(e.hideOption.blind||e.hideOption.fade)&&e.hideOption.duration>0?(b={"duration":e.hideOption.duration},e.hideOption.blind&&(b.height="toggle"),e.hideOption.fade&&(b.opacity="toggle"),f.animate(b,e.hideOption.duration||"normal","linear",function(){f.addClass(e.wijCSS.wijwizardHide).attr("aria-hidden",!0),d._resetStyle(f),d.element.dequeue("wijwizard")})):(f.addClass(e.wijCSS.wijwizardHide).attr("aria-hidden",!0),this.element.dequeue("wijwizard"))},b.prototype._resetStyle=function(a){a.css({"display":""}),c.support.opacity||a[0].style.removeAttribute("filter")},b.prototype._addScrollForContent=function(){var a=this,b=a.element.height();this.element.is(":visible")&&(a.buttons&&(b-=a.buttons.outerHeight(!0)),a.list&&(b-=a.list.outerHeight(!0)),b-=a.container.outerHeight(!0)-a.container.innerHeight()-(a.container.innerHeight()-a.container.height()),b<a.container.height()&&a.container.height(b),a.container.css("overflow","auto"))},b.prototype.add=function(a,b,d){void 0===a&&(a=this.panels.length),void 0===b&&(b="Step "+a);var e,f=this,g=this.options,h=c(g.panelTemplate||f._defaults.panelTemplate).data("destroy.wijwizard",!0);return h.addClass(g.wijCSS.wijwizardPanel).addClass(g.wijCSS.content).addClass(g.wijCSS.cornerAll).addClass(g.wijCSS.wijwizardHide).attr("aria-hidden",!0),a>=this.panels.length?this.panels.length>0?h.insertAfter(this.panels[this.panels.length-1]):h.appendTo(this.container):h.insertBefore(this.panels[a]),this.list&&this.lis&&(e=c((g.stepHeaderTemplate||f._defaults.stepHeaderTemplate).replace(/#\{title\}/g,b).replace(/#\{desc\}/g,d)),e.addClass(g.wijCSS.header).addClass(g.wijCSS.cornerAll).addClass(g.wijCSS.prioritySecondary).data("destroy.wijwizard",!0),a>=this.lis.length?e.appendTo(this.list):e.insertBefore(this.lis[a])),this._pageLize(!1),1===this.panels.length&&(g.activeIndex=0,e.addClass(g.wijCSS.priorityPrimary),h.removeClass(g.wijCSS.wijwizardHide).addClass(g.wijCSS.wijwizardActived).attr("aria-hidden",!1),this.element.queue("wijwizard",function(){f._trigger("show",null,f._ui(f.panels[0]))}),this._refreshStep(),this.load(0)),this._trigger("add",null,this._ui(this.panels[a])),this},b.prototype.remove=function(a){var b=this.options,c=this.panels.eq(a).remove();return this.lis.eq(a).remove(),a<b.activeIndex&&b.activeIndex--,this._pageLize(!1),c.hasClass(b.wijCSS.wijwizardActived)&&this.panels.length>=1&&this.show(a+(a<this.panels.length?0:-1)),this._trigger("remove",null,this._ui(c[0])),this},b.prototype.show=function(a){var b=this;if(0>a||a>=this.panels.length)return this;if(this.element.queue("wijwizard").length>0)return this;var d,e,f=this.options,g={"nextIndex":0,"nextPanel":null};if(c.extend(g,this._ui(this.panels[f.activeIndex])),g.nextIndex=a,g.nextPanel=this.panels[a],this._trigger("validating",null,g)===!1)return this;if(d=this.panels.filter(":not(."+f.wijCSS.wijwizardHide+")"),e=this.panels.eq(a),f.activeIndex=a,this.abort(),f.cookie&&this._cookie(f.activeIndex,f.cookie),this._refreshStep(),!e.length)throw"jQuery UI wijwizard: Mismatching fragment identifier.";return d.length&&this.element.queue("wijwizard",function(){b._hidePanel(d)}),this.element.queue("wijwizard",function(){b._showPanel(e)}),this.load(a),this},b.prototype.next=function(){var a=this.options,b=a.activeIndex+1;return a.disabled?!1:(a.loop&&(b%=this.panels.length),b<this.panels.length?(this.show(b),!0):!1)},b.prototype.back=function(){var a=this.options,b=a.activeIndex-1;return a.disabled?!1:(a.loop&&(b=0>b?this.panels.length-1:b),b>=0?(this.show(b),!0):!1)},b.prototype.load=function(a){var b,d=this,e=d.options,f=d.panels.eq(a)[0],g=c.data(f,"load.wijwizard");return d.abort(),!g||0!==d.element.queue("wijwizard").length&&c.data(f,"cache.wijwizard")?void d.element.dequeue("wijwizard"):(this.element.addClass(e.wijCSS.tabsLoading),e.spinner&&(b=this.element.data("spinner.wijwizard"),b||(b=c("<div/>"),b.addClass(e.wijCSS.wijwizardSpinner),b.html(e.spinner||d._defaults.spinner),b.appendTo(document.body),this.element.data("spinner.wijwizard",b),b.wijpopup({"showEffect":"blind","hideEffect":"blind"})),b.wijpopup("show",{"of":this.element,"my":"center center","at":"center center"})),this.xhr=c.ajax(c.extend({},e.ajaxOptions,{"url":g,"dataType":"html","success":function(b,g){c(f).html(b),e.cache&&c.data(f,"cache.wijwizard",!0),d._trigger("load",null,d._ui(d.panels[a]));try{e.ajaxOptions&&e.ajaxOptions.success&&e.ajaxOptions.success(b,g)}catch(h){}},"error":function(b,c,g){d._trigger("load",null,d._ui(d.panels[a]));try{e.ajaxOptions&&e.ajaxOptions.error&&e.ajaxOptions.error(b,c,a,f)}catch(h){}}})),d.element.dequeue("wijwizard"),d)},b.prototype.abort=function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("wijwizard",this.element.queue("wijwizard").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._removeSpinner(),this},b.prototype.url=function(a,b){return this.panels.eq(a).removeData("cache.wijwizard").data("load.wijwizard",b),this},b.prototype.count=function(){return this.panels.length},b.prototype.stop=function(){var a=this.element.data("intId.wijwizard");a&&(window.clearInterval(a),this.element.removeData("intId.wijwizard"))},b.prototype.play=function(){var a,b=this,c=this.options,d=this.panels.length;this.element.data("intId.wijwizard")||(a=window.setInterval(function(){var a=c.activeIndex+1;if(a>=d){if(!c.loop)return void b.stop();a=0}b.show(a)},c.delay),this.element.data("intId.wijwizard",a))},b}(a.wijmoWidget);b.wijwizard=d,d.prototype._defaults={"stepHeaderTemplate":"<li><h1>#{title}</h1>#{desc}</li>","panelTemplate":"<div></div>","spinner":"<em>Loading&#8230;</em>"};var e=function(){function a(){this.wijCSS={"wijwizard":"wijmo-wijwizard","wijwizardButtons":"wijmo-wijwizard-buttons","wijwizardPrev":"wijmo-wijwizard-prev","wijwizardNext":"wijmo-wijwizard-next","wijwizardSteps":"wijmo-wijwizard-steps","wijwizardContent":"wijmo-wijwizard-content","wijwizardPanel":"wijmo-wijwizard-panel","wijwizardActived":"wijmo-wijwizard-actived","wijwizardHide":"wijmo-wijwizard-hide","wijwizardSpinner":"wijmo-wijwizard-spinner"},this.wijMobileCSS={"header":"ui-header ui-bar-a","content":"ui-body-b","stateDefault":"ui-btn ui-btn-a","stateHover":"ui-btn-down-a","stateActive":"ui-btn-down-a"},this.navButtons="auto",this.autoPlay=!1,this.delay=3e3,this.loop=!1,this.hideOption={"fade":!0},this.showOption={"fade":!0,"duration":400},this.ajaxOptions=null,this.cache=!1,this.cookie=null,this.stepHeaderTemplate="",this.panelTemplate="",this.spinner="",this.backBtnText="back",this.nextBtnText="next",this.add=null,this.remove=null,this.activeIndexChanged=null,this.show=null,this.load=null,this.validating=null}return a}();d.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new e),c.wijmo.registerWidget("wijwizard",d.prototype)}(a.wizard||(a.wizard={}));a.wizard}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d="wijmo-wijribbon",e=d+"-disabled",f=d+"-bigbutton",g=d+"-panel",h=d+"-groups",i=d+"-group",j=i+"-content",k=i+"-label",l=d+"-dropdown",m=d+"-dropdowngroup",n=d+"-abbrev",o=n+"group",p=d+"-text",q=d+"-icon",r=d+"-abbrevicon",s="ui-button",t="ui-state-active",u=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._create=function(){var a=this;window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c)),a._ribbonify(),c(window).bind("resize.wijribbon",function(){a.element.is(":visible")&&a.updateRibbonSize()}),a.element.is(":hidden")&&a.element.wijAddVisibilityObserver&&a.element.wijAddVisibilityObserver(function(){a.updateRibbonSize(),a.options.disabled&&a._setDisabled(!0),a.element.wijRemoveVisibilityObserver&&a.element.wijRemoveVisibilityObserver()},"wijribbon"),a.options.disabled&&a._setDisabled(!0)},b.prototype._setOption=function(a,b){c.wijmo.widget.prototype._setOption.apply(this,arguments),"disabled"===a&&this._setDisabled(b),c(".wijmo-wijribbon-startmenulink",this.element).unbind("click.tabs")},b.prototype._setDisabled=function(a){var b=this,d=b.element,f=d.offset(),g=f.top,h=f.left,i=c("body"),j=this.options.wijCSS,k=b.disabledModal;d.data("wijmo-wijtabs")&&d.wijtabs("option","disabled",a),0!==d.closest(".wijmo-wijeditor").length&&(g=0,h=0,i=d.parent()),a?(k||(k=c("<div></div>").addClass(j.stateDisabled+" "+e).css({"top":g,"left":h,"background-color":"lightgray","position":"absolute"}).appendTo(i).bind("click mousedown mouseup mouseover mouseout focus keydown keypress",function(a){return a.stopPropagation(),a.preventDefault(),!1}),b.disabledModal=k),b.disabledModal.width(d.width()).height(d.outerHeight()).show()):b.disabledModal&&b.disabledModal.hide()},b.prototype._initCustomButtons=function(){var a,b=this;c.each(c("[customtype]",b.element),function(d,e){a=c(e).attr("customtype"),a&&b.options.custombuttons[a]&&b.options.custombuttons[a].create(c(e))})},b.prototype._ribbonify=function(){var a=this,b=this.options.wijCSS;a.buttons={},a.listUis={},a.accessbarBtns={},a._initCustomButtons(),a._createAccessToolBar(),a._getButtonSets(),a._createButtons(),a._createGroup(),a._createSplit(),a._createDropdwon(),a._createInputDropdown(),a._createGallery(),a._hideShowedList(),a._createTab(),c("."+b.helperReset+":not(."+h+", ."+b.tabsNav+", .wijmo-wijmenu-list)",a.element).hover(function(){c(this).addClass(b.stateHover)},function(){c(this).removeClass(b.stateHover)}),c("."+s,a.element).bind("mouseenter",function(){c("."+b.buttonText,this).addClass(b.stateHover)}).bind("mouseleave",function(){c("."+b.buttonText,this).removeClass(b.stateHover)}),c("button."+s,a.element).bind("mousedown",function(){a._addActiveClassToButtonText(this)}).bind("mouseup",function(){a._addActiveClassToButtonText(this)}),c("label."+s,a.element).bind("click",function(){c("span",this)&&1===c("span",this).length&&a._addActiveClassToLabelButtonText(this)})},b.prototype._addActiveClassToButtonText=function(a){var b=this.options.wijCSS;a&&(c(a).hasAllClasses(t)?c("."+b.buttonText,a).addClass(b.stateActive).addClass(b.stateDefault):c("."+b.buttonText,a).removeClass(b.stateActive).removeClass(b.stateDefault))},b.prototype._addActiveClassToLabelButtonText=function(a){var b,d,e,f=this;a&&(d=c(a).attr("for"),b=c("#"+d,f.element),b.is(":checkbox")?f._addActiveClassToButtonText(a):b.is(":radio")&&(e=f.element.find("[name='"+b.attr("name")+"']"),c.each(e,function(){f._updateGroupElementTextState(this)})))},b.prototype._updateGroupElementTextState=function(a){var b,d=this.options.wijCSS;a&&(b=c("[for='"+c(a).attr("id")+"']",c(a).parent()),b&&(b.hasAllClasses(t)?b.children("."+d.buttonText).addClass(d.stateActive).addClass(d.stateDefault):b.children("."+d.buttonText).removeClass(d.stateActive).removeClass(d.stateDefault)))},b.prototype._getButtonSets=function(){var a,b=this;b.groups=[],b.splits=[],b.dropdowns=[],b.inputDropdowns=[],c("span>button, span>:checkbox, span>:radio, div>button, div>:checkbox, div>:radio, div>:text",b.element).each(function(d,e){return c(e).parents("[customtype]")&&0!==c(e).parents("[customtype]").length?void 0:(a=c(e).parent(),0!==c(">ul",a).length||a.hasClass("wijmo-wijribbon-accesstoolbar")?2===c(">button",a).length?b.splits.push(a):1===c(">button",a).length?b.dropdowns.push(a):1===c(">input[type='text']",a).length&&b.inputDropdowns.push(a):b.groups.push(a),this)}),b.groups=b._unique(b.groups),b.splits=b._unique(b.splits)},b.prototype._unique=function(a){var b=c.makeArray(c.map(a,function(a){return a.get(0)}));return c.map(c.unique(b),function(a){return c(a)})},b.prototype._createButtons=function(){var a=this,b=a.element;c(":checkbox",b).each(function(){return c(this).parents("[customtype]")&&0!==c(this).parents("[customtype]").length?void 0:(a._createButton(c(this),"checkbox"),c(this).bind("change",function(){a._addActiveClassToLabelButtonText(c(this).button("widget")[0])}),this)}),c(":radio",b).each(function(){return c(this).parents("[customtype]")&&0!==c(this).parents("[customtype]").length?void 0:(a._createButton(c(this),"radio"),c(this).bind("change",function(){a._addActiveClassToLabelButtonText(c(this).button("widget")[0])}),this)}),c("button",b).each(function(){return c(this).parents("[customtype]")&&0!==c(this).parents("[customtype]").length?void 0:(a._createButton(c(this),"button"),this)})},b.prototype._createButton=function(a,b){var d,e=this,f=this.options.wijCSS,g=e._buildButtonOption(a,b),h=a.data("commandName");a.button(g),g.text||("button"===b?a.children("."+f.buttonText).text(h):(d=c("[for='"+a.attr("id")+"']",a.parent()),d&&d.children("."+f.buttonText).text(h))),a.parent().is(".wijmo-wijribbon-accesstoolbar")&&"true"===a.attr("canlocateonaccesstoolbar")&&a.button("widget").hide(),e._triggerEvent(a)},b.prototype._createGroup=function(){c.each(this.groups,function(a,b){b.buttonset()})},b.prototype._createSplit=function(){var a=this,b=this.options.wijCSS;c.each(a.splits,function(e,f){var g,h=f.children("ul"),i=f.children("button:eq(0)"),j=i.data("commandName"),k=f.children("button:eq(1)");h.children("li").addClass(b.cornerAll),f.addClass(d+"-"+j),k.button({"icons":{"primary":b.iconArrowDown},"text":!1}).data("list",h).unbind("click").bind("click",function(a){a.stopPropagation(),a.preventDefault()}).bind("mouseup",function(b){h=c(this).data("list"),h.is(":visible")?(a.showList.hide().css("z-index",""),a.showList=null):(h.show().position({"my":"left top","at":"left bottom","of":f}).css("z-index",9999),a.showList=h),b.stopPropagation(),b.preventDefault()}),k.children("."+b.buttonText).text("foo"),f.after(h),h.css("position","absolute").addClass(b.helperReset+" "+b.helperClearFix+" "+b.cornerAll+" "+l).hide(),f.buttonset(),g={"ui":i,"defaultValue":i.button("option","label"),"buttons":[],"type":"split","trigger":k,"list":h},c("button, :checkbox, :radio",h).bind("click",function(b){h.hide().css("z-index",""),a.showList=null,b.preventDefault()}),h.find(">li>button,>li>:radio,>li>:checkbox").each(function(b,d){var e=c(d).data("commandName");""!==e&&a.buttons[e]&&(a.buttons[e].parent=i,a.buttons[e].type="split"),g.buttons.push(c(d))}),""!==j&&(a.listUis[j]=g)})},b.prototype._createDropdwon=function(){var a=this,b=this.options.wijCSS;a.dropdownLabels={},c.each(a.dropdowns,function(e,f){var g,h=f.children("ul"),i=f.children("button:eq(0)"),j=i.data("commandName");h.children("li").addClass(b.cornerAll+" "+b.stateDefault),f.addClass(d+"-"+j),i.button({"icons":{"secondary":b.iconArrowDown}}).unbind("click").bind("click",function(a){a.stopPropagation(),a.preventDefault()}).bind("mouseup",function(b){a._showDropDownList(h,i),b.stopPropagation(),b.preventDefault()}).bind("keydown",function(b){h.is(":visible")&&a._dropdownListKeyHandler(b,h,i)}),g={"ui":i,"defaultValue":i.button("option","label"),"buttons":[],"type":"dropdown","list":h},c("button, :checkbox, :radio",h).bind("click",function(d){var e,f=c(this).data("commandName"),g=i.children("."+b.buttonText).width();a.dropdownLabels[f]||(a.dropdownLabels[f]=a._getDropdownLabelSubstr(c(this).button("option","label"),i.children("."+b.buttonText),g)),e=a.dropdownLabels[f],i.button("option","label",e),i.attr("title",c(this).button("option","label")),h.hide().css("z-index",""),a.showList=null,d.preventDefault()}),h.css("position","absolute").addClass(b.helperReset+" "+b.helperClearFix+" "+b.cornerAll+" "+l).hide(),f.buttonset(),a._collectDropDownButtons(h,i,g,j)})},b.prototype._createInputDropdown=function(){var a=this,b=this.options.wijCSS;a.dropdownLabels={},c.each(a.inputDropdowns,function(e,f){var g,h=f.children("ul"),i=f.children("input[type='text']:eq(0)"),j=a._createInputDropDownWrapper(i),k=i.prop("name");f.prepend(j),h.children("li").addClass(b.cornerAll+" "+b.stateDefault),f.addClass(d+"-"+k),i.removeProp("name").data("commandName",k).addClass(b.stateDefault+" "+b.content+" "+b.cornerLeft),j.find("a").bind("mouseup",function(b){a._showDropDownList(h,i),i.focus(),b.stopPropagation(),b.preventDefault()}).bind("keydown",function(b){a._dropdownListKeyHandler(b,h,j)}),a._bindInputEvent(i,h),g={"ui":i,"defaultValue":i.val(),"buttons":[],"type":"dropdown","list":h},c("button, :checkbox, :radio",h).bind("click",function(b){var d,e=c(this).data("commandName");a.dropdownLabels[e]||(a.dropdownLabels[e]=c(this).button("option","label")),d=a.dropdownLabels[e],i.val(c(this).button("option","label")).attr("title",c(this).button("option","label")),h.hide().css("z-index",""),a.showList=null,b.preventDefault(),b.stopPropagation()}),h.css("position","absolute").addClass(b.helperReset+" "+b.helperClearFix+" "+b.cornerAll+" "+l).hide(),
a._collectDropDownButtons(h,i,g,k)})},b.prototype._collectDropDownButtons=function(a,b,d,e){var f=this;a.find(">li>button,>li>:radio,>li>:checkbox").each(function(a,e){var g=c(e).data("commandName");""!==g&&f.buttons[g]&&(f.buttons[g].parent=b,f.buttons[g].type="dropdown"),d.buttons.push(c(e))}),""!==e&&(f.listUis[e]=d)},b.prototype._showDropDownList=function(a,b){var c=this;a.is(":visible")&&!a.find("li."+c.options.wijCSS.stateActive)?(c.showList.hide().css("z-index",""),c.showList=null):(c.showList&&(c.showList.hide(),c.showList=null),a.show().position({"my":"left top","at":"left bottom","of":b}).css("z-index",9999),c.showList=a,c.isShow=!0)},b.prototype._bindInputEvent=function(a,b){var c=this;a.bind("change",function(b){var d={"name":void 0,"commandName":void 0};d.name=a.prop("name"),d.commandName=a.val(),c._trigger("click",b,d)}).bind("keydown",function(d){c._dropdownListKeyHandler(d,b,a)})},b.prototype._dropdownListKeyHandler=function(a,b,c){var d=this,e=a.keyCode,f=d._getKeyCodeEnum();switch(e){case f.UP:d._activeDropDownListElement(!1,b,c),a.preventDefault();break;case f.DOWN:d._activeDropDownListElement(!0,b,c),a.preventDefault();break;case f.ENTER:b.find("label."+d.options.wijCSS.stateActive).parent("li").find("input").trigger("click"),a.preventDefault()}},b.prototype._activeDropDownListElement=function(a,b,d){var e,f,g=this,h=b.find("li").length;return b.is(":visible")?(f=b.find("label."+g.options.wijCSS.stateActive).parent("li"),f&&f.length>0&&(e=b.find("li").index(f)),g._changeListItemActiveState(f,!1),void 0===e?e=0:a?(e++,e==h&&(e=void 0)):(e--,-1==e&&(e=h-1)),void g._changeListItemActiveState(c(b.find("li")[e]),!0)):void g._showDropDownList(b,d)},b.prototype._changeListItemActiveState=function(a,b){var d=this.options.wijCSS;a&&(b?(c("label",a).addClass(d.stateActive),c("span",a).addClass(d.stateActive)):(c("label",a).removeClass(d.stateActive),c("span",a).removeClass(d.stateActive)))},b.prototype._createGallery=function(){var a=this,b=a.options.wijCSS;c(".wijmo-wijribbon-gallery",a.element).each(function(d,e){c(e).children("div").each(function(d,e){c(e).bind("mouseenter",function(a){c(e).hasAllClasses(b.stateDisabled)||c(e).addClass(b.stateHover)}).bind("mouseleave",function(a){c(e).hasAllClasses(b.stateDisabled)||c(e).removeClass(b.stateHover)}).bind("click",function(d){if(!c(e).hasAllClasses(b.stateDisabled)){c(e).parent("div.wijmo-wijribbon-gallery").children("div").removeClass(b.stateActive),c(e).addClass(b.stateActive);var f={"name":void 0,"commandName":void 0};f.name=c(e).parent("div.wijmo-wijribbon-gallery").attr("name"),f.commandName=c(e).attr("name"),a._trigger("click",d,f)}}),a.buttons[c(e).attr("name")]={"button":c(e),"type":"galleryBtn"}})})},b.prototype._getKeyCodeEnum=function(){if(c.ui&&c.ui.keyCode)return c.ui.keyCode;if(c.mobile&&c.mobile.keyCode)return c.mobile.keyCode;throw"keyCode object is not found"},b.prototype._createInputDropDownWrapper=function(a){var b=this.options.wijCSS,d=c("<span class='wijmo-wijribbon-inputdropdownwrapper'></span>").append(a);return c("<a></a>").appendTo(d).button({"icons":{"primary":b.iconArrowDown},"text":!1}).removeClass(b.cornerAll).addClass("wijmo-wijribbon-inputdropdownbtn "+b.cornerRight),d},b.prototype._createTab=function(){var a=this,b=this.options.wijCSS,e=a.element;return e.addClass(d),a.tabEle=e,c(">ul",e).length>0?(e.wijtabs({"select":function(b,c){a._hideAllMenus()}}),a._createRibbonGroups(),c(".wijmo-wijribbon-startmenu")&&c(".wijmo-wijribbon-startmenu").length>0&&(e.wijtabs("option","selected",1),a._createStartMenu()),!0):(e.addClass(d+"-simple").addClass(b.stateDefault).addClass(b.helperClearFix),!1)},b.prototype._createAccessToolBar=function(){var a,b,d=this,e=c("<div class='wijmo-wijribbon-accesstoolbar'></div>");(0!==c("*[canlocateonaccesstoolbar='true']",d.element).length||0!==c("*[locateonaccesstoolbar='true']",d.element).length)&&(c("input[canlocateonaccesstoolbar='true'],input[locateonaccesstoolbar='true']",d.element).each(function(){a=c(this).attr("id")+"_accessbar";var b=c("label[for="+c(this).attr("id")+"]");d.accessbarBtns[b.attr("title")]={"button":c(this).clone().attr("id",a),"type":c(this).attr("type"),"labelEle":b.clone().attr("for",a),"selected":"true"===c(this).attr("locateonaccesstoolbar")?!0:!1}}),c("button[canlocateonaccesstoolbar='true'],button[locateonaccesstoolbar='true']",d.element).each(function(){a=c(this).attr("id")+"_accessbar",d.accessbarBtns[c(this).attr("title")]={"button":c(this).clone(),"type":"button","selected":"true"===c(this).attr("locateonaccesstoolbar")?!0:!1}}),c.each(d.accessbarBtns,function(a,b){e.append(b.button),b.labelEle&&e.append(b.labelEle)}),b=c('<button title="Customize Access Toolbar" class ="wijmo-wijribbon-accesstoolbarbtn '+d.options.wijCSS.iconArrowDown+'" name="quicktoolbar"></button>'),e.append(b),d.accessbarBtns&&d.element.prepend(e),d._createCustomQuickToolbarMenu(b,e))},b.prototype._createCustomQuickToolbarMenu=function(a,b){var d,e,f=this,g=f.options.wijCSS,h=c('<ul class="wijmo-wijribbon-accesstoolbarmenu"></ul>');c.each(f.accessbarBtns,function(a,b){e=b.selected?" wijmo-wijribbon-accesstoolbarmenuitemchecked":" wijmo-wijribbon-accesstoolbarmenuitemunchecked",d=c('<li><a class="'+g.cornerAll+'" tabindex="-1"><span class="'+g.icon+e+'"></span><span class="wijmo-wijmenu-text">'+a+"</span></a></li>"),d.data("accessbarcommand",a),h.append(d)}),h.prepend("<li class='wijmo-wijribbon-accesstoolbarmenutitleitem'><a>Customize Access Toolbar</a></li>"),b.append(h),h.wijmenu({"trigger":a,"triggerEvent":"click","orientation":"vertical","select":function(a,b){var d=b.item,e=d.element.data("accessbarcommand"),i=c("span."+g.icon,d.element),j=f.accessbarBtns[e].button,k=j.button("widget");i.hasClass("wijmo-wijribbon-accesstoolbarmenuitemchecked")?(i.removeClass("wijmo-wijribbon-accesstoolbarmenuitemchecked").addClass("wijmo-wijribbon-accesstoolbarmenuitemunchecked"),k.hide().removeAttr("canlocateonaccesstoolbar").attr("locateonaccesstoolbar","true")):(i.addClass("wijmo-wijribbon-accesstoolbarmenuitemchecked").removeClass("wijmo-wijribbon-accesstoolbarmenuitemunchecked"),k.show().removeAttr("locateonaccesstoolbar").attr("canlocateonaccesstoolbar","true")),h.wijmenu("deactivate",null)}}),h.wijmenu("setItemDisabled",c(".wijmo-wijribbon-accesstoolbarmenutitleitem"),!0)},b.prototype.updateRibbonSize=function(){var a,b,e=this,f=this.options.wijCSS;e.tabEle.children("div").not(".wijmo-wijmenu").each(function(g,h){var i=c(h),j=i.is(":visible"),k=i.find(">ul>li:not(.wijmo-wijmenu-item)"),l=[],n=i.width();return j||(i.removeClass(f.wijtabsHide),n=i.width()),k.each(function(f,g){var h=c(g),i=h.find(">div:last"),j=e._getGroupLabelText(i);return a=h.children("."+m),b=h.children("."+o),a&&(h.addClass(d+"-"+j.toLowerCase()).prepend(a.children()),a.remove(),b&&b.remove()),l.push({"width":h.outerWidth(!0),"text":j}),this}),e._adjustRibbonGroupIfNeeded(k,l,n),j||i.addClass(f.wijtabsHide),this}),e.options.disabled&&e._setDisabled(!0)},b.prototype._createRibbonGroups=function(){var a=this,b=this.options.wijCSS;a.tabEle.children("div").each(function(e,f){var l,m=c(f),n=m.is(":visible"),o=m.find(">ul:not(.wijmo-wijribbon-accesstoolbarmenu)>li"),p=[];return m.data("destroy.tabs")?void m.remove():(n||m.removeClass(b.wijtabsHide),l=m.width(),m.addClass(g),m.hasAllClasses(b.tabsPanel)||(m.addClass("wijmo-wijribbon-accesstoolbar"),a.tabEle.prepend(m)),m.find(">ul").addClass(b.helperReset+" "+b.helperClearFix+" "+b.content+" "+b.cornerAll+" "+h),o.each(function(e,f){var g=c(f),h=g.find(">div:last"),l=(h.find("span"),b.stateDefault+" "+i),m=a._getGroupLabelText(h);return h&&(l+=" "+d+"-"+m.toLowerCase()),g.addClass(l),h.addClass(k).bind("click",function(){return!1}),g.wrapInner("<div class = '"+j+"'></div>"),g.children().bind("mouseover",function(){c(this).addClass(b.stateHover)}).bind("mouseout",function(){c(this).removeClass(b.stateHover)}),h.appendTo(g),p.push({"width":g.outerWidth(!0),"text":m}),this}),a._originalGroupInfo=p,a._adjustRibbonGroupIfNeeded(o,p,l),n||m.addClass(b.wijtabsHide),this)})},b.prototype._createStartMenu=function(){var a=this,b=c(".wijmo-wijribbon-startmenulink",a.element),d=a.options.wijCSS;b.unbind("click"),b.parent("li").addClass("wijmo-wijribbon-startmenulinkcontainer").hover(function(){c(this).removeClass("wijmo-wijribbon-startmenulinkcontainer")},function(){c(this).addClass("wijmo-wijribbon-startmenulinkcontainer")}),c(".wijmo-wijribbon-startmenuindicator",a.element).addClass(d.icon+" "+d.iconArrowDown),c(".wijmo-wijribbon-startmenu",a.element).wijmenu({"trigger":c(".wijmo-wijribbon-startmenulink",a.element).parent(),"triggerEvent":"click","orientation":"vertical","select":function(b,c){var d={"name":void 0,"commandName":void 0};d.commandName=c.item._link.attr("name"),a._trigger("click",b,d)},"hidden":function(a,b){b.activeItem&&b.activeItem._link.removeClass(d.stateFocus)}})},b.prototype._getGroupLabelText=function(a){var b,d;return a&&(b=a.find("span"),d=a.attr("displayname")?a.attr("displayname"):b&&b.length>0&&!a.hasAllClasses(o)?c(b[0]).text():c.trim(a.text())),d},b.prototype._adjustRibbonGroupIfNeeded=function(a,b,e){for(var f,g,h,i=this,j=a.length-1,k=0,l=0,n=0;j>=0;j--){for(n=0,k=0;j>k;k++)n+=b[k].width;n+l+b[j].width<=e?(f=c(a[j]).children("."+m),g=c(a[j]).children("."+o),f&&(c(a[j]).addClass(d+"-"+b[j].text.toLowerCase()).prepend(f.children()),f.remove(),g&&g.remove())):(h=b[j],l+=i._createDropDownRibbonGroup(h.text,a[j]))}},b.prototype._createDropDownRibbonGroup=function(a,b){var e,f=this,g=d+"-"+a.toLowerCase(),h=this.options.wijCSS,j=c(b).removeClass(g),k=f._getGroupLabelText(j.find(">div:last"))||a;return j.wrapInner("<div class='"+m+" "+i+"'></div>").children().hide().addClass(g).bind("mouseup."+f.widget,function(a){null!==f.showDrpDwnGroup&&(f.showDrpDwnGroup.hide().css("z-index",""),f.showDrpDwnGroup=null)}),e=c("<div class='"+o+"'><span class='"+n+k.toLowerCase()+" "+q+" "+r+"'></span><span class='"+p+"'>"+k+"</span><span class='"+h.icon+" "+h.iconArrowDown+" "+q+"'></span></div>").appendTo(j).unbind(f.widget).bind("mouseover."+f.widget,function(a){c(this).addClass(h.stateHover)}).bind("mouseout."+f.widget,function(a){c(this).removeClass(h.stateHover)}).bind("click."+f.widget,function(a){var b=c(this).siblings("."+m);b.is(":visible")?(b.hide().css("z-index",""),f.showDrpDwnGroup=null):(f.showDrpDwnGroup&&f.showDrpDwnGroup.hide().css("z-index",""),b.show().position({"my":"left top","at":"left bottom","of":this}).css("z-index","10000"),f.showDrpDwnGroup=b,a.stopPropagation())}),j.outerWidth(!0)},b.prototype._hideShowedList=function(){var a=this;c(document).bind("mouseup",function(b){var d=b.target;a.showList&&(c(d).is(document)||!c.contains(a.showList.get(0),d))&&(a.showList.hide().css("z-index",""),a.showList=null),a.showDrpDwnGroup&&(c(d).is(document)||!c.contains(a.showDrpDwnGroup.get(0),d))&&(a.showDrpDwnGroup.hide().css("z-index",""),a.showDrpDwnGroup=null)})},b.prototype._buildButtonOption=function(a,b){var d,e,g,h,i,j,k,l=!0,m=this,n=a.attr("class");if(n&&""!==n&&n!==f)e=n.split(" ")[0],a.removeClass(e),i=c.trim(a.text()),""===i&&(l=!1);else{if("checkbox"===b||"radio"===b){if(""===c.trim(a.attr("id")))return;if(j=c("[for='"+a.attr("id")+"']",a.parent()),!j.is("label"))return;n=j.attr("class"),n&&""!==n&&n!==f?(e=n.split(" ")[0],j.removeClass(e),i=c.trim(j.text()),""===i&&(l=!1)):d=j.children("span,div")}else"button"===b&&(d=a.children("span,div"));d&&(1===d.length?""!==d.eq(0).attr("class")&&(g=d.eq(0),e=g.attr("class"),l=!1):2===d.length?d.eq(0).attr("class")&&(g=d.eq(0),e=g.attr("class"),g.is("span")?h="left":g.is("div")&&(h="top"),i=d.eq(1).text()):"button"===b&&""!==c.trim(a.text())&&(i=c.trim(a.text())))}return"button"===b?(a.empty(),k=c.trim(a.attr("name")),""!==k&&a.removeAttr("name")):(k=c.trim(j.attr("name")),""!==k&&j.removeAttr("name")),""!==k&&(a.data("commandName",k),m.buttons[k]||(m.buttons[k]={"button":void 0,"accessToolbarButton":void 0}),a.parent().is(".wijmo-wijribbon-accesstoolbar")?m.buttons[k].accessToolbarButton=a:m.buttons[k].button=a),{"label":i,"icons":{"primary":e},"position":h,"text":l}},b.prototype._triggerEvent=function(a){var b,c,d=this;d.options.wijCSS;a.bind("click",function(e){if(d.options.disabled)return e.preventDefault(),void e.stopPropagation();d._hideAllMenus();var f=!0,g=a.data("commandName"),h=d.buttons[g],i={"name":void 0,"commandName":void 0};h&&h.parent&&(i.name=h.parent.data("commandName")),i.commandName=g,d._trigger("click",e,i),b=a.parent().is(".wijmo-wijribbon-accesstoolbar")?d.buttons[g].button:d.buttons[g].accessToolbarButton,b&&(c=b.button("widget"),b.is("button")||(c&&c.hasAllClasses(t)&&(f=!1),d._setBtnWidgetCheckedStyle(b,f))),a.is("button")&&(e.preventDefault(),e.stopPropagation())})},b.prototype._getDropdownLabelSubstr=function(a,b,d){var e,f=this,g=a.length,h=0,i=g,j=Math.floor((h+i)/2),k=c("<span></span>"),l=a.substr(0,j);for(k.appendTo(b.parent()),e=f._calculateWidth(l,k);e!==d&&i>h;)l=a.substr(0,j+1),e=f._calculateWidth(l,k),e>d?i=j-1:d>e&&(h=j+1),j=Math.floor((h+i)/2);return k.remove(),l},b.prototype._calculateWidth=function(a,b){return b.text(a),b.width()},b.prototype.hideDropdown=function(a){var b=this,c=b.listUis[a];c&&c.list&&c.list.hide()},b.prototype._hideAllMenus=function(){var a=this;c(".wijmo-wijmenu",a.tabEle).hide()},b.prototype.setTabPageVisible=function(a,b){var d,e=this,f=c("a[href=#"+a+"]",e.element).parent("li"),g=f.parent("ul");f&&f.length>0&&(b?(f.show(),d=c("li",g).index(f)):(f.hide(),d=c("li",g).index(c('li:visible:not(".wijmo-wijribbon-startmenulinkcontainer")',g)))),e.element.wijtabs("option","selected",d)},b.prototype.destroy=function(){this.disabledModal&&this.disabledModal.remove(),c(window).unbind("resize.wijribbon"),c.Widget.prototype.destroy.call(this)},b.prototype.getDropdownList=function(a){var b=this,d=b.listUis[a],e={};return d&&c.each(d.buttons,function(a,b){e[b.data("commandName")]=b.button("option","label")}),e},b.prototype.setButtonDisabled=function(a,b){var d,e,f,g,h,i=this.buttons[a],j=this.options.wijCSS,k=!1;if(i&&i.disabled)return void i.disabled(b);if(i&&i.button&&"galleryBtn"===i.type&&i.button.addClass(j.stateDisabled),i&&i.button){if(f=i.button,g=i.accessToolbarButton,k=f.is("button"),"galleryBtn"===i.type)return void(b?f.addClass(j.stateDisabled):f.removeClass(j.stateDisabled));f.button("option","disabled",b),d=c("."+j.buttonText,f),d&&d.removeClass(j.stateHover),g&&(g.button("option","disabled",b),e=c("."+j.buttonText,g),e&&e.removeClass(j.stateHover)),k?"save"!==a&&(f.children("."+j.buttonText).text(a),g&&f.children("."+j.buttonText).text(a)):c("[for='"+f.attr("id")+"']",f.parent()).children("."+j.buttonText).text(a),h=this.listUis[a],h&&"split"===h.type&&(h.trigger.button("option","disabled",b),h.trigger.children("."+j.buttonText).text(a))}},b.prototype.setButtonsDisabled=function(a){var b=this;c.each(a,function(a,c){b.setButtonDisabled(a,c)})},b.prototype.setButtonsChecked=function(a){var b=this;c.each(a,function(a,d){c.isPlainObject(d)?b.setButtonChecked(a,d.checked,d.name):b.setButtonChecked(a,d,null)})},b.prototype.registerButtonInformation=function(a,b){return a&&b?this.buttons[a]=b:void 0},b.prototype.ribbonClick=function(a,b){this._trigger("click",a,b)},b.prototype._setBtnWidgetCheckedStyle=function(a,b){var a,c=this,d=c.options.wijCSS;a.is("button")?b?a.addClass(d.stateActive):a.removeClass(d.stateActive):a.is("input[type='text']")||(a.prop("checked",b),a.button("refresh")),c._addActiveClassToButtonText(a.button("widget"))},b.prototype.removeButtonHoverState=function(a){var b,d=this,e=this.options.wijCSS,f=d.buttons[a];f&&f.button&&(b=f.button,b.is("button")&&(b.removeClass(e.stateHover).removeClass(e.stateFocus),c("span",b).removeClass(e.stateHover)))},b.prototype.setButtonChecked=function(a,b,d){var e,f,g,h,i,j=this,k=j.buttons[a],l=this.options.wijCSS;if(k&&k.checked)return void k.checked(b);if(k&&k.button){if(f=k.button,g=k.accessToolbarButton,f.is("button"))b?(f.addClass(l.stateActive),g&&g.addClass(l.stateActive)):(f.removeClass(l.stateActive),g&&g.removeClass(l.stateActive));else{if("galleryBtn"===k.type){var m=f.parent("div");return c("div",m).removeClass(l.stateActive),void(b?f.addClass(l.stateActive):f.removeClass(l.stateActive))}f.is("input[type='text']")||(f.prop("checked",b),f.button("refresh"),g&&(g.prop("checked",b),g.button("refresh")))}k.parent?"dropdown"===k.type&&b&&(j.dropdownLabels[a]||(j.dropdownLabels[a]=j._getDropdownLabelSubstr(f.button("option","label"),k.parent.children("."+l.buttonText),k.parent.children("."+l.buttonText).width())),i=j.dropdownLabels[a],k.parent.is("input[type='text']")?(k.parent.val(i),k.parent.attr("title",i)):(k.parent.button("option","label",i),k.parent.attr("title",f.button("option","label"))),e=c(":radio",k.button.closest("ul")),e&&c.each(e,function(){j._updateGroupElementTextState(this)})):(j._addActiveClassToButtonText(f.button("widget")),g&&j._addActiveClassToButtonText(g.button("widget")))}else d&&(h=j.listUis[d],h&&(h.ui.is("input[type='text']")?h.ui.val(h.defaultValue):h.ui.button("option","label",h.defaultValue),h.buttons&&c.each(h.buttons,function(a,b){b.prop("checked",!1),b.button("refresh"),j._addActiveClassToButtonText(b.button("widget"))})))},b}(a.wijmoWidget);b.wijribbon=u;var v=function(){function a(){this.initSelector=":jqmData(role='wijribbon')",this.wijCSS={"wijtabsHide":"wijmo-wijtabs-hide"},this.click=null,this.custombuttons=null}return a}();u.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new v),c.wijmo.registerWidget("wijribbon",u.prototype)}(a.ribbon||(a.ribbon={}));a.ribbon}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c,d,e,f=jQuery,g=alert,h=window,i=document,j=parseInt,k=[],l=null,m=!0,n=0,o=[],p=null,q="setButtonDisabled",r="setButtonsDisabled",s="setButtonChecked",t="setButtonsChecked",u="form",v="imagebutton",w="textarea",x="button",y="textbox",z="list",A="passwordfield",B="dropdownlist",C="hiddenfield",D="radio",E="checkbox",F="insertcol",G="insertrow",H="insertcell",I="splitcell",J="mergecell",K="deletecol",L="deleterow",M="deletecell",N="justifyleft",O="justifycenter",P="justifyright",Q="justifyfull",R="borders",S="insertorderedlist",T="insertunorderedlist",U="outdent",V="indent",W="backcolor",X="fontcolor",Y="bold",Z="italic",$="strikethrough",_="underline",aa="subscript",ba="superscript",ca="template",da="removeformat",ea="insertbreak",fa="insertparagraph",ga="insertprintpagebreak",ha="inserthorizontalrule",ia="tablebutton",ja="inserttable",ka="edittable",la="wysiwyg",ma="split",na="code",oa="wordwrap",pa="fullscreen",qa="undo",ra="redo",sa="preview",ta="cleanup",ua="cut",va="copy",wa="paste",xa="selectall",ya="media",za="specialchar",Aa="datetime",Ba="find",Ca="inspect",Da="save",Ea="spelling",Fa="imagebrowser",Ga="link",Ha="xx-small",Ia="x-small",Ja="small",Ka="medium",La="large",Ma="x-large",Na="xx-large",Oa="fontname",Pa="fontsize",Qa="blockquote",Ra="insertcode",Sa="wijmo-wijribbon",Ta=Sa+"-bigbutton",Ua=Sa+"-dropdownbutton",Va=Sa+"-splitbutton",Wa=Sa+"-list",Xa=Sa+"-save",Ya=Sa+"-save16",Za=Sa+"-undo",$a=Sa+"-redo",_a=Sa+"-preview",ab=Sa+"-cleanup",bb=Sa+"-cut",cb=Sa+"-copy",db=Sa+"-paste",eb=Sa+"-selectall",fb=Sa+"-bgcolor",gb=Sa+"-color",hb=Sa+"-bold",ib=Sa+"-italic",jb=Sa+"-underline",kb=Sa+"-strike",lb=Sa+"-sub",mb=Sa+"-sup",nb=Sa+"-template",ob=Sa+"-removeformat",pb=Sa+"-justifyleft",qb=Sa+"-justifycenter",rb=Sa+"-justifyright",sb=Sa+"-justifyfull",tb=Sa+"-borders",ub=Sa+"-orderlist",vb=Sa+"-unorderlist",wb=Sa+"-outdent",xb=Sa+"-indent",yb=Sa+"-inspect",zb=Sa+"-find",Ab=Sa+"-table",Bb=Sa+"-inserttable",Cb=Sa+"-edittable",Db=Sa+"-insertcol",Eb=Sa+"-insertrow",Fb=Sa+"-insertcell",Gb=Sa+"-splitcell",Hb=Sa+"-mergecell",Ib=Sa+"-deletecol",Jb=Sa+"-deleterow",Kb=Sa+"-deletecell",Lb=Sa+"-insertbreak",Mb=Sa+"-insertparagraph",Nb=Sa+"-insertprintpagebreak",Ob=Sa+"-inserthr",Pb=Sa+"-form",Qb=Sa+"-textarea",Rb=Sa+"-textbox",Sb=Sa+"-password",Tb=Sa+"-hiddenfield",Ub=Sa+"-imagebutton",Vb=Sa+"-button",Wb=Sa+"-listbox",Xb=Sa+"-dropdownlist",Yb=Sa+"-radio",Zb=Sa+"-checkbox",$b=Sa+"-link",_b=Sa+"-link16",ac=Sa+"-imagebrowser",bc=Sa+"-media",cc=Sa+"-specialchar",dc=Sa+"-datetime",ec=Sa+"-blockquote",fc=Sa+"-insertcode",gc=Sa+"-modes",hc=Sa+"-designview",ic=Sa+"-sourceview",jc=Sa+"-splitview",kc=Sa+"-wordwrap",lc=Sa+"-fullscreen",mc="wijmo-wijeditor",nc=mc+"-container",oc=mc+"-header",pc=mc+"-content",qc=mc+"-footer",rc=mc+"-pathselector",sc=mc+"-fullscreen",tc=mc+"-dialog",uc=tc+"-hr",vc=tc+"-buttons",wc=tc+"-button",xc=tc+"-text",yc=mc+"-imagedlg",zc=yc+"-content",Ac=yc+"-fields",Bc=yc+"-imagefield",Cc=yc+"-imagelist",Dc=yc+"-preview",Ec=yc+"-imagesrc",Fc=yc+"-imagealt",Gc=yc+"-imagewidth",Hc=yc+"-imageheight",Ic=yc+"-css",Jc=yc+"-hideimagelist",Kc=mc+"-templatedlg",Lc=Kc+"-toplabels",Mc=Kc+"-topleftlabel",Nc=Kc+"-toprightlabel",Oc=Kc+"-content",Pc=Kc+"-templatelist",Qc=Kc+"-preview",Rc=Kc+"-templateinfo",Sc=Kc+"-nameinfo",Tc=Kc+"-descriptioninfo",Uc=Kc+"-fields",Vc=Kc+"-name",Wc=Kc+"-description",Xc=Kc+"-buttons",Yc=Kc+"-delete",Zc=Kc+"-save",$c=mc+"-linkdlg",_c=$c+"-address",ad=$c+"-linktype",bd=$c+"-anchor",cd=$c+"-text",dd=$c+"-target",ed=$c+"-css",fd=$c+"-src",gd=$c+"-width",hd=$c+"-height",id=$c+"-imagecontainer",jd=$c+"-linkicontype",kd=mc+"-codedlg",ld=kd+"-source",md=kd+"-sourcelabel",nd=mc+"-taginsdlg",od=nd+"-caption",pd=nd+"-taglabel",qd=nd+"-tagtext",rd=nd+"-filterempty",sd=nd+"-attribs",td=nd+"-attriblist",ud=nd+"-innerhtml",vd=nd+"-css",wd=mc+"-colordlg",xd=wd+"-picker",yd=wd+"-color",zd=mc+"-tabledlg",Ad=zd+"-rows",Bd=zd+"-columns",Cd=zd+"-width",Dd=zd+"-height",Ed=zd+"-border",Fd=zd+"-cellpadding",Gd=zd+"-cellspacing",Hd=zd+"-csstext",Id=zd+"-bgcolor",Jd=mc+"-previewdlg",Kd=Jd+"-caption",Ld=Jd+"-navigator",Md=Jd+"-prev",Nd=Jd+"-next",Od=Jd+"-printall",Pd=Jd+"-printone",Qd=Jd+"-ok",Rd=Jd+"-printdocument",Sd=Jd+"-previewiframe",Td=mc+"-cleanupdlg",Ud=Td+"-caption",Vd=Td+"-document",Wd=Td+"-actions",Xd=mc+"-finddlg",Yd=Xd+"-find",Zd=Xd+"-replace",$d=mc+"-mediadlg",_d=$d+"-type",ae=$d+"-src",be=$d+"-width",ce=$d+"-height",de=mc+"-specialchardlg",ee=de+"-chars",fe=de+"-preview",ge=de+"-content",he=de+"-list",ie=de+"_label",je=de+"-punctuation",ke=de+"-symbols",le=de+"-diacritics",me="wijmo-formatspan",ne="."+vc+" input:first",oe="."+vc+" input:last",pe="."+vc+" input[value='OK']",qe="."+vc+" input[engValue='Cancel']",re=["Bold","Italic","UnderLine","StrikeThrough","SubScript","SuperScript","JustifyLeft","JustifyCenter","JustifyRight","JustifyFull","Border","NumberedList","BulletedList","Outdent","Indent"],se=["Bold","Italic","Link","BlockQuote","StrikeThrough","InsertDate","InsertImage","NumberedList","BulletedList","InsertCode"],te=["Bold","Italic","StrikeThrough","UnderLine","ForeColor","FontSize","Link","InsertImage","NumberedList","BulletedList","BlockQuote"],ue={"Form":{"name":"form","tip":"Form","css":Pb},"Image":{"name":"imagebutton","tip":"Image Button","css":Ub},"TextArea":{"name":"textarea","tip":"TextArea","css":Qb},"Button":{"name":"button","tip":"Button","css":Vb},"TextBox":{"name":"textbox","tip":"TextBox","css":Rb},"List":{"name":"list","tip":"ListBox","css":Wb},"PasswordField":{"name":"passwordfield","tip":"Password Field","css":Sb},"DropDownList":{"name":"dropdownlist","tip":"DropDownList","css":Xb},"HiddenField":{"name":"hiddenfield","tip":"Hidden Field","css":Tb},"Radio":{"name":"radio","tip":"RadioButton","css":Yb},"CheckBox":{"name":"checkbox","tip":"CheckBox","css":Zb},"InsertColumn":{"name":"insertcol","tip":"Insert Column","css":Db},"InsertRow":{"name":"insertrow","tip":"Insert Row","css":Eb},"InsertCell":{"name":"insertcell","tip":"Insert Cell","css":Fb},"SplitCell":{"name":"splitcell","tip":"Split Cell","css":Gb},"MergeCell":{"name":"mergecell","tip":"Merge Cell","css":Hb},"DeleteColumn":{"name":"deletecol","tip":"Delete Column","css":Ib},"DeleteRow":{"name":"deleterow","tip":"Delete Row","css":Jb},"DeleteCell":{"name":"deletecell","tip":"Delete Cell","css":Kb},"JustifyLeft":{"name":"justifyleft","tip":"Justify Left","css":pb,"grpname":"alignment"},"JustifyCenter":{"name":"justifycenter","tip":"Justify Center","css":qb,"grpname":"alignment"},"JustifyRight":{"name":"justifyright","tip":"Justify Right","css":rb,"grpname":"alignment"},"JustifyFull":{"name":"justifyfull","tip":"Justify Full","css":sb,"grpname":"alignment"},"Border":{"name":"borders","tip":"Border","css":tb},"NumberedList":{"name":"insertorderedlist","tip":"Numbered List","css":ub,"grpname":"list"},"BulletedList":{"name":"insertunorderedlist","tip":"Bulleted List","css":vb,"grpname":"list"},"Outdent":{"name":"outdent","tip":"Outdent","css":wb,"grpname":"block"},"Indent":{"name":"indent","tip":"Indent","css":xb,"grpname":"block"},"BackColor":{"name":"backcolor","tip":"Background Color","css":fb},"ForeColor":{"name":"fontcolor","tip":"Font Color","css":gb},"Bold":{"name":"bold","tip":"Bold","css":hb},"Italic":{"name":"italic","tip":"Italic","css":ib},"StrikeThrough":{"name":"strikethrough","tip":"Strikethrough","css":kb},"UnderLine":{"name":"underline","tip":"Underline","css":jb},"SubScript":{"name":"subscript","tip":"Subscript","css":lb},"SuperScript":{"name":"superscript","tip":"Superscript","css":mb},"Template":{"name":"template","tip":"Template","css":nb},"RemoveFormat":{"name":"removeformat","tip":"RemoveFormat","css":ob},"InsertBreak":{"name":"insertbreak","tip":"Insert Break","css":Lb},"InsertParagraph":{"name":"insertparagraph","tip":"Insert Paragraph","css":Mb},"InsertPrint":{"name":"insertprintpagebreak","tip":"Insert Print Page Break","css":Nb},"InsertHR":{"name":"inserthorizontalrule","tip":"Insert Horizontal Line","css":Ob},"Table":{"name":"tablebutton","tip":"Table","css":Ab},"InsertTable":{"name":"inserttable","tip":"Insert Table","css":Bb},"EditTable":{"name":"edittable","tip":"Edit Table","css":Cb},"Wysiwyg":{"name":"wysiwyg","tip":"Design View","css":hc,"grpname":"modes"},"Split":{"name":"split","tip":"Split View","css":jc,"grpname":"modes"},"Code":{"name":"code","tip":"Source View","css":ic,"grpname":"modes"},"Wordwrap":{"name":"wordwrap","tip":"Wordwrap","css":kc},"FullScreen":{"name":"fullscreen","tip":"Fullscreen","css":lc},"Undo":{"name":"undo","tip":"Undo","css":Za},"Redo":{"name":"redo","tip":"Redo","css":$a},"Preview":{"name":"preview","tip":"Preview","css":_a},"Cleanup":{"name":"cleanup","tip":"Clean up","css":ab},"Cut":{"name":"cut","tip":"Cut","css":bb},"Copy":{"name":"copy","tip":"Copy","css":cb},"Paste":{"name":"paste","tip":"Paste","css":db},"SelectAll":{"name":"selectall","tip":"Select All","css":eb},"Media":{"name":"media","tip":"Media","css":bc},"InsertSpecialChar":{"name":"specialchar","tip":"Insert Special Character","css":cc},"InsertDate":{"name":"datetime","tip":"Insert Date Time","css":dc},"Find":{"name":"find","tip":"Find And Replace","css":zb,"text":"Find"},"Inspect":{"name":"inspect","tip":"Tag Inspect","css":yb,"text":"Inspect"},"Save":{"name":"save","tip":"Save","css":Xa,"text":"Save"},"Spelling":{"name":"spelling","tip":"Form","css":""},"InsertImage":{"name":"imagebrowser","tip":"Image Browser","css":ac},"Link":{"name":"link","tip":"Link","css":$b,"text":"Link"},"FontName":{"name":"fontname","tip":"Font Name","css":Ua},"FontSize":{"name":"fontsize","tip":"Font Size","css":Ua},"BlockQuote":{"name":"blockquote","tip":"Block Quote","css":ec},"InsertCode":{"name":"insertcode","tip":"Insert Code","css":fc}},ve=function(){var a=this,b=[];a.append=function(a){b.push(a)},a.toString=function(){return b.join("")},a.dispose=function(){b=null}},we=function(a){this.text=a,this.render=function(){return this.text}},xe=function(a,b,c){var d=this,e={"br":!0,"img":!0,"hr":!0,"input":!0};d.tagName=a||"div",d.attributes=c||{},d.innerText=b||"",d.children=[],f.isPlainObject(b)&&(d.innerText="",d.attributes=b),d._isShortTag=!1,e[d.tagName]===!0&&(d._isShortTag=!0),d.render=function(){var a=new ve,b="";return a.append(d._renderBeginTag(d.tagName,d.attributes)),""!==d.innerText&&a.append(d.innerText),d.children.length>0&&f.each(d.children,function(b,c){a.append(c.render())}),a.append(d._renderEndTag(d.tagName)),b=a.toString(),a.dispose(),b},d.add=function(a){this.children.push(a)},d._renderBeginTag=function(a,b){var c=new ve,d="";return c.append("<"),c.append(a),f.each(b,function(a,b){c.append(" "),c.append(a),c.append("="),c.append('"'),c.append(b?b.toString():""),c.append('"')}),this._isShortTag?c.append(" "):c.append(">"),d=c.toString(),c.dispose(),d},d._renderEndTag=function(a){var b=new ve,c="";return this._isShortTag?b.append("/>"):(b.append("</"),b.append(a),b.append(">")),c=b.toString(),b.dispose(),c}},ye=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.wijeditor=function(){this._curPageIdx=0,this.tRange=null,this.txtFoundInIE=!1,this.txtFoundInNoneIE=!1,this.rangeSelection=null},b.prototype._create=function(){var a=this,b=a.element.attr("id");window.wijmoApplyWijTouchUtilEvents&&(f=window.wijmoApplyWijTouchUtilEvents(f)),a.element.is("input")||(a.wijeditor(),b&&""!==b||(a.element.uniqueId(),b=a.element.attr("id")),a.id_prefix="wijeditor-"+b+"-",a.$ribbon=void 0,a.$modes=void 0,a._isIE11=f.browser.msie&&f.browser.version&&parseFloat(f.browser.version)>=11,a._editorify(),a._initElements(),h.setTimeout(function(){a.options.disabled&&a._handleDisabledOption(!0,a.editor)},40),a._continueSavingInputTextForUndo=!1,a.element.is(":hidden")&&a.editor.wijAddVisibilityObserver&&a.editor.wijAddVisibilityObserver(function(b){f.contains(a.editor[0],b.target)||(a.refresh(),a.editor.wijRemoveVisibilityObserver&&a.editor.wijRemoveVisibilityObserver())},"wijeditor"))},b.prototype._contextMenuWidgetName=function(){return"wijmenu"},b.prototype._createBigButton=function(a,b,c,d){var e=this,f=e._createElement("button",{"title":a,"name":c,"class":Ta});return f.add(e._createDiv(b)),f.add(e._createSpan("",d)),f},b.prototype._createTextButton=function(a,b,c){return this._createElement("button",c,{"title":a,"name":b})},b.prototype._createButton=function(a,b,c,d){var e,f=this;return d?(e=f._createElement("button",{"title":a,"name":c}),e.add(f._createSpan(b)),e.add(f._createSpan("",d)),e):f._createElement("button",{"title":a,"name":c,"class":b})},b.prototype._createTextRadioButton=function(a,b,c,d,e){var f=this,g=c.replace(/ /g,""),h=[];return h.push(f._createElement("input",{"id":b+g,"type":"radio","name":d})),h.push(f._createElement("label",e,{"for":b+g,"title":a,"name":c})),h},b.prototype._createImageRadioButton=function(a,b,c,d,e){var f=this,g=[];return g.push(f._createElement("input",{"id":b+d,"type":"radio","name":e})),g.push(f._createElement("label",{"for":b+d,"title":a,"name":d,"class":c})),g},b.prototype._createImageCheckButton=function(a,b,c,d){var e=this,f=[];return f.push(e._createElement("input",{"id":b+d,"type":"checkbox"})),f.push(e._createElement("label",{"for":b+d,"title":a,"name":d,"class":c})),f},b.prototype._createRibbonList=function(){return this._createSpan(Wa)},b.prototype._createDropdownButton=function(a,b,c,d,e){var g=this,h=g._createElement("div",{"title":a,"class":Ua}),i=g._createElement("ul");return h.add(g._createTextButton(a,b,c)),h.add(i),f.each(d,function(a,c){var d=g._createElement("li"),h=g._createTextRadioButton(c.tip,e,c.name,b,c.text);f.each(h,function(a,b){d.add(b)}),i.add(d)}),h},b.prototype._createSplitButton=function(a,b,c,d,e){var g=this,h=g._createElement("div",{"title":a,"class":Va}),i=g._createElement("ul");return h.add(g._createBigButton(a,b,c,d)),h.add(g._createElement("button",{"class":Ta})),h.add(i),f.each(e,function(a,b){var c=g._createElement("li");c.add(g._createButton(b.tip,b.css,b.name,b.text)),i.add(c)}),h},b.prototype._createButtonByCommand=function(a){var b,c,d=this,e=ue[a];if(e){switch(c=e.name){case Qa:case u:case v:case w:case x:case y:case z:case A:case B:case C:case D:case E:case F:case G:case H:case I:case J:case K:case L:case M:case da:case ea:
case fa:case ga:case pa:case qa:case ra:case ua:case va:case wa:case Aa:case oa:case W:case X:case sa:case ta:case ya:case za:case ca:case Fa:case Ra:case ha:case xa:b=d._createButton(e.tip,e.css,c);break;case Ba:case Ca:b=d._createButton(e.tip,e.css,c,e.text);break;case R:case aa:case ba:case Y:case Z:case _:case $:b=d._createImageCheckButton(e.tip,d.id_prefix,e.css,c);break;case la:case ma:case na:case N:case O:case P:case Q:case U:case V:case S:case T:b=d._createImageRadioButton(e.tip,d.id_prefix,e.css,c,e.grpname);break;case ia:b=d._createSplitButton("Table",Ab,ia,"Table",[{"tip":"Insert Table","css":Bb,"name":ja,"text":"Insert"},{"tip":"Edit Table","css":Cb,"name":ka,"text":"Edit"}]);break;case Da:b="ribbon"===d.options.mode?d._createBigButton(e.tip,e.css,c,e.text):d._createButton(e.tip,Ya,c);break;case Ga:b="ribbon"===d.options.mode?d._createBigButton(e.tip,e.css,c,e.text):d._createButton(e.tip,_b,c);break;case Oa:b=d._createDropdownButton("Font Name",Oa,"Font Name",d.options.fontNames||[],d.id_prefix);break;case Pa:b=d._createDropdownButton("Font Size",Pa,"Font Size",d.options.fontSizes||[],d.id_prefix);break;case Ea:}return b}},b.prototype._createActionGroup=function(){var a=this,b=a._createElement("li"),c=a._createRibbonList();return b.add(a._createButtonByCommand("Save")),b.add(c),c.add(a._createButtonByCommand("Undo")),c.add(a._createButtonByCommand("Redo")),c=a._createRibbonList(),b.add(c),c.add(a._createButtonByCommand("Preview")),c.add(a._createButtonByCommand("Cleanup")),c=a._createRibbonList(),b.add(c),c.add(a._createButtonByCommand("Cut")),c.add(a._createButtonByCommand("Copy")),c.add(a._createButtonByCommand("Paste")),c.add(a._createButtonByCommand("SelectAll")),b.add(a._createElement("div","Actions")),b},b.prototype._createFontGroup=function(){var a=this,b=a._createElement("li"),c=a._createRibbonList();return b.add(a._createButtonByCommand("FontName")),b.add(a._createButtonByCommand("FontSize")),b.add(c),c.add(a._createButtonByCommand("BackColor")),c.add(a._createButtonByCommand("ForeColor")),c=a._createRibbonList(),b.add(c),f.each(a._createButtonByCommand("Bold"),function(a,b){c.add(b)}),f.each(a._createButtonByCommand("Italic"),function(a,b){c.add(b)}),f.each(a._createButtonByCommand("UnderLine"),function(a,b){c.add(b)}),f.each(a._createButtonByCommand("StrikeThrough"),function(a,b){c.add(b)}),f.each(a._createButtonByCommand("SubScript"),function(a,b){c.add(b)}),f.each(a._createButtonByCommand("SuperScript"),function(a,b){c.add(b)}),c=a._createRibbonList(),b.add(c),c.add(a._createButtonByCommand("Template")),c=a._createRibbonList(),b.add(c),c.add(a._createButtonByCommand("RemoveFormat")),b.add(a._createElement("div","Font")),b},b.prototype._createParaGroup=function(){var a=this,b=a._createElement("li"),c=a._createRibbonList();return b.add(c),f.each(a._createButtonByCommand("JustifyLeft"),function(a,b){c.add(b)}),f.each(a._createButtonByCommand("JustifyCenter"),function(a,b){c.add(b)}),f.each(a._createButtonByCommand("JustifyRight"),function(a,b){c.add(b)}),f.each(a._createButtonByCommand("JustifyFull"),function(a,b){c.add(b)}),c=a._createRibbonList(),b.add(c),f.each(a._createButtonByCommand("Border"),function(a,b){c.add(b)}),c=a._createRibbonList(),b.add(c),f.each(a._createButtonByCommand("NumberedList"),function(a,b){c.add(b)}),f.each(a._createButtonByCommand("BulletedList"),function(a,b){c.add(b)}),c=a._createRibbonList(),b.add(c),f.each(a._createButtonByCommand("Outdent"),function(a,b){c.add(b)}),f.each(a._createButtonByCommand("Indent"),function(a,b){c.add(b)}),b.add(a._createElement("div","Paragraph")),b},b.prototype._createReviewGroup=function(){var a=this,b=a._createElement("li");return b.add(a._createButtonByCommand("Inspect")),b.add(a._createButtonByCommand("Find")),b.add(a._createElement("div","Review")),b},b.prototype._createTablesGroup=function(){var a=this,b=a._createElement("li"),c=a._createRibbonList();return b.add(a._createButtonByCommand("Table")),b.add(c),c.add(a._createButtonByCommand("InsertColumn")),c.add(a._createButtonByCommand("InsertRow")),c.add(a._createButtonByCommand("InsertCell")),c=a._createRibbonList(),b.add(c),c.add(a._createButtonByCommand("SplitCell")),c.add(a._createButtonByCommand("MergeCell")),c=a._createRibbonList(),b.add(c),c.add(a._createButtonByCommand("DeleteColumn")),c.add(a._createButtonByCommand("DeleteRow")),c.add(a._createButtonByCommand("DeleteCell")),b.add(a._createElement("div","Tables")),b},b.prototype._createBreaksGroup=function(){var a=this,b=a._createElement("li");return b.add(a._createButtonByCommand("InsertBreak")),b.add(a._createButtonByCommand("InsertParagraph")),b.add(a._createButtonByCommand("InsertPrint")),b.add(a._createButtonByCommand("InsertHR")),b.add(a._createElement("div","Breaks")),b},b.prototype._createFormsGroup=function(){var a=this,b=a._createElement("li"),c=a._createRibbonList();return b.add(c),c.add(a._createButtonByCommand("Form")),c=a._createRibbonList(),b.add(c),c.add(a._createButtonByCommand("TextArea")),c.add(a._createButtonByCommand("TextBox")),c.add(a._createButtonByCommand("PasswordField")),c.add(a._createButtonByCommand("HiddenField")),c=a._createRibbonList(),b.add(c),c.add(a._createButtonByCommand("Image")),c.add(a._createButtonByCommand("Button")),c=a._createRibbonList(),b.add(c),c.add(a._createButtonByCommand("List")),c.add(a._createButtonByCommand("DropDownList")),c.add(a._createButtonByCommand("Radio")),c.add(a._createButtonByCommand("CheckBox")),b.add(a._createElement("div","Forms")),b},b.prototype._createSpecialGroup=function(){var a=this,b=a._createElement("li");return b.add(a._createButtonByCommand("Link")),b.add(a._createButtonByCommand("InsertImage")),b.add(a._createButtonByCommand("Media")),b.add(a._createButtonByCommand("InsertSpecialChar")),b.add(a._createButtonByCommand("InsertDate")),b.add(a._createElement("div","Special")),b},b.prototype._getDefaultRibbonMarkup=function(){var a=this,b=a._createElement("div"),c=a._createElement("ul"),d=a._createElement("li"),e=a._createElement("li"),f=a._createElement("div",{"id":a.id_prefix+"format"}),g=a._createElement("div",{"id":a.id_prefix+"insert"}),h=a._createElement("ul"),i=a._createElement("ul");return b.add(c),b.add(f),b.add(g),c.add(d),c.add(e),d.add(a._createElement("a","Format",{"href":"#"+a.id_prefix+"format"})),e.add(a._createElement("a","Insert",{"href":"#"+a.id_prefix+"insert"})),f.add(h),h.add(a._createActionGroup()),h.add(a._createFontGroup()),h.add(a._createParaGroup()),h.add(a._createReviewGroup()),g.add(i),i.add(a._createTablesGroup()),i.add(a._createBreaksGroup()),i.add(a._createFormsGroup()),i.add(a._createSpecialGroup()),b.render()},b.prototype._getRibbonModesMarkup=function(){var a,b,c,d,e,g=this,h=g._createDiv(gc),i=g._createRibbonList(),j=g.element.find(".wijeditor-footer");return j.length>0&&(a=f(j.find("."+hc)),a.length>0&&(ue.Wysiwyg.tip=a.attr("title")||ue.Wysiwyg.tip),b=f(j.find("."+jc)),b.length>0&&(ue.Split.tip=b.attr("title")||ue.Split.tip),c=f(j.find("."+ic)),c.length>0&&(ue.Code.tip=c.attr("title")||ue.Code.tip),d=f(j.find("."+kc)),a.length>0&&(ue.Wordwrap.tip=d.attr("title")||ue.Wordwrap.tip),e=f(j.find("."+lc)),a.length>0&&(ue.FullScreen.tip=e.attr("title")||ue.FullScreen.tip),j.remove()),h.add(i),f.each(g._createButtonByCommand("Wysiwyg"),function(a,b){i.add(b)}),f.each(g._createButtonByCommand("Code"),function(a,b){i.add(b)}),f.each(g._createButtonByCommand("Split"),function(a,b){i.add(b)}),h.add(g._createButtonByCommand("Wordwrap")),h.add(g._createButtonByCommand("FullScreen")),h.render()},b.prototype._getSimpleToolBar=function(a){var b,c=this,d=c._createDiv("");return f.each(a,function(a,e){b=c._createButtonByCommand(e),b&&(-1!==f.inArray(e,re)?f.each(b,function(a,b){d.add(b)}):d.add(b))}),d.render()},b.prototype._editorify=function(){var a,b,c,d,e,g,h,i=this,j=i.element,k=j.width(),l=j.height(),m=i.options,n=m.mode;i._oriStyle=j.attr("style"),i._oriContent=j.html(),i._oriEleWidth=k,i._oriEleHeight=l,j.is("textarea")?("ribbon"===n?i.$ribbon=f(i._getDefaultRibbonMarkup()):"bbcode"===n?i.$ribbon=f(i._getSimpleToolBar(te)):m.simpleModeCommands&&0!==m.simpleModeCommands.length?(c=f.grep(m.simpleModeCommands,function(a,b){return"Table"!==a},void 0),i.$ribbon=f(i._getSimpleToolBar(c))):i.$ribbon=f(i._getSimpleToolBar(se)),m.text&&j.val(m.text),i.sourceView=j,i.editor=j.wrap("<div></div>").parent(),i.editor.width(k).height(l)):(i.editor=j,i.$ribbon=j.children(":eq(0)"),g=j.children(":eq(1)"),g.is("textarea")?(m.text&&g.val(m.text),i.sourceView=g):(h=m.text?m.text:g.html(),g.remove(),i.sourceView=f("<textarea></textarea>").val(h))),a=f("<div class='"+nc+"'></div>"),i.dialog=f("<div class ='"+mc+"'></div>"),i.subDialog=f("<div class ='"+mc+"'></div>"),i.editor.addClass(mc).addClass(i.options.wijCSS.widget).append(a).append(i.dialog).append(i.subDialog),i._createMenuMarkUp(i,m),i.$ribbon.wrap("<a href='javascript:void(null)'></a>").parent().appendTo("<div class='"+oc+" ui-widget-header ui-helper-clearfix ui-corner-top'></div>").parent().appendTo(a),b=f("<div class='"+pc+"'></div>").appendTo(a),i.designView=f("<iframe frameborder='0'></iframe>"),i.designView.wrap("<div></div>").parent().appendTo(b),i.sourceView.wrap("<div></div>").parent().appendTo(b),d=[i.$ribbon],i.$modes=f(i._getRibbonModesMarkup()),m.showFooter&&(e=f("<div class='"+qc+" ui-widget ui-widget-content ui-state-default'></div>"),a.append(e),e.append("<div class='"+rc+"'></div>"),i.$modes.appendTo(e),d.push(i.$modes)),f.each(d,function(a,b){b.wijribbon({"click":function(a,b){i._ribbonCommand(b.commandName,b.name),i._trigger("commandButtonClick",a,b)}})})},b.prototype._createMenuMarkUp=function(a,b){b.customContextMenu&&!f.browser.webkit&&(a.contextMenu=f("<ul><li _c1buttoncmd='cut'><a>"+this.localizeString("contextMenuCut","Cut")+"</a></li><li _c1buttoncmd='copy'><a>"+this.localizeString("contextMenuCopy","Copy")+"</a></li><li _c1buttoncmd='paste'><a>"+this.localizeString("contextMenuPaste","Paste")+"</a></li></ul>"),f("<a href='#'></a>").append(a.contextMenu).appendTo(a.editor))},b.prototype._handleDisabledOption=function(a,b){var c=this;a?(c.disabledDiv||(c.disabledDiv=c._createDisabledDiv(b)),f("body").focus(),c.disabledDiv.appendTo(c.editor)):c.disabledDiv&&(c.disabledDiv.remove(),c.disabledDiv=null)},b.prototype._createDisabledDiv=function(a){var b=this,c=a?a:b.element,d=c.outerWidth(),e=c.outerHeight();return f("<div></div>").addClass("ui-state-disabled").css({"z-index":"99999","position":"relative","background-color":"lightgray","width":d,"height":e,"left":0,"top":-e})},b.prototype._initElements=function(){var a=this,b=a.options,c=a.editor.height()-a._getHeader().outerHeight(!0)-a._getFooter().outerHeight(!0),d={};a._getContent().height(c).wijsplitter({"showExpander":!1,"orientation":"horizontal","panel1":{"scrollBars":"none","collapsed":!1},"panel2":{"scrollBars":"none","collapsed":!0}}),a.sourceView.css("width","").css("height",""),a._addHandlerToDesignView(),a._addDefaultFontStyleToDesignView(),a._createWijMenu(),b.showPathSelector&&"bbcode"!==a.options.mode||a._getPathSelector().hide(),a._ribbonCommand(b.editorMode,null,!0),b.fullScreenMode&&a._setFullScreen(b.fullScreenMode),d[ra]=!0,d[qa]=!0,a.$ribbon.wijribbon(r,d),a._handleWinDocumentKeyDown()},b.prototype._handleWinDocumentKeyDown=function(){var a=this;f(document).bind("keydown."+a.widgetName+"."+a.id_prefix.replace(/-/g,""),function(b){if(!a.options.disabled)switch(b.keyCode){case 27:a._escActionAssociated()}})},b.prototype._setOption=function(a,b){var c=this,d=c.options,e=d.mode,g=d.editorMode,h=(c.$ribbon.parent(),d.fullScreenMode),i=d.customContextMenu;if(f.Widget.prototype._setOption.apply(c,arguments),"fullScreenMode"===a)b!==h&&c._setFullScreen(b);else if("showPathSelector"===a)b?c._getPathSelector().show():c._getPathSelector().hide();else if("editorMode"===a&&g!==b)c._ribbonCommand(b),c.$modes.data("wijmo-wijribbon")&&c.$modes.wijribbon(s,g,!1);else if("fullScreenContainerSelector"===a)c.options.fullScreenMode&&c._setFullScreen(!0);else if("disabled"===a)c._handleDisabledOption(b,c.editor);else if("showFooter"===a)b?f("."+qc).is(":visible")||f("."+qc).show():f("."+qc).is(":visible")&&f("."+qc).hide();else if("commandButtonClick"===a)d.commandButtonClick=b;else if("text"===a)c.setText(b);else if("customContextMenu"===a){if(i===b)return;b?(c.contextMenu||c._createMenuMarkUp(c,d),c._createWijMenu()):(c.contextMenu[c._contextMenuWidgetName()]("destroy").remove(),c.contextMenu=void 0)}else"mode"===a&&b!==e?(c._recreateRibbon(b),c._ribbonCommand(d.editorMode)):("fontNames"===a||"fontSizes"===a)&&c._recreateRibbon(c.options.mode)},b.prototype._recreateRibbon=function(a){var b=this,c=b.$ribbon.parent();b.$ribbon.wijribbon("destroy"),b.$ribbon.remove(),"ribbon"===a?b.$ribbon=f(b._getDefaultRibbonMarkup()):"bbcode"===a?b.$ribbon=f(b._getSimpleToolBar(te)):b.$ribbon=f(b._getSimpleToolBar(se)),c.append(b.$ribbon),b.$ribbon.wijribbon({"click":function(a,c){b._ribbonCommand(c.commandName,c.name),b._trigger("commandButtonClick",a,c)}})},b.prototype._getHeader=function(){return f("."+oc,this.editor)},b.prototype._getContent=function(){return f("."+pc,this.editor)},b.prototype._getFooter=function(){return f("."+qc,this.editor)},b.prototype._getPathSelector=function(){return f("."+rc,this.editor)},b.prototype._getModes=function(){return f("."+gc,this.editor)},b.prototype._getDesignView=function(){return this.designView},b.prototype._getDesignViewWindow=function(){var a=this.designView;return a&&a.length>0?a[0].contentWindow:null},b.prototype._getDesignViewDocument=function(){var a=this._getDesignViewWindow();return a?a.document:null},b.prototype._getDesignViewText=function(){var a=this._getDesignViewDocument();return a&&a.body&&a.body.innerHTML?a.body.innerHTML:""},b.prototype._setDesignViewText=function(a){var b=this,c=this._getDesignViewDocument();"bbcode"===this.options.mode&&(a=b._convertBBCodeToHtml(a)),c&&c.body&&(c.body.innerHTML=a),b.options.text=a},b.prototype._getDialog=function(){return this.dialog},b.prototype._getSubDialog=function(){return this.subDialog},b.prototype._initContentDocument=function(){var a=this,b=a.sourceView.val(),c=a._getDesignViewDocument(),d=a.options.tableVirtualBorderShowing,e=function(){try{a._addHandlerToDesignView(),a._addDefaultFontStyleToDesignView(),a._createWijMenu()}catch(b){}};"bbcode"===a.options.mode&&(b=a._convertBBCodeToHtml(f.trim(b))),a.designView.unbind("load"),c.open(),c.write('<html style="width:100%;height:100%;'+(a.options.enabled?"cursor:text;":"")+'"><head><title></title><style id="__wijStyle"  type="text/css" >table,td,tr{border: 1px #acacac dashed;}</style></head><body style="word-wrap:break-word">'+b+"</body></html>"),c.close(),d||(a._updateTableBorderShowing(d),a.$ribbon.wijribbon(s,R,!d)),a.element.attr("accesskey")&&(f(c.body).attr("accesskey",a.element.attr("accesskey")),a.element.removeAttr("accesskey")),o=[],o.push(b),n=0,a.designView.load(function(){a._isIE11?setTimeout(e,0):e()})},b.prototype._addHandlerToDesignView=function(){var a=this,b=a._getDesignViewWindow(),c=b.document;a._initContentDocument(),a._loadDesignView(),f.browser.msie&&f(c).unbind("beforedeactivate").bind("beforedeactivate",function(){a._saveSelectionForIE()})},b.prototype._loadDesignView=function(){var a=this,b=a._getDesignViewWindow(),c=b.document;f.browser.mozilla?setTimeout(a._setDesignModeForFF,1e3,a):a._setContentEditable(c,!0),f.browser.msie&&a._setContentSpellCheck(c,!1),a.sourceView.unbind("blur."+a.widgetName).bind("blur."+a.widgetName,function(b){a._onSourceViewBlur()}),a.sourceView.unbind("keyup."+a.widgetName).bind("keyup."+a.widgetName,function(b){a._onSourceViewBlur()}),f.browser.mozilla?f(c).unbind("blur."+a.widgetName).bind("blur."+a.widgetName,function(b){a._onDesignViewBlur(b)}):f(b).blur(function(b){a._onDesignViewBlur(b)}),f(c).unbind("mouseup."+a.widgetName).bind("mouseup."+a.widgetName,function(b){a._onDesignViewMouseUp(b)}).unbind("keydown."+a.widgetName).bind("keydown."+a.widgetName,function(b){a._onDesignViewKeyDown(b)}).unbind("keyup."+a.widgetName).bind("keyup."+a.widgetName,function(b){a._onDesignViewKeyUp(b),a._onDesignViewBlur(b)})},b.prototype._addDefaultFontStyleToDesignView=function(){var a=this,b=a.options,c=a._getDesignViewDocument(),d=b.defaultFontName,e=b.defaultFontSize,g='<style type="text/css"> body {';(""!==d&&null!==d||""!==e&&null!==e)&&(""!==d&&null!==d&&(g+="font-family: "+d+";"),""!==b.defaultFontSize&&null!==b.defaultFontSize&&(g+=" font-size: "+e+";"),g+="}</style>",window.setTimeout(function(){f(g).appendTo(f("head",c))},200),a._setFontStyleButtonState(d,Oa),a._setFontStyleButtonState(e,Pa))},b.prototype._setFontStyleButtonState=function(a,b){var c="";a&&null!==a&&(f.each(this.$ribbon.wijribbon("getDropdownList",b),function(b,d){return d.toUpperCase()===a.toUpperCase()?(c=b,!1):void 0}),this.$ribbon.wijribbon(s,c,!0,b))},b.prototype._setDesignModeForFF=function(a){var b=a._getDesignViewDocument();b&&(b.designMode="on")},b.prototype.destroy=function(){var a=this;a.element.html(a._oriContent),a.element.removeAttr("tabindex"),void 0===a._oriStyle?a.element.removeAttr("style"):a.element.attr("style",a._oriStyle),a.dialog&&a.dialog.remove(),a.element.insertBefore(a.editor),a.element.unbind("."+a.widgetName),f(document).unbind("."+a.widgetName+"."+a.id_prefix.replace(/-/g,"")),a.element.removeUniqueId(),a.editor.remove(),a._oriDocOverFlow&&f(document.documentElement).css({"overflow":a._oriDocOverFlow}),f.Widget.prototype.destroy.call(a)},b.prototype.showEditorDialog=function(a){switch(a){case ja:case ca:case Fa:case Ca:case Ba:case za:case ya:case ta:case Ga:case W:case X:case Ra:this._ribbonCommand(a);break;default:g("Cannot find the dialog with command name '"+a+"'!")}},b.prototype.executeEditorAction=function(a,b){this._ribbonCommand(a,b)},b.prototype._isFontSizeCustomized=function(){if(null!==l)return l;var a=this.$ribbon.wijribbon("getDropdownList",Pa),b=[Ha,Ia,Ja,Ka,La,Ma,Na];return l=!1,f.each(a,function(a,c){return-1===f.inArray(a,b)?(l=!0,!1):void 0}),l},b.prototype._fontSizeCommand=function(a){var b,c=this,d=c._getDesignViewDocument(),e=4,g="font-size";switch(c._getDesignViewWindow().getSelection&&(b=c._getDesignViewWindow().getSelection()),a){case Ha:e=1;break;case Ia:e=2;break;case Ja:e=3;break;case Ka:e=4;break;case La:e=5;break;case Ma:e=6;break;case Na:e=7}c._setIEFocus(),c._isFontSizeCustomized()?c._formatFontSpan(d,g,a):f.browser.msie&&j(f.browser.version)>=9?b&&b.rangeCount>0&&d.execCommand("FontSize",!1,e):d.execCommand("FontSize",!1,e),"bbcode"!==c.options.mode||f.browser.msie||c._convertFontStyleToStandTag(),c._addtoUndoBuffer()},b.prototype._fontNameCommand=function(a){var b,c,d=this,e=d._getDesignViewDocument(),g=d.$ribbon.wijribbon("getDropdownList",Oa);d._getDesignViewWindow().getSelection&&(b=d._getDesignViewWindow().getSelection()),f.each(g,function(b,d){return a===b?(c=d,!1):void 0}),d._setIEFocus(),f.browser.msie&&j(f.browser.version)>=9?b&&b.rangeCount>0&&e.execCommand("FontName",!1,c):e.execCommand("FontName",!1,c),d._isFontSizeCustomized()&&f.browser.msie&&d._formatFontSpan(e,"font-family",c),d._addtoUndoBuffer()},b.prototype._formatFontSpan=function(a,b,c){var d=this,e=c,g="fontFamily",h=[];"font-family"!==b&&(e="c1-temp",g="fontSize"),a.execCommand("FontName",!1,e),f.each(f("font[face='"+e+"']",a),function(a,e){var i,j,k=d._replaceFontWithSpan(f(e),"face",b,c);for(h.push(k),i=f("span."+me,k),j=i.length-1;j>=0;j--)d._removeSpecifiedStyleSpan(f(i[j]),g,b);f.each(k,function(a,c){f.each(f(c).parents("span."+me),function(a,e){var h=f(e);return h.children().length>1?!1:void(h.text()===f(c).text()&&d._removeSpecifiedStyleSpan(h,g,b))})})}),d._setSelection(h)},b.prototype._replaceFontWithSpan=function(a,b,c,d){a.wrap("<span class = '"+me+"' style='"+c+":"+d+"'></span>");var e=a.parent();return a.removeAttr(b),/<font\s*>/gi.test(e.html())&&(e.html(a.html()),a.remove()),e},b.prototype._removeSpecifiedStyleSpan=function(a,b,c){var d,e=!0;""!==a[0].style[b]&&a.css(c,""),d=a.attr("style"),d&&f.each(d.split(";"),function(a,b){var d=f.trim(b).toLowerCase();return""!==d&&-1!==d.indexOf(c)?(e=!1,!1):void 0}),e&&a.replaceWith(a.html())},b.prototype._removeFormat=function(){var a=this,b=a._getDesignViewDocument(),c={};b.execCommand(da,!1,null),a._isFontSizeCustomized()&&f.browser.msie&&a._removeFormatForIE(b),a._addtoUndoBuffer(),c[Y]=!1,c[Z]=!1,c[$]=!1,c[_]=!1,c[aa]=!1,c[ba]=!1,c[S]=!1,c[T]=!1,c[N]=!1,c[O]=!1,c[P]=!1,c[Q]=!1,a.$ribbon.wijribbon(t,c)},b.prototype._removeFormatForIE=function(a){var b,c,d,e,g,h,i=a.selection.createRange(),j=i.htmlText,k=i.text,l=0,m=f(i.parentElement()),n=f(a.body),o="",p="",q="__c1temp",r="c1-temp",s="<span class='"+r+"'>"+q+"</span>";for(m.addClass("c1-app-parent"),i.pasteHTML(s),l=n.text().indexOf(q),b=f("span."+r,a),c=b,b.parentsUntil("body").each(function(a){return f(this).is(".c1-app-parent")?!1:void(c=f(this))}),b.html(j),d=f("span."+me,b),g=d.length-1;g>=0;g--)e=f(d[g]),e.replaceWith(e.html());for(c.is("."+r)||c.after(b),f.each(c.parents("span."+me),function(a,b){o+="</span>",p="<span class='"+me+"' style = '"+f(b).attr("style")+"'>"+p}),j=b.html(),b.replaceWith(q),h=n.html().split(q),n.html(h[0]+o+j+p+h[1]),d=f("span."+me,a),g=d.length-1;g>=0;g--)e=f(d[g]),""===e.text()&&e.replaceWith(e.html());f(".c1-app-parent",a).removeClass("c1-app-parent"),this._setSelection(null,l,k.length)},b.prototype._toggleFullScreen=function(){var a=this,b=a.options;b.fullScreenMode=!b.fullScreenMode,a._setFullScreen(b.fullScreenMode),a.$modes.wijribbon(s,pa,b.fullScreenMode),a.$modes.wijribbon("removeButtonHoverState",pa)},b.prototype._setFullScreen=function(a){var b,g,i,k=this,l=1,m=k._getHeader(),n=k._getFooter(),o=k._getContent(),p=k.options.fullScreenContainerSelector,q=f(p),r=k._getDesignViewText();a?(0===q.length&&(q=f(h),p="body",k._oriDocOverFlow=f(document.documentElement).css("overflow"),f(document.documentElement).css({"overflow":"hidden"}),f.browser.mozilla||window.scrollTo(0,0),f(h).bind("resize.wijeditor",function(){k._fullscreenOnWindowResize()})),b=q.width(),g=q.height()-2*l,c=k.editor.width(),d=k.editor.height(),e||(e=k.editor.parent()),k._replacedDiv||(k._replacedDiv=f("<div />")),k.editor.after(k._replacedDiv),f(p).append(k.editor),k.editor.css({"width":b,"height":g,"position":""}).addClass(sc),k.$ribbon.wijribbon("updateRibbonSize")):(k._replacedDiv.after(k.editor).remove(),k.editor.css({"width":c,"height":d,"position":"static"}).removeClass(sc),k.options.fullScreenContainerSelector||f(document.documentElement).css({"overflow":k._oriDocOverFlow}),f(h).unbind("resize.wijeditor"),k.$ribbon.wijribbon("updateRibbonSize")),i=k.editor.height()-m.outerHeight(!0)-n.outerHeight(!0),o.height(i).wijsplitter("refresh"),k._addHandlerToDesignView(),k._addDefaultFontStyleToDesignView(),k._createWijMenu(),f.browser.msie&&window.setTimeout(function(){var a=k._getDesignViewDocument();"bbcode"===k.options.mode&&(r=k._convertHtmlToBBCode(f.trim(r))),k._setDesignViewText(r),a&&a.body&&k.designView.is(":visible")&&k._restoreSelectionForIE(!0),j(f.browser.version)>=9&&k.sourceView.val(r)},40),k.$modes.data("wijmo-wijribbon")&&k.$modes.wijribbon(s,pa,a)},b.prototype._createWijMenu=function(){var a=this;a._getDesignViewDocument();a.contextMenu&&a.contextMenu[a._contextMenuWidgetName()]({"orientation":"vertical","trigger":a.designView,"triggerEvent":"rtclick","showing":function(b,c){f.browser.msie&&a._saveSelectionForIE();var d=a.designView.offset(),e=f(f(a.designView)[0].contentWindow).scrollLeft(),g=f(f(a.designView)[0].contentWindow).scrollTop(),h=d.left+2-e,i=d.top-g;c.options.position={"my":"left+"+h+" top+"+i,"at":"right top","of":b,"collision":"none none"}},"animation":{"animated":"fade"},"select":function(b,c){a._setIESelection(),a._contextMenuItemClick(b,c),a.contextMenu[a._contextMenuWidgetName()]("deactivate")}})},b.prototype._fullscreenOnWindowResize=function(){var a,b=this,c=b._getHeader(),d=b._getFooter(),e=b._getContent(),g=f(window).width(),h=f(window).height();b.editor.css({"width":g,"height":h}),a=b.editor.height()-c.height()-d.height(),e.height(a),e.data("wijmo-wijsplitter")&&e.wijsplitter("refresh")},b.prototype._saveText=function(a){},b.prototype._doSpellCheck=function(){},b.prototype._ribbonCommand=function(a,b,c){var d,e,g,h,i=this,j=i.options.disabled,k=i._getDesignViewDocument(),l=i._getContent(),m=l.height()/2;if(b===Oa)return i._fontNameCommand(a),void i._onDesignViewBlur(null);if(b===Pa)return i._fontSizeCommand(a),void i._onDesignViewBlur(null);switch(i.editor.hasClass("ui-helper-hidden-accessible")||j||(c?setTimeout(function(){i._setIEFocus()},0):f.browser.msie&&i.focus()),a){case Qa:f.browser.msie?(k.execCommand("FormatBlock",!1,"<ADDRESS>"),i._isIE11&&k.getSelection?(d=k.getSelection(),d&&d.anchorNode&&(h=f(d.anchorNode).closest("address"))):(h=k.selection.createRange(),h=f(h.parentElement()).closest("address")),h.length&&(h.replaceWith("<blockquote>"+h.html()+"</blockquote>"),k.body.innerHTML=k.body.innerHTML.replace(/<BLOCKQUOTE>\s*?<BLOCKQUOTE>/gi,"<BLOCKQUOTE>"),k.body.innerHTML=k.body.innerHTML.replace(/<\/BLOCKQUOTE>\s*?<\/BLOCKQUOTE>/gi,"</BLOCKQUOTE>"),k.body.innerHTML=k.body.innerHTML.replace(/<BLOCKQUOTE>\s*?<\/BLOCKQUOTE>/gi,""))):k.execCommand("FormatBlock",!1,"<BLOCKQUOTE>"),i._addtoUndoBuffer(),i._setFocusNotIE();break;case u:e=i._generateUniqueName("form"),i.insertHTML('<form id="'+e+'" name="'+e+'" method="post">'+e+"</form>"),i._setFocusNotIE();break;case v:e=i._generateUniqueName("image"),i.insertHTML('<input id="'+e+'" name="'+e+'" type="image" value="'+e+'"/>'),i._setFocusNotIE();break;case w:e=i._generateUniqueName("textarea"),i.insertHTML('<textarea id="'+e+'" name="'+e+'" rows="4" cols="48"></textarea>'),i._setFocusNotIE();break;case x:e=i._generateUniqueName("button"),i.insertHTML('<input id="'+e+'" name="'+e+'" type="button" value="'+e+'"/>'),i._setFocusNotIE();break;case y:e=i._generateUniqueName("textbox"),i.insertHTML('<input id="'+e+'" name="'+e+'" type="text" value="'+e+'"/>'),i._setFocusNotIE();break;case z:e=i._generateUniqueName("list"),i.insertHTML('<select id="'+e+'" name="'+e+'" style="width: 120px" size="8"></select>'),i._setFocusNotIE();break;case A:e=i._generateUniqueName("password"),i.insertHTML('<input id="'+e+'" name="'+e+'" type="password" value="'+e+'"/>'),i._setFocusNotIE();break;case B:e=i._generateUniqueName("dropdown"),i.insertHTML('<select id="'+e+'" name="'+e+'"></select>'),i._setFocusNotIE();break;case C:e=i._generateUniqueName("hidden"),i.insertHTML('<input id="'+e+'" name="'+e+'" type="hidden" value="'+e+'" />'),i._setFocusNotIE();break;case D:e=i._generateUniqueName("radiobox"),i.insertHTML('<input id="'+e+'" name="'+e+'" type="radio" value="'+e+'"><label for="'+e+'">'+e+"</label></input>"),i._setFocusNotIE();break;case E:e=i._generateUniqueName("checkbox"),i.insertHTML('<input id="'+e+'" name="'+e+'" type="checkbox" value="'+e+'"><label for="'+e+'">'+e+"</label></input>"),i._setFocusNotIE();break;case F:case G:case H:case I:case J:case K:case L:case M:i._tableAction(a);break;case R:i._toggleTableBorders();break;case aa:try{k.queryCommandState(ba)&&(k.execCommand(ba,!1,null),i.$ribbon.wijribbon(s,ba,!1))}catch(n){}k.execCommand(aa,!1,null),i._addtoUndoBuffer(),i._setFocusNotIE();break;case ba:try{k.queryCommandState(aa)&&(k.execCommand(aa,!1,null),i.$ribbon.wijribbon(s,aa,!1))}catch(o){}k.execCommand(ba,!1,null),i._addtoUndoBuffer(),i._setFocusNotIE();break;case da:i._removeFormat(),i._setFocusNotIE();break;case ea:i.insertHTML("<br/>"),i._setFocusNotIE();break;case fa:g=i._getSelectedContent(),g&&""!==g||(g="&nbsp;"),i.insertHTML("<p>"+g+"</p>"),i._setFocusNotIE();break;case ga:i.insertHTML('<div title="Print Page Break" style="font-size:1px;page-break-before:always;vertical-align:middle;height:1px;background-color:#c0c0c0">&nbsp;</div>'),i._setFocusNotIE();break;case pa:i._storeSelectionForIE(),i._toggleFullScreen();break;case qa:i._undoAction(),i._setFocusNotIE();break;case ra:i._redoAction(),i._setFocusNotIE();break;case ua:i._execCut(),i._setFocusNotIE();break;case va:i._execCopy();break;case wa:i._execPaste();break;case Aa:i.insertDateAndTime(),i._setFocusNotIE();break;case la:i.$modes.data("wijmo-wijribbon")&&i.$modes.wijribbon(q,oa,!0).wijribbon(s,la,!0),i.$ribbon.wijribbon("option","disabled",!1),l.wijsplitter("option","panel2",{"collapsed":!0}),i._restoreSelectionForIE();break;case ma:i.$modes.data("wijmo-wijribbon")&&i.$modes.wijribbon(q,oa,!0).wijribbon(s,ma,!0),i.$ribbon.wijribbon("option","disabled",!1),l.wijsplitter("option",{"splitterDistance":m,"panel1":{"collapsed":!1},"panel2":{"collapsed":!1}}),i._restoreSelectionForIE();break;case na:i.$modes.data("wijmo-wijribbon")&&i.$modes.wijribbon(q,oa,!1).wijribbon(s,na,!0),i._storeSelectionForIE(),i.$ribbon.wijribbon("option","disabled",!0),l.wijsplitter("option","panel1",{"collapsed":!0}),f.browser.msie&&!j&&i.sourceView.focus();break;case oa:l.wijsplitter("option","panel1").collapsed&&i._toggleWordWrap();break;case W:i._saveSelectionForIE(),i._createDialog(this.localizeString("backColorDialogTitle","Set BackColor"),i._getDialogRes_BackColor(),i.initBackColorDialog);break;case X:i._saveSelectionForIE(),i._createDialog(this.localizeString("foreColorDialogTitle","Set ForeColor"),i._getDialogRes_ForeColor(),i.initForeColorDialog);break;case ja:i._saveSelectionForIE(),i._createDialog(this.localizeString("insertTableDialogTitle","Insert Table"),i._getDialogRes_Table(),i.initInsertTableDialog);break;case ka:i._getEditableTable()&&i._createDialog(this.localizeString("editTableDialogTitle","Edit Table"),i._getDialogRes_Table(),i.initEditTableDialog);break;case sa:i._createDialog(this.localizeString("previewDialogPreview","Preview"),i._getDialogRes_Preview(),i.initPreviewDialog);break;case ta:i._createDialog(this.localizeString("cleanUpDialogTitle","Clean up source HTML document"),i._getDialogRes_CleanUp(),i.initCleanUpDialog);break;case ya:i._saveSelectionForIE(),i._createDialog(this.localizeString("mediaDialogTitle","Insert media"),i._getDialogRes_Media(),i.initMediaDialog);break;case za:i._saveSelectionForIE(),i._createDialog(this.localizeString("specialCharacterDialogTitle","Insert special character"),i._getDialogRes_SpecialCharacter(),i.initSpecialCharacterDialog);break;case Ba:i._createDialog(this.localizeString("findAndReplaceTitle","Find and replace"),i._getDialogRes_FindAndReplace(),i.initFindDialog);break;case Ca:p=i._getSelectedElement(),i._createDialog(this.localizeString("tagInspectorDialogTitle","Tag Inspector"),i._getDialogRes_TagInspector(),i.initTagInspectorDialog);break;case ca:i._saveSelectionForIE(),i._createDialog(this.localizeString("templateDialogApplyTemplate","Apply Template"),i._getDialogRes_Template(),i.initTemplateDialog);break;case Fa:i._saveSelectionForIE(),i._createDialog(this.localizeString("imageEditorDialogImageBrowser","Image Browser"),i._getDialogRes_ImageBrowser(),i.initImageBrowserDialog);break;case Ga:i._storeSelectionForIE(),i._createDialog(this.localizeString("hyperLinkDialogInserthyperLink","Insert hyperLink"),i._getDialogRes_Link(),i.initHyperLinkDialog);break;case Ra:i._saveSelectionForIE(),i._createDialog("Insert Code",i._getDialogRes_Code(),i.initInsertCodeDialog);break;case N:case O:case P:case Q:case U:case V:case Y:case Z:case _:case S:case T:case $:case ha:case xa:k.execCommand(a,!1,null),"bbcode"!==i.options.mode||f.browser.msie||i._convertStyleToStandTag(),i._addtoUndoBuffer(),i._setFocusNotIE();break;case Da:i._saveText();break;case Ea:i._doSpellCheck()}i._onDesignViewBlur(null)},b.prototype._createDialog=function(a,b,c){var d,e=this,g=e.dialog;g.html("").undelegate(e.widgetName).undelegate("."+e.widgetName).append(b),e.subDialog&&e.subDialog.html("").undelegate(e.widgetName).undelegate("."+e.widgetName),d={"width":"auto","height":"auto","modal":!0,"title":a,"position":{"my":"center","at":"center","of":window},"resizable":!1,"captionButtons":{"pin":{"visible":!1},"refresh":{"visible":!1},"toggle":{"visible":!1},"minimize":{"visible":!1},"maximize":{"visible":!1}}},g.data("wijmo-wijdialog")?(g.wijdialog("reset"),
g.wijdialog("option",{"width":"auto","height":"auto","title":a})):f.browser.msie&&6===j(f.browser.version)?window.setTimeout(function(){g.wijdialog(d)},0):g.wijdialog(d),e._adjustDialogLayoutForIE7(),c&&c.call(e),g.wijdialog("open")},b.prototype._adjustDialogLayoutForIE7=function(){var a=this.dialog;f.browser.msie&&(/^7\.[0-9]+/.test(f.browser.version)||7===document.documentMode)&&a.wijdialog("option","width",a.parent().width())},b.prototype._contextMenuItemClick=function(a,b,c){var d=this,e=b.item.element.attr("_c1buttoncmd");switch(e){case ua:d._execCut();break;case va:d._execCopy();break;case wa:d.focus(),d._execPaste()}},b.prototype._execCut=function(){var a=this,b=a._getDesignViewDocument();f.browser.safari?g(this.localizeString("errorMessageCutError","This function is not supported in current browser.  Plesse use (Ctrl + X).")):f.browser.msie?(b.execCommand("Cut",!1,null),a._addtoUndoBuffer()):(a._execCopy(),a._deleteSelectionContent(),a._addtoUndoBuffer())},b.prototype._execCopy=function(){var a=this,b=a._getDesignViewDocument();f.browser.safari?g(this.localizeString("errorMessageCopyError","This function is not supported in current browser. Plesse use (Ctrl + C).")):f.browser.msie?(b.execCommand("Copy",!1,null),a._addtoUndoBuffer()):a._copyToClipboard(a._getSelectedContent())},b.prototype._execPaste=function(){var a,b=this,c=b._getDesignViewDocument();if(f.browser.safari)g(this.localizeString("errorMessagePasteError","This function is not supported in current browser. Plesse use (Ctrl + V)."));else if(f.browser.msie)c.execCommand("Paste",!1,null),b._addtoUndoBuffer();else try{a=b._copyFromClipboard(),a&&""!==a&&b.insertHTML(a)}catch(d){}},b.prototype._getFontSizeCollection=function(){return{"10px":Ha,"13px":Ia,"16px":Ja,"18px":Ka,"24px":La,"32px":Ma,"48px":Na,"1":Ha,"2":Ia,"3":Ja,"4":Ka,"5":La,"6":Ma,"7":Na}},b.prototype._updateButtonStates=function(a){var b,c,d,e=this,g=e._getDesignViewDocument(),h={},i=[Y,Z,$,_,aa,ba,S,T,N,O,P,Q],j=a.target,k=f(j);f.each(i,function(a,b){h[b]=g.queryCommandState(b)}),e.$ribbon.wijribbon(t,h),b=e._queryCommandValue(Oa)||"",f.each(e.$ribbon.wijribbon("getDropdownList",Oa),function(a,d){return d.toUpperCase()===b.toUpperCase()?(c=a,!1):void 0}),e.$ribbon.wijribbon(s,c,!0,Oa),e._isFontSizeCustomized()?(c=k.is("span")?j.style.fontSize:"",""===c&&(d=k.parents("span."+me),f.each(d,function(a,b){return c=b.style.fontSize,c&&""!==c?!1:void 0})),""===c&&(c=k.css("font-size"))):(b=e._queryCommandValue(Pa)||"",""===b&&(b=k.css("font-size")),f.each(e._getFontSizeCollection(),function(a,d){return a.toString()===b.toString()?(c=d,!1):void 0})),e.$ribbon.wijribbon(s,c,!0,Pa)},b.prototype._queryCommandValue=function(a){var b=this._getDesignViewDocument();try{if(!b.queryCommandEnabled(a))return null}catch(c){return null}try{return b.queryCommandValue(a)}catch(d){}return null},b.prototype._escActionAssociated=function(){var a=this,b=a._getDesignViewWindow();b&&b.document&&void 0!==b.document.selection&&b.document.selection.empty(),b&&void 0!==b.getSelection&&b.getSelection().removeAllRanges(),a._hideAllDropdownsMenus()},b.prototype._hideAllDropdownsMenus=function(){var a=this;a.contextMenu&&a.contextMenu[a._contextMenuWidgetName()]("hideAllMenus"),a.$ribbon.wijribbon("hideDropdown",Oa).wijribbon("hideDropdown",Pa).wijribbon("hideDropdown",ia)},b.prototype._onDesignViewKeyDown=function(a){var b,c=this;c._setSaveBtnEnabled();try{if(a.ctrlKey)b=String.fromCharCode(a.keyCode).toLowerCase();else switch(a.keyCode){case 27:c._escActionAssociated();break;case 13:case 46:c._addtoUndoBuffer(),c._continueSavingInputTextForUndo=!1;break;default:c._continueSavingInputTextForUndo=!0}}catch(d){}},b.prototype._onDesignViewKeyUp=function(a){var b,c=this;if((37===a.keyCode||38===a.keyCode||39===a.keyCode||40===a.keyCode||33===a.keyCode||34===a.keyCode||35===a.keyCode||36===a.keyCode)&&(f.browser.msie&&"6.0"===f.browser.version?(c._keyTimeoutHandlerIE6&&(clearTimeout(c._keyTimeoutHandlerIE6),c._keyTimeoutHandlerIE6=null),c._keyTimeoutHandlerIE6=window.setTimeout(function(){c._updateButtonStates(a)},300)):c._updateButtonStates(a)),a.ctrlKey)switch(b=String.fromCharCode(a.keyCode).toLowerCase()){case"y":c._redoAction(),a.preventDefault(),a.stopPropagation();break;case"z":c._undoAction(),a.preventDefault(),a.stopPropagation();break;case"x":case"v":c._addtoUndoBuffer(),c._continueSavingInputTextForUndo=!1}},b.prototype._onDesignViewMouseUp=function(a){var b,c=this;if(2!==a.button&&(c._updateButtonStates(a),c._refreshPathSelector(),c._hideAllDropdownsMenus(),c.editor.mouseup(),f.browser.msie&&(b=f(a.target).closest("a"),a.ctrlKey&&b.length>0)))try{b.focus(),h.open(b[0].href,"_blank")}catch(d){}},b.prototype._onDesignViewBlur=function(a){var b,c=this,d=c.options;b=c._getDesignViewText(),"bbcode"===d.mode&&(b=c._convertHtmlToBBCode(f.trim(b))),c.sourceView.val(b),c._onTextChange(a),d.text=b},b.prototype._onTextChange=function(a){var b=this;b._continueSavingInputTextForUndo&&(b._addtoUndoBuffer(),b._continueSavingInputTextForUndo=!1),b._trigger("textChanged",a,{"text":b.options.text})},b.prototype._onSourceViewBlur=function(){var a,b=this;a=b.sourceView.val(),b._setDesignViewText(a),b.options.text=a},b.prototype._convertBBCodeToHtml=function(a){return a?(a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),f.browser.msie&&(a=a.replace(/&lt;p&gt;/gim,"<p>"),a=a.replace(/&lt;\/p&gt;/gim,"</p>")),a=a.replace(/(?:\r\n|\n|\r)/g,"<br>"),a=a.replace(/\[EMAIL\]([\s\S]*?)\[\/EMAIL\]/gim,'<a href="mailto:$1">$1</a>'),a=a.replace(/\[EMAIL\=([^\]]+)]([\s\S]*?)\[\/EMAIL\]/gim,'<a href="mailto:$1">$2</a>'),a=a.replace(/\[URL\]([\s\S]*?)\[\/URL\]/gim,'<a href="$1">$1</a>'),a=a.replace(/\[URL\=([^\]]+)]([\s\S]*?)\[\/URL\]/gim,'<a href="$1">$2</a>'),a=a.replace(/\[B\]/gim,"<b>"),a=a.replace(/\[\/B\]/gim,"</b>"),a=a.replace(/\[I\]/gim,"<i>"),a=a.replace(/\[\/I\]/gim,"</i>"),a=a.replace(/\[S\]/gim,"<strike>"),a=a.replace(/\[\/S\]/gim,"</strike>"),a=a.replace(/\[U\]/gim,"<u>"),a=a.replace(/\[\/U\]/gim,"</u>"),a=a.replace(/\[IMG height=(.*?) width=(.*?)](.+?)\[\/IMG\]/gim,'<img height="$1" width = "$2" src="$3"/>'),a=a.replace(/\[BLOCK\]/gim,"<blockquote>"),a=a.replace(/\[\/BLOCK\]/gim,"</blockquote>"),a=a.replace(/\[LIST\=1\]\[\*\]([\s\S]*?)\[\/LIST\]/gim,"<ol><li>$1</li></ol>"),a=a.replace(/\[LIST\]\[\*\]([\s\S]*?)\[\/LIST\]/gim,"<ul><li>$1</li></ul>"),a=a.replace(/\[\*\]/gim,"</li><li>"),a=a.replace(/\[size=([^\]]*?)\]/gi,'<font size="$1">'),a=a.replace(/\[\/size\]/gim,"</font>"),a=a.replace(/\[color=([^\]]*?)\]/gi,'<font color="$1">'),a=a.replace(/\[\/color\]/gim,"</font>")):""},b.prototype._replaceComplexHtml=function(a){var b,c,d,e,g=f("<div/>").html(a);for(b=f("img",g),f.each(b,function(){d="[IMG height="+f(this).height()+" width="+f(this).width()+"]"+f(this).attr("src").toString()+"[/IMG]",f(this).replaceWith(d)}),c=f("font",g),e=c.length-1;e>=0;e--)f(c[e]).attr("color")&&f(f(c[e])).attr("size")?d="[Color="+f(f(c[e])).attr("color")+"][Size="+f(f(c[e])).attr("size")+"]"+f(f(c[e])).html()+"[/Size][/Color]":f(f(c[e])).attr("color")&&!f(f(c[e])).attr("size")?d="[Color="+f(f(c[e])).attr("color")+"] "+f(f(c[e])).html()+"[/Color]":f(f(c[e])).attr("size")&&!f(f(c[e])).attr("color")&&(d="[Size="+f(f(c[e])).attr("size")+"]"+f(f(c[e])).html()+"[/Size]"),f(f(c[e])).replaceWith(d);return g.html()},b.prototype._convertHtmlToBBCode=function(a){var b=this;if(""!==a)return a=b._replaceComplexHtml(a),a=a.replace(/<br(?=[ \/>]).*?>/gim,"\r\n"),f.browser.msie&&(a=a.replace(/<p>/gim,"&lt;p&gt;"),a=a.replace(/<\/p>/gim,"&lt;/p&gt;")),a=a.replace(/<a .*?href=(["'])(.+?)\1.*?>(.+?)<\/a>/gi,"[URL=$2]$3[/URL]"),a=a.replace(/<a .*?href=(["'])mailto:(.+?)\1.*?>(.+?)<\/a>/gi,"[EMAIL=$2]$3[/EMAIL]"),a=a.replace(/<(?:b|strong)>/gim,"[B]"),a=a.replace(/<\/(?:b|strong)>/gim,"[/B]"),a=a.replace(/<(?:i|em)>/gim,"[I]"),a=a.replace(/<\/(?:i|em)>/gim,"[/I]"),a=a.replace(/<(?:strike|s)>/gim,"[S]"),a=a.replace(/<\/(?:strike|s)>/gim,"[/S]"),a=a.replace(/<u>/gim,"[U]"),a=a.replace(/<\/u>/gim,"[/U]"),a=a.replace(/<blockquote.*?\>/gim,"[BLOCK]"),a=a.replace(/\s{0,}<\/blockquote>/gim,"[/BLOCK]"),a=a.replace(/(?:\r\n|\r|\n){0,1}<(?:ol)>[\s]*/gim,"[LIST=1]"),a=a.replace(/<\/(?:ol)>/gim,"[/LIST]"),a=a.replace(/(?:\r\n|\r|\n){0,1}\<(?:ul)>[\s]*/gim,"[LIST]"),a=a.replace(/<\/(?:ul)>/gim,"[/LIST]"),a=a.replace(/\s{0,}<li\s{0,1}.*?>([\s\S]*?)\n{0,}\s{0,}<\/li>/gim,"[*]$1"),a=a.replace(/&nbsp;/gi," "),a=a.replace(/(<[^>]+>)/gm,"")},b.prototype._convertFontStyleToStandTag=function(){var a,b,c=this,d=c._getDesignViewDocument(),e=f(d.body),g=f("[style*='color: ']",e);0!==g.length&&(a=g,b="<font color='"+c._getWebColorFromRgb(g.css("color"))+"'></font>"),a&&f.each(a,function(a){f(this).is("span")?f(this).replaceWith(f(b).html(f(this).html())):f(this).is("font")&&f(this).attr("size")&&f(this).removeAttr("style").html(f(b).html())})},b.prototype._convertStyleToStandTag=function(){var a,b,c,d=this,e=d._getDesignViewDocument(),g=f(e.body),h=f("[style*='font-weight: bold;']",g),i=f("[style*='font-style: italic;']",g),j=f("[style*='text-decoration: line-through;']",g),k=f("[style*='text-decoration: underline;']",g);0!==h.length?(a=h,b="<b></b>",c="font-weight"):0!==i.length?(a=i,b="<i></i>",c="font-style"):0!==j.length?(a=j,b="<strike></strikes>",c="text-decoration"):0!==k.length&&(a=k,b="<u></u>",c="text-decoration"),a&&f.each(a,function(a){f(this).is("span")&&""===this.style.fontSize?f(this).replaceWith(f(b).html(f(this).html())):f(this).removeAttr("style").html(f(b).html())})},b.prototype._getWebColorFromRgb=function(a){var b,c=this;return 0===a.indexOf("rgb(")&&(b=a.substring(4,a.length-1).split(","),a=c._convertToWebColor(j(b[0]),j(b[1]),j(b[2]))),a},b.prototype._updateList=function(a,b){var c;f("option",b).remove();for(c in a)a[c]&&b.append("<option>"+c+"</option>")},b.prototype._triggerEvent=function(a,b){var c=this,d=c.options[a];return d&&"function"==typeof d?d.call(c,b):d},b.prototype._closeDialog=function(){this.dialog.wijdialog("close"),this.rangeSelection=null,this.focus()},b.prototype._onTemplateList=function(a){return this._triggerEvent("templateList",a)},b.prototype.updateTemplateList=function(a,b){var c=this,d=b||f("select",c.dialog);c._updateList(a,d),c._templateList=a},b.prototype.initTemplateDialog=function(){var a=this,b=a.dialog,c=f("select",b),d=a._onTemplateList();b.delegate("select","change."+a.widgetName,function(){a.templateListOnChanged()}).delegate("."+Yc,"click."+a.widgetName,function(){a.deleteTemplate()}).delegate("."+Zc,"click."+a.widgetName,function(){a.saveTemplate()}).delegate(ne,"click."+a.widgetName,function(){a.applyTemplate()}).delegate(oe,"click."+a.widgetName,function(){a._closeDialog()}),(d||(d=a._templateList))&&a.updateTemplateList(d,c)},b.prototype.templateListOnChanged=function(){var a,b=this,c=b.dialog,d=f("select",c).val(),e=f("iframe",c),g=b._templateList;g&&(a=g[d],a.src&&e.attr("src",a.src+"?d="+(new Date).getMilliseconds().toString()),a.text&&e.length>0&&e[0].contentWindow.document.write(a.text),d&&(f("."+Sc,c).html(d),f("."+Vc,c).val(d)),a.desc&&(f("."+Tc,c).html(a.desc),f("."+Wc,c).val(a.desc)))},b.prototype._onSaveTemplate=function(a){this._triggerEvent("saveTemplate",a)},b.prototype.saveTemplate=function(){var a=this,b=a.dialog,c=f("."+Vc,b).val(),d=f("."+Wc,b).val(),e=a._templateList,h=this._getDesignViewText();return""===f.trim(c)?void g(this.localizeString("errorMessageTemplateNameError","Please input a template name!")):(e||(a._templateList=[],e=a._templateList),e[c]||f("select",b).append("<option>"+c+"</option>"),e[c]={"desc":d,"text":h},void a._onSaveTemplate({"name":c,"desc":d,"text":h}))},b.prototype._onDeleteTemplate=function(a){this._triggerEvent("deleteTemplate",a)},b.prototype.deleteTemplate=function(){var a=this,b=a.dialog,c=f("select",b),d=c.val(),e=a._templateList;return""===f.trim(d)?void g(this.localizeString("errorMessageTemplateFileError","Please select a template file.")):(f("option:selected",c).remove(),f("iframe",b).attr("src","about:blank"),f("."+Sc,b).empty(),f("."+Vc,b).val(""),f("."+Tc,b).empty(),f("."+Wc,b).val(""),delete e[d],void a._onDeleteTemplate(d))},b.prototype.applyTemplate=function(){var a=this,b=a.dialog,c=f("select",b),d=c.val(),e=f("iframe",b)[0],h=f("."+Vc,b).val(),i=e.contentWindow.document.body.innerHTML;return""===f.trim(h)||""===f.trim(d)?void g(this.localizeString("errorMessageValidTemplateFileError","Please select a valid template file.")):(a._setDesignViewText(i),a._addtoUndoBuffer(),a._setSaveBtnEnabled(),void a._closeDialog())},b.prototype._onImageList=function(){var a=this,b=a.options.imageList;return b&&"function"==typeof b?b.call(a):b},b.prototype.updateImageList=function(a,b){var c=this,d=c.dialog,e=b||f("select",d),g=f("."+Bc,d);return c._updateList(a,e),c._imgList=a,a?void g.removeClass(Jc):void g.addClass(Jc)},b.prototype.initImageBrowserDialog=function(){var a=this,b=a.dialog,c=a._onImageList();return f("img",b).hide(),b.delegate("select","change."+a.widgetName,function(){a.imageListOnChanged()}).delegate(ne,"click."+a.widgetName,function(b){a.submitInsertImageDialog(),a._onDesignViewBlur(b)}).delegate(oe,"click."+a.widgetName,function(){a._closeDialog()}),f("."+Ec+" input",b).bind("change."+a.widgetName,function(){a.imageUrlChanged(this)}),c||(c=a._imgList)?void a.updateImageList(c,f("select",b)):void f("."+Bc,b).addClass(Jc)},b.prototype.imageUrlChanged=function(a){var b=this,c=b.dialog;f("img",this.dialog).attr("src",f(a).val()+"?"+(new Date).getTime()).show().bind("load",function(){f("."+Gc+" input",c).val(f("img",c).width().toString()),f("."+Hc+" input",c).val(f("img",c).height().toString())})},b.prototype.imageListOnChanged=function(){var a,b=this,c=b.dialog,d=f("select",c).val(),e=b._imgList;e&&(a=e[d],f("img",c).prop("src",a).show(),f("."+Ec+" input",c).prop("value",a),h.setTimeout(function(){f("."+Gc+" input",c).val(f("img",c).width().toString()),f("."+Hc+" input",c).val(f("img",c).height().toString())},200))},b.prototype.submitInsertImageDialog=function(){var a,b=this,c=b.dialog,d=f("."+Ec+" input",c).val(),e=f("."+Fc+" input",c).val(),h=f("."+Gc+" input",c).val(),i=f("."+Hc+" input",c).val(),j=f("."+Ic+" input",c).val();return""===f.trim(d)?void g(this.localizeString("errorMessageSelectImageError","Please select a image.")):b._isNumeric(h)?b._isNumeric(i)?(b.focus(),f.browser.msie?(a='<img src="'+d+'" alt="'+e+'" style="width:'+h+"px;height:"+i+"px","bbcode"!==b.options.mode&&null!==j&&void 0!==j&&j.length>0&&(a+=";"+j)):(a='<img src="'+d+'" alt="'+e+'" width="'+h+'" height="'+i,"bbcode"!==b.options.mode&&(a+='" style="'+j)),a+='"/>',b.insertHTML(a),void b._closeDialog()):void g(this.localizeString("errorMessageImageHeightError","Please input a number for 'Image height' textbox.")):void g(this.localizeString("errorMessageImageWidthError","Please input a number for 'Image width' textbox."))},b.prototype.initHyperLinkDialog=function(){var a,b,c,d=this,e=d.dialog,g=d.getLinkHrefField(),i=f("."+id,e),j=f("."+_c+" input",e);e.one("wijdialogclose",function(){d._restoreSelectionForIE()}),e.delegate(ne,"click."+d.widgetName,function(a){d.submitHyperLinkDialog(),d._onDesignViewBlur(a)}).delegate(oe,"click."+d.widgetName,function(){d._closeDialog()}).delegate("."+bd,"change."+d.widgetName,function(){d.anchorListOnChanged(this)}).delegate("."+ad+">div","click."+d.widgetName,function(){d.radioListOnChanged()}).delegate("."+jd+">div","click."+d.widgetName,function(){d.linkIconTypeOnChanged()}).delegate("."+fd+" input","change."+d.widgetName,function(){d.tempImg=f('<img src="'+f("."+fd+" input",e).val()+'">').appendTo("body"),h.setTimeout(function(){f("."+gd+" input",e).val(d.tempImg.width().toString()),f("."+hd+" input",e).val(d.tempImg.height().toString()),d.tempImg.remove(),d.tempImg=void 0},200)});try{j.val(g),b=d._getLinkInnerHTML()}catch(k){}b&&"<img"===b.substring(0,3)?(a=!0,c=f(b)):a=!1,a?(i.show(),f("."+cd+" textarea",e).hide(),f("."+fd+" input",e).val(c.attr("src")),f("."+gd+" input",e).val(c.attr("width")),f("."+hd+" input",e).val(c.attr("heigth"))):(f("."+cd+" textarea",e).show(),i.hide(),f("."+cd+" textarea",e).val(b)),f("."+ed+" input",e).val(d._getLinkCssField()),f("."+dd+" select",e).val(d._getLinkTarget()),f("#radAnchor",e).prop("checked",!0),f("#radLinkTypeIsText",e).prop("checked",!0),g.length>6&&("http"===g.substring(0,4)?f("#radUrl",e).prop("checked",!0):"mailto"===g.substring(0,6)?f("#radMail",e).prop("checked",!0):"#"===g.substring(0,1)?f("#radAnchor",e).prop("checked",!0):f("#radFile",e).prop("checked",!0)),c=void 0},b.prototype._getLinkInnerHTML=function(){var a,b,c=this;c.focus(),a=c._getInspectElement(),c._hyperlinkTextStyle="";try{if(b=c._getHyperLinkElement(a),b&&"A"===b.tagName)return a.innerHTML!==b.innerHTML&&(c._hyperlinkTextStyle=b.innerHTML.replace(a.innerHTML,"{0}")),a.innerHTML||""}catch(d){}return""},b.prototype.getLinkHrefField=function(){var a,b=this;b.focus(),a=b._getInspectElement();try{if(a=b._getHyperLinkElement(a),a&&"A"===a.tagName)return b.fixAbsoluteUrlsIfNeeded(a.href||"")}catch(c){}return""},b.prototype._getLinkTarget=function(){var a,b=this;b.focus(),a=b._getInspectElement();try{if(a=b._getHyperLinkElement(a),a&&"A"===a.tagName)return a.target||""}catch(c){}return""},b.prototype._getLinkCssField=function(){var a,b=this;b.focus(),a=b._getInspectElement();try{if(a=b._getHyperLinkElement(a),a&&"A"===a.tagName)return a.style.cssText||""}catch(c){}return""},b.prototype.submitHyperLinkDialog=function(){var a=this,b=a.dialog,c=f("#radUrl",b),d=f("#radAnchor",b),e=f("#radMail",b),h=f("."+_c+" input",b),i=f("."+cd+" textarea",b),j=f("."+ed+" input",b),k=f("."+dd+" select",b),l=h.val(),m=i.val(),n=k.val(),o=f("#radLinkTypeIsImage",b),p=o.prop("checked"),q=f("."+fd+" input",b).val(),r=f("."+gd+" input",b).val(),s=f("."+hd+" input",b).val(),t=j.val();return""===l?void g(this.localizeString("errorMessageAddressError","Please input address!")):""!==m||p?""===q&&p?void g(this.localizeString("errorMessageHyperLinkImageUrlError","Please input image url!")):!a._isNumeric(r)&&p?void g(this.localizeString("errorMessageHyperLinkImageWidthError","Please input correct image width!")):!a._isNumeric(s)&&p?void g(this.localizeString("errorMessageHyperLinkImageHeightError","Please input correct image height!")):c.prop("checked")&&!a._isUrl(l)?void g(this.localizeString("errorMessageHyperLinkUrl","Please input correct url!")):d.prop("checked")&&!a._isAnchor(l)?void g(this.localizeString("errorMessageHyperLinkAnchor","Please input correct anchor!")):e.prop("checked")&&!a._isEmail(l)?void g(this.localizeString("errorMessageHyperLinkEmail","Please input correct email!")):(p&&(m='<img src="'+q+'" width="'+r+'" height="'+s,m+='"/>'),a._closeDialog(),void a._editLink(m,l,t,n)):void g(this.localizeString("errorMessageDisplayTextError","Please input display text!"))},b.prototype._editLink=function(a,b,c,d){var e,f=this,g="";f.focus(),e=f._getInspectElement();try{if(e=f._getHyperLinkElement(e),e&&"A"===e.tagName)return e.innerHTML=f._hyperlinkTextStyle&&""!==f._hyperlinkTextStyle?f._hyperlinkTextStyle.replace("{0}",a):a,e.href=b,e.target=d,c!==e.style.cssText&&(e.style.cssText=c),f._addtoUndoBuffer(),void f._setSaveBtnEnabled()}catch(h){}g='<a href="'+b+'" target="'+d+'"',""!==c&&(g+=' style="'+c+'"'),g+=">"+a+"</a>",f.insertHTML(g)},b.prototype.anchorListOnChanged=function(a){var b=this,c=b.dialog,d=f(a).val();""!==d&&(f("."+_c+" input",c).val(d),f("#radAnchor",c).attr("checked","checked"))},b.prototype.radioListOnChanged=function(){var a=this,b=a.dialog,c=f("."+bd,b),d=f("."+_c+" input",b);d.val(""),f("#radUrl",b).is(":checked")?c.hide():f("#radAnchor",b).is(":checked")?c.show():f("#radMail",b).is(":checked")?(c.hide(),d.val("mailto:")):f("#radFile",b).is(":checked")&&c.hide()},b.prototype.linkIconTypeOnChanged=function(){var a=this,b=a.dialog,c=f("."+id,b),d=f("."+cd,b);f("#radLinkTypeIsText",b).is(":checked")?(d.show(),c.hide()):f("#radLinkTypeIsImage",b).is(":checked")&&(d.hide(),c.show())},b.prototype._getDialogRes_Code=function(){var a=this,b=a._createDiv($c);return b.add(a._createElement("div","Enter source code",{"class":md})),b.add(a._createElement("textarea","",{"class":ld})),b.add(a._createSeparator()),b.add(a._createOKCancelButtons()),b.render()},b.prototype.initInsertCodeDialog=function(){var a=this,b=a.dialog;b.delegate(ne,"click."+a.widgetName,function(b){a.submitCodeDialog(),a._onDesignViewBlur(b)}).delegate(oe,"click."+a.widgetName,function(){a._closeDialog()})},b.prototype.submitCodeDialog=function(){var a=this,b=a.dialog,c=f("."+ld,b),d=c.val();""!==d&&(d=d.replace(/</g,"&lt;"),d=d.replace(/>/g,"&gt;"),d="<pre>"+d+"</pre>",a._setIESelection(),a.insertHTML(d),a._closeDialog())},b.prototype.initTagInspectorDialog=function(){var a=this,b=a.dialog,c=f("."+ud);b.delegate(ne,"click."+a.widgetName,function(b){a.submitTagInspectorDialog(),a._onDesignViewBlur(b)}).delegate(oe,"click."+a.widgetName,function(){a._closeDialog()}).delegate("#displayNoEmpty","click."+a.widgetName,function(){a.tagInspectorDialogSwitchAttList(this)}),a._laySelectedElementAttributes(f("."+td,b),f("."+qd,b)),f("."+vd+" input",b).val(a._getSelectedElementStyle()),a._selectedElementCanHaveChildren()?(c.show(),f("textarea",c).val(a._getSelectedElementInnerHTML())):c.hide()},b.prototype.submitTagInspectorDialog=function(){var a=this,b=a.dialog,c=a._getInspectElement(),d=f("."+td,b),e=f("."+vd+" input").val(),g=f("."+ud+" textarea").val();try{f.each(f("input:checkbox",d),function(a,b){var d,e,g=f(b);g.is(":checked")&&(d=g.siblings("span").text(),d=d.substring(0,d.length-1),e=g.siblings("input:text").val(),f(c).attr(d,e))}),""!==f.trim(e)&&(c.style.cssText=e),a._selectedElementCanHaveChildren()&&f(c).html(g)}catch(h){}a._closeDialog(),a._addtoUndoBuffer(),a._setSaveBtnEnabled()},b.prototype.tagInspectorDialogSwitchAttList=function(a){var b=f("."+td,this.dialog),c=!a.checked;f.each(f("input:text",b),function(a,b){""===f(b).val()&&f(b).parent("li")[c?"show":"hide"]()})},b.prototype._laySelectedElementAttributes=function(a,b){var c,d,e,g=this,h=g._getInspectElement(),i=this.localizeString("tagInspectorDialogSave","Save"),j="";if(h){switch(b.html(h.tagName),c=g._getDictionaryDeclare(),d=h.tagName.toLowerCase(),e=c[d],d){case"ul":case"u":case"textarea":case"tbody":case"tr":case"th":case"td":case"table":case"select":case"strong":case"span":case"p":case"option":case"ol":case"li":case"label":case"input":case"img":case"i":case"hr":case"form":case"font":case"em":case"div":case"code":case"button":case"body":case"b":case"a":j+="<ul class='ui-helper-reset'>",f.each(e,function(a,b){var c=h.getAttribute(b)||"";j+="<li><span class='"+xc+"'>",j+=b+":</span>",j+="<input type='text' value='"+c+"'/>",j+="<input type='checkbox' id='save"+a+"'/>",j+="<label for='save"+a+"'>"+i+"</label></li>"})}a.html(j)}},b.prototype._getSelectedElementStyle=function(){var a=this._getInspectElement();return a&&a.style?a.style.cssText||"":""},b.prototype._getSelectedElementInnerHTML=function(){var a=this._getInspectElement();return a?a.innerHTML:""},b.prototype._selectedElementCanHaveChildren=function(){return!f(this._getInspectElement()).is("input,hr,br,img")},b.prototype.initBackColorDialog=function(){this._initColorDialog("BackColor")},b.prototype.initForeColorDialog=function(){this._initColorDialog("ForeColor")},b.prototype._initColorDialog=function(a){var b,c,d,e=this,g=e.dialog,h=e._getDesignViewDocument(),i=h.queryCommandValue(a);g.delegate(ne,"click."+e.widgetName,function(b){e.submitColorDialog(a),e._onDesignViewBlur(b)}).delegate(oe,"click."+e.widgetName,function(){e._closeDialog()}),i&&(d=i.toString(),f.browser.mozilla&&"transparent"===d&&(d="#ffffff"),f.browser.msie&&(b=j(d),d="rgb("+(255&b)+", "+((65280&b)>>8)+", "+((16711680&b)>>16)+")"),0===d.indexOf("rgb(")?(c=d.substring(4,d.length-1).split(","),d=e._convertToWebColor(j(c[0]),j(c[1]),j(c[2]))):0===d.indexOf("rgba(")&&(c=d.substring(5,d.length-1).split(","),d=e._convertToWebColor(j(c[0]),j(c[1]),j(c[2]))),f("."+yd+" input",g).attr("value",d)),f("."+xd,g).wijeditorcolorcanvas("."+yd+" input",d)},b.prototype.submitColorDialog=function(a){var b=this,c=f("."+yd+" input",b.dialog);b.setColor(a,c.val()),b._closeDialog()},b.prototype.setColor=function(a,b){var c,d,e=this,g=e._getDesignViewDocument(),h=e._getDesignViewWindow();e._setIESelection(),f.browser.mozilla&&"BackColor"===a?(d=h.getSelection(),e.insertHTML('<span style="background-color:'+b+';">'+d+"</span>")):(g.execCommand(a,!1,b),f.browser.msie&&(c=e._getHtmlTextInIE(g),c.indexOf("<U>")>=0&&c.indexOf("</U>")>=0&&(g.execCommand("Underline",!1,!1),g.execCommand("Underline")),c.indexOf("<STRIKE>")>=0&&c.indexOf("</STRIKE>")>=0&&(g.execCommand("StrikeThrough",!1,!1),g.execCommand("StrikeThrough"))),"bbcode"!==e.options.mode||f.browser.msie||e._convertFontStyleToStandTag()),e._addtoUndoBuffer(),e._setSaveBtnEnabled()},b.prototype.initInsertTableDialog=function(){var a=this,b=a.dialog;b.delegate(ne,"click."+a.widgetName,function(b){a.submitInsertTableDialog(),a._onDesignViewBlur(b)}).delegate(qe,"click."+a.widgetName,function(){a._closeDialog()}).delegate("."+Id+" input:button","click."+a.widgetName,function(){a.showTableColorDialog(this,b)})},b.prototype.submitInsertTableDialog=function(){var a=this,b=a._getValuesFromTableDialog();b&&(a._insertTable(b),a._closeDialog())},b.prototype._insertTable=function(a){var b,c,d=this,e="";if(!a)return!1;for(d.focus(),e+='<table width="'+a.width+'" height="'+a.height+'" cellspacing="'+a.cspacing+'" cellpadding="'+a.cpadding+'" border="'+a.border+'" bgcolor="'+a.bgcolor+'" style="'+a.css+'">',b=0;b<a.rows;b++){for(e+="<tr>",c=0;c<a.cols;c++)e+="<td>Cell "+(b+1)+"-"+(c+1)+"</td>";e+="</tr>"}e+="</table>",(f.browser.mozilla||f.browser.msie&&j(f.browser.version)>=9)&&(e+="<br />"),d.insertHTML(e)},b.prototype.initEditTableDialog=function(){var a,b,c=this,d=c.dialog,e=c._getInspectElement();if(d.delegate(ne,"click."+c.widgetName,function(a){c.submitEditTableDialog(),c._onDesignViewBlur(a)}).delegate(qe,"click."+c.widgetName,function(){c._closeDialog()}).delegate("."+Id+" input:button","click."+c.widgetName,function(){c.showTableColorDialog(this,d)}),e){try{a=e.rows,b=a.length>0?a[0].cells.length:0,a=a.length}catch(g){}f("."+Ad+" input",d).val(a),f("."+Bd+" input",d).val(b),f("."+Cd+" input",d).val(e.getAttribute("width")),f("."+Dd+" input",d).val(e.getAttribute("height")),f("."+Ed+" input",d).val(e.getAttribute("border")),f("."+Fd+" input",d).val(e.getAttribute("cellPadding")),f("."+Gd+" input",d).val(e.getAttribute("cellSpacing")),f("."+Id+" input",d).val(e.getAttribute("bgcolor")||"#ffffff"),f("."+Hd+" input",d).val(e.style.cssText)}},b.prototype.submitEditTableDialog=function(){var a,b,c=this,d=c._getInspectElement(),e=f(d),g=c._getValuesFromTableDialog(),h=g&&j(g.rows),i=g&&j(g.cols);if(g){if(d){if(e.attr("width",g.width),e.attr("height",g.height),e.attr("bgcolor",g.bgcolor),e.attr("border",g.border),e.attr("cellSpacing",g.cspacing),e.attr("cellPadding",g.cpadding),d.style.cssText=g.css,!h||isNaN(h))return;if(!i||isNaN(i))return;for(;d.rows.length>h;)d.deleteRow(0);for(;d.rows.length<h;)for(a=d.insertRow(0);a.cells.length<i;)b=a.insertCell(0),b.innerHTML="&nbsp;";f.each(d.rows,function(a,c){for(;c.cells.length>i;)c.deleteCell(0);for(;c.cells.length<i;)b=c.insertCell(0),b.innerHTML="&nbsp;"})}c._closeDialog()}},b.prototype._getValuesFromTableDialog=function(){var a=this,b=a.dialog,c=f("."+Ad+" input",b).val(),d=f("."+Bd+" input",b).val(),e=f("."+Cd+" input",b).val(),h=f("."+Dd+" input",b).val(),i=f("."+Ed+" input",b).val(),k=f("."+Fd+" input",b).val(),l=f("."+Gd+" input",b).val(),m=f("."+Hd+" input",b).val(),n=f("."+Id+" input",b).val();return a._isNumeric(c)?a._isNumeric(d)?a._isNumeric(e)?a._isNumeric(h)?a._isNumeric(i)?a._isNumeric(k)?a._isNumeric(l)?{"rows":c,"cols":d,"width":j(e),"height":j(h),"border":i,"cpadding":k,"cspacing":l,"css":m,"bgcolor":n}:(g(this.localizeString("tableDialogCellSpacingError","Please input a number for 'Cell Spacing' textbox.")),!1):(g(this.localizeString("tableDialogCellPaddingError","Please input a number for 'Cell Padding' textbox.")),!1):(g(this.localizeString("tableDialogBorderError","Please input a number for 'Border thickness' textbox.")),!1):(g(this.localizeString("errorMessageTableHeightError","Please input a number for 'Table Height' textbox.")),!1):(g(this.localizeString("errorMessageTableWidthError","Please input a number for 'Table Width ' textbox.")),!1):(g(this.localizeString("errorMessageColumnsError","Please input a number for 'Columns' textbox.")),!1):(g(this.localizeString("errorMessageRowsError","Please input a number for 'Rows' textbox.")),!1)},b.prototype.showTableColorDialog=function(a,b){var c,d=this,e=d.subDialog,g=f(a).prev().val(),h=d._getDialogRes_Color();c={"width":"auto","height":"auto","modal":!0,"title":"Set Background Color","position":{"my":"center","at":"center","of":window},"resizable":!1,"captionButtons":{"pin":{"visible":!1},"refresh":{"visible":!1},"toggle":{"visible":!1},"minimize":{"visible":!1},"maximize":{"visible":!1}},"close":function(){b.focus()}},e.empty().append(h),f.browser.msie&&6===j(f.browser.version)?window.setTimeout(function(){e.wijdialog(c)},0):e.wijdialog(c),e.delegate(pe,"click."+d.widgetName,function(){d.submitTableColorDialog()}).delegate(qe,"click."+d.widgetName,function(){d.closeSubDialog()}),""!==g&&f("."+yd+" input",e).val(g),f("."+xd,e).wijeditorcolorcanvas("."+yd+" input",g),e.wijdialog("open")},b.prototype.submitTableColorDialog=function(){var a=this,b=a.subDialog,c=a.dialog,d=f("."+yd+" input",b).val();f("."+Id+" input:text",c).val(d),a.closeSubDialog()},b.prototype.closeSubDialog=function(){this.subDialog.wijdialog("close")},b.prototype._getEditableTable=function(){var a,b,c,d=this;if(b=d._getSelectedElement(),!b)return g(this.localizeString("errorMessageSelectTableError","Please select a table!")),!1;if(c=f(b),c.is("td,tr,tbody,th"))b=c.parents("table:first")[0];else if(!c.is("table")){if(a=c.find("table:only-child"),!f.browser.msie||!a.length)return g(this.localizeString("errorMessageSelectTableError","Please select a table!")),!1;b=a[0]}return p=b,!0},b.prototype.initPreviewDialog=function(){var a=this,b=a.dialog;a._setPreviewContent(0),b.delegate("#rad640_480","click."+a.widgetName,function(){a._setPreviewDialogSize(640,480)}).delegate("#rad800_600","click."+a.widgetName,function(){a._setPreviewDialogSize(800,600)}).delegate("#rad1024_768","click."+a.widgetName,function(){a._setPreviewDialogSize(1024,768)}).delegate("#chkSplit","click."+a.widgetName,function(){a._splitPreviewPages(this.checked)}).delegate("."+Od,"click."+a.widgetName,function(){a._printPreviewPage(!0)}).delegate("."+Pd,"click."+a.widgetName,function(){a._printPreviewPage(!1)}).delegate("."+Qd,"click."+a.widgetName,function(){a._closeDialog()}).delegate("."+Md,"click."+a.widgetName,function(){a._navigatePreviewPage(!1)}).delegate("."+Nd,"click."+a.widgetName,function(){a._navigatePreviewPage(!0)})},b.prototype._setPreviewContent=function(a){var b=this,c=b.dialog,d=f("iframe",c),e=f("."+Ld+" span",c),g=d[0].contentWindow.document;g.open(),-1===a?(g.write(b._getPreviewAllPageContent()),e.html("1 / 1")):(g.write(b._getPreviewPageContent(a)),e.html(a+1+" / "+b._getPreviewPageCount())),g.close()},b.prototype._setPreviewDialogSize=function(a,b){var c=this,d=c.dialog,e=f("iframe",d),g=d.wijdialog("option","width"),h=d.wijdialog("option","height");"auto"===g?g=d.parent(".wijmo-wijdialog").width()-e.width():g-=e.width(),"auto"===h?h=d.parent(".wijmo-wijdialog").height()-e.height():h-=e.height(),e.css("width",a).css("height",b),d.wijdialog("option",{"width":a+g,"height":b+h})},b.prototype._getPreviewPageCount=function(){return this._getPreviewPages().length},b.prototype._getPreviewPageContent=function(a){var b=this._getPreviewPages();return b.length>a?b[a]:null},b.prototype._getPreviewAllPageContent=function(){return this._getDesignViewText()},b.prototype._getPreviewPages=function(){var a=this._getPreviewAllPageContent(),b=new RegExp("<(DIV|div)[^>]*(page-break-before|PAGE-BREAK-BEFORE)[ ]*:[ ]*always[^>]*>(.*?)<\\/(DIV|div)>","g"),c=a.replace(b,"!-~U^n#i@q,P|.a=g~e+br!");
return c.split("!-~U^n#i@q,P|.a=g~e+br!")},b.prototype._splitPreviewPages=function(a){var b=this,c=b.dialog,d=f("."+Rd,c),e=f("."+Ld,c);a?(b._setPreviewContent(0),e.show(),d.hide()):(b._setPreviewContent(-1),e.hide(),d.show()),b._curPageIdx=0},b.prototype._navigatePreviewPage=function(a){var b=this,c=f("#chkSplit",b.dialog),d=b._curPageIdx,e=b._getPreviewPageCount();c.is(":checked")&&(a?(d++,e>d?b._setPreviewContent(d):d=e-1):(d--,d>=0?b._setPreviewContent(d):d=0),b._curPageIdx=d)},b.prototype._printPreviewPage=function(a){var b=this,c=b.dialog,d=f("#chkSplit",c),e=f("iframe",c)[0].contentWindow;a&&(d.removeAttr("checked"),b._setPreviewContent(-1)),e.focus(),e.print()},b.prototype.initCleanUpDialog=function(){var a=this,b=a.dialog;f("textarea",b).val(a.sourceView.val()),b.delegate(ne,"click."+a.widgetName,function(b){a.submitCleanUpDialog(),a._onDesignViewBlur(b)}).delegate(oe,"click."+a.widgetName,function(){a._closeDialog()})},b.prototype.submitCleanUpDialog=function(){var a,b=this,c=b.dialog,d=b.sourceView,e=d.val();f("#replaceSpans",c).is(":checked")&&(a=new RegExp("<\\/?SPAN[^>]*>","g"),e=e.replace(a,"")),f("#replaceClass",c).is(":checked")&&(a=new RegExp("<(\\w[^>]*) class=([^ |>]*)([^>]*)","g"),e=e.replace(a,"<$1$3")),f("#replaceStyle",c).is(":checked")&&(a=new RegExp('<(\\w[^>]*) style="([^"]*)"([^>]*)',"g"),e=e.replace(a,"<$1$3"),a=new RegExp("<(\\w[^>]*) lang=([^ |>]*)([^>]*)","g"),e=e.replace(a,"<$1$3"),a=new RegExp("<\\\\?\\?xml[^>]*>","g"),e=e.replace(a,""),a=new RegExp("<\\/?\\w+:[^>]*>","g"),e=e.replace(a,"")),f("#replaceNbsp",c).is(":checked")&&(a=new RegExp("&nbsp;","g"),e=e.replace(a," ")),f("#transformPtoDiv",c).is(":checked")&&(a=new RegExp("(<P)([^>]*>.*?)(<\\/P>)","g"),e=e.replace(a,"<div$2</div>")),d.val(e),b._setDesignViewText(e),b._addtoUndoBuffer(),b._closeDialog()},b.prototype.initFindDialog=function(){var a=this,b=a.dialog;a.tRange&&(a.tRange=null),b.delegate(ne,"click."+a.widgetName,function(){a.submitFindAction()}).delegate(oe,"click."+a.widgetName,function(b){a.submitReplaceAction(),a._onDesignViewBlur(b)})},b.prototype.submitFindAction=function(){var a=this,b=f("textarea:first",a.dialog).val();""!==f.trim(b)&&a._findAndReplaceString(b)},b.prototype.submitReplaceAction=function(){var a=this,b=a.dialog,c=f("textarea:first",b).val(),d=f("textarea:last",b).val();if(""!==f.trim(c))return""===f.trim(d)?void g(this.localizeString("errorMessageReplaceStringError","please input replace string!")):void a._findAndReplaceString(c,d)},b.prototype._findAndReplaceString=function(a,b){var c,d=this,e=d._getDesignViewWindow(),h=0,i=!1,j=b&&b!==a;if(b||(b=a),f.browser.msie)d.tRange&&(d.txtFoundInIE&&j?(h=d.tRange.findText(a),h&&(d.tRange.pasteHTML(b),d.tRange.collapse(!1),i=!0,d.txtFoundInIE=!1)):(d.tRange.collapse(!1),h=d.tRange.findText(a),h&&d.tRange.select())),i||d.tRange&&h||(d.tRange=e.document.body.createTextRange(),h=d.tRange.findText(a),h&&(d.tRange.select(),j&&(d.tRange.pasteHTML(b),i=!0)));else{if(d.txtFoundInNoneIE&&j)d._replaceSelectionForNoneIE(b),i=!0,d.txtFoundInNoneIE=!1;else if(c=e.getSelection(),c.rangeCount>0&&c.collapseToEnd(),h=e.find(a),!h)for(h=e.find(a,0,1);e.find(a,0,1););d.txtFoundInNoneIE=d.txtFoundInNoneIE||h>0,d.txtFoundInNoneIE&&j&&(d._replaceSelectionForNoneIE(b),i=!0,d.txtFoundInNoneIE=!1)}h||i?d.txtFoundInIE=!0:(g('"'+a+'"'+this.localizeString("errorMessageFindTextError"," String Not Found!")),d.tRange=null,d.txtFoundInNoneIE=!1,d.txtFoundInIE=!1)},b.prototype._replaceSelectionForNoneIE=function(a){var b=this._getDesignViewDocument();b.execCommand("inserttext",!1,a)},b.prototype.initMediaDialog=function(){var a=this,b=a.dialog;b.delegate(ne,"click."+a.widgetName,function(b){a.submitMediaDialog(),a._onDesignViewBlur(b)}).delegate(oe,"click."+a.widgetName,function(){a._closeDialog()})},b.prototype.submitMediaDialog=function(){var a=this,b=a.dialog,c=f("select",b).val(),d=f("."+ae+" input",b).val(),e=f("."+be+" input",b).val(),h=f("."+ce+" input",b).val();return""===d?void g(this.localizeString("errorMessageUrlEmptyError","URL is empty!")):a._isUrl(d)?a._isNumeric(e)?a._isNumeric(h)?(a._insertMedia(c,d,e,h),void a._closeDialog()):void g(this.localizeString("errorMessageMediaHeightError","please input height of the media!")):void g(this.localizeString("errorMessageMediaWidthError","please input width of the media!")):void g(this.localizeString("errorMessageUrlCorrectError","please input correct URL!"))},b.prototype._insertMedia=function(a,b,c,d){var e=this,f="";switch(e._setIESelection(),a){case"video":f+='<embed src="'+b+'" width="'+c+'" height="'+d+'" type=audio/x-pn-realaudio-plugin console="Clip1" controls="IMAGEWINDOW,ControlPanel,StatusBar" autostart="true"></embed>';break;case"flash":f+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0" width="'+c+'" height="'+d+'">',f+='<param name="movie" value="'+b+'">',f+='<param name="quality" value="high">',f+='<embed src="'+b+'" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="'+c+'" height="'+d+'"></embed>',f+="</object>";break;case"applet":f+='<applet code="'+b+'" width="'+c+'" height="'+d+'"></applet>';break;case"other":f+='<embed src="'+b+'" width="'+c+'" height="'+d+'"></embed>'}e.insertHTML(f)},b.prototype.initSpecialCharacterDialog=function(){var a=this,b=a.dialog,c=f("."+ge+" span",b);b.delegate("label","click."+a.widgetName,function(b){a.submitSpecialCharacterDialog(this),a._onDesignViewBlur(b)}).delegate(ne,"click."+a.widgetName,function(){a._closeDialog()}).delegate("label","mouseover."+a.widgetName,function(){c.html(f(this).html())}).delegate("label","mouseout."+a.widgetName,function(){c.empty()})},b.prototype.submitSpecialCharacterDialog=function(a){var b=this;b._setIESelection(),b.insertHTML(f(a).html()),b._closeDialog()},b.prototype._setSaveBtnEnabled=function(){this.$ribbon.wijribbon(q,Da,!1)},b.prototype._undoAction=function(){var a=this._getDesignViewDocument().body,b={};n--,0>=n&&(n=0),a.innerHTML=o[n],n?this.$ribbon.wijribbon(q,ra,!1):(b[qa]=!0,b[ra]=!1,this.$ribbon.wijribbon(r,b))},b.prototype._redoAction=function(){var a=this._getDesignViewDocument().body,b=o.length,c={};n++,n>=b-1&&(n=b-1),a.innerHTML=o[n],n===b-1?(c[qa]=!1,c[ra]=!0,this.$ribbon.wijribbon(r,c)):this.$ribbon.wijribbon(q,qa,!1)},b.prototype._addtoUndoBuffer=function(){var a,b=o.length-1-n;for(a=0;b>a;a++)o.pop();n++,o.push(this._getDesignViewText()),this.$ribbon.wijribbon(q,qa,!1)},b.prototype._deleteSelectionContent=function(){var a,b,c,d=this._getDesignViewWindow(),e="rangeCount";if(f.browser.msie)a=d.document.selection,"none"!==a.type.toLowerCase()&&a.clear();else for(a=d.getSelection(),b=0;b<a[e];b++)c=a.getRangeAt(b),c.deleteContents()},b.prototype._refreshPathSelector=function(){var a,b,c=this,d=c._getParentElement(c._getDesignViewWindow()),e=c._getPathSelector(),g=f(d).parents(),h=g.length,i="wijmo-wijeditor-label ui-state-default ui-corner-all";if(d){for(a=d.tagName?d.tagName.toLowerCase():"",e.empty(),b=h-1;b>=0;b--)e.append("<label class='"+i+"'>&lt;"+g[b].tagName.toLowerCase()+"&gt;</label>");e.append("<label class='"+i+" wijmo-wijeditor-selectlabel ui-state-highlight ui-corner-all'>&lt;"+a+"&gt;</label>")}},b.prototype._toggleTableBorders=function(){var a=this.options.tableVirtualBorderShowing;this._updateTableBorderShowing(!a),this.options.tableVirtualBorderShowing=!a},b.prototype._updateTableBorderShowing=function(a){var b=this._getDesignViewDocument(),c=f("#__wijStyle",b);f.browser.safari?a?c.html("table,td,tr{border: 1px #acacac dashed;}"):c.empty():c.prop("disabled",!a)},b.prototype._tableAction=function(a){var b,c,d,e,h,i,j,k,l,m,n=this,o=n._getParentElement(n._getDesignViewWindow()),p=f(o).closest("td"),q=0;if(n._setSaveBtnEnabled(),0===p.length&&a!==J)return!1;a!==J&&(b=p.parent(),c=b.closest("table"),d=p[0],e=b[0],h=c[0],i=e.rowIndex,j=d.cellIndex);try{switch(a){case G:for(k=e.cells.length,m=h.insertRow(i),q=0;k>q;q++)n._insertCell(m,q);break;case L:h.deleteRow(i);break;case F:for(l=h.rows.length,q=0;l>q;q++)n._insertCell(h.rows[q],j);break;case K:n._removeColumn(h,j);break;case H:n._insertCell(e,j+1);break;case M:k=e.cells.length,1===k?h.deleteRow(i):e.deleteCell(j);break;case I:n._splitCell(h,e,i,j);break;case J:n._mergeCell(n._getSelectedCells(o))}this._addtoUndoBuffer()}catch(r){return g(r.message),!1}return!0},b.prototype._removeColumn=function(a,b){for(var c,d,e,f,g,h=a.rows.length,i=0;h>i;)c=a.rows[i],d=c.cells,e=d.length,f=b>e-1?e-1:b,g=d[f].colSpan,g>1&&e>1&&(e>f+1?d[f+1].colSpan+=g-1:d[f-1].colSpan+=g+1),1===e?(a.deleteRow(i),h=a.rows.length):(c.deleteCell(f),i++)},b.prototype._splitCell=function(a,b,c,d){for(var e,f,g,h,i,j=a.rows.length,k=0,l=0;d>=k;)b.cells[k].colSpan>1&&(l+=b.cells[k].colSpan-1),k++;if(this._insertCell(b,d+1),b.cells[d].colSpan>1)b.cells[d].colSpan--;else for(g=0;j>g;g++)if(e=a.rows[g],g!==c){for(h=d,k=0,f=0;h>=k;)e.cells[k].colSpan>1&&(f+=e.cells[k].colSpan-1,h-=f),k++;i=d+l-f,0>i&&(i=0),e.cells[i].colSpan++}},b.prototype._mergeCell=function(a){var b,c,d,e,f=a.length;if(2>f||a[0].parentNode!==a[f-1].parentNode)return!1;for(b=a[0].parentNode,c=a[0].cellIndex,d=c+f,e=c+1;d>e;e++)b.cells[c].innerHTML+=b.cells[c+1].innerHTML,b.cells[c].colSpan++,b.deleteCell(c+1)},b.prototype._getSelectedCells=function(a){var b,c,d,e,g,h,i,j,k=this,l=this._getDesignViewWindow(),m=(l.document,[]);if(f.browser.msie)c=f(a).closest("tr")[0],c&&(b=k._getIESelectionRange(),f.each(c.cells,function(a,c){k._isIE11?k._checkSelectionIncludeNodeForIE11(l,b,c)&&m.push(c):k._checkSelectionIncludeNodeExceptIE11(l,b,c)&&m.push(c)}));else if(f.browser.mozilla)for(d=l.getSelection(),g=d.rangeCount,e=0;g>e;e++)b=d.getRangeAt(e),h=b.startContainer,i=h.nodeName.toLowerCase(),"td"===i||"th"===i?m.push(h):"tr"===i&&(j=b.startOffset,m.push(h.cells[j]));else if(d=l.getSelection(),c=f(a).closest("tr")[0])for(g=c.cells.length,e=0;g>e;e++)m.push(c.cells[e]);return m},b.prototype.insertDateAndTime=function(){var a=new Date;this.options.culture&&""!==this.options.culture?this.insertHTML(Globalize.format(a,"dddd ",Globalize.findClosestCulture(this.options.culture))+Globalize.format(a,"F",Globalize.findClosestCulture(this.options.culture))):this.insertHTML(a.toDateString()+" "+a.toTimeString())},b.prototype._toggleWordWrap=function(){var a,b=this,c=b.sourceView,d="wrap";m=!m,a=m?"soft":"off",c.attr(d,a),c[0].focus(),f.browser.mozilla&&(c.hide(),h.setTimeout(function(){c.show()},40))},b.prototype.insertHTML=function(a){var b,c=this,d=c._getDesignViewDocument();try{f.browser.msie?(c._isIE11&&d.getSelection?b=c._getRangeForInsertHTML(d,a):("Control"===d.selection.type&&d.selection.clear(),b=d.selection.createRange(),b.pasteHTML(a),b.collapse(!1),c.rangeSelection=null),c._setIESelection(b,!0)):d.execCommand("insertHTML",!1,a)}catch(e){f.browser.msie&&f.browser.version&&parseFloat(f.browser.version)>=9&&parseFloat(f.browser.version)<=10&&c.rangeSelection&&(b=c.rangeSelection,b.pasteHTML(a),b.collapse(!1),c._setIESelection(b,!0))}c._addtoUndoBuffer(),c._setSaveBtnEnabled()},b.prototype._getRangeForInsertHTML=function(a,b){var c,d,e;return a.getSelection&&(c=a.getSelection(),this.rangeSelection?(d=this.rangeSelection,this.rangeSelection=null):c.getRangeAt&&c.rangeCount&&(d=c.getRangeAt(0)),d&&(d.deleteContents(),e=d.createContextualFragment(b),d.insertNode(e),d.collapse(!1))),d},b.prototype._setIEFocus=function(){var a=this._getDesignViewDocument();if(f.browser.msie)try{a.body.focus()}catch(b){}},b.prototype.focus=function(){var a=this._getDesignViewWindow(),b=a.document;f.browser.msie?this.rangeSelection?this._setIESelection():b.body?b.body.focus():b.onreadystatechange=function(){"complete"===b.readyState&&b.body.focus()}:a.focus()},b.prototype._setFocusNotIE=function(){var a=this._getDesignViewWindow(),b=a.document;f.browser.msie||(f.browser.mozilla?a.focus():b.body&&b.body.focus())},b.prototype._createElement=function(a,b,c){return new xe(a,b,c)},b.prototype._createDiv=function(a,b){return this._createElement("div",{"class":a})},b.prototype._createSpan=function(a,b){var c=this;return b?0===a.length?c._createElement("span",b):this._createElement("span",b,{"class":a}):c._createElement("span",{"class":a})},b.prototype._createTextBox=function(a,b){var c={"class":a,"type":"text","value":void 0};return b&&(c.value=b),this._createElement("input",c)},b.prototype._createLabel=function(a,b){return b?new xe("label",a,{"for":b}):new xe("label",a)},b.prototype._createRadio=function(a,b,c){var d={"name":b,"id":a,"value":c,"type":"radio"};return this._createElement("input",d)},b.prototype._createCheckbox=function(a){var b={"type":"checkbox","id":a};return this._createElement("input","",b)},b.prototype._createSelect=function(a,b){var c=this,d={"class":a},e=c._createElement("select",d);return""===a&&(e=c._createElement("select")),f.each(b,function(a,b){f.isPlainObject(b)&&b.selected?e.add(c._createElement("option",b.text,{"selected":"selected"})):e.add(c._createElement("option",b))}),e},b.prototype._createInputButton=function(a,b){var c={"class":a,"type":"button","value":void 0};return b&&(c.value=b),this._createElement("input",c)},b.prototype._createTextField=function(a,b,c,d){var e=this,f=e._createDiv(b),g={"type":"text","value":""};return d&&(g.value=d),f.add(e._createSpan(xc,a)),f.add(e._createElement("input",g)),c&&f.add(new we(c)),f},b.prototype._createTextAreaField=function(a,b,c,d){var e=this._createDiv(b);return e.add(this._createSpan(xc,a)),e.add(this._createElement("textarea",c)),d&&e.add(new we(d)),e},b.prototype._createSeparator=function(){var a=this,b=a._createDiv(uc);return b.add(a._createElement("hr")),b},b.prototype._createOKCancelButtons=function(){var a=this,b=a._createDiv(vc);return b.add(a._createElement("input",{"type":"button","class":wc,"value":this.localizeString("dialogOK","OK")})),b.add(a._createElement("input",{"type":"button","class":wc,"engValue":"Cancel","value":this.localizeString("dialogCancel","Cancel")})),b},b.prototype._getDialogRes_Template=function(){var a=this,b=a._createDiv(Kc),c=a._createDiv(Lc),d=a._createDiv(Oc),e=a._createDiv(Pc),f=a._createDiv(Qc),g=a._createDiv(Rc),h=a._createElement("div",this.localizeString("templateDialogName","Name :")),i=a._createElement("div",this.localizeString("templateDialogDescription","Description :")),j=a._createDiv(Uc),k=a._createDiv(Xc);return c.add(a._createElement("div",this.localizeString("templateDialogSelectTemplate","Select Template:"),{"class":Mc})),c.add(a._createElement("div",this.localizeString("templateDialogTemplatePreview","Template Preview:"),{"class":Nc})),b.add(c),e.add(a._createElement("select",{"size":8})),f.add(a._createElement("iframe",{"frameborder":0})),d.add(e),d.add(f),b.add(d),h.add(a._createSpan(Sc)),i.add(a._createSpan(Tc)),g.add(h),g.add(i),b.add(g),j.add(a._createSpan(xc,this.localizeString("templateDialogName","Name :"))),j.add(a._createTextBox(Vc)),j.add(a._createSpan(xc,this.localizeString("templateDialogDescription","Description :"))),j.add(a._createTextBox(Wc)),b.add(j),k.add(a._createInputButton(wc+" "+Yc,this.localizeString("templateDialogDeleteSelected","Delete selected"))),k.add(a._createInputButton(wc+" "+Zc,this.localizeString("templateDialogSaveCurrentPage","Save current page as template"))),b.add(k),b.add(a._createSeparator()),b.add(a._createOKCancelButtons()),b.render()},b.prototype._getDialogRes_ImageBrowser=function(){var a=this,b=a._createDiv(yc),c=a._createDiv(zc),d=a._createDiv(Ac),e=a._createDiv(Bc),f=a._createDiv(Cc),g=a._createDiv(Dc);return d.add(a._createTextField(this.localizeString("imageEditorDialogImageSrc","Image Src:"),Ec)),d.add(a._createTextField(this.localizeString("imageEditorDialogImageAltText","Image alt text:"),Fc)),d.add(a._createTextField(this.localizeString("imageEditorDialogImageWidth","Image width:"),Gc,this.localizeString("dialogPixel","px"))),d.add(a._createTextField(this.localizeString("imageEditorDialogImageHeight","Image height:"),Hc,this.localizeString("dialogPixel","px"))),d.add(a._createTextField(this.localizeString("imageEditorDialogCssText","Css text:"),Ic)),c.add(d),e.add(f),f.add(a._createElement("select",{"size":8})),e.add(g),g.add(a._createElement("img",{"src":"","alt":""})),c.add(e),c.add(a._createSeparator()),c.add(a._createOKCancelButtons()),b.add(c),b.render()},b.prototype._getDialogRes_link_address=function(){return this._createTextField(this.localizeString("hyperLinkDialogAddress","Address :"),_c)},b.prototype._getDialogRes_link_linkType_options=function(){return[{"id":"radUrl","value":"url","text":this.localizeString("hyperLinkDialogUrl","url")},{"id":"radAnchor","value":"anchor","checked":!0,"text":this.localizeString("hyperLinkDialogAnchor","anchor")},{"id":"radMail","value":"email","text":this.localizeString("hyperLinkDialogEmail","email")}]},b.prototype._getDialogRes_link_linkType=function(){var a,b=this,c=this._createDiv(ad+" ui-helper-clearfix"),d=this._createElement("div"),e=[];for(c.add(d),f.each(this._getDialogRes_link_linkType_options(),function(a,c){d.add(b._createRadio(c.id,"radioList",c.value)),d.add(b._createLabel(c.text,c.id))}),a=1;8>a;a++)e.push("#anchor"+a.toString());return c.add(this._createSelect(bd,e)),c},b.prototype._getDialogRes_Link_linkIconType=function(){var a=this,b=this._createDiv(jd),c=this._createElement("div"),d=this._createSpan(xc,this.localizeString("hyperLinkDialogIconType","Icon Type :")),e=[{"id":"radLinkTypeIsText","value":"text","checked":!0,"text":this.localizeString("hyperLinkDialogText","text")},{"id":"radLinkTypeIsImage","value":"image","text":this.localizeString("hyperLinkDialogImage","image")}];return f.each(e,function(b,d){c.add(a._createRadio(d.id,"linkIconRadioList",d.value)),c.add(a._createLabel(d.text,d.id))}),b.add(c),c.add(d),b},b.prototype._getDialogRes_Link_text=function(){return this._createTextAreaField(this.localizeString("hyperLinkDialogTextToDisplay","Text to display :"),cd)},b.prototype._getDialogRes_Link_image=function(){var a=this._createDiv(id);return a.add(this._createTextField(this.localizeString("imageEditorDialogImageSrc","Image Src:"),fd)),a.add(this._createTextField(this.localizeString("imageEditorDialogImageWidth","Image width:"),gd,this.localizeString("dialogPixel","px"))),a.add(this._createTextField(this.localizeString("imageEditorDialogImageHeight","Image height:"),hd,this.localizeString("dialogPixel","px"))),a},b.prototype._getDialogRes_link_target=function(){var a=this._createDiv(dd),b=this._createSpan(xc,this.localizeString("hyperLinkDialogTarget","Target :")),c=[{"text":"_blank","selected":!0},"_parent","_self","_top"],d=this._createSelect(dd,c);return a.add(b),a.add(d),a},b.prototype._getDialogRes_Link_Css=function(){return this._createTextField(this.localizeString("hyperLinkDialogCss","Css :"),ed)},b.prototype._getDialogRes_Link=function(){var a=this,b=a._createDiv($c);return b.add(a._getDialogRes_link_address()),b.add(a._getDialogRes_link_linkType()),b.add(a._createSeparator()),b.add(a._getDialogRes_Link_linkIconType()),b.add(a._getDialogRes_Link_text()),b.add(a._getDialogRes_Link_image()),b.add(a._getDialogRes_link_target()),b.add(a._getDialogRes_Link_Css()),b.add(a._createSeparator()),b.add(a._createOKCancelButtons()),b.render()},b.prototype._getDialogRes_TagInspector=function(){var a=this,b=a._createDiv(nd),c=a._createDiv(od),d=a._createDiv(rd),e=a._createDiv(sd),f=a._createDiv(ud);return b.add(c),c.add(a._createSpan(pd,this.localizeString("tagInspectorDialogSelectedTag","Selected tag :"))),c.add(a._createSpan(qd,"")),b.add(d),d.add(a._createCheckbox("displayNoEmpty")),d.add(a._createLabel(this.localizeString("tagInspectorDialogDisplayNotEmptyAttributes","Display not empty attributes only"),"displayNoEmpty")),b.add(e),e.add(a._createSpan(xc,this.localizeString("tagInspectorDialogAttributes","Attributes:"))),e.add(a._createDiv(td)),b.add(f),f.add(a._createSpan(xc,this.localizeString("tagInspectorDialogInnerHTML","Inner HTML:"))),f.add(a._createElement("textarea")),b.add(a._createTextField(this.localizeString("tagInspectorDialogCSSText","Css Text:"),vd)),b.add(a._createSeparator()),b.add(a._createOKCancelButtons()),b.render()},b.prototype._getDialogRes_Color=function(){return this._getDialogRes_CommonColor("#FFFFFF")},b.prototype._getDialogRes_ForeColor=function(){return this._getDialogRes_CommonColor("#000000")},b.prototype._getDialogRes_BackColor=function(){return this._getDialogRes_CommonColor("#FFFFFF")},b.prototype._getDialogRes_CommonColor=function(a){var b=this,c=b._createDiv(wd),d=b._createDiv(yd);return c.add(b._createDiv(xd)),c.add(d),d.add(b._createSpan(xc,this.localizeString("backColorDialogSelectedColor","Selected Color:"))),d.add(b._createElement("input",{"type":"text","value":a})),c.add(b._createSeparator()),c.add(b._createOKCancelButtons()),c.render()},b.prototype._getDialogRes_Table=function(){var a=this,b=a._createDiv(zd),c=a._createDiv(Id);return b.add(a._createTextField(this.localizeString("tableDialogRows","Rows :"),Ad,"",3)),b.add(a._createTextField(this.localizeString("tableDialogColumns","Columns :"),Bd,"",3)),b.add(a._createTextField(this.localizeString("tableDialogTableWidth","Table Width :"),Cd,this.localizeString("tableDialogPixels","pixels"),200)),b.add(a._createTextField(this.localizeString("tableDialogTableHeight","Table Height :"),Dd,this.localizeString("tableDialogPixels","pixels"),200)),b.add(a._createTextField(this.localizeString("tableDialogBorder","Border thickness:"),Ed)),b.add(a._createTextField(this.localizeString("tableDialogCellPadding","Cell Padding :"),Fd)),b.add(a._createTextField(this.localizeString("tableDialogCellSpacing","Cell Spacing :"),Gd)),b.add(a._createTextField(this.localizeString("tableDialogCssText","Css Text :"),Hd)),b.add(c),c.add(a._createSpan(xc,this.localizeString("tableDialogBackgroundColor","Background Color:"))),c.add(a._createElement("input",{"type":"text"})),c.add(a._createElement("input",{"type":"button","value":"..."})),b.add(a._createSeparator()),b.add(a._createOKCancelButtons()),b.render()},b.prototype._getDialogRes_Preview=function(){var a=this,b=a._createDiv(Jd),c=a._createDiv(Kd),d=a._createDiv(vc),e=a._createDiv(Ld),f=a._createDiv(Sd);return b.add(c),c.add(a._createSpan(xc,this.localizeString("previewDialogPreviewSize","Preview Size:"))),c.add(a._createElement("input",{"id":"rad640_480","name":"preview","type":"radio","checked":"checked"})),c.add(a._createLabel("640x480","rad640_480")),c.add(a._createElement("input",{"id":"rad800_600","name":"preview","type":"radio"})),c.add(a._createLabel("800x600","rad800_600")),c.add(a._createElement("input",{"id":"rad1024_768","name":"preview","type":"radio"})),c.add(a._createLabel("1024x768","rad1024_768")),c.add(a._createElement("input",{"id":"chkSplit","type":"checkbox","checked":"checked"})),c.add(a._createLabel(this.localizeString("previewDialogSplit","Split pages"),"chkSplit")),b.add(a._createSeparator()),b.add(d),d.add(a._createInputButton(wc+" "+Od,this.localizeString("previewDialogPrintAll","Print All"))),d.add(a._createInputButton(wc+" "+Pd,this.localizeString("previewDialogPrintPage","Print Page"))),d.add(a._createInputButton(wc+" "+Qd,this.localizeString("dialogOK","OK"))),b.add(a._createSeparator()),b.add(e),e.add(a._createElement("a",this.localizeString("previewDialogPrevPage","Prev page"),{"class":Md,"href":"#"})),e.add(a._createElement("span","1 / 1")),e.add(a._createElement("a",this.localizeString("previewDialogNextPage","Next page"),{"class":Nd,"href":"#"})),b.add(a._createDiv(Rd)),b.add(f),f.add(a._createElement("iframe",{"src":"about:blank"})),b.render()},b.prototype._getDialogRes_CleanUp=function(){var a=this,b=a._createDiv(Td),c=a._createDiv(Ud),d=a._createDiv(Vd),e=a._createDiv(Wd),g=[{"id":"replaceSpans","label":this.localizeString("cleanUpDialogStripSpanTag","Strip SPAN tag")},{"id":"replaceClass","label":this.localizeString("cleanUpDialogStripClass","Strip CLASS tag")},{"id":"replaceStyle","label":this.localizeString("cleanUpDialogStripStyle","Strip STYLE attribute")},{"id":"replaceNbsp","label":this.localizeString("cleanUpDialogReplaceSymbol","Replace &amp;nbsp; symbol")},{"id":"transformPtoDiv","label":this.localizeString("cleanUpDialogTransformParagraphToDIV","Transform Paragraph to DIV")}];return b.add(c),c.add(a._createSpan(xc,this.localizeString("cleanUpDialogDocumentSource","Document source :"))),b.add(d),d.add(a._createElement("textarea",{"readonly":"readonly"})),b.add(e),f.each(g,function(b,c){e.add(a._createCheckbox(c.id)),e.add(a._createLabel(c.label,c.id))}),b.add(a._createSeparator()),b.add(a._createOKCancelButtons()),b.render()},b.prototype._getDialogRes_FindAndReplace=function(){var a=this,b=a._createDiv(Xd),c=a._createDiv(Yd),d=a._createDiv(Zd),e=a._createDiv(vc);return b.add(c),c.add(a._createSpan(xc,this.localizeString("findAndReplaceFind","Find:"))),c.add(a._createElement("textarea","text")),b.add(d),d.add(a._createSpan(xc,this.localizeString("findAndReplaceReplace","Replace:"))),d.add(a._createElement("textarea")),b.add(a._createSeparator()),b.add(e),e.add(a._createInputButton(wc,this.localizeString("findAndReplaceFindButton","Find"))),e.add(a._createInputButton(wc,this.localizeString("findAndReplaceReplaceButton","Replace"))),b.render()},b.prototype._getDialogRes_Media=function(){var a=this,b=a._createDiv($d),c=a._createDiv(_d);return b.add(c),c.add(a._createSpan(xc,this.localizeString("mediaDialogMediaType","Media Type :"))),c.add(a._createSelect("",["flash","video","applet","other"])),b.add(a._createTextField(this.localizeString("mediaDialogMediaUrl","Media Url :"),ae)),b.add(a._createTextField(this.localizeString("mediaDialogWidth","Width :"),be,this.localizeString("dialogPixel","px"),200)),b.add(a._createTextField(this.localizeString("mediaDialogHeight","Height :"),ce,this.localizeString("dialogPixel","px"),200)),b.add(a._createSeparator()),b.add(a._createOKCancelButtons()),b.render()},b.prototype._getDialogRes_SpecialCharacter=function(){var a=this,b=a._createDiv(de),c=a._createDiv(ee),d=a._createDiv(fe),e=a._createDiv(ge),g=a._createDiv(he),h=a._createDiv(ie,"Punctuation"),i=a._createDiv(je),j=["&#8211;","&#8212;","&iexcl;","&iquest;","&quot;","&laquo;","&raquo;","&nbsp;"],k=a._createDiv(ie,"Symbols"),l=a._createDiv(ke),m=["&amp;","&cent;","&copy;","&divide;","&gt;","&lt;","&micro;","&#8226;","&para;","&plusmn;","&#8364;","&pound;","&reg;","&sect;","&yen;"],n=a._createDiv(ie,"Diacritics"),o=a._createDiv(le),p=["&aacute;","&Aacute;","&agrave;","&Agrave;","&acirc;","&Acirc;","&aring;","&Aring;","&atilde;","&Atilde;","&auml;","&Auml;","&aelig;","&AElig;","&ccedil;","&Ccedil;","&eacute;","&Eacute;","&egrave;","&Egrave;","&ecirc;","&Ecirc;","&euml;","&Euml;","&iacute;","&Iacute;","&igrave;","&Igrave;","&icirc;","&Icirc;","&iuml;","&Iuml;","&ntilde;","&Ntilde;","&oacute;","&Oacute;","&ograve;","&Ograve;","&ocirc;","&Ocirc;","&oslash;","&Oslash;","&otilde;","&Otilde;","&ouml;","&Ouml;","&uacute;","&Uacute;","&ugrave;","&Ugrave;","&ucirc;","&Ucirc;","&uuml;","&Uuml;","&szlig;","&yuml;","&#8216;","&#8217;"],q=a._createDiv(vc);return b.add(c),c.add(d),d.add(e),e.add(new xe("span")),c.add(g),g.add(h),h.add(i),f.each(j,function(b,c){i.add(a._createLabel(c))}),g.add(k),k.add(l),f.each(m,function(b,c){l.add(a._createLabel(c))}),g.add(n),n.add(o),f.each(p,function(b,c){o.add(a._createLabel(c))}),b.add(a._createSeparator()),q.add(a._createInputButton(wc,"Cancel")),b.add(q),b.render()},b.prototype._copyFromClipboard=function(){var a,b,c,d;if(h.clipboardData)return h.clipboardData.getData("Text");if(f.browser.mozilla){try{netscape.security.PrivilegeManager.enablePrivilege&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(e){}return(a=Components.classes["@mozilla.org/widget/clipboard;1"].getService(Components.interfaces.nsIClipboard))&&(b=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable))?(b.addDataFlavor("text/unicode"),a.getData(b,a.kGlobalClipboard),b.getTransferData("text/unicode",c,d),c&&(c=c.value.QueryInterface(Components.interfaces.nsISupportsString)),c?c.data.substring(0,d.value/2):""):!1}},b.prototype._copyToClipboard=function(a){var b,c,d,e={},i={};if(h.clipboardData&&a)h.clipboardData.setData("Text",a);else if(f.browser.mozilla)try{if(netscape.security.PrivilegeManager.enablePrivilege&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),b=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard),!b)return;if(c=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable),!c)return;if(c.addDataFlavor("text/unicode"),i={},e=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString),e.data=a,c.setTransferData("text/unicode",e,2*a.length),d=Components.interfaces.nsIClipboard,!b)return!1;b.setData(c,null,d.kGlobalClipboard)}catch(j){e="Copy text to Clipboard \n",e+="If you are using firefox please do the following :\n ",e+="1. Write in your url box : 'about:config'\n",e+="2. Change signed.applets.codebase_principal_support = true\n",g(this.localizeString("errorMessageCopyToClipboardError",e))}},b.prototype.fixAbsoluteUrlsIfNeeded=function(a){var b,c,d,e,f,g,h,j,k=this,l=i.URL,m=i.URL,n=i.URL,o=!1,p=m.length,q=a;for(h=p-1;h>0;h--)if(b=m.charAt(h),c=m.charAt(h-1),"/"===b||"\\"===b){if(b===c)break;n=m.substring(0,h)+b,o||(m=n,o=!0)}return d=k._prepareLiteralRegexText(l+"?"),e=new RegExp(d,"g"),q=q.replace(e,"?"),f=k._prepareLiteralRegexText(m),e=new RegExp(f,"g"),q=q.replace(e,""),g=k._prepareLiteralRegexText(n),e=new RegExp(g,"g"),q=q.replace(e,"/"),j=q.indexOf("#"),j>-1&&(q=q.substr(j)),q},b.prototype._insertCell=function(a,b){var c=a.insertCell(b);return c.innerHTML="&nbsp;",c},b.prototype._getDictionaryDeclare=function(){var a={};return a.a=["accesskey","charset","class","coords","dir","href","hreflang","id","lang","name","rel","rev","shape","tabindex","target","title"],a.b=["class","dir","id","lang","title"],a.body=["alink","background","bgColor","bgproperties","bottommargin","class","dir","id","lang","leftmargin","link","marginheight","marginwidth","rightmargin","text","title","topmargin","vlink"],a.button=["accesskey","class","dir","disabled","id","lang","name","tabindex","title","type","value"],a.code=["class","dir","id","lang","title"],a.div=["align","class","dir","id","lang","title"],a.em=["class","dir","id","lang","title"],a.font=["class","color","dir","face","id","lang","pointsize","size","title"],a.form=["action","class","dir","enctype","id","lang","method","name","runat","target","title"],a.hr=["align","class","color","id","noshade","size","title","width"],a.i=["class","dir","id","lang","title"],a.img=["align","alt","border","class","controls","dir","dynsrc","height","hspace","id","ismap","lang","longdesc","loop","lowsrc","name","src","start","title","usemap","vspace","width"],a.input=["accept","accesskey","align","alt","border","checked","class","dir","disabled","height","hspace","id","lang","maxlength","name","readonly","size","src","tabindex","title","type","usemap","value","vspace","width"],a.label=["accesskey","class","dir","for","id","lang","title"],a.li=["class","dir","id","lang","title","type","value"],a.ol=["class","compact","dir","id","lang","start","title","type"],a.option=["class","dir","disabled","id","label","lang","selected","title","value"],a.p=["align","class","dir","id","lang","title"],a.span=["class","dir","id","lang","title"],a.strong=["class","dir","id","lang","title"],a.select=["accesskey","class","dir","disabled","id","lang","multiple","name","size","tabindex","title"],a.table=["align","background","bgColor","border","bordercolor","bordercolordark","bordercolorlight","cellpadding","cellspacing","class","cols","datapagesize","dir","frame","height","hspace","id","lang","rules","summary","title","vspace","width"],a.td=["abbr","align","axis","background","bgColor","bordercolor","bordercolordark","bordercolorlight","class","colspan","dir","headers","height","id","lang","nowrap","rowspan","scope","title","valign","width"],
a.th=["abbr","align","axis","background","bgColor","bordercolor","bordercolordark","bordercolorlight","class","colspan","dir","headers","height","id","lang","nowrap","rowspan","scope","title","valign","width"],a.tr=["align","bgColor","bordercolor","bordercolordark","bordercolorlight","class","dir","height","id","lang","nowrap","title","valign"],a.tbody=["align","bgColor","class","dir","id","lang","title","valign"],a.textarea=["accesskey","class","cols","dir","disabled","id","label","lang","name","readonly","rows","tabindex","title","wrap"],a.u=["class","id","xml:lang"],a.ul=["class","compact","dir","id","lang","title","type"],a},b.prototype._generateUniqueName=function(a){var b=k[a];return b||(b=0),k[a]=++b,a+b},b.prototype._setContentEditable=function(a,b){var c="designMode",d="contentEditable";try{a.body[d]&&(a.body[d]=b.toString()),a[c]&&(b||"off"===a[c]?b&&"on"!==a[c]&&(f.browser.msie&&j(f.browser.version)>=9&&j(f.browser.version)<11||(a[c]="on")):a[c]="off"),b&&!f.browser.msie&&a.execCommand("useCSS",!1,!0)}catch(e){}},b.prototype._setContentSpellCheck=function(a,b){var c="spellcheck";try{void 0!==a.body[c]&&(a.body[c]=b)}catch(d){}},b.prototype._formatString=function(a,b){var c,d=a.length;for(c=0;b-d>c;c++)a="0"+a;return a},b.prototype._convertToWebColor=function(a,b,c){var d,e,f,g,h=this;return(isNaN(a)||0>255-a)&&(a=0),(isNaN(b)||0>255-b)&&(b=0),(isNaN(c)||0>255-c)&&(c=0),d=h._formatString(j(a).toString(16),2),e=h._formatString(j(b).toString(16),2),f=h._formatString(j(c).toString(16),2),g="#"+d+e+f},b.prototype._prepareLiteralRegexText=function(a){var b=a;return b=b.replace(/\\/g,"\\\\"),b=b.replace(/\./g,"\\."),b=b.replace(/\?/g,"\\?")},b.prototype._isNumeric=function(a){return new RegExp("^\\d+$").test(a)},b.prototype._isEmail=function(a){return new RegExp("mailto:(\\S)+[@]{1}(\\S)+[.]{1}(\\w)+").test(a)},b.prototype._isUrl=function(a){return new RegExp("[a-zA-z]+://[^s]+").test(a)},b.prototype._isAnchor=function(a){return new RegExp("#[^s]+").test(a)?!0:new RegExp("[a-zA-z]+://[^s]+#[^s]+").test(a)?!0:!1},b.prototype.refresh=function(){var a,b=this,c=b._getDesignViewDocument(),d=(b.element,b._getHeader()),e=b._getFooter(),g=d.outerHeight(!0),h=e.outerHeight(!0),i=b._oriEleWidth,j=b._oriEleHeight,k=b._getContent();b.editor.width(i).height(j),this.$ribbon.wijribbon("updateRibbonSize"),window.setTimeout(function(){b.editor.is(":visible")&&(g=d.outerHeight(!0),h=e.outerHeight(!0)),a=b.editor.height()-g-h,k.height(a),k.data("wijmo-wijsplitter")&&("split"===b.options.editorMode?k.wijsplitter("option","splitterDistance",a/2):k.wijsplitter("refresh"))},0),f.browser.mozilla?setTimeout(b._setDesignModeForFF,1e3,b):b._setContentEditable(c,!0)},b.prototype.getText=function(){var a=this;return a._getDesignViewText()},b.prototype.setText=function(a){var b=this;a&&(b._setDesignViewText(a),b.sourceView.val(a))},b.prototype.localizeString=function(a,b){var c=this.options;return c.localization&&c.localization[a]?c.localization[a]:b},b.prototype._getParentElement=function(a){var b,c,d,e,f,g=this,h=g._getRange(a);return h?h.commonAncestorContainer?(b=a.getSelection(),c=h.startContainer||b.baseNode,d=h.endContainer||b.extentNode,e=h.startOffset,null===e&&(e=b.baseOffset),f=h.endOffset,null===f&&(f=b.extentOffset),c===d&&f-e===1?b.anchorNode.childNodes[b.anchorOffset]:h.commonAncestorContainer.tagName?h.commonAncestorContainer:a.document===h.commonAncestorContainer&&b.baseNode?b.baseNode.parentNode:h.commonAncestorContainer.parentNode):h.length?h.item(0):h.parentElement?h.parentElement():null:null},b.prototype._getRange=function(a){var b,c;return a.document.selection&&!h.opera?a.document.selection.createRange():a.getSelection?(b=a.getSelection(),!b||b.rangeCount<1?null:c=b.getRangeAt?b.getRangeAt(0):a.document.createRange()):void 0},b.prototype._getInspectElement=function(){return p||this._getSelectedElement()},b.prototype._getSelectedElement=function(){return this._getParentElement(this._getDesignViewWindow())},b.prototype._checkSelectionIncludeNodeForIE11=function(a,b,c){var d,e=a.document;return b&&(d=e.createRange(),d.selectNode(c),b.compareBoundaryPoints(Range.START_TO_END,d)<=0||b.compareBoundaryPoints(Range.END_TO_START,d)>=0)?!1:!0},b.prototype._checkSelectionIncludeNodeExceptIE11=function(a,b,c){var d=a.document,e=d.selection.createRange(),f="compareEndPoints";return b&&(e.moveToElementText(c),b.inRange(e)||b[f]("StartToStart",e)>=0&&b[f]("StartToEnd",e)<=0||b[f]("EndToStart",e)>=0&&b[f]("EndToEnd",e)<=0)?!0:!1},b.prototype._getIESelectionRange=function(){var a,b,c=this,d=this._getDesignViewWindow(),e=d.document;return c._isIE11?(a=d.getSelection(),a&&a.rangeCount>0&&(b=a.getRangeAt(0))):b=e.selection.createRange(),b},b.prototype._setIESelection=function(a,b){var c;if(f.browser.msie&&(a||b||(a=this.rangeSelection),a))try{c=this._getDesignViewDocument(),this._isIE11&&c.getSelection?c.getSelection().addRange(a):a.select()}catch(d){}},b.prototype._getSelectedContent=function(){var a,b,c,d=this._getDesignViewWindow(),e=d.document,f="",g="cloneContents";return e.selection?(a=e.selection.createRange(),a.htmlText):(a=d.getSelection().getRangeAt(0),a&&a[g]&&(b=a[g](),c=document.createElement("div"),c.appendChild(b),f=c.innerHTML,c=null),f||"")},b.prototype._getHtmlTextInIE=function(a){if(!f.browser.msie||!a)return"";var b,c="";return this._isIE11&&a.getSelection?(b=a.getSelection(),c=b.getRangeAt&&b.rangeCount?b.getRangeAt(0).toString():""):c=a.selection.createRange().htmlText,c},b.prototype._saveSelectionForIE=function(){var a,b,c,d=this._getDesignViewWindow().document;if(f.browser.msie){if(this._isIE11&&d.getSelection)return a=d.getSelection(),void(this.rangeSelection=a.getRangeAt&&a.rangeCount?a.getRangeAt(0):null);a=d.selection,c=a.createRange(),f.browser.version&&parseFloat(f.browser.version)>=9&&parseFloat(f.browser.version)<=10&&c.parentElement&&(b=c.parentElement(),b&&"INPUT"==b.tagName&&"hidden"==b.type)||(this.rangeSelection=c)}},b.prototype._storeSelectionForIE=function(){var a,b,c,d,e=this._getDesignViewWindow().document;f.browser.msie&&(e.selection?(a=e.selection.createRange(),a.getBookmark&&(this.bookmark=a.getBookmark())):e.getSelection&&e.getSelection().rangeCount&&(a=e.getSelection().getRangeAt(0),b=a.cloneRange(),b.selectNode(e.body),b.setEnd(a.startContainer,a.startOffset),c=b.toString().length,d=3===a.startContainer.nodeType?a.startContainer.nodeValue:a.startContainer.innerHTML,this.bookmark={"startContainerText":d,"start":c,"end":c+a.toString().length}))},b.prototype._restoreSelectionForIE=function(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q=this,r=this._getDesignViewWindow(),s=r.document,t=!1,u=0;if(this.bookmark&&f.browser.msie)if(s.selection)a?b=setInterval(function(){u++,u>5||c?(d.select(),q.bookmark=null,clearInterval(b)):(d=s.body.createTextRange(),c=d.moveToBookmark(q.bookmark))},50):(d=s.body.createTextRange(),d.moveToBookmark(this.bookmark)&&d.select(),this.bookmark=null);else if(s.getSelection){for(e=this.bookmark.start,n=this.bookmark.end,g=this.bookmark.startContainerText,d=s.createRange(),d.setStart(s.body,0),h=[s.body],k=0;!i&&(j=h.pop());)if(3==j.nodeType)l=k+j.length,!m&&(t||j.nodeValue===g)&&e>=k&&l>=e&&(d.setStart(j,e-k),m=!0),m&&n>=k&&l>=n&&(d.setEnd(j,n-k),i=!0),k=l;else for(j.innerHTML===g&&(t=!0),p=j.childNodes.length;p--;)h.push(j.childNodes[p]);o=r.getSelection(),o.removeAllRanges(),o.addRange(d),this.rangeSelection=null,this.bookmark=null}},b.prototype._setSelection=function(a,b,c){var d,e,g,h,i=this._getDesignViewWindow(),j=i.document,k=0;try{window.getSelection?(h=i.getSelection(),d=j.createRange(),e=a[0][0],g=a[a.length-1][0],d.setStart(e,0),d.setEnd(g,g.childNodes.length),h.removeAllRanges(),h.addRange(d)):(d=j.selection.createRange(),a?(f.each(a,function(a,b){k+=b.text().length}),d.moveToElementText(a[0][0]),d.collapse(!0),d.moveEnd("character",k)):(d.moveStart("textedit",-1),d.collapse(!0),d.moveStart("character",b),d.moveEnd("character",c)),d.select())}catch(l){}},b.prototype._getHyperLinkElement=function(a){for(;a&&"A"!==a.tagName&&"BODY"!==a.tagName&&"HTML"!==a.tagName;)a=a.parentElement;return a},b}(a.wijmoWidget);b.wijeditor=ye;var ze=function(){function a(){this.initSelector=":jqmData(role='wijeditor')",this.fullScreenContainerSelector="",this.editorMode="wysiwyg",this.fullScreenMode=!1,this.fontSizes=[{"tip":"VerySmall","name":"xx-small","text":"VerySmall"},{"tip":"Smaller","name":"x-small","text":"Smaller"},{"tip":"Small","name":"small","text":"Small"},{"tip":"Medium","name":"medium","text":"Medium"},{"tip":"Large","name":"large","text":"Large"},{"tip":"Larger","name":"x-large","text":"Larger"},{"tip":"VeryLarge","name":"xx-large","text":"VeryLarge"}],this.fontNames=[{"tip":"Arial","name":"fn1","text":"Arial"},{"tip":"Courier New","name":"fn2","text":"Courier New"},{"tip":"Garamond","name":"fn3","text":"Garamond"},{"tip":"Tahoma","name":"fn4","text":"Tahoma"},{"tip":"Times New Roman","name":"fn5","text":"Times New Roman"},{"tip":"Verdana","name":"fn6","text":"Verdana"},{"tip":"Wingdings","name":"fn7","text":"Wingdings"}],this.showPathSelector=!0,this.mode="ribbon",this.commandButtonClick=null,this.simpleModeCommands=null,this.showFooter=!0,this.customContextMenu=!0,this.text=null,this.textChanged=null,this.localization=null}return a}();ye.prototype.options=f.extend(!0,{},a.wijmoWidget.prototype.options,new ze),ye.prototype.options.tableVirtualBorderShowing=!0,f.wijmo.registerWidget("wijeditor",ye.prototype);var Ae=mc+"-colorcanvas",Be=mc+"-color",Ce=mc+"-wheel",De=mc+"-overlay",Ee=mc+"-marker";f.fn.wijeditorcolorcanvas=function(a,b){var c=this.get(0);return c.wijeditorcolorcanvas||(c.wijeditorcolorcanvas=new Fe(c,a,b))};var Fe=function(){function a(a,b,c){var d,e,g=this,h="";e="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, ",h+="<div class='"+Ae+"'>",h+="<div class='"+Be+"'></div>",h+="<div class='"+Ce+"'></div>",h+="<div class='"+De+"'></div>",h+="<div class='h-marker "+Ee+"'></div>",h+="<div class='sl-marker "+Ee+"'></div></div>",f(a).html(h),d=f("."+Ae,a),g.wheel=f("."+Ce,a).get(0),g.radius=84,g.square=100,g.width=194,f.browser.msie&&parseInt(f.browser.version,10)<7&&f("*",d).each(function(){var a=this,b=a.currentStyle.backgroundImage;return"none"!==b&&(b=b.substring(5,b.length-2),f(a).css({"backgroundImage":"none","filter":e+"src='"+b+"')"})),this}),g.linkTo=function(a){return"object"==typeof g.callback&&f(g.callback).unbind("keyup",g.updateValue),g.color=null,"function"==typeof a?g.callback=a:("object"==typeof a||"string"==typeof a)&&(g.callback=f(a),g.callback.bind("keyup",g.updateValue),g.callback.get(0).value&&g.setColor(g.callback.get(0).value)),this},g.updateValue=function(a){var b=this;b.value&&b.value!==g.color&&g.setColor(b.value)},g.setColor=function(a){var b=g.unpack(a);return g.color!==a&&b&&(g.color=a,g.rgb=b,g.hsl=g.RGBToHSL(g.rgb),g.updateDisplay()),this},g.setHSL=function(a){return g.hsl=a,g.rgb=g.HSLToRGB(a),g.color=g.pack(g.rgb),g.updateDisplay(),this},g.widgetCoords=function(a){var b,c,d,e,h;return d=a.target||a.srcElement,e=g.wheel,h=g.absolutePosition(e),b=(a.pageX||0*(a.clientX+f("html").get(0).scrollLeft))-h.x,c=(a.pageY||0*(a.clientY+f("html").get(0).scrollTop))-h.y,{"x":b-g.width/2,"y":c-g.width/2}},g.mousedown=function(a){i.dragging||(f(i).bind("mousemove",g.mousemove).bind("mouseup",g.mouseup),i.dragging=!0);var b=g.widgetCoords(a);return g.circleDrag=2*Math.max(Math.abs(b.x),Math.abs(b.y))>g.square,g.mousemove(a),!1},g.mousemove=function(a){var b,c,d,e=g.widgetCoords(a);return g.circleDrag?(b=Math.atan2(e.x,-e.y)/6.28,0>b&&(b+=1),g.setHSL([b,g.hsl[1],g.hsl[2]])):(c=Math.max(0,Math.min(1,-(e.x/g.square)+.5)),d=Math.max(0,Math.min(1,-(e.y/g.square)+.5)),g.setHSL([g.hsl[0],c,d])),!1},g.mouseup=function(){f(i).unbind("mousemove",g.mousemove).unbind("mouseup",g.mouseup),i.dragging=!1},g.updateDisplay=function(){var a,b=6.28*g.hsl[0];f(".h-marker",d).css({"left":Math.round(Math.sin(b)*g.radius+g.width/2)+"px","top":Math.round(-Math.cos(b)*g.radius+g.width/2)+"px"}),f(".sl-marker",d).css({"left":Math.round(g.square*(.5-g.hsl[1])+g.width/2)+"px","top":Math.round(g.square*(.5-g.hsl[2])+g.width/2)+"px"}),f("."+Be,d).css("backgroundColor",g.pack(g.HSLToRGB([g.hsl[0],1,.5]))),"object"==typeof g.callback?(f(g.callback).css({"backgroundColor":g.color,"color":g.hsl[2]>.5?"#000":"#fff"}),f(g.callback).each(function(){return a=this,a.value&&a.value!==g.color&&(a.value=g.color),this})):"function"==typeof g.callback&&g.callback.call(g,g.color)},g.absolutePosition=function(a){var b,c={"x":a.offsetLeft,"y":a.offsetTop};return a.offsetParent&&(b=g.absolutePosition(a.offsetParent),c.x+=b.x,c.y+=b.y),c},g.pack=function(a){var b,c,d=Math.round(255*a[0]);return b=Math.round(255*a[1]),c=Math.round(255*a[2]),"#"+(16>d?"0":"")+d.toString(16)+(16>b?"0":"")+b.toString(16)+(16>c?"0":"")+c.toString(16)},g.unpack=function(a){return 7===a.length?[j("0x"+a.substring(1,3))/255,j("0x"+a.substring(3,5))/255,j("0x"+a.substring(5,7))/255]:4===a.length?[j("0x"+a.substring(1,2))/15,j("0x"+a.substring(2,3))/15,j("0x"+a.substring(3,4))/15]:void 0},g.HSLToRGB=function(a){var b,c,d,e,f,g=this;return d=a[0],e=a[1],f=a[2],c=.5>=f?f*(e+1):f+e-f*e,b=2*f-c,[g.hueToRGB(b,c,d+.33333),g.hueToRGB(b,c,d),g.hueToRGB(b,c,d-.33333)]},g.hueToRGB=function(a,b,c){return c=0>c?c+1:c>1?c-1:c,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(.66666-c)*6:a},g.RGBToHSL=function(a){var b,c,d,e,f,g,h,i,j;return h=a[0],i=a[1],j=a[2],b=Math.min(h,Math.min(i,j)),c=Math.max(h,Math.max(i,j)),d=c-b,g=(b+c)/2,f=0,g>0&&1>g&&(f=d/(.5>g?2*g:2-2*g)),e=0,d>0&&(c===h&&c!==i&&(e+=(i-j)/d),c===i&&c!==j&&(e+=2+(j-h)/d),c===j&&c!==h&&(e+=4+(h-i)/d),e/=6),[e,f,g]},f("*",d).mousedown(g.mousedown),g.setColor(c||"#000000"),b&&g.linkTo(b)}return a}();b._wijeditorcolorcanvas=Fe}(a.editor||(a.editor={}));a.editor}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._setOption=function(b,d){var e=this.options,f=c("."+e.wijCSS.wijratingResetButton,this.ratingElement[0]),g=c("."+e.wijCSS.wijratingStarContainer,this.ratingElement[0]),h=c("."+e.wijCSS.wijratingNormalStar,this.ratingElement[0]);if(c.isPlainObject(e[b])){switch(b){case"resetButton":"undefined"!=typeof d.disabled&&d.disabled!==e[b].disabled&&(d.disabled?(f.hide(),f.attr("aria-hidden",!0)):e.disabled||(f.show(),f.attr("aria-hidden",!1))),"undefined"!=typeof d.hint&&d.hint!==e[b].hint&&(null===d.hint?f.attr("title",""):f.attr("title",d.hint)),d.position&&d.position.length&&d.position!==e[b].position&&("rightOrBottom"===d.position?f.parent().append(f):f.parent().prepend(f)),"undefined"!=typeof d.customizedClass&&d.customizedClass!==e[b].customizedClass&&(e[b].customizedClass.length&&f.removeClass(e[b].customizedClass),d.customizedClass.length&&f.addClass(d.customizedClass));break;case"hint":"undefined"!=typeof d.disabled&&d.disabled!==e[b].disabled&&(d.disabled?h.removeAttr("title"):this._resetHint(e.hint.content)),"undefined"!=typeof d.content&&d.content!==e[b].content&&(e[b].disabled||this._resetHint(d.content));break;case"icons":"undefined"!=typeof d.iconsClass&&(e[b].iconsClass&&e[b].iconsClass.length&&this._removeCustomizedIconsClass(e[b].iconsClass),this._addCustomizedIconsClass(d.iconsClass,e.split)),"undefined"!=typeof d.hoverIconsClass&&e[b].hoverIconsClass&&e[b].hoverIconsClass.length&&this._removeCustomizedIconsClass(e[b].hoverIconsClass),"undefined"!=typeof d.ratedIconsClass&&(e[b].ratedIconsClass&&e[b].ratedIconsClass.length&&this._removeCustomizedIconsClass(e[b].ratedIconsClass),this._resetValue(e.value,e.ratingMode,d.ratedIconsClass))}c.extend(!0,e[b],d)}else{if(d===e[b])return;switch(b){case"disabled":d?(this._unbindLiveEvents(),f.hide(),f.attr("aria-hidden",!0)):(this._bindLiveEvents(),e.resetButton.disabled||(f.show(),f.attr("aria-hidden",!1)));break;case"count":this._createStars(e.split,d,g);break;case"split":this._createStars(d,e.count,g);break;case"totalValue":this._resetTotalValue(d);break;case"orientation":"vertical"===d?this.ratingElement.addClass(e.wijCSS.wijvRating):this.ratingElement.removeClass(e.wijCSS.wijvRating),e.split>1&&(e[b]=d,this._createStars(e.split,e.count,g));break;case"direction":e[b]=d,this._createStars(e.split,e.count,g);break;case"ratingMode":this._resetValue(e.value,d,e.icons.ratedIconsClass);break;case"value":if(e.min&&d<e.min)return;if(e.max&&d>e.max)return;this._resetValue(d,e.ratingMode,e.icons.ratedIconsClass);break;case"iconWidth":e[b]=d,this._createStars(e.split,e.count,g);break;case"iconHeight":e[b]=d,this._createStars(e.split,e.count,g)}a.prototype._setOption.call(this,b,d)}},b.prototype._create=function(){var b,d=this.options;if(this.element.is("select"))this._parseSelect(),this.element.hide(),b=c("<div></div>"),this.element.after(b);else{if(!this.element.is("div"))return;this.element.children("input[type='radio']").length>0?(this._parseRadio(),this.element.hide(),b=c("<div></div>"),this.element.after(b)):b=this.element}this.ratingElement=b,this._createRating(),d.disabled||this._bindLiveEvents(),a.prototype._create.call(this)},b.prototype.destroy=function(){var b=this.options;this._unbindLiveEvents(),this.element!==this.ratingElement?(this.ratingElement.remove(),this.element.show()):this.element.removeClass(b.wijCSS.widget).removeClass(b.wijCSS.wijrating).removeClass(b.wijCSS.wijvRating).empty(),a.prototype.destroy.call(this)},b.prototype._unbindLiveEvents=function(){var a=this.options;this.ratingElement.off(".wijrating","."+a.wijCSS.wijratingNormalStar).off(".wijrating","."+a.wijCSS.wijratingResetButton)},b.prototype._bindLiveEvents=function(){var a,b=this,d=b.options,e="."+d.wijCSS.wijratingNormalStar,f="."+d.wijCSS.wijratingResetButton,g={"element":b.ratingElement,"mouseover":function(f){var g=c(f.target),h=c(e,b.ratingElement[0]);g.is(e)&&(h.removeClass(d.wijCSS.wijratingHoverStar),g.addClass(d.wijCSS.wijratingHoverStar),"continuous"===d.ratingMode&&("reversed"===d.direction?g.parent().nextAll().children().addClass(d.wijCSS.wijratingHoverStar):g.parent().prevAll().children().addClass(d.wijCSS.wijratingHoverStar)),b._addCustomizedHoverIconsClass(d.icons.hoverIconsClass,d.split,g),a={"value":parseFloat(g.html()),"target":g},b._trigger("hover",f,a))},"mouseout":function(a){var f=c(a.target),g=c(e,b.ratingElement[0]);f.is(e)&&(g.removeClass(d.wijCSS.wijratingHoverStar),b._removeCustomizedIconsClass(d.icons.hoverIconsClass))},"click":function(f){var g,h=c(f.target),i=parseFloat(h.html()),j=c(e,b.ratingElement[0]),k={"duration":500,"easing":null,"delay":250,"animated":null},l=c.wijmo.wijrating.animations;if(c.extend(!0,k,d.animation),g=k.animated,h.is(e)&&!(d.max&&i>d.max||d.min&&i<d.min)){if(a={"oldValue":d.value,"newValue":i,"target":h},b._trigger("rating",f,a)===!1)return!1;d.value=i,b._resetValue(i,d.ratingMode,d.icons.ratedIconsClass),j.removeClass(d.wijCSS.wijratingHoverStar),b._removeCustomizedIconsClass(d.icons.hoverIconsClass),a={"value":i,"target":h},g?l&&l[g]?l[g](d,j,function(){b._trigger("rated",f,a)}):c.effects&&(c.effects[g]||c.effects.effect&&c.effects.effect[g])?b._playJqueryAnimation(k,j,function(){c.browser.msie&&parseInt(c.browser.version)<9&&j.css("filter",""),b._trigger("rated",f,a)}):b._trigger("rated",f,a):b._trigger("rated",f,a)}}},h={"element":b.ratingElement,"mouseover":function(a){var b=c(a.target);b=b.closest("."+d.wijCSS.wijratingResetButton),b.addClass(d.wijCSS.wijratingHoverResetButton).addClass(d.wijCSS.stateHover),d.resetButton.customizedHoverClass&&d.resetButton.customizedHoverClass.length&&b.addClass(d.resetButton.customizedHoverClass)},"mouseout":function(a){var b=c(a.target);b=b.closest("."+d.wijCSS.wijratingResetButton),b.removeClass(d.wijCSS.wijratingHoverResetButton).removeClass(d.wijCSS.stateHover),d.resetButton.customizedHoverClass&&d.resetButton.customizedHoverClass.length&&b.removeClass(d.resetButton.customizedHoverClass)},"click":function(d){var e=c(d.target);b._setOption("value",0),a={"target":e},b._trigger("reset",d,a)}};this.ratingElement.on("mouseover.wijrating",e,c.proxy(g.mouseover,g)).on("mouseout.wijrating",e,c.proxy(g.mouseout,g)).on("click.wijrating",e,c.proxy(g.click,g)).on("mouseover.wijrating",f,c.proxy(h.mouseover,h)).on("mouseout.wijrating",f,c.proxy(h.mouseout,h)).on("click.wijrating",f,c.proxy(h.click,h))},b.prototype._createRating=function(){var a,b,d,e=this.ratingElement,f=this.options;e.addClass(f.wijCSS.wijrating).addClass(f.wijCSS.widget),"vertical"===f.orientation&&e.addClass(f.wijCSS.wijvRating),a=c("<div></div>").addClass(f.wijCSS.wijratingResetButton).addClass(f.wijCSS.cornerAll).addClass(f.wijCSS.stateDefault),f.resetButton.customizedClass&&f.resetButton.customizedClass.length&&a.addClass(f.resetButton.customizedClass),a.appendTo(e),a.attr("role","button").attr("aria-label","reset").attr("aria-hidden",!1),f.resetButton.hint&&f.resetButton.hint.length&&a.attr("title",f.resetButton.hint),(f.resetButton.disabled||f.disabled)&&(a.hide(),a.attr("aria-hidden",!0)),b=c("<span></span>"),b.addClass(f.wijCSS.icon).addClass(f.wijCSS.iconClose),a.append(b),d=c("<div></div>"),d.attr("role","radiogroup").addClass(f.wijCSS.wijratingStarContainer),"leftOrTop"===f.resetButton.position?d.appendTo(e):d.prependTo(e),this._createStars(f.split,f.count,d)},b.prototype._createStars=function(a,b,d){var e,f,g,h,i,j=this.options,k=j.hint,l=0,m=0,n=0,o=Math.ceil(j.iconWidth/a),p=Math.ceil(j.iconHeight/a),q=j.icons.ratedIconsClass,r=q&&q.length;for(d.empty(),m;b*a>m;m++,n++)g=Math.round((m+1)*j.totalValue*100/b/a)/100,l=Math.round((m+2)*j.totalValue*100/b/a)/100,n===a&&(n=0),f=c("<div></div>"),f.attr("role","radio").attr("aria-checked",!1),"vertical"===j.orientation?f.width(j.iconWidth).height(p):f.width(o).height(j.iconHeight),f.addClass(j.wijCSS.wijratingStar),e=c("<div>"+g+"</div>"),e.addClass(j.wijCSS.wijratingNormalStar).width(j.iconWidth).height(j.iconHeight),f.attr("aria-label",g),n>0&&"normal"===j.direction?"vertical"===j.orientation?e.css({"margin-top":"-"+n*p+"px"}):e.css({"margin-left":"-"+n*o+"px"}):a-1>n&&"reversed"===j.direction&&("vertical"===j.orientation?e.css({"margin-top":"-"+(a-1-n)*p+"px"}):e.css({"margin-left":"-"+(a-1-n)*o+"px"})),k.disabled||(k.content&&k.content.length?m<=k.content.length&&(e.attr("title",k.content[m]),f.attr("aria-label",k.content[m])):e.attr("title",g)),r&&("string"==typeof q?i=q:c.isArray(q)&&(h=Math.floor(m/a),q.length>h&&(i=q[h]))),g===j.value||l>j.value&&g<j.value&&"single"===j.ratingMode?(e.addClass(j.wijCSS.wijratingRatedStar),r&&e.addClass(i),f.attr("aria-checked",!0)):g<j.value&&"continuous"===j.ratingMode&&(e.addClass(j.wijCSS.wijratingRatedStar),r&&e.addClass(i)),e.appendTo(f),"reversed"===j.direction?f.prependTo(d):f.appendTo(d);this._addCustomizedIconsClass(j.icons.iconsClass,a)},b.prototype._resetValue=function(a,b,d){var e,f=this.options,g=c("."+f.wijCSS.wijratingNormalStar,this.ratingElement[0]),h=b||f.ratingMode,i=d&&d.length,j=0;c.each(g,function(b,k){var l,m=c(k),n=parseFloat(m.html());l=b<g.length-1?parseFloat(c(g[b+1]).html()):"normal"===f.direction?f.totalValue+1:-1,m.removeClass(f.wijCSS.wijratingRatedStar),m.parent().attr("aria-checked",!1),i&&("string"==typeof d?(m.removeClass(d),e=d):c.isArray(d)&&(c.each(d,function(a,b){m.removeClass(b)}),j="reversed"===f.direction?Math.floor((g.length-1-b)/f.split):Math.floor(b/f.split),d.length>j&&(e=d[j]))),n===a||l>a&&a>n&&"single"===h?(m.addClass(f.wijCSS.wijratingRatedStar),i&&m.addClass(e),m.parent().attr("aria-checked",!0)):"continuous"===h&&a>n&&(m.addClass(f.wijCSS.wijratingRatedStar),i&&m.addClass(e))})},b.prototype._resetTotalValue=function(a){var b=this.options,d=b.hint,e=c("."+b.wijCSS.wijratingNormalStar,this.ratingElement[0]),f=e.length;c.each(e,function(e,g){var h=c(g),i=Math.round((e+1)*a*100/f)/100,j=parseFloat(h.html());j===b.value&&(b.value=i),h.html(i.toString()),d&&d.length&&d.length>=e&&d[e]&&d[e].length?h.attr("title",d[e]):h.attr("title",i)})},b.prototype._resetHint=function(a){var b=this.options,d=c("."+b.wijCSS.wijratingNormalStar,this.ratingElement[0]);c.each(d,function(b,d){var e=c(d),f=parseFloat(e.html());a&&a.length&&a.length>=b&&a[b]&&a[b].length?e.attr("title",a[b]):e.attr("title",f)})},b.prototype._clearIntentTimer=function(){this.intentTimers&&this.intentTimers.length&&c.each(this.intentTimers,function(a,b){b&&(window.clearTimeout(b),b=null)}),this.intentTimers=[]},b.prototype._playJqueryAnimation=function(a,b,d){var e=this,f=this,g=f.options,h={"easing":a.easing},i=a.animated;f._clearIntentTimer(),c.each(b,function(j,k){var l,m=Math.floor(j/g.split)*a.delay;l=window.setTimeout(function(){c(k).hide(i,h,a.duration,function(){j===b.length-1&&c.each(b,function(j,k){var l,m=Math.floor(j/g.split)*a.delay;l=window.setTimeout(function(){c(k).show(i,h,a.duration,function(){j===b.length-1&&d&&c.isFunction(d)&&d.call(e)})},m),f.intentTimers.push(l)})})},m),f.intentTimers.push(l)})},b.prototype._addCustomizedIconsClass=function(a,b){var d,e=this,f=e.options,g=0,h=0;a&&a.length&&(d=c("."+f.wijCSS.wijratingNormalStar,e.ratingElement[0]),c.each(d,function(d,f){if(g===b&&(g=0,h++),"string"==typeof a)c(f).addClass(a);else if(c.isArray(a)){var i=a.length;i>h&&("reversed"===e.options.direction?c(f).addClass(a[i-h-1]):c(f).addClass(a[h]))}g++}))},b.prototype._addCustomizedHoverIconsClass=function(a,b,d){var e,f=this.options,g=f.direction,h=f.ratingMode,i=c("."+f.wijCSS.wijratingNormalStar,this.ratingElement[0]),j=i.index(d),k=0;if(a&&a.length)if("string"==typeof a)d.addClass(a),"single"!==h&&("reversed"===g?d.parent().nextAll().children().addClass(a):d.parent().prevAll().children().addClass(a));else if(c.isArray(a))if("single"===h)e="reversed"===g?i.length-1-j:j,k=Math.floor(e/b),a.length>k&&d.addClass(a[k]);else if("reversed"===g)for(e=i.length-1;e>=j;e--)k=Math.floor((i.length-1-e)/b),a.length>k&&c(i[e]).addClass(a[k]);else for(e=0;j>=e;e++)k=Math.floor(e/b),a.length>k&&c(i[e]).addClass(a[k])},b.prototype._removeCustomizedIconsClass=function(a){var b=this.options,d=c("."+b.wijCSS.wijratingNormalStar,this.ratingElement[0]);a&&a.length&&("string"==typeof a?d.removeClass(a):c.isArray(a)&&c.each(a,function(a,b){d.removeClass(b)}))},b.prototype._parseSelect=function(){var a=this.options,b=[],d=c("option",this.element);d.length&&(a.count=d.length,a.totalValue=d.length,c.each(d,function(d,e){var f=c(e);b.push(f.html()),f.is(":selected")&&(a.value=d+1)}),a.hint.content=b)},b.prototype._parseRadio=function(){var a=this,b=a.options,d=[],e=c("input[type='radio']",a.element);e.length&&(b.count=e.length,b.totalValue=e.length,c.each(e,function(e,f){var g,h=c(f),i=h.attr("id");i&&i.length>0?(g=c("label[for='"+i+"']",a.element),g.length?d.push(g.html()):d.push("")):d.push(""),h.is(":checked")&&(b.value=e+1)}),b.hint.content=d)},b}(a.wijmoWidget);b.wijrating=d;var e=function(){function a(){this.wijCSS={"wijrating":"wijmo-wijrating","wijratingStarContainer":"wijmo-wijrating-starcontainer","wijratingResetButton":"wijmo-wijrating-reset","wijratingHoverResetButton":"wijmo-wijrating-resethover","wijratingStar":"wijmo-wijrating-star","wijratingNormalStar":"wijmo-wijrating-normal","wijratingHoverStar":"wijmo-wijrating-hover","wijratingRatedStar":"wijmo-wijrating-rated","wijvRating":"wijmo-wijrating-vertical"},this.wijMobileCSS={"iconClose":"ui-icon-delete"},this.disabled=!1,this.count=5,this.split=1,this.totalValue=5,this.value=0,this.min=null,this.max=null,this.resetButton={"disabled":!1,"hint":"cancel this rating!","position":"leftOrTop","customizedClass":"","customizedHoverClass":""},this.hint={"disabled":!1,"content":null},this.orientation="horizontal",this.direction="normal",this.ratingMode="continuous",this.icons={"iconsClass":null,"hoverIconsClass":null,"ratedIconsClass":null},this.iconWidth=16,this.iconHeight=16,this.animation=null,this.rating=null,this.rated=null,this.reset=null,this.hover=null}return a}();d.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new e),c.wijmo.registerWidget("wijrating",d.prototype),c.mobile&&(c.mobile.selectmenu.initSelector=c.mobile.selectmenu.initSelector+":not( :jqmData(role='wijrating') )"),c.extend(c.wijmo.wijrating,{"animations":{"scroll":function(a,b,d){var e=a,f=d,g=250,h=500,i="linear",j=250,k=jQuery.makeArray(b);k.reverse(),c.each(k,function(a,d){var k,l,m=Math.floor(a/e.split)*j,n={"width":0};k=window.setTimeout(function(){c(d).animate(n,g,i,function(){window.clearTimeout(k),a===b.length-1&&(l=window.setTimeout(function(){c.each(b,function(a,d){var h,k=Math.floor(a/e.split)*j,l={"width":e.iconWidth};h=window.setTimeout(function(){c(d).animate(l,g,i,function(){window.clearTimeout(h),a===b.length-1&&f&&c.isFunction(f)&&f.call()})},k)}),window.clearTimeout(l)},h))})},m)}),d&&c.isFunction(d)&&d.call()}}})}(a.rating||(a.rating={}));a.rating}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){var c=function(a){function c(){a.apply(this,arguments)}return __extends(c,a),c.prototype._create=function(){var b=this;b._handleChartStyles(),a.prototype._create.call(this),b.chartElement.addClass(b.options.wijCSS.scatter)},c.prototype.destroy=function(){var b=this;b.chartElement.removeClass(b.options.wijCSS.scatter),a.prototype.destroy.call(this)},c.prototype.getScatter=function(a,b){var c,d,e,f,g=this,h=g.chartElement.data("fields");if(h&&h.chartElements){if(e=h.chartElements.scatters,e&&e.length){if(d=e.length,0>a||a>=d)return c;if(f=e[a],"undefined"==typeof b)return f;if(d=f.length,f&&d)return 0>b||b>=d?c:f[b]}return c}},c.prototype._paintLegendIcon=function(b,c,d,e,f,g,h,i,j,k){var l,m,n=this,o=(Math.min(d,e),j.markerType);return j.isTrendline?a.prototype._paintLegendIcon.call(this,b,c,d,e,f,g,h,i,j,k):(l=j.markerStyle,l=$.extend({"fill":f.stroke,"stroke":f.stroke,"opacity":1},l),o||(o="circle"),m=n.canvas.paintMarker(o,b+d/2,c+e/2,3),$(m.node).data("legendIndex",g).data("index",h),n.legendIcons.push(m),m.attr(l),$.wijraphael.addClass($(m.node),i),j.visible===!1&&($(k.node).data("dotOpacity",m.attr("opacity")||1),m.attr("opacity",.3)),m)},c.prototype._paintLegend=function(){var b=this,c=b.options;[].concat(c.seriesList),c.seriesStyles;$.extend(!0,c,{"legend":{"size":{"width":20,"height":10}}}),a.prototype._paintLegend.call(this)},c.prototype._showSerieEles=function(a){return a.isTrendline?void b.TrendlineRender.showSerieEles(a):void $.each(a,function(a,b){b.show(),b.label&&b.label.show(),$(b.element).data("wijchartDataObj")&&($(b.element).data("wijchartDataObj").visible=!0)})},c.prototype._hideSerieEles=function(a){return a.isTrendline?void b.TrendlineRender.hideSerieEles(a):void $.each(a,function(a,b){b.hide(),b.label&&b.label.hide(),$(b.element).data("wijchartDataObj")&&($(b.element).data("wijchartDataObj").visible=!1)})},c.prototype._indicatorLineShowing=function(b){a.prototype._indicatorLineShowing.call(this,b),$.each(b,function(a,b){b.dot&&(b.dot.attr(b.hoverStyle),b.dot.scale(1.5,1.5))})},c.prototype._removeIndicatorStyles=function(a){$.each(a,function(a,b){b.dot&&(b.dot.attr(b.style),b.dot.scale(1,1))})},c.prototype._paintTooltip=function(){var b=this,c=b.chartElement,d=c.data("fields");a.prototype._paintTooltip.call(this),b.tooltip&&d&&d.chartElements&&d.chartElements.tooltipTars&&(b.tooltip.setTargets(d.chartElements.tooltipTars),b.tooltip.setOptions({"mouseTrailing":!1}))},c.prototype._getTooltipText=function(a,b){var c=$(b).data("wijchartDataObj"),d={"data":c,"label":c.label,"x":c.x,"y":c.y,"type":c.markerType,"target":b,"fmt":a};return $.proxy(a,d)()},c.prototype._onBeforeTooltipShowing=function(b){var c,d,e=this,f=b.options,g=e.options.hint.style,h=b.target;h&&($.browser.msie&&parseInt($.browser.version)<9?(c=$(h).data().wijchartDataObj,d=c.style,f.style.stroke=g.stroke||d.stroke||d.fill||"#ffffff"):f.style.stroke=g.stroke||h.getAttribute("stroke")||h.getAttribute("fill")||"#ffffff",
h.attrs={"stroke":f.style.stroke}),a.prototype._onBeforeTooltipShowing.call(this,b)},c.prototype._clearChartElement=function(){var a=this,b=a.chartElement.data("fields");a._stopAnimation(),a.headerEles.length&&($.each(a.headerEles,function(a,b){b.wijRemove(),b=null}),a.headerEles=[]),a.footerEles.length&&($.each(a.footerEles,function(a,b){b.wijRemove(),b=null}),a.footerEles=[]),a.legendEles.length&&($.each(a.legendEles,function(a,b){b.wijRemove(),b=null}),a.legendEles=[]),a.legends.length&&($.each(a.legends,function(a,b){b.wijRemove(),b=null}),a.legends=[]),a.legendIcons.length&&($.each(a.legendIcons,function(a,b){b.wijRemove(),b=null}),a.legendIcons=[]),a.legendDots.length&&($.each(a.legendDots,function(a,b){b=null}),a.legendDots=[]),a.axisEles.length&&($.each(a.axisEles,function(a,b){b.wijRemove(),b=null}),a.axisEles=[]),a.chartLabelEles.length&&($.each(a.chartLabelEles,function(a,b){b.wijRemove(),b=null}),a.chartLabelEles=[]),b&&b.chartElements&&($.each(b.chartElements,function(a,c){c.length&&$.each(c,function(a,b){null!==b[0]&&(b.remove&&b.remove(),c[a]=null)}),b.chartElements[a]=null}),b.chartElements={},$(b.clipRect.element).stop().remove(),b.render.destroy(),b.clipRect.destroy()),a.dataPoints=null,a.pointXs=null,a.canvas.clear(),a.innerState={}},c.prototype._paintPlotArea=function(){var a=this,b=a.options;this.scatterRender=new f(this.chartElement,{"bounds":a.canvasBounds,"widgetName":a.widgetName,"canvas":a.canvas,"tooltip":a.tooltip,"axis":b.axis,"animation":b.animation,"seriesTransition":b.seriesTransition,"seriesList":b.seriesList,"seriesStyles":b.seriesStyles,"seriesHoverStyles":b.seriesHoverStyles,"hint":b.hint,"disabled":b.disabled,"isXTime":a.axisInfo.x.isTime,"isYTime":a.axisInfo.y[0].isTime,"zoomOnHover":b.zoomOnHover,"mouseDown":$.proxy(a._mouseDown,a),"mouseUp":$.proxy(a._mouseUp,a),"mouseOver":$.proxy(a._mouseOver,a),"mouseOut":$.proxy(a._mouseOut,a),"mouseMove":$.proxy(a._mouseMove,a),"click":$.proxy(a._click,a),"showChartLabels":b.showChartLabels,"chartLabelStyle":b.chartLabelStyle,"chartLabelFormatString":b.chartLabelFormatString,"culture":a._getCulture(),"wijCSS":b.wijCSS,"widget":this}),this.scatterRender.render()},c.prototype._stopAnimation=function(){this.scatterRender&&this.scatterRender.stopAnimation()},c}(b.wijchartcore);b.wijscatterchart=c,c.prototype.widgetEventPrefix="wijscatterchart";var d=function(a){function b(){a.apply(this,arguments),this.scatter="wijmo-wijscatterchart",this.scatterElement="wijscatterchart"}return __extends(b,a),b}(b.wijchartcore_css);b.wijscatterchart_css=d;var e=function(b){function c(){b.apply(this,arguments),this.initSelector=":jqmData(role='wijscatterchart')",this.wijCSS=new a.chart.wijscatterchart_css,this.animation={"enabled":!0,"duration":2e3,"easing":">"},this.showChartLabels=!1,this.seriesTransition={"enabled":!0,"duration":2e3,"easing":">"},this.zoomOnHover=!0,this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(c,b),c}(b.wijchartcore_options);c.prototype.options=$.extend(!0,{},b.wijchartcore.prototype.options,new e),$.wijmo.registerWidget("wijscatterchart",c.prototype);var f=function(){function a(a,b){this.scatters=[],this.chartLabels=[],this.tooltipTars=[],this.seriesEles=[],this.paths=[],this.aniPathsAttr=[],this.fieldsAniPathAttr=[],this.element=a,this.options=b,this._init()}return a.prototype._init=function(){var a=this.element,c=this.options,d=c.bounds,e=c.axis.x.min,f=c.axis.y.min,g=c.axis.x.max,h=c.axis.y.max;this.width=d.endX-d.startX,this.height=d.endY-d.startY,this.plotInfo={"minX":e,"minY":f,"maxX":g,"maxY":h,"width":this.width,"height":this.height,"kx":this.width/(g-e),"ky":this.height/(h-f)},this.fields=a.data("fields")||{},a.find("svg").length>0?this.chartRender=b.render.createRender(a.find("svg").get(0),a.width(),a.height()):this.chartRender=b.render.createRender(a.children(":first").addClass("vmlcontainer").get(0),a.width(),a.height()),this.clipRect=this.chartRender.clipRect(0,0,0,a.height()),this.g=this.chartRender.g(),this.g.clip(this.clipRect),this.g.add(),this.fields.render=this.chartRender,this.fields.clipRect=this.clipRect,this.animationSet=this.options.canvas.set()},a.prototype.bindLiveEvents=function(){var a=$.isFunction,c=this.options,d=c.wijCSS,e=this.element,f=c.widgetName,g=c.mouseDown,h=c.mouseUp,i=c.mouseOver,j=c.mouseOut,k=c.mouseMove,l=c.click,m=c.zoomOnHover,n=c.seriesHoverStyles,o=c.seriesStyles,p=c.disabled,q="";$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(q="wij"),$("."+d.scatterElement,e[0]).on(q+"mousedown."+f,function(b){if(!p&&a(g)){var c=$(b.target).data("wijchartDataObj");c||(c=$(b.target.parentNode).data("wijchartDataObj")),g.call(e,b,c)}}).on(q+"mouseup."+f,function(b){if(!p&&a(h)){var c=$(b.target).data("wijchartDataObj");c||(c=$(b.target.parentNode).data("wijchartDataObj")),h.call(e,b,c)}}).on(q+"mouseover."+f,function(b){if(!p){var c,d,f,g=$(b.target).data("wijchartDataObj");g||(g=$(b.target.parentNode).data("wijchartDataObj")),f=g.dot,m&&(c=g.seriesIndex,f.attr&&(d=$.extend(!0,{},n[c]),f.attr(d)),document.createElementNS?f.scale(1.5,1.5):f.attr("stroke-width",5)),a(i)&&i.call(e,b,g)}}).on(q+"mouseout."+f,function(b){if(!p){var c,d,f=$(b.target).data("wijchartDataObj");f||(f=$(b.target.parentNode).data("wijchartDataObj")),d=f.dot,m&&(c=f.seriesIndex,d.attr&&d.attr($.extend(!0,{},o[c]))),document.createElementNS&&d.scale(1,1),a(j)&&j.call(e,b,f)}}).on(q+"mousemove."+f,function(b){if(!p&&a(k)){var c=$(b.target).data("wijchartDataObj");c||(c=$(b.target.parentNode).data("wijchartDataObj")),k.call(e,b,c)}}).on(q+"click."+f,function(b){if(!p&&a(l)){var c=$(b.target).data("wijchartDataObj");c||(c=$(b.target.parentNode).data("wijchartDataObj")),l.call(e,b,c)}}),b.TrendlineRender.bindLiveEvents(e,f,g,h,i,j,k,l,p,d,!1)},a.prototype.unbindLiveEvents=function(){var a=this.options,c=a.widgetName,d=a.wijCSS;$("."+d.scatterElement,this.element).off(c).off("."+c),b.TrendlineRender.unbindLiveEvents(this.element,c,d)},a.prototype.paintDefaultChartLabel=function(a,b,c){var d,e,f=this.options,g=($.extend(!0,{},f.textStyle,f.chartLabelStyle),f.chartLabelFormatString);return d=f.isYTime?Globalize.format(c,"f",f.culture):$.round(c,2),g&&g.length&&(d=Globalize.format(d,g,f.culture)),e=this.chartRender.text(a,b,d)},a.prototype.paintScatters=function(){var a=this,c=a.options,d=c.seriesList,e=c.seriesStyles,f=c.seriesHoverStyles,g=c.isXTime,h=c.isYTime,i=c.bounds,j=this.plotInfo,k=c.wijCSS,l=c.showChartLabels,m=c.chartLabelStyle,n=c.widget,o=[];$.each(d,function(c,d){var p,q,r=d.data,s=d.markerWidth||5,t=e[c],u=f[c],v=r.x,w=r.y,x=[],y=[];return d.isTrendline?(b.TrendlineRender.renderSingleTrendLine(d,e[c],f[c],a.options.axis,void 0,a.fieldsAniPathAttr,a.options.animation,a.options.seriesTransition,c,i,a.options.canvas,a.paths,o,a.animationSet,a.aniPathsAttr,k,a.seriesEles),!0):(d=$.extend(!0,{"visible":!0,"markerType":"circle"},d),p=d.markerType,"exclude"===d.display?!0:(!t.fill&&t.stroke&&(t.fill=t.stroke),void 0===v?!0:($.each(w,function(b,e){var f,o,r,z=v[b],A=0,B=0,C={};return g&&(z=$.toOADate(z)),h&&(e=$.toOADate(e)),"undefined"==typeof z?!1:(f=isNaN(z)||"string"==typeof z?b:z,A=i.startX+(f-j.minX)*j.kx,B=i.endY-(e-j.minY)*j.ky,t.opacity&&(t["fill-opacity"]=t.opacity,t["stroke-opacity"]=t.opacity,delete t.opacity),"cross"===p&&void 0!==t["stroke-width"]&&0===t["stroke-width"]&&(t["stroke-width"]=1),o=a.chartRender.symbol(p,A,B,s),o.attr(t),o.add(a.g),o.attr({"class":k.canvasObject+" "+k.scatterElement}),C=$.extend(!1,{"dot":o,"x":v[b],"y":w[b],"seriesIndex":c,"index":b,"markerType":p,"type":"scatter","style":t,"hoverStyle":u,"visible":!0},d),l&&(r=a.paintDefaultChartLabel(A,B-6,w[b]),r.add(a.g),m=$.extend({"font-size":"10px","fill":"#888","font-family":"Arial"},m),r.attr(m),o.label=r,a.chartLabels.push(r)),n.dataPoints=n.dataPoints||{},n.pointXs=n.pointXs||[],q=$.round(A,2),n.dataPoints[q.toString()]||(n.dataPoints[q.toString()]=[],n.pointXs.push(q)),n.dataPoints[q.toString()].push(C),$(o.element).data("wijchartDataObj",C),x.push(o),a.tooltipTars.push($.extend({},o,{"node":o.element})),y.push(o),void(d.visible===!1&&o.hide()))}),a.scatters.push(x),void a.seriesEles.push(y))))})},a.prototype.playAnimation=function(){var a=this,c=a.options,d=c.animation,e=a.element,f=e.css("background-color"),g={"txx":c.widget.extremeValue.txx,"txn":c.widget.extremeValue.txn,"tyx":c.widget.extremeValue.y[0].tyx,"tyn":c.widget.extremeValue.y[0].tyn};d.enabled?("transparent"===f&&(f="white"),a.clipRect.getCSS?$(a.clipRect.members[0].element).animate({"width":e.width()},{"duration":d.duration,"step":function(b){a.clipRect.width=b;var c=a.clipRect.getCSS();$(this).css(c)}}):$(a.clipRect.element).animate({"width":e.width()},{"duration":d.duration,"step":function(b){a.clipRect.attr("width",b)}}),a.paths&&a.paths.length&&b.TrendlineRender.playAnimation(d.duration,d.easing,c.seriesTransition,a.animationSet,c.bounds,a.paths,a.fieldsAniPathAttr,null,c.axis,g)):a.clipRect.getCSS?($(a.clipRect.members[0].element).css({"width":e.width()}),a.clipRect.width=e.width(),$(a.clipRect.members[0].element).css(a.clipRect.getCSS())):($(a.clipRect.element).css({"width":e.width()}),a.clipRect.attr("width",e.width()))},a.prototype.stopAnimation=function(){this.clipRect.members&&this.clipRect.members.length>0?$(this.clipRect.members[0].element).stop(!0):$(this.clipRect.element).stop(!0)},a.prototype.render=function(){this.paintScatters(),this.playAnimation(),this.unbindLiveEvents(),this.bindLiveEvents(),this.chartEles={"animationSet":this.animationSet,"tooltipTars":this.tooltipTars,"scatters":this.scatters,"labels":this.chartLabels,"trendLines":this.paths},this.fields.chartElements||(this.fields.chartElements={}),this.fields.seriesEles=this.seriesEles,$.extend(!0,this.fields.chartElements,this.chartEles),this.element.data("fields",this.fields)},a}();b.ScatterChartRender=f}(a.chart||(a.chart={}));a.chart}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){!function(a){function b(a){return"string"==typeof a}function c(a){return"number"==typeof a}function d(a){return void 0!==a&&null!==a}function e(a,c,e){var f,g="setAttribute";return b(c)?d(e)?a[g](c,e):a&&a.getAttribute&&(f=a.getAttribute(c)):d(c)&&$.isPlainObject(c)&&$.each(c,function(b,c){a[g](b,c)}),f}function f(a,b){l&&b&&void 0!==b.opacity&&(b.filter="alpha(opacity="+100*b.opacity+")"),$.extend(a.style,b)}function g(a,b,c){var d=j.createElement(a);return b&&$.extend(d,b),c&&f(d,c),d}function h(a){$.each(a,function(b,c){a[b]&&a[b].destroy&&a[b].destroy(),delete a[b]})}function i(a,b,c){return o?new F(a,b,c):new H(a,b,c)}var j=document,k=$.each,l=$.browser.msie,m=8===j.documentMode,n="http://www.w3.org/2000/svg",o=!!j.createElementNS&&!!j.createElementNS(n,"svg").createSVGRect,p=0,q="div",r="absolute",s="hidden",t="scatterchart-",u="visible",v="visibility",w="px",x="none",y="M",z="L",A=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,B=/^(\d{1,3})\-(?:((?:[a-zA-Z]+)|(?:\#[0-9a-fA-F]{6})|(?:\#[0-9a-fA-F]{3}))\-)(?:(?:((?:(?:[a-zA-Z]+)|(?:\#[0-9a-fA-F]{6})|(?:\#[0-9a-fA-F]{3}))(?:\:\d{1,3})?)\-)?)*((?:[a-zA-Z]+)|(?:\#[0-9a-fA-F]{6})|(?:\#[0-9a-fA-F]{3}))$/,C=function(){function a(){}return a.prototype.attr=function(a,b){},a.prototype.scale=function(a,b){},a.prototype.symbolAttr=function(a){},a.prototype.clip=function(a){},a.prototype.crisp=function(a,b,c,d,e){},a.prototype.css=function(a){},a.prototype.getBBox=function(){},a.prototype.show=function(){},a.prototype.hide=function(){},a.prototype.add=function(a){},a.prototype.destroy=function(){},a.prototype.empty=function(){},a.prototype.remove=function(){},a}();a.ChartElement=C;var D=function(){function a(a,b,c){}return a.prototype.destroy=function(){},a.prototype.createElement=function(a){},a.prototype.path=function(a){return this._element},a.prototype.circle=function(a,b,c){return this._element},a.prototype.rect=function(a,b,c,d,e,f){return this._element},a.prototype.setSize=function(a,b){},a.prototype.g=function(a){return this._element},a.prototype.text=function(a,b,c){return this._element},a.prototype.symbol=function(a,b,c,d,e){return this._element},a.prototype.clipRect=function(a,b,c,d){return this._element},a}();a.ChartRender=D;var E=function(a){function c(){a.apply(this,arguments)}return __extends(c,a),c.prototype.init=function(a,b){this.element=j.createElementNS(n,b),this.renderer=a},c.prototype.attr=function(a,c){var f,g,h,i=this.element,j=this.renderer,k=i.nodeName,l=this;if(void 0!==a)return b(a)&&d(c)&&(f=a,a={},a[f]=c),b(a)?(f=a,"circle"===k&&(f={"x":"cx","y":"cy"}[f]||f),l=e(i,f)||this[f]||0,"d"!==f&&f!==v&&(l=parseFloat(l))):a&&$.each(a,function(b,c){h=!1,g=a[b],"d"===b?(g&&g.join&&(g=g.join(" ")),/(NaN| {2}|^$)/.test(g)&&(g="M 0 0"),this.d=g):"fill"===b?g=j._color(g,i,b):"transform"===b?g=j._transform(a[b],i):"circle"!==k||"x"!==b&&"y"!==b||(b={"x":"cx","y":"cy"}[b]||b),jQuery.browser.safari&&"stroke-width"===b&&0===g&&(g=1e-6),h||e(i,b,g),i.attrs=i.attrs||{},i.attrs[b]=g}),l},c.prototype.scale=function(a,b){var c=this,d=c.getBBox(),e=-(d.x+d.width/2)/2,f=-(d.y+d.height/2)/2;1===a&&(e=0),1===b&&(f=0),c.attr("transform","matrix("+a+",0,0, "+b+","+e+","+f+")")},c.prototype.symbolAttr=function(a){var b=this;k(["x","y","r","start","end","width","height","innerR"],function(c,d){a[d]?b[d]=a[d]:b[d]=b[d]}),b.attr({"d":b.renderer.symbols[b.symbolName](Math.round(2*b.x)/2,Math.round(2*b.y)/2,b.r,{"start":b.start,"end":b.end,"width":b.width,"height":b.height,"innerR":b.innerR})})},c.prototype.clip=function(a){return this.attr("clip-path","url("+this.renderer.url+"#"+a.id+")")},c.prototype.crisp=function(a,b,c,d,e){var f,g,h=this,i={},j={};a=a||h.strokeWidth||0,g=a%2/2,j.x=Math.floor(b||h.x||0)+g,j.y=Math.floor(c||h.y||0)+g,j.width=Math.floor((d||h.width||0)-2*g),j.height=Math.floor((e||h.height||0)-2*g),j.strokeWidth=a;for(f in j)h[f]!==j[f]&&(h[f]=i[f]=j[f]);return i},c.prototype.css=function(a){var b=this,c=b.element,d=a&&a.width&&"text"===c.nodeName,e="",g=function(a,b){return"-"+b.toLowerCase()};return a&&a.color&&(a.fill=a.color),a=$.extend(b.styles,a),b.styles=a,l&&!o?(d&&delete a.width,f(b.element,a)):($.each(a,function(b,c){e+=c.replace(/([A-Z])/g,g)+":"+a[c]+";"}),b.attr({"style":e})),b},c.prototype.getBBox=function(){var a,b,c,d=this.rotation,e=d*Math.PI*2/360;try{a=$.extend({},this.element.getBBox())}catch(f){a={"width":0,"height":0}}return b=a.width,c=a.height,d&&(a.width=Math.abs(c*Math.sin(e))+Math.abs(b*Math.cos(e)),a.height=Math.abs(c*Math.cos(e))+Math.abs(b*Math.sin(e))),a},c.prototype.show=function(){return this.attr({"visibility":u})},c.prototype.hide=function(){return this.attr({"visibility":s})},c.prototype.add=function(a){var b,c,f,g=this,h=g.renderer,i=a||h,j=i.element||h.box,k=j.childNodes,l=g.element,m=e(l,"zIndex");if(a&&g.htmlNode&&(a.htmlNode||(a.htmlNode=[]),a.htmlNode.push(g)),m&&(i.handleZ=!0,m=parseInt(m,10)),i.handleZ)for(f=0;f<k.length;f++)if(b=k[f],c=e(b,"zIndex"),b!==l&&(parseInt(c,10)>m||!d(m)&&d(c)))return j.insertBefore(l,b),g;return j.appendChild(l),g.added=!0,g},c.prototype._safeRemoveChild=function(a){var b=a.parentNode;b&&b.removeChild(a)},c.prototype.destroy=function(){var a,b=this,c=b.element||{},d=b.shadows,e=b.box;if(c.onclick=c.onmouseout=c.onmouseover=c.onmousemove=null,b.clipPath&&(b.clipPath=b.clipPath.destroy()),b.stops){for(a=0;a<b.stops.length;a++)b.stops[a]=b.stops[a].destroy();b.stops=null}return b._safeRemoveChild(c),d&&k(d,function(a){b._safeRemoveChild(a)}),e&&e.destroy(),$.each(b,function(a,c){delete b[a]}),null},c.prototype.empty=function(){for(var a=this.element,b=a.childNodes,c=b.length;c--;)a.removeChild(b[c]),$(b[c]).remove()},c.prototype.remove=function(){var a=this.element,b=a.parentNode;b.removeChild(a),$(a).remove()},c}(C),F=function(a){function b(b,c,d){a.call(this,b,c,d),this.gradientCache={},this.init(b,c,d)}return __extends(b,a),b.prototype.init=function(a,c,d){var e,f=this,g=j.location;this.symbols=b._symbols,this.Element=E,$(a).is("svg")?(f.box=a,e=new f.Element,e.element=a,e.render=f,f.defs=$("defs",a).get(0),f.gradients={}):(e=f.createElement("svg").attr({"xmlns":n,"version":"1.1"}),a.appendChild(e.element),f.box=e.element,f.boxWrapper=e,f.defs=this.createElement("defs").add(),f.gradients={},f.setSize(c,d)),f.url=l?"":g.href.replace(/#.*?$/,"")},b.prototype.destroy=function(){var a=this;return a.box=null,h(a.gradients||{}),a.gradients=null,null},b.prototype.createElement=function(a){var b=new this.Element;return b.init(this,a),b},b.prototype.path=function(a){var b=this.createElement("path");return b.attr({"d":a,"fill":x}),b},b.prototype.circle=function(a,b,c){var d=$.isPlainObject(a)?a:{"x":a,"y":b,"r":c},e=this.createElement("circle");return e.attr(d),e},b.prototype.rect=function(a,b,c,d,e,f){$.isPlainObject(a)&&(b=a.y,c=a.width,d=a.height,e=a.r,f=a.strokeWidth,a=a.x);var g=this.createElement("rect");return g.attr({"rx":e,"ry":e,"fill":x}),g.attr(g.crisp(f,a,b,Math.max(c,0),Math.max(d,0))),g},b.prototype.setSize=function(a,b){var c=this;c.width=a,c.height=b,c.boxWrapper.attr({"width":a,"height":b})},b.prototype.g=function(a){var b=this.createElement("g");return d(a)&&b.attr({"class":t+a}),b},b.prototype.text=function(a,b,c){$.isPlainObject(a)&&(b=a.y,c=a.text,a=a.x);var d=this.createElement("text");return d.attr({"x":a,"y":b,"text-anchor":"middle"}),d.element.textContent=c,d},b.prototype.symbol=function(a,b,c,d,e){var f,g=this,h=g.symbols[a],i=h&&h(Math.round(b),Math.round(c),d,e);return i?(f=g.path(i),$.extend(f,{"symbolName":a,"x":b,"y":c,"r":d}),e&&$.extend(f,e)):f=g.circle(b,c,d),f},b.prototype.clipRect=function(a,b,c,d){var e,f=t+p++,g=this.createElement("clipPath");return g.attr({"id":f}),$(this.defs).append(g.element),e=this.rect(a,b,c,d,0).add(g),e.id=f,e.clipPath=g,e},b.prototype._parsegradientcolor=function(a){var b,c,d,e,f,g,h,i,j=this,k=[];if(j.gradientCache[a])return j.gradientCache[a];for(d=0,g=a.length;g>d;d++){if(b={},c=a[d].match(/^([^:]*):?([\d\.]*)/),b.color=Raphael.getRGB(c[1]),b.color.error)return null;b.color=b.color.hex,c[2]&&(b.offset=c[2]+"%"),k.push(b)}for(d=1,g=k.length-1;g>d;d++)if(!k[d].offset){for(e=parseFloat(k[d-1].offset||0),f=0,h=d+1;g>h;h++)if(k[h].offset){f=k[h].offset;break}for(f||(f=100,h=g),f=parseFloat(f),i=(f-e)/(h-d+1);h>d;d++)e+=i,k[d].offset=e+"%"}return j.gradientCache[a]=k,k},b.prototype._color=function(a,b,c){var d,f,g,h,i,j,k,l,m,n,o,q,r,s=this,u="color",v=.5,w=.5,x=s.gradients,y=a;if(B.test(a)?u="linear":a=a.replace(A,function(a,b,c){if(u="radial",b&&c){v=parseFloat(b),w=parseFloat(c);var d=w>.5?1:-1;Math.pow(v-.5,2)+Math.pow(w-.5,2)>.25&&(w=Math.sqrt(.25-Math.pow(v-.5,2))*d+.5)&&.5!==w&&(w=parseFloat(w.toFixed(5))-1e-5*d)}return""}),"linear"===u||"radial"===u){if(f=a.split(/\s*\-\s*/),"linear"===u){if(q=f.shift(),q=-parseFloat(q),isNaN(q))return a;l=[0,0,Math.cos(Raphael.rad(q)),Math.sin(Raphael.rad(q))],m=1/(Math.max(Math.abs(l[2]),Math.abs(l[3]))||1),l[2]*=m,l[3]*=m,l[2]<0&&(l[0]=-l[2],l[2]=0),l[3]<0&&(l[1]=-l[3],l[3]=0),g=l[0],h=l[1],i=l[2],j=l[3]}return x[y]?o=e(x[y].element,"id"):(r=this._parsegradientcolor(f),$.each(r,function(a,b){b.offset=b.offset?b.offset:a?"100%":"0%"}),o=t+p++,d=s.createElement(u+"Gradient"),"radial"===u?d.attr({"id":o,"fx":v,"fy":w}):d.attr({"id":o,"x1":g,"y1":h,"x2":i,"y2":j}),$(this.defs).append(d.element),d.stops=[],$.each(r,function(a,b){var c;k=b.color,n=1,c=s.createElement("stop"),c.attr({"offset":b.offset,"stop-color":k,"stop-opacity":n}).add(d),d.stops.push(c)}),x[y]=d),"url(#"+o+")"}return b.removeAttribute(c+"-opacity"),a},b.prototype._transform=function(a,b){var c=Raphael.parseTransformString(a),d=Raphael.matrix(1,0,0,1,0,0);if(c)for(var e=0,f=c.length;f>e;e++){var g,h,i,j,k,l,m=c[e],n=m.length,o=String(m[0]).toLowerCase(),p=m[0]!=o;p&&(g=d.invert()),"t"==o&&3==n?p?(h=g.x(0,0),i=g.y(0,0),j=g.x(m[1],m[2]),k=g.y(m[1],m[2]),d.translate(j-h,k-i)):d.translate(parseFloat(m[1]),parseFloat(m[2])):"r"==o?2==n?(l=l||b.getBBox(),d.rotate(parseFloat(m[1]),l.x+l.width/2,l.y+l.height/2)):4==n&&(p?(j=g.x(m[2],m[3]),k=g.y(m[2],m[3]),d.rotate(parseFloat(m[1]),j,k)):d.rotate(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]))):"s"==o?2==n||3==n?(l=l||b.getBBox(),d.scale(parseFloat(m[1]),parseFloat(m[n-1]),l.x+l.width/2,l.y+l.height/2)):5==n&&(p?(j=g.x(m[3],m[4]),k=g.y(m[3],m[4]),d.scale(parseFloat(m[1]),parseFloat(m[2]),j,k)):d.scale(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]),parseFloat(m[4]))):"m"==o&&7==n&&d.add(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]),parseFloat(m[4]),parseFloat(m[5]),parseFloat(m[6]),d)}return d.toString()},b._symbols={"box":function(a,b,c){var d=.707*c;return[y,a-d,b-d,z,a+d,b-d,a+d,b+d,a-d,b+d,"Z"]},"tri":function(a,b,c){return[y,a,b-1.33*c,z,a+c,b+.67*c,a-c,b+.67*c,"Z"]},"invertedTri":function(a,b,c){return[y,a,b+1.33*c,z,a-c,b-.67*c,a+c,b-.67*c,"Z"]},"diamond":function(a,b,c){return[y,a,b-c,z,a+c,b,a,b+c,a-c,b,"Z"]},"cross":function(a,b,c){var d=.707*c;return[y,a-d,b-d,z,a+d,b+d,y,a-d,b+d,z,a+d,b-d]},"arc":function(a,b,c,d){var e=d.start,f=d.end-1e-6,g=d.innerR,h=Math.cos(e),i=Math.sin(e),j=Math.cos(f),k=Math.sin(f),l=d.end-e<Math.PI?0:1;return[y,a+c*h,b+c*i,"A",c,c,0,l,1,a+c*j,b+c*k,z,a+g*j,b+g*k,"A",g,g,0,l,0,a+g*h,b+g*i,"Z"]}},b}(D),G=function(a){function h(){a.apply(this,arguments)}return __extends(h,a),h.prototype.init=function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ",r,";"];("shape"===b||b===q)&&d.push("left:0;top:0;width:10px;height:10px;"),m&&d.push("visibility: ",b===q?s:u),c.push(' style="',d.join(""),'"/>'),b&&(c=b===q||"span"===b||"img"===b?c.join(""):a.prepVML(c),this.element=g(c)),this.renderer=a},h.prototype.add=function(a){var b=this,c=b.renderer,d=b.element,e=c.box,g=(a&&a.inverted,a?a.element||a:e);return m&&g.gVis===s&&f(d,{"visibility":s}),g.appendChild(d),b.added=!0,b},h.prototype.attr=function(a,g){var h,i,j,k,l,n,o,p=this,r=p.element||{},s=r.style,t=r.nodeName,y=p.symbolName,z=p.renderer,A=p.shadows,B=p;return void 0===a?B:(b(a)&&d(g)&&(h=a,a={},a[h]=g),b(a)?(h=a,B="strokeWidth"===h||"stroke-width"===h?p.strokeweight:p[h]):a&&$.each(a,function(b,d){if(i=d,n=!1,y&&/^(x|y|r|start|end|width|height|innerR)/.test(b))l||(p.symbolAttr(a),l=!0),n=!0;else if("d"===b){for(i=i||[],p.d=i.join(" "),j=i.length,o=[];j--;)c(i[j])?o[j]=Math.round(10*i[j])-5:"Z"===i[j]?o[j]="x":o[j]=i[j];if(i=o.join(" ")||"x",r.path=i,A)for(j=A.length;j--;)A[j].path=i;n=!0}else if("zIndex"===b||b===v){if(m&&b===v&&t===q){for(r.gVis=i,k=r.childNodes,j=k.length;j--;)f(k[j],{"visibility":i});i===u&&(i=null)}i&&(s[b]=i),n=!0}else"class"===b?r.className=i:"stroke"===b?b="strokecolor":"stroke-width"===b||"strokeWidth"===b?(r.stroked=i?!0:!1,b="strokeweight",p[b]=i,c(i)&&(i+=w)):"fill"===b&&("SPAN"===t?s.color=i:(r.filled=i!==x?!0:!1,i=z.color(i,r,b),b="fillcolor"));n||("opacity"===b&&(b="fill-opacity"),m?r[b]=i:e(r,b,i)),r.attrs=r.attrs||{},r.attrs[b]=i}),B)},h.prototype.scale=function(a,b){var c=this,d=c.attr("stroke-width")||0;c.css({"filter":"progid:DXImageTransform.Microsoft.Matrix(M11="+a+",, M12=0, M21=0, M22="+b+", Dx=0, Dy=0, sizingmethod='auto expand')"}).attr("stroke-width",d)},h.prototype.clip=function(a){var b=this,c=a.members;return c.push(b),b.css(a.getCSS(b.inverted))},h.prototype.css=function(a){var b=this,c=b.element,d=a&&"SPAN"===c.tagName&&a.width;return d&&(delete a.width,b.textWidth=d),b.styles=$.extend(b.styles,a),f(b.element,a),b},h.prototype.destroy=function(){var a=this;return a.destroyClip&&a.destroyClip(),E.prototype.destroy.apply(a)},h.prototype.empty=function(){for(var a,b=this.element,c=b.childNodes,d=c.length;d--;)a=c[d],a.parentNode.removeChild(a),$(a).remove()},h.prototype.getBBox=function(){var a=this,b=a.element,c=a.bBox;return c||("text"===b.nodeName&&(b.style.position=r),c=a.bBox={"x":b.offsetLeft,"y":b.offsetTop,"width":b.offsetWidth,"height":b.offsetHeight}),c},h}(E),H=function(a){function b(){a.apply(this,arguments),this.isIE8=$.browser.msie&&8===parseInt($.browser.version)}return __extends(b,a),b.prototype.init=function(a,c,d){var e,f=this;this.Element=G,this.symbols=b._symbols,$(a).hasClass("vmlcontainer")?(f.box=a,e=new this.Element,e.element=a,e.render=this,f.boxWrapper=e):(e=f.createElement(q),a.appendChild(e.element),f.box=e.element,f.boxWrapper=e,f.setSize(c,d)),j.namespaces.v||(j.namespaces.add("v","urn:schemas-microsoft-com:vml"),j.createStyleSheet().cssText="v\\:fill, v\\:path, v\\:shape, v\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},b.prototype.clipRect=function(a,b,c,d){var e=this.createElement();return $.extend(e,{"members":[],"left":a,"top":b,"width":c,"height":d,"getCSS":function(a){var b=this,c=b.top,d=b.left,e=d+b.width,f=c+b.height,g={"clip":"rect("+Math.round(a?d:c)+"px,"+Math.round(a?f:e)+"px,"+Math.round(a?e:f)+"px,"+Math.round(a?c:d)+"px)"};return!a&&m&&$.extend(g,{"width":e+w,"height":f+w}),g},"updateClipping":function(){k(e.members,function(a,b){b.css(e.getCSS(b.inverted))})}}),e},b.prototype.color=function(a,b,c){var d,e,f,h,i,j,k,l,m,n=this,o="color",p=[],q=0;return B.test(a)?o="linear":a=a.replace(A,function(a,b,c){return o="radial",b&&c&&(b=parseFloat(b),c=parseFloat(c),Math.pow(b-.5,2)+Math.pow(c-.5,2)>.25&&(c=Math.sqrt(.25-Math.pow(b-.5,2))*(2*(c>.5?1:0)-1)+.5),l=b+" "+c),""}),"linear"!==o&&"radial"!==o?(k=b.getElementsByTagName(c),k.length&&(k[0].opacity=1),a):(e=a.split(/\s*\-\s*/),"linear"===o&&(q=e.shift(),q=-parseFloat(q.toString())),m=n._parsegradientcolor(e),$.each(m,function(a,b){b.offset=b.offset?b.offset:a?"100%":"0%",p.push(b.offset+" "+b.color),f=b.color,a?i=f:h=f}),d="radial"===o?['<fill colors="',p.join(),'" angle="0"','" focusposition="',l,'" color="',h,'" color2="',i,'" focussize="0 0"',' type="gradientTitle" focus="100%" method="none" />']:['<fill colors="',p.join(),'" angle="',q.toString(),'" type="gradient" focus="100%" method="sigma" />'],j=g(n.prepVML(d)),$(b).append(j),void 0)},b.prototype.prepVML=function(a){var b="display:inline-block;behavior:url(#default#VML);",c=this.isIE8;return a=a.join(""),c?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=-1===a.indexOf('style="')?a.replace("/>",' style="'+b+'" />'):a.replace('style="','style="'+b)):a=a.replace("<","<v:"),a},b.prototype.path=function(a){var b=this.createElement("shape");return b.attr({"coordsize":"100 100","d":a}),b},b.prototype.g=function(a){var b,c;return a&&(c={"className":t+a,"class":t+a}),b=this.createElement(q).attr(c)},b.prototype.text=function(a,b,c){var d,e,f=this.createElement("span"),g=f.element;return g.innerHTML=c,$(g).appendTo("body"),d=$(g).width(),e=$(g).height(),a-=d/2,b-=e/2,f.x=a,f.y=b,$(g).css({"position":"absolute","white-space":"nowrap","font-family":"Arial","font-size":"10","left":a+"px","top":b+"px"}),f},b._symbols=$.extend({},F._symbols,{"arc":function(a,b,c,d){var e=d.start,f=d.end,g=Math.cos(e),h=Math.sin(e),i=Math.cos(f),j=Math.sin(f),k=d.innerR,l=.07/c,m=k&&.1/k||0;return f-e===0?["x"]:(2*Math.PI-f+e<l?i=-l:m>f-e&&(i=Math.cos(e+m)),["wa",a-c,b-c,a+c,b+c,a+c*g,b+c*h,a+c*i,b+c*j,"at",a-k,b-k,a+k,b+k,a+k*i,b+k*j,a+k*g,b+k*h,"x","e"])},"circle":function(a,b,c){return["wa",a-c,b-c,a+c,b+c,a+c,b,a+c,b,"e"]},"rect":function(a,b,c,e){if(!d(e))return[];var f=e.width,g=e.height,h=a+f,i=b+g;return c=Math.min(c,f,g),[y,a+c,b,z,h-c,b,"wa",h-2*c,b,h,b+2*c,h-c,b,h,b+c,z,h,i-c,"wa",h-2*c,i-2*c,h,i,h,i-c,h-c,i,z,a+c,i,"wa",a,i-2*c,a+2*c,i,a+c,i,a,i-c,z,a,b+c,"wa",a,b,a+2*c,b+2*c,a,b+c,a+c,b,"x","e"]}}),b}(F);a.createRender=i}(a.render||(a.render={}));a.render}(a.chart||(a.chart={}));a.chart}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){var c=1e4,d=function(){function a(a){this.bubMax=0,this.bubMin=0,this.bubDiff=0,this.y1Array=[],this.y1ValueGroup={},this.bubbleRadius={},this.chartDatas=[];var b=a.options;this.widget=a,this.seriesList=b.seriesList,this.maximumSize=b.maximumSize||20,this.minimumSize=b.minimumSize||5,this.sizingMethod=b.sizingMethod||"diameter",this._init(),this._calculateMaxMin()}return a.prototype._init=function(){var a,b,c,d=this;$.each(this.seriesList,function(e,f){b=f.markers||{},c=b.type||"circle",a=f.data,a&&a.y1&&a.x&&a.y&&$.each(a.y1,function(b,e){d.y1Array.push(e),d.y1ValueGroup[c]||(d.y1ValueGroup[c]=[]),d.y1ValueGroup[c].push(e),d.chartDatas.push({"x":a.x[b],"y":a.y[b],"y1":a.y1[b]})})})},a.prototype._calculateMaxMin=function(){this.bubMax=Math.max.apply(null,this.y1Array),this.bubMin=Math.min.apply(null,this.y1Array),this.bubDiff=this.bubMax-this.bubMin},a.prototype._calculateRadius=function(a,b,c,d,e,f,g,h){var i,j=a,k=b-c,l=d.endX-d.startX,m=d.endY-d.startY;return 0>j&&(j=0),0===f?j=1:j/=e,j=this._calculateRadiusByArea(j,g,h),j*=k,j+=c,i=Math.min(l,m),j*=i/200},a.prototype._calculateRadiusByArea=function(a,b,c){var d=a;if("area"===b)switch(c){case"circle":d=Math.sqrt(d/Math.PI);break;case"tri":case"invertedTri":d=Math.sqrt(d/(3*Math.sin(Math.PI/6)*Math.cos(Math.PI/6)));break;case"box":d=Math.sqrt(d/2);break;case"diamond":case"cross":d=Math.sqrt(d/2);break;default:d=Math.sqrt(4*d/Math.PI)}return d},a.prototype.calculateRadius=function(){var a=this,b=this.widget.canvasBounds;this.bubbleRadius={},$.each(this.y1ValueGroup,function(c,d){$.each(d,function(d,e){a.bubbleRadius[e]=a._calculateRadius(e,a.maximumSize,a.minimumSize,b,a.bubMax,a.bubDiff,a.sizingMethod,c)})})},a.prototype.getAdjust=function(a,b){var c,d,e,f=this,g=this.widget.canvasBounds,h=a.max,i=a.min,j=[],k=[],l=0,m=b.unitMinor,n=b.origin,o=g.endX-g.startX,p=g.endY-g.startY,q=[],r={},s=!1;return this.calculateRadius(),$.each(this.chartDatas,function(a,b){var c=b.x;isNaN(c)&&!f.widget._isDate(c)&&-1===$.inArray(c,q)&&q.push(c)}),$.each(q,function(a,b){r[b]=a}),$.each(this.chartDatas,function(b,c){var d=c.x,g=c.y,m=c.y1,n=f.bubbleRadius[m];f.widget._isDate(d)?d=$.toOADate(d):isNaN(d)&&(d=r[d]),f.widget._isDate(g)&&(g=$.toOADate(g)),"x"===a.id?(e=o,l=n*(h-i)/e,j.push(d-l),k.push(d+l)):(e=p,l=n*(h-i)/e,j.push(g-l),k.push(g+l))}),c=Math.max.apply(null,k),d=Math.min.apply(null,j),c>h&&(h+=Math.ceil((c-h)/m)*m,s=!0),i>d&&(i-=Math.ceil((i-d)/m)*m,s=!0),null!==n&&void 0!==n&&(i>n?i=n:n>h&&(h=n)),s?(a.max=h,a.min=i,this.widget._calculateMajorMinor(b,a),this.getAdjust(a,b)):{"max":h,"min":i}},a.prototype.dispose=function(){this.y1Array=[],this.bubbleRadius=null,this.y1ValueGroup=null},a}();b.BubbleAxisAdjust=d;var e=function(a){function e(){a.apply(this,arguments)}return __extends(e,a),e.prototype._setOption=function(b,d){var e=this,f=e.options;"minimumSize"===b||"minimumSize"===b?(isNaN(d)||0>d?d=0:d>c&&(d=c),f[b]=d,e.redraw()):"chartLabel"===b?($.extend(f.chartLabel,d),e.redraw()):(("showChartLabels"===b||"chartLabelStyle"===b)&&(f[b]=d,e._setLabelOption()),a.prototype._setOption.call(this,b,d)),"seriesList"===b&&(e.indexs=null)},e.prototype._create=function(){var b=this,c=b.options;b._getDefFill();this._handleChartStyles(),b._setLabelOption(),a.prototype._create.call(this),b.chartElement.addClass(c.wijCSS.bubbleChart)},e.prototype._paintChartArea=function(){this.bubbleAxisAdjust&&this.bubbleAxisAdjust.dispose(),this.bubbleAxisAdjust=new d(this),a.prototype._paintChartArea.call(this)},e.prototype._bindSeriesData=function(b,c,d){var e=c.data,f=e.y1;a.prototype._bindSeriesData.call(this,b,c,d),f&&f.bind&&(e.y1=this._getBindData(b,f.bind))},e.prototype._setLabelOption=function(){var a=this.options;a.showChartLabels!==!0&&a.chartLabel.visible===!0&&(a.chartLabel.visible=!1),!$.isPlainObject(a.chartLabel.style)&&$.isPlainObject(a.chartLabelStyle)&&(a.chartLabel.style=a.chartLabelStyle)},e.prototype._clearChartElement=function(){var b=this,c=b.options,d=b.chartElement.data("fields");a.prototype._clearChartElement.call(this),d&&d.bubbleInfos&&$.each(d.bubbleInfos,function(a,b){
b.bubble&&b.bubble.wijRemove(),b.dcl&&b.dcl.wijRemove(),b.symbol&&b.symbol.wijRemove()}),d&&d.bubbles&&b._destroyRaphaelArray(d.bubbles),b.element.removeData("plotInfos"),c.seriesTransition.enabled||d&&d.bubblesAnimationInfos&&(d.bubblesAnimationInfos=null)},e.prototype.destroy=function(){var b=this;b.chartElement.removeClass(b.options.wijCSS.bubbleChart+" ui-helper-reset"),b._destroyEles(),this.bubbleAxisAdjust&&(this.bubbleAxisAdjust.dispose(),this.bubbleAxisAdjust=null),a.prototype.destroy.call(this)},e.prototype.getBubble=function(a){return this.chartElement.data("fields").bubbles[a]},e.prototype.redraw=function(b){a.prototype.redraw.call(this,b)},e.prototype._destroyEles=function(){var a=this,b=a.element,c=b.data("fields");c.bubbleInfos&&$.each(c.bubbleInfos,function(b,c){a._removeEle(c.bubble),a._removeEle(c.dcl),a._removeEle(c.symbol),c=null}),b.removeData("fields")},e.prototype._removeEle=function(a){a&&(a.node&&$(a.node).removeData(),a.wijRemove(),a=null)},e.prototype._paintPlotArea=function(){var a,b=this,c=this.chartElement,d=b.options,e=d.seriesList,f=e.length,g=[].concat(d.seriesStyles.slice(0,f)),i=[].concat(d.seriesHoverStyles.slice(0,f)),j=b.canvasBounds,k=b.axisInfo.x,l=b.axisInfo.y[0];0!==f&&(this.bubbleAxisAdjust.calculateRadius(),this.bubbleChartRender=new h(this.chartElement,{"seriesList":e,"seriesStyles":g,"seriesHoverStyles":i,"canvas":b.canvas,"bounds":j,"xAxisInfo":k,"yAxisInfo":l,"chartLabel":d.chartLabel,"textStyle":d.textStyle,"chartLabelStyle":d.chartLabelStyle,"chartLabelFormatString":d.chartLabelFormatString,"bubbleRadius":b.bubbleAxisAdjust.bubbleRadius,"animation":d.animation,"seriesTransition":d.seriesTransition,"sizingMethod":d.sizingMethod,"minimumSize":d.minimumSize,"maximumSize":d.maximumSize,"mouseDown":$.proxy(b._mouseDown,b),"mouseUp":$.proxy(b._mouseUp,b),"mouseOver":$.proxy(b._mouseOver,b),"mouseOut":$.proxy(b._mouseOut,b),"mouseMove":$.proxy(b._mouseMove,b),"click":$.proxy(b._click,b),"disabled":d.disabled,"culture":b._getCulture(),"wijCSS":d.wijCSS,"shadow":d.shadow,"widget":this}),this.bubbleChartRender.render(),a=c.data("fields").bubbleInfos,a&&(b.tooltipbubbles=[],$.each(a,function(a,c){b.tooltipbubbles.push(c.bubble),c.dcl&&b.tooltipbubbles.push(c.dcl),c.symbol&&b.tooltipbubbles.push(c.symbol)}),b.tooltip&&b.tooltip.setTargets(b.tooltipbubbles)))},e.prototype._paintLegendIcon=function(b,c,d,e,f,g,h,i,j,k){var l,m,n,o=this,p=Math.min(d,e);return j.isTrendline?a.prototype._paintLegendIcon.call(this,b,c,d,e,f,g,h,i,j,k):(l=j.markerStyle,l=$.extend({"fill":f.fill,"stroke":f.stroke,"opacity":1},l),j.markers&&(m=j.markers.type),m||(m="circle"),n=o.canvas.paintMarker(m,b+d/2,c+e/2,p/2),$(n.node).data("legendIndex",g).data("index",h),o.legendIcons.push(n),n.attr(l),$.wijraphael.addClass($(n.node),i),n)},e.prototype._calculateParameters=function(b,c){a.prototype._calculateParameters.call(this,b,c),(c.autoMax||c.autoMin)&&this._adjust(c,b)},e.prototype._adjust=function(a,b){var c=(a.unitMinor,this),d=(a.autoMin,a.autoMax,c.canvasBounds),e={"x":d.startX,"y":d.startY},f=(d.endX-e.x,d.endY-e.y,b.max),g=b.min,h=(a.origin,this.bubbleAxisAdjust.getAdjust(b,a));f=h.max,g=h.min,(f!==b.max||g!==b.min)&&(b.min=g,b.max=f,this._calculateMajorMinor(a,b))},e.prototype._showSerieEles=function(a){return a.isTrendline?void b.TrendlineRender.showSerieEles(a):void $.each(a,function(a,b){b.bubble&&(b.bubble.show(),b.bubble.shadow&&b.bubble.shadow.show(),b.bubble.tracker&&b.bubble.tracker.show(),$(b.bubble.node).data("wijchartDataObj")&&($(b.bubble.node).data("wijchartDataObj").visible=!0)),b.dcl&&b.dcl.show(),b.symbol&&b.symbol.show()})},e.prototype._hideSerieEles=function(a){return a.isTrendline?void b.TrendlineRender.hideSerieEles(a):void $.each(a,function(a,b){b.bubble&&(b.bubble.hide(),b.bubble.shadow&&b.bubble.shadow.hide(),b.bubble.tracker&&b.bubble.tracker.hide(),$(b.bubble.node).data("wijchartDataObj")&&($(b.bubble.node).data("wijchartDataObj").visible=!1)),b.dcl&&b.dcl.hide(),b.symbol&&b.symbol.hide()})},e.prototype._indicatorLineShowing=function(b){a.prototype._indicatorLineShowing.call(this,b),$.each(b,function(a,b){b.bubble&&b.bubble.attr(b.hoverStyle)})},e.prototype._removeIndicatorStyles=function(a){$.each(a,function(a,b){b.bubble&&b.bubble.attr(b.style)})},e.prototype._parseTable=function(){if(this.element.is("table")){var a=this,b=a.element,c=a.options,d=$("caption",b),e=$("thead th",b),f=[],g=$("tbody tr",b),h=null,i=null,j=[],k=[],l=[],m=function(a){var b=$.trim(a);return isNaN(a)||(b=parseFloat(a.toString())),b};d.length&&(c.header=$.extend({"visible":!0,"text":$.trim($(d[0]).text())},c.header),d.length>1&&(c.footer=$.extend({"visibel":!0,"text":$.trim($(d[1]).text())},c.footer))),c.legend=$.extend({"visible":!0},c.legend),h=$.trim(e.eq(1).text()),g.each(function(a,b){var c=$("td",b);return c.length>=3&&(j.push(m(c.eq(0).text())),k.push(m(c.eq(1).text())),l.push(m(c.eq(2).text()))),this}),i={"label":h,"legendEntry":!0,"data":{"x":j,"y":k,"y1":l}},f.push(i),a.options.seriesList=f}},e.prototype._unbindLiveEvents=function(){var a=this;$("."+a.options.wijCSS.bubbleElement,a.chartElement[0]).off(".wijbubblechart").off("wijbubblechart"),a.tooltip&&(a.tooltip.destroy(),a.tooltip=null)},e.prototype._paintTooltip=function(){var b=this,c=b.chartElement.data("fields");a.prototype._paintTooltip.call(this),b.tooltip&&c&&c.trackers&&c.trackers.length&&(b.tooltip.setTargets(c.trackers),b.tooltip.setOptions({"relatedElement":c.trackers[0]}))},e.prototype._getTooltipText=function(a,b){var c,d,e=$(b.node);return e.data("owner")&&(e=e.data("owner")),c=e.data("wijchartDataObj"),d={"data":c,"value":c.value,"label":c.label,"total":c.total,"target":b,"fmt":a,"x":c.x,"y":c.y,"y1":c.y1},$.proxy(a,d)()},e}(b.wijchartcore);b.wijbubblechart=e,e.prototype.widgetEventPrefix="wijbubblechart";var f=function(a){function b(){a.apply(this,arguments),this.bubbleChart="wijmo-wijbubblechart",this.bubbleElement="wijbubblechart-bubble",this.bubbleTracker="bubbletracker",this.bubbleLabel="wijbubblechart-label",this.bubbleSymbol="wijbubblechart-symbol"}return __extends(b,a),b}(b.wijchartcore_css);b.wijbubblechart_css=f;var g=function(b){function c(){b.apply(this,arguments),this.initSelector=":jqmData(role='wijbubblechart')",this.wijCSS=new a.chart.wijbubblechart_css,this.minimumSize=5,this.maximumSize=20,this.sizingMethod="diameter",this.animation={"enabled":!0,"duration":1e3,"easing":">"},this.seriesTransition={"enabled":!0,"duration":400,"easing":">"},this.seriesList=[],this.seriesHoverStyles=[{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5},{"opacity":1,"stroke-width":5}],this.chartLabel={"position":"inside","compass":"north","visible":!0,"style":{},"chartLabelFormatString":""},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(c,b),c}(b.wijchartcore_options);e.prototype.options=$.extend(!0,{},b.wijchartcore.prototype.options,new g),$.wijmo.registerWidget("wijbubblechart",e.prototype);var h=function(){function a(a,b){this.element=a,this.options=b,this._init()}return a.prototype._init=function(){var a=this.options,b=a.bounds;this.fields=this.element.data("fields")||{},this.canvas=a.canvas,this.seriesList=$.arrayClone(a.seriesList),this.seriesStyles=a.seriesStyles,this.seriesHoverStyles=a.seriesHoverStyles,this.startLocation={"x":b.startX,"y":b.startY},this.width=b.endX-this.startLocation.x,this.height=b.endY-this.startLocation.y,this.seriesEles=[],this.bubbles=[],this.bubbleInfos=[],this.trackers=this.canvas.set(),this.animationSet=this.canvas.set(),this.fieldsAniPathAttr=[],this.paths=[],this.aniPathsAttr=[]},a.prototype.initAnimationState=function(a,b){var c,d=a.bubble,e=a.symbol;"circle"===d.type?d.attr({"r":1e-4,"cx":b.startX,"cy":b.endY}):(c=d.wijGetBBox(),d.transform("t"+(b.startX-c.x)+","+(b.endY-c.y)+"s0.001..."),d.shadow&&d.shadow.transform("t"+(b.startX-c.x)+","+(b.endY-c.y)+"s0.001...")),e&&e.hide()},a.prototype.playAnimation=function(){var a,c,d,e=this,f=e.options,g=f.animation,h=f.bounds,i=e.fields.bubblesAnimationInfos,j=[],k=e.fields.bubbleInfos,l=e.fields.trendLines,m=f.seriesTransition,n={"txx":f.widget.extremeValue.txx,"txn":f.widget.extremeValue.txn,"tyx":f.widget.extremeValue.y[0].tyx,"tyn":f.widget.extremeValue.y[0].tyn};(k||l)&&(g&&g.enabled?(a=g.duration||400,c=g.easing,k&&$.each(k,function(b,f){var g,k,l=f.bubble,n=l.wijGetBBox();g="circle"===l.type?{"r":l.attr("r"),"cx":l.attr("cx"),"cy":l.attr("cy")}:{"transform":l.matrix.toTransformString(),"stroke-width":l.attr("stroke-width"),"width":n.width,"x":n.x,"y":n.y},l.shadow&&l.shadow.hide(),i&&m.enabled?(k=i[b],k?("circle"===l.type?l.attr({"cx":k.cx,"cy":k.cy,"r":k.r}):(n=l.wijGetBBox(),d=k.width/n.width,g.transform=l.matrix.toTransformString(),l.transform(Raphael.format("s{0}t{1}{2}...",d,k.x-n.x,k.y-n.y)),l.shadow&&l.shadow.transform(Raphael.format("s{0}t{1}{2}...",d,k.x-n.x,k.y-n.y))),a=m.duration,c=m.easing):e.initAnimationState(f,h)):e.initAnimationState(f,h),j.push(g),l.wijAnimate(g,a,c,function(){$(f.bubble.node).data("wijchartDataObj")&&$(f.bubble.node).data("wijchartDataObj").visible&&(f.dcl&&f.dcl.show(),f.symbol&&(f.symbol.show(),f.bubble.wijAttr("opacity",.1)),l.shadow&&l.shadow.show())})}),l&&l.length&&b.TrendlineRender.playAnimation(a,c,m,e.animationSet,h,e.paths,e.fieldsAniPathAttr,null,f.widget.options.axis,n),e.fields.bubblesAnimationInfos=j):$.each(k,function(a,b){$(b.bubble.node).data("wijchartDataObj")&&$(b.bubble.node).data("wijchartDataObj").visible&&(b.dcl&&b.dcl.show(),b.symbol&&b.symbol.show())}))},a.prototype.getSymbol=function(a,b){var c;return $.each(a,function(a,d){return d.index===b?(c=d,!1):void 0}),c},a.prototype.getLabelVisible=function(a,b){var c=!0;return $.each(a,function(a,d){return b===d?(c=!1,!1):void 0}),c},a.prototype.paintMarker=function(a,b,c,d){var e;return this.canvas[a]&&(e=this.canvas[a](b,c,d)),e},a.prototype.getLabelBox=function(a){var b,c=this.canvas.text(0,0,a),d=c.wijGetBBox();return b={"width":d.width,"height":d.height},c.remove(),b},a.prototype.applyLabelCompass=function(a,b){var c=this.options.chartLabel.compass||"north",d=this.getLabelBox(b),e=a.r;switch(c){case"north":a.y-=e+d.height/2;break;case"south":a.y+=e+d.height/2;break;case"east":a.x+=e+d.width/2;break;case"west":a.x-=e+d.width/2}},a.prototype.paintDefaultChartLabel=function(a,b){var c,d=this.options,e=d.chartLabel,f=d.culture,g=$.extend(!0,{},d.textStyle,d.chartLabelStyle,e.style),h=$.round(b,2),i=""===e.chartLabelFormatString?d.chartLabelFormatString:e.chartLabelFormatString,j=this.options.widget;return i&&i.length&&(h=Globalize.format(h,i,f)),c=j._text.call(j,a.x,a.y,h).attr(g)},a.prototype._getSortedBubbleIndex=function(a){if(!a||!a.y1||!a.y1.length)return void 0;for(var b=a.y1.length,c=[],d=[],e=0;b>e;e++)c.push({"dataIndex":e,"y1":a.y1[e]});c.sort(function(a,b){return b.y1-a.y1});for(var f=0;b>f;f++)d.push(c[f].dataIndex);return d},a.prototype.paintbubble=function(a,c,d,e,f,g,h,i){var j,k,l,m,n,o=a.data,p=e.min,q=f.min,r=e.max,s=f.max,t=g/(r-p),u=h/(s-q),v=[],w=this.options,x=this,y=w.bounds,z=w.wijCSS,A=w.widget,B=w.chartLabel,C=w.bubbleRadius,D=[],E=[];if(void 0!==o.y1){if(void 0===o.x||void 0===o.y)return!0;n=x._getSortedBubbleIndex(o),$.each(n,function(g,h){var i,n,q,r,w,F,G,H,I,J=o.y1[h],K=o.x[h],L=o.y[h],M=a.markers||{},N=M.type||"circle",O=M.symbol,P=a.invisibleMarkLabels||[],Q=C[J];e.isTime?K=$.toOADate(K):isNaN(K)&&(K=h),f.isTime&&(L=$.toOADate(L)),w=y.startX+(K-p)*t,F=y.startY+(s-L)*u,O&&(G=x.getSymbol(O,h)),r=x.paintMarker(N,w,F,Q),r.attr(c),G&&(k=G.width||2*Q,l=G.height||2*Q,H=x.canvas.image(G.url,w-Q,F-Q,k,l)),x.options.shadow&&b.ChartUtil.paintShadow(r,2,null),$.wijraphael.addClass($(r.node),z.canvasObject+" "+z.bubbleElement),G&&r.attr("opacity",.1),q=$.extend(!1,{"index":h,"bubble":r,"style":c,"y1":J,"x":K,"y":L,"type":"bubble","hoverStyle":d,"visible":!0},a),G&&(q.symbol=!0,q.hoverStyle=$.extend({},d,{"opacity":.1}),$(H.node).data("wijchartDataObj",q),$.wijraphael.addClass($(H.node),z.bubbleSymbol)),$(r.node).data("wijchartDataObj",q),A.dataPoints=A.dataPoints||{},A.pointXs=A.pointXs||[],m=$.round(w,2),A.dataPoints[m.toString()]||(A.dataPoints[m.toString()]=[],A.pointXs.push(m)),A.dataPoints[m.toString()].push(q),I=r.clone(),$.browser.msie&&parseInt($.browser.version)<9?I.attr({"opacity":.01,"fill":"white","stroke-width":0,"fill-opacity":.01}):I.attr({"opacity":.01,"fill":"white","fill-opacity":.01}),$(I.node).data("owner",$(r.node)),$.wijraphael.addClass($(I.node),z.canvasObject+" "+z.bubbleElement+" "+z.bubbleTracker),r.tracker=I,D[h]=I,E[h]=r,i={"x":w,"y":F,"r":Q},B.visible&&x.getLabelVisible(P,h)&&("outside"===B.position&&x.applyLabelCompass(i,J),j=x.paintDefaultChartLabel(i,J),j.hide(),$(j.node).data("wijchartDataObj",q),$.wijraphael.addClass($(j.node),z.bubbleLabel)),n={"bubble":r,"dcl":j,"symbol":H},v[h]=n,a.visible===!1&&(r.hide(),j&&j.hide(),I.hide(),H&&H.hide())}),$.each(D,function(a,b){b&&x.trackers.push(b)}),$.each(E,function(a,b){b&&x.bubbles.push(b)}),x.fields.bubbles=x.bubbles,$.each(v,function(a,b){b&&x.bubbleInfos.push(b)}),x.fields.bubbleInfos=x.bubbleInfos,x.seriesEles.push(v)}},a.prototype.paintBubbles=function(){var a=this,c=a.options,d=c.xAxisInfo,e=c.yAxisInfo,f=c.animation,g=c.seriesTransition,h=c.wijCSS,i=[],j=c.canvas,k=c.widget.options.axis;$.each(a.seriesList,function(l,m){var n=a.seriesStyles[l],o=a.seriesHoverStyles[l];m.isTrendline?b.TrendlineRender.renderSingleTrendLine(m,n,o,k,c.hole,a.fieldsAniPathAttr,f,g,l,c.bounds,j,a.paths,i,a.animationSet,a.aniPathsAttr,h,a.seriesEles):a.paintbubble(m,n,o,d,e,a.width,a.height,a.startLocation)}),this.fields.trendLines=a.paths},a.prototype.bindLiveEvents=function(a,c,d,e,f,g,h,i){var j=this.options,k=j.wijCSS,l="",m={"mousedown":function(b){if(!i){var d,e=$(b.target);e.data("owner")&&(e=e.data("owner")),d=e.data("wijchartDataObj"),c.call(a,b,d)}},"mouseup":function(b){if(!i){var c,e=$(b.target);e.data("owner")&&(e=e.data("owner")),c=e.data("wijchartDataObj"),d.call(a,b,c)}},"mouseover":function(b){if(!i){var c,d,f=$(b.target);f.data("owner")&&(f=f.data("owner")),c=f.data("wijchartDataObj"),d=c.bubble,c.hoverStyle?(d.attr(c.hoverStyle),d.shadow&&d.shadow.attr(c.hoverStyle)):d&&d.attr({"opacity":"0.8"}),e.call(a,b,c)}},"mouseout":function(b){if(!i){var c,d,e=$(b.target);e.data("owner")&&(e=e.data("owner")),c=e.data("wijchartDataObj"),d=c.bubble,c.symbol||(c.hoverStyle?(c.hoverStyle["stroke-width"]&&!c.style["stroke-width"]&&(d.attr("stroke-width",""),d.shadow&&d.shadow.attr("stroke-width","")),d.wijAttr({"transform":""}),d.wijAttr(c.style),c.style.opacity&&(d.attr("opacity",c.style.opacity),d.shadow&&d.shadow.attr("opacity",c.style.opacity))):d&&d.attr({"opacity":"1"}),f.call(a,b,c))}},"mousemove":function(b){if(!i){var c,d=$(b.target);d.data("owner")&&(d=d.data("owner")),c=d.data("wijchartDataObj"),g.call(a,b,c)}},"click":function(b){if(!i){var c,d=$(b.target);d.data("owner")&&(d=d.data("owner")),c=d.data("wijchartDataObj"),h.call(a,b,c)}}};$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(l="wij"),$.each(["click","mouseover","mouseout","mousemove","mousedown","mouseup"],function(b,c){$("."+k.bubbleTracker,a).on(l+c+".wijbubblechart",m[c])}),b.TrendlineRender.unbindLiveEvents(a,j.widget.widgetName,k),b.TrendlineRender.bindLiveEvents(a,j.widget.widgetName,c,d,e,f,g,h,i,k,!1)},a.prototype.render=function(){var a=this.options,b=a.mouseDown,c=a.mouseUp,d=a.mouseOver,e=a.mouseOut,f=a.mouseMove,g=a.click,h=a.disabled;this.paintBubbles(),this.fields.seriesEles=this.seriesEles,this.playAnimation(),this.trackers.toFront(),this.fields.trackers=this.trackers,this.bindLiveEvents(this.element,b,c,d,e,f,g,h),this.element.data("fields",this.fields)},a}();b.BubbleChartRender=h}(a.chart||(a.chart={}));a.chart}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d="wijmo-wijcarousel-",e="wijmo-wijcarousel ",f=d+"list",g=d+"item ",h=d+"clip",i=d+"current",j=d+"horizontal-multi",k=d+"horizontal",l=d+"button",m=d+"vertical-multi",n=d+"vertical",o=d+"button-next",p=d+"button-previous",q=d+"preview",r="<a><span></span></a>",s=".wijmo-wijcarousel-pager,."+l+",."+o+",."+p,t="<div></div>",u='<li class="wijmo-wijcarousel-page"><a></a></li>',v="li.wijmo-wijcarousel-page",w=".wijmo-wijcarousel-text,.wijmo-wijcarousel-caption",x=1,y=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._handleDisabledOption=function(a,b){var d,e=this,f=e.options;e.pager&&!e.pager.is(":hidden")&&("numbers"===f.pagerType?e.pager.wijpager("option","disabled",a):c.wijmo.wijslider&&"slider"===f.pagerType&&(d=e.pager.find(".ui-slider"),d&&d.length>0&&d.wijslider("option","disabled",a))),e._applyBtnClass()},b.prototype._initStates=function(a,b){var c=this;c.count=0,c.currentIdx=a.start,c.timeout=null,c.isHorizontal="horizontal"===a.orientation,c.width=b.width()||640,c.height=b.height()||480,c.offset=0},b.prototype._set_showControlsOnHover=function(a){var b=this;b.container.unbind("mouseenter."+b.widgetName),b.container.unbind("mouseleave."+b.widgetName),a&&b.container.bind("mouseenter."+b.widgetName,function(){b.options.disabled||b._showControls()}).bind("mouseleave."+b.widgetName,function(){b.options.disabled||b._hideControls()}),b.container.find(s).stop(!0,!0)[a?"hide":"show"]()},b.prototype._create=function(){var a=this,b=a.options,d=a.element;if(window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c)),a._initStates(b,d),a._createDom(a.isHorizontal),a.list.bind("click."+a.widgetName,c.proxy(a._itemClick,a)),b.showControlsOnHover&&(a.container.bind("mouseenter."+a.widgetName,function(){a.options.disabled||a._showControls()}).bind("mouseleave."+a.widgetName,function(){a.options.disabled||a._hideControls()}),a.container.find(s).hide()),b.loadCallback&&c.isFunction(b.loadCallback)&&a._trigger("loadCallback",null,a),b.disabledState){var e=b.disabled;a.disable(),b.disabled=e}else b.auto&&a.play();b.disabled&&a.disable();try{b.display=parseFloat(b.display)}catch(f){b.display=1}a.element.is(":hidden")&&a.element.wijAddVisibilityObserver&&a.element.wijAddVisibilityObserver(function(){a.refresh(),a.element.wijRemoveVisibilityObserver&&a.element.wijRemoveVisibilityObserver()},"wijcarousel")},b.prototype._showControls=function(){this.container.find(s).stop(!0,!0).fadeIn(600,function(){c(this).css("opacity","")})},b.prototype._hideControls=function(){this.container.find(s).stop(!0,!0).fadeOut(600)},b.prototype._applyContainerStyle=function(a,b){var c,d,e=this,f=e.options,g={},h=e.list,i=0,j=0,k=a?"left":"top",l=0,m=a?"width":"height";if(c=e.itemBound[a?"w":"h"],e.count=e.list.children("li").length,i=e.count*c,e.list[m](i),e.clip[m](f.display*c),e.clip[a?"height":"width"](e.itemBound[a?"h":"w"]),f.loop){for(d=h.find(">li:first"),f.preview&&b&&(d=d.next()),l=d.data("itemIndex");l<e.currentIdx;l++)h.children("li:first").appendTo(h);if(f.preview){if(!b)for(l=0;x>l;l++)h.children("li:last").prependTo(h);j=-c*x}g[k]=j,h.css(g)}else g[k]=-c*e.currentIdx,h.css(g)},b.prototype._applyListStyle=function(){var a,b=this,c=b.options,d="horizontal"===c.orientation,e=0,f=d?"width":"height";b.itemBound=b._getItemBound(),a=b.itemBound[d?"w":"h"],e=b.count*a,b.list[f](e)},b.prototype._createButtons=function(a,b){var d,e=this,f=e.options,g=f.wijCSS.stateDisabled;c.each(["prevBtn","nextBtn"],function(h,i){var j=f[i+"Class"],k="nextBtn"===i,l=k?"next":"previous",m=k?o:p,n=k?b:a;if(j&&j.defaultClass?(g=j.disableClass||g,d=j.hoverClass,e[i]=c('<a class="'+f.wijCSS.stateDefault+'"></a>').addClass(j.defaultClass).mouseover(function(){c(this).hasAllClasses(g)||c(this).addClass(d)}).mouseout(function(){c(this).hasAllClasses(g)||c(this).removeClass(d)})):e[i]=c(e._createBtn(m,n)),e[i].bind("click."+e.widgetName,function(a){if(!e.options.disabled){var b=c(this);b.hasAllClasses(f.wijCSS.stateDisabled)||e[l].call(e)}}).appendTo(e.container),c.browser.msie&&e.clip.find("iframe").length>0){var q=e.element.children("iframe.bgiframe."+i+"Frame");0===q.length&&(q=c('<iframe class="bgiframe '+i+'Frame" frameborder="0" tabindex="-1" src="javascript: false;" style="position:absolute;top:0px;left:0px;opacity:0;" />'),q.width(e[i].outerWidth()),q.height(e[i].outerHeight()),e.container.append(q))}})},b.prototype._applyBtnClass=function(){var a=this,b=a.options,d=b.wijCSS.stateDisabled,e=b.wijCSS.stateHover;c.each(["prevBtn","nextBtn"],function(c,f){var g,h=b[f+"Class"],i=a[f];h&&(d=h.disableClass||d,e=h.hoverClass||e),g="prevBtn"===f?a.currentIdx<=0:a.currentIdx+b.display>=a.count,g&&!b.loop||b.disabled?i.removeClass(e).addClass(d):i.hasAllClasses(d)&&i.removeClass(d)})},b.prototype._applyBtnStyle=function(a){var b,d,e,f=this,g=0,h=f.options.wijCSS,i={"collision":"none","of":f.container,"my":a?"right{offset} center":"center bottom{offset}","at":a?"right center":"center bottom"},j={"collision":"none","of":f.container,"my":a?"left{offset} center":"center top{offset}","at":a?"left center":"center top"},k="inside"===f.options.buttonPosition,l=["cornerBottom","cornerTop","cornerRight","cornerLeft"],m=2*(a?1:0)+(k?1:0),n=2*(a?1:0)+(k?0:1),o=function(a,b,d,e,f){var g="";if(a.removeClass(b).addClass(d),isNaN(e)||0===e||(g=e>0?"+"+e:"-"+-e),f.my=f.my.replace(/\{offset\}/,g),a.position(f),c.browser.msie){var h=a.next("iframe.bgiframe");h.length&&(h.css("left",a.css("left")),h.css("top",a.css("top")))}};g=a?f.prevBtn.width():f.prevBtn.height(),b=k?0:g,d=h[l[m]],e=h[l[n]],o(f.nextBtn,e,d,b,i),o(f.prevBtn,d,e,-b,j),f._applyBtnClass()},b.prototype._createDom=function(a){var b,d,g,h,i=this,l=i.options,o=i.element;if(o.is("div"))i.list=o.children("ul:eq(0)"),i.container=i.element,i.list.length||(i.list=c("<ul></ul>").appendTo(i.container));else{if(!o.is("ul"))return;i.list=o,i.container=o.parent()}i.itemBound=i._getItemBound(),a?(b=l.display>1&&!l.preview?j:k,d=l.wijCSS.iconArrowRight,g=l.wijCSS.iconArrowLeft):(b=l.display>1&&!l.preview?m:n,d=l.wijCSS.iconArrowDown,g=l.wijCSS.iconArrowUp),i.list.addClass(f).addClass(l.wijCSS.helperClearFix),h=e+l.wijCSS.widget+" "+b+" "+(l.preview?q+" ":"")+(l.display>1?l.wijCSS.content+" "+l.wijCSS.cornerAll:""),i.container.addClass(h),i.container.attr("dir","ltr"),i._createItems(a),i._createClip(a),i._applyContainerStyle(a),i._createButtons(g,d),i._applyBtnStyle(a),l.preview&&i._createPreview(),l.showTimer&&i._createTimer(),l.showPager&&i._createPager(),l.showControls&&i._createControls()},b.prototype._createPreview=function(){var a,b,c,d,e=this,f=e.options,g="horizontal"===f.orientation,h=g?"left":"top",i=g?"right":"bottom";for(b=e.itemBound[g?"w":"h"],a=e.offset=Math.round(b/4),c=f.display*b+2*a,e.clip[g?"width":"height"](c),e.list.css(h,function(b,c){return parseFloat(c)+a}),e.clip.css(h,function(b,c){return-a}),e.container.css("margin-"+h,a+"px").css("margin-"+i,a+"px"),e.list.find(w).hide(),d=0;d<f.display;d++)e._getItemByIndex(e.currentIdx+d).find(w).show()},b.prototype._createItemsFromData=function(a){var b=this;c.isArray(a)&&a.length&&c.isPlainObject(a[0])&&!c.isEmptyObject(a[0])&&(b.list.empty(),c.each(a,function(a,d){var e;return c.isPlainObject(d)?(e=b._generateMarkup(d),void b.list.append(e)):!0}))},b.prototype._generateMarkup=function(a){var b,d;if(c.isPlainObject(a))return b=c("<li></li>"),"string"==typeof a.linkUrl&&a.linkUrl&&(d=c("<a>").attr("href",a.linkUrl),d.appendTo(b)),"string"==typeof a.imageUrl&&a.imageUrl&&c("<img>").attr("src",a.imageUrl).appendTo(d||b),"string"==typeof a.caption&&a.caption&&c("<span>").html(a.caption).appendTo(b),b},b.prototype._createItems=function(a){var b,d,e,f,g=this,h=g.options;if(g.list&&(g._createItemsFromData(h.data),g.list.children("li").each(function(a,b){var d=c(b);g._createItem(d,a)}),e=g.list.children("li").eq(g.currentIdx).addClass(i),h.preview&&h.display>1)){for(b=f=e,d=0;d<h.display-1;d++)f=f.next(),b=b.add(f);b.find("div.wijmo-wijcarousel-mask").css({"opacity":0})}},b.prototype._createItem=function(a,b){var d,e,f=this,h=f.options;return d=a.addClass(g).addClass(h.wijCSS.helperClearFix).find("img:eq(0)").attr("role","img").addClass("wijmo-wijcarousel-image"),f._applyItemBound(a),e=a.children("span:eq(0)").hide(),f._createCaption(a,d,e),h.preview&&c('<div class="wijmo-wijcarousel-mask">').appendTo(a),a.data("itemIndex",b),a},b.prototype._applyItemBound=function(a){var b=this,c=b.itemBound.w,d=b.itemBound.h;b.itemWidth&&b.itemHeight||(a.width(c).height(d),b.itemWidth=c-(a.outerWidth(!0)-c),b.itemHeight=d-(a.outerHeight(!0)-d)),a.width(b.itemWidth).height(b.itemHeight)},b.prototype._createCaption=function(a,b,d){var e,f,g,h,i=this,j=i.options;j.showCaption&&(e=d.html()||b.attr("title"),e&&e.length&&(g=c("<span></span>").html(e),h=c(t).addClass([j.wijCSS.helperClearFix,"wijmo-wijcarousel-caption"].join(" ")).appendTo(a),f=c(t).addClass([j.wijCSS.helperClearFix,j.wijCSS.content,"wijmo-wijcarousel-text"].join(" ")).append(g).appendTo(a),i._applyCaptionStyle(h,f)))},b.prototype._applyCaptionStyle=function(a,b){var d,e=a.add(b);e.width(this.itemWidth),c.browser.webkit?(d=b.children("span").css("display","inline-block").height(),b.children("span").css("display","")):d=b.children("span").height(),e.height(d)},b.prototype._showCaption=function(a,b){var c=this,d=c._getItemByIndex(a),e=d.find(".wijmo-wijcarousel-text"),f=d.find(".wijmo-wijcarousel-caption");e.length&&e.fadeIn(300,function(){b>a&&c._showCaption(a+1,b)}),f.length&&(f.show(),f.animate({"opacity":.5},300))},b.prototype._hideCaption=function(){this.element.find(w).hide()},b.prototype._createClip=function(a){this.clip=this.list.wrap("<div></div>").parent().addClass(h)},b.prototype._createBtn=function(a,b){var d=c(r),e=this.options;return d.addClass(e.wijCSS.stateDefault+" "+a).attr("role","button").mouseover(function(){c(this).hasAllClasses(e.wijCSS.stateDisabled)||c(this).addClass(e.wijCSS.stateHover)}).mouseout(function(){c(this).hasAllClasses(e.wijCSS.stateDisabled)||c(this).removeClass(e.wijCSS.stateHover)}).children("span:eq(0)").addClass(e.wijCSS.icon+" "+b),d},b.prototype._createControls=function(){var a=this,b=a.options,d={"collision":"none","of":a.container,"my":"center bottom","at":"center bottom"};b.control&&(a.controls=c(b.control).css({"position":"absolute"}).appendTo(a.container),c.extend(d,b.controlPosition),a.controls.position(d))},b.prototype._createTimer=function(){var a=this,b=a.options;a._createPausePlay(),a.progressBar=c("<div></div>").addClass("wijmo-wijcarousel-timerbar-inner "+b.wijCSS.cornerAll).css({"width":"0%"}).attr("role","progressbar"),a.timer=c("<div></div>").addClass("wijmo-wijcarousel-timerbar "+b.wijCSS.cornerAll).appendTo(a.container).append(a.progressBar).append(a.playPauseBtn)},b.prototype._createPausePlay=function(){var a=this,b=a.options;a.playPauseBtn=c(a._createBtn(l,b.auto?b.wijCSS.iconPause:b.wijCSS.iconPlay)).bind("click."+a.widgetName,function(){if(!a.options.disabled){var d=c(this).children("span:eq(0)");a[d.hasAllClasses(b.wijCSS.iconPlay)?"play":"pause"]()}})},b.prototype._createPagingItem=function(a,b,d,e){var f,g,h=c(u).attr({"role":"tab","aria-label":e+1,"title":e+1}).addClass(this.options.wijCSS.stateDefault);if(a)h.addClass("wijmo-wijcarousel-dot");else{if(!(b&&b.images&&b.images[e]))return;f=b.imageWidth,g=b.imageHeight,f&&g&&h.width(f).height(g),h.children("a").append(c("<img>").attr("src",b.images[e]))}d.append(h)},b.prototype._createPaging=function(a){var b,d,e,f=this,g=f.options,h=g.thumbnails,i="dots"===a;for(f.container.append(f.pager=c('<div><ul class="wijmo-list '+g.wijCSS.cornerAll+" "+g.wijCSS.helperClearFix+' role="tablist"></ul></div>')),i||f.pager.addClass("wijmo-wijcarousel-thumbnails"),d=f.pager.children("ul.wijmo-list"),b=0;b<f.count;b++)f._createPagingItem(i,h,d,b);e=f.pager.find("li").eq(f.currentIdx),e.length&&f._activePagerItem(e),h&&c.each(["mousedown","mouseup","mouseover","mouseout","click"],function(a,b){var c=h[b];c&&"string"==typeof c&&window[c]&&(h[b]=window[c])}),f.pager.bind("mouseover."+f.widgetName,function(a){f.options.disabled||f._pageingEvents(a,"mouseover",h,i,function(a){a.addClass(g.wijCSS.stateHover)})}).bind("mouseout."+f.widgetName,function(a){f.options.disabled||f._pageingEvents(a,"mouseout",h,i,function(a){a.removeClass(g.wijCSS.stateHover)})}).bind("click."+f.widgetName,function(a){f.options.disabled||f._pageingEvents(a,"click",h,i,function(a){f.scrollTo(a.index()),f._activePagerItem(a)})}),i||c.each(["mousedown","mouseup"],function(a,b){c.isFunction(h[b])&&f.pager.bind(b,function(a){if(!f.options.disabled){var d=c(a.target).closest(v);d.length&&h[b].call(d,a)}})})},b.prototype._pageingEvents=function(a,b,d,e,f){var g=c(a.target).closest(v);g.length&&(c.isFunction(f)&&f.call(a,g),!e&&c.isFunction(d[b])&&d[b].call(g,a))},b.prototype._activePagerItem=function(a){var b=this.options.wijCSS.stateActive;a.addClass(b).attr("aria-selected","true").siblings("li").removeClass(b).removeAttr("aria-selected")},b.prototype._createWijSlider=function(){var a=this,b=a.options.sliderOrientation,d={"orientation":b,"range":!1,"min":0,"max":a.count-1,"step":1,"value":a.currentIdx,"buttonClick":function(b,c){var d=c.value;a.scrollTo(d)},"slide":function(b,c){var d=c.value;a.scrollTo(d)}},e=c("<div></div>").css("margin-bottom","10px").css("horizontal"===b?"width":"height","200px").appendTo(a.container);a.pager=e.wijslider(d).parent().wrap("<div>").parent().addClass("wijmo-wijcarousel-slider-wrapper")},b.prototype._createWijPager=function(){var a=this,b={"pageCount":a.count,"pageIndex":a.currentIdx,"pageButtonCount":a.count,"mode":"numeric","pageIndexChanged":function(b,c){var d=c.newPageIndex;a.scrollTo(d)}},d=c("<div></div>").appendTo(a.container);a.pager=d.wijpager(b).css({"position":"absolute"})},b.prototype._createPager=function(){var a=this,b=a.options,d={"collision":"none","of":a.container,"my":"right top","at":"right bottom"};if("numbers"===b.pagerType)a._createWijPager();else if("dots"===b.pagerType||"thumbnails"===b.pagerType)a._createPaging(b.pagerType),a.pager.css({"position":"absolute"});else{if(!c.wijmo.wijslider||"slider"!==b.pagerType)return;a._createWijSlider(),"horizontal"!==b.sliderOrientation&&(d.my="left center",d.at="right center")}a.pager.width(a.pager.width()+1),c.extend(d,b.pagerPosition),b.pagerPosition=d,a.pager.addClass("wijmo-wijcarousel-pager").position(d)},b.prototype._setOption=function(b,d){var e,f,g,h=this,i=h.options,j="horizontal"===i.orientation;if("pagerPosition"===b||"animation"===b||"controlPosition"===b)c.extend(!0,i[b],d);else switch(g=i[b],a.prototype._setOption.call(this,b,d),b){case"showControls":case"showPager":case"showTimer":if(d===g)break;e=b.replace(/show/i,"").toLowerCase(),f=b.replace(/show/i,"_create"),d===!0?h[e]?h[e].jquery&&h[e].show():h[f]():h[e].hide();break;case"loop":case"orientation":case"display":case"preview":d!==g&&(h._wijdestroy(),h._create());break;case"data":h._createItems(j),h._applyContainerStyle(j),h._applyBtnClass(),i.showPager&&h._createPager();break;case"showCaption":d?h._createItems(j):h.element.find(w).remove();break;case"buttonPosition":h._applyBtnStyle(j);break;case"pagerType":d!==g&&h._reCreatePager();break;case"disabled":h._handleDisabledOption(d,h.element);break;case"showControlsOnHover":h._set_showControlsOnHover(d);break;case"thumbnails":h._reCreatePager()}},b.prototype._reCreatePager=function(){var a=this;a.pager&&a.pager.jquery&&(a.pager.remove(),a.pager=null),a.options.showPager&&a._createPager()},b.prototype._getItemBound=function(){var a={},b=this,c=b.options;return a="horizontal"===c.orientation?{"w":Math.round(b.width/c.display),"h":b.height}:{"w":b.width,"h":Math.round(b.height/c.display)}},b.prototype._stopAnimation=function(){
var a=this;a.isPlaying&&a.progressBar&&a.progressBar.stop().css({"width":"0%"}),a.list.stop(!0,!0)},b.prototype._itemClick=function(a){var b,d,e=c(a.target),f=this,h=f.options,i=f.currentIdx,j=e.closest("li."+g),k=j.data("itemIndex");return f.options.disabled?void a.preventDefault():void(j.length>0&&((h.preview&&i>k||k>i+h.display-1)&&(b=f._getItemByIndex(i).index(),d=j.index()>b?"next":"previous",f[d]()),f._trigger("itemClick",a,{"index":k,"el":j})))},b.prototype._wijdestroy=function(){var a=this,b=a.options.wijCSS;a.container.removeClass("wijmo-wijcarousel "+b.widget).removeClass("wijmo-wijcarousel-horizontal").removeClass("wijmo-wijcarousel-vertical"),a.timeout&&(a.list.stop(!0),window.clearTimeout(a.timeout),a.timeout=null),a.options.showTimer&&a.progressBar&&a.progressBar.stop(!0),a.list.unwrap().removeClass("wijmo-wijcarousel-list").removeClass(b.helperClearFix).unbind("."+a.widgetName).removeAttr("style").children("li").each(function(a,d){var e=c(d);e.removeClass("wijmo-wijcarousel-item").removeClass(b.helperClearFix).removeClass(i),e.children("img").removeClass("wijmo-wijcarousel-image"),e.children(w).remove(),e.css({"width":"","height":""}),e.removeData("itemIndex")}),a.itemWidth=a.itemHeight=void 0,a.element.find(s+",.wijmo-wijcarousel-timerbar").remove(),a.pager&&(a.pager.remove(),a.pager=null),a.timer&&(a.timer.remove(),a.timer=null),a.element.find("li>span").css("display","")},b.prototype.destroy=function(){this._wijdestroy(),c.Widget.prototype.destroy.apply(this)},b.prototype._resetDom=function(){var a=this;a._applyListStyle(),a.list.children("li").each(function(b,d){var e=c(d),f=e.children("div.wijmo-wijcarousel-caption"),g=e.children("div.wijmo-wijcarousel-text");a._applyItemBound(e),a._setStyle(f.add(g),function(){a._applyCaptionStyle(f,g)})}),a._applyContainerStyle(a.isHorizontal,!0),a.options.preview&&a._createPreview(),a._setStyle(a.prevBtn.add(a.nextBtn),function(){a._applyBtnStyle(a.isHorizontal)}),a._setStyle(a.pager,function(){a.pager.position(a.options.pagerPosition)}),a._setStyle(a.controls,function(){a.controls.position(a.options.controlPosition)})},b.prototype._setStyle=function(a,b){var c=!0;a&&0!==a.length&&("none"==a.css("display")&&(c=!1,a.css("display","")),b.call(this),c||a.css("display","none"))},b.prototype.refresh=function(){var a=this,b=(a.options,a.element);a.width=b.width()||640,a.height=b.height()||480,a.itemWidth=a.itemHeight=0,a._resetDom(),a.pause()},b.prototype.play=function(){var a=this,b=a.options;if(!a.isPlaying&&!b.disabled){if(0===b.interval)return a.pause();if(b.showTimer&&a.progressBar)a.progressBar.css({"width":"0%"}),a.playPauseBtn.children("span:eq(0)").removeClass(b.wijCSS.iconPlay).addClass(b.wijCSS.iconPause),a.progressBar.animate({"width":"100%"},b.interval,null,function(){a._scroll("next",b.step)});else{if(a.timeout)return;a.timeout=window.setTimeout(function(){a.next()},b.interval)}a.isPlaying=!0}},b.prototype.pause=function(){var a=this,b=a.options;if(b.showTimer&&a.progressBar)a.progressBar.stop(!0).css({"width":"0%"}),a.playPauseBtn.children("span:eq(0)").removeClass(b.wijCSS.iconPause).addClass(b.wijCSS.iconPlay);else{if(null===a.timeout)return;window.clearTimeout(a.timeout),a.timeout=null}a.isPlaying=!1},b.prototype.next=function(){var a=this,b=a.options.step;"number"!=typeof b||1>b||(a._stopAnimation(),a._scroll("next",b))},b.prototype.previous=function(){var a=this,b=a.options.step;"number"!=typeof b||1>b||(a._stopAnimation(),a._scroll("previous",b))},b.prototype.scrollTo=function(a){var b,c,d=this;d._stopAnimation(),b=a>d.currentIdx?"next":"previous",c=Math.abs(a-d.currentIdx),a!==d.currentIdx&&d._scroll(b,c)},b.prototype._scroll=function(a,b){var d,e,f=this,g=f.options,h=f.list,j=0,k="horizontal"===g.orientation,l={},m=f.itemBound[k?"w":"h"],n=k?"left":"top",o=b,p={},q=0,r=f.currentIdx*m;if(g.loop){if(g.preview&&(j=q=-m*x+f.offset),"next"===a)j+=-m*o,l[n]=j;else{for(e=0;b>e;e++)j-=m,h.children("li:last").prependTo(h);p[n]=j,l[n]=q,h.css(p)}f._doAnimation(a,l,b,n,m)}else{if("next"===a)if(f.currentIdx+g.display+b<=f.count)j=-r-m*o;else{if(!(f.currentIdx+g.display<f.count))return;o=f.count-f.currentIdx-g.display,j=-r-m*o}else f.currentIdx-b>=0?j=-r+m*o:f.currentIdx>0&&(o=f.currentIdx,j=0);void 0!==j&&(l[n]=j+f.offset,f._doAnimation(a,l,o))}if(g.preview){for(d=c(),e=0;e<g.display;e++)d=d.add(f._getItemByIndex(f.currentIdx+e).find("div.wijmo-wijcarousel-mask:eq(0)"));d.stop(!0).animate({"opacity":.6},g.animation.duration/2,function(){f._getItemByIndex(f.currentIdx).removeClass(i)})}},b.prototype._doAnimation=function(a,b,d,e,f){var g,h,i,j,k=this,l=k.list,m=k.options,n={"complete":null},o={};k.list.children().length&&(j="next"===a?k.currentIdx+d:k.currentIdx-d,m.loop?(j=j%k.count+(0>j?k.count:0),i=function(){var b=0;if(m.preview&&(b=k.offset-x*f),"next"===a){for(h=0;d>h;h++)l.children("li:first").appendTo(l);e&&(o[e]=b,l.css(o))}k.currentIdx=j,k._setCurrentState(k.currentIdx)}):i=function(){k.currentIdx=j,k._setCurrentState(k.currentIdx)},n.complete=i,g={"index":k.currentIdx,"to":j,"el":k._getItemByIndex(k.currentIdx)},k._trigger("beforeScroll",null,g)&&(m.animation&&m.animation.complete&&(m.animation.complete=void 0),c.extend(n,m.animation),k._hideCaption(),l.animate(b,n)))},b.prototype._setCurrentState=function(a){var b,d,e,f,g,h,j=this,k=j.options,l=a+k.display-1;if(k.loop?j.isPlaying&&(window.clearTimeout(j.timeout),j.timeout=null,j.isPlaying=!1,j.play()):(e=a+k.display<j.count,j.isPlaying&&e?(window.clearTimeout(j.timeout),j.timeout=null,j.isPlaying=!1,j.play()):j.progressBar&&j.pause(),j._applyBtnClass()),k.preview){for(g=c(),f=j._getItemByIndex(a),h=0;h<k.display;h++)g=g.add(j._getItemByIndex(a+h).find("div.wijmo-wijcarousel-mask:eq(0)"));g.animate({"opacity":0},k.animation.duration/2,function(){f.addClass(i),j._showCaption(a,l)})}else j._showCaption(a,l);j.pager&&(c.wijmo.wijslider&&j.pager.find(":wijmo-wijslider").length?j.pager.find(":wijmo-wijslider:eq(0)").wijslider("value",a):c.wijmo.wijpager&&j.pager.is(":wijmo-wijpager")?j.pager.wijpager("option","pageIndex",a):j.pager.jquery&&(b=j.pager.find(">ul:eq(0)>li").eq(a),b.length&&j._activePagerItem(b))),d={"firstIndex":a,"lastIndex":l},j._trigger("afterScroll",null,d)},b.prototype._getItemByIndex=function(a){var b,d=this,e=d.list,f=a%d.count;return d.options.loop?(e.children("li").each(function(a){var d=c(this);return d.data("itemIndex")===f?(b=d,!1):void 0}),b):e.children("li").eq(f)},b.prototype._collectionChanged=function(a){var b=this;b.count=b.count+("add"===a?1:-1),b._applyListStyle(),b.pager&&b.pager.jquery&&(b.pager.remove(),b.pager=null,b._createPager()),b._applyBtnClass()},b.prototype.add=function(a,b){var d,e,f=this;if("string"==typeof a)d=c(a);else if(a.jquery)d=a;else{if(!c.isPlainObject(a))return;d=f._generateMarkup(a)}d.is("li")||(d=d.wrap("<li></li>").parent()),e=d,"number"==typeof b&&b>=0&&b<f.count?(e.insertBefore(f._getItemByIndex(b)),f.list.children("li").each(function(a,d){var e=c(d);e.data("itemIndex")>=b&&e.data("itemIndex",e.data("itemIndex")+1)})):(0==b&&e.appendTo(f.list),e.insertAfter(f._getItemByIndex(f.count-1))),f._createItem(d,void 0!==b?b:f.count),f._collectionChanged("add")},b.prototype.remove=function(a){var b,d=this;"number"==typeof a&&a>=0&&a<d.count?(b=d._getItemByIndex(a),d.list.children("li").each(function(b,d){var e=c(d);e.data("itemIndex")>a&&e.data("itemIndex",e.data("itemIndex")-1)})):b=d._getItemByIndex(d.count-1),b&&b.remove(),d._collectionChanged("remove")},b}(a.wijmoWidget);b.wijcarousel=y;var z=function(){function a(){this.wijMobileCSS={"header":"ui-header ui-bar-a","content":"ui-body-a","stateDefault":"ui-btn ui-btn-a","stateHover":"ui-btn-down-a","stateActive":"ui-btn-down-b","iconPlay":"ui-icon-arrow-r","iconPause":"ui-icon-grid"},this.initSelector=":jqmData(role='wijcarousel')",this.data=[],this.auto=!1,this.interval=5e3,this.showTimer=!1,this.buttonPosition="inside",this.showPager=!1,this.prevBtnClass={"defaultClass":"","hoverClass":"","disableClass":""},this.nextBtnClass={"defaultClass":"","hoverClass":"","disableClass":""},this.pagerType="numbers",this.thumbnails={"mouseover":null,"mouseout":null,"mousedown":null,"mouseup":null,"click":null,"imageWidth":58,"imageHeight":74,"images":[]},this.pagerPosition={},this.orientation="horizontal",this.sliderOrientation="horizontal",this.loop=!0,this.animation={"queue":!0,"disable":!1,"duration":1e3,"easing":"linear"},this.start=0,this.display=1,this.preview=!1,this.step=1,this.showControls=!1,this.control="",this.controlPosition={},this.showCaption=!0,this.showControlsOnHover=!1,this.itemClick=null,this.beforeScroll=null,this.afterScroll=null,this.loadCallback=null}return a}();y.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new z),c.wijmo.registerWidget("wijcarousel",y.prototype)}(a.carousel||(a.carousel={}));a.carousel}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d="wijmo-wijgallery",e="wijmo-wijgallery-",f=e+"selected",g=e+"button-",h=e+"button",i="wijmo-wijgallery-thumbs-pointer-{0}",j="wijmo-wijgallery-flashwrapper",k='<div class="wijmo-wijgallery-frame"><div class="wijmo-wijgallery-content"></div></div>',l='<div class="wijmo-wijgallery-thumbs"></div>',m="<a><span></span></a>",n='<div class="wijmo-wijgallery-frame-{0}"><a href="#" class="wijmo-wijgallery-frame-link"></a></div>',o="<div></div>",p="li.wijmo-wijcarousel-item";!window.S&&window.swfobject&&(window.S={"flash":window.swfobject});var q=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._setOption=function(b,d){var e,f,g,h,i=this,j=i.options;if("framePosition"===b||"thumbnailPosition"===b||"transitions"===b||"pagingPosition"===b)c.extend(!0,j[b],d);else switch(g=j[b],a.prototype._setOption.call(this,b,d),b){case"disabled":i._handleDisabledOption(d,i.element);break;case"thumbnailOrientation":i.thumbs[i.thumbWidgetName]({"orientation":d});break;case"thumbsDisplay":i.thumbs[i.thumbWidgetName]({"display":d});break;case"autoPlay":i[d?"play":"pause"]();break;case"showCounter":case"showTimer":case"showControls":e=b.replace(/show/i,"").toLowerCase(),f=b.replace(/show/i,"_create"),d!==g&&(d===!0?i[e]?i[e].jquery&&i[e].show():i[f]():i[e].hide());break;case"showCaption":d?(i._createCaption(i.size),h=i._loadCaption(i.images[i.currentIdx]),h.show()):i.element.find(".wijmo-wijgallery-caption,.wijmo-wijgallery-text").remove();break;case"showPager":case"thumbsLength":case"thumbnailDirection":case"showControlsOnHover":case"mode":case"data":i._wijdestroy(),i._create()}},b.prototype._handleDisabledOption=function(a,b){var c=this;c.pager&&!c.pager.is(":hidden")?c.pager.wijpager("option","disabled",a):c.thumbs&&!c.thumbs.is(":hidden")&&c.thumbs[c.thumbWidgetName]({"disabled":a})},b.prototype._initLi=function(a){var b=a.children("a:eq(0)"),d=a.find("img:eq(0)"),e=a.find("span:eq(0)"),f={"url":null,"thumbUrl":null,"title":d.attr("alt"),"caption":void 0};return b.length&&b.attr("href")?(f.url=b.attr("href"),f.title||(f.title=b.attr("title"))):d.length&&(f.url=d.attr("src")),e.length?f.caption=e:d.attr("title")&&(f.caption=c("<span>").html(d.attr("title"))),f.thumbUrl=d.attr("src"),f},b.prototype._initStatus=function(){var a,b=this;b.images=[],b.ul=b.element.children("ul"),a=b.ul.children("li"),b._count=a.length,a.each(function(a){var d=b._initLi(c(this));b.images.push(d)})},b.prototype._createMarkupFromData=function(){var a=this,b=a.options,d=b.data,e=a.element,f=e.children("ul:eq(0)");a.images=d,f.length?f.empty():f=c("<ul>").appendTo(e),a.ul=f,c.each(d,function(a,b){var d=c("<a>"),e=c("<li>"),g=c("<img>");b.url&&d.attr("href",b.url),b.thumbUrl&&g.attr("src",b.thumbUrl),b.title&&g.attr("alt"),d.append(g).appendTo(e),e.appendTo(f)}),a._count=d.length},b.prototype._create=function(){var a=this,b=a.options;a.container=a.element,a.container.addClass([d,b.wijCSS.widget].join(" ")),a.currentThumbIdx=0,a.currentIdx=-1,a.timerCount=0,window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c)),b.showPager?(b.pagingPosition=!0,b.thumbnails=!1):b.thumbnails=!0,b.data&&b.data.length?a._createMarkupFromData():a._initStatus(),b.loadCallback&&c.isFunction(b.loadCallback)&&a._trigger("loadCallback",null,a),a._createDom(),b.autoPlay&&a._play(!0),b.showControlsOnHover&&(a.frame.find(".wijmo-wijpager,.wijmo-wijgallery-button-next,.wijmo-wijgallery-counter,.wijmo-wijgallery-button-previous").hide(),!a.isPlaying&&a.timer&&a.timer.hide()),b.disabled&&a.disable(),a.element.is(":hidden")&&a.element.wijAddVisibilityObserver&&a.element.wijAddVisibilityObserver(function(){a.element.wijRemoveVisibilityObserver&&a.element.wijRemoveVisibilityObserver()},"wijgallery")},b.prototype._createDom=function(){var a=this,b=a.options;b.thumbnails?a._createThumbnails():a.ul.hide(),a._createFrame(),b.control&&a._createControls(),b.showCounter&&a._createCounter(),b.showTimer&&a._createTimer(),b.showPager&&a._createPager()},b.prototype._getFrameSize=function(){var a=this,b="horizontal"===a.options.thumbnailOrientation,c=a.element.height()-(b&&a.thumbs?a.thumbs.outerHeight(!0):0),d=a.element.width()-(b?0:a.thumbs?a.thumbs.outerWidth(!0):0);return{"w":2>d||!d?750:d,"h":2>c||!c?300:c}},b.prototype._createFrame=function(){var a,b,d=this,e=d.options,f=d._getFrameSize(),g="after"===e.thumbnailDirection;d.frame=c(k).addClass(e.wijCSS.content+" "+e.wijCSS.helperClearFix)[g?"prependTo":"appendTo"](d.container).setOutWidth(f.w-1).setOutHeight(f.h).wrap('<div class="wijmo-wijgallery-framewrapper">'),d.size=f,a=d.frame.width(),b=d.frame.height(),d.frameWrapper=d.frame.parent(),"vertical"===e.thumbnailOrientation&&d.frameWrapper.addClass("wijmo-wijgallery-framewrapper-vertical"),e.showControlsOnHover&&d.frame.bind("mouseenter."+d.widgetName,function(){d.options.disabled||d._showControls("controls")}).bind("mouseleave."+d.widgetName,function(){d.options.disabled||d._hideControls("controls")}),d.content=d.frame.children("div.wijmo-wijgallery-content"),"img"===e.mode&&d._createFrameMask(),d._createPrevNextBtn(),d._createCaption(f),d._createLoading(),d.last=c('<div class="'+e.wijCSS.overlay+' wijmo-wijgallery-last"></div>').appendTo(d.content).width(a).height(b).css({"line-height":f.h+"px"}),d.current=c('<div class="'+e.wijCSS.overlay+' wijmo-wijgallery-current"></div>').appendTo(d.content).width(a).height(b).css({"line-height":f.h+"px"}),d._show(0)},b.prototype._createControls=function(){var a=this,b=a.options,d={"collision":"none","of":a.container,"my":"center bottom","at":"center bottom"};b.control&&(a.controls=c(b.control).css({"position":"absolute"}).appendTo(a.container),c.extend(d,b.controlPosition),a.controls.position(d))},b.prototype._createLoading=function(){var a=this;a.loading=c("<div></div>").addClass("wijmo-wijgallery-loading").appendTo(a.content),a.loading.css({"left":(a.content.width()-a.loading.width())/2,"top":(a.content.height()-a.loading.height())/2}),a.loading.hide()},b.prototype._createFrameMask=function(){var a=this,b=a.options;c.each(["previous","next"],function(d,e){var f=c(n.replace(/\{0\}/,e)).appendTo(a.frame),g=f.children("a");c.browser.msie&&parseInt(c.browser.version)<=9&&f.css({"background-color":"#fff"}),b.showControlsOnHover&&f.bind("mouseenter."+a.widgetName,function(){a.options.disabled||a._showControls(e)}).bind("mouseleave."+a.widgetName,function(){a.options.disabled||a._hideControls(e)}),g.bind("click."+a.widgetName,function(b){a.options.disabled||(a[e](),b.preventDefault())})})},b.prototype._createCounter=function(){var a=this,b=a.options;return b.showCounter?(a.counter||(a.counter=c("<div></div>").addClass("wijmo-wijgallery-counter "+b.wijCSS.stateDefault+" "+b.wijCSS.cornerTL).appendTo(a.frame)),void a._refreshCounter()):void(a.counter&&(a.counter.remove(),a.counter=void 0))},b.prototype._refreshCounter=function(){var a,b=this,d=b.options;b.counter&&(b.counter.empty(),d.counter&&(a=d.counter.replace(/\[i\]/,b.currentIdx+1),a=a.replace(/\[n\]/,b._count),c("<span></span>").text(a).appendTo(b.counter)))},b.prototype._createPrevNextBtn=function(){var a=this,b=a.options.wijCSS;c.each(["next","previous"],function(d,e){var f,h="next"===e?b.iconArrowRight:b.iconArrowLeft;f=a.frame.find(".wijmo-wijgallery-frame-"+e),f.length&&"img"===a.options.mode||(f=a.frame),a[e+"Btn"]=c(a._createBtn(g+e,h)).bind("click."+a.widgetName,c.proxy(a[e],a)).appendTo(f),a._applyBtnStyle(e)})},b.prototype._applyBtnStyle=function(a){var b=this,c=b.options,d="next"===a,e=b[a+"Btn"],f=d?"right center":"left center",g=f,h=c.wijCSS,i=d?h.cornerLeft:h.cornerRight,j="next"===a?b.currentIdx>=b._count:b.currentIdx<=0,k={"collision":"none","of":b.frame,"my":g,"at":f};e.addClass(i).position(k),j?e.removeClass(h.stateHover).addClass(h.stateDisabled):e.hasAllClasses(h.stateDisabled)&&e.removeClass(h.stateDisabled)},b.prototype._createCaption=function(a){var b=this,d=b.options,e=d.wijCSS;d.showCaption&&(b.overlay=c(o).addClass([e.content,e.helperClearFix,"wijmo-wijgallery-caption"].join(" ")).width(a.w).appendTo(b.content),b.caption=c(o).addClass([e.content,e.helperClearFix,"wijmo-wijgallery-text"].join(" ")).width(a.w).appendTo(b.content))},b.prototype._loadCaption=function(a){var b,d=this,e=a.caption,f=c("<span></span>"),g=d.element.find(".wijmo-wijgallery-text,.wijmo-wijgallery-caption");return e&&(g.show(),e.jquery&&e.show(),f.html(e),d.caption.empty().append(f),b=f.outerHeight(!0),g.height(b),c.browser.msie&&g.height(f.css("display","block").outerHeight(!0))),g.hide(),g},b.prototype._showCaption=function(a){var b=this;a&&a.caption&&(b.caption.length&&b.caption.fadeIn(500),b.overlay.length&&b.overlay.show().animate({"opacity":.5},500))},b.prototype._createTooltip=function(a){var b=this,d=b.options.wijCSS,e=a||"bottom";b.pointer=c("<div>").addClass([d.content,d.stateDefault,i.replace(/\{0\}/,e)].join(" ")),b.pointer.appendTo(b.thumbsWrapper).hide()},b.prototype._createThumbnails=function(){var a=this,b=a.options,d="after"===b.thumbnailDirection,e="wijmo-wijgallery-thumbs-{0}",f="horizontal"===b.thumbnailOrientation,g=d?f?"bottom":"right":f?"top":"left";a.thumbPosition=g,a.thumbs=c(l).appendTo(a.container).addClass(b.wijCSS.content).addClass(f?"wijmo-wijcarousel-horizontal-multi":"wijmo-wijcarousel-vertical-multi"),f?a.thumbs.css({"height":b.thumbsLength+"px"}).setOutWidth(a.element.width()):a.thumbs.css({"width":b.thumbsLength+"px"}).setOutHeight(a.element.height()),a.ul.appendTo(a.thumbs),a.ul.children("li").each(function(b,d){var e=c(d).children("a"),f=a.images[b],g=f.thumbUrl;e.length||(e=c(d).wrapInner("<a>").children("a"),e.attr("href",g))}),c[a.namespace][a.thumbWidgetName]&&(a.thumbs.addClass(e.replace(/\{0\}/,g)).find("li").addClass(b.wijCSS.stateDefault).hover(function(){c(this).addClass(b.wijCSS.stateHover)},function(){c(this).removeClass(b.wijCSS.stateHover)}),a.thumbsWrapper=a.thumbs[a.thumbWidgetName]({"display":b.thumbsDisplay,"step":b.thumbsDisplay-1,"itemPadding":"0 10px","showCaption":b.showThumbnailCaptions,"orientation":b.thumbnailOrientation,"loop":!1,"itemClick":function(b,c){var d=c.index;a.show(d),b.preventDefault()},"afterScroll":function(b,c){a.currentThumbIdx=c.firstIndex,a.activeLi&&a.activeLi.is("li")&&a.activeLi.index()>=c.firstIndex&&a.activeLi.index()<=c.lastIndex&&a._highlightThumb(a.activeLi),a.isScrolling=!1},"beforeScroll":function(c,d){a.isScrolling=!0,"swf"===b.mode||"flv"===b.mode?a.pointer.hide():a.pointer.fadeOut(100)}}).wrap('<div class="wijmo-wijgallery-thumbswrapper">').parent(),f||a.thumbsWrapper.addClass("wijmo-wijgallery-thumbswrapper-vertical"),a._createTooltip(g))},b.prototype._calculatePosition=function(a,b,c,d,e,f){var g=this;"bottom"===g.thumbPosition?(a.left=a.left+(d-b)/2+f,a.top=a.top-c):"top"===g.thumbPosition?(a.left=a.left+(d-b)/2+f,a.top=a.top+e+2*f):"left"===g.thumbPosition?(a.left=a.left+d+2*f,a.top=a.top+(e-c)/2+f):"right"===g.thumbPosition&&(a.left=a.left-b,a.top=a.top+(e-c)/2+f)},b.prototype._highlightThumb=function(a){var b,c,d,e,g,h,i=this,j=[f,i.options.wijCSS.stateActive].join(" ");a&&a.length&&(a.siblings("li."+f).removeClass(j),a.addClass(j),b=i.pointer.outerWidth(!0),c=i.pointer.outerHeight(!0),d=a.width(),e=a.height(),g=a.offset(),h=5,i._calculatePosition(g,b,c,d,e,h),i.pointer.fadeIn(100),i.pointer.offset(g))},b.prototype._getSelector=function(a,b){var c,d=".wijmo-wijgallery-button-",e=".wijmo-wijpager,.wijmo-wijgallery-counter";return b&&(e+=",.wijmo-wijgallery-timerbar"),c="next"===a||"previous"===a?d+a:"controls"===a?e:e+","+d+"next,"+d+"previous"},b.prototype._showControls=function(a){var b,d=this;b=d._getSelector(a,!d.isPlaying&&d.timer),d.frame.find(b).stop(!0,!0).fadeIn(400,function(){c(this).css("opacity","")})},b.prototype._hideControls=function(a){var b,c=this;b=c._getSelector(a,!c.isPlaying&&c.timer),this.frame.find(b).stop(!0,!0).fadeOut(600)},b.prototype._createPager=function(){var a,b=this,d=b.options,e=d.thumbsDisplay,f=1,g=b.currentIdx,h=b.currentIdx,i={"collision":"none","of":b.container,"my":"right top","at":"right bottom"};d.thumbnails?(a=c("<div></div>").appendTo(b.thumbs),0!==e&&(f=Math.ceil(b._count/e),g=Math.ceil(b.currentIdx/e)),b.pager=a.wijpager({"pageCount":f,"pageIndex":g,"pageButtonCount":f,"mode":"numeric","pageIndexChanged":function(a,c){var d=c.newPageIndex;(d*e>h||h>=(d+1)*e)&&b.thumbs[b.thumbWidgetName]("scrollTo",d*e),a.preventDefault()}}).css({"position":"absolute"})):(a=c("<div></div>").appendTo(b.container),b.pager=a.wijpager({"pageCount":b._count,"pageIndex":b.currentIdx,"pageButtonCount":b._count,"mode":"numeric","pageIndexChanged":function(a,c){var d=c.newPageIndex;b._show(d)}}).css({"position":"absolute"}),c.extend(i,d.pagingPosition),b.pager.addClass("wijmo-wijgallery-pager").position(i),b._adjustPagerLeft())},b.prototype._adjustPagerLeft=function(){var a=this.pager.css("left").replace(/px/,""),b=parseFloat(a);isNaN(b)||this.pager.css("left",b-1)},b.prototype._createBtn=function(a,b){var d=c(m),e=this.options;return d.addClass(e.wijCSS.stateDefault+" "+a).attr("role","button").bind("mouseover"+this.widgetName,function(){c(this).hasAllClasses(e.wijCSS.stateDisabled)||c(this).addClass(e.wijCSS.stateHover)}).bind("mouseout"+this.widgetName,function(){c(this).hasAllClasses(e.wijCSS.stateDisabled)||c(this).removeClass(e.wijCSS.stateHover)}),d.children("span:eq(0)").addClass(e.wijCSS.icon+" "+b),d},b.prototype._createTimer=function(){var a=this,b=a.options;a._createPausePlay(),a.progressBar=c("<div></div>").addClass("wijmo-wijgallery-timerbar-inner "+b.wijCSS.cornerAll).css({"width":"0%"}).attr("role","progressbar"),a.timer=c("<div></div>").addClass("wijmo-wijgallery-timerbar "+b.wijCSS.cornerAll).appendTo(a.frame).append(a.progressBar).append(a.playPauseBtn)},b.prototype._createPausePlay=function(){var a=this,b=a.options;a.playPauseBtn=c(a._createBtn(h,b.autoPlay?b.wijCSS.iconPause:b.wijCSS.iconPlay)).bind("wijclick."+a.widgetName,function(){if(!c(this).hasAllClasses(b.wijCSS.stateDisabled)){var d=c(this).children("span:eq(0)");a[d.hasAllClasses(b.wijCSS.iconPlay)?"play":"pause"]()}})},b.prototype._show=function(a){var b,d,e,f=this,g=f.images[a],h=f._getFrameSize(),i=f.options,k=i.mode;f.currentIdx!==a&&g&&c.isPlainObject(g)&&(f.loading.delay(500).fadeIn(100),e=f.last.children("img,div."+j),e.length&&e.remove(),"swf"===k||"flv"===k?(f.last.hide(),f.current.empty(),f._wrapFlash(f.current,k,g.url),f.picture=f.current.children("div."+j),f._setCurrentStates(a),f.loading.stop().hide(),f._thumbsScroll(a)):"img"===k?(f.picture&&f.picture.length&&f.last.append(f.picture),f.current.addClass("ui-helper-hidden-accessible"),f.last.show(),f.picture=c("<img>"),f.picture.one("load",function(){f.picture.data("itemIndex",a).appendTo(f.current),f._imageLoaded(f,h)}).attr({"src":g.url,"alt":g.title})):"iframe"===k&&(f.current.is(":hidden")?(b=f.current,d=f.last):(b=f.last,d=f.current),f.picture=c("<iframe></iframe>").addClass("wijmo-wijgallery-iframe").attr({"frameborder":"0","marginwidth":"0","marginheight":"0","scrolling":"auto","allowtransparency":"true","src":g.url}).hide().appendTo(b).data("itemIndex",a).bind("load",function(){var a=c(this),e=a.data("itemIndex");f.loading.stop().hide(),f.pointer&&f.pointer.fadeOut(100),f._setCurrentStates(e),void 0!==e&&(i.showCaption,a.show(),d.fadeOut(function(){d.empty()}),b.fadeIn())})))},b.prototype._imageLoaded=function(a,b){var c=a.picture.attr("role","img"),d=c.data("itemIndex"),e=c[0].naturalWidth||c.width(),f=c[0].naturalHeight||c.height(),g=a.images[d];a.loading.stop().hide(),a.current.removeClass("ui-helper-hidden-accessible"),a.current.hide(),a.pointer&&a.pointer.fadeOut(100),e>=b.w||f>=b.h?e/f>b.w/b.h?c.css({"width":"100%"}):c.css({"height":"100%"}):e<b.w&&f<b.h&&c.addClass(a.options.wijCSS.stateDefault).addClass("wijmo-wijgallery-small-image"),void 0!==d&&void 0!==g&&(a.options.showCaption&&a.caption&&a._loadCaption(g),a._animate(d))},b.prototype._animate=function(a){var b,d,e,f,g,h,i=this,j=i.options,k=j.transitions,l="horizontal"===j.thumbnailOrientation,m=k.animated,n=k.duration;return i.last.children().length?(g={"index":i.currentIdx,"to":a,"toImg":i.images[a]},void(i._trigger("beforeTransition",null,g)&&(m?"slide"===m?(b=i.size.w,d=i.size.h,i.current.show(),h=i.currentIdx>a?!0:!1,e=c.createWrapper(i.last).css({"overflow":"hidden","width":l?2*b:b,"height":l?d:2*d,"left":l&&h?-b:0,"top":l?0:h?-d:0}),e[h?"prepend":"append"](i.current),e.animate({"left":l?h?0:-b:0,"top":l?0:h?0:-d},n,function(){i.last.parent().is(".ui-effects-wrapper")&&i.last.unwrap(),i.last.hide(),i._setCurrentStates(a)})):c.mobile?(f=n/2,i.last.fadeOut(f,function(){i.current.stop(!0,!0).fadeIn(f,function(){i._setCurrentStates(a)})})):"explode"===m||"scale"===m||"blind"===m||"fold"===m?(i.current.css({"position":"absolute"}),i.current.stop(!0,!0).show(m,n,function(){i.last.hide(),i._setCurrentStates(a)})):"size"===m?(i.last.hide(),i.current.stop(!0,!0).show(m,n,function(){i.last.hide(),i._setCurrentStates(a)})):(f=n/2,i.last.hide(m,f,function(){i.last.hide(),i.current.stop(!0,!0).show(m,f,function(){i._setCurrentStates(a)})})):(i.last.hide(),i.current.show(),i._setCurrentStates(a)),i._thumbsScroll(a)))):(i._setCurrentStates(a),i.last.hide(),void i.current.show())},b.prototype._thumbsScroll=function(a){var b,c=this,d=c.options;c.thumbs&&c.thumbs[c.thumbWidgetName]&&(d.scrollWithSelection?(b=a-Math.ceil(d.thumbsDisplay/2)+1,a>0&&a<c._count-1&&c.thumbs[c.thumbWidgetName]("scrollTo",b)):a>d.thumbsDisplay+c.currentThumbIdx-1?c.thumbs[c.thumbWidgetName]("scrollTo",a-d.thumbsDisplay+1):a<c.currentThumbIdx&&c.thumbs[c.thumbWidgetName]("scrollTo",a))},b.prototype._setCurrentStates=function(a){var b,c,d,e=this,f=e.options;d=e.currentIdx,e.currentIdx=a,b=a+1<e._count,e.isPlaying&&b?(e.timeout=null,e.isPlaying=!1,e._play()):e.progressBar&&e.pause(),a+1>=e._count?e.nextBtn.add(e.playPauseBtn).removeClass(f.wijCSS.stateHover).addClass(f.wijCSS.stateDisabled):e.nextBtn.add(e.playPauseBtn).removeClass(f.wijCSS.stateDisabled),0>=a?e.previousBtn.removeClass(f.wijCSS.stateHover).addClass(f.wijCSS.stateDisabled):e.previousBtn.removeClass(f.wijCSS.stateDisabled),f.showCaption&&e._showCaption(e.images[a]),e.thumbs&&e.thumbs[e.thumbWidgetName]?(e.activeLi=e.thumbs.find(p).eq(a),e.isScrolling||e._highlightThumb(e.activeLi)):e.pager&&e.pager.is(":wijmo-wijpager")&&e.pager.wijpager("option","pageIndex",a),e._refreshCounter(),e._clearCss(),c={"last":d,"index":e.currentIdx,"toImg":e.images[e.currentIdx]},e._trigger("afterTransition",null,c)},b.prototype._clearCss=function(){this.current.css({"position":"","visibility":""})},b.prototype._resetState=function(){var a=this;a._stopAnimation(),a.isPlaying&&a.progressBar&&(a.progressBar.stop(),a.progressBar.css({"width":"0%"}))},b.prototype._stopAnimation=function(){var a,b=this;a=b.content.find(".ui-effects-wrapper"),a.length&&a.stop(!0,!0),b.current.stop(!0,!0),b.last.stop(!0,!0)},b.prototype.count=function(){return this._count},b.prototype._wijdestroy=function(){var a=this,b=a.options.wijCSS;a.frame.unwrap().remove(),a.options.thumbnails?c[a.namespace][a.thumbWidgetName]&&(a.thumbs[a.thumbWidgetName]("destroy"),a.element.find("li").unbind().removeClass(b.stateActive).filter("."+f).removeClass(f),a.thumbs.children("ul").unwrap().unwrap()):(a.pager&&a.pager.length&&a.pager.remove(),a.element.find("ul").css({"display":""})),a.pointer&&a.pointer.remove(),a.element.removeClass([d,b.widget,b.content,b.cornerAll].join(" "))},b.prototype.destroy=function(){this._wijdestroy(),c.Widget.prototype.destroy.apply(this)},b.prototype.show=function(a){var b=this;b._resetState(),b._show(a)},b.prototype.next=function(){var a,b=this;b.options.disabled||(b._resetState(),a=b.currentIdx+1,a<b._count&&b._show(a))},b.prototype.previous=function(){var a,b=this;b.options.disabled||(b._resetState(),a=b.currentIdx-1,a>=0&&b._show(a))},b.prototype.play=function(){this._play()},b.prototype._play=function(a){var b=this,c=b.options;if(!b.isPlaying&&!c.disabled){if(0===c.interval)return b.pause();if(a&&"swf"!==c.mode)return void(b.isPlaying=!0);if(c.showTimer&&b.progressBar)b.progressBar.css({"width":"0%"}),b.playPauseBtn.children("span:eq(0)").removeClass(c.wijCSS.iconPlay).addClass(c.wijCSS.iconPause),b.progressBar.animate({"width":"100%"},c.interval,null,function(){b._show(b.currentIdx+1)});else{if(b.timeout)return;b.timeout=window.setTimeout(function(){b.timerCount<=1&&b.next(),b.timerCount--},c.interval),b.timerCount++}b.isPlaying=!0}},b.prototype.pause=function(){var a=this,b=a.options;if(b.showTimer&&a.progressBar)a.progressBar.stop(),a.progressBar.css({"width":"0%"}),a.playPauseBtn.children("span:eq(0)").removeClass(b.wijCSS.iconPause).addClass(b.wijCSS.iconPlay);else{if(null===a.timeout)return;window.clearTimeout(a.timeout),a.timeout=null}a.isPlaying=!1},b.prototype.add=function(a,b){var d,e,f,g=this;if("string"==typeof a)d=c(a),f=g._initLi(d);else if(a.jquery)d=a,f=g._initLi(d);else{if(!c.isPlainObject(a))return;f=a}e=!b||b>g._count?g._count:0>b?0:b,g.images.splice(e,0,f),g._count++,g.thumbs&&g.thumbs[g.thumbWidgetName]&&(g.pointer&&g.pointer.is(":hidden")&&g.pointer.show(),g.thumbs[g.thumbWidgetName]("add",d,e)),1===g._count&&g.show(0),g._refreshStateWithItemsChanged(e)},b.prototype.remove=function(a){var b,c=this;if(b=isNaN(a)||a>=c._count?c._count-1:0>a?0:a,b>=0){if(c.images.splice(b,1),c._count--,c.thumbs&&c.thumbs[c.thumbWidgetName]&&c.thumbs[c.thumbWidgetName]("remove",b),c.currentIdx==b)c.current.children("img").remove(),c.last.children("img").remove(),c.picture=null,c.currentIdx=-1,c._count>0&&(b===c._count?c.show(b-1):c.show(b));else if(c.currentIdx>b){var d=c.currentIdx;c.currentIdx=-1,c.show(d)}c._refreshStateWithItemsChanged(b)}},b.prototype._refreshStateWithItemsChanged=function(a){var b=this,c=b.options;0===b._count?(b.nextBtn.removeClass(c.wijCSS.stateHover).addClass(c.wijCSS.stateDisabled),b.previousBtn.removeClass(c.wijCSS.stateHover).addClass(c.wijCSS.stateDisabled),b.playPauseBtn&&b.playPauseBtn.removeClass(c.wijCSS.stateHover).addClass(c.wijCSS.stateDisabled),b.pointer&&b.pointer.hide()):b.currentIdx<=0?b.previousBtn.removeClass(c.wijCSS.stateHover).addClass(c.wijCSS.stateDisabled):b.currentIdx>=b._count-1?(b.nextBtn.removeClass(c.wijCSS.stateHover).addClass(c.wijCSS.stateDisabled),b.playPauseBtn&&b.playPauseBtn.removeClass(c.wijCSS.stateHover).addClass(c.wijCSS.stateDisabled)):(b.nextBtn.removeClass(c.wijCSS.stateDisabled),b.previousBtn.removeClass(c.wijCSS.stateDisabled),b.playPauseBtn&&b.playPauseBtn.removeClass(c.wijCSS.stateDisabled),b.pointer&&b.pointer.is(":hidden")&&b.pointer.show()),b._refreshCounter()},b.prototype._getExt=function(a){var b,c,d=/[0-9a-z]+$/i,e=a.indexOf("?");return e>-1&&(a=a.substring(0,e)),c=a.match(d),c&&(b=c[0].toLowerCase()),b},b.prototype._getPlayerName=function(a){if(0===a.indexOf("#")||a.indexOf("#")>0&&0===a.indexOf(document.location.href))return"inline";var b=["bmp","gif","jpg","jpeg","png"],d=["swf"],e=["flv","m4v"],f=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],g=["asf","avi","mpg","mpeg","wm","wmv"],h=this._getExt(a);
if(h){if(c.inArray(h,b)>=0)return"img";if(c.inArray(h,d)>=0)return"swf";if(c.inArray(h,e)>=0)return"flv";if(c.inArray(h,g)>=0)return"wmp";if(c.inArray(h,f)>=0)return"qt"}return"unknown"},b.prototype._wrapFlash=function(a,b,d){var e,f=this,g=f.options,h=d,i="100%",k="100%",l=g.flashInstall,m=g.flashVersion,n=g.flashVars,o=g.flashParams,p=f._newId();"flv"===b&&(h=g.flvPlayer,n=c.extend({"file":d,"width":i,"height":k,"autostart":g.autoPlayMovies?"true":"false","controlbar":g.showMovieControls?"bottom":"none","backcolor":"0x000000","frontcolor":"0xCCCCCC","lightcolor":"0x557722"},g.flashVars),o=c.extend({"autostart":g.autoPlayMovies?"true":"false","allowscriptaccess":"always"},g.flashParams)),e=c("<div/>").addClass(j).appendTo(a),c("<div/>").css({"width":"100%","height":"100%","overflow":"hidden"}).attr("id",p).appendTo(e),S.flash.embedSWF(h,p,i,k,m,l,n,o)},b.prototype._newId=function(){var a,b="a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z",c=[],d="";for(c=b.split("|"),a=0;16>a;a++)d+=c[Math.round(25*Math.random())];return d},b}(a.wijmoWidget);b.wijgallery=q,q.prototype.thumbWidgetName="wijcarousel";var r=function(){function a(){this.wijMobileCSS={"header":"ui-header ui-bar-a","content":"ui-body-a","stateDefault":"ui-btn-up-a","stateHover":"ui-btn-down-a","stateActive":"ui-btn-down-b","iconPlay":"ui-icon-arrow-r","iconPause":"ui-icon-grid"},this.initSelector=":jqmData(role='wijgallery')",this.autoPlay=!1,this.scrollWithSelection=!1,this.showTimer=!0,this.interval=5e3,this.showCaption=!0,this.showThumbnailCaptions=!1,this.data=[],this.showControls=!1,this.control="",this.controlPosition={},this.showCounter=!0,this.counter="[i] of [n]",this.showPager=!1,this.pagingPosition={},this.thumbnailOrientation="horizontal",this.thumbnailDirection="after",this.transitions={"animated":"slide","duration":1e3,"easing":null},this.showControlsOnHover=!0,this.thumbsDisplay=5,this.thumbsLength=100,this.beforeTransition=null,this.afterTransition=null,this.loadCallback=null,this.showMovieControls=!1,this.autoPlayMovies=!0,this.flashParams={"bgcolor":"#000000","allowfullscreen":!0,"wmode":"transparent"},this.flashVars={},this.flashVersion="9.0.115",this.flvPlayer="player\\player.swf",this.flashInstall="player\\expressInstall.swf",this.mode="img"}return a}();q.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new r),c.wijmo.registerWidget("wijgallery",q.prototype)}(a.gallery||(a.gallery={}));a.gallery}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){var c=jQuery;!function(a){a[a.east=0]="east",a[a.west=1]="west",a[a.south=2]="south",a[a.north=3]="north"}(b.Compass||(b.Compass={}));var d=(b.Compass,function(){function a(){}return a.mod360=function(a){var b=a%360;return 0>a&&(b+=360),b},a.getAngle=function(a,b,c){var d=this,e=d.distance(b,c),f=d.distance(b,a),g=d.distance(c,a),h=e*e,i=f*f,j=g*g,k=Math.acos((j-i-h)/(-2*f*e));return Math.round(180/Math.PI*k)},a.distance=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},a.log=function(a,b){return 0>=a?NaN:1===b||0>b?NaN:Math.log(a)/Math.log(b)},a.generateValues=function(a,b,c){var d,e,f=[];if(b>a&&c>0)for(d=parseInt(((b-a)/c+1).toString(),10),e=0;d>e;e++)f.push(a+e*c);else 0===c&&f.push(a);return f},a.isInRange=function(a,b,c){return a>=b&&c>=a||b>=a&&a>=c},a.paintMarker=function(a,b,c,d,e,f,g){var h;return"rect"===b?a.rect(c-e/2,d-f/2,e,f):h=g?a.paintMarker(b,c,d,f):a.paintMarker(b,c,d,e)},a.formatString=function(a,b){if(c.isFunction(b))return b.call(this,a);if(""!==b){var d,e,f=/\{0(?::((?:n|d|p|c)\d?))?\}/gi;if(f.test(b))return d=b.match(f),e="$1",b.replace(/\{0(?::(?:(?:n|d|p|c)\d?))?\}/gi,Globalize.format(a,e))}return a},a.getPositionByAngle=function(a,b,c,d){var e={"x":0,"y":0},f=Raphael.rad(d);return e.x=a-c*Math.cos(f),e.y=b-c*Math.sin(f),e},a.donut=function(a,b,c,d,e,f,g){var h,i=this.getPositionByAngle,j=i(b,c,d,f),k=i(b,c,d,g),l=i(b,c,e,f),m=i(b,c,e,g),n=g-f>180;(g-f)%360!==0?(h=["M",j.x,j.y,"A",d,d,0,+n,1,k.x,k.y,"L",m.x,m.y,"A",e,e,0,+n,1,l.x,l.y,"L",j.x,j.y,"z"],a.path(h)):a.circle(b,c,d)},a}());b.GaugeUtil=d,Raphael.fn.isoTri=function(a,b,c,d,e){var f,g=a,h=b+d/2,i=a+c,j=b,k=a+c,l=b+d;return 3==e?(g=a,h=b,i=a-c/2,j=b+d,k=a+c/2,l=b+d):0===e?(g=a-c/2,h=b-d/2,i=a-c/2,j=b+d/2,k=a+c/2,l=b):1===e&&(g=a-c/2,h=b,i=a+c/2,j=b-d/2,k=a+c/2,l=b+d/2),f=["M",g,h,"L",i,j,"L",k,l,"z"],this.path(f.join(" "))};var e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._create=function(){var a,b=this,d=b.options;window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c)),b.element.is(":hidden")&&b.element.wijAddVisibilityObserver&&b.element.wijAddVisibilityObserver(function(){b.redraw(),b.element.wijRemoveVisibilityObserver&&b.element.wijRemoveVisibilityObserver()},"wijgauge"),isNaN(d.width)&&b._setDefaultWidth(),isNaN(d.height)&&b._setDefaultHeight(),b._setDefaultWidthHeight(),d.disabled&&b.disable(),d.face&&d.face.template&&"string"==typeof d.face.template&&window[d.face.template]&&(d.face.template=window[d.face.template]),d.pointer&&d.pointer.template&&"string"==typeof d.pointer.template&&window[d.pointer.template]&&(d.pointer.template=window[d.pointer.template]),d.cap&&d.cap.template&&"string"==typeof d.cap.template&&window[d.cap.template]&&(d.cap.template=window[d.cap.template]),b.element.addClass(d.wijCSS.widget).toggleClass(d.wijCSS.stateDisabled,d.disabled);try{b.canvas=Raphael(b.element[0],d.width,d.height)}catch(e){var f=b.element.css("display");a=c("<div></div>").insertBefore(b.element).append(b.element),b.element.addClass("ui-helper-hidden-accessible").appendTo(c("body")),"none"===f&&b.element.css("display","block"),b.canvas=Raphael(b.element[0],d.width,d.height),b.element.appendTo(a).unwrap().removeClass("ui-helper-hidden-accessible"),"none"===f&&b.element.css("display","none")}b._autoCalculate(),b._draw(),b._bindResizeEvent()},b.prototype._setDefaultWidth=function(){},b.prototype._setDefaultHeight=function(){},b.prototype._setDefaultWidthHeight=function(){var a=this,b=a.element,c=a.options,d=b.get(0).style,e=d.width,f=d.height;""!==e&&(c.width=b.width()),""!==f&&(c.height=b.height())},b.prototype._autoCalculate=function(){},b.prototype._setOption=function(b,d){var e=this,f=e.options,g=f[b];if("disabled"===b)e._handleDisabledOption(d,e.element),a.prototype._setOption.call(this,b,d);else if("value"===b)e._trigger("beforeValueChanged",null,{"newValue":d,"oldValue":g})&&(a.prototype._setOption.call(this,b,d),e._set_value(d,g)),e._trigger("valueChanged",null,{"newValue":d,"oldValue":g});else{if(a.prototype._setOption.call(this,b,d),c.isPlainObject(d)&&(f[b]=c.extend({},g,d)),"auto"===f.radius)return e._autoCalculate(),void e.redraw();e["_set_"+b]&&e["_set_"+b](d,g)}},b.prototype._set_value=function(a,b){this._setPointer()},b.prototype._set_autoResize=function(){this._unbindResizeEvent(),this._bindResizeEvent()},b.prototype._set_max=function(){this._redrawMarksAndLabels(),this._set_ranges(),this._setPointer()},b.prototype._set_min=function(){this._redrawMarksAndLabels(),this._set_ranges(),this._setPointer()},b.prototype._set_width=function(){this.redraw()},b.prototype._set_height=function(){this.redraw()},b.prototype._set_isInverted=function(){this.redraw()},b.prototype._set_tickMajor=function(){this._redrawMarksAndLabels()},b.prototype._set_tickMinor=function(){this._redrawMarksAndLabels()},b.prototype._set_pointer=function(){var a=this;a.pointer&&(a.pointer.wijRemove(),a.pointer=null),a._paintPointer(),a._setPointer()},b.prototype._set_islogarithmic=function(){var a=this;a._redrawMarksAndLabels(),a._setPointer()},b.prototype._set_logarithmicBase=function(){var a=this;a._redrawMarksAndLabels(),a._setPointer()},b.prototype._set_labels=function(){this._redrawMarksAndLabels()},b.prototype._set_margin=function(a,b){a!==b&&this.redraw()},b.prototype._set_marginTop=function(a,b){this._set_margin(a,b)},b.prototype._set_marginBottom=function(a,b){this._set_margin(a,b)},b.prototype._set_marginLeft=function(a,b){this._set_margin(a,b)},b.prototype._set_marginRight=function(a,b){this._set_margin(a,b)},b.prototype._set_ranges=function(){var a=this;a._removeRanges(),a._paintRanges(),a._resetElementPosition()},b.prototype._set_face=function(){var a=this;a.face&&(a.face.wijRemove(),a.face=null,a._paintFace(),a._resetElementPosition(!0))},b.prototype._clearState=function(){var a=this;a.labels=[],a.majorMarks=[],a.minorMarks=[],a.face=null,a.pointer=null},b.prototype._resetElementPosition=function(a){var b=this;a&&b.ranges&&c.each(b.ranges,function(a,b){b.toFront()}),b.majorMarks&&c.each(b.majorMarks,function(a,b){b.toFront()}),b.minorMarks&&c.each(b.minorMarks,function(a,b){b.toFront()}),b.labels&&c.each(b.labels,function(a,b){b.toFront()}),b.pointer&&b.pointer.toFront(),b.cap&&b.cap.toFront()},b.prototype._redrawMarksAndLabels=function(){var a=this;a._removeMarksAndLabels(),a._drawMarksAndLabels()},b.prototype._removeMarksAndLabels=function(){var a=this;c.each(a.labels,function(b,c){c.wijRemove(),a.labels[b]=null}),c.each(a.majorMarks,function(b,c){c.wijRemove(),a.majorMarks[b]=null}),c.each(a.minorMarks,function(b,c){c.wijRemove(),a.minorMarks[b]=null})},b.prototype._drawMarksAndLabels=function(){var a=this;a.labels=[],a.majorMarks=[],a.minorMarks=[],a._paintMarks()},b.prototype._handleDisabledOption=function(a,b){var c=this;a?(c.disabledDiv||(c.disabledDiv=c._createDisabledDiv(b)),c.disabledDiv.appendTo("body")):c.disabledDiv&&(c.disabledDiv.remove(),c.disabledDiv=null)},b.prototype._createDisabledDiv=function(a){var b,d=this,e=d.options,f=a||d.element,g=f.offset(),h=e.width||f.outerWidth(),i=e.height||f.outerHeight();return b=c("<div></div>").css({"z-index":"99999","position":"absolute","width":h,"height":i,"left":g.left,"top":g.top}),Raphael.vml&&b.addClass(e.stateDisabled).css("background-color","#fff"),b},b.prototype._triggerPainted=function(){return this._trigger("painted")},b.prototype._draw=function(){var a=this,b=a.options;a.pointer=null,a._innerBbox={"width":b.width-b.marginLeft-b.marginRight,"height":b.height-b.marginTop-b.marginBottom,"left":b.marginLeft,"top":b.marginTop},a.face=a._paintFace(),a.ranges&&a._removeRanges(),a._paintRanges(),a._drawMarksAndLabels(),a._paintPointer(),a.pointer&&(a._setOffPointerValue(),a._setPointer()),c.wijraphael.clearRaphaelCache(),a._triggerPainted()},b.prototype.redraw=function(){var a=this,b=a.options;a.element.empty(),this._clearState(),a.canvas=Raphael(a.element[0],b.width,b.height),a._draw()},b.prototype.destroy=function(){var b=this;b._unbindEvents(b.majorMarks),b._unbindEvents(b.minorMarks),b._unbindEvents(b.labels),b._unbindResizeEvent(),b.element.removeClass("ui-widget").empty(),b.disabledDiv&&(b.disabledDiv.remove(),b.disabledDiv=null),a.prototype.destroy.call(this)},b.prototype.getCanvas=function(){return this.canvas},b.prototype._percentage=function(){var a=this,b=a.options,c=b.max,d=b.min,e=b.value;return isNaN(e)?0:c===d?1:(e-d)/(c-d)},b.prototype._valueToLogical=function(a){var b,c,e=this,f=e.options,g=f.min,h=f.max,i=f.logarithmicBase;return g>a?0:a>h?1:(b=(a-g)/(h-g),c=f.islogarithmic?d.log(1+(i-1)*b,f.logarithmicBase):b)},b.prototype._logicalToValue=function(a){var b,c=this,d=c.options,e=d.max,f=d.min;if(0>a)return f;if(a>=1)return e;if(d.islogarithmic){if(d.logarithmicBase<=1)return d.min;b=(Math.pow(d.logarithmicBase,a)-1)/(d.logarithmicBase-1)}else b=a;return f+(e-f)*b},b.prototype._bindResizeEvent=function(){var a=this;this.resizeIntent=250,this.options.autoResize&&this.element.on("resize."+this.widgetName,function(){clearTimeout(a.resizeTimer),a.resizeTimer=setTimeout(function(){a.redraw()},a.resizeIntent)})},b.prototype._unbindResizeEvent=function(){this.element.off("resize."+this.widgetName)},b.prototype._bindClickEvents=function(a){var b=this;c.each(a,function(a,d){c(d.node).bind("click."+b.widgetName,function(a){b._trigger("click",a,{"ele":d})})})},b.prototype._unbindEvents=function(a){var b=this;c.each(a,function(a,d){c(d.node).unbind("."+b.widgetName)})},b.prototype._setOffPointerValue=function(){},b.prototype._setPointer=function(){},b.prototype._paintPointer=function(){},b.prototype._paintFace=function(){},b.prototype._paintRanges=function(){var a=this,b=a.options,d=b.ranges||[];a.ranges=[],c.each(d,function(b,c){a._paintRange(c)})},b.prototype._paintRange=function(a){},b.prototype._removeRanges=function(){var a=this;c.each(a.ranges,function(b,c){c.wijRemove(),a.ranges[b]=null})},b.prototype._paintMarks=function(){var a=this,b=a.options,e=d.generateValues,f=e(b.min,b.max,b.tickMajor.interval),g=e(b.min,b.max,b.tickMinor.interval),h=b.labels,i=h.visible;b.tickMajor.visible&&c.each(f,function(c,d){a.majorMarks.push(a._paintMark(d,b.tickMajor,!0)),i&&a.labels.push(a._paintLabel(d,h))}),b.tickMinor.visible&&c.each(g,function(d,e){var g=!1;c.each(f,function(a,b){return e===b?(g=!0,!1):void 0}),g||a.minorMarks.push(a._paintMark(e,b.tickMinor,!1))}),a._bindClickEvents(a.majorMarks),a._bindClickEvents(a.minorMarks),a._bindClickEvents(a.labels)},b.prototype._paintMark=function(a,b,c){},b.prototype._paintLabel=function(a,b){},b}(a.wijmoWidget);b.wijgauge=e;var f=function(){function a(){this.value=0,this.max=100,this.min=0,this.width=600,this.height=400,this.autoResize=!0,this.tickMajor={"position":"inside","style":{"fill":"#1E395B","stroke":"none"},"factor":2,"visible":!0,"marker":"rect","offset":0,"interval":10},this.tickMinor={"position":"inside","style":{"fill":"#1E395B","stroke":"none"},"factor":1,"visible":!1,"marker":"rect","offset":0,"interval":5},this.pointer={"length":1,"style":{"fill":"#1E395B","stroke":"#1E395B"},"width":8,"offset":0,"shape":"tri","visible":!0,"template":null},this.islogarithmic=!1,this.logarithmicBase=10,this.labels={"format":"","style":{"fill":"#1E395B","font-size":12,"font-weight":"800"},"visible":!0,"offset":0},this.animation={"enabled":!0,"duration":2e3,"easing":">"},this.face={"style":{"fill":"270-#FFFFFF-#D9E3F0","stroke":"#7BA0CC","stroke-width":4},"template":null},this.marginTop=0,this.marginRight=0,this.marginBottom=0,this.marginLeft=0,this.ranges=[],this.isInverted=!1,this.beforeValueChanged=null,this.valueChanged=null,this.painted=null}return a}();e.prototype.options=c.extend({},a.wijmoWidget.prototype.options,new f)}(a.gauge||(a.gauge={}));a.gauge}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype._setDefaultWidth=function(){var a=this.options;a.width="horizontal"===a.orientation?310:70},c.prototype._setDefaultHeight=function(){var a=this.options;a.height="horizontal"===a.orientation?70:310},c.prototype._set_orientation=function(){var a=this;a._setDefaultWidth(),a._setDefaultHeight(),a.markBbox=null,a.redraw()},c.prototype._set_xAxisLocation=function(){this.redraw()},c.prototype._set_xAxisLength=function(){this.redraw()},c.prototype._set_yAxisLocation=function(){this.redraw()},c.prototype._clearState=function(){b.prototype._clearState.call(this),this.markBbox&&(this.markBbox=null)},c.prototype._create=function(){b.prototype._create.call(this),this.element.addClass(this.options.wijCSS.linearGauge)},c.prototype._paintLabel=function(b,c){var d,e,f,g,h=this,i=h.options,j=c.format,k=c.style,l=c.offset,m=b,n=h.options.tickMajor,o=n.position||"inside";return""!==j&&(m=a.GaugeUtil.formatString(b,j)),f=h._getMarkerBbox(),g=h._getLabelBBox(m),d=h._valueToPoint(b,0),"horizontal"===i.orientation?("inside"===o?d.y=f.y-g.height:d.y=f.y+f.height+g.height/2,d.y+=l):("inside"===o?d.x=f.x-g.width/2:d.x=f.x+f.width+g.width/2,d.x+=l),e=h.canvas.text(d.x,d.y,m),e.attr(k),$.wijraphael.addClass($(e.node),i.wijCSS.linearGaugeLabel),e},c.prototype._getLabelBBox=function(a){var b,c,d=this,e=d.options;return b=d.canvas.text(0,0,a),b.attr(e.gaugeLableStyle),c=b.wijGetBBox(),b.remove(),c},c.prototype._getMarkerBbox=function(){var a,b=this,c=b.options,d=c.tickMajor;return b.markBbox||(a=b._paintMark(0,d),b.markBbox=a.wijGetBBox(),a.remove()),b.markBbox},c.prototype._paintMark=function(b,c,d){var e,f,g=this,h=g.options,i=c.marker||"rect",j="rect"===i?5:2,k=g._valueToPoint(b,0),l=c.position||"inside",m=c.offset||0,n=d?2:1,o=$.extend({},c.style);return e=j*c.factor,$.isFunction(i)?i.call(g,g.canvas,k,h):("cross"===i&&(o.stroke=o.fill),f="horizontal"===h.orientation?a.GaugeUtil.paintMarker(g.canvas,i,k.x,k.y,n,e,!0):a.GaugeUtil.paintMarker(g.canvas,i,k.x,k.y,e,n),f.attr(o),$.wijraphael.addClass($(f.node),h.wijCSS.linearGaugeMarker),g._applyPosition(f,l,m,b),f)},c.prototype._applyPosition=function(a,b,c,d){var e=0,f=0,g=this,h="horizontal"===g.options.orientation,i=a.wijGetBBox();switch(b){case"inside":h?f-=i.width/2+c:e-=i.width/2+c;break;case"outside":h?f+=i.width/2+c:e+=i.width/2+c;break;case"center":h?f-=c:e-=c}a.attr("transform","t"+e+","+f)},c.prototype._paintFace=function(){var a,b=this,c=b.options,d=b._innerBbox.width,e=b._innerBbox.height,f=b._innerBbox.left,g=b._innerBbox.top,h={"width":d,"height":e,"x":f,"y":g,"canvas":b.canvas};return c.face&&c.face.template&&$.isFunction(c.face.template)?c.face.template.call(b,h):(a=b.canvas.rect(f,g,d,e,5),c.face&&c.face.style&&a.attr(c.face.style),$.wijraphael.addClass($(a.node),c.wijCSS.linearGaugeFace),a)},c.prototype._paintPointer=function(){var a,b,c,d,e=this,f=e.options,g=e._valueToPoint(f.min,0),h=e._innerBbox.width,i=e._innerBbox.height,j=e._innerBbox.left,k=e._innerBbox.top,l=f.pointer;l.visible&&(d="horizontal"===f.orientation?i:h,c=d*l.offset,b=d*l.length,l.template&&$.isFunction(l.template)?a=l.template.call(e.canvas,g,$.extend({},f.pointer,{"offset":c,"length":b,"gaugeBBox":e._innerBbox})):(a="horizontal"===f.orientation?"rect"===l.shape?e.canvas.rect(g.x-l.width/2,i-b-c+k,l.width,b):e.canvas.isoTri(g.x,i-b-c+k,l.width,b,3):"rect"===l.shape?e.canvas.rect(h-b-c+j,g.y-l.width/2,b,l.width):e.canvas.isoTri(h-b-c+j,g.y-l.width/2,b,l.width),a.attr(l.style)),$.wijraphael.addClass($(a.node),f.wijCSS.linearGaugePointer),e.pointer=a)},c.prototype._setPointer=function(){var a=this,c=a.options;a.pointer&&(b.prototype._setPointer.call(this),a._setLinearPointer(c.value))},c.prototype._setLinearPointer=function(a){var b=this,c=b.options,d=b._valueToPoint(c.min,0),e=b._valueToPoint(a,0),f=c.animation,g={"x":0,"y":0};"horizontal"===c.orientation?g.x=e.x-d.x:g.y=e.y-d.y,f.enabled?b.pointer.stop().wijAnimate({"transform":"t"+g.x+","+g.y},f.duration,f.easing):b.pointer.attr("transform","t"+g.x+","+g.y)},c.prototype._minScreenPoint=function(a){var b=this,c=b.options,d=b._innerBbox.width,e=b._innerBbox.height,f=b._innerBbox.left,g=b._innerBbox.top,h=c.yAxisLocation+a;return"horizontal"===c.orientation?{"x":d*c.xAxisLocation+f,"y":e*h+g}:{"x":d*h+f,"y":e*(1-c.xAxisLocation)+g}},c.prototype._maxScreenPoint=function(a){var b=this,c=b.options,d=b._innerBbox.width,e=b._innerBbox.height,f=b._innerBbox.left,g=b._innerBbox.top,h=c.yAxisLocation+a,i=c.xAxisLocation+c.xAxisLength;return"horizontal"===c.orientation?{"x":d*i+f,"y":e*h+g}:{"x":d*h+f,"y":e*(1-i)+g}},c.prototype._paintRange=function(a){var b,c,d=this,e=d.options,f=isNaN(a.startValue)?0:a.startValue,g=isNaN(a.endValue)?0:a.endValue,h=isNaN(a.startWidth)?isNaN(a.width)?0:a.width:a.startWidth,i=isNaN(a.endWidth)?isNaN(a.width)?0:a.width:a.endWidth,j=a.startDistance||0,k=a.endDistance||0;f!==g&&(g>f?(b=Math.max(f,e.min),c=Math.min(e.max,g)):(b=Math.max(e.min,g),c=Math.min(e.max,f)),d._drawRange(b,c,j,k,h,i,a))},c.prototype._drawRange=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n=this,o=n.options,p=o.orientation,q=n._innerBbox.width,r=n._innerBbox.height,s=n._innerBbox.left,t=n._innerBbox.top,u=n._valueToPoint(a,0),v=n._valueToPoint(b,0);"horizontal"===p?(l=e*r,m=f*r,0!==c&&(u.y=c*r+t),0!==d&&(v.y=d*r+t),h={"x":u.x,"y":u.y-l},i={"x":v.x,"y":v.y-m}):(l=e*q,m=f*q,0!==c&&(u.x=c*q+s),0!==d&&(v.x=d*q+s),h={"x":u.x-l,"y":u.y},i={"x":v.x-m,"y":v.y}),j=["M",u.x,u.y,"L",v.x,v.y,"L",i.x,i.y,"L",h.x,h.y,"Z"],k=n.canvas.path(j.concat(" ")),k.attr(g.style),$.wijraphael.addClass($(k.node),o.wijCSS.linearGaugeRange),n.ranges.push(k)},c.prototype._valueToPoint=function(a,b){var c,d,e,f=this,g=f.options,h=g.isInverted;return g.max===g.min?{"x":0,"y":0}:(c=f._valueToLogical(a),d=f._minScreenPoint(b),e=f._maxScreenPoint(b),h?{"x":d.x*c+e.x*(1-c),"y":d.y*c+e.y*(1-c)}:{"x":d.x*(1-c)+e.x*c,"y":d.y*(1-c)+e.y*c})},c}(a.wijgauge);a.wijlineargauge=b,b.prototype.widgetEventPrefix="wijlineargauge";var c=function(){function a(){this.initSelector=":jqmData(role='wijlineargauge')",this.wijCSS={"linearGauge":"wijmo-wijlineargauge","linearGaugeLabel":"wijmo-wijlineargauge-label","linearGaugeMarker":"wijmo-wijlineargauge-mark","linearGaugeFace":"wijmo-wijlineargauge-face","linearGaugePointer":"wijmo-wijlineargauge-pointer","linearGaugeRange":"wijmo-wijlineargauge-range"},this.orientation="horizontal",this.xAxisLocation=.1,this.xAxisLength=.8,this.yAxisLocation=.5,this.width="auto",this.height="auto",this.pointer={"length":.5,"width":4,"offset":0,"visible":!0,"template":null,"shape":"tri","style":{"fill":"#1E395B","stroke":"#1E395B"}},this.marginLeft=5,this.marginTop=5,this.marginRight=5,this.marginBottom=5}return a}();b.prototype.options=$.extend(!0,{},a.wijgauge.prototype.options,new c),$.wijmo.registerWidget("wijlineargauge",b.prototype)}(a.gauge||(a.gauge={}));a.gauge}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(a){var b=180,c=9,d=5,e=function(e){function f(){e.apply(this,arguments)}return __extends(f,e),f.prototype._create=function(){var a=this;e.prototype._create.call(this),a.element.addClass(this.options.wijCSS.radialGauge)},f.prototype._set_radius=function(){var a=this;a._autoCalculate(),a.redraw()},f.prototype._set_startAngle=function(){var a=this;a._redrawMarksAndLabels(),a._setPointer()},f.prototype._set_sweepAngle=function(a){var b=this;a>360&&(b.options.endAngle=360),b._redrawMarksAndLabels(),b._setPointer()},f.prototype._set_width=function(){var a=this;a._autoCalculate(),e.prototype._set_width.call(this)},f.prototype._set_height=function(){var a=this;a._autoCalculate(),e.prototype._set_height.call(this)},f.prototype._set_origin=function(){var a=this;a._autoCalculate()},f.prototype._set_cap=function(){var a=this;a.cap&&(a.cap.wijRemove(),a.cap=null),a._paintCap(),a._positionCapWithBehindPointer()},f.prototype._set_pointer=function(){var a=this;a.pointer&&(a.pointer.wijRemove(),a.pointer=null),a._paintPointerExcludeCap(),a._setPointer(),a._positionCapWithBehindPointer()},f.prototype._clearState=function(){e.prototype._clearState.call(this),this.markBbox=null},f.prototype._valueToAngleIncludeOffset=function(c){return a.GaugeUtil.mod360(this._valueToAngle(c)+b)},f.prototype._valueToAngle=function(a){var b=this,c=b._valueToLogical(a);return b._logicalToAngle(c)},f.prototype._angleToValue=function(a){var b=this,c=b._angleToLogical(a);return b._logicalToValue(c)},f.prototype._logicalToAngle=function(a){var b=this,c=b.options,d=c.startAngle,e=c.sweepAngle,f=c.isInverted;return f?d*a+(d+e)*(1-a):d*(1-a)+(d+e)*a},f.prototype._angleToLogical=function(b){var c,d,e=this,f=e.options,g=f.startAngle,h=f.isInverted,i=a.GaugeUtil.mod360(b-g),j=f.sweepAngle;return 0===j||0===i?h?1:0:(0>j&&(i=360-i,j=-j),c=i-j,c>0?(d=360-i,d>c?1:0):h?1-i/j:i/j)},f.prototype._generatePoints=function(a,b,e,f){var g,h,i,j,k,l=this,m=(l.options.isInverted,parseInt((c+c*(Math.abs(parseInt((b-a).toString(),10))/(c*d))).toString(),10)),n=[];for(k=0;m>k;k++)g=k/(m-1),h=e+(f-e)*g,j=a+(b-a)*g,i=l._angleToValue(j),n.push(l._valueToPoint(i,h));return n},f.prototype._valueToPoint=function(a,b){var c=this,d=c._valueToAngleIncludeOffset(a)*Math.PI/180,e=b;return{"x":e*Math.cos(d),"y":e*Math.sin(d)}},f.prototype._pointToValue=function(b){var c=a.GaugeUtil.mod360(180*Math.atan2(b.x,-b.y)/Math.PI);return this._angleToValue(c)},f.prototype._radiusScreen=function(a){var b=this,c=b.options;return Math.max(c.radius*a,0)},f.prototype._autoCalculate=function(){var b,c,d,e,f=this,g=f.options,h=g.width,i=g.height,j=a.GaugeUtil.formatString(g.max,g.labels.format),k=0,l=i-g.marginTop-g.marginBottom,m=h-g.marginLeft-g.marginRight;f.centerPoint={"x":g.marginLeft+m*g.origin.x,"y":g.marginTop+l*g.origin.y},f.radius=g.radius,"auto"===g.radius&&(f.faceRadius=Math.min(m,l)/2,e=f._getFaceBorder(),f.faceRadius-=e,b=f._getMarkerbbox(g.tickMajor).width,c=f._getMarkerbbox(g.tickMinor).width,d=f._getLabelBBox(j).width,"center"===g.tickMajor.position?(k-=b/2,k-=d):"outside"===g.tickMajor.position&&(k-=b,k-=d),"center"===g.tickMinor.position?k=Math.min(k,-c/2):"outside"===g.tickMinor.position&&(k=Math.min(k,-c)),f.radius=f.faceRadius+k,"inside"!==g.tickMajor.position&&(f.faceRadius+=k))},f.prototype._getFaceBorder=function(){var a=this,b=a._paintFace(),c=b.attr("stroke-width")||1;return"set"===b.type&&(c=b[0].attr("stroke-width")||1),b.wijRemove(),c},f.prototype._getMaxRangeWidth=function(){var a=this,b=a.options,c=0;return $.each(b.ranges,function(a,b){c=Math.max(c,b.width||0),c=Math.max(c,b.startWidth||0),c=Math.max(c,b.endWidth||0)}),c},f.prototype._getMarkerbbox=function(a){var b=this,c=b._paintMarkEle(a),d=c.wijGetBBox();return c.wijRemove(),{"width":d.width,"height":d.height}},f.prototype._paintMark=function(a,b,c){var d,e=this,f=b.position||"inside",g=b.offset||0;return d=e._paintMarkEle(b),d.attr(b.style),$.wijraphael.addClass($(d.node),e.options.wijCSS.radialGaugeMarker),$(d.node).data("value",a),e._applyAlignment(d,f,g),e._setMarkValue(a,d),d},f.prototype._applyAlignment=function(a,b,c){if(a){var d=a.wijGetBBox(),e=d.width/2,f=0;switch(b){case"outside":f-=e+c;break;case"inside":f+=e+c}a.transform("t"+f+",0")}},f.prototype._paintMarkEle=function(b){var c,d=this,e=d.options,f={"x":d.centerPoint.x-d.radius,"y":d.centerPoint.y},g=b.marker||"circle",h="rect"===g?5:2,i=2,j=b.style["stroke-width"]||0;return("tri"===g||"invertedTri"===g)&&(h=5,i=3),"cross"===g&&(b.style.fill=b.style.stroke||b.style.fill),isNaN(f.x)&&(f.x=0),c=h*b.factor,i+=2*j,c+=2*j,$.isFunction(g)?g.call(d,d.canvas,f,e):"tri"===g?d.canvas.isoTri(f.x,f.y,c,i,1):"invertedTri"===g?d.canvas.isoTri(f.x,f.y,c,i,0):a.GaugeUtil.paintMarker(d.canvas,g,f.x,f.y,c,i,!0)},f.prototype._setMarkValue=function(a,b){var c=this,d=c._valueToAngle(a);b.transform(Raphael.format("r{0},{1},{2}...",d,c.centerPoint.x,c.centerPoint.y))},f.prototype._paintLabel=function(b,c){var d,e,f,g,h,i=this,j=i._valueToAngle(b),k=c.format,l=c.style,m=c.offset,n=b.toString(),o=i.options.tickMajor,p=o.position||"inside";switch(""!==k&&(n=a.GaugeUtil.formatString(b,k)),f=i._getMarkerBbox(),h=i._getLabelBBox(n),p){case"inside":g=f.x+f.width+h.width/2;break;case"outside":g=f.x-h.width/2;break;default:g=f.x-h.width/2}return g=i.centerPoint.x-g+m,d=a.GaugeUtil.getPositionByAngle(i.centerPoint.x,i.centerPoint.y,g,j),e=i.canvas.text(d.x,d.y,n),e.attr(l),$.wijraphael.addClass($(e.node),i.options.wijCSS.radialGaugeLabel),e},f.prototype._getLabelBBox=function(a){var b,c,d=this,e=d.options;return b=d.canvas.text(0,0,a),b.attr(e.gaugeLableStyle),c=b.wijGetBBox(),b.wijRemove(),c},f.prototype._getMarkerBbox=function(){var a,b=this,c=b.options,d=c.tickMajor;return b.markBbox||(a=b._paintMarkEle(d),b._applyAlignment(a,d.position,d.offset||0),b.markBbox=a.wijGetBBox(),a.wijRemove()),b.markBbox},f.prototype._paintFace=function(){var a,b,c=this,d=c.options,e=Math.min(d.width,d.height)/2;return c.faceRadius&&(e=c.faceRadius),d.face&&d.face.template&&$.isFunction(d.face.template)?(b={"canvas":c.canvas,"r":e,"origin":{"x":c.centerPoint.x,"y":c.centerPoint.y}},d.face.template.call(c,b)):(a=c.canvas.circle(c.centerPoint.x,c.centerPoint.y,e),d.face&&d.face.style&&a.attr(d.face.style),$.wijraphael.addClass($(a.node),d.wijCSS.radialGaugeFace),a)},f.prototype._paintPointer=function(){var a=this,b=a.options;a._paintPointerExcludeCap(),b.cap&&b.cap.visible&&(a._paintCap(),a._positionCapWithBehindPointer())},f.prototype._paintPointerExcludeCap=function(){var a,b=this,c=b.options,d=c.pointer,e=b.radius*d.length,f={"x":b.centerPoint.x-e+d.offset*b.radius,"y":b.centerPoint.y-d.width/2};d.visible&&(d.template&&$.isFunction(d.template)?a=d.template.call(b.canvas,f,$.extend({},d,{"length":e})):(a="rect"===d.shape?b.canvas.rect(f.x-d.width/2,f.y,e,d.width):b.canvas.isoTri(f.x-d.width/2,f.y,e,d.width),a.attr(d.style)),b.pointer=a,$.wijraphael.addClass($(a.node),c.wijCSS.radialGaugePointer))},f.prototype._paintCap=function(){var a,b=this,c=b.options,d=c.cap;return d&&d.template&&$.isFunction(d.template)?(a={"canvas":b.canvas,"origin":{"x":b.centerPoint.x,"y":b.centerPoint.y}},b.cap=d.template.call(b,a),b.cap):(b.cap=b.canvas.circle(b.centerPoint.x,b.centerPoint.y,d.radius),d&&d.style&&b.cap.attr(d.style),$.wijraphael.addClass($(b.cap.node),c.wijCSS.radialGaugeCap),b.cap)},f.prototype._positionCapWithBehindPointer=function(){var a=this,b=a.options;b.cap&&b.cap.visible&&(b.cap.behindPointer?a.pointer&&a.pointer.toFront():a.cap&&a.cap.toFront())},f.prototype._paintRange=function(a){var b,c,d=this,e=d.options,f=isNaN(a.startValue)?0:a.startValue,g=isNaN(a.endValue)?0:a.endValue,h=isNaN(a.startWidth)?isNaN(a.width)?0:a.width:a.startWidth,i=isNaN(a.endWidth)?isNaN(a.width)?0:a.width:a.endWidth,j=a.startDistance||1,k=a.endDistance||1;f!==g&&(g>f?(b=Math.max(f,e.min),c=Math.min(e.max,g)):(b=Math.max(e.min,g),c=Math.min(e.max,f)),j*=d.radius,k*=d.radius,d._drawRange(b,c,j,k,h,i,a))},f.prototype._drawRange=function(a,b,c,d,e,f,g){var h,i,j=this,k=j._valueToAngle(a),l=j._valueToAngle(b),m=j._generatePoints(k,l,e+c,f+d),n=j._generatePoints(k,l,c,d),o="";for($.each(m,function(a,b){o+=0===a?"M"+$.round(b.x+j.centerPoint.x)+" "+$.round(b.y+j.centerPoint.y):"L"+$.round(b.x+j.centerPoint.x)+" "+$.round(b.y+j.centerPoint.y)}),h=n.length-1;h>=0;h--)o+="L"+$.round(n[h].x+j.centerPoint.x)+" "+$.round(n[h].y+j.centerPoint.y);o+="Z",i=j.canvas.path(o),i.attr(g.style),j.ranges.push(i),$.wijraphael.addClass($(i.node),j.options.wijCSS.radialGaugeRange)},f.prototype._setOffPointerValue=function(){var a=this,b=a._valueToAngle(0);a.pointer.transform(Raphael.format("r{0},{1},{2}",b,a.centerPoint.x,a.centerPoint.y))},f.prototype._setPointer=function(){var a=this,b=a.options,c=a._valueToAngle(b.value),d=b.animation;a.pointer&&(e.prototype._setPointer.call(this),d.enabled?a.pointer.stop().wijAnimate({"transform":"r"+c+","+a.centerPoint.x+","+a.centerPoint.y},d.duration,d.easing):a.pointer.transform(Raphael.format("r{0},{1},{2}",c,a.centerPoint.x,a.centerPoint.y)))},f}(a.wijgauge);a.wijradialgauge=e,e.prototype.widgetEventPrefix="wijradialgauge";var f=function(){function a(){this.initSelector=":jqmData(role='wijradialgauge')",this.wijCSS={"radialGauge":"wijmo-wijradialgauge","radialGaugeLabel":"wijmo-wijradialgauge-label","radialGaugeMarker":"wijmo-wijradialgauge-mark","radialGaugeFace":"wijmo-wijradialgauge-face","radialGaugePointer":"wijmo-wijradialgauge-pointer","radialGaugeCap":"wijmo-wijradialgauge-cap","radialGaugeRange":"wijmo-wijradialgauge-range"},this.radius="auto",this.startAngle=0,this.sweepAngle=180,this.pointer={"length":.8,"style":{"fill":"#1E395B","stroke":"#1E395B"},"width":8,"offset":.15,"shape":"tri","visible":!0,"template":null},this.origin={"x":.5,"y":.5},this.labels={"format":"","style":{"fill":"#1E395B","font-size":12,"font-weight":"800"},"offset":30,"visible":!0},this.tickMinor={"position":"inside","offset":30,"style":{"fill":"#1E395B"},"visible":!0,"factor":1,"marker":"rect","interval":5},this.tickMajor={"position":"inside","offset":27,"style":{"fill":"#1E395B","stroke":"#1E395B","stroke-width":1},"visible":!0,"interval":10,"factor":2,"marker":"rect"},this.cap={"radius":15,"style":{"fill":"#1E395B","stroke":"#1E395B"},"behindPointer":!1,"visible":!0,"template":null
},this.face={"style":{"fill":"r(0.9, 0.60)#FFFFFF-#D9E3F0","stroke":"#7BA0CC","stroke-width":4},"template":null}}return a}();e.prototype.options=$.extend(!0,{},a.wijgauge.prototype.options,new f),$.wijmo.registerWidget("wijradialgauge",e.prototype)}(a.gauge||(a.gauge={}));a.gauge}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery;!window.S&&window.swfobject&&(window.S={"flash":window.swfobject});var d=function(b){function d(){b.apply(this,arguments)}return __extends(d,b),d.prototype._keyDownHandler=function(b){var c=this.options,d=this,e=a.getKeyCodeEnum();if(b.keyCode&&b.keyCode===e.ESCAPE)return d._isFullSize()?d._toggleFullSize():c.closeOnEscape&&d._close(),void b.preventDefault();if(c.keyNav&&b.keyCode)switch(b.keyCode){case e.LEFT:case e.DOWN:d.back(),b.preventDefault();break;case e.RIGHT:case e.UP:d.next(),b.preventDefault();break;case e.HOME:c.groupItems.length>0&&d.show(0),b.preventDefault();break;case e.END:c.groupItems.length>0&&d.show(c.groupItems.length-1),b.preventDefault()}},d.prototype._create=function(){var a=this.options,b=this;window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c)),a.groupItems||(a.groupItems=[]),this._defaults={"transAnimation":{"animated":"fade","duration":400,"easing":"linear"},"resizeAnimation":{"animated":"sync","duration":400},"textShowOption":{"duration":300,"easing":"linear"},"textHideOption":{"duration":300,"easing":"linear"}},this._parse(),this.container=c("<div/>").addClass("wijmo-wijlightbox "+a.wijCSS.widget+" wijmo-wijlightbox-controls-"+a.controlsPosition).css("z-index",a.zIndex).attr({"tabIndex":-1,"role":"dialog"}).bind("keydown.wijlightbox",c.proxy(b,"_keyDownHandler")).appendTo(document.body).hide(),this.frame=c("<div></div>").addClass(["wijmo-wijlightbox-frame",a.wijCSS.content,a.wijCSS.cornerAll,a.wijCSS.helperClearFix].join(" ")).appendTo(this.container),this.content=c("<div></div>").addClass("wijmo-wijlightbox-content").appendTo(this.frame),void 0===a.activeIndex?("number"!=typeof a.activeIndex&&a.cookie&&(a.activeIndex=parseInt(b._cookie(),10)),a.activeIndex=a.activeIndex||(a.groupItems.length?0:-1)):null===a.activeIndex&&(a.activeIndex=-1),a.activeIndex=a.activeIndex>=0&&a.groupItems[a.activeIndex]||a.activeIndex<0?a.activeIndex:0,this._initClickBehavior(),this._createTimerBar(),this._createDialogButtons(),this._createCtrlButtons(),this._createText(),this._createCounter(),this._refreshCounter(),this.toolBox&&this.toolBox.find(".wijmo-wijlightbox-toolbox-button").bind({"mouseover":function(){b._addState("hover",c(this))},"mouseout":function(){b._removeState("hover",c(this))},"mousedown":function(){b._addState("active",c(this))},"mouseup":function(){b._removeState("active",c(this))}}),this._groupMode()&&this._createNavButtons(),this._initHoverBehavior(),this.container.width(this.frame.outerWidth())},d.prototype.destroy=function(){var a=this.options,b=this;return this._hideWaiting(),this._hideOverlay(),a.cookie&&this._cookie(null,a.cookie),this.container.remove(),c.Widget.prototype.destroy.apply(b,arguments),b},d.prototype._setOption=function(a,b){var d=this.options[a];switch(c.Widget.prototype._setOption.apply(this,arguments),a){case"groupItems":this.options.activeIndex>=b.length?this.show(b.length-1):this.options.activeIndex<0&&b.length?this.show(0):this.show(this.options.activeIndex);break;case"activeIndex":this.show(b);break;case"textPosition":this._resetText();break;case"clickPause":this._initClickBehavior();break;case"showNavButtons":this._createNavButtons();break;case"showControlsOnHover":this._initHoverBehavior();break;case"controlsPosition":this._set_controlsPosition(d,b)}},d.prototype._set_controlsPosition=function(a,b){a!==b&&(this._removeCounter(),this._removeNavButtons(),this.container.removeClass("wijmo-wijlightbox-controls-outside wijmo-wijlightbox-controls-inside").addClass("wijmo-wijlightbox-controls-"+b),this._createCounter(),this._createNavButtons())},d.prototype._initClickBehavior=function(){var a=this.options,b=this;this.content.unbind("click"),a.clickPause?this._groupMode()&&this.content.click(function(){b[b.isPlaying()?"stop":"play"]()}):this._groupMode()&&this.content.click(function(d){if(b.isPlaying())return!1;var e=c.extend({},c(this).offset(),{"width":c(this).outerWidth(!0),"height":c(this).outerHeight(!0)});d.pageX>=e.left&&d.pageX<e.left+e.width/2?b.backBtn.hasAllClasses(a.wijCSS.stateDisabled)||b.back():b.nextBtn.hasAllClasses(a.wijCSS.stateDisabled)||b.next()})},d.prototype._initHoverBehavior=function(){var a=this.options,b=this;this.frame.unbind(".wijlightbox"),a.showControlsOnHover&&this.frame.bind({"mouseenter.wijlightbox":function(){return b.container.data("moving.wijlightbox")?!1:void b._showAccessories(!0)},"mouseleave.wijlightbox":function(){return b.container.data("moving.wijlightbox")?!1:void b._hideAccessories(!0)},"mousemove.wijlightbox":function(){b.container.data("moving.wijlightbox")===!1&&b.container.data("accessvisible.wijlightbox")===!1&&b.frame.trigger("mouseenter")}})},d.prototype._getPlugins=function(){var a,b,d,e=this.container.data("plugins.wijlightbox");return e||(e={},window.navigator.plugins&&window.navigator.plugins.length?(a=[],c.each(window.navigator.plugins,function(b,c){a.push(c.name)}),a=a.join(","),d=a.indexOf("Flip4Mac")>-1,e={"fla":a.indexOf("Shockwave Flash")>-1,"qt":a.indexOf("QuickTime")>-1,"wmp":!d&&a.indexOf("Windows Media")>-1,"f4m":d}):(b=function(a){var b;try{b=new ActiveXObject(a)}catch(c){}return!!b},e={"fla":b("ShockwaveFlash.ShockwaveFlash"),"qt":b("QuickTime.QuickTime"),"wmp":b("wmplayer.ocx"),"f4m":!1}),this.container.data("plugins.wijlightbox",e)),e},d.prototype._sanitizeSelector=function(a){return a.replace(/:/g,"\\:")},d.prototype._getFragmentId=function(a){var b=/^#.+/,d=c(a).attr("href")||"",e=d.split("#")[0],f=c("base")[0];return e&&(e===window.location.toString().split("#")[0]||f&&e===f.attributes.href)&&(d=a.hash,a.href=d),b.test(d)?this._sanitizeSelector(d):""},d.prototype._parseLink=function(a){var b,d,e,f,g=this,h=this.options,i=c(a),j={"href":void 0,"player":void 0,"img":void 0,"gallery":void 0},k=["href","player","title","alt","height","width","gallery","wijvideosrc"];if(i.length>0&&"a"===i[0].tagName.toLowerCase()){if(b=i.attr("rel"),c.each(k,function(a,b){j[b]=i.attr(b)||""}),!j.href)return;j.player||(j.player=h.player||g._getPlayerName(j.href)),d=i.find("img"),d&&0===d.length&&(d=i),d&&d.length>=1&&(c.each(["title","alt"],function(a,b){j[b]=d.attr(b)||j[b]}),j.img=d),b&&(e=b.match(/\[(.*?)\]/),e&&(j.gallery=e[1]||j.gallery),c.each(b.split(";"),function(a,b){var c=b.match(/\s*([a-z_]*?)\s*=\s*(.+)\s*/);c&&(j[c[1]]=c[2])})),"inline"===j.player&&(j.href=g._getFragmentId(a)),j.gallery?(f=h.groupItems.length,h.groupItems[f]=j,i.bind({"click":function(a){return a.stopPropagation(),a.preventDefault(),h.disabled||g._open(d,f),!1}})):i.bind({"click":function(a){return a.stopPropagation(),a.preventDefault(),h.disabled||g._open(d,j),!1}})}},d.prototype._parse=function(){var a=this;this._parseLink(this.element),this.element.find('a[rel^="wijlightbox"], a[rel^="lightbox"]').each(function(b,c){a._parseLink(c)})},d.prototype._showAccessories=function(a){this.container.data("accessvisible.wijlightbox",!0),this._showNavButtons(a),this._showToolboxButtons(a),this._showCounter(a)},d.prototype._hideAccessories=function(a){this.container.data("accessvisible.wijlightbox",!1),this._hideNavButtons(a),this._hideToolboxButtons(a),this._hideCounter(a)},d.prototype._groupMode=function(){var a=this.options;return a.groupItems&&a.groupItems.length>1},d.prototype._resetText=function(){this._removeText(),this._createText()},d.prototype._createText=function(a){var b,d,e,f,g,h=this,i=h.options;"none"!==i.textPosition&&(this.container.find(".wijmo-wijlightbox-text").length||(b=i.textPosition.toLowerCase(),d=c("<div></div>").addClass("wijmo-wijlightbox-text wijmo-wijlightbox-text-"+b+" "+i.wijCSS.content+" "+i.wijCSS.helperClearFix),f=c("<h3></h3>").addClass("wijmo-wijlightbox-title wijmo-wijlightbox-title-"+b+" "+i.wijCSS.helperClearFix).appendTo(d),g=c("<p></p>").addClass("wijmo-wijlightbox-detail wijmo-wijlightbox-detail-"+b+" "+i.wijCSS.helperClearFix).appendTo(d),"inside"===i.textPosition?d.addClass(i.wijCSS.content+" "+i.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame):"outside"===i.textPosition?d.addClass([i.wijCSS.content,i.wijCSS.cornerAll,i.wijCSS.helperClearFix].join(" ")).width(this.frame.width()).appendTo(this.container):("overlay"===i.textPosition||"titleOverlay"===i.textPosition)&&(e=c("<div></div>").addClass("wijmo-wijlightbox-mask wijmo-wijlightbox-mask-"+b+" "+i.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame),d.width(this.frame.width()).appendTo(this.frame),"titleOverlay"===i.textPosition&&d.bind({"mouseenter":function(){e.stop(),d.stop();var a=f.outerHeight(!0)+g.outerHeight(!0),b=c.extend({},h._defaults.textShowOption,i.textShowOption,{"queue":!1});e.animate({"height":a},b),d.animate({"height":a},b)},"mouseleave":function(){e.stop(),d.stop();var a=f.height(),b=c.extend({},h._defaults.textHideOption,i.textHideOption,{"queue":!1});e.animate({"height":a},b),d.animate({"height":a},b)}})),this._refreshText(a)))},d.prototype._removeText=function(){this.container.find(".wijmo-wijlightbox-text,.wijmo-wijlightbox-mask").remove()},d.prototype._getActiveItem=function(){var a=this.options;return a.groupItems&&a.groupItems.length&&a.activeIndex>=0&&a.activeIndex<a.groupItems.length?a.groupItems[a.activeIndex]:null},d.prototype._refreshText=function(a){var b,d,e,f,g,h=this,i=this.options;if("none"!==i.textPosition&&(b=this.container.data("item.wijlightbox")||this._getActiveItem())){d=this.container.find(".wijmo-wijlightbox-text"),e=this.container.find(".wijmo-wijlightbox-title"),f=this.container.find(".wijmo-wijlightbox-detail"),g=this.container.find(".wijmo-wijlightbox-mask"),g.stop(),d.stop(),e.html(b.title),f.html(b.alt),"outside"===i.textPosition&&d.width(this.frame.width());var j=e.outerHeight(!0),k=f.outerHeight(!0),l=c.extend({},h._defaults.textShowOption,i.textShowOption,{"queue":!1});if("overlay"===i.textPosition||"titleOverlay"===i.textPosition){var m=j+("overlay"===i.textPosition?k:0);d.height(0),g.height(0),d.animate({"height":m},l),g.animate({"height":m},l)}else a?d.height(j+k):(d.height(0),d.animate({"height":j+k},l))}},d.prototype._addState=function(a,b){b.is(":not(."+this.options.wijCSS.stateDisabled+")")&&b.addClass("ui-state-"+a)},d.prototype._removeState=function(a,b){b.removeClass("ui-state-"+a)},d.prototype._createNavButtons=function(){var a=this,b=this.options;return b.showNavButtons&&this._groupMode()?(this.backBtn||(this.backBtn=c("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-prev "+b.wijCSS.stateDefault+" "+("inside"===b.controlsPosition?b.wijCSS.cornerRight:b.wijCSS.cornerLeft)).append("<span class='"+b.wijCSS.icon+" "+b.wijCSS.iconArrowLeft+"'></span>").hide().appendTo(this.frame).bind({"click":function(){return c(this).hasAllClasses(b.wijCSS.stateDisabled)||a.back(),!1},"mouseover":function(){a._addState("hover",c(this))},"mouseout":function(){a._removeState("hover",c(this))},"mousedown":function(){a._addState("active",c(this))},"mouseup":function(){a._removeState("active",c(this))}})),void(this.nextBtn||(this.nextBtn=c("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-next "+b.wijCSS.stateDefault+" "+("inside"===b.controlsPosition?b.wijCSS.cornerLeft:b.wijCSS.cornerRight)).append("<span class='"+b.wijCSS.icon+" "+b.wijCSS.iconArrowRight+"'></span>").hide().appendTo(this.frame).bind({"click":function(){return c(this).hasAllClasses(b.wijCSS.stateDisabled)||a.next(),!1},"mouseover":function(){a._addState("hover",c(this))},"mouseout":function(){a._removeState("hover",c(this))},"mousedown":function(){a._addState("active",c(this))},"mouseup":function(){a._removeState("active",c(this))}})))):void this._removeNavButtons()},d.prototype._removeNavButtons=function(){this.backBtn&&(this.backBtn.remove(),this.backBtn=void 0),this.nextBtn&&(this.nextBtn.remove(),this.nextBtn=void 0)},d.prototype._refreshNavButtons=function(){var a,b=this.options;this.backBtn&&(a=0===b.activeIndex?"addClass":"removeClass",this.backBtn[a](b.wijCSS.stateDisabled)),this.nextBtn&&(a=b.activeIndex>=b.groupItems.length-1?"addClass":"removeClass",this.nextBtn[a](b.wijCSS.stateDisabled))},d.prototype._showNavButtons=function(a){this.isPlaying()||this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeIn(a?600:0,function(){c(this).css("opacity","")})},d.prototype._hideNavButtons=function(a){this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeOut(a?600:0)},d.prototype._createToolbox=function(){this.toolBox||(this.toolBox=c("<div></div>").addClass("wijmo-wijlightbox-toolbox").appendTo(this.frame))},d.prototype._showToolboxButtons=function(a){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeIn(a?600:0,function(){c(this).css("opacity","")})},d.prototype._hideToolboxButtons=function(a){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeOut(a?600:0)},d.prototype._createCtrlButtons=function(){var a=this,b=this.options,d=b.wijCSS;if(!b.ctrlButtons||0===b.ctrlButtons.length||!this._groupMode())return void this._removeCtrlButtons();this._createToolbox();var e=b.ctrlButtons.split("|");1===e.length&&e[0]===b.ctrlButtons&&(e=b.ctrlButtons.split(",")),c.each(e,function(e,f){f=c.trim(f),"play"!==f||this.playBtn?"stop"!==f||this.stopBtn||(a.stopBtn=c("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button","wijmo-wijlightbox-toolbox-button-stop",d.stateDefault,d.stateDisabled,d.cornerAll].join(" ")).append("<span class='"+d.icon+" "+d.iconStop+"'></span>").hide().click(function(){return a.isPlaying()&&(a.stop(),a.show(0)),!1})):a.playBtn=c("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button"," wijmo-wijlightbox-toolbox-button-play ",d.stateDefault,d.cornerAll].join(" ")).append("<span class='"+d.icon+" "+d.iconPlay+"'></span>").hide().click(function(){return a.isPlaying()?a.stop():(b.activeIndex>=b.groupItems.length-1&&a.show(0),a.play()),!1})}),this.stopBtn&&this.stopBtn.appendTo(this.toolBox),this.playBtn&&this.playBtn.appendTo(this.toolBox)},d.prototype._removeCtrlButtons=function(){this.playBtn&&(this.playBtn.remove(),this.playBtn=void 0),this.stopBtn&&(this.stopBtn.remove(),this.stopBtn=void 0)},d.prototype._refreshCtrlButtons=function(){var a=this.options.wijCSS;if(this.playBtn){var b=this.playBtn.find("."+a.icon);b&&(b.removeClass(a.iconPause+" "+a.iconPlay),b.addClass(this.isPlaying()?a.iconPause:a.iconPlay))}this.stopBtn&&this.stopBtn[this.isPlaying()?"removeClass":"addClass"](a.stateDisabled)},d.prototype._createDialogButtons=function(){var a,b=this,d=this.options;return d.dialogButtons&&0!==d.dialogButtons.length?(this._createToolbox(),a=d.dialogButtons.split("|"),1===a.length&&a[0]===d.dialogButtons&&(a=d.dialogButtons.split(",")),c.each(a,function(a,e){e=c.trim(e),"close"!==e||this.closeBtn?"fullSize"!==e||this.fullBtn||(b.fullBtn=c("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-fullsize "+d.wijCSS.stateDefault+" "+d.wijCSS.cornerAll).append("<span class='"+d.wijCSS.icon+" "+d.wijCSS.iconArrow4Diag+"'></span>").hide().click(function(){return b._toggleFullSize(),!1})):b.closeBtn=c("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-close "+d.wijCSS.stateDefault+" "+d.wijCSS.cornerAll).append("<span class='"+d.wijCSS.icon+" "+d.wijCSS.iconClose+"'></span>").hide().click(function(){return b._close(),!1})}),this.closeBtn&&this.closeBtn.appendTo(this.toolBox),this.fullBtn&&this.fullBtn.appendTo(this.toolBox),void(this.btnSep||(this.btnSep=c("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-separator").appendTo(this.toolBox)))):void this._removeDialogButtons()},d.prototype._removeDialogButtons=function(){this.closeBtn&&(this.closeBtn.remove(),this.closeBtn=void 0),this.fullBtn&&(this.fullBtn.remove(),this.fullBtn=void 0)},d.prototype._refreshDialogButtons=function(){var a=this.options.wijCSS;if(this.fullBtn){var b=this.fullBtn.find("."+a.icon);b&&(b.removeClass(a.iconArrow4Diag+" "+a.iconNewWin),b.addClass(this._isFullSize()?a.iconNewWin:a.iconArrow4Diag))}},d.prototype._createTimerBar=function(){var a=this,b=a.options;return b.showTimer&&a._groupMode()?(a._createToolbox(),void(a.timerBar||(a.timerBar=c("<div></div>").addClass("wijmo-wijlightbox-timerbar "+b.wijCSS.content+" ui-priority-secondary "+b.wijCSS.cornerAll).appendTo(a.toolBox),a.timerMeter=c("<div></div>").addClass("wijmo-wijlightbox-timermeter ui-progressbar-value "+b.wijCSS.content+" "+b.wijCSS.cornerAll).appendTo(a.toolBox)))):void a._removeTimerBar()},d.prototype._removeTimerBar=function(){this.timerMeter&&(this.timerMeter.remove(),this.timerMeter=void 0),this.timerBar&&(this.timerBar.remove(),this.timerBar=void 0)},d.prototype._createCounter=function(){var a=this,b=a.options;return b.showCounter&&a._groupMode()?void(a.counter||(a.counter=c("<div></div>").addClass("wijmo-wijlightbox-counter "+b.wijCSS.stateDefault+" "+("inside"===b.controlsPosition?b.wijCSS.cornerTL:b.wijCSS.cornerAll)).hide().appendTo(a.frame))):void a._removeCounter()},d.prototype._removeCounter=function(){this.counter&&(this.counter.remove(),this.counter=void 0)},d.prototype._refreshCounter=function(a){var b=this,d=this.options,e="";if(this.counter&&this._groupMode()&&(this.counter.empty(),d.showCounter&&d.groupItems.length>1&&this.counter)){void 0===a&&(a=d.activeIndex);var f=d.groupItems.length;if("sequence"===d.counterType){var g=0,h=f,i=parseInt(d.counterLimit,10)||0;if(i>=2&&f>i){var j=Math.floor(i/2);g=Math.min(h-i,Math.max(g,a-j)),h=Math.min(h,g+i)}for(;g!==h;)c("<a></a>").addClass("wijmo-wijlightbox-counter-item "+d.wijCSS.content+" "+d.wijCSS.stateDefault+(g===a?" wijmo-wijlightbox-counter-active "+d.wijCSS.stateActive:"")).text((++g).toString()).appendTo(this.counter);this.counter.find("a").click(function(a,d){return c(this).hasClass("wijmo-wijlightbox-counter-active")?!1:(b.show(parseInt(c(this).text(),10)-1),!1)})}else{var k=d.counterFormat||"[i] of [n]";e=k.replace("[i]",a+1),e=e.replace("[n]",f),c("<span></span>").text(e).appendTo(this.counter)}}},d.prototype._showCounter=function(a){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeIn(a?600:0,function(){c(this).css("opacity","")})},d.prototype._hideCounter=function(a){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeOut(a?600:0)},d.prototype._cookie=function(a,b){var d=this.cookie||(this.cookie=this.options.cookie.name);return c.cookie.apply(null,[d].concat(c.makeArray(arguments)))},d.prototype._showOverlay=function(){this.container.data("overlay.wijlightbox")||this.container.data("overlay.wijlightbox",new c.wijmo.wijlightbox.overlay(this))},d.prototype._hideOverlay=function(){var a=this.container.data("overlay.wijlightbox");a&&(a.close(),this.container.removeData("overlay.wijlightbox"))},d.prototype._hasOverlay=function(){return this.container.hasData("overlay.wijlightbox")},d.prototype._showWaiting=function(){this.container.data("waiting.wijlightbox")||this.container.data("waiting.wijlightbox",new c.wijmo.wijlightbox.overlay(this,!0))},d.prototype._hideWaiting=function(){var a=this.container.data("waiting.wijlightbox");a&&(a.close(),this.container.removeData("waiting.wijlightbox"))},d.prototype._hasWaiting=function(){return this.container.hasData("waiting.wijlightbox")},d.prototype._getUrl=function(a){var b=this.options,c="string"==typeof a?a:a.href,d=b.rootUrl;return d&&d.length>0&&(-1===d.indexOf("//")&&(d=window.location.protocol+"//"+window.location.host+(d.startsWith("/")?"":"/")+d),"/"!==d.substr(d.length-1,1)&&(d+="/"),c=d+("/"===c.substr(0,1)?c.substr(1):c)),c},d.prototype._preload=function(){var a,b=this.options;for(a=Math.max(0,b.activeIndex);a<Math.min(b.activeIndex+5,b.groupItems.length);a++)b.groupItems[a].image||(b.groupItems[a].image=new Image,b.groupItems[a].image.src=this._getUrl(b.groupItems[a]))},d.prototype._slideAnimate=function(a,b,d){var e,f=["position","top","bottom","left","right","width","height"],g=c.setMode(b,a.mode||"show"),h="show"===g,i=a.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l={};c.save(b,f),b.show(),e=a.distance||b["top"===j?"outerHeight":"outerWidth"](!0),c.createWrapper(b).css({"overflow":"hidden"}),h&&b.css(j,k?isNaN(e)?parseInt("-"+e):-e:e),l[j]=(h?k?"+=":"-=":k?"-=":"+=")+e,b.animate(l,{"queue":!1,"duration":a.duration,"easing":a.easing,"complete":function(){"hide"===g&&b.hide(),c.restore(b,f),c.removeWrapper(b),d()}})},d.prototype._slideTo=function(a,b,d,e,f){var g,h,i,j,k,l,m,n,o=this.options,p=this,q=a.getElement();q.parent().is(".wijmo-wijlightbox-aniwrapper")?g=q.parent():(g=c.createWrapper(q).css({"overflow":"hidden"}),g.removeClass("ui-effects-wrapper"),g.addClass("wijmo-wijlightbox-aniwrapper")),g.parent().is(".wijmo-wijlightbox-aniwrapper")?h=g.parent():(h=c.createWrapper(g).css({"overflow":"hidden"}),h.removeClass("ui-effects-wrapper"),h.addClass("wijmo-wijlightbox-aniwrapper")),i=o.slideDirection||"horizontal",j=q.outerWidth(),k=q.outerHeight(),"horizontal"===i?(q.width(j).css("float",e?"left":"right"),g.width(2*j).css({"left":e?0:-1*j,"position":"absolute"})):(q.height(k),g.width(j).css({"top":e?0:-1*k,"position":"absolute"}).height(2*k)),b.appendTo(g),l=b.getElement(),"horizontal"===i?l.width(j).css("float",e?"left":"right"):l.height(k),this.container.data("animating.wijlightbox",!0),m=function(){for(q=g.children(":last");q.parent().is(".wijmo-wijlightbox-aniwrapper");)q.parent().replaceWith(q);q.css({"float":"","width":"","height":""}),o.autoSize&&!p._isFullSize()?p._resize(f):(c.isFunction(f)&&f.apply(p),p._refreshText())},n={"mode":"hide","direction":"horizontal"===i?e?"left":"right":e?"up":"down","easing":d.easing,"distance":"horizontal"===i?j:k,"duration":d.duration},c.effects?g.effect("slide",n,m):p._slideAnimate(n,g,m)},d.prototype._moveFrom=function(a,b,d){var e,f=this,g=this.options;return c.isFunction(b)?(d=b,b=c.extend({},f._defaults.resizeAnimation,g.resizeAnimation)):b=c.extend({},f._defaults.resizeAnimation,g.resizeAnimation,b),f._removeText(),"none"===b.animated||b.duration<=0?(f._createText(),c.isFunction(d)&&d.apply(f),void this.container.data("moving.wijlightbox",!1)):(e=c.extend({"width":f.frame.width(),"height":f.frame.height()},f.container.offset()),f.frame.width(a.width).height(a.height),f.container.css({"left":a.left,"top":a.top,"width":f.frame.outerWidth(),"position":"absolute","opacity":""}),void f._moveTo(e,b,function(){f.frame.width(e.width),f.container.width(f.frame.outerWidth()),f._createText(),f.container.data("moving.wijlightbox",!1),c.isFunction(d)&&d.apply(f)}))},d.prototype._moveTo=function(a,b,d){var e=this,f=this.options;c.isFunction(b)?(d=b,b=c.extend({},e._defaults.resizeAnimation,f.resizeAnimation)):b=c.extend({},e._defaults.resizeAnimation,f.resizeAnimation,b);var g=b.duration/2,h=b.animated,i=e._isOpen(),j="wh"===h?{"left":a.left,"top":void 0}:{"top":a.top},k="wh"===h?{"top":a.top,"left":void 0}:{"left":a.left},l="wh"===h?{"width":a.width,"height":void 0}:{"height":a.height},m="wh"===h?{"height":a.height,"width":void 0}:{"width":a.width};return"wh"===h||"hw"===h?(i&&e.container.animate(j,{"duration":g,"easing":b.easing,"queue":!0}),void e.frame.animate(l,{"duration":g,"easing":b.easing,"complete":function(){i&&e.container.animate(k,{"duration":g,"easing":b.easing,"queue":!0}),e.frame.animate(m,{"duration":g,"easing":b.easing,"complete":function(){e.container.data("moving.wijlightbox",!1),c.isFunction(d)&&d.apply(e)}})}})):(i&&e.container.animate({"left":a.left,"top":a.top},{"duration":b.duration,"easing":b.easing,"queue":!0}),void e.frame.animate({"width":a.width,"height":a.height,"opacity":1},{"duration":b.duration,"easing":b.easing,"complete":function(){e.container.data("moving.wijlightbox",!1),c.isFunction(d)&&d.apply(e)}}))},d.prototype.show=function(a){return this._show(a),this},d.prototype._resize=function(a){var b=this,d=c.extend({},b.container.offset(),{"width":b.frame.width(),"height":b.frame.height()});b._size(),b._isOpen()&&b._position(),b._moveFrom(d,a)},d.prototype._onAfterShow=function(){var a,b=this,c=this.options;b._refreshNavButtons(),b.container.data("animating.wijlightbox",!1),c.modal||b._hideOverlay(),a={"index":c.activeIndex,"item":c.groupItems[c.activeIndex]},b._trigger("show",null,a),b._startTimer()},d.prototype._show=function(a,b,d){var e,f,g=this,h=this.options;if(this.container.data("showing.wijlightbox"))return e=[function(){g._show(a,b,d)}],this.container.queue("showqueue",e),this;if(f=h.activeIndex,!c.isPlainObject(a)){if(f=a,0>f||f>=h.groupItems.length)return this;a=h.groupItems[f]}a&&this.container.data("item.wijlightbox",a),this._groupMode()&&this._preload(),c.isFunction(b)&&(d=b,b=void 0),d||(d=g._onAfterShow);var i={"index":f,"item":a};if(g._trigger("beforeShow",null,i)===!1)return this;this.container.data("showing.wijlightbox",!0);var j=function(){c.isFunction(d)&&d.apply(g),g.container.data("showing.wijlightbox",!1),g.container.dequeue("showqueue"),g.container.clearQueue("showqueue")};g._refreshCounter(f);var k,l=this.container.data("player.wijlightbox"),m=function(){g.container.data("playerwidth.wijlightbox",k.width),g.container.data("playerheight.wijlightbox",k.height);var a=c.extend({},g._defaults.transAnimation,h.transAnimation);if(h.activeIndex===f||"none"===a.animated||a.duration<=0||!g._isOpen())return h.activeIndex=f,l&&l.remove(),k.appendTo(g.content),g._refreshText(),void j();if(h.cookie&&g._cookie(h.activeIndex,h.cookie),"slide"===a.animated)b=void 0===b?f>h.activeIndex:b,g._slideTo(l,k,a,b,j),h.activeIndex=f;else{h.activeIndex=f;var d=function(){k&&(k.appendTo(g.content,!0),k.fadeIn(a.duration,j))};c.browser.msie&&g.frame.trigger("mouseleave");var e=function(){l&&l.remove(),h.autoSize&&!g._isFullSize()?g._resize(d):(d(),g._refreshText())};l?l.fadeOut(.4*a.duration,e):e()}};return k=this._createPlayer(a,m),this},d.prototype.next=function(){var a=this.options;if(!this._groupMode())return!1;var b=a.activeIndex+1;return a.loop&&(b%=a.groupItems.length),b<a.groupItems.length?(this._show(b,!0),!0):!1},d.prototype.back=function(){var a=this.options;if(!this._groupMode())return!1;var b=a.activeIndex-1;return a.loop&&(b=0>b?a.groupItems.length-1:b),b>=0?(this._show(b,!1),!0):!1},d.prototype.adjustPosition=function(){this._position()},d.prototype.isPlaying=function(){return!!this.container.data("playing.wijlightbox")},d.prototype._startTimer=function(){if(this.isPlaying()&&this._groupMode()){var a,b=this.options,c=this;b.showTimer===!0?(this.timerMeter||this._createTimerBar(),a=this.timerBar.width(),c.timerMeter.width("0"),c.timerMeter.animate({"width":a},b.delay,null,function(){c.isPlaying()&&!c.next()&&c.stop()})):window.setTimeout(function(){c.isPlaying()&&!c.next()&&c.stop()},b.delay)}},d.prototype.play=function(){return this._groupMode()?(this.container.data("playing.wijlightbox")||this.container.data("playing.wijlightbox",!0),this._refreshCtrlButtons(),this._hideNavButtons(),void this._startTimer()):!1},d.prototype.stop=function(){this.container.removeData("playing.wijlightbox"),this._refreshCtrlButtons(),this._removeTimerBar()},d.prototype._size=function(a,b){var d,e=this.options,f=e.width,g=e.height,h=e.autoSize?this.container.data("playerwidth.wijlightbox")||f:f,i=e.autoSize?this.container.data("playerheight.wijlightbox")||g:g,j=i/h;if("boolean"==typeof a)b=a;else if(c.isPlainObject(a)&&"width"in a&&"height"in a)f=a.width,g=a.height;else if(d=this.container.data("player.wijlightbox"),e.autoSize&&d&&"img"===d.name&&(h>f&&(h=f,i=Math.round(f*j)),i>g&&(i=g,h=Math.round(g/j))),f=h,g=i,b)return{"width":f,"height":g};this.frame.width(f).height(g),this.container.width(this.frame.outerWidth(!0))},d.prototype._position=function(){var a,b=this.options,d=[],e=[0,0],f=b.position;f&&(("string"==typeof f||"object"==typeof f&&"0"in f)&&(d=f.split?f.split(" "):[f[0],f[1]],1===d.length&&(d[1]=d[0]),c.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),f={"my":d.join(" "),"at":d.join(" "),"offset":e.join(" ")}),f=c.extend({},b.position,f)),a=this.container.is(":visible"),a||this.container.show(),this.container.css({"top":0,"left":0}).position(f),a||this.container.hide()},d.prototype._getRelRect=function(a){var b;return a&&(c.isPlainObject(a)&&"left"in a&&"top"in a&&"width"in a&&"height"in a?b=c.merge({},a):a=c(a),a.jquery&&a.length&&(b=c.extend({},a.offset(),{"width":a.width(),"height":a.height()}))),b},d.prototype._close=function(a){var b,d,e,f=this.options,g=this;if(this._isOpen()&&(d={"rel":a},!1!==this._trigger("beforeClose",null,d)))return a=d.rel,!a&&this._groupMode()&&(a=f.groupItems[f.activeIndex].img),this.container.data("moving.wijlightbox",!0),this._hideAccessories(!1),this._hideWaiting(),this._hideOverlay(),this.stop(),e=function(){g._removePlayer(),g.container.hide(),g._trigger("close"),g.container.unbind("keypress.wijlightbox"),g.container.removeData("open.wijlightbox").removeData("rect.wijlightbox").removeData("moving.wijlightbox").removeData("fullsize.wijlightbox"),c(document).unbind("keydown.wijlightbox").unbind("click.wijlightbox")},b=this._getRelRect(a),b||this.container.data("rect.wijlightbox")&&(b=this.container.data("rect.wijlightbox")),this._removeText(),b?void this._moveTo(b,{"animated":"sync","duration":200},e):(e.call(),this)},d.prototype._isOpen=function(){return!!this.container.data("open.wijlightbox")},d.prototype._open=function(a,b){if(!this._isOpen()){var d=this.options,e=this;this.toolBox&&(this._isFullSize()?this.toolBox.css({"top":"2px","right":"4px"}):this.toolBox.css({"top":"","right":""}));var f=function(){d.modal&&e._showOverlay(),d.showControlsOnHover?this._hideAccessories(!1):this._showAccessories(!1);var b=e._getRelRect(a);if(e.container.css("opacity",0),e.container.show(),e._size(),e._createText(!0),e._refreshText(!0),e._position(),e.container.data("open.wijlightbox",!0),a&&b)e.container.data("rect.wijlightbox",b),e._moveFrom(b,{"animated":"sync"});else{var f=c.extend({},e._defaults.transAnimation,d.transAnimation);"fade"===f.animated?(e.container.hide(),e.container.fadeIn(f.duration,function(){e._createText()})):e._createText(),this.container.data("moving.wijlightbox",!1)}c(document).bind("keydown.wijlightbox",c.proxy(e,"_keyDownHandler")).bind("click.wijlightbox",function(a){var b=a.target||a.srcElement;e._isOpen()&&d.closeOnOuterClick&&b!==e.container.get(0)&&c(b).parents().index(e.container)<0&&e._close()}),d.autoPlay&&this.play(),e._refreshNavButtons(),e._refreshDialogButtons();var g={"index":d.activeIndex,"item":d.groupItems[d.activeIndex]};e._trigger("show",null,g),e._trigger("open")};return this.container.data("moving.wijlightbox",!0),this._show(b,!0,f),this}},d.prototype._getWinRect=function(){var a=c(window);return c.extend({"width":a.width(),"height":a.height()},a.offset()||{"left":2,"top":2})},d.prototype._resizeHandler=function(){var a=this;a._removeText(),a._size(a._getWinRect()),a._createText()},d.prototype._isFullSize=function(){return!!this.container.data("fullsize.wijlightbox")},d.prototype._toggleFullSize=function(){var a=this,b=c(window);if(a._isOpen()){if(this._isFullSize())a.toolBox&&a.toolBox.css({"top":"","right":""}),this.container.data("fullsize.wijlightbox",!1),b.unbind("resize.wijlightbox",c.proxy(this,"_resizeHandler")),a._resize(function(){a._adjustPlayerSize(a.content.innerWidth(),a.content.innerHeight())});else{this.container.data("fullsize.wijlightbox",!0),b.bind("resize.wijlightbox",c.proxy(this,"_resizeHandler"));var d=a._getWinRect(),e=this.frame.borderSize();d.width-=e.width,d.height-=e.height,a._removeText(),a._moveTo(d,{"animated":"sync"},function(){a.toolBox&&a.toolBox.css({"top":"2px","right":"4px"}),a.frame.width(d.width),
a.container.width(a.frame.outerWidth()),a._createText(),a._adjustPlayerSize(a.content.innerWidth(),a.content.innerHeight())})}this._refreshDialogButtons()}},d.prototype._getExt=function(a){var b,c,d=/[0-9a-z]+$/i,e=a.indexOf("?");return e>-1&&(a=a.substring(0,e)),c=a.match(d),c&&(b=c[0].toLowerCase()),b},d.prototype._getPlayerName=function(a){if(0===a.indexOf("#")||a.indexOf("#")>0&&0===a.indexOf(document.location.href))return"inline";var b=["bmp","gif","jpg","jpeg","png"],d=["swf"],e=["flv","m4v"],f=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],g=["asf","avi","mpg","mpeg","wm","wmv"],h=["mp4","mpg","mpeg","ogg","ogv"],i=this._getExt(a);if(i){if(c.inArray(i,b)>=0)return"img";if(c.inArray(i,d)>=0)return"swf";if(c.inArray(i,e)>=0)return"flv";if(c.inArray(i,g)>=0)return"wmp";if(c.inArray(i,f)>=0)return"qt";if(c.inArray(i,h)>=0)return"wijvideo"}return"iframe"},d.prototype._adjustPlayerSize=function(a,b){var c=this.container.data("player.wijlightbox");c&&c.adjustSize&&c.adjustSize(a,b)},d.prototype._removePlayer=function(){var a=this.container.data("player.wijlightbox");a&&(a.remove(),this.container.data("player.wijlightbox",null))},d.prototype._createPlayer=function(a,b,d){var e=a.player;if(!c.isFunction(c.wijmo.wijlightbox[e]))throw"unknown player "+e;var f,g=this,h=!1,i=function(){h=!0,this._hideWaiting(),c.isFunction(b)&&window.setTimeout(function(){b.apply(g)},1)},j=function(){this._hideWaiting(),c.isFunction(d)&&d.apply(g)};return f=new c.wijmo.wijlightbox[e](this,a,i,j),this.container.data("player.wijlightbox",f),window.setTimeout(function(){h===!1&&g._showWaiting()},200),f},d}(a.wijmoWidget);b.wijlightbox=d;var e=function(){function a(){this.wijMobileCSS={"header":"ui-header ui-bar-a","content":"ui-body-c","stateDefault":"ui-btn ui-btn-a","stateHover":"ui-btn-down-a","stateActive":"ui-btn-down-a","iconPlay":"ui-icon-arrow-r","iconPause":"ui-icon-grid"},this.initSelector=":jqmData(role='wijlightbox')",this.textPosition="overlay",this.width=600,this.height=400,this.autoSize=!0,this.player="",this.groupItems=null,this.rootUrl="",this.ctrlButtons="",this.dialogButtons="close",this.counterType="default",this.counterFormat="[i] of [n]",this.counterLimit=10,this.showCounter=!0,this.showNavButtons=!0,this.showTimer=!1,this.controlsPosition="inside",this.showControlsOnHover=!0,this.clickPause=!1,this.keyNav=!1,this.modal=!1,this.position={"my":"center","at":"center","of":window,"collision":"fit","using":function(a){var b=c(this);b.css(a);var d=b.offset().top;0>d&&b.css("top",a.top-d)}},this.zIndex=1e3,this.closeOnEscape=!0,this.closeOnOuterClick=!0,this.autoPlay=!1,this.delay=2e3,this.loop=!0,this.cookie=null,this.transAnimation={"animated":"fade","duration":400,"easing":"linear"},this.slideDirection="horizontal",this.resizeAnimation={"animated":"sync","duration":400},this.textShowOption={"duration":300,"easing":"linear"},this.textHideOption={"duration":300,"easing":"linear"},this.showMovieControls=!0,this.autoPlayMovies=!0,this.flashParams={"bgcolor":"#000000","allowfullscreen":!0},this.flashVars={},this.flashVersion="9.0.115",this.flvPlayer="player\\player.swf",this.flashInstall="player\\expressInstall.swf",this.beforeShow=null,this.show=null,this.open=null,this.beforeClose=null,this.close=null}return a}();d.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new e),c.wijmo.registerWidget("wijlightbox",d.prototype),c.extend(c.wijmo.wijlightbox,{"img":function(a,b,d,e){this.name="img",this.lightbox=a,this.item=b,this.url=this.lightbox._getUrl(b);var f=this;c("<img></img>").css({"width":"auto","height":"auto","display":"none"}).appendTo(document.body).bind({"load":function(){var e=c(this);f.width=b.width?parseInt(b.width,10):e.width(),f.height=b.height?parseInt(b.height,10):e.height(),e.remove(),d&&c.isFunction(d)&&d.apply(a)},"error":function(){c(this).remove(),e&&c.isFunction(e)&&e.apply(a)}}).attr("src",this.url)},"swf":function(a,b,d,e){this.name="swf";var f=a.options;this.id="flashhost",this.lightbox=a,this.item=b,this.url=this.lightbox._getUrl(b),this.width=b.width?parseInt(b.width,10):f.width,this.height=b.height?parseInt(b.height,10):f.height,d&&c.isFunction(d)&&d.apply(a)},"iframe":function(a,b,d,e){this.name="swf",this.lightbox=a,this.item=b,this.url=this.lightbox._getUrl(b),b.width&&(this.width=parseInt(b.width,10)),b.height&&(this.height=parseInt(b.height,10)),this.$iframe=c("<iframe></iframe>").addClass("wijmo-wijlightbox-iframe").attr({"frameborder":"0","marginwidth":"0","marginheight":"0","scrolling":"auto","allowtransparency":"true"}).hide().appendTo(a.content).bind("load",function(){d&&c.isFunction(d)&&d.apply(a)}).attr("src",this.url)},"inline":function(a,b,d,e){this.name="inline";var f=a.options,g=f.wijCSS,h="wijmo-wijlightbox-frame "+g.content;if(" "+g.cornerAll+" "+g.helperClearFix,this.lightbox=a,this.item=b,this.width=b.width?parseInt(b.width,10):f.width,b.height)this.height=parseInt(b.height,10);else{var i=c(this.item.href).clone().show().append('<br clear="all" />').wrap('<div class="wijmo-wijlightbox '+g.widget+'"><div class="'+h+'"><div class="'+h+'"><div class="wijmo-wijlightbox-content"> </div></div></div></div>').appendTo(document.body).width(this.width);this.height=i.outerHeight(!0)+10,i.unwrap(),i.remove()}d&&c.isFunction(d)&&d.apply(a)},"flv":function(a,b,d,e){this.name="flv";var f=a.options;this.id="flvhost",this.lightbox=a,this.item=b,this.url=this.lightbox._getUrl(b);var g=20;this.width=b.width?parseInt(b.width,10):f.width,this.height=b.height?parseInt(b.height,10):f.height,f.showMovieControls&&(this.height+=g),d&&c.isFunction(d)&&d.apply(a)},"wmp":function(a,b,d,e){var f,g=a.options;this.name="wmp",this.id="wmphost",this.lightbox=a,this.item=b,this.url=this.lightbox._getUrl(b),f=c.browser.msie?70:45,this.width=b.width?parseInt(b.width,10):g.width,this.height=b.height?parseInt(b.height,10):g.height,g.showMovieControls&&(this.height+=f),d&&c.isFunction(d)&&d.apply(a)},"qt":function(a,b,d,e){var f=a.options,g=16;this.name="qt",this.id="qthost",this.lightbox=a,this.item=b,this.url=this.lightbox._getUrl(b),this.width=b.width?parseInt(b.width,10):f.width,this.height=b.height?parseInt(b.height,10):f.height,f.showMovieControls&&(this.height+=g),d&&c.isFunction(d)&&d.apply(a)},"wijvideo":function(a,b,d,e){var f=a.options;this.name="wijvideo",this.id="wijvideohost",this.lightbox=a,this.item=b,this.url=this.lightbox._getUrl(b),this.wijvideosrc=b.wijvideosrc&&""!==b.wijvideosrc?this.lightbox._getUrl(b.wijvideosrc):null,this.width=b.width?parseInt(b.width,10):f.width,this.height=b.height?parseInt(b.height,10):f.height,d&&c.isFunction(d)&&d.apply(a)}}),c.extend(c.wijmo.wijlightbox.img.prototype,{"appendTo":function(a,b){this.$element=c("<img></img>").addClass("wijmo-wijlightbox-image").attr("src",this.url),b&&this.$element.hide(),this.lightbox.options.transAnimation&&"fade"==this.lightbox.options.transAnimation.animated?(a.children().length&&a.empty(),this.$element.prependTo(a)):this.$element.appendTo(a)},"remove":function(){this.$element&&this.$element.remove()},"fadeOut":function(a,b){this.$element&&this.$element.fadeOut(a,b)},"fadeIn":function(a,b){this.$element&&this.$element.fadeIn(a,b)},"getElement":function(){return this.$element}}),c.extend(c.wijmo.wijlightbox.swf.prototype,{"appendTo":function(a){this.$container=c("<div/>").css({"width":"100%","height":"100%","overflow":"hidden"}).attr("id",this.id).appendTo(a);var b=this.lightbox.options,d=b.flashInstall,e=b.flashVersion,f=b.flashVars,g=b.flashParams;S.flash.embedSWF(this.item.href,this.id,"100%","100%",e,d,f,g)},"remove":function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},"fadeOut":function(a,b){this.$container&&this.$container.fadeOut(a,b)},"fadeIn":function(a,b){this.$container&&this.$container.fadeIn(a,b)},"getElement":function(){return this.$container}}),c.extend(c.wijmo.wijlightbox.iframe.prototype,{"appendTo":function(a,b){b||this.$iframe.show()},"remove":function(){this.$iframe&&this.$iframe.remove()},"fadeOut":function(a,b){this.$iframe&&this.$iframe.fadeOut(a,b)},"fadeIn":function(a,b){this.$iframe&&this.$iframe.fadeIn(a,b)},"getElement":function(){return this.$iframe}}),c.extend(c.wijmo.wijlightbox.inline.prototype,{"appendTo":function(a,b){this.$element=c(this.item.href).clone().appendTo(a),b||this.$element.show()},"remove":function(){this.$element&&this.$element.remove()},"fadeOut":function(a,b){this.$element&&this.$element.fadeOut(a,b)},"fadeIn":function(a,b){this.$element&&this.$element.fadeIn(a,b)},"getElement":function(){return this.$element}}),c.extend(c.wijmo.wijlightbox.flv.prototype,{"appendTo":function(a){this.$container=c("<div/>").css({"width":"100%","height":"100%","overflow":"hidden"}).attr("id",this.id).appendTo(a);var b=this.lightbox.options,d="100%",e="100%",f=b.flvPlayer,g=b.flashInstall,h=b.flashVersion,i=c.extend({"file":this.url,"width":d,"height":e,"autostart":b.autoPlayMovies?"true":"false","controlbar":b.showMovieControls?"bottom":"none","backcolor":"0x000000","frontcolor":"0xCCCCCC","lightcolor":"0x557722"},b.flashVars),j=c.extend({"autostart":b.autoPlayMovies?"true":"false","allowscriptaccess":"always"},b.flashParams);S.flash.embedSWF(f,this.id,d,e,h,g,i,j)},"remove":function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},"fadeOut":function(a,b){this.$container&&this.$container.fadeOut(a,b)},"fadeIn":function(a,b){this.$container&&this.$container.fadeIn(a,b)},"getElement":function(){return this.$container}}),c.extend(c.wijmo.wijlightbox.wmp.prototype,{"appendTo":function(a){this.$container=c("<div/>").css({"width":"100%","height":"100%","overflow":"hidden"}).appendTo(a);var b,d=this.lightbox.options,e='<object id="'+this.id+'" name="'+this.id+'" height="'+this.height+'" width="'+this.width+'"',f={"autostart":d.autoPlayMovies?1:0,"url":void 0,"uimode":void 0,"showcontrols":void 0};c.browser.msie?(e+=' classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6"',f.url=this.url,f.uimode=d.showMovieControls?"full":"none"):(e+=' type="video/x-ms-wmv"',e+=' data="'+this.url+'"',f.showcontrols=d.showMovieControls?1:0),e+=">";for(b in f)e+='<param name="'+b+'" value="'+f[b]+'">';e+="</object>",this.$container.html(e)},"remove":function(){if(c.browser.msie)try{window[this.id].controls.stop(),window[this.id].URL="movie"+now()+".wmv",window[this.id]=function(){}}catch(a){}this.$container.remove()},"fadeOut":function(a,b){this.$container&&this.$container.fadeOut(a,b)},"fadeIn":function(a,b){this.$container&&this.$container.fadeIn(a,b)},"getElement":function(){return this.$container}}),c.extend(c.wijmo.wijlightbox.qt.prototype,{"appendTo":function(a,b){this.$container=c("<div/>").css({"width":"100%","height":"100%","overflow":"hidden"}).appendTo(a);var d,e,f=this.lightbox.options,g=f.autoPlayMovies?"true":"false",h=f.showMovieControls?"true":"false",i=c.browser.msie?"<object":"<embed",j={"id":this.id,"name":this.id,"width":this.width,"height":this.height,"kioskmode":"true","classid":void 0,"codebase":void 0,"type":void 0,"src":void 0,"autoplay":void 0,"controller":void 0};c.browser.msie?(j.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",j.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"):(j.type="video/quicktime",j.src=this.url,j.autoplay=g,j.controller=h);for(d in j)j[d]&&(i+=" "+d+'="'+j[d]+'"');if(i+=">",c.browser.msie){var k={"src":this.url,"scale":"aspect","controller":h,"autoplay":g};for(e in k)i+='<param name="'+e+'" value="'+k[e]+'">'}i+=c.browser.msie?"</object>":"</embed>",b&&a.hide(),this.$container.html(i),b&&a.show()},"remove":function(){try{document[this.id].Stop(),document[this.id]=null}catch(a){}this.$container.remove()},"fadeOut":function(a,b){b.call()},"fadeIn":function(a,b){b.call()},"getElement":function(){return this.$container}}),c.extend(c.wijmo.wijlightbox.wijvideo.prototype,{"appendTo":function(a){var b=this.lightbox.options;this.$container=c("<video/>").css({"overflow":"hidden"}).attr({"width":this.width,"height":this.height,"autoPlay":b.autoPlayMovies?"true":"false","controls":b.showMovieControls?"controls":""}).appendTo(a),this.url&&c("<source/>").attr({"src":this.url}).appendTo(this.$container),this.wijvideosrc&&c("<source/>").attr({"src":this.wijvideosrc}).appendTo(this.$container),this.$container.wijvideo({"fullScreenButtonVisible":!1})},"remove":function(){this.$container.remove()},"fadeOut":function(a,b){this.$container&&this.$container.fadeOut(a,b)},"fadeIn":function(a,b){this.$container&&this.$container.fadeIn(a,b)},"getElement":function(){return this.$container},"adjustSize":function(a,b){this.$container.wijvideo("setWidth",a),this.$container.wijvideo("setHeight",b)}}),c.extend(c.wijmo.wijlightbox,{"overlay":function(a,b){if(this.mask=c("<div></div>").addClass(a.options.wijCSS.overlay+" wijmo-wijlightbox-overlay"+(b?" wijmo-wijlightbox-waitingoverlay":"")).appendTo(document.body).css({"width":this.width(),"height":this.height()}).bind("click",function(){return a.options.closeOnOuterClick&&a._close(),!1}),c.fn.bgiframe&&this.mask.bgiframe(),b){this.mask.css("z-index",this.zIndex);var d=c("<div></div>").addClass("wijmo-wijlightbox-waiting").css("z-index",this.zIndex+1).appendTo(this.mask);d.css({"left":(this.mask.width()-d.width())/2,"top":(this.mask.height()-d.height())/2})}c(window).bind("resize.wijlightbox-overlay",c.proxy(this,"resize")),window.setTimeout(function(){var a;this.mask&&(a=c.wijmo.wijlightbox.overlay,c(document).bind(a.events,function(b){return c(b.target).zIndex()<a.zIndex?!1:void 0}))},1)}}),c.extend(c.wijmo.wijlightbox.overlay.prototype,{"mask":null,"zIndex":1e3,"events":c.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".wijlightbox-overlay"}).join(" "),"close":function(){c(document).unbind(".wijlightbox-overlay"),c(window).unbind(".wijlightbox-overlay"),this.mask.remove(),this.mask=void 0},"height":function(){var a,b;return c.browser.msie&&parseInt(c.browser.version)<7?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b>a?c(window).height():a):c(document).height()},"width":function(){var a,b;return c.browser.msie&&parseInt(c.browser.version)<7?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b>a?c(window).width():a):c(document).width()},"resize":function(){this.mask&&this.mask.css({"width":this.width(),"height":this.height()})}})}(a.lightbox||(a.lightbox={}));a.lightbox}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){var c=$.wijmo.wijcandlestickchart,d=function(d){function e(){d.apply(this,arguments)}return __extends(e,d),e.prototype._create=function(){var a,c,e=this,f=e.options;e._getDefFill();$.each(f.seriesList,function(a,c){return"bar"===c.type?($.extend(!0,f.axis,{"x":{"compass":"west"},"y":{"compass":"south"}}),!0):void("pie"===c.type&&c.pieSeriesList?c.data=c.pieSeriesList:"sharedPie"===c.type&&c.sharedPieChartSeries&&c.sharedPieChartSeries.length>0?($.each(c.sharedPieChartSeries,function(a,b){b.pieSeriesList&&(b.data=b.pieSeriesList)}),c.data=c.sharedPieChartSeries):c.candlestickSeries&&c.candlestickSeries.data&&-1!=$.inArray(c.type,["hl","ohlc","candlestick"])?c.data=c.candlestickSeries.data:c.type===b.ChartConsts.strTrendline&&c.trendlineSeries&&(c.trendlineSeries.data&&(c.data=c.trendlineSeries.data),c.fitType=c.trendlineSeries.fitType,c.order=c.trendlineSeries.order,c.sampleCount=c.trendlineSeries.sampleCount))}),$.extend(!0,{"compass":"east"},f.hint),f.is100Percent&&(f.is100Percent=!1),c=f,c.yAxes&&$.isArray(c.yAxes)&&c.yAxes.length>0&&(a=[],$.each(c.yAxes,function(b,d){a.push($.extend({},c.axis.y,d))}),f.axis.y=a),e._handleChartStyles(),e._checkChartType(),e.isContainsCandlestick&&(e.bindXData=!1,e._handleXDataForCandlestick()),d.prototype._create.call(this),e.chartElement.addClass(f.wijCSS.compositechart)},e.prototype._setOption=function(a,b){"is100Percent"!==a&&("axis"===a&&this.isContainsCandlestick&&c&&c.prototype._handleMaxMinInAxis.apply(this,[b]),d.prototype._setOption.call(this,a,b))},e.prototype._seriesListSeted=function(){this._checkChartType(),this.isContainsCandlestick&&(this.timeUtil.dispose(),this.timeUtil=null,this._handleXDataForCandlestick())},e.prototype._supportStacked=function(){return!0},e.prototype.destroy=function(){var a=this,b=a.chartElement,c=b.data("fields"),e=c&&c.aniBarsAttr;b.removeClass(a.options.wijCSS.compositechart),this.timeUtil&&this.timeUtil.dispose(),d.prototype.destroy.call(this),a._destroyRaphaelArray(e),a.aniPathsAttr=null,b.data("fields",null)},e.prototype._isBarChart=function(){return!0},e.prototype._clearChartElement=function(){var a=this,b=a.options,c=a.chartElement,e=c.data("fields");e&&e.allElements&&($.each(e.allElements,function(b,c){"scatters"===b&&c.length&&$.each(c,function(a,b){b.length&&($.each(b,function(a,c){c&&c.remove&&c.remove(),b[a]=null}),c[a]=null)}),a._destroyRaphaelArray(c)}),e.allElements=null),d.prototype._clearChartElement.call(this),e&&e.ctracers&&(e.ctracers=null),a.element.removeData("plotInfos"),b.seriesTransition.enabled||e&&e.aniBarsAttr&&(e.aniBarsAttr=null)},e.prototype._bindSeriesData=function(a,b,c){var e,f,g,h,i=this,j=this,k=b.data,l=b.type,m=[];if("pie"===l)e=k.label,f=k.value,g=k.offset,e&&e.bind&&(e=this._getBindData(a,e.bind)),f&&f.bind&&(f=this._getBindData(a,f.bind)),g&&g.bind&&(g=this._getBindData(a,g.bind)),e&&$.isArray(e)&&e.length&&f&&$.isArray(f)&&f.length&&($.each(f,function(a,b){var c,d=0;a>=0&&a<e.length&&(c=e[a]),g&&$.isArray(f)&&g.length&&a>=0&&a<g.length&&(d="undefined"==typeof g[a]?0:g[a]),m.push({"data":b,"label":c,"offset":d,"legendEntry":!0})}),b.data=m);else if("sharedPie"===l){if($.isArray(k)){b.sharedPieChartSeries=[],$.each(k,function(a,c){var d=c.data,i=c.datasource;i&&(e=d.label,f=d.value,g=d.offset,e&&e.bind&&(e=j._getBindData(i,e.bind)),f&&f.bind&&(f=j._getBindData(i,f.bind)),g&&g.bind&&(g=j._getBindData(i,g.bind)),h={"center":c.center,"label":c.label,"legendEntry":c.legendEntry,"radius":c.radius,"data":[]},f&&$.each(f,function(a,b){var c,d=0;a>=0&&a<e.length&&(c=e[a]),g&&$.isArray(f)&&g.length&&a>=0&&a<g.length&&(d="undefined"==typeof g[a]?0:g[a]),h.data.push({"data":b,"label":c,"offset":d,"legendEntry":!0})}),b.sharedPieChartSeries.push(h))});var n,o=[];e&&$.isArray(e)&&$.each(e,function(a,c){n={},n.valueArray=[],n.label=c,n.legendEntry=b.legendEntry!==!1,o.push(n)}),b.sharedPieLegends=o}}else d.prototype._bindSeriesData.call(this,a,b,c),k.x&&$.isArray(k.x)&&(this.bindXData=!0),$.each(["high","low","open","close","y1"],function(b,c){var d=k[c];d&&d.bind&&(k[c]=i._getBindData(a,d.bind))})},e.prototype._preHandleSeriesData=function(){d.prototype._preHandleSeriesData.call(this);var a,b,c=this,e=c.options,f=e.seriesList;$.each(f,function(c,d){if("sharedPie"===d.type){if(!d.sharedPieChartSeries||0===d.sharedPieChartSeries.length)for(var e=0;e<d.data.length;e++)d.data[e]&&d.sharedPieChartSeries.push(d.data[e]);if(!d.sharedPieLegends||0===d.sharedPieLegends.length){if(0===d.sharedPieChartSeries.length)return;a=d.sharedPieChartSeries[0],$.each(a.data,function(a,c){b={},b.label=c.label,b.legendEntry=c.legendEntry,d.sharedPieLegends.push(b)})}}})},e.prototype.getElement=function(a,c,d){var e=this.chartElement,f=e.data("fields"),g=f.chartElements;switch(a){case"bar":case"column":return g.bars[c];case"line":case"area":return g.paths[c];case"linemarkers":return g.markersSet[c];case"pie":case"sharedPie":return this._getPie(g,c,d);case b.ChartConsts.strTrendline:return g.trendLines[c]}return null},e.prototype._getPie=function(a,b,c){if(void 0!==c)return a["sectors"+c]?a["sectors"+c][b]:null;var d=[];return $.each(a,function(a,b){/sectors/.test(a)&&"sectors"!==a&&$.each(b,function(a,b){d.push(b)})}),0===d.length&&(d=a.sectors),d[b]},e.prototype._paintLegendIcon=function(a,c,e,f,g,h,i,j,k,l){var m,n,o,p,q=this,r=this.options,s=b.TrendlineRender.getSeriesChartType(k),t=3,u=!1;return"line"===s||"area"===s||"spline"===s||"bezier"===s?(m=q.canvas.path(Raphael.format("M{0},{1}L{2},{3}",a,c+f/2,a+e,c+f/2)),g&&(r.legend.size&&r.legend.size.height&&(t=r.legend.size.height),m.attr($.extend(!0,{},g,{"stroke-width":t}))),u=!0,k.markers&&k.markers.visible&&(o=k.markers.type,p=k.markerStyle,p=$.extend({"fill":g.stroke,"stroke":g.stroke,"opacity":1},p),g["stroke-dasharray"]&&m.attr({"stroke-width":1,"stroke-dasharray":g["stroke-dasharray"]}),o||(o="circle"),n=this.canvas.paintMarker(o,a+e/2,c+f/2,3),$.wijraphael.addClass($(n.node),Raphael.format("{0} {1} {2}",r.wijCSS.legend,r.wijCSS.legendDot,r.wijCSS.canvasObject)),n.attr(p),$(n.node).data("index",i).data("legendIndex",h),this.legendDots[h]=n)):s===b.ChartConsts.strTrendline?(m=b.TrendlineRender.paintLegendIcon(a,c,e,f,g,q.canvas,r.legend.size,q.legendIcons,h,i,j),u=!1):"scatter"===s?(p=k.markerStyle,o=k.markerType,p=$.extend({"fill":g.stroke,"stroke":g.stroke,"opacity":1},p),o||(o="circle"),m=q.canvas.paintMarker(o,a+e/2,c+f/2,3),m.attr(p),k.visible===!1&&($(l.node).data("dotOpacity",m.attr("opacity")||1),m.attr("opacity",.3)),u=!0):"bubble"===s?(p=k.markerStyle,p=$.extend({"fill":g.stroke,"stroke":g.stroke,"opacity":1},p),k.markers&&(o=k.markers.type),o||(o="circle"),m=q.canvas.paintMarker(o,a+e/2,c+f/2,Math.min(e,f)/2),m.attr(p),u=!0):m=d.prototype._paintLegendIcon.call(this,a,c,e,f,g,h,i,j,k,l),u&&($.wijraphael.addClass($(m.node),j),$(m.node).data("legendIndex",h).data("index",i),q.legendIcons.push(m)),m},e.prototype._showHideCandlestickSeries=function(a,b){c&&c.prototype._showHideSeries.apply(this,arguments)},e.prototype._showSerieEles=function(a){var c,d=a.type,e=a.eles,f=[],g=this.options.showChartLabels;switch(d){case"pie":f=e?[a]:a.sharedSeriesEles,$.each(f,function(a,b){e=b.eles,e.sector&&(e.sector.show(),e.sector.shadow&&e.sector.shadow.show(),e.sector.tracker&&e.sector.tracker.show()),e.label&&e.label.show()});break;case"line":case"spline":case"bezier":case"area":e.markers&&$.each(e.markers,function(a,b){return c=$(b.node).data("wijchartDataObj"),c&&c.lineSeries&&c.lineSeries.markers&&!c.lineSeries.markers.visible?!0:void b.show()}),e.dcl&&$.each(e.dcl,function(a,b){g&&b.show()}),e.path&&(c=$(e.path.node).data("wijchartDataObj"),(c.visible||c.visible||!c.markers||!c.markers.visible)&&(e.path.show(),e.path.shadow&&e.path.shadow.show(),e.path.area&&e.path.area.show(),e.path.tracker&&e.path.tracker.show(),$(e.path.node).data("wijchartDataObj")&&$(e.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(e.path.node).data("wijchartDataObj").virtualMarkers,function(a,b){b.visible=!0})));break;case"bar":case"column":$.each(e,function(a,b){b.bar&&(b.bar.show(),b.bar.shadow&&b.bar.shadow.show(),b.bar.tracker&&b.bar.tracker.show(),$(b.bar.node).data("wijchartDataObj")&&($(b.bar.node).data("wijchartDataObj").visible=!0)),b.dcl&&b.dcl.show(),b.animatedBar&&!b.animatedBar.removed&&b.animatedBar.show()});break;case"scatter":$.each(e,function(a,b){b.show(),b.label&&b.label.show(),$(b.element).data("wijchartDataObj")&&($(b.element).data("wijchartDataObj").visible=!0)});break;case"ohlc":case"hl":case"candlestick":this._showHideCandlestickSeries(e,"show");break;case"bubble":$.each(e,function(a,b){b.bubble&&(b.bubble.show(),b.bubble.shadow&&b.bubble.shadow.show(),b.bubble.tracker&&b.bubble.tracker.show(),$(b.bubble.node).data("wijchartDataObj")&&($(b.bubble.node).data("wijchartDataObj").visible=!0)),b.dcl&&b.dcl.show(),b.symbol&&b.symbol.show()});case b.ChartConsts.strTrendline:b.TrendlineRender.showSerieEles(e)}},e.prototype._hideSerieEles=function(a){var c=a.type,d=a.eles,e=[];switch(c){case"pie":e=d?[a]:a.sharedSeriesEles,$.each(e,function(a,b){d=b.eles,d.sector&&(d.sector.hide(),d.sector.shadow&&d.sector.shadow.hide(),d.sector.tracker&&d.sector.tracker.hide()),d.label&&d.label.hide()});break;case"line":case"spline":case"bezier":case"area":d.markers&&$.each(d.markers,function(a,b){b.hide()}),d.dcl&&$.each(d.dcl,function(a,b){b.hide()}),d.path&&(d.path.hide(),d.path.shadow&&d.path.shadow.hide(),d.path.area&&d.path.area.hide(),d.path.tracker&&d.path.tracker.hide(),$(d.path.node).data("wijchartDataObj")&&$(d.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(d.path.node).data("wijchartDataObj").virtualMarkers,function(a,b){b.visible=!1}));break;case b.ChartConsts.strTrendline:b.TrendlineRender.hideSerieEles(d);break;case"bar":case"column":$.each(d,function(a,b){b.bar&&(b.bar.hide(),b.bar.shadow&&b.bar.shadow.hide(),b.bar.tracker&&b.bar.tracker.hide(),$(b.bar.node).data("wijchartDataObj")&&($(b.bar.node).data("wijchartDataObj").visible=!1)),b.dcl&&b.dcl.hide(),b.animatedBar&&!b.animatedBar.removed&&b.animatedBar.hide()});break;case"scatter":$.each(d,function(a,b){b.hide(),b.label&&b.label.hide(),$(b.element).data("wijchartDataObj")&&($(b.element).data("wijchartDataObj").visible=!1)});break;case"ohlc":case"hl":case"candlestick":this._showHideCandlestickSeries(d,"hide");break;case"bubble":$.each(d,function(a,b){b.bubble&&(b.bubble.hide(),b.bubble.shadow&&b.bubble.shadow.hide(),b.bubble.tracker&&b.bubble.tracker.hide(),$(b.bubble.node).data("wijchartDataObj")&&($(b.bubble.node).data("wijchartDataObj").visible=!1)),b.dcl&&b.dcl.hide(),b.symbol&&b.symbol.hide()})}},e.prototype._indicatorLineShowing=function(a){var b;d.prototype._indicatorLineShowing.call(this,a),$.each(a,function(a,c){b=c.type,"column"===b||"bar"===b?c.bar.attr(c.hoverStyle):"marker"===b?c.marker.attr(c.markerHoverStyle):"scatter"===b&&(c.dot.attr(c.hoverStyle),c.dot.scale(1.5,1.5))})},e.prototype._removeIndicatorStyles=function(a){var b;$.each(a,function(a,c){b=c.type,"column"===b||"bar"===b?c.bar.attr(c.style):"marker"===b?(c.marker.attr(c.markerStyle),c.marker.transform("s1")):"scatter"===b&&(c.dot.attr(c.style),c.dot.scale(1,1))})},e.prototype._paintTooltip=function(){var a=this,b=a.chartElement,c=b.data("fields")||{},e=c.ctracers||[];d.prototype._paintTooltip.call(this),a.tooltip&&$.each(e,function(b,c){c.trackers&&c.trackers.length&&0===b&&a.tooltip.setOptions({"relatedElement":c.trackers[0]})})},e.prototype._setDefaultTooltipText=function(a){return"candlestick"===a.type&&c?c.prototype._setDefaultTooltipText.apply(this,arguments):d.prototype._setDefaultTooltipText.call(this,a)},e.prototype._checkChartType=function(){var a=this;this.isContainsBubble=!1,this.isContainsCandlestick=!1,$.each(this.options.seriesList,function(b,c){var d=c.type;a.isContainsCandlestick||"ohlc"!==d&&"hl"!==d&&"candlestick"!==d?a.isContainsBubble||"bubble"!==d||(a.isContainsBubble=!0):a.isContainsCandlestick=!0})},e.prototype._handleXDataForCandlestick=function(){c&&c.prototype._handleXData.apply(this,arguments)},e.prototype._isCandlestickSeries=function(a){var b=a.type;return"ohlc"===b||"hl"===b||"candlestick"===b},e.prototype._paintChartArea=function(){var a=this,c=a.options.seriesList;a._isSeriesListDataEmpty()||($.each(c,function(b,c){var d=c.data;a._isCandlestickSeries(c)&&(d.y=[].concat(d.high).concat(d.low))}),this.bubbleAxisAdjust&&this.bubbleAxisAdjust.dispose(),this.bubbleAxisAdjust=new b.BubbleAxisAdjust(this),d.prototype._paintChartArea.call(this),$.each(c,function(b,c){a._isCandlestickSeries(c)&&delete c.data.y}))},e.prototype._checkSeriesDataEmpty=function(a){var b=a.type,c=a.data,e=!1,f=this._checkEmptyData;return this._isCandlestickSeries(a)?!c||f(c.x)||f(c.high)||f(c.low)?!0:"ohlc"!==b&&"candlestick"!==b||!f(c.open)&&!f(c.low)?!1:!0:"pie"===b?c&&$.isArray(c)?!1:!0:"sharedPie"===b?(c=a.sharedPieChartSeries,c&&$.isArray(c)?$.each(a.sharedPieChartSeries,function(a,b){return b.data&&$.isArray(b.data)?(e=!1,!1):void 0}):e=!0,e):"bubble"!==b||c&&!f(c.y1)?d.prototype._checkSeriesDataEmpty.call(this,a):!0},e.prototype._calculateMajorMinor=function(a,b){this.isContainsCandlestick&&"x"===b.id?c.prototype._calculateMajorMinor.apply(this,arguments):d.prototype._calculateMajorMinor.call(this,a,b)},e.prototype._getXTickText=function(a){var b=this;b.formatString;return b.isContainsCandlestick&&c?c.prototype._getXTickText.apply(this,arguments):a},e.prototype._adjustTickValuesForCandlestickChart=function(a){return this.isContainsCandlestick&&c?c.prototype._adjustTickValuesForCandlestickChart.apply(this,arguments):d.prototype._adjustTickValuesForCandlestickChart.call(this,a)},e.prototype._getTickTextForCalculateUnit=function(a,b,e){return"x"===b.id&&this.isContainsCandlestick?c.prototype._getTickTextForCalculateUnit.apply(this,arguments):d.prototype._getTickTextForCalculateUnit.call(this,a,b,e)},e.prototype._AdjustAxisBounds=function(a,c){var d,e,f,g,h=this,i=h.options,j=a.max,k=a.min,l=j-k,m=b.ChartDataUtil.nicePrecision(l),n=m+1,o=a.bounds,p=$.extend(!0,{},i.textStyle,c.textStyle,c.labels.style);d=h._text(-1e3,-1e3,$.round(j,n).toString()).attr(p),e=h._text(-1e3,-1e3,$.round(k,n).toString()).attr(p),f=d.wijGetBBox(),g=e.wijGetBBox(),a.isStartAxis||(o.startY+=g.height),a.isLastAxis||(o.endY-=f.height)},e.prototype._initYAxisHeight=function(){var a,b=this,c=b.options,d=c.axis,e=d.y,f=b.canvasBounds,g=(f.endX-f.startX,f.endY-f.startY),h=b.axisInfo,i=h.y,j=0,k=-1;$.isArray(e)&&($.each(e,function(a,b){b.height&&!isNaN(b.height)?j+=b.height:"auto"===b.height&&(k=a),i[a].height=b.height}),k>-1&&(i[k].height=g-j),$.each(i,function(c,d){var g=d.height;return void 0===g||null===g?!0:(g>0&&(d.isPartAxis=!0,d.isLastAxis=parseInt(c)===e.length-1,d.isStartAxis=0===parseInt(c)),a?d.bounds={"startY":a.endY,"endY":a.endY+g}:d.bounds={"startY":f.startY,"endY":f.startY+g},d.bounds.startX=f.startX,d.bounds.endX=f.endX,b._AdjustAxisBounds(d,e[c]),void(d.bounds&&(a=$.extend({},d.bounds))))}))},e.prototype._getDataExtreme=function(a){var b=this;return b._initYAxisHeight(),d.prototype._getDataExtreme.call(this,a)},e.prototype._getPieRendererData=function(a,b,c,d,e){var f={},g={},h={},i=a.data;return f.sIndex=e,$.each(i,function(a,i){i.pieID=b,g=$.extend({},c[e]),h=$.extend({},d[e]),f.seriesList||(f.seriesList=[]),f.seriesStyles||(f.seriesStyles=[]),f.seriesHoverStyles||(f.seriesHoverStyles=[]),f.seriesList.push(i),f.seriesStyles.push(g),f.seriesHoverStyles.push(h),e++}),f.radius=a.radius,f.center=a.center,f.label=a.label,f},e.prototype._paintPlotArea=function(){var d,e,f,g,h,i=this,j=i.options,k="seriesList",l="seriesStyles",m="seriesHoverStyles",n=j[l],o=j[m],p=i.canvasBounds,q={},r=0,s=-1,t=[],u=$.isArray(j.axis.y),v={"canvas":i.canvas,"tooltip":i.tooltip,"bounds":p,"widgetName":i.widgetName,"seriesTransition":j.seriesTransition,"showChartLabels":j.showChartLabels,"textStyle":j.textStyle,"chartLabelStyle":j.chartLabelStyle,"chartLabelFormatString":j.chartLabelFormatString,"shadow":j.shadow,"hint":j.hint,"animation":j.animation,"disabled":j.disabled,"culture":i._getCulture(),"widget":this,"wijCSS":j.wijCSS,"mouseDown":function(a,b){i._trigger("mouseDown",a,b)},"mouseUp":function(a,b){i._trigger("mouseUp",a,b)},"mouseOver":function(a,b){i._trigger("mouseOver",a,b)},"mouseOut":function(a,b){i._trigger("mouseOut",a,b)},"mouseMove":function(a,b){i._trigger("mouseMove",a,b)},"click":function(a,b){i._trigger("click",a,b)}},w=i.chartElement.data("fields"),x=-1;w&&(w.ctracers=[]),$.each(j[k],function(a,c){var f=b.TrendlineRender.getSeriesChartType(c),g={},h=f,p={},t=$.extend({},n[r]),v=$.extend({},o[r]),w=c.yAxis;return f&&0!==f.length?(("spline"===h||"bezier"===h)&&(h="line"),"sharedPie"===h&&(h="pie"),g=q[h],g||(g="pie"===f||"sharedPie"===f?[]:{},q[h]=g,c.hint&&(g.hint=c.hint,j.hint.content||(j.hint.content=c.hint.content),j.hint.title||(j.hint.title=c.hint.title))),"pie"===f?(-1===x&&(x=a+1),-1===s&&(s=r),p=i._getPieRendererData(c,x,n,o,r),g.push(p),x++,r=s+(c.data.length?c.data.length:0),s=-1,!0):"sharedPie"===f?(-1===x&&(x=a+1),d=c.sharedPieChartSeries,e={"type":"sharedPies","pies":[]},-1===s&&(s=r),$.each(d,function(a,b){p={},b.radius=b.radius||c.radius,b.label=b.label||c.label,!b.center&&c.center&&(b.center={"x":c.center.x,"y":c.center.y
}),r=s,p=i._getPieRendererData(b,x,n,o,r),e.pies.push(p),x++,r=s+(b.data.length?b.data.length:0)}),"sharedPie"===f&&g.push(e),s=-1,!0):("column"===f?g.horizontal=!1:"bar"===f?g.horizontal=!0:"spline"===f?c.fitType="spline":"bezier"===f&&(c.fitType="bezier"),u&&(g.yAxis=w||0),("line"===f||"spline"===f||"bezier"===f||f===b.ChartConsts.strTrendline)&&(delete t.fill,delete v.fill),g[k]||(g[k]=[]),g[l]||(g[l]=[]),g[m]||(g[m]=[]),"scatter"===f&&(g.showChartLabels=j.showChartLabels,void 0!==c.showChartLabels&&(g.showChartLabels=c.showChartLabels)),c.sIndex=r,g[k].push(c),g[l].push(t),g[m].push(v),void r++)):!0}),$.each(q,function(d,e){var k,l=a.chart,m=e.yAxis;switch(void 0!==m&&i.axisInfo.y[m].bounds&&(v.bounds=i.axisInfo.y[m].bounds),d){case"pie":;$.each(e,function(a,b){var c="sharedPies"!==b.type?[b]:b.pies;$.each(c,function(a,b){var c,e=b.center,g=b.radius||50,j=p.endX-p.startX,k=p.endY-p.startY;2*g>j&&(g=j/2),2*g>k&&(g=k/2),b.radius=g,c=e?{"startX":e.x-g,"startY":e.y-g,"endX":e.x+g,"endY":e.y+g}:{"startX":p.startX+j/2-g,"startY":p.startY+k/2-g,"endX":p.startX+2*g,"endY":p.startY+2*g},f=$.extend(!0,{},v,{"bounds":c,"radius":g,"isTouchBehaviorEnable":!1},b),h=new l.PieChartRender(i.chartElement,f),h.render(),i.chartElement.data("fields").aniSectorAttrs=null,i.chartElement.data("fields").aniLabelAttrs=null,i._savechartData(d,b.sIndex)})});break;case"bar":case"column":f=$.extend(!0,{},v,{"stacked":j.stacked,"axis":j.axis,"clusterOverlap":j.clusterOverlap,"clusterWidth":j.clusterWidth,"clusterSpacing":j.clusterSpacing,"is100Percent":j.is100Percent,"clusterRadius":j.clusterRadius,"isYTime":i.axisInfo.y[0].isTime,"isXTime":i.axisInfo.x.isTime,"yAxisInfo":i.axisInfo.y,"yAxisIndex":m},e),h=new l.BarChartRender(i.chartElement,f),h.render(),t=[],$.each(e.seriesList,function(a,b){t.push(b.sIndex)}),i._savechartData(d,t);break;case"line":case"spline":case"bezier":case"area":g=i._getyAxisGroup(e),i.aniPathsAttr||(i.aniPathsAttr={}),$.each(g,function(a,b){i.aniPathsAttr[d]||(i.aniPathsAttr[d]=[]),f=$.extend(!0,{},v,{"axis":j.axis,"isXTime":i.axisInfo.x.isTime,"isYTime":i.axisInfo.y[0].isTime,"type":"area"===d?"area":"line","hole":j.hole},b),f.aniPathsAttr=i.aniPathsAttr[d],f.chartLabelEles=i.chartLabelEles,u&&(f.axis.y=j.axis.y[a]),f.extremeValue={"txx":i.extremeValue.txx,"txn":i.extremeValue.txn,"tyx":i.extremeValue.y[a].tyx,"tyn":i.extremeValue.y[a].tyn},h=new l.LineChartRender(i.chartElement,f),h.render(),t=[],$.each(b.seriesList,function(a,b){t.push(b.sIndex)}),i._savechartData(d,t,!0)});break;case b.ChartConsts.strTrendline:g=i._getyAxisGroup(e),i.aniPathsAttr||(i.aniPathsAttr={}),$.each(g,function(a,b){i.aniPathsAttr[d]||(i.aniPathsAttr[d]=[]),f=$.extend(!0,{},v,{"axis":j.axis,"hole":j.hole},b),f.aniPathsAttr=i.aniPathsAttr[d],u&&(f.axis.y=j.axis.y[a]),f.extremeValue={"txx":i.extremeValue.txx,"txn":i.extremeValue.txn,"tyx":i.extremeValue.y[a].tyx,"tyn":i.extremeValue.y[a].tyn},h=new l.TrendlineRender(i.chartElement,f),h.render(),t=[],$.each(b.seriesList,function(a,b){t.push(b.sIndex)}),i._savechartData(d,t,!0)});break;case"scatter":g=i._getyAxisGroup(e),$.each(g,function(a,b){f=$.extend(!0,{},v,{"axis":j.axis,"isXTime":i.axisInfo.x.isTime,"isYTime":i.axisInfo.y[0].isTime,"zoomOnHover":j.zoomOnHover},b),u&&(f.axis.y=j.axis.y[a]),h=new l.ScatterChartRender(i.chartElement,f),h.render(),t=[],$.each(b.seriesList,function(a,b){t.push(b.sIndex)}),i._savechartData(d,t)});break;case"ohlc":case"hl":case"candlestick":g=i._getyAxisGroup(e),$.each(g,function(a,b){f=$.extend(!0,{},v,{"axis":j.axis,"timeUtil":i.timeUtil,"type":d},b),u&&(f.axis.y=j.axis.y[a]),f.seriesStyles=c.prototype._getStyles(d,f.seriesStyles,"seriesStyles",!0),f.seriesHoverStyles=c.prototype._getStyles(d,f.seriesHoverStyles,"seriesHoverStyles",!0),h=new l.CandlestickChartRender(i.chartElement,f),h.render(),t=[],$.each(b.seriesList,function(a,b){t.push(b.sIndex)}),i._savechartData(d,t)});break;case"bubble":g=i._getyAxisGroup(e),k||(k={"visible":j.showChartLabels,"style":j.chartLabelStyle}),$.each(g,function(a,b){f=$.extend(!0,{},v,{"axis":j.axis,"isXTime":i.axisInfo.x.isTime,"isYTime":i.axisInfo.y[0].isTime,"xAxisInfo":i.axisInfo.x,"yAxisInfo":i.axisInfo.y,"chartLabel":k,"minimumSize":j.minimumSize||5,"maximumSize":j.maximumSize||20,"sizingMethod":j.sizingMethod||"diameter","bubbleRadius":i.bubbleAxisAdjust.bubbleRadius},b),u&&(f.axis.y=j.axis.y[a]),f.yAxisInfo=i.axisInfo.y[a]||i.axisInfo.y[0],h=new l.BubbleChartRender(i.chartElement,f),h.render(),t=[],$.each(b.seriesList,function(a,b){t.push(b.sIndex)}),i._savechartData(d,t)})}}),i.chartElement.data("fields").seriesEles=null,i._bindtooltip()},e.prototype._savechartData=function(a,b,c){var d,e,f=this,g=f.chartElement.data("fields"),h=g.seriesEles,i=g.allElements||{},j=b;$.isArray(j)&&(j=0),$.each(h,function(c,d){$.isArray(b)?(f.seriesEles[b[j]]={"eles":d,"type":a},j++):("pie"===a&&f.seriesEles[j]?($.isArray(f.seriesEles[j])||(e=[f.seriesEles[j]],f.seriesEles[j]={"type":"pie","sharedSeriesEles":e}),f.seriesEles[j].sharedSeriesEles.push({"eles":d,"type":a})):f.seriesEles[j]={"eles":d,"type":a},j++)}),c||(d=g.ctracers||[],d.push({"trackers":g.trackers,"type":a}),g.ctracers=d),g&&g.chartElements&&$.each(g.chartElements,function(a,b){f._copyElements(i,a,b)}),g.allElements=i},e.prototype._copyElements=function(a,b,c){var d;c&&$.isArray(c)?(d=a[b]||[],a[b]=d.concat(c)):c&&(d=a[b]||[],d.concat([c]))},e.prototype._getyAxisGroup=function(a){var b={};return $.each(a.seriesList,function(c,d){var e=d.yAxis||0;b[e]||(b[e]={"seriesList":[],"seriesStyles":[],"seriesHoverStyles":[]}),b[e].seriesList.push(d),b[e].seriesStyles.push(a.seriesStyles[c]),b[e].seriesHoverStyles.push(a.seriesHoverStyles[c])}),b},e.prototype._bindtooltip=function(){var a=this,b=a.widgetName,c=a.chartElement.data("fields");c&&c.ctracers&&$.each(c.ctracers,function(a,b){b.type;b.trackers&&b.trackers.toFront()}),a.chartElement.delegate(".linetracker, .wijchart-canvas-marker, .bartracker, .pietracker, .wijscatterchart, .bubbletracker, .candlesticktracker, .trendlinetracker","mouseover."+b,$.proxy(a._tooltipMouseOver,a)),a.chartElement.delegate(".linetracker, .wijchart-canvas-marker, .bartracker, .pietracker, .wijscatterchart, .bubbletracker, .candlesticktracker, .trendlinetracker","mouseout."+b,$.proxy(a._tooltipMouseOut,a)),a.chartElement.delegate(".linetracker, .wijchart-canvas-marker, .bartracker, .pietracker, .wijscatterchart, .bubbletracker, .candlesticktracker, .trendlinetracker","mousemove."+b,$.proxy(a._tooltipMouseMove,a))},e.prototype._tooltipMouseOver=function(a){var c,d,e,f,g=a.target,h=this,i=h.tooltip,j=h.options.hint,k=null,l=j.title,m=j.content,n=j.style,o=$.isFunction(l),p=$.isFunction(m);if(e=$(h.canvas.canvas.parentNode).offset(),!h.indicatorLine&&($(g).data("owner")&&(g=$(g).data("owner")),g=$(g),c=g.data("wijchartDataObj"),h.tooltip))if(k=i.getOptions(),(o||p)&&(o&&(k.title=$.proxy(l,c)),p&&(k.content=$.proxy(m,c))),"line"===c.type||"marker"===c.type){if("marker"===c.type&&(c=c.lineSeries),c.path.removed)return;(h.hoverLine!==c||null===h.hoverLine)&&(h.isNewLine=!0,h.hoverLine&&(h.hoverLine.path.removed||(h.hoverLine.path.wijAttr(h.hoverLine.lineStyle),h.hoverPoint&&!h.hoverPoint.isSymbol&&(h.hoverPoint.marker.wijAttr(h.hoverPoint.markerStyle),h.hoverPoint.marker.transform("s1")))),c.lineHoverStyle&&c.path.wijAttr(c.lineHoverStyle),h.hoverLine=c,h.hoverPoint=null,h.hoverVirtualPoint=null)}else if("scatter"===c.type||"element"===j.relativeTo)h._clearHoverState(),"scatter"===c.type?d=c.dot.getBBox():g[0]&&g[0].raphael&&g[0].raphaelid&&(f=h.canvas.getById(g[0].raphaelid),f&&(d=f.getBBox())),k.style.stroke=n.stroke||g.attr("stroke"),d&&h.tooltip.showAt({"x":d.x+d.width/2,"y":d.y},a);else{if(h._clearHoverState(),c.type===b.ChartConsts.strTrendline)return;k.style.stroke=n.stroke||g.attr("stroke"),h.tooltip.showAt({"x":a.pageX-e.left,"y":a.pageY-e.top},a)}},e.prototype._tooltipMouseMove=function(a){var c,d=this,e=a.target,f=d.options.hint,g=$(d.canvas.canvas.parentNode).offset();$(e).data("owner")&&(e=$(e).data("owner")),e=$(e),c=e.data("wijchartDataObj"),d.tooltip&&!this.indicatorLine&&"line"!==c.type&&"marker"!==c.type&&"scatter"!==c.type&&"element"!==f.relativeTo&&c.type!==b.ChartConsts.strTrendline&&d.tooltip.showAt({"x":a.pageX-g.left,"y":a.pageY-g.top},a)},e.prototype._tooltipMouseOut=function(a){var b,c=this,d=a.target;$(d).data("owner")&&(d=$(d).data("owner")),d=$(d),b=d.data("wijchartDataObj"),"line"===b.type||"marker"===b.type||c.indicatorLine||c.tooltip&&c.tooltip.hide()},e.prototype._mouseMoveInsidePlotArea=function(a,b){var c,e,f,g,h,i,j,k=this,l=k.tooltip,m=k.options.hint,n=0,o=null,p=null,q=null,r=m.title,s=m.content,t=$.isFunction(r),u=$.isFunction(s),v=0;if(l&&(q=l.getOptions()),k.hoverLine&&!k.indicatorLine){if(j=k.hoverLine,k.isNewLine&&(m.enable&&l&&l.hide(),k.isNewLine=!1),c=j.lineMarkers,e=j.virtualMarkers,n=-1,f={"x":0,"y":0},c&&c.length){if($.each(c,function(a,c){if(c.removed)return!0;var d=c.wijGetBBox(),e=d.x+d.width/2,g=Math.abs(e-b.left);(0===a||v>g)&&(v=g,n=a,f={"x":e,"y":d.y+d.height/2})}),k.hoverPoint&&k.hoverPoint.index===n)return;if(n>-1){if(c[n].removed)return;g=$(c[n].node).data("wijchartDataObj"),g&&(k.hoverPoint&&!k.hoverPoint.isSymbol&&(k.hoverPoint.removed||(k.hoverPoint.marker.wijAttr(k.hoverPoint.markerStyle),k.hoverPoint.marker.transform("s1"))),g.isSymbol||g.marker.removed||g.marker.wijAttr(g.markerHoverStyle)),k.hoverPoint=g,k.hoverVirtualPoint=e[n]}}else{if($.each(e,function(a,c){var d=Math.abs(c.x-b.left);(0===a||v>d)&&(v=d,n=a,f={"x":c.x,"y":c.y})}),k.hoverVirtualPoint&&k.hoverVirtualPoint.index===n)return;n>-1&&(k.hoverPoint=null,k.hoverVirtualPoint=e[n])}l&&(p=k.hoverVirtualPoint,h=p.valX,i=p.valY,(t||u)&&(t&&(q.title=function(){var a={"pointIndex":n,"lineIndex":j.index,"x":h,"y":i,"label":j.label,"data":p,"fmt":r},b=$.proxy(a.fmt,a),c=b();return c}),u&&(q.content=function(){var a={"pointIndex":n,"lineIndex":j.index,"x":h,"y":i,"label":j.label,"data":p,"fmt":s},b=$.proxy(a.fmt,a),c=b();return c})),o=$.extend({"stroke":j.path.attr("stroke")},m.style),q.style.stroke=o.stroke,l.showAt(f))}d.prototype._mouseMoveInsidePlotArea.call(this,a,b)},e.prototype._mouseDownInsidePlotArea=function(a,b){d.prototype._mouseDownInsidePlotArea.call(this,a,b),this._clearHoverState(!0)},e.prototype._mouseMoveOutsidePlotArea=function(a,b){var c=this;c._clearHoverState(),d.prototype._mouseMoveOutsidePlotArea.call(this,a,b)},e.prototype._clearHoverState=function(a){var b=this,c=b.tooltip,d=b.options.hint;b.hoverLine&&(d.enable&&c&&!a&&c.hide(),b.hoverLine.path.removed||(b.hoverLine.path.wijAttr(b.hoverLine.lineStyle),b.hoverPoint&&!b.hoverPoint.isSymbol&&(b.hoverPoint.marker.wijAttr(b.hoverPoint.markerStyle),b.hoverPoint.marker.transform("s1")))),b.hoverLine=null,b.hoverPoint=null,b.hoverVirtualPoint=null},e.prototype._getTooltipText=function(a,b){return""},e.prototype._calculateParameters=function(a,b){var e,f,g,h,i,j,k=this,l=!1,m=0,n=0;d.prototype._calculateParameters.call(this,a,b),g=a.max,h=a.min,$.each(k.options.seriesList,function(a,b){return"column"===b.type||"bar"===b.type?(l=!0,!1):void 0}),"x"===a.id&&(e=b.unitMinor,l&&(i=k._getBarAdjustment(a,e),m=Math.max(m,i.maxAdj),n=Math.max(n,i.minAdj)),k.isContainsCandlestick&&c&&(j=c.prototype._getCandlestickAdjustment.apply(this,[a,e]),m=Math.max(m,j),n=Math.max(n,j))),k.isContainsBubble&&$.wijmo.wijbubblechart&&(f=this.bubbleAxisAdjust.getAdjust(a,b),m=Math.max(m,f.max-g),n=Math.max(n,h-f.min)),n&&(a.min=h-n),m&&(a.max=g+m),(m||n)&&k._calculateMajorMinor(b,a)},e.prototype._getBarAdjustment=function(a,b){var c,d=0,e=this.options,f=a.max,g=a.min,h=0;return $.each(e.seriesList,function(a,b){return"pie"===b.type?!0:void 0===b.data.x||void 0===b.data.y?!0:(h=b.data.x.length,void(h>d&&(d=h)))}),d>1?c=(f-g)/d*e.clusterWidth*.0125:1===d?(0===g&&1===f&&(g=-1),c=.0125*(f-g)):c=0,0===c?c=b:c>b&&0!==b&&(c=Math.floor(c/b)*b),{"maxAdj":c,"minAdj":a.min-g+c}},e}(b.wijchartcore);b.wijcompositechart=d,d.prototype.widgetEventPrefix="wijcompositechart";var e=function(a){function b(){a.apply(this,arguments),this.compositechart="wijmo-wijcompositechart",this.barLabel="wijbarchart-label",this.barElement="wijbarchart",this.barTracker="bartracker",this.bubbleElement="wijbubblechart-bubble",this.bubbleTracker="bubbletracker",this.bubbleLabel="wijbubblechart-label",this.bubbleSymbol="wijbubblechart-symbol",this.scatterElement="wijscatterchart",this.pieLabel="wijpiechart-label",this.pieElement="wijpiechart",this.pieTracker="pietracker",this.lineLabel="wijlinechart-label",this.lineElement="wijlinechart",this.areaElement="wijlinechart-area",this.lineTracker="linetracker",this.canvasMarker="wijchart-canvas-marker",this.wijCandlestickChart="wijmo-wijcandlestickchart",this.candlestickChart="wijcandlestickchart",this.candlestickChartTracker="candlesticktracker"}return __extends(b,a),b}(b.wijchartcore_css);b.wijcompositechart_css=e;var f=function(b){function c(){b.apply(this,arguments),this.initSelector=":jqmData(role='wijcompositechart')",this.wijCSS=new a.chart.wijcompositechart_css,this.stacked=!1,this.clusterOverlap=0,this.clusterWidth=85,this.clusterRadius=0,this.clusterSpacing=0,this.seriesList=[],this.animation={"enabled":!0,"duration":400,"easing":">"},this.seriesTransition={"enabled":!0,"duration":400,"easing":">"},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null,this.hole={}}return __extends(c,b),c}(b.wijchartcore_options);d.prototype.options=$.extend(!0,{},b.wijchartcore.prototype.options,new f),$.wijmo.registerWidget("wijcompositechart",d.prototype)}(a.chart||(a.chart={}));a.chart}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d="wijdatepager",e="wijmo-wijdatepager",f="wijmo-wijdatepager-increment",g="wijmo-wijdatepager-decrement",h="wijmo-wijdatepager-container",i="wijmo-wijdatepager-pages",j="wijmo-wijdatepager-pagelabel",k="wijmo-wijdatepager-pagelabel-first",l="wijmo-wijdatepager-pagelabel-last",m="wijmo-wijdatepager-pageheader",n="wijmo-wijdatepager-pagerange",o="wijmo-wijdatepager-tooltip",p="wijmo-wijdatepager-tooltip-inner",q="wijmo-wijdatepager-triangle",r="wijmo-wijdatepager-width-smallest",s="wijmo-wijdatepager-width-small",t="wijmo-wijdatepager-width-medium",u="wijmo-wijdatepager-width-normal",v=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._setOption=function(a,b){switch(c.wijmo.widget.prototype._setOption.apply(this,arguments),a){case"culture":case"cultureCalendar":this.options[a]=b,this._innerCulture=null,this._resetCulture(),this._initBackground();break;case"selectedDate":this.options.selectedDate=b,this._initBackground();break;case"disabled":b?this._disable():this._enable();break;case"viewType":this.options.viewType=b,this._initBackground();break;case"nextTooltip":this.element.find("."+f).attr("title",b);break;case"prevTooltip":this.element.find("."+g).attr("title",b);break;case"firstDayOfWeek":this.options.firstDayOfWeek=b,"week"===this.options.viewType&&this._initBackground()}return this},b.prototype._disable=function(){this.element.addClass(this.options.wijCSS.stateDisabled),null==c.mobile?(this.element.find("."+g).button("option","disabled",!0),this.element.find("."+f).button("option","disabled",!0)):(this.element.find("."+g).addClass(this.options.wijCSS.stateDisabled),this.element.find("."+f).addClass(this.options.wijCSS.stateDisabled))},b.prototype._enable=function(){this.element.removeClass(this.options.wijCSS.stateDisabled),null==c.mobile?(this.element.find("."+g).button("option","disabled",!1),this.element.find("."+f).button("option","disabled",!1)):(this.element.find("."+g).removeClass(this.options.wijCSS.stateDisabled),this.element.find("."+f).removeClass(this.options.wijCSS.stateDisabled))},b.prototype._create=function(){var a,b,d,j=this.options;window.wijmoApplyWijTouchUtilEvents&&(c=window.wijmoApplyWijTouchUtilEvents(c)),j.selectedDate||(j.selectedDate=new Date),this._dtpagernamespacekey="dtpager"+(new Date).getTime(),this.element.addClass(e).addClass(j.wijCSS.wijdatepager).addClass(j.wijCSS.widget).addClass(j.wijCSS.helperClearFix),a=c.proxy(this.invalidate,this),c(window).bind("resize."+this._dtpagernamespacekey,a),this.element.disableSelection&&this.element.disableSelection(),this.element.append(c("<a></a>").addClass(g).addClass(j.wijCSS.wijdatepagerDecButton).append(c("<span>"+j.prevTooltip+"</span>"))).append(c("<div></div>").addClass(h).addClass(j.wijCSS.wijdatepagerContainer).addClass(j.wijCSS.content).append(c("<div></div>").addClass(i).addClass(j.wijCSS.wijdatepagerPages))).append(c("<a></a>").addClass(f).addClass(j.wijCSS.wijdatepagerIncButton).append(c("<span>"+j.nextTooltip+"</span>"))),c.wijmo.widget.prototype._create.apply(this,arguments),b=this.element.find("."+g),d=this.element.find("."+f),null==c.mobile?(b.button({"icons":{"primary":j.wijCSS.iconArrowLeft},"text":!1}),d.button({"icons":{"primary":j.wijCSS.iconArrowRight},"text":!1})):(b.html(""),b.addClass(j.wijCSS.iconArrowLeft+" "+j.wijCSS.icon+" ui-btn"),d.html(""),d.addClass(j.wijCSS.iconArrowRight+" "+j.wijCSS.icon+" ui-btn")),b.click(c.proxy(this.goLeft,this)),d.click(c.proxy(this.goRight,this)),this._initBackground(),j.disabled&&this._disable()},b.prototype.destroy=function(){this.element.removeClass(e).removeClass(this.options.wijCSS.wijdatepager),c(window).unbind("."+this._dtpagernamespacekey)},b.prototype.refresh=function(){this.invalidate()},b.prototype.invalidate=function(){var a,b,d,e,k,l,m,n=this.options,o=n.selectedDate,p=this.element.find("."+h),q=this.element.find("."+g),v=this.element.find("."+f),w=this.element.innerWidth(),x=q.is(":visible")?q.outerWidth(!0):0,y=v.is(":visible")?v.outerWidth(!0):0;a=this.element.find("."+j+"."+this._getDateClass(o)),1!==a.length?a=c(this.element.find("."+j)[this._index]):(b=this.element.find("."+j).index(a),this._index=b),m="."+j,l=n.wijCSS.stateActive.split(" "),c.each(l,function(a){m+="."+l[a]}),this.element.find(m).removeClass(n.wijCSS.stateActive),a.addClass(this.options.wijCSS.stateActive),p.css("left",x),this.element.removeClass(r).removeClass(n.wijCSS.wijdatepagerWidthSmallest).removeClass(s).removeClass(n.wijCSS.wijdatepagerWidthSmall).removeClass(t).removeClass(n.wijCSS.wijdatepagerWidthMedium).removeClass(u).removeClass(n.wijCSS.wijdatepagerWidthNormal),300>w?this.element.addClass(r).addClass(n.wijCSS.wijdatepagerWidthSmallest):475>w?this.element.addClass(s).addClass(n.wijCSS.wijdatepagerWidthSmall):600>w?this.element.addClass(t).addClass(n.wijCSS.wijdatepagerWidthMedium):this.element.addClass(u).addClass(n.wijCSS.wijdatepagerWidthNormal),p.outerWidth(w-x-y),c.browser.msie&&parseInt(c.browser.version,10)<=7&&(d=this.element.find("."+i),e=d.find("."+j),k=Math.round(d.width()/this._datesDef.length)-(e.outerWidth(!0)-e.width()),e.width(k))},b.prototype.goLeft=function(a){var b=this.options;if(!b.disabled)return this._setSelectedIndex(this._index-1,!0),a?(a.preventDefault(),!1):void 0},b.prototype.goRight=function(){var a=this.options;a.disabled||this._setSelectedIndex(this._index+1)},b.prototype._getCulture=function(a){return this._innerCulture||this._resetCulture(a),this._innerCulture},b.prototype._resetCulture=function(a){var b=c.wijGetCulture(a||this.options.culture,this.options.cultureCalendar);this._innerCulture=b},b.prototype._isRTL=function(){return!!this._getCulture().isRTL},b.prototype._initBackground=function(a,b){var d=this;"undefined"==typeof a&&(a=!1),"undefined"==typeof b&&(b=!1);var e,f,g,h,o,p=this,q=p.options,r=c("<div></div>");this._isInAnimate||(this._index=0,this._datesDef=this._getDatesDefinition(),this._min=0,this._max=this._datesDef.length-1,c.each(this._datesDef,function(a,b){var e=c("<div>"+d._datesDef[a].l+"</div>").addClass(j).addClass(q.wijCSS.wijdatepagerPageLabel).addClass(d._getDateClass(b.d));0===a&&e.addClass(k).addClass(q.wijCSS.wijdatepagerPageLabelFirst),b.range&&e.addClass(n).addClass(q.wijCSS.wijdatepagerPageRange),b.header&&e.addClass(m).addClass(q.wijCSS.wijdatepagerPageHeader).addClass(q.wijCSS.stateHighlight),a===d._max&&e.addClass(l).addClass(q.wijCSS.wijdatepagerPageLabelLast),r.append(e)}),e=r.html(),g=this.element.find("."+i),a?(this._isInAnimate=!0,f=g.clone(!0),g.html(e),h=g.find("."+j),b?(f.insertAfter(g),o=c(h[this._index]).offset().left,g.css("opacity",0).css("left",-f.outerWidth(!0)).stop().animate({"left":"0px","opacity":100}),f.css("left",0).stop().animate({"left":f.outerWidth(!0)+"px","opacity":0},function(){f.remove(),p._isInAnimate=!1,p.invalidate()})):(f.insertBefore(g),o=c(h[this._index]).offset().left,g.css("opacity",0).css("left",f.outerWidth(!0)).stop().animate({"left":"0px","opacity":100}),f.stop().animate({"left":"-"+f.outerWidth(!0)+"px","opacity":0},function(){f.remove(),p._isInAnimate=!1,p.invalidate()}))):(g.html(e),this.invalidate()),h=g.find("."+j),h.hover(c.proxy(this._pagelabelHover,this),c.proxy(this._pagelabelHout,this)),h.bind("mousedown",c.proxy(this._pagelabelMouseDown,this)),h.click(c.proxy(function(a){var b,d=c(a.target);b=this.element.find("."+j).index(d),this._setSelectedIndex(b)},this)))},b.prototype._getDateClass=function(a){return"c1dt"+a.getFullYear()+"_"+a.getMonth()+"_"+a.getDate()},b.prototype._addDays=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+b)},b.prototype._getDatesDefinition=function(){var a,b,c,d,e,f=this.options,g=f.viewType.toLowerCase(),h=[],i=f.selectedDate;switch(g){case"week":for(c=new Date(i.getFullYear(),i.getMonth(),-6),a=f.firstDayOfWeek-c.getDay(),Math.abs(a)>6&&(a=c.getDay()-f.firstDayOfWeek),c=this._addDays(c,a),e=new Date(i.getFullYear(),i.getMonth()+1,7),a=0;e>c||c.getMonth()===i.getMonth();)d=this._addDays(c,7),h.push({"l":this._formatString(this.localizeString("weekViewLabelFormat","{0:MMM dd}-{1:dd}"),c,this._addDays(c,6)),"d":c,"d2":this._addDays(c,6)}),i>=c&&d>=i&&(this._index=a),c=d,a+=1;break;case"month":for(b=new Date(i.getFullYear()-1,0,1),h.push({"l":b.getFullYear(),"d":b,"range":!0}),b=new Date(i.getFullYear(),0,1),h.push({"l":b.getFullYear(),"d":b,"header":!0}),a=0;12>a;a+=1)b=new Date(i.getFullYear(),a,1),h.push({"l":this._formatString(this.localizeString("monthViewLabelFormat","{0:MMM}"),b),"d":b}),d=new Date(i.getFullYear(),a+1,1),i>=b&&d>=i&&(this._index=a+2);b=new Date(i.getFullYear()+1,0,1),h.push({"l":b.getFullYear(),"d":b,"range":!0});break;default:for(b=new Date(i.getFullYear(),i.getMonth(),0),h.push({"l":Globalize.format(b,"MMM",this._getCulture()),"d":b,"range":!0}),b=new Date(i.getFullYear(),i.getMonth(),1),h.push({"l":Globalize.format(b,"MMM",this._getCulture()),"d":b,"header":!0}),c=b,a=2;c.getMonth()===i.getMonth();)d=new Date(c.getFullYear(),c.getMonth(),c.getDate()+1),h.push({"l":this._formatString(this.localizeString("dayViewLabelFormat","{0:d }"),c),"d":c}),i>=c&&d>=i&&(this._index=a),c=d,a+=1;b=new Date(i.getFullYear(),i.getMonth()+1,1),h.push({"l":Globalize.format(b,"MMM",this._getCulture()),"d":b,"range":!0})}return h},b.prototype._setSelectedIndex=function(a,b){"undefined"==typeof b&&(b=!1);var c,d=this.options;if(!d.disabled&&a>=this._min&&a<=this._max&&(this._dragActivated&&this._showTooltip(a),this._index!==a)){if(this._datesDef[a].header){if(!b)return;a-=1}this._index=a,c=this._datesDef[a].d,d.selectedDate=c,this._max>2&&0===this._index?this._initBackground(!0,!0):this._index===this._max?("week"===d.viewType&&(d.selectedDate=new Date(d.selectedDate.getFullYear(),d.selectedDate.getMonth(),d.selectedDate.getDate()+7)),this._initBackground(!0,!1),d.selectedDate=c):this.invalidate(),this._trigger("selectedDateChanged",null,{"selectedDate":d.selectedDate})}},b.prototype._pagelabelHover=function(a){var b=c(a.target),d=this.options;b.hasClass(m)||b.addClass(d.wijCSS.stateHover)},b.prototype._showTooltip=function(a){var b,d=this.options,e=this._datesDef[a],f=d.viewType,g=this.element.find("."+j)[a];switch(this._tooltip||(this._tooltip=c("<div></div>").addClass(o).addClass(d.wijCSS.wijdatepagerTooltip).append(c("<div></div>").addClass(p).addClass(d.wijCSS.wijdatepagerTooltipInner)).append(c("<div></div>").addClass(q).addClass(d.wijCSS.wijdatepagerTriangle)),this.element.append(this._tooltip),this._tooltip.wijpopup()),b="",f){case"week":b=e.d.getMonth()!==e.d2.getMonth()?this._formatString(this.localizeString("weekViewTooltip2MonthesFormat","{0:MMMM d} - {1:MMMM d, yyyy}"),e.d,e.d2):this._formatString(this.localizeString("weekViewTooltipFormat","{0:MMMM d} - {1:d, yyyy}"),e.d,e.d2);break;case"month":b=this._formatString(this.localizeString("monthViewTooltipFormat","{0:MMMM yyyy}"),e.d);break;default:b=this._formatString(this.localizeString("dayViewTooltipFormat","{0:dddd, MMMM d, yyyy}"),e.d)}c.ui&&(this._tooltip.wijpopup("show",{"of":g,"my":"center bottom","at":"center top","offset":"-10 -10"}),this._tooltip.find("."+p).html(b))},b.prototype._hideTooltip=function(){this._tooltip.wijpopup("hide")},b.prototype._pagelabelHout=function(a){c(a.target).removeClass(this.options.wijCSS.stateHover)},b.prototype._pagelabelMouseDown=function(a){if(this._dragActivated=!1,!this.options.disabled){a.preventDefault();var b,d=c(a.target);d.hasClass(m)||(b=this.element.find("."+j).index(d),this._dragActivated=!0,this._setSelectedIndex(b),this._mouseDownTimeFix20555=(new Date).getTime(),this._startClientX=a.pageX,this._startInd=b,c(document).bind("mousemove."+this._dtpagernamespacekey,c.proxy(this._pageindicatorMouseMove,this)),c(document).bind("mouseup."+this._dtpagernamespacekey,c.proxy(this._pageindicatorMouseUp,this)))}},b.prototype._detectLeftButton=function(a){return a.originalEvent&&(a=a.originalEvent),"buttons"in a?1===a.buttons:"which"in a?1===a.which:1===a.button},b.prototype._pageindicatorMouseMove=function(a){if(!this._detectLeftButton(a))return void this._pageindicatorMouseUp();if(a.preventDefault(),!this._isInAnimate){var b,c,d=this.element.find("."+j)[this._startInd];d&&(b=d.offsetLeft+Math.round(d.offsetWidth/2)+(a.pageX-this._startClientX),c=this._findClosesPageIndexByPos(b),this._prevMoveInd!==c&&(this._prevMoveInd=c,this._mouseDownTimeFix20555+150>(new Date).getTime()||-1!==c&&c!==this._index&&this._setSelectedIndex(c)))}},b.prototype._pageindicatorMouseUp=function(){this._dragActivated=!1,c(document).unbind("."+this._dtpagernamespacekey),this._hideTooltip()},b.prototype._findClosesPageIndexByPos=function(a){var b,c=this.element.find("."+i).find("."+j);for(b=0;b<c.length;b+=1)if(c[b].offsetLeft<a&&c[b].offsetLeft+c[b].offsetWidth>a)return b;return-1},b.prototype.localizeString=function(a,b){var c=this.options;return c.localization&&c.localization[a]?c.localization[a]:b},b.prototype._formatString=function(a,b,c,d){var e,f,g,h=arguments,i=this;if(h.length<=1)return Globalize.format(h);if("string"==typeof a&&"function"==typeof window[a]&&(a=window[a]),"function"==typeof a){for(g=[],f=1;f<h.length;f+=1)g[f-1]=h[f];return a.apply(this,g)}return e=new RegExp("\\{(\\d+)(?:,([-+]?\\d+))?(?:\\:([^(^}]+)(?:\\(((?:\\\\\\)|[^)])+)\\)){0,1}){0,1}\\}","g"),a.replace(e,function(a,b,c,d,e){return a=h[Number(b)+1],d?Globalize.format(a,d,i._getCulture()):a})},b}(a.wijmoWidget);b.wijdatepager=v;var w=function(){function a(){this.wijCSS={"wijdatepager":"","wijdatepagerIncButton":"","wijdatepagerDecButton":"","wijdatepagerContainer":"","wijdatepagerPages":"","wijdatepagerPageLabel":"","wijdatepagerPageLabelFirst":"","wijdatepagerPageLabelLast":"","wijdatepagerPageHeader":"","wijdatepagerPageRange":"","wijdatepagerTooltip":"","wijdatepagerTooltipInner":"","wijdatepagerTriangle":"","wijdatepagerWidthSmallest":"","wijdatepagerWidthSmall":"","wijdatepagerWidthMedium":"","wijdatepagerWidthNormal":""},this.wijMobileCSS={"header":"ui-header ui-bar-a","content":"ui-body ui-body-b","stateDefault":"ui-btn ui-btn-b"},this.initSelector=":jqmData(role='wijdatepager')",this.culture="",this.cultureCalendar="",this.localization=null,this.firstDayOfWeek=0,this.selectedDate=null,this.viewType="day",this.nextTooltip="right",this.prevTooltip="left",this.selectedDateChanged=null}return a}();v.prototype.options=c.extend(!0,{},a.wijmoWidget.prototype.options,new w),c.wijmo.registerWidget(d,v.prototype)}(a.datepager||(a.datepager={}));a.datepager}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";function c(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())}function d(){var a,b,c;for(a="",c=0;32>c;c+=1)(8===c||12===c||16===c||20===c)&&(a+="-"),b=Math.floor(16*Math.random()).toString(16).toUpperCase(),a+=b;return a}function e(a,b,c){m?(h=amplify.store("wijevcal_tables1"),h||(h={}),h[a]||(h[a]={"fields":b},amplify.store("wijevcal_tables1",h),amplify.store("wijevcal_tbl_"+a,{})),c&&c()):g&&g.transaction(function(d){d.executeSql("SELECT COUNT(*) FROM "+a,[],function(){c&&c()},function(d,e){d.executeSql("CREATE TABLE "+a+" "+b,[],c,c)})})}function f(a,b,c,d){var e,f,i,j,k,l,n,o,p,q,r,s,t,u,v={"rowsAffected":0,"rows":new Array};if(b||(b=[]),v.rows.item||(v.rows.item=function(a){return this[a]}),m)try{if(i=new RegExp("(SELECT) *(.*) *FROM (\\w+)"),j=new RegExp("(INSERT OR REPLACE|INSERT) *(.*) *INTO *(\\w*) *\\(([\\w|,| ]*)\\)"),k=new RegExp("(DELETE) *(.*) *FROM (\\w+) *(\\w*)WHERE (\\w+)='*([^']+)"),a.match(j)){if(l=j.exec(a),l&&l.length>1){if(n=l[3],o=h[n],p=amplify.store("wijevcal_tbl_"+n))for(r=l[4].split(","),e={},f=0;f<r.length;f+=1)r[f]&&(0===f&&(p[b[f]]=e),s=r[f].replace(" ",""),e[s]=b[f]);amplify.store("wijevcal_tbl_"+n,p)}}else if(a.match(i)){if(l=i.exec(a),l&&l.length>1&&(n=l[3],o=h[n],p=amplify.store("wijevcal_tbl_"+n))){if(t=a.replace(i,""),0===t.toUpperCase().indexOf(" WHERE "))for(t=t.substr(7),u=t.split(" OR "),f=0;f<u.length;f+=1)u[f]=u[f].split("="),t=u[f][1],0===t.indexOf("'")?(t=t.substring(1,t.length-1),u[f][1]=t):u[f][1]=parseFloat(t);for(q in p)if(p.hasOwnProperty(q)&&(e=p[q]))if(u)for(f=0;f<u.length;f+=1)e[u[f][0]]===u[f][1]&&v.rows.push(e);else v.rows.push(e)}}else a.match(k)&&(l=k.exec(a),l&&l.length>1&&(n=l[3],o=h[n],p=amplify.store("wijevcal_tbl_"+n),p&&p[l[6]]&&delete p[l[6]],amplify.store("wijevcal_tbl_"+n,p)));c&&c(v)}catch(w){d&&d(w)}else{if(!g)return void d("Local data storage not found.");g.transaction(function(e){e.executeSql(a,b,function(a,b){c&&c(b)},function(a,b){d&&d(b.message)})})}}var g,h,i=jQuery,j="wijevcal",k="C1EventsCalendarDB",l="1.1",m=!1,n=function(a){function b(){a.apply(this,arguments),this._dynIdCounter=0}return __extends(b,a),b.prototype._setOption=function(a,b){var c,d=this,e=i.when.apply(this,d._defferObjs);e.always(function(){d._setOptionCallbacks.fire(),d._setOptionCallbacks.empty(),d._defferObjs=[]}),"pending"===e.state()?this._setOptionCallbacks.add(function(){c=i.isPlainObject(b)?i.extend(!0,{},b):i.isArray(b)?[].concat(b):b,d._setOptionInternal(a,c)}):this._setOptionInternal(a,b)},b.prototype._setOptionInternal=function(a,b){var d,e,f=this.options;switch(a){case"dataSource":f.dataSource=b,this._needLoadLocalStorage=!1,f.eventsData=[],this._bindDataView();break;case"eventsData":f.eventsData=b,f.appointments=b,this._needLoadLocalStorage=!1,this._onEventsDataChanged(),this._bindEvents();break;case"appointments":f.eventsData=b,f.appointments=b,this._needLoadLocalStorage=!1,this._onEventsDataChanged(),this._bindEvents();break;case"localization":this._setLocalization(b);break;case"culture":case"cultureCalendar":f[a]=b,this._innerCulture=null,this._resetCulture(),this.element.find(".wijmo-wijdatepager").wijdatepager("option",a,b),this._editEventDialog&&this._editEventDialog.find(".wijmo-wijinput-date").wijinputdate("option",a,b),this.element.find(".wijmo-wijcalendar").wijcalendar("option",a,b),this._redrawActiveView();break;case"calendar":this.element.find(".wijmo-wijcalendar").wijcalendar("option",b),this._redrawActiveView();break;case"disabled":f.disabled!==b&&(f.disabled=b,
this._ensureDisabled());break;case"enableLogs":f.enableLogs=b,this._initLogPanel();break;case"selectedDate":return void(b&&(b=c(b),f.selectedDates[0].getTime()!==b.getTime()&&(f.selectedDates[0]=b,this._onSelectedDatesChanged())));case"selectedDates":return void(b&&(f.selectedDates=b,this._onSelectedDatesChanged()));case"statusBarVisible":return f.statusBarVisible=b,this._initStatusbar(),void this.invalidate();case"headerBarVisible":return f.headerBarVisible=b,this._initHeaderbar(),void this.invalidate();case"navigationBarVisible":return f.navigationBarVisible=b,this._initNavigationbar(),void this.invalidate();case"rightPaneVisible":return f.rightPaneVisible=b,this._initRightPane(),void this.invalidate();case"timeInterval":case"timeIntervalHeight":case"timeRulerInterval":case"timeRulerFormat":f[a]!==b&&(f[a]=b,this._redrawActiveView());break;case"firstDayOfWeek":f[a]!==b&&(f[a]=b,this._redrawActiveView(),d=this._getCulture(),d&&d.calendar&&(d.calendar.firstDay=b,e=this.element.find(".wijmo-wijcalendar").data("wijmo-wijcalendar"),e&&e._getCulture&&e.refresh&&(e._getCulture().calendar.firstDay=b,e.refresh())));break;case"viewType":f.viewType!==b&&(f.viewType=b,("day"===b.toLowerCase()||"list"===b.toLowerCase())&&(f.selectedDates=[f.selectedDate]),this._onViewTypeChanged())}i.wijmo.widget.prototype._setOption.apply(this,arguments)},b.prototype._setLocalization=function(a){this._destroyInternal(),this.options.localization=a,this._create(),this._init()},b.prototype._ensureDisabled=function(){var a=this.options;if(a.disabled){this.element.addClass(a.wijCSS.stateDisabled);try{this.element.find(".wijmo-wijcalendar").wijcalendar("option","disabled",!0),this.element.find(".wijmo-wijsuperpanel").wijsuperpanel("option","disabled",!0),this.element.find(".wijmo-wijdatepager").wijdatepager("option","disabled",!0),i().buttonset&&this.element.find(".ui-buttonset").buttonset("option","disabled",!0),this.element.find(".wijmo-wijev-today.ui-button").button("option","disabled",!0)}catch(b){this.log(b,"error")}this._unbindEvents()}else{this.element.removeClass(a.wijCSS.stateDisabled);try{this.element.find(".wijmo-wijcalendar").wijcalendar("option","disabled",!1),this.element.find(".wijmo-wijsuperpanel").wijsuperpanel("option","disabled",!1),this.element.find(".wijmo-wijdatepager").wijdatepager("option","disabled",!1),i().buttonset&&this.element.find(".ui-buttonset").buttonset("option","disabled",!1),this.element.find(".wijmo-wijev-today.ui-button").button("option","disabled",!1)}catch(b){this.log(b,"error")}this._bindEvents(),this._updateTitleText()}},b.prototype._onViewTypeChanged=function(){this._renderActiveView(),this._updateTitleText(),this._trigger("viewTypeChanged",null,this.options.viewType),this.element.find(".wijmo-wijev-datepager").wijdatepager("option","viewType",this.options.viewType)},b.prototype._onSelectedDatesChanged=function(){var a=this.options;a.selectedDate=a.selectedDates[0],this.element.find(".wijmo-wijev-datepager").wijdatepager("option","selectedDate",a.selectedDate),this._trigger("selectedDatesChanged",null,{"selectedDates":a.selectedDates}),this._renderActiveView(),this._updateTitleText()},b.prototype._updateHeaderTitleText=function(){var a=this.options,b=a.titleFormat,c=a.selectedDates[0],d=a.selectedDates[a.selectedDates.length-1];if(b[a.viewType])b=b[a.viewType];else{if(b[a.viewType]===!1)return void this.element.find(".wijmo-wijev-view .wijmo-wijev-header-title").hide();b=b.toString()}"list"===a.viewType&&(d=this._addDays(c,14)),this.element.find(".wijmo-wijev-view .wijmo-wijev-header-title").show().html(this._formatString(b,c,d))},b.prototype._updateTitleText=function(){var a=this.options,b=a.selectedDates[0],c=a.selectedDates[a.selectedDates.length-1],d=new Date,e=!1;e=0===this._compareDayDates(b,d)||d>b&&c>d,null==i.mobile&&this.element.find(".wijmo-wijev-navigationbar .wijmo-wijev-today").button("option","disabled",e),this._updateHeaderTitleText()},b.prototype.localizeString=function(a,b){var c=this.options;return c.localization&&c.localization[a]?c.localization[a]:b},b.prototype._create=function(){var a=this;window.wijmoApplyWijTouchUtilEvents&&(i=window.wijmoApplyWijTouchUtilEvents(i)),this._defferObjs=[],this._chromeLoadDataDeffer=i.Deferred(),this._defferObjs.push(this._chromeLoadDataDeffer),this._setOptionCallbacks=i.Callbacks("once"),this._needLoadLocalStorage=!0,(this.options.appointments&&this.options.appointments.length||this.options.eventsData&&this.options.eventsData.length)&&(this._needLoadLocalStorage=!1),i.isFunction(window.wijmoASPNetParseOptions)&&window.wijmoASPNetParseOptions(this.options);var b,c,d=this.options;d.colors||(d.colors=["red","darkorchid","green","blue","cornflowerblue","yellow","bronze"]),this.wijevcalnamespacekey||(this.wijevcalnamespacekey="wijevcal"+(new Date).getTime()),this.element[0].id||(this.element[0].id="wijevcal_dynid_"+(new Date).getTime()),this._uidPref=this.element[0].id+"evcdynid",this.element.addClass("wijmo-wijevcal wijmo-wijev "+d.wijCSS.widget+" "+d.wijCSS.helperReset+" "+d.wijCSS.stateDefault),i('<div class="wijmo-wijev-headerbar '+d.wijCSS.header+" "+d.wijCSS.cornerTop+'"><fieldset class="wijmo-wijev-tools"><input id="'+this._uidPref+'_daybtn" name="viewselection" type="radio" class="wijmo-wijev-day" /><label for="'+this._uidPref+'_daybtn">'+this.localizeString("buttonDayView","Day")+'</label><input id="'+this._uidPref+'_weekbtn" name="viewselection" type="radio" class="wijmo-wijev-week" /><label for="'+this._uidPref+'_weekbtn">'+this.localizeString("buttonWeekView","Week")+'</label><input id="'+this._uidPref+'_monthbtn" name="viewselection" type="radio" class="wijmo-wijev-month" /><label for="'+this._uidPref+'_monthbtn">'+this.localizeString("buttonMonthView","Month")+'</label><input id="'+this._uidPref+'_listbtn" name="viewselection" type="radio" class="wijmo-wijev-list" /><label for="'+this._uidPref+'_listbtn">'+this.localizeString("buttonListView","List")+"</label></fieldset></div>").appendTo(this.element),i('<div class="wijmo-wijev-view-container"><div class="wijmo-wijev-leftpane wijmo-wijev-viewdetails '+d.wijCSS.content+' wijmo-wijev-day-details"><div class="wijmo-wijev-leftpane-inner"><div class="wijmo-wijev-daycalendar"></div><div class="wijmo-wijev-monthday-container"><div class="wijmo-wijev-monthday-label">...</div><div class="wijmo-wijev-fulldate-label">'+this.localizeString("activityLoading","Loading...")+'</div><div class="wijmo-wijev-year-label">...</div></div><div class="wijmo-wijev-agenda-container '+d.wijCSS.content+" "+d.wijCSS.cornerAll+" "+d.wijCSS.helperClearFix+'"></div></div></div><div class="wijmo-wijev-leftpane wijmo-wijev-viewdetails '+d.wijCSS.content+' wijmo-wijev-list-details"><div class="wijmo-wijev-leftpane-inner"><div class="wijmo-wijev-agenda-container '+d.wijCSS.content+" "+d.wijCSS.cornerAll+" "+d.wijCSS.helperClearFix+'">&nbsp;</div></div></div><div class="wijmo-wijev-rightpane">&nbsp;</div></div>').appendTo(this.element),i('<div class="wijmo-wijev-loading-modal-frame"></div><div class="wijmo-wijev-loading"><div class="wijmo-wijev-loading-text">'+this.localizeString("activityLoading","Loading...")+"</div></div>").appendTo(this.element),i('<div class="wijmo-wijev-navigationbar '+d.wijCSS.header+" "+d.wijCSS.cornerBottom+" "+d.wijCSS.helperClearFix+'"><a class="wijmo-wijev-today">'+this.localizeString("buttonToday","today")+'</a><div class="wijmo-wijev-datepager"></div></div>').appendTo(this.element),i('<div class="wijmo-wijev-statusbar '+d.wijCSS.header+" "+d.wijCSS.cornerBottom+'"></div>').appendTo(this.element),b=this.element.find(".wijmo-wijev-navigationbar"),c=this.element.find(".wijmo-wijev-headerbar .wijmo-wijev-tools"),null!=i.mobile?b.find(".wijmo-wijev-today").addClass("ui-btn ui-btn-corner-all").click(i.proxy(this._onTodayClick,this)):b.find(".wijmo-wijev-today").button({"text":this.localizeString("buttonToday","today")}).click(i.proxy(this._onTodayClick,this)),this.element.find(".wijmo-wijev-datepager").wijdatepager({"selectedDate":d.selectedDate,"localization":d.datePagerLocalization,"culture":d.culture,"cultureCalendar":d.cultureCalendar,"viewType":d.viewType,"nextTooltip":this.localizeString("navigatorBarNextTooltip","right"),"prevTooltip":this.localizeString("navigatorBarPrevTooltip","left"),"firstDayOfWeek":d.firstDayOfWeek,"selectedDateChanged":i.proxy(function(a,b){this.goToDate(b.selectedDate)},this)}),null==i.mobile?(c.find(".wijmo-wijev-day").button().button("widget").addClass(d.wijCSS.stateDefault),c.find(".wijmo-wijev-week").button().button("widget").addClass(d.wijCSS.stateDefault),c.find(".wijmo-wijev-month").button().button("widget").addClass(d.wijCSS.stateDefault),c.find(".wijmo-wijev-list").button().button("widget").addClass(d.wijCSS.stateDefault),c.buttonset()):(c.attr("data-role","controlgroup"),c.attr("data-type","horizontal"),c.parent().trigger("create"),c.controlgroup("refresh")),this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){a.element.wijRemoveVisibilityObserver&&a.element.wijRemoveVisibilityObserver(),a._redrawActiveView()},"wijevcal"),c.find(".wijmo-wijev-day").click(i.proxy(this._onDayViewClick,this)),c.find(".wijmo-wijev-week").click(i.proxy(this._onWeekViewClick,this)),c.find(".wijmo-wijev-month").click(i.proxy(this._onMonthViewClick,this)),c.find(".wijmo-wijev-list").click(i.proxy(this._onListViewClick,this)),this.showLoadingLabel()},b.prototype.showLoadingLabel=function(a,b){a===!1?this.element.find(".wijmo-wijev-loading-text").hide():(this.element.find(".wijmo-wijev-loading-text").show(),a||(a=this.localizeString("activityLoading","Loading..."))),(void 0===b||b===!0)&&this.element.find(".wijmo-wijev-loading-modal-frame").show(),this.element.find(".wijmo-wijev-loading").show(),this.element.find(".wijmo-wijev-loading-text").html(a)},b.prototype.hideLoadingLabel=function(){this.element.find(".wijmo-wijev-loading-modal-frame").hide(),this.element.find(".wijmo-wijev-loading").hide()},b.prototype._init=function(){var a=this.options;a.selectedDates&&a.selectedDates.length>0?a.selectedDate=a.selectedDates[0]=c(a.selectedDates[0]):a.selectedDate?(a.selectedDate=c(a.selectedDate),a.selectedDates||(a.selectedDates=[]),a.selectedDates[0]=a.selectedDate):(a.selectedDate=c(new Date),a.selectedDates=[a.selectedDate]),a.disabled&&this.element.addClass(a.wijCSS.stateDisabled),this._initHeaderbar(),this._initNavigationbar(),this._initStatusbar(),this._initRightPane(),a.fullScreen&&this._onFullScreenModeChanged(a.fullScreen),this._initLogPanel(),this._initLocalDataStorage(),this.element.ajaxError(jQuery.proxy(this._onAjaxError,this)),i(window).bind("resize."+this.wijevcalnamespacekey,i.proxy(this._onWindowResize,this)),this._renderActiveView(),this._bindDataView()},b.prototype._onFullScreenModeChanged=function(a){},b.prototype._isDataViewLoaded=function(a){return a&&(a.isLoaded()||a.count()>0)},b.prototype._isDataview=function(a){return a&&"object"==typeof a&&!i.isArray(a)?!0:void 0},b.prototype._getDataViewInst=function(){return this.element.data("wijdataview")},b.prototype._bindDataView=function(){var a,b=this.options,a=b.dataSource,c=this;!a&&this._getDataViewInst()&&(a=this._getDataViewInst(),a=b.dataSource=a),a&&this._isDataview(a)?this._isDataViewLoaded(a)?(this._dataView=a,this._setOption("eventsData",a.toArray())):a.element.bind("dataloaded",function(){c._dataView=a,c._setOption("eventsData",a.toArray())}):this._dataView=null},b.prototype._initLocalDataStorage=function(){try{if(m=!1,window.amplify&&window.amplify.store)try{h=amplify.store("wijevcal_tables1"),m=!0,this.log("Using amplify.store for the local data storage")}catch(a){return this.log("amplify.store exception:"+a),void this._loadData()}else{if(!window.openDatabase)return this.log(this.localizeString("logCouldntOpenLocalStorage","Couldn't open built-in local data storage. Please, add amplify.store references.")),void this._loadData();try{g=window.openDatabase(k,l,"Wijmo Events Calendar Offline DB",2e5)}catch(b){return this.log("web sql database error: "+b),void this._loadData()}if(!g)return this.log("Failed to open the database on disk. This is probably because the version was bad or there is not enough space left in this domain's quota"),void this._loadData();this.log("Using Web SQL Database for the local data storage.")}e("calendars","(id TEXT PRIMARY KEY, name TEXT, location TEXT, description TEXT, color TEXT, tag TEXT)");var c=i.Deferred(),d=this;this._defferObjs.push(c),e("events","(id TEXT PRIMARY KEY, calendar TEXT, subject TEXT, location TEXT, start TIMESTAMP, end TIMESTAMP, description TEXT, color TEXT, allday INTEGER, properties TEXT, tag TEXT)",function(){d._loadData(),c.resolve()})}catch(f){this.log("local datastorage initialization error:"+f)}},b.prototype._initStatusbar=function(){var a=this.element.find(".wijmo-wijev-statusbar");return this.options.statusBarVisible?(a.css("float","left"),a.show(),void(this.statusbarEventsAdded||(this.statusbarEventsAdded=!0))):void a.hide()},b.prototype._initHeaderbar=function(){var a=this.element.find(".wijmo-wijev-headerbar");return this.options.headerBarVisible?void a.show():void a.hide()},b.prototype._initNavigationbar=function(){var a=this.element.find(".wijmo-wijev-navigationbar");return this.options.navigationBarVisible?void a.show():void a.hide()},b.prototype._initRightPane=function(){var a=this.element.find(".wijmo-wijev-rightpane");return this.options.rightPaneVisible?void a.show():void a.hide()},b.prototype._initLogPanel=function(){this.options.enableLogs?(this._createLogPanel(),this.log=this._log):(this.logDialog&&this.logDialog.wijdialog("close"),this.log=function(){})},b.prototype._handleServerError=function(a){return a&&0===a.toString().indexOf("error:")?(this.status(a.toString(),"error"),!0):!1},b.prototype._loadData=function(){var a,b,c,d,e,g,h,j,k,l,m,n=this.options,o=this;if(this.showLoadingLabel(),l=function(a){"Local data storage not found."===a&&(m=!0),o.hideLoadingLabel()},n.calendars=[],e=this._calendarsById={},j=function(b){if(n.calendars=[],b){if("string"==typeof b){if(o._handleServerError(b))return void l(b);try{b=o._jsonParse(b)}catch(d){return void o.status("Unable to parse received calendars data. "+d,"error")}}for(b.calendars&&b.calendars.length&&(b=b.calendars),a=0;a<b.length;a+=1)c=o._cloneObj(b[a]),c.prevData=o._cloneObj(c),n.calendars.push(c),e[c.id]=c;o._onCalendarsChanged()}},n.dataStorage.loadCalendars?n.dataStorage.loadCalendars(j,l):n.webServiceUrl?i.getJSON(n.webServiceUrl+"?clientId="+this.element[0].id+"&command=loadCalendars&calendars="+n.calendars,j):f("SELECT * FROM calendars",[],function(d){for(a=0,b=d.rows.length;b>a;a+=1)c=o._cloneObj(d.rows.item(a)),c.prevData=o._cloneObj(c),n.calendars.push(c),e[c.id]=c;o._onCalendarsChanged()},l),this._dataView&&(n.eventsData=this._dataView.toArray()),g=this._eventsDataById?this._eventsDataById:this._eventsDataById={},n.eventsData||(n.eventsData=[]),k=function(b){if(b){if("string"==typeof b){if(o._handleServerError(b))return void l(b);try{b=o._jsonParse(b)}catch(c){return void o.log("Unable to parse received calendars data. "+c)}}for(b.events&&b.events.length&&(b=b.events),a=0;a<b.length;a+=1)d=o._readEventData(b[a]),o._storeEventWithSort(d);o._onEventsDataChanged(),o._onInitialized()}},n.dataStorage.loadEvents)n.dataStorage.loadEvents(n.visibleCalendars,k,l),o._chromeLoadDataDeffer.resolve();else if(n.webServiceUrl)i.ajax({"url":n.webServiceUrl+"?clientId="+this.element[0].id+"&command=loadEvents&timestamp="+(new Date).getTime(),"dataType":"text","cache":!1,"contentType":"application/json; charset=utf-8","type":"POST","success":k,"error":l}),o._chromeLoadDataDeffer.resolve();else{if(this._dataView)return void this._onInitialized();for(h="SELECT * FROM events where ",a=0;a<n.visibleCalendars.length;a+=1)a>0&&(h+=" OR "),h+="calendar='"+n.visibleCalendars[a]+"'";f(h,[],function(c){if(o._needLoadLocalStorage)for(n.eventsData=[],a=0,b=c.rows.length;b>a;a+=1)d=o._readEventData(c.rows.item(a)),o._storeEventWithSort(d);o._onEventsDataChanged(),o._onInitialized(),o._chromeLoadDataDeffer.resolve()},function(){l.apply(this,arguments),m&&(o._onEventsDataChanged(),o._onInitialized()),o._chromeLoadDataDeffer.resolve()})}},b.prototype._onInitialized=function(){this._ensureDisabled(),this.hideLoadingLabel(),this._trigger("initialized")},b.prototype._readEventData=function(a){var b=this._cloneObj(a);return b.start=new Date(b.start),b.end=new Date(b.end),"string"==typeof b.allday&&("false"===b.allday&&(b.allday=!1),"true"===b.allday&&(b.allday=!0)),b.start.getTime()>=b.end.getTime()&&(b.end=this._addMinutes(b.start,this.options.timeInterval)),this._deSerializeProperties(b.properties,b),b.prevData=this._cloneObj(b),b},b.prototype._prepareEventsForView=function(){this._eventsView=this.getOccurrences()},b.prototype._cloneObj=function(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c},b.prototype._onDayViewClick=function(){var a=this.options;a.disabled||("day"!==a.viewType&&(a.viewType="day",this._onViewTypeChanged()),a.selectedDates=[a.selectedDate],this._onSelectedDatesChanged())},b.prototype._onWeekViewClick=function(){var a,b,c,d=this.options;if(!d.disabled){for("week"!==d.viewType&&(d.viewType="week",this._onViewTypeChanged()),a=d.selectedDate,c=d.firstDayOfWeek-a.getDay(),Math.abs(c)>6&&(c=a.getDay()-d.firstDayOfWeek),a=this._addDays(a,c),d.selectedDates=[],c=0;7>c;c+=1)b=this._addDays(a,c),d.selectedDates.push(b);this._onSelectedDatesChanged()}},b.prototype._onMonthViewClick=function(){var a=this.options;a.disabled||"month"!==a.viewType&&(a.viewType="month",this._onViewTypeChanged())},b.prototype._onListViewClick=function(){var a=this.options;a.disabled||("list"!==a.viewType&&(a.viewType="list",this._onViewTypeChanged()),a.selectedDates=[a.selectedDate],this._onSelectedDatesChanged())},b.prototype._ensureEditCalendarDialogCreated=function(){var a,b=this.options,c={};this._editCalendarDialog||(a=b.editCalendarTemplate,a||(a="<p><label>"+this.localizeString("labelCalendarName","Calendar name")+'</label><input type="text" class="wijmo-wijev-name" value=""> <div class="wijmo-wijev-color-button"><div class="wijmo-wijev-color ui-wijmo-wijev-event-color-default">&nbsp;</div></div></p><p><label>'+this.localizeString("labelLocation","Location")+'</label><input type="text" class="wijmo-wijev-location" value=""></p><p><label>'+this.localizeString("labelDescription","Description")+'</label><textarea class="wijmo-wijev-description" /></p>'),this._editCalendarDialog=i('<div class="wijmo-wijev-editcalendar-dialog">'+a+"</div>"),this.element.append(this._editCalendarDialog),c[this.localizeString("buttonSave","Save")]=i.proxy(function(){try{var a=this._validateAndReadCalendarDialogFields(this._editCalendarDialog);a.prevData?this.updateCalendar(a):this.addCalendar(a),this._editCalendarDialog.wijdialog("close")}catch(b){alert(b)}},this),this._editCalendarDialog.wijdialog({"autoOpen":!0,"height":340,"width":440,"modal":!0,"title":this.localizeString("titleEditCalendar","Edit calendar"),"buttons":c,"captionButtons":{"pin":{"visible":!1},"refresh":{"visible":!1},"toggle":{"visible":!1},"minimize":{"visible":!1},"maximize":{"visible":!1}}}),this._editCalendarDialog.find(".wijmo-wijev-name, .wijmo-wijev-location, .wijmo-wijev-description").wijtextbox(),this._editCalendarDialog.find(".wijmo-wijev-color-button").button({"icons":{"primary":b.wijCSS.iconArrowDown}}).click(i.proxy(this._onColorButtonClick,{"dlg":this._editCalendarDialog,"self":this})))},b.prototype._ensureEditEventDialogCreated=function(){var a,b=this.options,c=!1,d=!1;this._editEventDialog||(a=this.options.editEventDialogTemplate,a||(a='<div class="wijmo-wijev-event-dialog '+this.options.wijCSS.content+" "+b.wijCSS.cornerAll+'"><ul class="wijmo-wijev-brief-content"><li><label>'+this.localizeString("labelName","name")+'</label><input type="text" name="subject" class="wijmo-wijev-subject" value=""><div class="wijmo-wijev-color-button"><div class="wijmo-wijev-color ui-wijmo-wijev-event-color-default">&nbsp;</div></div></li><li><label for="'+this._uidPref+'_alldaybtn">'+this.localizeString("labelAllDay","all-day")+'</label><input type="checkbox" class="wijmo-wijev-allday" id="'+this._uidPref+'_alldaybtn" /></li><li><label>'+this.localizeString("labelStarts","Starts")+'</label><input type="text" class="wijmo-wijev-start" value=""><input type="text" class="wijmo-wijev-start-time" value=""></li><li><label>'+this.localizeString("labelEnds","Ends")+'</label><input type="text" class="wijmo-wijev-end" value=""><input type="text" class="wijmo-wijev-end-time" value=""></li></ul><ul class="wijmo-wijev-detailed-content '+b.wijCSS.cornerAll+'"><li><label>'+this.localizeString("labelLocation","Location")+'</label><input type="text" class="wijmo-wijev-location" value=""></li><li><label>'+this.localizeString("labelRepeat","Repeat")+'</label><select class="wijmo-wijev-repeat"><option value="none">'+this.localizeString("repeatNone","None")+'</option><option value="daily">'+this.localizeString("repeatDaily","Every Day")+'</option><option value="workdays">'+this.localizeString("repeatWorkDays","Work days")+'</option><option value="weekly">'+this.localizeString("repeatWeekly","Every Week")+'</option><option value="monthly">'+this.localizeString("repeatMonthly","Every Month")+'</option><option value="yearly">'+this.localizeString("repeatYearly","Every Year")+"</option></select></li><li><label>"+this.localizeString("labelCalendar","Calendar")+'</label><select class="wijmo-wijev-calendar"></select></li><li class="wijmo-wijev-description-item"><label>'+this.localizeString("labelDescription","Description")+'</label><textarea class="wijmo-wijev-description" /></li></ul><div class="footer"><a href="#" class="wijmo-wijev-delete">'+this.localizeString("buttonDelete","Delete")+'</a><a href="#" class="wijmo-wijev-save">'+this.localizeString("buttonOK","OK")+'</a><a href="#" class="wijmo-wijev-cancel">'+this.localizeString("buttonCancel","Cancel")+'</a></div><div class="wijmo-wijev-angle"></div></div>'),this._editEventDialog=i(a),b.ensureEventDialogOnBody?i("body").append(this._editEventDialog):this.element.append(this._editEventDialog),this._initEventDialogButton(this._editEventDialog.find(".wijmo-wijev-color-button"),i.proxy(this._onColorButtonClick,{"dlg":this._editEventDialog,"self":this}),{"icons":{"primary":b.wijCSS.iconArrowDown}}),this._initEventDialogButton(this._editEventDialog.find(".wijmo-wijev-delete"),i.proxy(function(a){return this.deleteEvent(this._editEventDialog.appt),this._editEventDialog.wijpopup("hide"),a.preventDefault(),!1},this)),this._initEventDialogButton(this._editEventDialog.find(".wijmo-wijev-cancel"),i.proxy(function(a){return this._editEventDialog.wijpopup("hide"),a.preventDefault(),!1},this)),this._editEventDialog.find(".wijmo-wijev-start").width(114).wijinputdate({"culture":this.options.culture,"cultureCalendar":this.options.cultureCalendar,"titleFormat":this.localizeString("calendarTitleFormat","MMMM yyyy"),"toolTipFormat":this.localizeString("calendarToolTipFormat","dddd, MMMM dd, yyyy"),"nextTooltip":this.localizeString("calendarNextTooltip","Next"),"prevTooltip":this.localizeString("calendarPrevTooltip","Previous"),"showDropDownButton":!0,"dateFormat":"d","dropDownOpen":function(a,b){c=!1},"dropDownClose":function(a,b){c=!0,i(document).one("mouseup",function(){c=!1})},"dateChanged":i.proxy(function(a,b){c&&(d=!0,i(document).one("mouseup",function(){d=!1}));var e=this._editEventDialog.find(".wijmo-wijev-end").wijinputdate("option","date");b.date>e&&this._editEventDialog.find(".wijmo-wijev-end").wijinputdate("option","date",b.date)},this)}),this._editEventDialog.find(".wijmo-wijev-start-time").width(80).wijinputdate({"culture":this.options.culture,"cultureCalendar":this.options.cultureCalendar,"titleFormat":this.localizeString("calendarTitleFormat","MMMM yyyy"),"toolTipFormat":this.localizeString("calendarToolTipFormat","dddd, MMMM dd, yyyy"),"nextTooltip":this.localizeString("calendarNextTooltip","Next"),"prevTooltip":this.localizeString("calendarPrevTooltip","Previous"),"showDropDownButton":!1,"dateFormat":"t","dateChanged":i.proxy(function(a,b){var c=this._editEventDialog.find(".wijmo-wijev-end-time").wijinputdate("option","date"),d=this._editEventDialog.find(".wijmo-wijev-start").wijinputdate("option","date");b.date.getDate()!==d.getDate()&&(b.date.setDate(d.getDate()),this._editEventDialog.find(".wijmo-wijev-start-time").wijinputdate("option","date",b.date)),b.date>c&&this._editEventDialog.find(".wijmo-wijev-end-time").wijinputdate("option","date",b.date)},this)}),this._editEventDialog.find(".wijmo-wijev-end").width(114).wijinputdate({"culture":this.options.culture,"cultureCalendar":this.options.cultureCalendar,"titleFormat":this.localizeString("calendarTitleFormat","MMMM yyyy"),"toolTipFormat":this.localizeString("calendarToolTipFormat","dddd, MMMM dd, yyyy"),"nextTooltip":this.localizeString("calendarNextTooltip","Next"),"prevTooltip":this.localizeString("calendarPrevTooltip","Previous"),"showDropDownButton":!0,"dateFormat":"d","dropDownOpen":function(a,b){c=!1},"dropDownClose":function(a,b){c=!0,i(document).one("mouseup",function(){c=!1})},"dateChanged":i.proxy(function(a,b){c&&(d=!0,i(document).one("mouseup",function(){d=!1}));var e=this._editEventDialog.find(".wijmo-wijev-start").wijinputdate("option","date");b.date<e&&this._editEventDialog.find(".wijmo-wijev-start").wijinputdate("option","date",b.date)},this)}),this._editEventDialog.find(".wijmo-wijev-end-time").width(80).wijinputdate({"culture":this.options.culture,"cultureCalendar":this.options.cultureCalendar,"titleFormat":this.localizeString("calendarTitleFormat","MMMM yyyy"),"toolTipFormat":this.localizeString("calendarToolTipFormat","dddd, MMMM dd, yyyy"),"nextTooltip":this.localizeString("calendarNextTooltip","Next"),"prevTooltip":this.localizeString("calendarPrevTooltip","Previous"),"showDropDownButton":!1,"dateFormat":"t"}),this._editEventDialog.find(".wijmo-wijev-allday").wijcheckbox().change(i.proxy(this._eventDialogEnsureTimePartState,this)),this._editEventDialog.find(".wijmo-wijev-subject,.wijmo-wijev-location,.wijmo-wijev-description").wijtextbox(),this._initEventDialogButton(this._editEventDialog.find(".wijmo-wijev-save"),i.proxy(function(a){try{var b=this._validateAndReadApptDialogFields(this._editEventDialog);return b.prevData?this.updateEvent(b):this.addEvent(b),this._editEventDialog.wijpopup("hide"),a.preventDefault(),!1}catch(c){alert(c)}},this)),this._editEventDialog.wijpopup({"autoHide":!0,"hiding":i.proxy(function(a){return d?(d=!1,!1):(this._colorMenu&&this._colorMenu.wijpopup("hide"),void this.element.find(".wijmo-wijev-dayview .ui-selected").removeClass("ui-selected"))},this),"shown":i.proxy(function(a){var b=this,c=i.browser.msie?!0:!1;this._dropDownInitialized?(this._editEventDialog.find(".wijmo-wijev-calendar").wijdropdown("refresh"),this._editEventDialog.find(".wijmo-wijev-repeat").wijdropdown("refresh")):(this._editEventDialog.find(".wijmo-wijev-calendar").wijdropdown({"unfocus":c}).bind("change",function(a){var c=b._calendarsById[this.value];c&&c.color?b._addColorClass(b._editEventDialog.find(".wijmo-wijev-color"),c.color):b._editEventDialog.appt&&b._editEventDialog.appt.color&&b._addColorClass(b._editEventDialog.find(".wijmo-wijev-color"),b._editEventDialog.appt.color)}),this._editEventDialog.find(".wijmo-wijev-repeat").wijdropdown({"unfocus":c}).bind("change",function(a){var c=this.value,d=b._editEventDialog.appt;switch(c){case"none":d.recurrenceState=null,d.recurrencePattern=null;break;case"daily":d.recurrenceState="master",d.recurrencePattern={"parentRecurrenceId":d.id,"recurrenceType":"daily"};break;case"workdays":d.recurrenceState="master",d.recurrencePattern={"parentRecurrenceId":d.id,"recurrenceType":"workdays"};break;case"weekly":d.recurrenceState="master",d.recurrencePattern={"parentRecurrenceId":d.id,"recurrenceType":"weekly"};break;case"monthly":d.recurrenceState="master",d.recurrencePattern={"parentRecurrenceId":d.id,"recurrenceType":"monthly"};break;case"yearly":d.recurrenceState="master",d.recurrencePattern={"parentRecurrenceId":d.id,"recurrenceType":"yearly"};break;case"custom":alert("show custom recurrence pattern.")}}),this._dropDownInitialized=!0),this._onEditEventDialogShown(this._editEventDialog,this._editEventDialog.appt),this._editEventDialog.find(".wijmo-wijev-subject").focus(),this._updateEditEventPopupCallout()},this)}))},b.prototype._initEventDialogButton=function(a,b,c){null==i.mobile?a.button(c).click(b):a.addClass("ui-btn").click(b)},b.prototype._updateEditEventPopupCallout=function(){if(this._editEventDialog&&this._editEventDialog._arrowTarget){var a,b=this._editEventDialog,c=i(b._arrowTarget),d=c.offset(),e=b.offset();d.left===e.left?b.removeClass("wijmo-wijev-rightangle").removeClass("wijmo-wijev-leftangle"):d.left<e.left?b.removeClass("wijmo-wijev-rightangle").addClass("wijmo-wijev-leftangle"):b.removeClass("wijmo-wijev-leftangle").addClass("wijmo-wijev-rightangle"),a=Math.round(d.top-e.top+c.outerHeight(!0)/2),this._editEventDialog.find(".wijmo-wijev-angle").css("top",a)}},b.prototype._onColorButtonClick=function(){var a,b=this.self,c=this.dlg,d=b.options,e=d.colors,f="";if(e&&e.length>0)for(a=0;a<e.length;a+=1)f+='<span class="wijmo-wijev-listcolor wijmo-wijev-event-color-'+e[a]+'">&nbsp;</span>';b._colorMenu||(b._colorMenu=i('<div class="wijmo-wijev-color-menu '+d.wijCSS.content+" "+d.wijCSS.cornerAll+'"></div>'),c.append(b._colorMenu),b._colorMenu.wijpopup({"autoHide":!0})),b._colorMenu.html(f),b._colorMenu.find(".wijmo-wijev-listcolor").click(i.proxy(function(a){this._addColorClass(c.find(".wijmo-wijev-color"),this._readColorFromClass(i(a.target),"default")),b._colorMenu.wijpopup("hide")},b)),b._colorMenu.wijpopup("show",{"of":c.find(".wijmo-wijev-color-button"),"my":"left top","at":"left bottom"})},b.prototype._validateAndReadCalendarDialogFields=function(a){var b=a.cal||{};if(b.name=a.find(".wijmo-wijev-name").val(),b.location=a.find(".wijmo-wijev-location").val(),b.description=a.find(".wijmo-wijev-description").val(),b.color=this._readColorFromClass(a.find(".wijmo-wijev-color"),b.color||"default"),!b.name)throw"Calendar name can not be empty";return b},b.prototype._validateAndReadApptDialogFields=function(a){var b,d,e,f,g,h=a.appt;b=c(a.find(".wijmo-wijev-start").wijinputdate("option","date")),d=c(a.find(".wijmo-wijev-end").wijinputdate("option","date")),e=a.find(".wijmo-wijev-start-time").wijinputdate("option","date"),f=a.find(".wijmo-wijev-end-time").wijinputdate("option","date");var i=60*(60*e.getHours()+e.getMinutes())+e.getSeconds(),j=60*(60*f.getHours()+f.getMinutes())+f.getSeconds();if(b.getTime()===d.getTime()&&i>j)throw this.localizeString("messageEndOccursBeforeStart","The end date you entered occurs before the start date.");return h.subject=a.find(".wijmo-wijev-subject").val(),h.location=a.find(".wijmo-wijev-location").val(),h.start=b,h.end=d,a.find(".wijmo-wijev-allday").length>0&&(h.allday=a.find(".wijmo-wijev-allday")[0].checked),h.allday?h.start.getTime()>=h.end.getTime()&&(h.end=this._addMinutes(h.start,this.options.timeInterval)):(h.start=new Date(h.start.getFullYear(),h.start.getMonth(),h.start.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),h.end=new Date(h.end.getFullYear(),h.end.getMonth(),h.end.getDate(),f.getHours(),f.getMinutes(),f.getSeconds())),h.calendar=a.find(".wijmo-wijev-calendar").val(),h.description=a.find(".wijmo-wijev-description").val(),h.color=this._readColorFromClass(a.find(".wijmo-wijev-color"),h.color),g=h.recurrencePattern,g&&"master"===h.recurrenceState&&(g.startTime=h.start,g.endTime=h.end,g.patternStartDate=h.start),h},b.prototype._bindApptToDialog=function(a){if(a){var b,c,d=this._editEventDialog;d.appt=a,d.find(".wijmo-wijev-subject").val(a.subject||""),d.find(".wijmo-wijev-location").val(a.location||"");try{d.find(".wijmo-wijev-start").wijinputdate("option","date",a.start),d.find(".wijmo-wijev-start-time").wijinputdate("option","date",a.start),d.find(".wijmo-wijev-end").wijinputdate("option","date",a.end),
d.find(".wijmo-wijev-end-time").wijinputdate("option","date",a.end)}catch(e){alert("[e0001a] wijinputdate/wijtextselection firefox error\n"+e)}d.find(".wijmo-wijev-allday").length>0&&(d.find(".wijmo-wijev-allday")[0].checked=a.allday),d.find(".wijmo-wijev-allday").wijcheckbox("refresh"),this._fillCalendarsSelect(d.find(".wijmo-wijev-calendar"),a.calendar),this._loadRepeatValue(a,d.find(".wijmo-wijev-repeat")),d.find(".wijmo-wijev-description").val(a.description||""),a.prevData?d.find(".wijmo-wijev-delete").show():d.find(".wijmo-wijev-delete").hide(),d.find(".wijmo-wijev-calendar").length>0&&(b=this._calendarsById[d.find(".wijmo-wijev-calendar")[0].value]),c=a.color,!c&&b&&b.color&&(c=b.color),this._addColorClass(d.find(".wijmo-wijev-color"),c),this._eventDialogEnsureTimePartState()}},b.prototype._onEditEventDialogShown=function(a,b){"exception"===b.recurrenceState?a.find(".wijmo-wijev-repeat").wijdropdown("option","disabled",!0):a.find(".wijmo-wijev-repeat").wijdropdown("option","disabled",!1)},b.prototype._eventDialogEnsureTimePartState=function(){var a=this._editEventDialog;a.find(".wijmo-wijev-allday").length>0&&(a.find(".wijmo-wijev-allday")[0].checked?(a.find(".wijmo-wijev-start-time").wijinputdate("option","disabled",!0),a.find(".wijmo-wijev-end-time").wijinputdate("option","disabled",!0)):(a.find(".wijmo-wijev-start-time").wijinputdate("option","disabled",!1),a.find(".wijmo-wijev-end-time").wijinputdate("option","disabled",!1)))},b.prototype._loadRepeatValue=function(a,b){var c="none";if(a.recurrencePattern)switch(a.recurrencePattern.recurrenceType){case"daily":c="daily";break;case"workdays":c="workdays";break;case"weekly":c="weekly";break;case"monthly":c="monthly";break;case"yearly":c="yearly";break;default:c="custom"}b.val(c)},b.prototype._addColorClass=function(a,b){var c,d=new RegExp("wijmo-wijev-event-color-(\\w+)\\s*");a.length>0&&(c=a[0].className,a[0].className=c.replace(d,""),a.addClass("wijmo-wijev-event-color-"+(b||"default")))},b.prototype._readColorFromClass=function(a,b){var c,d=new RegExp("wijmo-wijev-event-color-(\\w+)\\s*");return a.length>0&&(c=d.exec(a[0].className),c&&c.length>1)?c[1]:b},b.prototype._fillCalendarsSelect=function(a,b){var c,d,e,f="",g=this.options,h=g.calendars.slice(0),i=g.visibleCalendars;if(i&&i.length>0)for(c=0;c<i.length;c+=1){for(e=!1,d=0;d<h.length;d+=1)h[d].name===i[c]&&(e=!0);e||h.push({"id":i[c],"name":i[c]})}if(0===h.length)return void a.html("");for(c=0;c<h.length;c+=1)f+='<option value="'+h[c].id+'">'+h[c].name+"</option>";a.html(f).val(b)},b.prototype._bindCalendarToDialog=function(a){if(a){var b=this._editCalendarDialog;b.cal=a,b.find(".wijmo-wijev-name").val(a.name||""),b.find(".wijmo-wijev-location").val(a.location||""),b.find(".wijmo-wijev-description").val(a.description||""),this._addColorClass(b.find(".wijmo-wijev-color"),a.color)}},b.prototype._onTodayClick=function(){return this.options.disabled?void 0:(this.goToday(),!1)},b.prototype._bindEvents=function(){this._eventsAttached||(i(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-appointment",i.proxy(this._onAppointmentClick,this)),i(this.element).on("mousedown."+this.wijevcalnamespacekey,".wijmo-wijev-dayview .wijmo-wijev-appointment",i.proxy(this._onDayViewAppointmentMouseDown,this)),i(this.element).on("mousedown."+this.wijevcalnamespacekey,".wijmo-wijev-monthview .wijmo-wijev-appointment",i.proxy(this._onMonthViewAppointmentMouseDown,this)),i(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-dayview .wijmo-wijev-timeinterval",i.proxy(this._onDayViewTimeIntervalClick,this)),i(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-dayview .wijmo-wijev-allday-cell",i.proxy(this._onDayViewAllDayCellClick,this)),i(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-monthview .wijmo-wijev-monthcellheader",i.proxy(this._onMonthViewDayLabelClick,this)),i(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-monthview .wijmo-wijev-monthcell-showmore",i.proxy(this._onMonthViewDayLabelClick,this)),i(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-weekview .wijmo-wijev-daylabel",i.proxy(this._onMonthViewDayLabelClick,this)),i(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-monthview .wijmo-wijev-monthcell",i.proxy(this._onMonthViewCellClick,this)),this._eventsAttached=!0)},b.prototype._unbindEvents=function(){this._eventsAttached&&(i(this.element).off("mousedown."+this.wijevcalnamespacekey),i(this.element).off("click."+this.wijevcalnamespacekey),this._eventsAttached=!1)},b.prototype.destroy=function(){this._destroyInternal(),i.wijmo.widget.prototype.destroy.apply(this,arguments)},b.prototype._destroyInternal=function(){var a=this.options;this.element.removeClass("wijmo-wijev wijmo-wijevcal "+a.wijCSS.widget+" "+a.wijCSS.helperReset),i(window).unbind("resize."+this.wijevcalnamespacekey),this._unbindEvents(),this.element.empty(),this.wijevcalnamespacekey=null,this._uidPref=null,this._isUpdating=null,this._resolveDayApptConflictsTimeout=null,this._pendingRedrawActiveView=null,this._listViewDetailsInit=null,this._dayViewDetailsInit=null,this._eventsAttached=null,this.statusbarEventsAdded=null,this._dataView=null,this._eventsView=null,this._eventsDataById=null,this._calendarsById=null,this._dayViewCache=null,this._templateDayColumn=null,this._templateDayHeader=null,this._dayViewScrollToEvent=null,this._maxAllDayEventCount=null,this._dayColumnsToResolve=null,this._dayColumnResolveIdx=null,this.logDialog=null,this.logPanel=null,this._editCalendarDialog=null,this._editEventDialog=null,this._renderAgendaEventsTimeoutId=null,this.__targetAppt=null,this._isApptResize=null,this.__startApptH=null,this.__startApptY=null,this.__startClientY=null,this._apptDragResizeFlag=null,this._apptMovedFlag=null,this._movedFromTimeInervalApptElem=null,this.__targetApptChanged=null,this._defferObjs=null,this._setOptionCallbacks=null,this._chromeLoadDataDeffer=null,i.wijmo.wijevcal.prototype.options.eventsData=[]},b.prototype.deleteCalendar=function(a,b,c){var d,e,g,h,j=this.options.calendars,k=a.id||a,l=!1,m=this;for(d=0;d<j.length;d+=1)if(j[d].id===k){if(l=!0,a=j[d],!this._trigger("beforeDeleteCalendar",null,{"data":a}))return!1;delete this._calendarsById[a.id],j.splice(d,1);break}if(!l)for(d=0;d<j.length;d+=1)if(j[d].name===k){if(l=!0,a=j[d],!this._trigger("beforeDeleteCalendar",null,{"data":a}))return!1;delete this._calendarsById[a.id],j.splice(d,1);break}if(!l)return this.status("Calendar with id/name '"+k+"' not found."),!1;if(this.showLoadingLabel(this.localizeString("activityDeletingCalendar","Deleting calendar...")),e=function(c){m.status("Calendar '"+a.name+"' deleted."),m._onCalendarsChanged(),m.hideLoadingLabel(),b&&b(c)},g=function(b){m.status("Unable to delete calendar '"+a.name+"': "+b),m.hideLoadingLabel(),c&&c(b)},this.options.dataStorage.deleteCalendar)this.options.dataStorage.deleteCalendar(a,e,g);else if(this.options.webServiceUrl){try{h=this._jsonStringify(a)}catch(n){return this.status("Unable to prepare calendar data for server. "+n,"error"),void g("Unable to prepare calendar data for server. "+n)}i.ajax({"url":this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=deleteCalendar&timestamp="+(new Date).getTime(),"dataType":"text","contentType":"application/json; charset=utf-8","type":"POST","data":"jsonData="+h,"success":e,"error":g})}else f("DELETE FROM calendars WHERE id='"+a.id+"'",[],e,g)},b.prototype.addCalendar=function(a,b,c){var d,e,g,h=this,j=!1;if(!this._trigger("beforeAddCalendar",null,{"data":a,"prevData":a.prevData||{}})){if(a.prevData)for(e in a.prevData)a.prevData.hasOwnProperty(e)&&(a[e]=a.prevData[e]);return!1}if(a.id||(this._dynIdCounter||(this._dynIdCounter=0),this._dynIdCounter+=1,a.id="dynid"+this._dynIdCounter+"ts"+(new Date).getTime()),i.each(h.options.calendars,function(b,c){return a.name===c.name?(j=!0,!1):void 0}),!j)if(this.showLoadingLabel(this.localizeString("activityCreatingCalendar","Creating calendar...")),d=function(c){return h._handleServerError(c)?void g(c):(h._readUpdatedServerDataIfAny(c,a),h._calendarsById[a.id]?h.status("Calendar '"+a.name+"' added."):(h.options.calendars.push(a),h._calendarsById[a.id]=a,h.status("Calendar '"+a.name+"' added.")),a.prevData=h._cloneObj(a),h._onCalendarsChanged(),h.hideLoadingLabel(),void(b&&b(c)))},g=function(b){h.status("Unable to add calendar '"+a.name+"': "+b),h.hideLoadingLabel(),c&&c(b)},this.options.dataStorage.addCalendar)this.options.dataStorage.addCalendar(a,d,g);else if(this.options.webServiceUrl){try{e=this._jsonStringify(a)}catch(k){return this.status("Unable prepare calendar data for server."+k,"error"),void g("Unable to prepare calendar data for server."+k)}i.ajax({"url":this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=addCalendar&timestamp="+(new Date).getTime(),"dataType":"text","contentType":"application/json; charset=utf-8","type":"POST","data":"jsonData="+e,"success":d,"error":g})}else f("INSERT OR REPLACE INTO calendars (id, name, location, description, color, tag) VALUES(?,?,?,?,?,?);",[a.id,a.name,a.location,a.description,a.color,a.tag],d,g)},b.prototype.updateCalendar=function(a,b,c){var d,e,g,h=this;if(!this._trigger("beforeUpdateCalendar",null,{"data":a,"prevData":a.prevData||{}})){if(a.prevData)for(e in a.prevData)a.prevData.hasOwnProperty(e)&&(a[e]=a.prevData[e]);return!1}if(a.id||(this._dynIdCounter||(this._dynIdCounter=0),this._dynIdCounter+=1,a.id="dynid"+this._dynIdCounter+"ts"+(new Date).getTime()),this.showLoadingLabel(this.localizeString("activityUpdatingCalendar","Updating calendar...")),d=function(c){var d=!1,e=h.options.visibleCalendars;return h._handleServerError(c)?void g(c):(h._readUpdatedServerDataIfAny(c,a),h._calendarsById[a.id]?(i.each(e,function(b,c){return c===a.prevData.name?(e[b]=a.name,!1):void 0}),h.status("Calendar '"+a.name+"' updated.")):(i.each(h.options.calendars,function(b,c){return a.name===c.name?(d=!0,!1):void 0}),d||(h.options.calendars.push(a),h._calendarsById[a.id]=a,h.status("Calendar '"+a.name+"' added."))),a.prevData=h._cloneObj(a),h._onCalendarsChanged(),h.hideLoadingLabel(),void(b&&b(c)))},g=function(b){h.status("Unable to update calendar '"+a.name+"': "+b),h.hideLoadingLabel(),c&&c(b)},this.options.dataStorage.updateCalendar)this.options.dataStorage.updateCalendar(a,d,g);else if(this.options.webServiceUrl){try{e=this._jsonStringify(a)}catch(j){return this.status("Unable prepare calendar data for server. "+j,"error"),void g("Unable to prepare calendar data for server. "+j)}i.ajax({"url":this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=updateCalendar&timestamp="+(new Date).getTime(),"dataType":"text","contentType":"application/json; charset=utf-8","type":"POST","data":"jsonData="+e,"success":d,"error":g})}else f("INSERT OR REPLACE INTO calendars (id, name, location, description, color, tag) VALUES(?,?,?,?,?,?);",[a.id,a.name,a.location,a.description,a.color,a.tag],d,g)},b.prototype._initEventData=function(a){return i.extend({"allday":!1,"location":null,"subject":null,"description":null,"color":null,"tag":null},a)},b.prototype.addEvent=function(a,b,c){var e,g,h,j=this;if(!this._trigger("beforeAddEvent",null,{"data":a,"prevData":a.prevData||{}})){if(a.prevData)for(h in a.prevData)a.prevData.hasOwnProperty(h)&&(a[h]=a.prevData[h]);return!1}if(a.id||(this._dynIdCounter||(this._dynIdCounter=0),this._dynIdCounter+=1,a.id=d()),a.calendar||(a.calendar="Default"),this.showLoadingLabel(this.localizeString("activityCreatingEvent","Creating event...")),g=function(b){if(j.hideLoadingLabel(),j.status("Unable to add event '"+a.subject+"': "+b,"error"),a.prevData)for(h in a.prevData)a.prevData.hasOwnProperty(h)&&(a[h]=a.prevData[h]);c&&c(b)},e=function(c){return j._handleServerError(c)?void g(c):(j._readUpdatedServerDataIfAny(c,a),j._eventsDataById[a.id]&&"exception"!==a.recurrenceState?j.status("Event '"+a.subject+"' added."):(j._storeEventWithSort(a),j.status("Event '"+a.subject+"' added.")),a.prevData=j._cloneObj(a),j._onEventsDataChanged(),j.hideLoadingLabel(),void(b&&b(c)))},this.options.dataStorage.addEvent)this.options.dataStorage.addEvent(a,e,g);else if(this.options.webServiceUrl){try{h=this._jsonStringify(a)}catch(k){return this.status("Unable prepare event data for server. "+k,"error"),void g("Unable to prepare event data for server. "+k)}i.ajax({"url":this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=addEvent&timestamp="+(new Date).getTime(),"dataType":"text","contentType":"application/json; charset=utf-8","type":"POST","data":"jsonData="+h,"success":e,"error":g})}else{if(a=j._initEventData(a),!m&&!window.openDatabase)return void e.call(this,{"rowsAffected":0,"rows":[a]});f("INSERT OR REPLACE INTO events (id, calendar, subject, location, start, end, description, color, allday, properties, tag) VALUES(?,?,?,?,?,?,?,?,?,?,?);",[a.id,a.calendar,a.subject,a.location,a.start.getTime(),a.end.getTime(),a.description,a.color,a.allday,this._serializeProperties(a),a.tag],e,g)}},b.prototype._storeEventWithSort=function(a){var b,c,d=this.options.eventsData;if(this._eventsDataById[a.id]=a,d){for(b=0,c=d.length;c>b;b+=1){if(d[b].start>a.start)return void d.splice(b,0,a);if(d[b].start.getTime()===a.start.getTime()&&d[b].subject>a.subject)return void d.splice(b,0,a)}d.push(a)}},b.prototype._readUpdatedServerDataIfAny=function(a,b){var c,d=null;if("string"==typeof a&&0===a.indexOf("update:")){a=a.toString().substr("update:".length);try{d=this._jsonParse(a)}catch(e){this.status("Unable to read updated server data. "+e,"warning")}if(d)for(c in d)d[c]&&(b[c]=d[c])}},b.prototype.updateEvent=function(a,b,c){var d,e,g,h=this;if(!this._trigger("beforeUpdateEvent",null,{"data":a,"prevData":a.prevData||{}})){if(a.prevData)for(g in a.prevData)a.prevData.hasOwnProperty(g)&&(a[g]=a.prevData[g]);return this._updateAppointmentVisual(a),!1}if(a.calendar||(a.calendar="Default"),this.showLoadingLabel(this.localizeString("activityUpdatingEvent","Updating event...")),e=function(b){if(h.hideLoadingLabel(),h.status("Unable to update event '"+a.subject+"': "+b,"error"),a.prevData)for(g in a.prevData)a.prevData.hasOwnProperty(g)&&(a[g]=a.prevData[g]);h._updateAppointmentVisual(a),c&&c(b)},!a.id)return void e("id is empty");if("exception"===a.recurrenceState||"occurrence"===a.recurrenceState){if(!this._eventsDataById[a.parentRecurrenceId])return void e("Unable to find master event for event with id:"+a.id);if("occurrence"===a.recurrenceState)return this.log(this._formatString("[updateEvent->addEvent] recurrenceState for event {0} changed to 'exception'.",a.id)),a.recurrenceState="exception",this.addEvent(a,b,c)}if(d=function(c){return h._handleServerError(c)?void e(c):(h._readUpdatedServerDataIfAny(c,a),h._eventsDataById[a.id]?(i.extend(h._eventsDataById[a.id],a),h.status("Event '"+a.subject+"' updated.")):(h._storeEventWithSort(a),h.status("Event '"+a.subject+"' added.")),a.prevData=h._cloneObj(a),h._onEventsDataChanged(),h.hideLoadingLabel(),void(b&&b(c)))},this.options.dataStorage.updateEvent)this.options.dataStorage.updateEvent(a,d,e);else if(this.options.webServiceUrl){try{g=this._jsonStringify(a)}catch(j){return this.status("Unable prepare event data for server. "+j,"error"),void e("Unable to prepare event data for server. "+j)}i.ajax({"url":this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=updateEvent&timestamp="+(new Date).getTime(),"dataType":"text","contentType":"application/json; charset=utf-8","type":"POST","data":"jsonData="+g,"success":d,"error":e})}else{if(a=h._initEventData(a),!m&&!window.openDatabase)return void d.call(this,{"rowsAffected":0,"rows":[a]});f("INSERT OR REPLACE INTO events (id, calendar, subject, location, start, end, description, color, allday, properties, tag) VALUES(?,?,?,?,?,?,?,?,?,?,?);",[a.id,a.calendar,a.subject,a.location,a.start.getTime(),a.end.getTime(),a.description,a.color,a.allday,this._serializeProperties(a),a.tag],d,e)}},b.prototype._serializeProperties=function(a){var b="",c={};c.parentRecurrenceId=a.parentRecurrenceId,c.recurrenceState=a.recurrenceState,c.recurrencePattern=a.recurrencePattern,c.color=a.color,c.allday=a.allday;try{b=this._jsonStringify(c)}catch(d){this.status("Unable save additional event properties. "+d,"error")}return b},b.prototype._deSerializeProperties=function(a,b){var c,d={};if(a){if("string"==typeof a)try{d=this._jsonParse(a)}catch(e){return void this.status("Unable to load additional event properties. "+e,"error")}else d=a;d.parentRecurrenceId&&(b.parentRecurrenceId=d.parentRecurrenceId),d.recurrenceState&&(b.recurrenceState=d.recurrenceState),d.recurrencePattern&&(b.recurrencePattern=d.recurrencePattern),d.color&&(b.color=d.color),d.allday&&(b.allday=d.allday)}b&&b.recurrencePattern&&(c=b.recurrencePattern,c.patternStartDate=c.patternStartDate?new Date(c.patternStartDate):c.patternStartDate,c.startTime=c.startTime?new Date(c.startTime):c.startTime,c.endTime=c.endTime?new Date(c.endTime):c.endTime,c.startTime.getTime()>=c.endTime.getTime()&&(c.endTime=this._addMinutes(c.startTime,this.options.timeInterval)))},b.prototype._jsonStringify=function(a){var b;if(window.__JSONC1)b=window.__JSONC1.stringify(a);else{if(!window.JSON)throw"JSON not found.";b=JSON.stringify(a)}return b},b.prototype._jsonParse=function(a){var b,c,d;if(window.__JSONC1)b=window.__JSONC1.parse(a);else{if(!window.JSON)throw"JSON variable not found.";c=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,d=/^\/Date\((d|-|.*)\)\/$/,b=window.JSON.parse(a,function(a,b){if("string"==typeof b){var e,f=c.exec(b);if(f)return new Date(Date.UTC(+f[1],+f[2]-1,+f[3],+f[4],+f[5],+f[6]));if(f=d.exec(b))return e=f[1].split(/[-,.]/),new Date(+e[0])}return b})}return b},b.prototype.getOccurrences=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=this.options,o=n.eventsData,p=100,q=[],r=[],s=[],t={};if(this._eventsDataById||(this._eventsDataById={}),o)for(g=0,i=o.length;i>g;g+=1)if(c=o[g],this._eventsDataById[c.id]=c,"master"===c.recurrenceState)switch(f=c.recurrencePattern,f.removedOccurrences&&(s=s.concat(f.removedOccurrences)),j=f.occurrences||p,k=f.patternStartDate||c.start,l=f.startTime||c.start,m=f.endTime||c.end,f.recurrenceType){case"daily":for(h=0;j>h;h+=1)d=this._cloneObj(c),d.parentRecurrenceId=c.id,d.recurrenceState="occurrence",d.start=this._setTime(this._addDays(k,h),l),d.end=this._setTime(d.start,m,l),d.recurrencePattern=null,this._testIsEventInTimeInterval(d,a,b)&&(d.id=this._formatString("{0}_OCCR_{1:yyyy_MM_dd}",c.id,d.start),t[d.id]=d);break;case"workdays":for(h=0;j>h;h+=1)d=this._cloneObj(c),d.parentRecurrenceId=c.id,d.recurrenceState="occurrence",d.start=this._setTime(this._addDays(k,h),l),0!==d.start.getDay()&&6!==d.start.getDay()&&(d.end=this._setTime(d.start,m,l),d.recurrencePattern=null,this._testIsEventInTimeInterval(d,a,b)&&(d.id=this._formatString("{0}_OCCR_{1:yyyy_MM_dd}",c.id,d.start),t[d.id]=d));break;case"weekly":for(h=0;j>h;h+=1)d=this._cloneObj(c),d.parentRecurrenceId=c.id,d.recurrenceState="occurrence",d.start=this._setTime(this._addDays(k,7*h),l),d.end=this._setTime(d.start,m,l),d.recurrencePattern=null,this._testIsEventInTimeInterval(d,a,b)&&(d.id=this._formatString("{0}_OCCR_{1:yyyy_MM_dd}",c.id,d.start),t[d.id]=d);break;case"monthly":for(h=0;j>h;h+=1)d=this._cloneObj(c),d.parentRecurrenceId=c.id,d.recurrenceState="occurrence",d.start=this._setTime(new Date(k),l),d.start.setMonth(d.start.getMonth()+h),d.end=this._setTime(d.start,m,l),d.recurrencePattern=null,this._testIsEventInTimeInterval(d,a,b)&&(d.id=this._formatString("{0}_OCCR_{1:yyyy_MM_dd}",c.id,d.start),t[d.id]=d);break;case"yearly":for(h=0;j>h;h+=1)d=this._cloneObj(c),d.parentRecurrenceId=c.id,d.recurrenceState="occurrence",d.start=this._setTime(new Date(k),l),d.start.setYear(d.start.getFullYear()+h),d.end=this._setTime(d.start,m,l),d.recurrencePattern=null,this._testIsEventInTimeInterval(d,a,b)&&(d.id=this._formatString("{0}_OCCR_{1:yyyy_MM_dd}",c.id,d.start),t[d.id]=d);break;case"monthlyNth":break;case"yearlyNth":}else this._testIsEventInTimeInterval(c,a,b)&&("exception"===c.recurrenceState?r.push(c):"removed"===c.recurrenceState?(s.push(c.id),this.log("[warning] Seems we found removed event inside events storage, id:"+c.id)):q.push(c));for(g=0,i=r.length;i>g;g+=1)e=r[g],t[e.id]&&delete t[e.id],q.push(e),this._eventsDataById[e.id]=e;for(g=0,i=s.length;i>g;g+=1)t[s[g]]&&delete t[s[g]];for(g in t)d=t[g],q.push(d),this._eventsDataById[d.id]=d;return q},b.prototype._testIsEventInTimeInterval=function(a,b,c){return b&&c?a.start<c&&a.end>b?!0:!1:!0},b.prototype.deleteEvent=function(a,b,c){a.id&&(a=a.id);var d,e,g,h,j,k,l=this._eventsDataById[a],n=this;if(!this._trigger("beforeDeleteEvent",null,{"data":l}))return!1;if(this.showLoadingLabel(this.localizeString("activityDeletingEvent","Deleting event...")),h=function(a){n.status("Unable to delete event '"+(l?l.subject:"undefined")+"': "+a),n.hideLoadingLabel(),c&&c(a)},"exception"===l.recurrenceState||"occurrence"===l.recurrenceState)if(k=this._eventsDataById[l.parentRecurrenceId]){if(this.log(this._formatString("[deleteEvent] removing {0} with id {1}. Updating master event with id {2}",l.recurrenceState,l.id,k.id)),k.recurrencePattern.removedOccurrences||(k.recurrencePattern.removedOccurrences=[]),k.recurrencePattern.removedOccurrences.push(l.id),this.updateEvent(k,b,c),"occurrence"===l.recurrenceState)return void this.log("No need to delete occurrence from store. Master event should be updated.")}else if("exception"!==l.recurrenceState)return h("Unable to find master event with id "+l.parentRecurrenceId),!1;if("master"===l.recurrenceState,g=function(c){if(n._handleServerError(c))return void h(c);if(n._eventsDataById[l.id]){if(e=n.options.eventsData)for(d=0;d<e.length;d+=1)e[d].id===a&&e.splice(d,1);delete n._eventsDataById[l.id],n.status("Event '"+l.subject+"' deleted.")}else n.status("Event '"+l.subject+"' deleted.");l.prevData=n._cloneObj(l),n._onEventsDataChanged(),n.hideLoadingLabel(),b&&b(c)},this.options.dataStorage.deleteEvent)this.options.dataStorage.deleteEvent(l,g,h);else if(this.options.webServiceUrl){try{j=this._jsonStringify(l)}catch(o){return this.status("Unable prepare event data for server. "+o,"error"),void h("Unable prepare event data for server. "+o)}i.ajax({"url":this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=deleteEvent&timestamp="+(new Date).getTime(),"dataType":"text","contentType":"application/json; charset=utf-8","type":"POST","data":"jsonData="+j,"success":g,"error":h})}else{if(!m&&!window.openDatabase)return void g.call(this,{"rowsAffected":0,"rows":[l]});f("DELETE FROM events WHERE id='"+a+"'",[],g,h)}},b.prototype.beginUpdate=function(){this._isUpdating=!0,this.showLoadingLabel("Updating...")},b.prototype.endUpdate=function(){this._isUpdating=!1,this._pendingRedrawActiveView&&this._redrawActiveView(),this.hideLoadingLabel()},b.prototype.goToEvent=function(a){a.id&&(a=a.id);var b,c,d=this.options,e=this.findEventById(a);switch(d.viewType){case"day":case"week":case"list":b=this.element.find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn ."+this._eventIdToCssClass(a)),b.length>0?(c=b.parents(".wijmo-wijev-scrollpanel"),c.length>0&&c.wijsuperpanel("scrollChildIntoView",b)):(this._dayViewScrollToEvent=e,this.goToDate(e.start));break;case"month":this.goToDate(e.start)}},b.prototype.isAllDayEvent=function(a){var b=a;return a.id||(b=this.findEventById(a)),b.allday?(b.end.getTime()-b.start.getTime())/864e5>=1?!0:!0:!1},b.prototype.goToDate=function(a){a=c(a);var b,d,e,f,g,h=this.options,i=a.getDay(),j=h.selectedDates;if(j&&j.length>0){if(this._isContainsDayDate(j,a))return;if(g=j[0],e=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),f=Date.UTC(g.getFullYear(),g.getMonth(),g.getDate()),d=(e-f)/864e5,"week"===h.viewType)for(b=0;b<j.length;b+=1)if(j[b].getDay()===i){d-=b;break}for(b=0;b<j.length;b+=1)j[b]=this._addDays(j[b],d);this._onSelectedDatesChanged()}else h.selectedDates=[a],this._onSelectedDatesChanged()},b.prototype.goToTime=function(a){var b,c,d,e=this.element.find(".wijmo-wijev-daycolumn .wijmo-wijev-timeinterval:first-child"),f=this.element.find(".wijmo-wijev-daycolumn .wijmo-wijev-timeinterval:last"),g=e.position().top,h=f.position().top+f.height();d=86400,c=60*a.getHours()*60+60*a.getMinutes(),b=(h-g)*c/d+g,this.element.find(".wijmo-wijev-scrollpanel").wijsuperpanel("vScrollTo",b)},b.prototype.goToday=function(){this.goToDate(new Date)},b.prototype.goLeft=function(){var a,b=this.options,c=b.viewType,d=b.selectedDates;"month"===c?this.goToDate(this._addMonths(d[0],-1)):(a=-7,1===d.length&&(a=-1),this.goToDate(this._addDays(d[0],a)))},b.prototype.goRight=function(){var a,b=this.options,c=b.viewType,d=b.selectedDates;"month"===c?this.goToDate(this._addMonths(d[0],1)):(a=7,1===d.length&&(a=1),this.goToDate(this._addDays(d[0],a)))},b.prototype.refresh=function(){this.invalidate()},b.prototype.invalidate=function(){var a=this.options;switch(a.viewType.toLowerCase()){case"list":case"day":case"week":this._invalidateDayView();break;case"month":this._invalidateMonthView()}},b.prototype.showEditCalendarDialog=function(a){var b,c=this.options,d=c.calendars;if(a){if(!a.name)for(b=0;b<d.length;b+=1)if(d[b].name===a){a=d[b];break}}else a={"name":"","description":"","location":"","color":""};this._ensureEditCalendarDialogCreated(),this._bindCalendarToDialog(a),this._editCalendarDialog.wijdialog("open")},b.prototype.showEditEventDialog=function(a,b,c){var d,e,f,g,h,j=this.options,k=b?i(b):c?i(c.target):null;this._ensureEditEventDialogCreated(),this.element.find(".wijmo-wijev-dayview .ui-selected").removeClass("ui-selected"),k&&k.hasClass("wijmo-wijev-daylabel")&&(k=k.parent(".wijmo-wijev-allday-cell")),a?(this._editEventDialog._arrowTarget=k,a.prevData||(a.prevData=this._cloneObj(j)),"occurrence"===a.recurrenceState&&(d=this._eventsDataById[a.parentRecurrenceId],window.confirm(this._formatString(this.localizeString("promptOpenOccurrenceFormat","{2}  is recurring event. Do you want to open only this occurrence?"),a.start,a.end,a.subject,a.location))||(a=d))):(a={"subject":this.localizeString("textNewEvent","New event")},a.isNewEvent=!0,k&&k.length>0?(this._editEventDialog._arrowTarget=k,k.addClass("ui-selected"),e=k.parent(".wijmo-wijev-daycolumn"),e.length<1&&(e=k.parent(".wijmo-wijev-dayheadercolumn")),e=e[0],k.hasClass("wijmo-wijev-allday-cell")?a.allday=!0:k.hasClass("wijmo-wijev-monthcellcontainer")?(e=k[0],a.allday=!0):a.allday=!1,e&&(f=this._parseDateFromClass(e.className,a.allday?null:k[0].className),a.start=f,a.allday?a.end=this._addMinutes(a.start,1440):a.end=this._addMinutes(a.start,j.timeInterval))):(a.start=new Date(j.selectedDates[0]),a.end=this._addMinutes(a.start,j.timeInterval))),this._trigger("beforeEditEventDialogShow",null,{"data":a,"targetCell":k})&&(h={"of":k,"my":"left center","at":"right center","offset":(k&&c?Math.round(c.offsetX-k.width()):10)+" 0","collision":"fit"},this._bindApptToDialog(a),this._editEventDialog.wijpopup("show",h),g=this._editEventDialog.data("wijmo-wijpopup"),g&&g._setPosition(h))},b.prototype._renderActiveView=function(){var a=this.options,b=this.element.find(".wijmo-wijev-headerbar .wijmo-wijev-tools");switch(this.element.find(".wijmo-wijev-view").hide(),this.element.find(".wijmo-wijev-viewdetails").hide(),this.element.find(".wijmo-wijev-"+a.viewType.toLowerCase()+"-details").show(),a.viewType.toLowerCase()){case"day":case"week":case"list":this.element.find(".wijmo-wijev-view.wijmo-wijev-dayview").show(),this._renderDayView();break;case"month":this.element.find(".wijmo-wijev-view.wijmo-wijev-monthview").show(),this._renderMonthView()}b.find(".wijmo-wijev-"+a.viewType.toLowerCase())[0].checked=!0,i().buttonset?b.buttonset("refresh"):i().checkboxradio&&b.find(":radio").checkboxradio("refresh")},b.prototype._redrawActiveView=function(){if(this._isUpdating)return void(this._pendingRedrawActiveView=!0);switch(this.options.viewType.toLowerCase()){case"day":case"week":case"list":this._clearDayViewCache(),this._templateDayColumn=null}this._renderActiveView()},b.prototype._getDayColumnDates=function(a){var b,c,d,e=this.options,f=e.selectedDates;if(f||(f=[new Date]),"week"===e.viewType)for(b=e.selectedDate||f[0],d=e.firstDayOfWeek-b.getDay(),Math.abs(d)>6&&(d=b.getDay()-e.firstDayOfWeek),b=this._addDays(b,d),f=[],d=0;7>d;d+=1)c=this._addDays(b,d),f.push(c);return a&&(e.selectedDates=f),f},b.prototype._renderDayView=function(){var a,b,c,d,e,f,g,h,j,k,l,m,n=this.options,o=0,p=1440,q=this._getDayColumnDates(!0),r=new Date,s=!1,t=this.element.find(".wijmo-wijev-dayview"),u=0;if(0===t.length&&(t=i('<div class="wijmo-wijev-view wijmo-wijev-dayview '+n.wijCSS.content+'"><h3 class="wijmo-wijev-header-title">title</h3><div class="wijmo-wijev-dayview-inner"><div class="wijmo-wijev-headercontainer"><div class="wijmo-wijev-sizer"><div class="wijmo-wijev-gmtlabel">'+this.localizeString("labelAllDay","all-day")+'</div></div></div><div class="wijmo-wijev-scrollpanel"><div class="wijmo-wijev-scrollcontent"><div class="wijmo-wijev-timeruler"><div class="wijmo-wijev-currenttime-indicator"><div class="wijmo-wijev-currenttime-indicator-arrow '+n.wijCSS.stateError+'"></div><div class="wijmo-wijev-currenttime-indicator-line '+n.wijCSS.stateError+'"></div></div></div></div></div></div></div>'),t.appendTo(this.element.find(".wijmo-wijev-view-container")),this.element.find(".wijmo-wijev-scrollpanel").wijsuperpanel({"hScroller":{"scrollBarVisibility":"hidden"},"animationOptions":{"disabled":!0}})),t.removeClass("wijmo-wijev-weekview wijmo-wijev-listview"),t.addClass("wijmo-wijev-"+n.viewType.toLowerCase()+"view"),j=this.element.find(".wijmo-wijev-headercontainer"),k=this.element.find(".wijmo-wijev-scrollcontent"),l=k.find(".wijmo-wijev-timeruler"),!this._templateDayColumn){for(l.find(".wijmo-wijev-timerulerinterval").remove(),a='<div class="wijmo-wijev-daycolumn">',m=!0;p>o;)b="wijmo-wijev-timeinterval "+n.wijCSS.content+" wijmo-wijev-minute-"+o,m&&(b+=" wijmo-wijev-oddrow"),m=!m,c="wijmo-wijev-timerulerinterval "+n.wijCSS.content+" wijmo-wijev-minute-"+o,a+='<div class="'+b+'" style="height: '+n.timeIntervalHeight+'px"></div>',o+=n.timeInterval,u+=n.timeInterval,u>=n.timeRulerInterval&&(b+=" wijmo-wijev-timeinterval-hourstart",c+=" wijmo-wijev-timerulerinterval-hourstart",l.append(i('<div class="'+c+'" style="height:'+u/n.timeInterval*n.timeIntervalHeight+'px">'+this._formatString(n.timeRulerFormat,new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,o-u))+"</div>")),u=0);a+="</div>",this._templateDayColumn=i(a),this._templateDayHeader=i('<div class="wijmo-wijev-dayheadercolumn '+n.wijCSS.content+'"><div class="wijmo-wijev-allday-cell '+n.wijCSS.content+'"><div class="wijmo-wijev-daylabel">3 Monday</div></div></div>')}for(j.find(".wijmo-wijev-dayheadercolumn").remove(),k.find(".wijmo-wijev-daycolumn").remove(),d=0,h=q.length;h>d;d+=1)g=q[d],e=this._getCachedDayHeader(g),f=this._getCachedDayColumn(g),e?(e=i(e),e.find(".wijmo-wijev-daylabel").html(this._formatDayHeaderDate(g))):(e=this._templateDayHeader.clone(!0),f=this._templateDayColumn.clone(!0),e.addClass(this._dayDateToCssClass(g)),e.find(".wijmo-wijev-daylabel").html(this._formatDayHeaderDate(g)),f.addClass(this._dayDateToCssClass(g)),s?s=!1:(f.addClass("wijmo-wijev-leftborder"),e.addClass("wijmo-wijev-leftborder")),0===this._compareDayDates(g,r)&&(f.addClass("wijmo-wijev-today "+n.wijCSS.stateHighlight),f.addClass("wijmo-wijev-leftborder"),f.addClass("wijmo-wijev-rightborder"),e.addClass("wijmo-wijev-today").find(".wijmo-wijev-allday-cell").addClass(n.wijCSS.stateHighlight),e.addClass("wijmo-wijev-leftborder"),e.addClass("wijmo-wijev-rightborder"),s=!0),d===h-1&&(f.addClass("wijmo-wijev-rightborder"),e.addClass("wijmo-wijev-rightborder"))),j.append(e),k.append(f);this._invalidateDayView(),this._renderDayViewAppointments()},b.prototype._getCachedDayHeader=function(a){var b=null;return this._dayViewCache&&this._dayViewCache[a]&&(b=this._dayViewCache[a].h),b},b.prototype._getCachedDayColumn=function(a){var b=null;return this._dayViewCache&&this._dayViewCache[a]&&(b=this._dayViewCache[a].c),
b},b.prototype._storeDayCache=function(a,b,c){this._dayViewCache||(this._dayViewCache={}),this._dayViewCache[a]={"h":b,"c":c}},b.prototype._clearViewsCache=function(){this._clearDayViewCache(),this._clearListViewCache()},b.prototype._clearDayViewCache=function(){this._dayViewCache={}},b.prototype._clearListViewCache=function(){var a=this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container .wijmo-wijsuperpanel-templateouterwrapper");a[0]||(a=this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container .wijmo-wijsuperpanel-contentwrapper-touch")),a.data("wijevcal_agenda_initialized",!1),a.data("wijevcal_agenda_loadedeventscount",0)},b.prototype._invalidateDayView=function(a){var b,c,d,e,f,g,h,j,k,l,m,n,o,p=this.element.find(".wijmo-wijev-headercontainer"),q=this.element.find(".wijmo-wijev-scrollcontent"),r=q.find(".wijmo-wijev-timeruler"),s=p.find(".wijmo-wijev-dayheadercolumn"),t=q.find(".wijmo-wijev-daycolumn"),u=this.options.viewType.toLowerCase(),v=r.outerWidth();for(this._updateHeaderTitleText(),c=this.element.find(".wijmo-wijev-view.wijmo-wijev-"+u+"view .wijmo-wijev-header-title"),b=c.is(":visible")?c.outerHeight(!0):0,this._invalidateView(),this._maxAllDayEventCount||(this._maxAllDayEventCount=0),f=p.find(".wijmo-wijev-dayheadercolumn .wijmo-wijev-appointment").outerHeight(!0),f||(f=17),g=p.find(".wijmo-wijev-daylabel").outerHeight(!0),h=0,k=0;k<s.length;k+=1)j=i(s[k]).find(".wijmo-wijev-allday-cell .wijmo-wijev-appointment").length,j>h&&(h=j);switch(e=f*h+g+f,p.outerHeight(e+Math.round(f/2)),p.find(".wijmo-wijev-allday-cell").outerHeight(e),d=this.element.find(".wijmo-wijev-view").width(),l=d-v,l-=18,m=this.element.find(".wijmo-wijev-view").innerHeight()-p.outerHeight(!0)-b,n=Math.floor(l/t.length),p.outerWidth(d),q.outerWidth(d),s.outerWidth(n),t.outerWidth(n),this._invalidateCurrentTimeIndicator(),o=this.element.find(".wijmo-wijev-scrollpanel"),o.outerWidth(d),o.outerHeight(m),this._refreshSuperPanel(o),u){case"day":this._updateDayViewDetails();break;case"list":this._updateListViewDetails()}},b.prototype._refreshSuperPanel=function(a){i.support.isTouchEnabled&&i.support.isTouchEnabled()||!this._isIE8()?a.wijsuperpanel("refresh"):a.wijsuperpanel("paintPanel",!0)},b.prototype._updateDayViewDetails=function(){var a=this.options,b=a.selectedDate,c=this.element.find(".wijmo-wijev-leftpane");c.find(".wijmo-wijev-agenda-container");this._dayViewDetailsInit||(this._dayViewDetailsInit=!0,this.element.find(".wijmo-wijev-day-details .wijmo-wijev-daycalendar").wijcalendar(i.extend(!0,{"culture":a.culture,"cultureCalendar":a.cultureCalendar,"titleFormat":this.localizeString("calendarTitleFormat","MMMM yyyy"),"toolTipFormat":this.localizeString("calendarToolTipFormat","dddd, MMMM dd, yyyy"),"showTitle":!1,"showOtherMonthDays":!1,"showWeekNumbers":!1,"selectionMode":{"day":!0,"days":!1},"selectedDatesChanged":i.proxy(function(b,c){c.dates&&!a.disabled&&this.goToDate(c.dates[0])},this),"nextTooltip":this.localizeString("calendarNextTooltip","Next"),"prevTooltip":this.localizeString("calendarPrevTooltip","Previous")},a.calendar)),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-agenda-container").wijsuperpanel()),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-daycalendar").wijcalendar("option","displayDate",b).wijcalendar("unSelectAll").wijcalendar("selectDate",b),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-daycalendar").wijcalendar("refresh"),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-monthday-label").html(b.getDate()),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-fulldate-label").html(this._formatString(this.localizeString("dayDetailsLabelFulldateFormat","{0:dddd, MMMM d}"),b)),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-year-label").html(this._formatString(this.localizeString("dayDetailsLabelYearFormat","{0:yyyy}"),b)),this._updateAgendaList(this.element.find(".wijmo-wijev-day-details  .wijmo-wijev-agenda-container"),b,b,!1)},b.prototype._listViewAgendaScrolled=function(a,b){var c,d,e=this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container"),f=e.wijsuperpanel("option","vScroller"),g=f.scrollValue,h=f.scrollMax-2*f.scrollLargeChange,j=a.type,k=!1;"wijsuperpanelscroll"===j?(d=b.position,c=e.find(".wijmo-wijsuperpanel-contentwrapper-touch"),e.height()+d>=c.height()&&(k=!0)):c=e.find(".wijmo-wijsuperpanel-templateouterwrapper"),(g>=h||k)&&c.data("wijevcal_agenda_loadnextpage")&&(c.data("wijevcal_agenda_loadnextpage",!1),c.find(".wijmo-wijev-agenda-more-events").show().html(this.localizeString("agendaLoadingMoreEvents","Loading more events...")),this._renderAgendaEventsTimeoutId&&(clearTimeout(this._renderAgendaEventsTimeoutId),this._renderAgendaEventsTimeoutId=null),this._renderAgendaEventsTimeoutId=setTimeout(i.proxy(function(){this._renderAgendaEventsTimeoutId=null,this._renderAgendaEvents(c,null,null,!0,e),c.find(".wijmo-wijev-agenda-more-events").remove()},this),100))},b.prototype._updateListViewDetails=function(){this._listViewDetailsInit||(this._listViewDetailsInit=!0,i.support.isTouchEnabled&&i.support.isTouchEnabled()?this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container").wijsuperpanel({"scroll":i.proxy(this._listViewAgendaScrolled,this)}):this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container").wijsuperpanel({"scrolled":i.proxy(this._listViewAgendaScrolled,this)})),this._updateAgendaList(this.element.find(".wijmo-wijev-list-details  .wijmo-wijev-agenda-container"),null,null,!0)},b.prototype._updateAgendaList=function(a,b,c,d){var e=this.element.find(".wijmo-wijev-leftpane"),f=a;return a.outerHeight(e.innerHeight()-a[0].offsetTop),f.find(".wijmo-wijsuperpanel-templateouterwrapper").length>0&&(f=f.find(".wijmo-wijsuperpanel-templateouterwrapper")),i.support.isTouchEnabled&&i.support.isTouchEnabled()&&(f=f.find(".wijmo-wijsuperpanel-contentwrapper-touch")),d&&f.data("wijevcal_agenda_initialized")?void(a.data("wijmo-wijsuperpanel")&&this._refreshSuperPanel(a)):(f.data("wijevcal_agenda_initialized",!0),f.data("wijevcal_agenda_loadedeventscount",0),f.html(""),void this._renderAgendaEvents(f,b,c,d,a))},b.prototype._isIE8=function(){return i.browser.msie&&i.browser.version&&parseFloat(i.browser.version)<=8},b.prototype._renderAgendaEvents=function(a,b,d,e,f){var g,h,j,k,l,m,n,o=this._eventsView,p=0,q="",r="",s=null,t=null,u=this.options,v=100,w=this,x=a.data("wijevcal_agenda_loadedeventscount");if(b&&(s=c(b),t=this._addDays(c(d),1),k=(t.getTime()-s.getTime())/864e5),o){if(j=o.length<v+x||!e?o.length:v+x,a.data("wijevcal_agenda_loadedeventscount",j),s)for(;k>p;){for(m=this._addDays(s,p),m=new Date(m.getFullYear(),m.getMonth(),m.getDate()),n=new Date(m.getFullYear(),m.getMonth(),m.getDate(),23,59,59),l=0,r="",h=x;j>h;h+=1)g=o[h],g.start<t&&g.end>s&&g.start<n&&g.start>=m&&(r+=this._renderAgendaAppointmentVisual(g),l+=1);""!==r&&(q+='<div class="wijmo-wijev-agenda-day-container '+this._dayDateToCssClass(m)+'">',e&&(q+=this._renderAgendaDayHeader(m)),q+='<ul class="wijmo-wijev-agenda-list">'+r+"</ul>",q+="</div>"),p+=1}else for(r="",h=x;j>h;h+=1)g=o[h],(h===x||m.getDate()!==g.start.getDate())&&(m=g.start,0!==h&&(q+='<ul class="wijmo-wijev-agenda-list">'+r+"</ul>",q+="</div>"),q+='<div class="wijmo-wijev-agenda-day-container '+this._dayDateToCssClass(m)+'">',e&&(q+=this._renderAgendaDayHeader(m)),r=""),r+=this._renderAgendaAppointmentVisual(g),l+=1,h===j-1&&(q+='<ul class="wijmo-wijev-agenda-list">'+r+"</ul>",q+="</div>",j<o.length?(q+='<div class="wijmo-wijev-agenda-more-events">',q+=this._formatString(this.localizeString("agendaMoreEventsFormat","More events ({0})..."),o.length-j),q+="<div>",a.data("wijevcal_agenda_loadnextpage",!0)):a.data("wijevcal_agenda_loadnextpage",!1));i(q).appendTo(a)}a.on("click",".wijmo-wijev-agenda-event",i.proxy(this._onAgendaEventClick,this)).on("mouseover",".wijmo-wijev-agenda-event",function(a){w.options.disabled||i(this).addClass(u.wijCSS.stateHover)}).on("mouseout",".wijmo-wijev-agenda-event",function(a){w.options.disabled||i(this).removeClass(u.wijCSS.stateHover).removeClass(u.wijCSS.stateActive)}).on("mousedown",".wijmo-wijev-agenda-event",function(){w.options.disabled||i(this).addClass(u.wijCSS.stateActive)}).on("mouseup",".wijmo-wijev-agenda-event",function(){w.options.disabled||i(this).removeClass(u.wijCSS.stateActive)}),f.data("wijmo-wijsuperpanel")&&this._refreshSuperPanel(f)},b.prototype._renderAgendaDayHeader=function(a){var b='<div class="wijmo-wijev-agenda-header '+this.options.header+'"><div class="wijmo-wijev-weekday">'+this._formatString("{0:dddd}",a)+'</div><div class="wijmo-wijev-date">'+this._formatString(this.localizeString("agendaHeaderFullDateFormat","{0:MMMM d, yyyy}"),a)+"</div></div>";return b},b.prototype._onAgendaEventClick=function(a){if(!this.options.disabled){var b=i(a.target);b.hasClass("wijmo-wijev-agenda-event")||(b=b.parent(".wijmo-wijev-agenda-event")),b.length>0&&this.goToEvent(this._parseEventIdFromClass(b[0].className))}},b.prototype._renderAgendaAppointmentVisual=function(a){var b='<li class="wijmo-wijev-agenda-event '+this._dayDateToCssClass(a.start)+" "+this._eventIdToCssClass(a.id)+" "+this.options.wijCSS.stateDefault+" "+this.options.wijCSS.helperClearFix+'"><div class="wijmo-wijev-agenda-event-color wijmo-wijev-event-color-'+(a.color||"default")+'"><div></div></div><div class="wijmo-wijev-agenda-event-title">'+a.subject+'</div><div class="wijmo-wijev-agenda-event-time">'+(this.isAllDayEvent(a)?this.localizeString("labelAllDay","all-day"):this._formatString(this.localizeString("agendaTimeFormat","{0:hh:mm tt} to {1:hh:mm tt}"),a.start,a.end))+"</div></li>";return b},b.prototype._invalidateCurrentTimeIndicator=function(){var a=this.element.find(".wijmo-wijev-timeruler .wijmo-wijev-currenttime-indicator"),b=new Date,c=this.options;b=b.getMinutes()+60*b.getHours(),a.css("top",b/c.timeInterval*c.timeIntervalHeight)},b.prototype._onEventsDataChanged=function(){this._clearViewsCache(),this._prepareEventsForView(),this._renderActiveView(),this._trigger("eventsDataChanged",null,{"eventsData":this.options.eventsData})},b.prototype._onCalendarsChanged=function(){this._trigger("calendarsChanged",null,{"calendars":this.options.calendars})},b.prototype._renderDayViewAppointments=function(){var a,b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s=this._eventsView,t=this.element.find(".wijmo-wijev-headercontainer"),u=this.element.find(".wijmo-wijev-scrollcontent"),v=t.find(".wijmo-wijev-dayheadercolumn"),w=u.find(".wijmo-wijev-daycolumn"),x=this.options,y=this._getDayColumnDates(),z=y[0],A=[];if(h=y[y.length-1],h=new Date(h.getFullYear(),h.getMonth(),h.getDate(),23,59,59),s)for(c=0,e=y.length;e>c;c+=1)if(w[c]._cached)A.push(w[c]);else{for(f=y[c],f=new Date(f.getFullYear(),f.getMonth(),f.getDate()),g=new Date(f.getFullYear(),f.getMonth(),f.getDate(),23,59,59),b=0,d=s.length;d>b;b+=1)a=s[b],a.start<h&&a.end>z&&a.start<g&&a.end>f&&(this.isAllDayEvent(a)?(j=!0,k=i(this._getAllDayEventMarkup(a)),i(v[c]).find(".wijmo-wijev-allday-cell").append(k)):(l=a.start,m=a.end,f>l&&(l=f),m>g&&(m=g),n=(l-f)/1e3/60,o=(m-f)/1e3/60,p=Math.round(n*x.timeIntervalHeight/x.timeInterval),q=Math.round(o*x.timeIntervalHeight/x.timeInterval),k=i(this._getEventMarkup(a)),k.css("top",p),k.outerHeight(q-p),i(w[c]).append(k)));this._storeDayCache(y[c],v[c],w[c]),w[c]._cached=!0,A.push(w[c])}this._dayColumnsToResolve=A,this._dayColumnResolveIdx=0,this._resolveDayApptConflictsTimeout||(clearTimeout(this._resolveDayApptConflictsTimeout),this._resolveDayApptConflictsTimeout=null),this._resolveDayApptConflictsTimeout=setTimeout(i.proxy(this._resolveDayViewAppointmentConflictsCb1,this),1),j&&this._invalidateDayView(!0),this._dayViewScrollToEvent&&(k=this.element.find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn ."+this._eventIdToCssClass(this._dayViewScrollToEvent.id)),k.length>0&&(r=k.parents(".wijmo-wijev-scrollpanel"),r.length>0&&r.wijsuperpanel("scrollChildIntoView",k)))},b.prototype._getAllDayEventMarkup=function(a){return'<div class="wijmo-wijev-appointment '+this._eventIdToCssClass(a.id)+'"><div class=" wijmo-wijev-colordot wijmo-wijev-event-color-'+(a.color||"default")+'"></div><div class="wijmo-wijev-event-title">'+a.subject+"</div></div>"},b.prototype._getEventMarkup=function(a){return'<div class="wijmo-wijev-appointment wijmo-wijev-event-color-'+(a.color||"default")+" "+this._eventIdToCssClass(a.id)+'"><div class="wijmo-wijev-content"><div class="wijmo-wijev-title">'+this._formatString(this.options.eventTitleFormat,a.start,a.end,a.subject,a.location,"",a.description)+'</div></div><div class="wijmo-wijev-resizer"><div class="'+this.options.wijCSS.icon+" "+this.options.wijCSS.iconHGripSolid+'">&nbsp;</div></div></div>'},b.prototype._resolveDayViewAppointmentConflictsCb1=function(){this._resolveDayApptConflictsTimeout=null,!this._dayColumnsToResolve||this._dayColumnResolveIdx>=this._dayColumnsToResolve.length||(this._resolveDayViewAppointmentConflicts(this._dayColumnsToResolve[this._dayColumnResolveIdx]),this._dayColumnResolveIdx=this._dayColumnResolveIdx+1,setTimeout(i.proxy(this._resolveDayViewAppointmentConflictsCb1,this),1))},b.prototype._resolveDayViewAppointmentConflicts=function(a){var b,c,d,e,f,g,h,j,k,l=i(a).find(".wijmo-wijev-appointment"),m=[],n=0;for(b=i(l).toArray().sort(this._sortOffsetTop),d=0,h=l.length;h>d;d+=1)if(!(n>d)){for(f=b[d],e=d;h>e;e+=1)if(e!==d){if(g=b[e],!(f.offsetTop<g.offsetTop+g.offsetHeight&&f.offsetTop+f.offsetHeight>g.offsetTop))break;m[d]||(m[d]=[f]),m[d].push(g),g.offsetTop+g.offsetHeight>f.offsetTop+f.offsetHeight&&(f=g)}n=e}for(d=0,h=m.length;h>d;d+=1)if(c=m[d])for(j=c.length,c.sort(this._sortOffsetTop),e=0;j>e;e+=1)f=c[e],f.style.width=Math.floor(100/j)+"%",k=Math.floor(100*e/j),f.style.marginLeft=k+"%",f.style.zIndex=k},b.prototype._sortOffsetTop=function(a,b){return a.offsetTop<b.offsetTop?-1:a.offsetTop>b.offsetTop?1:0},b.prototype._onDayViewTimeIntervalClick=function(a){this.options.disabled||this.options.readOnly||this.showEditEventDialog(null,a.target,a)},b.prototype._onDayViewAllDayCellClick=function(a){if(!this.options.disabled&&!this.options.readOnly){var b=i(a.target);b.hasClass("wijmo-wijev-appointment")||b.parents(".wijmo-wijev-appointment").length>0||b.hasClass("wijmo-wijev-daylabel")||b.parents(".wijmo-wijev-daylabel").length>0||this.showEditEventDialog(null,a.target,a)}},b.prototype._onMonthViewDayLabelClick=function(a){if(!this.options.disabled){var b,c=i(a.target).parents(".wijmo-wijev-monthcellcontainer"),d=this.options;c.length<1&&(c=i(a.target).parents(".wijmo-wijev-dayheadercolumn")),c[0]&&(b=this._parseDateFromClass(c[0].className),"day"!==d.viewType&&(d.viewType="day",this._onViewTypeChanged()),d.selectedDates=[new Date(b)],this._onSelectedDatesChanged())}},b.prototype._onMonthViewCellClick=function(a){if(!this.options.disabled){var b=i(a.target).parent(".wijmo-wijev-monthcellcontainer");this.options.readOnly||b.length<1||this.showEditEventDialog(null,b,a)}},b.prototype._onAppointmentClick=function(a){var b,c=i(a.target);this.options.disabled||this.options.readOnly||this._apptDragResizeFlag||(c.hasClass("wijmo-wijev-appointment")||(c=c.parents(".wijmo-wijev-appointment")),c.length>0&&(b=this.findEventById(c[0].className),this.showEditEventDialog(b,c,a)))},b.prototype.findEventById=function(a){var b;return a&&(b=a.indexOf("apptid_"),-1!==b&&(a=this._parseEventIdFromClass(a)),this._eventsDataById)?this._eventsDataById[a]:null},b.prototype._onMonthViewAppointmentMouseDown=function(a){if(!this.options.disabled&&!this.options.readOnly){var b=i(a.target),c=b.hasClass("wijmo-wijev-appointment")?b:b.parents(".wijmo-wijev-appointment");a.preventDefault(),this.__targetAppt=c,i(document).bind("mouseup.tmp_wijevcal",i.proxy(this._onMonthViewAppointmentMouseUp,this)),this.element.find(".wijmo-wijev-monthview .wijmo-wijev-monthcellcontainer").bind("mouseover.tmp_wijevcal",i.proxy(this._onMonthViewCellMouseOver,this))}},b.prototype._onDayViewAppointmentMouseDown=function(a){if(!this.options.disabled&&!this.options.readOnly){var b=i(a.target),c=b.hasClass("wijmo-wijev-appointment")?b:b.parents(".wijmo-wijev-appointment"),d=b.hasClass("wijmo-wijev-resizer")||b.parents(".wijmo-wijev-resizer").length>0;this.options.disabled||(this._isApptResize=d,a.preventDefault(),this._isApptResize?(this.__startApptH=c[0].offsetHeight,this.__startApptY=c[0].offsetTop):this.__startApptY=c[0].offsetTop,this.__startClientY=a.clientY,this.__targetAppt=c,i(document).bind("mousemove.tmp_wijevcal",i.proxy(this._onDayViewAppointmentMouseMove,this)),i(document).bind("mouseup.tmp_wijevcal",i.proxy(this._onDayViewAppointmentMouseUp,this)),i(this.element).find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn").bind("mouseover.tmp_wijevcal",i.proxy(this._onDayViewColumnMouseOver,this)),i(this.element).find(".wijmo-wijev-dayview .wijmo-wijev-allday-cell").bind("mouseover.tmp_wijevcal",i.proxy(this._onDayViewAllDayMouseOver,this)))}},b.prototype._onDayViewAppointmentMouseMove=function(a){if(!this.options.disabled){a.preventDefault();var b,c,d,e,f=a.clientY-this.__startClientY,g=this.options;a.ctrlKey||(f=Math.round(f/g.timeIntervalHeight)*g.timeIntervalHeight),0===f||this._apptDragResizeFlag||(this._apptDragResizeFlag=!0,this.__targetAppt.addClass("wijmo-wijev-dragging"),this.__targetAppt.css("width","100%").css("margin-left","0").css("z-index","1000")),this._apptDragResizeFlag&&(this._isApptResize?(c=this.__startApptH+f,0>c?(c=Math.abs(c),b=this.__startApptY-c,b>=0&&(this.__targetAppt.css("height",c),this.__targetAppt.css("top",b))):this.__targetAppt.css("height",c)):(b=this.__startApptY+f,0>b&&(b=0),this.__targetAppt.css("top",b),d=this.__targetAppt.offset().top,e=this.__targetAppt.parents(".wijmo-wijev-scrollpanel"),e.length>0&&e.wijsuperpanel("scrollChildIntoView",this.__targetAppt),this.__startApptY=this.__startApptY-(this.__targetAppt.offset().top-d)),this._onApptVisualDargOrResize(this.__targetAppt,this.findEventById(this.__targetAppt[0].className)))}},b.prototype._onDayViewAppointmentMouseUp=function(a){if(!this.options.disabled&&(this.__targetAppt&&this.__targetAppt.removeClass("wijmo-wijev-dragging"),i(document).unbind(".tmp_wijevcal"),i(this.element).find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn").unbind(".tmp_wijevcal"),i(this.element).find(".wijmo-wijev-dayview .wijmo-wijev-allday-cell").unbind(".tmp_wijevcal"),this._apptDragResizeFlag||this._apptMovedFlag)){var b=this.findEventById(this.__targetAppt[0].className);this._onApptVisualDargOrResize(this.__targetAppt,b),this._apptMovedFlag=!1,this._movedFromTimeInervalApptElem=null,this.updateEvent(b),window.setTimeout(i.proxy(function(){this.__targetAppt&&!this.__targetAppt.hasClass("wijmo-wijev-dragging")&&(this._apptDragResizeFlag=!1,this._resolveDayViewAppointmentConflicts(this.__targetAppt.parents(".wijmo-wijev-daycolumn")))},this),1)}},b.prototype._updateAppointmentVisual=function(a){var b,d,e,f,g,h,i,j,k=this.element.find(".wijmo-wijev-dayview ."+this._eventIdToCssClass(a.id)),l=this.options;1===k.length&&(this._addColorClass(k,a.color),k.find(".wijmo-wijev-title").html(this._formatString(l.eventTitleFormat,a.start,a.end,a.subject,a.location,"",a.description)),g=c(a.start),b=(a.start-g)/1e3/60,d=(a.end-g)/1e3/60,e=Math.round(b*l.timeIntervalHeight/l.timeInterval),f=Math.round(d*l.timeIntervalHeight/l.timeInterval),k.css("top",e),k.css("height",f-e),h=this._dayDateToCssClass(g),1!==k.parents(".wijmo-wijev-daycolumn."+h).length&&(i=k[0].parentNode,j=this.element.find(".wijmo-wijev-daycolumn."+h),i.removeChild(k[0]),k.appendTo(j)))},b.prototype._onApptVisualDargOrResize=function(a,b){if(!this.options.disabled){var d,e,f,g,h,i,j,k,l=this.options,m=a[0].offsetTop,n=m+a[0].offsetHeight;k=a.parents(".wijmo-wijev-dayheadercolumn").length>0?a.parents(".wijmo-wijev-dayheadercolumn")[0]:a.parents(".wijmo-wijev-daycolumn")[0],j=this._parseDateFromClass(k.className,null),d=Math.round(m*l.timeInterval/l.timeIntervalHeight),e=Math.round(n*l.timeInterval/l.timeIntervalHeight),f=new Date(60*d*1e3+j.getTime()),g=new Date(60*e*1e3+j.getTime()),b&&(this._isApptResize?h=g:(i=b.end.getTime()-b.start.getTime(),h=new Date(f.getTime()+i)),b.allday=a.parents(".wijmo-wijev-dayheadercolumn").length>0,b.start=f,b.end=h,a.find(".wijmo-wijev-title").html(this._formatString(l.eventTitleFormat,b.start,b.end,b.subject,b.location,"",b.description)),this._isApptResize||h.getTime()===g.getTime()||a.css("height",Math.round((b.end-c(b.start))/1e3/60*l.timeIntervalHeight/l.timeInterval)-Math.round((b.start-c(b.start))/1e3/60*l.timeIntervalHeight/l.timeInterval)))}},b.prototype._onDayViewColumnMouseOver=function(a){if(!this.options.disabled){var b=i(a.target).parents(".wijmo-wijev-daycolumn"),c=this.__targetAppt.parents(".wijmo-wijev-daycolumn");if(!(b.length<1)){if(c.length<1){if(c=this.__targetAppt.parents(".wijmo-wijev-dayheadercolumn"),c.length<1)return;this._movedFromTimeInervalApptElem?(this.__targetAppt.replaceWith(this._movedFromTimeInervalApptElem),this.__targetAppt=i(this._movedFromTimeInervalApptElem),this._movedFromTimeInervalApptElem=null):this.__targetAppt.html(this._getEventMarkup(this.findEventById(this.__targetAppt[0].className)))}b[0].className!==c[0].className&&(this.__targetAppt[0].parentNode.removeChild(this.__targetAppt[0]),this._resolveDayViewAppointmentConflicts(c),this.__targetAppt.appendTo(b),this._apptMovedFlag=!0)}}},b.prototype._onMonthViewCellMouseOver=function(a){if(!this.options.disabled){var b=i(a.target),c=b.hasClass("wijmo-wijev-monthcellcontainer")?b:b.parents(".wijmo-wijev-monthcellcontainer"),d=this.__targetAppt.parents(".wijmo-wijev-monthcellcontainer");c.length<1||d.length<1||c[0].className!==d[0].className&&(this.__targetAppt[0].parentNode.removeChild(this.__targetAppt[0]),this.__targetAppt.appendTo(c.find(".wijmo-wijev-monthcell")),this.__targetApptChanged=!0)}},b.prototype._onMonthViewAppointmentMouseUp=function(){if(!this.options.disabled){var a,b,d=this.__targetAppt.parents(".wijmo-wijev-monthcellcontainer")[0],e=this._parseDateFromClass(d.className,null);i(document).unbind(".tmp_wijevcal"),this.element.find(".wijmo-wijev-monthview .wijmo-wijev-monthcellcontainer").unbind(".tmp_wijevcal"),this.__targetApptChanged&&(this.__targetApptChanged=!1,a=this.findEventById(this.__targetAppt[0].className),b=(e.getTime()-c(a.start).getTime())/864e5,a.start=this._addDays(a.start,b),a.end=this._addDays(a.end,b),this.updateEvent(a))}},b.prototype._onDayViewAllDayMouseOver=function(a){if(!this.options.disabled){var b,c=i(a.target).parents(".wijmo-wijev-dayheadercolumn"),d=this.__targetAppt.parents(".wijmo-wijev-daycolumn");c.length<1||(d.length>0?(b=i(this._getAllDayEventMarkup(this.findEventById(this.__targetAppt[0].className))),this._movedFromTimeInervalApptElem=this.__targetAppt[0].cloneNode(!0),this.__targetAppt.replaceWith(b),this.__targetAppt=b):d=this.__targetAppt.parents(".wijmo-wijev-dayheadercolumn"),d.length<1||c[0].className!==d[0].className&&(this.__targetAppt[0].parentNode.removeChild(this.__targetAppt[0]),this._resolveDayViewAppointmentConflicts(d),this.__targetAppt.appendTo(i(c).find(".wijmo-wijev-allday-cell")),this._apptMovedFlag=!0))}},b.prototype._renderMonthView=function(){var a,b,c,d,e,f,g,h,j,k=this.options,l=k.selectedDate,m=k.firstDayOfWeek,n=!1,o=!1,p=new Date,q=!1,r=["","","","","","",""],s=this.element.find(".wijmo-wijev-view.wijmo-wijev-monthview"),t=k.dayHeaderFormat,u=k.firstRowDayHeaderFormat;for(l||(l=new Date),b=new Date(l.getFullYear(),l.getMonth(),1);b.getDay()!==parseInt(m);)b=this._addDays(b,-1);for(c=new Date(l.getFullYear(),l.getMonth(),this._daysInMonth(l.getMonth(),l.getFullYear())),a=b,d=0,e=0;c>a||7>d;)if(a>c&&(c=a),g="",f="wijmo-wijev-monthcellcontainer "+k.wijCSS.content+" "+this._dayDateToCssClass(a),o=a.getMonth()!==l.getMonth(),o&&(f+=" wijmo-wijev-othermonth"),q?q=!1:(f+=" wijmo-wijev-leftborder",6===d&&(f+=" wijmo-wijev-rightborder")),n=0===this._compareDayDates(a,p),n&&(f+=" wijmo-wijev-today",f+=" wijmo-wijev-rightborder",q=!0),g+='<div class="'+f+'">',g+='<div class="wijmo-wijev-monthcellheader',o&&(g+=" "+k.wijCSS.prioritySecondary),n&&(g+=" "+k.wijCSS.stateHighlight),g+='">',n&&(g+='<span class="wijmo-wijev-todaylabel">'+this.localizeString("labelToday","Today")+"</span>"),g+=0===e?this._formatString(u,a):this._formatString(t,a),g+="</div>",g+='<div class="wijmo-wijev-monthcell',o&&(g+=" "+k.wijCSS.prioritySecondary),n&&(g+=" "+k.wijCSS.stateHighlight),g+='"></div>',g+="</div>",r[d]=r[d]+g,d+=1,a=this._addDays(a,1),d>6){if(a>c)break;d=0,e+=1}for(0===s.length&&(s=i('<div class="wijmo-wijev-view wijmo-wijev-monthview '+k.wijCSS.content+'"><h3 class="wijmo-wijev-header-title">title</h3><div class="wijmo-wijev-monthview-inner"></div></div>'),s.appendTo(this.element.find(".wijmo-wijev-view-container"))),j=s.find(".wijmo-wijev-monthview-inner"),j.find(".wijmo-wijev-monthcolumn").remove(),a=b,h=0;7>h;h+=1)j.append('<div class="wijmo-wijev-monthcolumn">'+r[h]+"</div>"),a=this._addDays(a,1);this._invalidateMonthView(),this._renderMonthViewAppointments()},b.prototype._invalidateMonthView=function(){var a,b,c,d,e,f,g,h,j=this.element.find(".wijmo-wijev-monthview"),k=j.find(".wijmo-wijev-monthview-inner"),l=j.find(".wijmo-wijev-monthcolumn"),m=j.find(".wijmo-wijev-monthcellcontainer"),n=this.element.find(".wijmo-wijev-monthview .wijmo-wijev-header-title");this._invalidateView(),l.length<1||(a=j.innerWidth(),b=j.innerHeight()-n.outerHeight(!0),k.outerWidth(a),k.outerHeight(b),a-=k.outerWidth(!0)-k.innerWidth(),b-=k.outerHeight(!0)-k.innerHeight(),c=Math.floor(a/l.length),l.outerWidth(c),h=a-c*l.length,h>0&&i(l[l.length-1]).outerWidth(c+h),g=i(l[0]).find(".wijmo-wijev-weekdayname").outerHeight(!0),g||(g=0),d=Math.floor((b-g)/i(l[0]).find(".wijmo-wijev-monthcellcontainer").length),m.height(d),e=i(m[0]).find(".wijmo-wijev-monthcellheader").outerHeight(!0),f=d-e,m.find(".wijmo-wijev-monthcell").outerHeight(f))},b.prototype._renderMonthViewAppointments=function(){var a,b,c,d,e,f,g,h,j,k=this._eventsView,l=this.element.find(".wijmo-wijev-monthcellcontainer");if(k)for(c=0,e=l.length;e>c;c+=1)for(f=l[c],g=this._parseDateFromClass(f.className),h=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59),b=0,d=k.length;d>b;b+=1)a=k[b],a.start<h&&a.end>g&&(j=i('<div class="wijmo-wijev-appointment '+this._eventIdToCssClass(a.id)+'"><div class=" wijmo-wijev-colordot wijmo-wijev-event-color-'+(a.color||"default")+'"></div><div class="wijmo-wijev-event-title">'+a.subject+"</div></div>"),i(f).find(".wijmo-wijev-monthcell").append(j));l.find(".wijmo-wijev-monthcell").each(i.proxy(function(a,b){var c=i(b),d=c.find(".wijmo-wijev-appointment"),e=c.outerHeight(),f=d.outerHeight(),g=d.length*f,h=0;g>e&&(d.each(function(a,b){a*f+f>e&&(b.style.display="none",h+=1)}),h>0&&c.find(".wijmo-wijev-monthcell-showmore").length<1&&c.append(i('<div class="wijmo-wijev-monthcell-showmore">'+this._formatString(this.localizeString("monthCellMoreEventsFormat","{0}  more..."),h)+"</div>")))},this))},b.prototype.log=function(a,b){},b.prototype._log=function(a,b){var c;this.logPanel&&(c=new Date,this.logPanel.prepend(i('<span class="'+(b?b:"wijmo-wijev-information")+'">['+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds()+"] "+a+"</span><br/>")))},b.prototype._createLogPanel=function(){if(!this.logPanel){this.logDialog=i('<div title="Log"><div class="wijmo-wijev-log"></div></div>'),this.logDialog.appendTo(this.element);var a={};a[this.localizeString("buttonClearAll","Clear All")]=function(){i(this).find(".wijmo-wijev-log").html("")},a[this.localizeString("buttonClose","Close")]=function(){i(this).wijdialog("close")},this.logPanel=this.logDialog.wijdialog({"captionButtons":{},"buttons":a,"width":600,"height":420,"position":["right","top"]}).find(".wijmo-wijev-log")}this.logDialog.wijdialog("open")},b.prototype.status=function(a,b){this.element.find(".wijmo-wijev-statusbar").html("<span class='"+(b?b:"wijmo-wijev-status")+"'>"+a+"</span>"),this.log(a,b?b:"wijmo-wijev-status"),this.statusbarEventsAdded||(this.statusbarEventsAdded=!0,this._initStatusbar())},b.prototype._invalidateView=function(){var a,b,c,d,e,f,g,h,j,k,l=this.element.find(".wijmo-wijev-rightpane"),m=this.element.find(".wijmo-wijev-leftpane"),n=this.element.find(".wijmo-wijev-headerbar"),o=this.element.find(".wijmo-wijev-navigationbar"),p=this.element.find(".wijmo-wijev-statusbar"),q=this.element.find(".wijmo-wijev-view-container"),r=this.element.find(".wijmo-wijev-view");for(a=this.element.innerWidth()-(q.outerWidth(!0)-q.innerWidth()),b=this.element.innerHeight()-(q.outerHeight(!0)-q.innerHeight()),c=n.is(":visible")?n.outerHeight(!0):0,d=o.is(":visible")?o.outerHeight(!0):0,e=p.is(":visible")?p.outerHeight(!0):0,q.outerWidth(a),q.outerHeight(b-c-d-e),h=0,k=0;k<m.length;k+=1)i(m[k]).is(":visible")&&(h+=i(m[k]).outerWidth());j=l.is(":visible")?l.outerWidth():0,f=b-c-d-e,g=a-j-h-1,r.outerHeight(f),r.outerWidth(g),n.outerWidth(g+h),o.outerWidth(this.element.innerWidth()),p.outerWidth(g+h+j),m.outerHeight(b-c-d-e),l.outerHeight(b+100),this.element.find(".wijmo-wijev-datepager").wijdatepager("refresh")},b.prototype._daysInMonth=function(a,b){var c=new Date(b,a+1,0);return c.getDate()},b.prototype._addMinutes=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()+b)},b.prototype._addDays=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+b,a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())},b.prototype._setTime=function(a,b,c){var d;return a=new Date(a),a.setHours(b.getHours()),a.setMinutes(b.getMinutes()),a.setSeconds(b.getSeconds()),a.setMilliseconds(b.getMilliseconds()),c&&(d=Math.floor((b.getTime()-c.getTime())/864e5),d>0&&(a=this._addDays(a,d))),a},b.prototype._addMonths=function(a,b){return new Date(a.getFullYear(),a.getMonth()+b,a.getDate())},b.prototype._compareDayDates=function(a,b){return a=new Date(a.getFullYear(),a.getMonth(),a.getDate()),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),b>a?-1:a>b?1:0},b.prototype._dayDateToCssClass=function(a){return"wijmo-wijev-date_"+a.getFullYear()+"_"+a.getMonth()+"_"+a.getDate()},b.prototype._parseDateFromClass=function(a,b,c){var d,e,f,g=new RegExp("wijmo-wijev-minute-(\\d+)\\s"),h=new RegExp("wijmo-wijev-date_(\\d+_\\d+_\\d+)\\s");return a?(f=h.exec(a+" ")[1].split("_"),d=new Date(parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)),b&&(e=g.exec(b+" "),e&&(e=parseInt(e[1],10),d.setMinutes(e))),d):c||null},b.prototype._eventIdToCssClass=function(a){return"apptid_"+a},b.prototype._parseEventIdFromClass=function(a){var b,c,d="";return b=new RegExp("apptid_(\\S+)"),c=b.exec(a),c&&c.length>1&&(d=c[1]),d},b.prototype._isContainsDayDate=function(a,b){var c;if(!a)return!1;for(c=0;c<a.length;c+=1)if(0===this._compareDayDates(a[c],b))return!0},b.prototype._formatString=function(a,b,c,d,e,f,g,h){var i,j,k,l=arguments,m=this;if(l.length<=1)return Globalize.format(l);if("string"==typeof a&&("_formatWeekTitle"===a?a=this._formatWeekTitle:"_formatMonthTitle"===a?a=this._formatMonthTitle:"function"==typeof window[a]&&(a=window[a])),"function"==typeof a){for(k=[],j=1;j<l.length;j+=1)k[j-1]=l[j];return a.apply(this,k)}return i=new RegExp("\\{(\\d+)(?:,([-+]?\\d+))?(?:\\:([^(^}]+)(?:\\(((?:\\\\\\)|[^)])+)\\)){0,1}){0,1}\\}","g"),a.replace(i,function(a,b,c,d,e){return a=l[Number(b)+1],d?Globalize.format(a,d,m._getCulture()):a})},b.prototype._formatMonthTitle=function(a){return this._formatString(this.localizeString("monthViewHeaderFormat","{0:MMMM yyyy}"),a)},b.prototype._formatWeekTitle=function(a,b){return a.getMonth()!==b.getMonth()?this._formatString(this.localizeString("weekViewHeaderFormat2Months","{0:MMMM} - {1:MMMM yyyy}"),a,b):this._formatString(this.localizeString("weekViewHeaderFormat","{0:MMMM yyyy}"),a)},b.prototype._formatDayHeaderDate=function(a){var b=this.options,c=b.viewType.toLowerCase(),d=this.options.dayViewHeaderFormat;if(d[c])d=d[c];else if(!d[c])return"";return this._formatString(d,a)},b.prototype._getCulture=function(a){return this._innerCulture||this._resetCulture(a),
this._innerCulture},b.prototype._resetCulture=function(a){var b=i.wijGetCulture(a||this.options.culture,this.options.cultureCalendar);this._innerCulture=b},b.prototype._isRTL=function(){return!!this._getCulture().isRTL},b.prototype._onAjaxError=function(a,b,c,d){b?(this.status("Ajax error "+b.status+" ("+b.statusText+")","error"),this.log("Error, requested url: "+c.url,"error"),b.responseText&&this.log("Error, response text: "+b.responseText,"error")):(this.status("Ajax error detected.","error"),this.log("Error, requested url: "+c.url,"error"))},b.prototype._onWindowResize=function(){this.invalidate()},b}(a.wijmoWidget);b.wijevcal=n;var o=function(){function a(){this.wijMobileCSS={"header":"ui-header ui-bar-a","content":"ui-body ui-body-b","stateDefault":"ui-btn ui-btn-b"},this.initSelector=":jqmData(role='wijevcal')",this.culture="",this.cultureCalendar="",this.localization=null,this.datePagerLocalization=null,this.readOnly=!1,this.webServiceUrl="",this.colors=null,this.dataStorage={"addEvent":null,"updateEvent":null,"deleteEvent":null,"loadEvents":null,"addCalendar":null,"updateCalendar":null,"deleteCalendar":null,"loadCalendars":null},this.dataSource=null,this.eventsData=null,this.appointments=[],this.calendars=[],this.disabled=!1,this.editCalendarTemplate="",this.enableLogs=!1,this.eventTitleFormat="{2}",this.titleFormat={"day":!1,"week":"_formatWeekTitle","month":"_formatMonthTitle","list":!1},this.firstDayOfWeek=0,this.headerBarVisible=!0,this.navigationBarVisible=!0,this.rightPaneVisible=!1,this.selectedDate=null,this.selectedDates=null,this.statusBarVisible=!1,this.timeInterval=30,this.timeIntervalHeight=15,this.timeRulerInterval=60,this.timeRulerFormat="{0:h tt}",this.dayHeaderFormat="{0:d }",this.firstRowDayHeaderFormat="{0:ddd d}",this.dayViewHeaderFormat={"day":"all-day events","week":"{0:d dddd}","list":"{0:d dddd}"},this.viewType="day",this.ensureEventDialogOnBody=!1,this.visibleCalendars=new Array("Default"),this.calendar=null,this.calendarsChanged=null,this.initialized=null,this.selectedDatesChanged=null,this.viewTypeChanged=null,this.beforeEditEventDialogShow=null,this.beforeAddEvent=null,this.beforeUpdateEvent=null,this.beforeDeleteEvent=null,this.beforeAddCalendar=null,this.beforeUpdateCalendar=null,this.beforeDeleteCalendar=null,this.eventsDataChanged=null}return a}();n.prototype.options=i.extend(!0,{},a.wijmoWidget.prototype.options,new o),i.wijmo.registerWidget(j,n.prototype)}(a.evcal||(a.evcal={}));a.evcal}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";function c(){return document.location.hash.match(/^#\w+=/)}var d=jQuery,e="wijappview",f={"menu":"menu","content":"content","header":"header","footer":"footer","page":"appviewpage"},g={"adjusted":e+"-adjusted"},h="",i=!1;d.fn.findRole=function(a){return this.find(":jqmData(role='"+a+"')")};var j=function(a){function b(){a.apply(this,arguments),this._updatingUrl=!1}return __extends(b,a),b.prototype._appViewCSS=function(){return this.options.wijCSS.wijappview},b.prototype._initMenu=function(){if(this._menuDiv=this.element.findRole(f.menu),!this._menuDiv.length)throw"A DIV with data-role='"+f.menu+"' not found!";if(this._linkList=this._menuDiv.find("ul"),!this._linkList.length)throw"Invalid markup. Link list not found";this._menuDiv.addClass(this._appViewCSS().menu)},b.prototype._initPages=function(a,b){var c=(this._pageStore,this._appViewCSS());a.each(function(){var a=d(this).addClass(c.page),e=a.attr("id"),f=b;a.jqmData("url")||(e&&(f+="#"+e),a.attr("data-url",f))})},b.prototype._initPageContainer=function(){var a=this._appViewCSS(),b=this._pageStore;this._pageContainer=d("<div/>").addClass(a.pageContainer).prependTo(this.element);var c=this.element.findRole(f.page);this._initPages(c,this._documentUrl),c.each(function(a){b.push(d(this).clone()),a>0&&d(this).remove()}),this._firstPage=c.first().addClass(a.pageActive).appendTo(this._pageContainer),this._initCurrentPage()},b.prototype._getUrl=function(a){var b=a.is("form")?"action":"href",c=a.attr(b);return c&&"#"!==c?(d.mobile.path.isRelativeUrl(c)&&a.parents(":jqmData(url)").each(function(a,b){var e=d(b).jqmData("url");return e&&d.mobile.path.isAbsoluteUrl(e)?(c=d.mobile.path.makeUrlAbsolute(c,e),!1):void 0}),c):null},b.prototype._hijackLinks=function(a){var b=this;a.on("click."+e,"a:not(.WijListviewNestedLink), .ui-btn:not(.WijListviewNestedLink)",function(a){if(!a.isDefaultPrevented()){var c=b._findClosestLink(a.target);if(c&&d(c).jqmData("appviewpage")!==!1){var e=b._getUrl(d(c));e&&(a.preventDefault(),a.stopPropagation(),b.changePage(e))}}})},b.prototype._hijackForms=function(a){var b=this;a.on("submit."+e,"form",function(a){if(!a.isDefaultPrevented()){var c=d(a.currentTarget);c.closest("."+b._appViewCSS().page);if(d.mobile.ajaxEnabled&&!c.is(":jqmData(ajax='false')")&&c.jqmHijackable().length){var e=c.attr("method"),f=(c.attr("target"),b._getUrl(c));f&&(a.preventDefault(),a.stopPropagation(),b.changePage(f,{"type":e&&e.length&&e.toLowerCase()||"get","data":c.serialize(),"reloadPage":!0}))}}})},b.prototype._initNavigation=function(){var a=this;this._onPopStateScoped=this._onPopStateScoped||d.proxy(this._onPopState,this),d(window).bind("popstate."+e,this._onPopStateScoped),d(window).bind("appviewpagehashchange."+e,function(){return a._navigateToCurrentLocation()}),this._onNavigateScoped=this._onNavigateScoped||d.proxy(this._onNavigate,this),d(d.mobile.pageContainer).bind("navigate."+e,this._onNavigateScoped)},b.prototype._create=function(){this._pageStore=[],this._documentUrl=this._removePageUrlParam(location.href),this.element.attr("data-url",this._documentUrl),this._jqmPageEnclosingWidget=this._findJqmPage(),this.element.addClass(this._appViewCSS().outerDiv),this._initMenu(),this._initPageContainer(),this._hijackLinks(this.element),this._hijackForms(this.element),this._initNavigation(),this._navigateToCurrentLocation()},b.prototype.destroy=function(){a.prototype.destroy.call(this);var b="."+e;this.element.unbind(b),d(window).unbind(b),d(d.mobile.pageContainer).unbind(b)},b.prototype._findJqmPage=function(){for(var a=this.element;a.length;a=a.parent()){var b=a.jqmData("mobile-page");if(b)return b}return null},b.prototype._initCurrentPage=function(){var a=this._appViewCSS(),b=this.activePage();b.findRole(f.content).addClass(a.content);var c=b.findRole(f.header).addClass(a.header),d=c.jqmData("position"),e=!d||"fixed"===d;e&&c.addClass("ui-header-fixed"),this.element.toggleClass(a.withFixedHeader,e)},b.prototype._findClosestLink=function(a){for(;a&&("string"!=typeof a.nodeName||"a"!==a.nodeName.toLowerCase());)a=a.parentNode;return a},b.prototype._clickHandler=function(a){var b=d(a.currentTarget),c=b.is("li")?b.jqmData("url"):b.is("a")?b.attr("href"):null;c&&(a.preventDefault(),a.stopPropagation(),this.changePage(c))},b.prototype._inheritAttribute=function(a,b,c){a.attr(c)&&!b.attr(c)&&b.attr(c,a.attr(c))},b.prototype._findInCache=function(a){return d(d.grep(this._pageStore,function(b){return b.jqmData("url")===a})[0]).clone()},b.prototype.loadPage=function(a,b){var c=this;a=a||"";var e=d.Deferred(),g=d.mobile.path,h=d.extend({},this.options.loadSettings,b),i=(!a||"#"===a.charAt(0),null),j=null,k=this._makeAbsoluteUrl(a);if(h.data)switch(h.type){case"get":k=g.addSearchParams(k,h.data),h.data=void 0;break;case"post":h.reloadPage=!0}var l=d.Event("pagebeforeload"),m={"url":a,"absUrl":k,"dataUrl":k,"deferred":e,"options":h};if(this._trigger(l.type,l,m),l.isDefaultPrevented())return e.promise();if(!d.mobile.allowCrossDomainPages&&!g.isSameDomain(g.parseLocation(),k))return e.reject(k,b),e.promise();var n=k&&g.getFilePath(k).replace(/#.+/,""),o=d.ajax({"url":n,"type":h.type,"data":h.data,"dataType":"html","success":function(h,l,o){function p(a){return g.isAbsoluteUrl(a)||/^(\w+:|#|\/)/.test(a)?null:g.makeUrlAbsolute(a,n)}var q=d("<div></div>");new RegExp("(<[^>]+\\bdata-"+d.mobile.ns+"role=[\"']?"+f.page+"[\"']?[^>]*>)"),new RegExp("\\bdata-"+d.mobile.ns+"url=[\"']?([^\"'>]*)[\"']?");d.browser.msie&&parseFloat(d.browser.version)<=7&&(h=h.replace(/<a[^>]+href=['"][^'"]+['"]/g,function(a){return a.replace(/href=['"]([^'"]+)['"]/,function(a,b){return b=p(b)||b,"href='"+b+"'"})})),q.get(0).innerHTML=h;var r=c._getAllPages(q,a);r.length||(r=d("<div/>").attr("data-role",f.page).html(h.split(/<\/?body[^>]*>/gim)[1]));var s=h.match(/<title[^>]*>([^<]*)/)&&RegExp.$1;s&&~s.indexOf("&")&&(s=d("<div>"+s+"</div>").text()),r.each(function(a,b){b=d(b),b.attr("data-external-page",!0),!b.jqmData("title")&&s&&b.attr("data-title",s);g.get(n);b.find("[src], [href]").each(function(){var a=d(this).is("[href]")?"href":d(this).is("[src]")?"src":"action",b=p(d(this).attr(a));b&&d(this).attr(a,b)})}),c._initPages(r,n),i=r.filter(function(){return d(this).jqmData("url")===k}),i.length||(i=r.first()),m.xhr=o,m.textStatus=l,m.page=i,m.allPages=r,c._trigger("pageload",null,m),r.each(function(a,b){c._pageStore.push(d(b).clone())}),e.resolve(k,b,i,j)},"error":function(a,f,g){m.xhr=a,m.textStatus=f,m.errorThrown=g;var h=d.Event("pageloadfailed");c._trigger(h.type,h,m),h.isDefaultPrevented()||e.reject(k,b)}});return e.fail(function(){o.abort()}),e},b.prototype._getAllPages=function(a,b){return a.findRole(f.page)},b.prototype.activePage=function(){return this._pageContainer.children("."+this._appViewCSS().pageActive).first()},b.prototype.isMenuUrl=function(a){var b=this;return a=a.toLowerCase(),this._menuDiv.find("a").is(function(){var c=b._getUrl(d(this));return c?c.toLowerCase()===a:!1})},b.prototype._showLoading=function(){d.mobile.loading("show")},b.prototype._hideLoading=function(){d.mobile.loading("hide")},b.prototype.changePage=function(a,b){var c=this;b=d.extend({"updateUrl":!0},this.options.loadSettings,b);var e={"toPage":a,"options":b};this._curRequest&&"pending"===this._curRequest.state()&&this._curRequest.rejectWith&&this._curRequest.rejectWith(this,[a,b,!0]);var h,j;if("string"==typeof a){h=this.activePage().data("url"),j=this._makeAbsoluteUrl(a);var k=j.indexOf("#");if(k>=0&&j.substr(0,k)===h.split("#")[0]){var l=this._findInCache(j);l.length&&(a=l)}}if("string"==typeof a)return this._updateUIBeforeChange(j),b.showLoadMsg&&this._showLoading(),void(this._curRequest=this.loadPage(a,b).always(function(){b.showLoadMsg&&c._hideLoading(),c._curRequest=null}).done(function(a,b,d,e){c._updateUIAfterChange(d.jqmData("url")),c.changePage(d,b)}).fail(function(a,b,d){d||c._updateUI(h),c._trigger("pagechangefailed",null,e)}));var m=d.Event("pagebeforechange");if(this._trigger(m.type,m,e),!m.isDefaultPrevented()){var n=a.jqmData("url"),o=null;this._updateUI(n),n&&(o=this._makeRelative(n),null!=o&&(o=this._makeRelative(o)));var p=a.jqmData("title"),q=a.findRole("header"),r=this._appViewCSS();if(!q.length&&p&&(q=d("<div data-role='header'/>").append(d("<h2/>").text(p)).prependTo(a)),q.length&&!q.jqmData(g.adjusted)){q.jqmData(g.adjusted,!0);var s=this._firstPage.findRole(f.header);s&&this._inheritAttribute(s,q,"data-position"),this.isMenuUrl(n)&&!q.find("a[data-icon=back]").length&&d("<a/>").attr({"href":this._documentUrl,"data-icon":"back"}).text("Back").prependTo(q)}p&&(document.title=p),this._pageContainer.children().removeClass(r.pageActive),a.addClass(r.pageActive).appendTo(this._pageContainer.empty()),this._initCurrentPage(),(b.updateUrl||i)&&(this._updateUrl(n,o,document.title),i=!1),a.jqmData("mobile-page",this._jqmPageEnclosingWidget).jqmData("page",this._jqmPageEnclosingWidget).enhanceWithin().trigger("pagecreate").trigger(this.widgetEventPrefix+"pageinit",e),this._trigger("pagechange",null,e)}},b.prototype._updateUIBeforeChange=function(a){var b=this,c=a===this._documentUrl,e=this._linkList.find("li"),f=this._appViewCSS().menuItemActive;if(c)e.removeClass(f);else{var g=e.filter(function(){var c=b._getUrl(d(this).find("a"));return c&&c.toLowerCase()===a.toLowerCase()});g.length&&!g.hasClass(f)&&(e.removeClass(f),g.addClass(f))}},b.prototype._updateUIAfterChange=function(a){var b=this._appViewCSS(),c=a===this._documentUrl;this.element.toggleClass(b.inPage,!c)},b.prototype._updateUI=function(a){this._updateUIBeforeChange(a),this._updateUIAfterChange(a)},b.prototype._changePageIfDifferent=function(a,b){var c="string"==typeof a?a:a.jqmData("url");this.activePage().jqmData("url")!==c&&this.changePage(a,b)},b.prototype._onNavigate=function(a){var b=new RegExp("^#?"+this.options.urlParamName+"=");(history.state&&history.state.wijappview||document.location.hash.match(b))&&a.preventDefault()},b.prototype._removePageUrlParam=function(a){return a.replace(/\#.*$/,"")},b.prototype._addUrl=function(a){var b=this.options.urlParamName,c=this._removePageUrlParam(location.href);return a&&(c+="#"+b+"="+a),c},b.prototype._makeRelative=function(a){var b=d.mobile.path.parseLocation(),c=a;if(a){var e=b.domain+b.directory;a.substr(0,b.hrefNoHash.length)===b.hrefNoHash?c=a.substr(b.hrefNoHash.length):a.substr(0,e.length)===e&&(c=a.substr(e.length))}return c},b.prototype._makeAbsoluteUrl=function(a){var b=d.mobile.path,c=this.activePage(),e=b.makeUrlAbsolute(c.jqmData("url")||this._documentUrl,this._documentUrl);return e.match(/\/$/)||e.match(/\./)||(e+="/"),a&&b.makeUrlAbsolute(a,e)},b.prototype._onPopState=function(a){this._updatingUrl||(history.state&&history.state.wijappview?this._changePageIfDifferent(history.state.absUrl||this._firstPage,{"updateUrl":!1}):this._navigateToCurrentLocation())},b.prototype._navigateToCurrentLocation=function(){var a=new RegExp("#"+this.options.urlParamName+"=(.+)"),b=a.exec(location.href)||h&&a.exec(h),c=b?d.mobile.path.makeUrlAbsolute(b[1],this._documentUrl):this._firstPage;h="",this._changePageIfDifferent(c,{"updateUrl":!1})},b.prototype._updateUrl=function(a,b,c){this._updatingUrl=!0;try{d.mobile.navigate.navigator.preventHashAssignPopState=!0,document.location.hash=a===this._documentUrl?"":this.options.urlParamName+"="+b}finally{this._updatingUrl=!1}},b}(a.wijmoWidget);b.wijappview=j;var k="wijmo-wijappview",l=k+"-",m=function(){function a(){this.urlParamName="appviewpage",this.loadSettings={"type":"GET","data":void 0,"reloadPage":!1,"showLoadMsg":!1},this.pagebeforeload=null,this.pageload=null,this.pageloadfailed=null,this.pagebeforechange=null,this.pagechange=null,this.pagechangefailed=null,this.wijCSS={"wijappview":{"outerDiv":k,"inPage":l+"in-page","menu":l+"menu","menuItemActive":"ui-btn-down-b","page":l+"page","pageActive":l+"page-active","pageContainer":l+"page-container","content":l+"content","header":l+"header","withFixedHeader":l+"with-fixed-header"}}}return a}();b.wijappview_options=m,j.prototype.options=d.extend({},a.wijmoWidget.prototype.options,new m),d.mobile&&(d.wijmo.registerWidget(e,j.prototype),d(window).bind("hashchange",function(a){c()&&(a.stopImmediatePropagation(),d(window).trigger("appviewpagehashchange"))}),c()&&(h=document.location.hash,d(window).bind("pagecontainercreate",function(){document.location.hash="",i=!0})))}(a.appview||(a.appview={}));a.appview}(wijmo||(wijmo={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wijmo;!function(a){!function(b){"use strict";var c=jQuery,d="wijsparkline",e={"line":{"stroke":"#5b8f00","stroke-width":1,"opacity":.9},"area":{"stroke":"#009999","stroke-width":1,"fill":"#0099ff","fill-opacity":.5},"column":{"stroke":"none","fill":"#0099ff","fill-opacity":.9,"negStyle":{"fill":"#ff0000"},"zeroStyle":{"fill":"#808080"}}},f=function(){function a(a){this._hOffset=15,this._vOffset=-15,this._tooltipEle=c("<div style='position:absolute' class='wijmo-wijsparkline-tooltip'></div>"),this._tooltipEle.appendTo("body").hide()}return a.prototype.show=function(a,b){this._tooltipEle.css({"left":b.originalLeft+this._hOffset,"top":b.originalTop+this._vOffset}).empty().append(a),this._tooltipEle.is(":hidden")&&this._tooltipEle.show()},a.prototype.hide=function(){this._tooltipEle.hide()},a.prototype.destroy=function(){this._tooltipEle.remove(),this._tooltipEle=null},a}();b.SparklineTooltip=f;var g=function(b){function g(){b.apply(this,arguments)}return __extends(g,b),g.prototype._create=function(){var a,b,d=this.options,e=d.width||this.element.width(),f=d.height||this.element.height(),g=this.element.attr("style");this.wrapper=c("<div class='ui-widget "+d.wijCSS.sparkline+"'></div>").attr("style",g||"").css({"width":e,"height":f}),this.canavsWrapper=c("<div class='"+d.wijCSS.canvasWrapper+"'></div>"),this.element.wrap(this.wrapper).after(this.canavsWrapper).hide(),d.data?this.data=d.data:(b=this.element.html(),this.data=b.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")),a=Raphael(this.canavsWrapper[0],e,f),this.canvas=a,this._render()},g.prototype._setOption=function(a,c){var d=this.options;"height"===a||"width"===a?(d[a]=c,this.element[a](c)):"data"===a?this.data=d.data=c:b.prototype._setOption.call(this,a,c),this.redraw()},g.prototype._render=function(){var a,b=this,d=b.options,e=d.type,f=d.seriesList,g=d.seriesStyles?d.seriesStyles.length:0;b.seriesRegionInfos=[],b.canvas.clear(),b.canvasBounds={"startX":0,"width":d.width||this.element.width(),"startY":0,"height":d.height||this.element.height()},e=e&&""!==e?e.toLowerCase():"line",f&&f.length>0?c.each(f,function(c,f){var h=f.type&&""!==f.type?f.type.toLowerCase():e;a=g>0?d.seriesStyles[c%g]:null,b._internalRender(f,d,h,a)}):(a=g>0?d.seriesStyles[0]:null,b._internalRender(null,d,e,a)),b._bindCanvasEvents()},g.prototype._internalRender=function(b,d,f,g){var h,g,i,j,k,l,h=e[f];g=c.extend({},h,g,b?b.seriesStyle:null),k=b&&b.data?b.data:this.data,l=b&&void 0!==b.columnWidth&&null!==b.columnWidth&&"number"==typeof b.columnWidth?b.columnWidth:d.columnWidth,i=new a.sparkline[f+"Render"](this.element,this.canvas,f,{"data":k,"min":d.min,"max":d.max,"valueAxis":d.valueAxis,"origin":d.origin,"animation":d.animation,"bind":b?b.bind||d.bind:d.bind,"seriesStyle":g,"columnWidth":l,"canvasBounds":this.canvasBounds}),i.render(),j={"type":f,"bind":b?b.bind:null,"regionInfos":i.getRegionInfos()},"column"===f&&(this.containsColumnType=!0,this.colunmWidth=i.getColumnWidth()),this.seriesRegionInfos.push(j)},g.prototype.redraw=function(){var a=this.options,b=0,c=0;b=a.width||this.element.width(),c=a.height||this.element.height(),1>b||1>c||(this.canvas.setSize(b,c),this._render())},g.prototype.destroy=function(){this._unbindCanvasEvents(),this.element.unwrap().show(),this.canvas.clear(),this.wrapper=null,this.canavsWrapper.remove(),this.canavsWrapper=null,this.seriesRegionInfos=[],this.canvasBounds=null,this.tooltip&&(this.tooltip.destroy(),this.tooltip=null),b.prototype.destroy.call(this)},g.prototype._bindCanvasEvents=function(){var a=this,b=(a.options,a.canavsWrapper),e="",f="."+d;b&&a.canvas&&(c.support.isTouchEnabled&&c.support.isTouchEnabled()&&(window.navigator.pointerEnabled?this.element.css("touch-action","none"):window.navigator.msPointerEnabled&&this.element.css("-ms-touch-action","none")),c.support.isTouchEnabled&&c.support.isTouchEnabled()&&(e="wij"),b.bind(e+"mousemove"+f,function(c){var d=a._getMousePosition(b,c),e=a.options.disabled;e||a._mouseMoveInsideArea(d)}),b.bind(e+"mouseout"+f,function(b){var c=b.currentTarget,d=b.relatedTarget?b.relatedTarget:b.toElement,e=a.options.disabled;if(!e&&"div"===c.nodeName.toLowerCase()){for(;d&&d!==c&&"body"!==d.nodeName.toLowerCase();)d=d.parentNode;d!==c&&a._mouseOutInsideArea()}}),b.bind(e+"click"+f,function(c){var d=a._getMousePosition(b,c),e=a.options.disabled,f=[];e||(f=a._getCurrentRegionInfos(d),a._trigger("click",null,{"currentRegion":f}))}))},g.prototype._getMousePosition=function(a,b){var c=a.offset(),d="CSS1Compat"===document.compatMode,e=d?b.pageX:b.clientX,f=d?b.pageY:b.clientY,g={"left":e-c.left,"originalLeft":e,"top":f-c.top,"originalTop":f};return g},g.prototype._mouseMoveInsideArea=function(a){var b=this,d=b.options,e=d.tooltipFormat,f=d.tooltipContent,g="",h=[],i=NaN;h=b._getCurrentRegionInfos(a),h.length>0&&(c.each(h,function(a,d){var j;0===a&&(g+="<span>"),f&&c.isFunction(f)?j=c.proxy(f,b.data[d.index])():(d.bind&&(g+=d.bind+": "),j=e?e.replace(/\{(\d+)\}/g,d.value):d.value),g+=j,g+=a<h.length-1?"<br />":"</span>",isNaN(i)&&(b.containsColumnType?"column"===d.type&&(i=d.position.x+b.colunmWidth/2):("line"===d.type||"area"===d.type)&&(i=d.position.x))}),this._paintTooltip(g,a),this._paintIndicatorLine(i)),this._trigger("mouseMove",null,{"currentRegion":h})},g.prototype._mouseOutInsideArea=function(){this.tooltip&&this.tooltip.hide(),this.indicatorLine&&(this.indicatorLine.wijRemove(),this.indicatorLine=null)},g.prototype._getCurrentRegionInfos=function(a){var b=this,d=[];return c.each(this.seriesRegionInfos,function(c,e){var f,g="_"+e.type+"GetCurrentRegionInfo",h=b[g];h&&(f=h.call(b,e,a),f&&(f.type=e.type,f.bind=e.bind,d.push(f)))}),d},g.prototype._lineGetCurrentRegionInfo=function(a,b,d){var e,f=a.regionInfos,g=f.length;return c.each(f,function(a,c){var d,h,i=c.position;if(g-1>a){if(d=f[a+1],h=d.position,b.left>=i.x&&b.left<h.x)return e=c,e.index=a,!1}else if(b.left>=i.x)return e=c,e.index=a,!1}),e},g.prototype._areaGetCurrentRegionInfo=function(a,b){return this._lineGetCurrentRegionInfo(a,b)},g.prototype._columnGetCurrentRegionInfo=function(a,b){return this._lineGetCurrentRegionInfo(a,b)},g.prototype._pieGetCurrentRegionInfo=function(a,b){return null},g.prototype._bulletGetCurrentRegionInfo=function(a,b){return null},g.prototype._unbindCanvasEvents=function(){c.support.isTouchEnabled&&c.support.isTouchEnabled()&&(window.navigator.pointerEnabled?this.element.css("touch-action",""):window.navigator.msPointerEnabled&&this.element.css("-ms-touch-action","")),this.element.unbind("."+d)},g.prototype._paintTooltip=function(a,b){this.tooltip||(this.tooltip=new f(this.options.tooltipStyle)),this.tooltip.show(a,b)},g.prototype._paintIndicatorLine=function(a){var b,c,d,e;this.indicatorLine?this.indicatorLine.transform("T"+a+" 0"):(b=this.canvasBounds.height,c=this.canvasBounds.startX,d=this.canvasBounds.startY,e=["M",c,d,"V",b],this.indicatorLine=this.canvas.path(e.join(" ")),this.indicatorLine.transform("T"+a+" 0"))},g}(a.wijmoWidget);b.wijsparkline=g;var h=function(){function a(a,b,c,d){this.values=[],this.type=c,this.options=d,this.element=a,this.canvas=b,this.animationSet=b.set(),this.scanValues(),null===this.options.min||void 0===this.options.min||"number"!=typeof this.options.min?this.minValue=Math.min.apply(Math,this.values):this.minValue=this.options.min,null===this.options.max||void 0===this.options.max||"number"!=typeof this.options.max?this.maxValue=Math.max.apply(Math,this.values):this.maxValue=this.options.max}return a.prototype.render=function(){!this.element||!this.canvas},a.prototype.playAnimation=function(){var a=this.options,b=a.canvasBounds,c=a.animation;this.animationSet.length>0&&c&&c.enabled&&(this.animationSet.wijAttr("clip-rect",Raphael.format("{0} {1} 0 {2}",b.startX,b.startY,b.height)),this.animationSet.wijAnimate({"clip-rect":Raphael.format("{0} {1} {2} {3}",b.startX,b.startY,b.width,b.height)},c.duration,c.easing,null))},a.prototype.scanValues=function(){var a=this,b=a.options,d=b.bind,e=b.data;c.isArray(e)&&c.each(e,function(b,c){var e;e=d&&c&&void 0!==c[d]?c[d]:c,"string"==typeof e&&(e=parseFloat(e)),a.values.push(e)})},a.prototype.setRegionInfos=function(){var a,b=this,d=0,e=b.options.canvasBounds.height,f=b.options.canvasBounds.width;b.values&&0!==b.values.length&&(this.regionInfos||(this.regionInfos=[]),a=b.values.length,d=b.maxValue-b.minValue,b.valRange=d=0===d?1:d,c.each(b.values,function(c,g){var h,i;h=c*(f/a),i=e*(1-(g-b.minValue)/d),b.regionInfos.push({"value":g,"position":{"x":h,"y":i}})}))},a.prototype.getRegionInfos=function(){return this.regionInfos&&0!==this.regionInfos.length||this.setRegionInfos(),this.regionInfos},a.prototype.getColumnWidth=function(){return null},a}();b.sparklineRenderBase=h;var i=function(a){function b(b,c,d,e){a.call(this,b,c,d,e),this.regionInfos=[]}return __extends(b,a),b.prototype.render=function(){var b=this.options,d=[];a.prototype.render.call(this),this.setRegionInfos(),this.regionInfos&&this.regionInfos.length>0&&(c.each(this.regionInfos,function(a,b){var c=b.position;0===a?d.push("M"):d.push("L"),d.push(c.x),d.push(c.y)}),d.length>0&&(this.line=this.canvas.path(d.join(" ")),this.line.wijAttr(b.seriesStyle),this.line.wijAttr("fill","none"),this.animationSet.push(this.line),"line"===this.type&&this.playAnimation()))},b}(h);b.lineRender=i;var j=function(a){function b(b,c,d,e){a.call(this,b,c,d,e)}return __extends(b,a),b.prototype.render=function(){var b,d,e,f,g=this.options.canvasBounds.height,h=this.maxValue,i=this.minValue,j=this.options.origin;a.prototype.render.call(this),this.options.valueAxis?((null===j||void 0===j||"number"!=typeof j)&&(j=(h-i)/2+i),d=g*(1-(j-this.minValue)/this.valRange)):d=g,e=Raphael.parsePathString(this.line.attr("path")),e&&e.length>0&&(f=[],c.each(e,function(a,g){c.each(g,function(a,b){f.push(b)}),"M"===g[0]&&(b=g[1]),a===e.length-1&&(f.push("V"),f.push(d),f.push("H"),f.push(b),f.push("Z"))})),f.length>0&&(this.area=this.canvas.path(f.join(" ")),this.area.wijAttr(this.options.seriesStyle),this.area.wijAttr("stroke","none"),this.animationSet.push(this.area),this.playAnimation())},b}(i);b.areaRender=j;var k=function(a){function b(b,c,d,e){a.call(this,b,c,d,e),this.animateBars=[]}return __extends(b,a),b.prototype.render=function(){var b,d,e,f=this,g=this,h=g.maxValue,i=g.minValue,j=g.canvas,k=g.options,l=k.origin,m=k.animation,n=k.canvasBounds.height,o=k.seriesStyle,p=k.seriesStyle.negStyle,q=k.seriesStyle.zeroStyle;a.prototype.render.call(this),g.setRegionInfos(),delete o.zeroStyle,delete o.negStyle,p=c.extend({},o,p),q=c.extend({},o,q),this.columnWidth=g.adjustColumnWidth(),b=n/g.valRange,d=m&&m.enabled,k.valueAxis?((null===l||void 0===l||"number"!=typeof l)&&(l=(h-i)/2+i),e=(h-l)*b):e=n,g.regionInfos&&g.regionInfos.length>0&&(c.each(g.regionInfos,function(a,c){var h,m,r,s,t,u,v=c.position.x,w=c.value;k.valueAxis?w>=l?(u=w===l,t=u?c.position.y-2*b:c.position.y,h=d?e:c.position.y,m=u?2*b:(w-l)*b,r=u?q:o):(t=h=e,m=(l-w)*b,r=p):(u=w===i,t=u?c.position.y-2*b:c.position.y,h=e,m=u?2*b:n-c.position.y,r=u?q:o),s=j.rect(v,h,f.columnWidth,m),s.wijAttr(r),s.top=t,s.height=m,g.animateBars.push(s)}),g.playAnimation())},b.prototype.playAnimation=function(){var a=this.options,b=a.animation;a.canvasBounds.height;this.animateBars.length>0&&b&&b.enabled&&c.each(this.animateBars,function(a,c){var d;c.wijAttr({"height":0}),d={"height":c.height,"y":c.top},c.stop().wijAnimate(d,b.duration,b.easing,null)})},b.prototype.adjustColumnWidth=function(){var a,b=this.options,c=b.columnWidth,d=b.canvasBounds.width,e=2;return a=d/this.values.length-e,c>a?a:c},b.prototype.getColumnWidth=function(){return this.columnWidth},b}(h);b.columnRender=k;var l=function(){function a(){this.initSelector=":jqmData(role='wijsparkline')",this.wijCSS={"sparkline":"wijmo-wijsparkline","canvasWrapper":"wijmo-sparkline-canvas-wrapper"},this.type="line",this.seriesList=[],this.width=null,this.height=null,this.data=null,this.bind=null,this.seriesStyles=[],this.animation={"enabled":!0,"duration":2e3,"easing":"easeInCubic"},this.valueAxis=!1,this.origin=null,this.min=null,this.max=null,this.columnWidth=10,this.tooltipFormat=null,this.tooltipContent=null,this.mouseMove=null,this.click=null,this.disabled=!1}return a}();g.prototype.options=c.extend(!0,{},g.prototype.options,new l),g.prototype.widgetEventPrefix="wijsparkline",c.wijmo.registerWidget("wijsparkline",g.prototype)}(a.sparkline||(a.sparkline={}));a.sparkline}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){function c(a){var c=new e(a.serviceUrl,a.method),d={"fileName":a.fileName,"height":a.height,"width":a.width,"widgetName":a.widgetName,"widgetOptions":a.widgetOptions,"HTMLContent":a.HTMLContent,"widget":a.chart,"type":a.exportFileType,"pdfSetting":a.pdf},f=c.getExportData(d);b.exportFile(a,f)}function d(b,c,d,e){var f,g,h,i={};f=void 0===b?"export":b,g=void 0===c?"png":c,g=g.substr(0,1).toUpperCase()+g.substr(1),"string"==typeof d&&3===arguments.length?h=d:(h=void 0===e?"http://demos.componentone.com/ASPNET/ExportService/exportapi/chart":e,i=d),a.exporter.exportChart({"fileName":f,"serviceUrl":h,"chart":this,"exportFileType":a.exporter.ExportFileType[g],"pdf":i})}!function(a){a[a.Content=0]="Content",a[a.Options=1]="Options"}(b.ChartExportMethod||(b.ChartExportMethod={}));b.ChartExportMethod;b.exportChart=c;var e=function(){function a(a,b){this.serviceUrl=a,this.method=b}return a.prototype.getExportData=function(a){var b;return this.options=a,this._handleExportOption(),b={"fileName":a.fileName,"width":a.width,"height":a.height,"type":a.type,"pdfSettings":a.pdfSetting},0===this.method?b.content=a.HTMLContent:(b.options=a.widgetOptions,b.widgetName=a.widgetName),JSON.stringify(b,function(a,b){if("type"===a)switch(b){case 6:return"bmp";case 7:return"gif";case 5:return"jpg";case 3:return"pdf";case 8:return"tiff";default:return"png"}return b})},a.prototype._handleExportOption=function(){var a=this.options;a.widget&&(0==this.method?a.HTMLContent=escape(a.widget.chartElement[0].outerHTML):(a.widgetName=this._getWidgetName(),a.widgetOptions=JSON.stringify(this._handleChartOptions(a.widget,a.widgetName),function(a,b){return null!=b?b:void 0})),a.width=a.widget.chartElement.width(),a.height=a.widget.chartElement.height())},a.prototype._getWidgetName=function(){return this.options.widget?this.options.widget.widgetName:""},a.prototype._handleChartOptions=function(a,b){var c=a.options,d=$.extend(!0,{},c,{"animation":{"enabled":!1},"seriesTransition":{"enabled":!1},"hint":{"enable":!1}});return delete d.wijCSS,delete d.seriesHoverStyles,"wijbarchart"===b?this._handleBarChartOptions(d):"wijcandlestickchart"===b?this._handleCandlestickChartOptions(d,a):"wijcompositechart"===b&&this._handleCompositeChartOptions(d,a),this._handleAxis(d),d},a.prototype._handleAxis=function(a){var b=this;this._removeAuto(a.axis.x),$.isArray(a.axis.y)?$.each(a.axis.y,function(a,c){b._removeAuto(c)}):this._removeAuto(a.axis.y)},a.prototype._handleBarChartOptions=function(a){if(a.horizontal){var b=a.axis.x.compass;a.axis.x.compass=a.axis.y.compass,a.axis.y.compass=b}},a.prototype._handleCandlestickChartOptions=function(a,b){$.each(a.seriesList,function(a,c){c.data&&c.data.x&&$.each(c.data.x,function(a,d){"number"==typeof d&&(c.data.x[a]=b.timeUtil.getTime(d))})})},a.prototype._handleCompositeChartOptions=function(a,b){b.isContainsCandlestick&&b.timeUtil&&$.each(a.seriesList,function(a,c){c.data&&c.data.x&&$.each(c.data.x,function(a,d){"number"==typeof d&&(c.data.x[a]=b.timeUtil.getTime(d))})})},a.prototype._removeAuto=function(a){a.autoMax&&delete a.max,a.autoMin&&delete a.min,a.autoMajor&&delete a.unitMajor,a.autoMinor&&delete a.unitMinor},a.prototype._exportByForm=function(a){var b=$("<form>").appendTo("body"),c=$("<input type='text' name='data'>").appendTo(b);window.exportFrame||(window.exportFrame=$("<iframe name='my_iframe'>").appendTo("body"),window.exportFrame.hide()),b.hide(),c.val(a),b.attr({"method":"post","action":this.serviceUrl,"target":"my_iframe"}),b.submit(),b.remove()},a}();b.chartExport=e,b.innerExportChart=d,a.chart&&a.chart.wijchartcore&&(a.chart.wijchartcore.prototype.exportChart=d);var f=["wijbarchart","wijbubblechart","wijcandlestickchart","wijcompositechart","wijlinechart","wijpiechart","wijscatterchart"];$.each(f,function(a,b){$.wijmo[b]&&($.wijmo[b].prototype.exportChart=d)})}(a.exporter||(a.exporter={}));a.exporter}(wijmo||(wijmo={}));var wijmo;!function(a){!function(a){"use strict";function b(a,b){var d=a.sender,e=a.contentType,g=a.serviceUrl;d?d(b,a):"application/json"==e?f(b,g,a):c(b,g)}function c(a,b){var c='<input type="hidden" name="type" value="application/json"/>';c+='<input type="hidden" name="data" value="'+e(a)+'" />';var f=g("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body");f.ready(function(){var a=d(f);a.write("<html><head></head><body><form method='Post' action='"+b+"'>"+c+"</form>dummy windows for postback</body></html>");
var e=g(a).find("form");e.submit()})}function d(a){var b=a[0].contentWindow||a[0].contentDocument;return b.document&&(b=b.document),b}function e(a){return a.replace(h,function(a){return"&"+i[a]})}function f(a,b,c){var d=new XMLHttpRequest;d.open("post",b),d.send(a),d.responseType="blob",d.onreadystatechange=function(){d.response&&c.receiver&&c.receiver(d.response,c)}}var g=jQuery;a.exportFile=b;var h=/[<>&\r\n"']/gm,i={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"apos;"};!function(a){a[a.Xls=0]="Xls",a[a.Xlsx=1]="Xlsx",a[a.Csv=2]="Csv",a[a.Pdf=3]="Pdf",a[a.Png=4]="Png",a[a.Jpg=5]="Jpg",a[a.Bmp=6]="Bmp",a[a.Gif=7]="Gif",a[a.Tiff=8]="Tiff"}(a.ExportFileType||(a.ExportFileType={}));a.ExportFileType;!function(a){a[a.Standard=0]="Standard",a[a.TrueType=1]="TrueType",a[a.Embedded=2]="Embedded"}(a.FontType||(a.FontType={}));a.FontType;!function(a){a[a.Low=0]="Low",a[a.Medium=1]="Medium",a[a.Default=2]="Default",a[a.High=3]="High"}(a.ImageQuality||(a.ImageQuality={}));a.ImageQuality;!function(a){a[a.Default=-1]="Default",a[a.None=0]="None",a[a.BestSpeed=1]="BestSpeed",a[a.BestCompression=9]="BestCompression"}(a.CompressionType||(a.CompressionType={}));a.CompressionType;!function(a){a[a.NotPermit=0]="NotPermit",a[a.Standard40=2]="Standard40",a[a.Standard128=3]="Standard128",a[a.Aes128=4]="Aes128"}(a.PdfEncryptionType||(a.PdfEncryptionType={}));a.PdfEncryptionType;!function(a){a[a.Custom=0]="Custom",a[a.Letter=1]="Letter",a[a.LetterSmall=2]="LetterSmall",a[a.Tabloid=3]="Tabloid",a[a.Ledger=4]="Ledger",a[a.Legal=5]="Legal",a[a.Statement=6]="Statement",a[a.Executive=7]="Executive",a[a.A3=8]="A3",a[a.A4=9]="A4",a[a.A4Small=10]="A4Small",a[a.A5=11]="A5",a[a.B4=12]="B4",a[a.B5=13]="B5",a[a.Folio=14]="Folio",a[a.Quarto=15]="Quarto",a[a.Standard10x14=16]="Standard10x14",a[a.Standard11x17=17]="Standard11x17",a[a.Note=18]="Note",a[a.Number9Envelope=19]="Number9Envelope",a[a.Number10Envelope=20]="Number10Envelope",a[a.Number11Envelope=21]="Number11Envelope",a[a.Number12Envelope=22]="Number12Envelope",a[a.Number14Envelope=23]="Number14Envelope",a[a.CSheet=24]="CSheet",a[a.DSheet=25]="DSheet",a[a.ESheet=26]="ESheet",a[a.DLEnvelope=27]="DLEnvelope",a[a.C5Envelope=28]="C5Envelope",a[a.C3Envelope=29]="C3Envelope",a[a.C4Envelope=30]="C4Envelope",a[a.C6Envelope=31]="C6Envelope",a[a.C65Envelope=32]="C65Envelope",a[a.B4Envelope=33]="B4Envelope",a[a.B5Envelope=34]="B5Envelope",a[a.B6Envelope=35]="B6Envelope",a[a.ItalyEnvelope=36]="ItalyEnvelope",a[a.MonarchEnvelope=37]="MonarchEnvelope",a[a.PersonalEnvelope=38]="PersonalEnvelope",a[a.USStandardFanfold=39]="USStandardFanfold",a[a.GermanStandardFanfold=40]="GermanStandardFanfold",a[a.GermanLegalFanfold=41]="GermanLegalFanfold",a[a.IsoB4=42]="IsoB4",a[a.JapanesePostcard=43]="JapanesePostcard",a[a.Standard9x11=44]="Standard9x11",a[a.Standard10x11=45]="Standard10x11",a[a.Standard15x11=46]="Standard15x11",a[a.InviteEnvelope=47]="InviteEnvelope",a[a.LetterExtra=50]="LetterExtra",a[a.LegalExtra=51]="LegalExtra",a[a.TabloidExtra=52]="TabloidExtra",a[a.A4Extra=53]="A4Extra",a[a.LetterTransverse=54]="LetterTransverse",a[a.A4Transverse=55]="A4Transverse",a[a.LetterExtraTransverse=56]="LetterExtraTransverse",a[a.APlus=57]="APlus",a[a.BPlus=58]="BPlus",a[a.LetterPlus=59]="LetterPlus",a[a.A4Plus=60]="A4Plus",a[a.A5Transverse=61]="A5Transverse",a[a.B5Transverse=62]="B5Transverse",a[a.A3Extra=63]="A3Extra",a[a.A5Extra=64]="A5Extra",a[a.B5Extra=65]="B5Extra",a[a.A2=66]="A2",a[a.A3Transverse=67]="A3Transverse",a[a.A3ExtraTransverse=68]="A3ExtraTransverse",a[a.JapaneseDoublePostcard=69]="JapaneseDoublePostcard",a[a.A6=70]="A6",a[a.JapaneseEnvelopeKakuNumber2=71]="JapaneseEnvelopeKakuNumber2",a[a.JapaneseEnvelopeKakuNumber3=72]="JapaneseEnvelopeKakuNumber3",a[a.JapaneseEnvelopeChouNumber3=73]="JapaneseEnvelopeChouNumber3",a[a.JapaneseEnvelopeChouNumber4=74]="JapaneseEnvelopeChouNumber4",a[a.LetterRotated=75]="LetterRotated",a[a.A3Rotated=76]="A3Rotated",a[a.A4Rotated=77]="A4Rotated",a[a.A5Rotated=78]="A5Rotated",a[a.B4JisRotated=79]="B4JisRotated",a[a.B5JisRotated=80]="B5JisRotated",a[a.JapanesePostcardRotated=81]="JapanesePostcardRotated",a[a.JapaneseDoublePostcardRotated=82]="JapaneseDoublePostcardRotated",a[a.A6Rotated=83]="A6Rotated",a[a.JapaneseEnvelopeKakuNumber2Rotated=84]="JapaneseEnvelopeKakuNumber2Rotated",a[a.JapaneseEnvelopeKakuNumber3Rotated=85]="JapaneseEnvelopeKakuNumber3Rotated",a[a.JapaneseEnvelopeChouNumber3Rotated=86]="JapaneseEnvelopeChouNumber3Rotated",a[a.JapaneseEnvelopeChouNumber4Rotated=87]="JapaneseEnvelopeChouNumber4Rotated",a[a.B6Jis=88]="B6Jis",a[a.B6JisRotated=89]="B6JisRotated",a[a.Standard12x11=90]="Standard12x11",a[a.JapaneseEnvelopeYouNumber4=91]="JapaneseEnvelopeYouNumber4",a[a.JapaneseEnvelopeYouNumber4Rotated=92]="JapaneseEnvelopeYouNumber4Rotated",a[a.Prc16K=93]="Prc16K",a[a.Prc32K=94]="Prc32K",a[a.Prc32KBig=95]="Prc32KBig",a[a.PrcEnvelopeNumber1=96]="PrcEnvelopeNumber1",a[a.PrcEnvelopeNumber2=97]="PrcEnvelopeNumber2",a[a.PrcEnvelopeNumber3=98]="PrcEnvelopeNumber3",a[a.PrcEnvelopeNumber4=99]="PrcEnvelopeNumber4",a[a.PrcEnvelopeNumber5=100]="PrcEnvelopeNumber5",a[a.PrcEnvelopeNumber7=102]="PrcEnvelopeNumber7",a[a.PrcEnvelopeNumber8=103]="PrcEnvelopeNumber8",a[a.PrcEnvelopeNumber9=104]="PrcEnvelopeNumber9",a[a.PrcEnvelopeNumber10=105]="PrcEnvelopeNumber10",a[a.Prc16KRotated=106]="Prc16KRotated",a[a.Prc32KRotated=107]="Prc32KRotated",a[a.Prc32KBigRotated=108]="Prc32KBigRotated",a[a.PrcEnvelopeNumber1Rotated=109]="PrcEnvelopeNumber1Rotated",a[a.PrcEnvelopeNumber2Rotated=110]="PrcEnvelopeNumber2Rotated",a[a.PrcEnvelopeNumber3Rotated=111]="PrcEnvelopeNumber3Rotated",a[a.PrcEnvelopeNumber4Rotated=112]="PrcEnvelopeNumber4Rotated",a[a.PrcEnvelopeNumber5Rotated=113]="PrcEnvelopeNumber5Rotated",a[a.PrcEnvelopeNumber6Rotated=114]="PrcEnvelopeNumber6Rotated",a[a.PrcEnvelopeNumber7Rotated=115]="PrcEnvelopeNumber7Rotated",a[a.PrcEnvelopeNumber8Rotated=116]="PrcEnvelopeNumber8Rotated",a[a.PrcEnvelopeNumber9Rotated=117]="PrcEnvelopeNumber9Rotated",a[a.PrcEnvelopeNumber10Rotated=118]="PrcEnvelopeNumber10Rotated"}(a.PaperKind||(a.PaperKind={}));a.PaperKind}(a.exporter||(a.exporter={}));a.exporter}(wijmo||(wijmo={}));var wijmo;!function(a){!function(b){"use strict";function c(a){b.exportFile(a,JSON.stringify(f.exportSource(a)))}var d=jQuery;!function(a){a[a.None=0]="None",a[a.Template=1]="Template",a[a.AltTemplate=2]="AltTemplate"}(b.RowTemplateType||(b.RowTemplateType={}));b.RowTemplateType;!function(a){a[a.Text=1]="Text",a[a.Image=2]="Image",a[a.Link=3]="Link",a[a.Checkbox=4]="Checkbox",a[a.Html=5]="Html"}(b.ColType||(b.ColType={}));var e=(b.ColType,function(){function b(a,b){var c=this;c.environmentInfo=b,c._init(a)}return b.prototype._init=function(a){var b=this,c=a.dataView(),e=d(a.element).find(">colgroup>col");if(b.grid=a,b.showRowHeader=a.option("showRowHeader"),b.dataView=c,b.dataCount=c.count(),b.dataCount>0){var f=c.item(0);b.isArrayData="array"==d.type(f)}b._initColInfos(e)},b.prototype._initColInfos=function(a){var b=this;b.colLeaves=d.grep(b.grid.columns(),function(a){return a.option("isLeaf")}),b.colWidths=[],b.colInfos=a.map(function(a){if(0>a||a>b.colLeaves.length-1)return null;var c=b.colLeaves[a],e=1,f=c.option("dataTypeQualifier");b.isHtmlCol(c)?e=5:b.isLinkCol(c)?e=3:b.isImageCol(c)?e=2:b.isCheckBoxCol(c)&&(e=4),b.colWidths.push(b.computedWidthToPt(d(this).css("width")));var g={"formatString":c.option("dataFormatString"),"dataType":c.option("dataType"),"type":e};return f&&(g.dataTypeQualifier=f),g}).get()},b.prototype.computedWidthToPt=function(a){return f.pxToPt(a,this.environmentInfo.dpiX)},b.prototype.computedHeightToPt=function(a){return f.pxToPt(a,this.environmentInfo.dpiY)},b.prototype.getDataValue=function(a,b){var c=this;if(a>=c.dataCount||0>a||0>b)return null;var d=c.grid.dataView().item(a);if(c.isArrayData)return c.showRowHeader&&b--,0>b||b>=d.length?null:d[b];var e=c.colLeaves;if(b>=e.length)return null;var f=e[b].option("dataKey");return d[f]},b.prototype.isCheckBoxCol=function(b){return b instanceof a.grid.c1booleanfield},b.prototype.isHtmlCol=function(a){return null!=a.option("cellFormatter")?!0:!1},b.prototype.isImageCol=function(a){return!1},b.prototype.isLinkCol=function(b){return b instanceof a.grid.c1buttonfield&&"link"==b.option("buttonType")?!0:!1},b}());b.exportContext=e,b.exportGrid=c;var f=function(){function b(){}return b.exportSource=function(b){var c=a.exporter.gridExporter._generateEnvironmentInfo(),d={"grid":a.exporter.gridExporter._generateTemplate(new e(b.grid,c)),"environmentInfo":c,"exportFileType":b.exportFileType};return b.fileName&&(d.fileName=b.fileName),b.pdf&&(d.pdf=b.pdf),b.excel&&(d.excel=b.excel),d},b.pxToPt=function(b,c){if(null==b)return 0;b=b.trim().toLowerCase();var d="px";if(-1==b.indexOf(d,b.length-d.length))return 0;var e=parseFloat(b);return isNaN(e)?0:e/c*a.exporter.gridExporter.pointPerInch},b._generateEnvironmentInfo=function(){var a=window.location,b=a.protocol+"//"+a.hostname+(a.port&&":"+a.port)+"/",c=d("<div style='height:1in;left:-100%;position: absolute;top:-100%;width:1in;'></div>").appendTo(d(document.body));return{"baseUrl":b,"dpiX":c.outerWidth(),"dpiY":c.outerHeight(),"culture":navigator.language?navigator.language:navigator.browserLanguage}},b._generateTemplate=function(b){var c=d(b.grid.element),e=a.exporter.gridExporter._readStyle(b,c),f=a.exporter.gridExporter._readSection(b,c.find(">thead")),g=a.exporter.gridExporter._readSection(b,c.find(">tfoot")),h=a.exporter.gridExporter._readSection(b,c.find(">tbody"),!0),i=c.parent();if(i.hasClass("wijmo-wijgrid")){var j={};d.extend(j,a.exporter.gridExporter._readStyle(b,i),e),e=j}return{"colWidths":b.colWidths,"style":e,"header":f,"footer":g,"body":h,"width":b.computedWidthToPt(c.css("width"))}},b._readSection=function(b,c,d){return{"colInfos":d?b.colInfos:null,"style":a.exporter.gridExporter._readStyle(b,c),"rows":a.exporter.gridExporter._readRows(b,c,d),"height":b.computedHeightToPt(c.css("height"))}},b._readRows=function(b,c,e){return c&&c.length?c.find(">tr").map(function(c){var f=d(this),g=e&&1==c?2:e&&0!=c?0:1,h={"height":b.computedHeightToPt(f.css("height")),"cells":a.exporter.gridExporter._readCells(b,f,c,e,g)};return 0!=g&&(h.style=a.exporter.gridExporter._readStyle(b,f),h.templateType=g),h}).get():null},b._readCells=function(b,c,e,f,g){return c.find(">th,>td").map(function(c){var h=d(this),i={},j=a.exporter.gridExporter._getSpan(h,"colspan"),k=a.exporter.gridExporter._getSpan(h,"rowspan"),l=a.exporter.gridExporter._cellPos(h).left,m=b.colInfos[l],n=h.find(">.wijmo-wijgrid-innercell");if(0==n.length&&(n=h),l!=c&&(i.colIndex=l),1!=k&&(i.rowSpan=k),1!=j&&(i.colSpan=j),f)switch(m.type){case 2:var o=h.find("img");if(0!=o.length){var p={"src":o.attr("src"),"height":b.computedHeightToPt(o.css("height")),"width":b.computedWidthToPt(o.css("width"))};i.value=p}break;case 3:var q=h.find("a");if(0!=q.length){var r={"href":q.attr("href"),"text":q.text()};i.value=r}break;case 5:i.value=h.html();break;case 1:case 4:i.value=b.getDataValue(e,l),i.text=h.text();break;default:throw"Wrong column type!"}else i.text=h.text();return 0!=g&&(i.style=a.exporter.gridExporter._readStyle(b,h),d.extend(i.style,a.exporter.gridExporter._readFontStyle(b,n))),i}).get()},b._readStyle=function(b,c){var e={"backgroundColor":c.css("backgroundColor"),"verticalAlign":c.css("verticalAlign")};return d.extend(e,a.exporter.gridExporter._readBorderStyle(b,"Top",c),a.exporter.gridExporter._readBorderStyle(b,"Right",c),a.exporter.gridExporter._readBorderStyle(b,"Bottom",c),a.exporter.gridExporter._readBorderStyle(b,"Left",c)),e},b._readBorderStyle=function(a,b,c){var d={},e="border"+b+"Color",f="border"+b+"Style",g="border"+b+"Width",h=c.css(f);if("none"!=h){var i=a.computedWidthToPt(c.css(g));0!=i&&(d[e]=c.css(e),d[f]=h,d[g]=i)}return d},b._readFontStyle=function(a,b){var c={};return c.textAlign=b.css("textAlign"),c.color=b.css("color"),c.fontFamily=b.css("fontFamily"),c.fontWeight=b.css("fontWeight"),c.fontStyle=b.css("fontStyle"),c.fontSize=a.computedHeightToPt(b.css("fontSize")),c.textDecoration=b.css("textDecoration"),c},b._cellPos=function(b,c){var d=b.data("cellPos");if(!d||c){var e=b.closest("table, thead, tbody, tfoot");a.exporter.gridExporter._scanTable(e)}return d=b.data("cellPos")},b._getSpan=function(a,b){var c=a.attr(b);if(c){var d=parseInt(c);if(!isNaN(d))return d}return 1},b._scanTable=function(b){var c=[];b.children("tr").each(function(b,e){d(e).children("td, th").each(function(e,f){var g,h,i=d(f),j=a.exporter.gridExporter._getSpan(i,"colspan"),k=a.exporter.gridExporter._getSpan(i,"rowspan");for(j=j?j:1,k=k?k:1;c[b]&&c[b][e];++e);for(g=e;e+j>g;++g)for(h=b;b+k>h;++h)c[h]||(c[h]=[]),c[h][g]=!0;var l={"top":b,"left":e};i.data("cellPos",l)})})},b.pointPerInch=72,b}();b.gridExporter=f;var g=function(b,c,d,e){var f,g,h,i,j={};g=void 0===b?"export":b,h=void 0===c?"csv":c,h=h.substr(0,1).toUpperCase()+h.substr(1),"string"==typeof d&&3===arguments.length?i=d:(i=void 0===e?"http://demos.componentone.com/ASPNET/ExportService/exportapi/grid":e,j=d),f={"fileName":g,"serviceUrl":i,"grid":this,"exportFileType":a.exporter.ExportFileType[h]},"pdf"===c&&(f.pdf=j),("xls"===c||"xlsx"===c)&&(f.excel=j),a.exporter.exportGrid(f)};a.grid&&a.grid.wijgrid&&(a.grid.wijgrid.prototype.exportGrid=g),d.wijmo.wijgrid&&(d.wijmo.wijgrid.prototype.exportGrid=g)}(a.exporter||(a.exporter={}));a.exporter}(wijmo||(wijmo={}));